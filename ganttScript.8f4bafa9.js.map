{"version":3,"sources":["webpack://dhtmlxgantt/sources/dhtmlxgantt.gpl.ts","webpack://dhtmlxgantt/webpack/universalModuleDefinition","webpack://dhtmlxgantt/webpack/bootstrap","webpack://dhtmlxgantt/sources/utils/utils.js","webpack://dhtmlxgantt/sources/core/ui/utils/dom_helpers.js","webpack://dhtmlxgantt/sources/utils/helpers.js","webpack://dhtmlxgantt/sources/utils/extends.js","webpack://dhtmlxgantt/sources/utils/eventable.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/get_visible_bars_range.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/controls/base_control.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/editors/base.js","webpack://dhtmlxgantt/sources/utils/env.js","webpack://dhtmlxgantt/sources/core/ui/layout/cell.js","webpack://dhtmlxgantt/sources/utils/is_headless.js","webpack://dhtmlxgantt/sources/utils/placeholder_task.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/controls/select_control.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/is_bar_in_viewport.js","webpack://dhtmlxgantt/sources/core/ui/render/is_legacy_smart_render.js","webpack://dhtmlxgantt/(webpack)/buildin/global.js","webpack://dhtmlxgantt/sources/utils/global.js","webpack://dhtmlxgantt/sources/core/ui/grid/tasks_grid_dnd_marker_helpers/drop_target.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/is_column_visible.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/get_visible_cells_range.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/get_bg_row_rectangle.js","webpack://dhtmlxgantt/sources/core/ui/render/task_bar_render.js","webpack://dhtmlxgantt/sources/core/ui/timeline/timeline.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/get_grid_row_rectangle.js","webpack://dhtmlxgantt/sources/core/ui/mouse_event_container.js","webpack://dhtmlxgantt/sources/core/ui/grid/grid.js","webpack://dhtmlxgantt/sources/core/ui/timeline/scales.js","webpack://dhtmlxgantt/sources/core/ui/utils/html_helpers.js","webpack://dhtmlxgantt/sources/core/resource_timetable_builder.js","webpack://dhtmlxgantt/sources/core/ui/layout/layout.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/is_link_in_viewport.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/factory/get_visible_link_range.js","webpack://dhtmlxgantt/sources/core/worktime/strategy/work_unit_cache/index.ts","webpack://dhtmlxgantt/sources/core/worktime/calendar_arguments_helper.js","webpack://dhtmlxgantt/sources/core/ui/row_position_mixin.js","webpack://dhtmlxgantt/sources/core/common/duration_formatter_numeric.ts","webpack://dhtmlxgantt/sources/utils/task_tree_helpers.js","webpack://dhtmlxgantt/sources/core/gantt_data_range.js","webpack://dhtmlxgantt/sources/core/datastore/treedatastore.js","webpack://dhtmlxgantt/sources/core/datastore/power_array.js","webpack://dhtmlxgantt/sources/core/datastore/datastore.js","webpack://dhtmlxgantt/node_modules/process/browser.js","webpack://dhtmlxgantt/sources/utils/timeout.js","webpack://dhtmlxgantt/sources/core/ui/utils/dom_event_scope.js","webpack://dhtmlxgantt/sources/core/ui/wai_aria.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/lightbox_optional_time.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/controls/typeselect_control.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/controls/constraint_control.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/controls/parent_control.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/controls/duration_control.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/controls/radio_control.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/controls/checkbox_control.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/controls/time_control.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/controls/textarea_control.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/controls/template_control.js","webpack://dhtmlxgantt/sources/core/ui/lightbox/index.js","webpack://dhtmlxgantt/sources/core/ui/touch.js","webpack://dhtmlxgantt/sources/core/ui/plugins/timeline_zoom.ts","webpack://dhtmlxgantt/sources/core/ui/plugins/dhtmlx_hooks.js","webpack://dhtmlxgantt/sources/core/ui/plugins/jquery_hooks.js","webpack://dhtmlxgantt/sources/core/ui/plugins/autoscroll.js","webpack://dhtmlxgantt/sources/core/ui/plugins/index.js","webpack://dhtmlxgantt/sources/css/skins/contrast_white.js","webpack://dhtmlxgantt/sources/css/skins/contrast_black.js","webpack://dhtmlxgantt/sources/css/skins/material.js","webpack://dhtmlxgantt/sources/css/skins/broadway.js","webpack://dhtmlxgantt/sources/css/skins/terrace.js","webpack://dhtmlxgantt/sources/css/skins/meadow.js","webpack://dhtmlxgantt/sources/css/skins/skyblue.js","webpack://dhtmlxgantt/sources/core/ui/skin.js","webpack://dhtmlxgantt/sources/core/facades/layout.js","webpack://dhtmlxgantt/sources/core/data_task_layers.gpl.js","webpack://dhtmlxgantt/sources/core/ui/main_layout_initializer.js","webpack://dhtmlxgantt/sources/core/ui/timeline/links_dnd.js","webpack://dhtmlxgantt/sources/core/ui/timeline/tasks_dnd.js","webpack://dhtmlxgantt/sources/core/ui/timeline/main_timeline_initializer.js","webpack://dhtmlxgantt/sources/core/ui/grid/tasks_grid_dnd_marker_helpers/highlight.js","webpack://dhtmlxgantt/sources/core/ui/grid/tasks_grid_dnd_marker_helpers/multi_level.js","webpack://dhtmlxgantt/sources/core/ui/grid/tasks_grid_dnd_marker_helpers/locked_level.js","webpack://dhtmlxgantt/sources/core/ui/grid/tasks_grid_dnd_marker.js","webpack://dhtmlxgantt/sources/core/ui/grid/tasks_grid_dnd.js","webpack://dhtmlxgantt/sources/core/ui/grid/main_grid_initializer.js","webpack://dhtmlxgantt/sources/core/ui/render/task_grid_row_resize_render.js","webpack://dhtmlxgantt/sources/core/ui/render/resource_histogram_render.js","webpack://dhtmlxgantt/sources/core/ui/render/resource_matrix_render.js","webpack://dhtmlxgantt/sources/core/ui/render/task_grid_line_render.js","webpack://dhtmlxgantt/sources/core/ui/render/link_render.js","webpack://dhtmlxgantt/sources/core/ui/render/prerender/task_bg_placeholder.js","webpack://dhtmlxgantt/sources/core/ui/render/task_bg_render.js","webpack://dhtmlxgantt/sources/core/ui/render/task_rollup_render.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/is_split_task_in_viewport.js","webpack://dhtmlxgantt/sources/core/ui/render/task_split_render.js","webpack://dhtmlxgantt/sources/core/ui/render/task_bar_smart_render.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/linked_properties.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/editors/duration.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/editors/predecessor.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/editors/date.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/editors/select.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/editors/number.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/editors/text.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/keyboard_mappings/keyboard_navigation.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/keyboard_mappings/default.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/keyboard_mappings.js","webpack://dhtmlxgantt/sources/core/ui/grid/editors/controller.js","webpack://dhtmlxgantt/sources/core/ui/timeline/tasks_canvas_render.gpl.js","webpack://dhtmlxgantt/sources/core/ui/layout/scrollbar_cell.js","webpack://dhtmlxgantt/sources/core/ui/layout/resizer_cell.gpl.js","webpack://dhtmlxgantt/sources/core/ui/layout/view_cell.js","webpack://dhtmlxgantt/sources/core/ui/layout/view_layout.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/get_bar_rectangle.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/get_link_rectangle.js","webpack://dhtmlxgantt/sources/core/ui/render/viewport/is_in_viewport.js","webpack://dhtmlxgantt/sources/core/ui/render/render_factory.js","webpack://dhtmlxgantt/sources/core/ui/render/layer_engine.js","webpack://dhtmlxgantt/sources/core/ui/gantt_layers.js","webpack://dhtmlxgantt/sources/core/ui/mouse.js","webpack://dhtmlxgantt/sources/core/ui/configurable.js","webpack://dhtmlxgantt/sources/core/ui/ui_factory.js","webpack://dhtmlxgantt/sources/core/ui/index.js","webpack://dhtmlxgantt/sources/core/ui/message.js","webpack://dhtmlxgantt/sources/core/ui_core.js","webpack://dhtmlxgantt/sources/locale/locale_ua.ts","webpack://dhtmlxgantt/sources/locale/locale_tr.ts","webpack://dhtmlxgantt/sources/locale/locale_sv.ts","webpack://dhtmlxgantt/sources/locale/locale_sk.ts","webpack://dhtmlxgantt/sources/locale/locale_si.ts","webpack://dhtmlxgantt/sources/locale/locale_ru.ts","webpack://dhtmlxgantt/sources/locale/locale_ro.ts","webpack://dhtmlxgantt/sources/locale/locale_pt.ts","webpack://dhtmlxgantt/sources/locale/locale_pl.ts","webpack://dhtmlxgantt/sources/locale/locale_no.ts","webpack://dhtmlxgantt/sources/locale/locale_nl.ts","webpack://dhtmlxgantt/sources/locale/locale_nb.ts","webpack://dhtmlxgantt/sources/locale/locale_manager.ts","webpack://dhtmlxgantt/sources/locale/locale_kr.ts","webpack://dhtmlxgantt/sources/locale/locale_jp.ts","webpack://dhtmlxgantt/sources/locale/locale_it.ts","webpack://dhtmlxgantt/sources/locale/locale_id.ts","webpack://dhtmlxgantt/sources/locale/locale_hu.ts","webpack://dhtmlxgantt/sources/locale/locale_hr.ts","webpack://dhtmlxgantt/sources/locale/locale_he.ts","webpack://dhtmlxgantt/sources/locale/locale_fr.ts","webpack://dhtmlxgantt/sources/locale/locale_fi.ts","webpack://dhtmlxgantt/sources/locale/locale_fa.ts","webpack://dhtmlxgantt/sources/locale/locale_es.ts","webpack://dhtmlxgantt/sources/locale/locale_en.ts","webpack://dhtmlxgantt/sources/locale/locale_el.ts","webpack://dhtmlxgantt/sources/locale/locale_de.ts","webpack://dhtmlxgantt/sources/locale/locale_da.ts","webpack://dhtmlxgantt/sources/locale/locale_cs.ts","webpack://dhtmlxgantt/sources/locale/locale_cn.ts","webpack://dhtmlxgantt/sources/locale/locale_ca.ts","webpack://dhtmlxgantt/sources/locale/locale_be.ts","webpack://dhtmlxgantt/sources/locale/locale_ar.ts","webpack://dhtmlxgantt/sources/locale/index.ts","webpack://dhtmlxgantt/sources/publish_helpers/void_script_third.ts","webpack://dhtmlxgantt/sources/core/destructor.js","webpack://dhtmlxgantt/sources/core/common/assert.js","webpack://dhtmlxgantt/sources/core/ui/resize_listener.js","webpack://dhtmlxgantt/sources/core/gantt_core.js","webpack://dhtmlxgantt/sources/core/cached_functions.js","webpack://dhtmlxgantt/sources/core/data_task_types.js","webpack://dhtmlxgantt/sources/publish_helpers/void_script_second.ts","webpack://dhtmlxgantt/sources/core/data.js","webpack://dhtmlxgantt/sources/core/facades/worktime_calendars.js","webpack://dhtmlxgantt/sources/core/worktime/strategy/no_work_time.js","webpack://dhtmlxgantt/sources/core/worktime/time_calculator.js","webpack://dhtmlxgantt/sources/core/worktime/dynamic_resource_calendars.js","webpack://dhtmlxgantt/sources/core/worktime/legacy_resource_config.js","webpack://dhtmlxgantt/sources/core/worktime/strategy/work_unit_cache/date_duration_cache.ts","webpack://dhtmlxgantt/sources/core/worktime/strategy/work_unit_cache/larger_units_helper.ts","webpack://dhtmlxgantt/sources/core/worktime/strategy/work_unit_cache/workunit_object_cache.ts","webpack://dhtmlxgantt/sources/core/worktime/strategy/work_unit_cache/workunit_map_cache.ts","webpack://dhtmlxgantt/sources/core/worktime/strategy/calendar_strategy.js","webpack://dhtmlxgantt/sources/core/worktime/strategy/work_calendar_merger.js","webpack://dhtmlxgantt/sources/core/worktime/calendar_manager.js","webpack://dhtmlxgantt/sources/core/worktime/work_time.js","webpack://dhtmlxgantt/sources/core/load.js","webpack://dhtmlxgantt/sources/core/tasks.js","webpack://dhtmlxgantt/sources/core/grid_column_api.gpl.js","webpack://dhtmlxgantt/sources/core/ui/plugins/column_grid_dnd/scrollable_grid.ts","webpack://dhtmlxgantt/sources/core/ui/plugins/column_grid_dnd/column_grid_dnd.ts","webpack://dhtmlxgantt/sources/core/ui/plugins/column_grid_dnd/index.ts","webpack://dhtmlxgantt/sources/core/ui/grid/task_grid_row_resize.js","webpack://dhtmlxgantt/sources/core/ui/row_position_fixed_height.js","webpack://dhtmlxgantt/sources/core/ui/grid/grid_resize.gpl.js","webpack://dhtmlxgantt/sources/core/grid_column_api.js","webpack://dhtmlxgantt/sources/core/dynamic_loading.js","webpack://dhtmlxgantt/sources/core/plugins/empty_state_screen.ts","webpack://dhtmlxgantt/sources/core/common/link_formatter_simple.ts","webpack://dhtmlxgantt/sources/core/plugins/formatters.js","webpack://dhtmlxgantt/sources/core/plugins/auto_task_types.js","webpack://dhtmlxgantt/sources/core/plugins/new_task_placeholder.js","webpack://dhtmlxgantt/sources/core/plugins/resource_assignments.js","webpack://dhtmlxgantt/sources/core/plugins/resources.js","webpack://dhtmlxgantt/sources/core/plugins/wbs.js","webpack://dhtmlxgantt/sources/core/plugins/batch_update.js","webpack://dhtmlxgantt/sources/core/plugins/index.js","webpack://dhtmlxgantt/sources/core/dataprocessor/simple_storage.ts","webpack://dhtmlxgantt/sources/core/dataprocessor/extend_gantt.ts","webpack://dhtmlxgantt/sources/core/dataprocessor/data_processor_events.ts","webpack://dhtmlxgantt/sources/core/dataprocessor/data_processor.ts","webpack://dhtmlxgantt/sources/core/dataprocessor/index.js","webpack://dhtmlxgantt/sources/core/datastore/datastore_render.js","webpack://dhtmlxgantt/sources/core/datastore/select.js","webpack://dhtmlxgantt/sources/core/facades/datastore_links.js","webpack://dhtmlxgantt/sources/core/facades/datastore_tasks.js","webpack://dhtmlxgantt/sources/core/facades/datastore.js","webpack://dhtmlxgantt/sources/core/datastore/datastore_hooks.js","webpack://dhtmlxgantt/node_modules/setimmediate/setImmediate.js","webpack://dhtmlxgantt/node_modules/timers-browserify/main.js","webpack://dhtmlxgantt/node_modules/bluebird/js/browser/bluebird.js","webpack://dhtmlxgantt/sources/utils/promise.js","webpack://dhtmlxgantt/sources/core/common/state.js","webpack://dhtmlxgantt/sources/core/common/templates.js","webpack://dhtmlxgantt/sources/core/common/dnd.js","webpack://dhtmlxgantt/node_modules/remote-client/dist/remote.es6.js","webpack://dhtmlxgantt/sources/core/remote/remote_events.js","webpack://dhtmlxgantt/sources/core/common/date_parsers/csp_compliant_version.ts","webpack://dhtmlxgantt/sources/core/common/date_parsers/fast_version.ts","webpack://dhtmlxgantt/sources/core/common/date.js","webpack://dhtmlxgantt/sources/core/common/serialize.ts","webpack://dhtmlxgantt/sources/core/common/ajax.js","webpack://dhtmlxgantt/sources/core/common/config.ts","webpack://dhtmlxgantt/sources/core/common/services.js","webpack://dhtmlxgantt/sources/ext/extension_manager.ts","webpack://dhtmlxgantt/sources/constants/index.js","webpack://dhtmlxgantt/sources/factory/make_instance_common.js","webpack://dhtmlxgantt/sources/factory/make_instance_web.js","webpack://dhtmlxgantt/sources/ext/undo/undo.ts","webpack://dhtmlxgantt/sources/ext/undo/monitor.ts","webpack://dhtmlxgantt/sources/ext/undo/index.ts","webpack://dhtmlxgantt/sources/ext/tooltip/tooltip.ts","webpack://dhtmlxgantt/sources/ext/tooltip/tooltipManager.ts","webpack://dhtmlxgantt/sources/ext/tooltip/index.ts","webpack://dhtmlxgantt/sources/ext/quick_info/quickInfo.ts","webpack://dhtmlxgantt/sources/ext/quick_info/index.ts","webpack://dhtmlxgantt/sources/ext/multiselect.js","webpack://dhtmlxgantt/sources/ext/marker.js","webpack://dhtmlxgantt/sources/ext/keyboard_navigation/core.js","webpack://dhtmlxgantt/sources/ext/keyboard_navigation/modals.js","webpack://dhtmlxgantt/sources/ext/keyboard_navigation/elements/task_cell.js","webpack://dhtmlxgantt/sources/ext/keyboard_navigation/elements/task_row.js","webpack://dhtmlxgantt/sources/ext/keyboard_navigation/elements/header_cell.js","webpack://dhtmlxgantt/sources/ext/keyboard_navigation/elements/nav_node.js","webpack://dhtmlxgantt/sources/ext/keyboard_navigation/elements/gantt_node.js","webpack://dhtmlxgantt/sources/ext/keyboard_navigation/common/trap_modal_focus.js","webpack://dhtmlxgantt/sources/ext/keyboard_navigation/common/eventhandler.js","webpack://dhtmlxgantt/sources/ext/keyboard_navigation/common/keyboard_shortcuts.js","webpack://dhtmlxgantt/sources/ext/keyboard_navigation.js","webpack://dhtmlxgantt/sources/ext/fullscreen/index.ts","webpack://dhtmlxgantt/sources/ext/drag_timeline/eventsManager.ts","webpack://dhtmlxgantt/sources/ext/drag_timeline/index.ts","webpack://dhtmlxgantt/sources/ext/click_drag/selectedRegion.ts","webpack://dhtmlxgantt/sources/ext/click_drag/eventsManager.ts","webpack://dhtmlxgantt/sources/ext/click_drag/index.ts","webpack://dhtmlxgantt/sources/ext/extensions_gpl.ts","node_modules/process/browser.js","../src/compat.ts","../src/constants.ts","../src/assert.ts","../src/crypt.ts","../src/deepCopy.ts","../src/global.ts","../src/defaults.ts","../src/deferred.ts","../src/emulator.ts","../src/environment.ts","../src/errors.ts","../src/json.ts","../src/jwt.ts","../src/obj.ts","../src/promise.ts","../src/query.ts","../src/sha1.ts","../src/subscribe.ts","../src/validation.ts","../src/utf8.ts","../src/uuid.ts","../src/exponential_backoff.ts","../src/formatters.ts","../../src/component_container.ts","../../src/component.ts","../../src/constants.ts","../../src/provider.ts","../../src/logger.ts","node_modules/idb/build/wrap-idb-value.js","node_modules/idb/build/index.js","../../src/index.ts","../../src/platformLoggerService.ts","../../src/internal.ts","../../src/errors.ts","../../src/firebaseApp.ts","../../src/api.ts","../../src/indexeddb.ts","../../src/heartbeatService.ts","../../src/registerCoreComponents.ts","../../index.ts","../src/index.ts","../src/core/version.ts","../src/core/storage/DOMStorageWrapper.ts","../src/core/storage/MemoryStorage.ts","../src/core/storage/storage.ts","../src/core/util/util.ts","../src/core/AppCheckTokenProvider.ts","../src/core/AuthTokenProvider.ts","../src/realtime/Constants.ts","../src/core/RepoInfo.ts","../src/core/stats/StatsCollection.ts","../src/core/stats/StatsManager.ts","../src/realtime/polling/PacketReceiver.ts","../src/realtime/BrowserPollConnection.ts","../src/realtime/WebSocketConnection.ts","../src/realtime/TransportManager.ts","../src/realtime/Connection.ts","../src/core/ServerActions.ts","../src/core/util/EventEmitter.ts","../src/core/util/OnlineMonitor.ts","../src/core/util/Path.ts","../src/core/util/VisibilityMonitor.ts","../src/core/PersistentConnection.ts","../src/core/snap/Node.ts","../src/core/snap/indexes/Index.ts","../src/core/snap/indexes/KeyIndex.ts","../src/core/util/SortedMap.ts","../src/core/snap/comparators.ts","../src/core/snap/snap.ts","../src/core/snap/LeafNode.ts","../src/core/snap/indexes/PriorityIndex.ts","../src/core/snap/childSet.ts","../src/core/snap/IndexMap.ts","../src/core/snap/ChildrenNode.ts","../src/core/snap/nodeFromJSON.ts","../src/core/snap/indexes/PathIndex.ts","../src/core/snap/indexes/ValueIndex.ts","../src/core/view/Change.ts","../src/core/view/filter/IndexedFilter.ts","../src/core/view/filter/RangedFilter.ts","../src/core/view/filter/LimitedFilter.ts","../src/core/view/QueryParams.ts","../src/core/ReadonlyRestClient.ts","../src/core/SnapshotHolder.ts","../src/core/SparseSnapshotTree.ts","../src/core/stats/StatsListener.ts","../src/core/stats/StatsReporter.ts","../src/core/operation/Operation.ts","../src/core/operation/AckUserWrite.ts","../src/core/operation/ListenComplete.ts","../src/core/operation/Overwrite.ts","../src/core/operation/Merge.ts","../src/core/view/CacheNode.ts","../src/core/view/EventGenerator.ts","../src/core/view/ViewCache.ts","../src/core/util/ImmutableTree.ts","../src/core/CompoundWrite.ts","../src/core/WriteTree.ts","../src/core/view/ChildChangeAccumulator.ts","../src/core/view/CompleteChildSource.ts","../src/core/view/ViewProcessor.ts","../src/core/view/View.ts","../src/core/SyncPoint.ts","../src/core/SyncTree.ts","../src/core/util/ServerValues.ts","../src/core/util/Tree.ts","../src/core/util/validation.ts","../src/core/view/EventQueue.ts","../src/core/Repo.ts","../src/core/util/libs/parser.ts","../src/core/util/NextPushId.ts","../src/core/view/Event.ts","../src/core/view/EventRegistration.ts","../src/api/OnDisconnect.ts","../src/api/Reference_impl.ts","../src/api/Database.ts","../src/register.ts","../src/api/ServerValue.ts","../src/api/Transaction.ts","../src/api/test_access.ts","../src/internal/index.ts","js/tools.js","node_modules/node-forge/lib/forge.js","node_modules/node-forge/lib/baseN.js","node_modules/node-forge/lib/util.js","node_modules/node-forge/lib/log.js","js/ganttScript.js"],"names":["gantt","root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_typeof","obj","iterator","constructor","seed","helpers","plainObjectConstructor","toString","copy","result","isDate","Date","isArray","Array","length","apply","defined","mixin","target","source","force","f","undefined","uid","valueOf","functor","arguments","event","el","handler","capture","addEventListener","attachEvent","eventRemove","removeEventListener","detachEvent","elementPosition","elem","top","left","right","bottom","getBoundingClientRect","box","body","document","docElem","documentElement","parentNode","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","offsetWidth","offsetHeight","parseInt","offsetTop","offsetLeft","offsetParent","y","Math","round","x","width","height","isVisible","node","display","visibility","getComputedStyle","style","currentStyle","hasNonNegativeTabIndex","isNaN","getAttribute","hasHref","a","area","nodeName","loLowerCase","isEnabled","input","select","textarea","button","toLowerCase","hasAttribute","getClassName","className","baseVal","indexOf","_trimString","_slave","getTargetNode","e","trg","tagName","srcElement","shadowRoot","composedPath","str","String","trim","this","replace","isShadowDomSupported","head","createShadowRoot","attachShadow","getRootNode","element","ShadowRoot","host","getNodePosition","getFocusableNodes","nodes","querySelectorAll","join","nodesArray","slice","$position","sort","b","tabIndex","splice","getScrollSize","div","createElement","cssText","appendChild","clientWidth","removeChild","addClassName","removeClassName","split","regEx","RegExp","insertNode","newone","innerHTML","child","firstChild","removeNode","getChildNodes","css","ch","childNodes","len","out","push","toNode","getElementById","querySelector","locateClassName","classname","strict","ind","charAt","locateAttribute","attribute","getRelativeEventPosition","ev","clientX","clientY","isChildOf","parent","hasClass","classList","contains","test","closest","selector","matches","msMatchesSelector","webkitMatchesSelector","parentElement","nodeType","console","error","hasShadowParent","getActiveElement","activeElement","getSelection","focusNode","units","second","minute","hour","day","week","month","quarter","year","getFullYear","getMonth","getDate","arrayFilter","arr","callback","filter","checkZeroId","id","getSecondsInUnit","unit","forEach","workArray","arrayMap","map","resArray","arrayIncludes","item","includes","arrayFind","find","arrayDifference","arraySome","hashToArray","hash","sortArrayOfHash","field","desc","compare","throttle","timeout","wait","setTimeout","pop","isValidDate","getTime","isStringObject","Function","isNumberObject","isBooleanObject","delay","timer","$cancelTimeout","$pending","args","clearTimeout","$execute","objectKeys","keys","isEventable","replaceValidZeroId","rootId","findBinary","array","prev","low","high","floor","__","EventHost","_silent_mode","listeners","_silentStart","_silentEnd","eventHost","eventName","settings","handlers","index","eventStorage","combinedResult","handlerResult","addEvent","handlerId","once","originalHandler","removeEvent","clear","createEventStorage","thisObject","attachAll","callEvent","eventArguments","handlerName","concat","checkEvent","list","eventId","detachAllEvents","view","config","datastore","viewport","start","getItemIndexByTopPosition","end","y_end","count","max","min","dummy","log","BaseControl","render","set_value","get_value","focus","BaseEditor","show","column","placeholder","hide","get_input","is_changed","currentValue","is_valid","save","isWindowAwailable","env","isIE","navigator","userAgent","isIE6","XMLHttpRequest","isIE7","isIE8","isOpera","isChrome","isKHTML","isFF","isIPad","search","isEdge","isNode","utils","eventable","domHelpers","Cell","$container","$parent","$config","headerHeight","$gantt","$domEvents","_createDomEventScope","$id","$name","$factory","destructor","$view","$services","getService","detach","_headerClickHandler","detachAll","cell","scrollTo","html","getNode","padding","resize","_final","$preResize","topCont","topSize","getSize","minWidth","maxWidth","minHeight","maxHeight","setSize","_hide","cellIndex","moveView","hidden","$toHTML","content","header","raw","canCollapse","$fill","init","self","toggle","delegate","collapsed","size","gravity","getContentSize","$lastSize","contentX","contentY","_getBorderSizes","borders","horizontal","vertical","_currentBorders","_borders","_sizeHeader","_sizeContent","_setBorders","cssHash","xLayout","transform","$root","store","placeholder_task","exists","getItem","type","types","__extends","htmlHelpers","_super","SelectControl","sns","getHtmlSelect","options","_dhx_onchange","onchange","_focus","start_date","end_date","getItemTop","getItemHeight","startCoord","posFromDate","endCoord","x_end","smart_rendering","_smart_render","g","eval","global","globalScope","createDropTargetObject","res","targetParent","targetIndex","targetId","nextSibling","prevSibling","nextSiblingTarget","dndTaskId","targetTaskId","getParent","getBranchIndex","prevSiblingTarget","firstChildTarget","lastChildTarget","children","getChildren","isLegacyRender","columnIndex","scale","viewPort","cellLeftCoord","cellRightCoord","firstCellIndex","lastCellIndex","Infinity","_task_default_render","task","_isAllowedUnscheduledTask","_isTaskInTimelineLimits","pos","getItemPosition","cfg","templates","$getTemplates","taskType","getTaskType","getBarHeight","milestone","controlsMargin","padd","item_attribute","setAttribute","show_progress","done","progress","pr","progressColor","backgroundColor","opacity","progress_text","rtl","position","wrapper","drag_progress","isReadonly","drag","markerPos","task_text","textColor","color","basic","template","itemId","$getConfig","state","getState","getTask","project","isSummaryTask","isSplitTask","open_split_tasks","$open","select_task","isSelectedTask","drag_id","drag_mode","touch_drag","link_source_id","link_target_id","highlight_critical_path","isCriticalTask","link_landing_area","dragClass","from_id","from_start","link_from_start","to_start","link_to_start","isLinkAllowed","task_class","styles","side","margin","_get_link_crossing_css","marginStyle","_render_side_content","leftside_text","rightside_text","_waiAria","setTaskBarAttr","drag_resize","_render_pair","drag_links","show_links","outer","inner","showLinkPoints","touch","cssClass","text","abs","cond","leftside","$source","links","start_to_start","$target","finish_to_start","finish_to_finish","ln","link","getLink","tp","min_date","marginLeft","max_date","marginRight","renderer","type_renderers","defaultRenderer","ScaleHelper","topPositionMixin","canvasRender","Timeline","$scaleHelper","_posFromDateCache","_timelineDragScroll","container","$task","$task_scale","$task_data","$task_bg","$task_links","$task_bars","_tasks","col_width","full_width","trace_x","rendered","attr","linksAttr","bindLinks","link_attribute","layers","_createLayerConfig","tasks","linkLayers","_attachLayers","ext","dragTimeline","attach","dataHeight","scale_height","refresh","backgroundImage","rowStore","getTotalHeight","data_els","contentHeight","contentWidth","scrollHeight","scrollWidth","scrolled","_refreshScales","smart_scales","getViewPort","scales","_scales","_getScaleChunkHtml","taskFilter","expose","$ui","taskBar","hide_bar","taskSplitBar","append","taskRollupBar","taskBg","_taskLayers","_linkLayers","_bindStore","taskRenderer","getDataRender","createDataRender","defaultContainer","taskLayers","layer","update","bar_layer","addLayer","_taskRenderer","getLayer","_initStaticBackgroundRender","linkStore","getDatastore","linkRenderer","linkLayer","_linkRenderer","staticRender","_staticBgHandler","static_background","timeline_placeholder","staticBgContainer","$task_bg_static","insertBefore","staticBackgroundHeight","getScale","destroy","_clearLayers","removeLayer","_render_tasks_scales","scales_html","outer_width","_getScales","availWidth","autosize","autosize_min_width","cfgs","prepareConfigs","min_column_width","fromPos","toPos","scale_row_class","tplClass","_prepareScaleHtml","globalConfig","globalTemplates","cells","date","format","date_to_str","startIndex","endIndex","inherit_scale_class","scale_cell_class","cssclass","getTimelineCellAttr","dateFromPos","summ","part","_getColumnDuration","dateValue","columnIndexByDate","assert","wholeCells","partCell","roundPos","_getNextVisibleColumn","columns","ignores","visibleDateIndex","_getPrevVisibleColumn","_getClosestVisibleColumn","days","trace_x_ascending","ignore_x","dateIndex","visibleIndex","visibleDate","transition","trace_index_transition","xLeft","xRight","rowHeight","taskId","isMilestoneRender","task_height","bar_height","task_height_offset","sqrt","primaryScale","getSubScales","sortScales","add","step","_timelineCacheAttached","_resetTopPositionHeight","_unbindStore","_resetHeight","events","mouseEvents","h","gridResize","rowResize","ColumnDnd","Grid","$state","gridAriaAttr","gridAttrString","gridDataAriaAttr","gridDataAttrString","_ganttConfig","reorderColumns","reorder_grid_columns","$grid","gridScaleRowAttrString","$grid_scale","$grid_data","resizer","_renderHeaderResizers","doOnRender","_mouseDelegates","_addLayers","_initEvents","_columnDND","_validateColumnWidth","numericWidth","outerWidth","getGridColumns","innerWidth","elasticColumns","grid_elastic_columns","scrollable","_setColumnsWidth","columnProperty","newColumnWidth","col","min_grid_column_width","columnsWidth","grid_width","_getGridWidth","_gridCacheAttached","_initSmartRenderingPlaceholder","_calculateGridWidth","_renderGridHeader","getColumnIndex","excludeHidden","hiddenIndexShift","getColumn","gridLine","gridTaskRowResizer","resize_rows","_refreshPlaceholderOnStoreUpdate","scrollY","scroll","getView","getScrollState","scrollSize","$rowsPlaceholder","close","open","_getColumnWidth","min_width","new_width","max_width","_checkGridColumnMinWidthLimits","_getGridWidthLimits","min_limit","max_limit","newWidth","start_index","columns_width","final_width","extra_width","start_width","share","curExtra","_getColsTotalWidth","cols_width","v","parseFloat","unknown","gridWidth","autofit","diff","delta","changed","_setContentSize","locale","reverse","labels","lineHeigth","last","colWidth","_sort","direction","grid_header_class","label","gridScaleCellAttrString","lineHeight","dateHelper","services","getSum","sizes","from","to","setSumWidth","sum_width","parts","adjustSize","splitSize","full","cellSize","_isLegacyMode","scaleConfig","scale_unit","date_scale","subscales","_prepareScaleObject","legacyMode","initTemplate","min_coll_width","container_width","minDate","maxDate","heights","configs","main_scale","initScaleConfig","processIgnores","initColSizes","limitVisibleRange","unshift","alineScaleColumns","reverseScale","setPosSettings","indexes","trace_indexes","_ignore_time_config","skip_off_time","skip","probe","isWorkTime","display_count","min_col_width","line_height","cont_width","column_count","eachColumn","iterateScales","lower_scale","upper_scale","upper_dates","lower_dates","prevUpper","up","target_index","upper_start","upper_end","lower_start","lower_end","targetWidth","curr","tzOffset","getTimezoneOffset","_correct_dst_change","dates","lastDate","outDate","shared","attributes","_this","entry","_attributes","getHtmlOption","_getHtmlContainer","getHtmlButton","getHtmlDiv","getHtmlLabel","getHtmlInput","_getHtmlAttributes","tag","resourceTaskCache","$data","tasksStore","resource","resourceProperty","timeline","cacheKey","items","assignmentsPassed","process_resource_assignments","resource_property","$role","getResourceAssignments","$resource_id","$task_id","getTaskBy","assignments","timegrid","scaleUnit","scaleStep","precalculatedTimes","task_id","firstColumn","currDate","calendar","work_time","getTaskCalendar","cachedTimes","timestamp","timetable","resource_render_empty_cells","Layout","_parseConfig","$cells","_resizeScrollbars","scrollbars","scrollbar","scrollChanged","visibleScrollbars","hiddenScrollbars","scrollbarsToHide","showScrollbar","hideScrollbar","shouldHide","shouldShow","visibleGroups","group","j","$scrollbarRepaint","_syncCellSizes","groupName","newSize","groups","_eachChild","_syncGroupSize","_xLayout","getNextSibling","newSizeValue","isGravity","ownSize","resizeSibling","getPrevSibling","siblingSize","totalGravity","totalSize","k","mainGrid","$content","startStage","mainCall","_resizeInProgress","contentViews","getCellsByType","setContentSize","_getAutosizeMode","$originalWidthStored","$originalWidth","$originalHeightStored","$originalHeight","code","isChild","cellId","sub","alert","rows","cols","views","initUI","getCells","_cleanElSize","_getBoxStyles","computed","properties","boxSizing","clientHeight","MozBoxSizing","horPaddings","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","vertPaddings","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","borderBox","innerHeight","outerHeight","boxSizes","contentSizes","_sizes","_calcFreeSpace","_free","_gravity","_calcSize","_configureBorders","borderClass","lastVisibleIndex","lastCell","borderColorClass","_updateCellVisibility","oldVisibleCells","_visibleCells","firstCall","visibleCells","parentVisibility","hide_empty","hideCell","cellView","marginSide","dx","dy","sourceTop","sourceHeight","targetTop","targetHeight","sourceLeft","sourceRight","targetLeft","targetRight","tmp","getLinkRectangle","coordinates","calculated","clearCache","initialized","getVisibleItems","rec","visibleBoxes","ids","workunit_map_cache_1","workunit_object_cache_1","larger_units_helper_1","LargerUnitsCache","createCacheObject","Map","WorkUnitsMapCache","WorkUnitsObjectCache","IsWorkTimeArgument","ClosestWorkTimeArgument","dir","CalculateEndDateArgument","duration","GetDurationArgument","getWorkHoursArguments","Error","setWorkTimeArguments","unsetWorkTimeArguments","isWorkTimeArguments","processedConfig","duration_unit","getClosestWorkTimeArguments","arg","_getStartEndConfig","param","argumentType","duration_step","getDurationArguments","hasDurationArguments","calculateEndDateArguments","quickPositionHelperFactory","getItemTopCache","getRowTopCache","getItemHeightCache","totalHeightCache","getItemHeightCacheState","quickPosition","resetCache","newState","getCacheStateTotalHeight","shouldClearHeightCache","getRowTop","canUseSimpleCalculation","all","getIndexRange","itemIndex","getIndexById","parentId","_fillHeightCache","defaultHeight","row_height","eachItem","globalHeight","itemHeightCache","sumHeight","oldState","newValue","getHeight","totalHeight","countVisible","current","next","getIdByIndex","DurationFormatterNumeric","canParse","parse","copyLinkIdsArray","linkIds","targetHash","isLinkExists","copyLinkIds","getSubtreeLinks","isTaskExists","eachTask","getSubtreeTasks","PrimaryScaleHelper","scale_offset_minimal","helper","_scale_range_unit","range","start_interval","onlyProjectTasks","getTaskByTime","getSubtaskDates","calculateEndDate","_min_date","_max_date","_init_tasks_range","fit_tasks","old_min","old_max","powerArray","DataStore","isPlaceholderTask","TreeDataStore","_branches","pull","$initItem","loadedItem","initItem","existingItem","move","$index","root_id","$parentProperty","parentProperty","$getRootId","val","$openInitially","openInitially","visibleOrder","$create","fullOrder","_searchVisibleOrder","_indexRangeCache","_eachItemMainRangeCache","_getItemsCache","_skip_refresh","getConfig","splitParents","splitItems","taskOpenState","taskVisibility","haveSplitItems","_attachDataChange","_isSplitItem","canOpenSplitTasks","$split_subtask","$expanded_branch","_buildTree","data","setParent","_add_branch","$level","calculateItemLevel","$local_index","_updateOrder","hasChild","loaded","_parseInner","_addItemInner","_move_branch","$rendered_parent","_changeIdInner","oldId","newId","_replace_branch_child","_traverseBranches","branch","_removeItemInner","sid","tindex","source_pid","tbranch","placeholderIds","tid","_moveInner","childId","pid","getSiblings","siblings","previousSibling","clearAll","level","eachParent","_setParentInner","new_pid","silent","_eachItemCached","cache","_eachItemIterate","startId","itemsStack","useCache","buildCache","startItem","parentsHash","old_parent","new_parent","old_id","new_id","newbranch","criteria","original_criteria","els","temp","rule","renderedParent","actualParent","_skipTaskRecalculation","$powerArray","$removeAt","$remove","$find","$insertAt","$each","master","$map","$filter","_filterRule","copyOnParse","isSilent","updateItem","removeItem","order","data_size","addItem","changeId","sindex","$destroyed","unselect","alreadySilent","arraysEqual","arr1","arr2","quick","skipFilter","_quick_refresh","_mark_recompute","oldOrder","serialize","filteredOrder","ret","getItems","_getNullIfUndefined","getFirst","getLast","getNext","getPrev","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","Item","noop","nextTick","title","browser","argv","version","versions","on","addListener","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","umask","updPerSecond","_on_timeout","ceil","createScope","eventScope","staticArray","extend","htmlTags","extraSpaces","stripHTMLLite","htmlText","singleQuotes","escapeQuotes","getAttributeString","dateString","aria-label","_taskCommonAttr","tooltip_text","$dataprocessor_class","drag_move","taskRowAttr","order_branch","linkAttr","linkTypes","toStart","fromStart","start_to_finish","drag_link","gridSeparatorAttr","lightboxHiddenAttr","lightboxVisibleAttr","lightboxAttr","lightboxButtonAttrString","buttonName","role","tabindex","lightboxHeader","headerText","lightboxSelectAttrString","time_option","years","months","hours","minutes","lightboxDurationInputAttrString","section","column_duration","aria-valuemin","multiselect","attrs","new_task","gridCellAttrString","textValue","editor","gridAddButtonAttrString","messageButtonAttrString","buttonLabel","messageInfoAttr","messageModalAttr","quickInfoAttr","quickInfoHeaderAttrString","quickInfoHeader","quickInfoButtonAttrString","tooltipAttr","tooltipVisibleAttr","tooltipHiddenAttr","payload","wai_aria_attributes","_extend_to_optional","lightbox_block","optional_time","mapping","_resolve_default_mapping","disable","enable","disabled","update_block","_lightbox_id","button_text","resizeLightbox","button_click","_get_typed_lightbox_config","form_blocks","duration_optional","time_optional","time","TypeselectControl","typeKey","typeValue","oldOnChange","changeLightboxType","_lightbox_new_type","ConstraintControl","isNonTimedConstraint","constraint_types","ASAP","ALAP","toggleTimeSelect","timeSelects","isNonTimed","getTimePicker","typeSelect","_time_format_order","_eventsInitialized","constraintDate","constraint_date","_fill_lightbox_select","constraintType","constraint_type","getConstraintType","getTimePickerValue","ParentControl","_display","item_id","allow_root","root_label","map_to","tmpDom","newOptions","onselect","replaceChild","DurationControl","getFormatter","formatter","_getStartDate","getElementsByTagName","_getDuration","singleDate","single_date","readonly","ariaAttr","durationInputClass","duration_val","inps","btns","endspan","_calc_date","task_end_date","task_date","_change_duration","onclick","onkeydown","charCode","keyCode","which","constants","KEY_CODES","DOWN","UP","calculateDuration","startDate","endDate","RadioControl","radio","default_value","checked","CheckboxControl","single_value","checkboxes","TimeControl","auto_end_date","_update_lightbox_select","selects","autofix_end","_get_timepicker_step","TextareaControl","_get_input","TemplateControl","ResourcesControl","getHtmlButtons","buttons","floatRight","_migrate_buttons","getHtmlTimePickerOptions","offset","start_year","end_year","tdate","timeFormat","year_range","month_full","first","_time_values","time_picker","setTime","getHours","getMinutes","_lightbox_methods","_lightbox_template","_lightbox_root","registerProvider","lightbox","showLightbox","getLightbox","_center_lightbox","showCover","_fill_lightbox","round_dnd_dates","time_step","getLabel","sections","updateCollection","list_name","collection","serverList","resetLightbox","getLightboxType","_lightbox_type","lightboxDiv","fullWidth","ds","classNames","cspEnvironment","csp","salesforceEnvironment","_lightbox","_is_lightbox_timepicker","wide_form","buttons_left","buttons_right","drag_lightbox","onmousedown","_ready_to_dnd","onselectstart","cursor","_init_dnd_events","_render_sections","backup_overflow","overflow","labelBlock","inputBlock","inputId","_init_lightbox_events","block","con","lightbox_additional_height","scroll_top","scroll_left","view_height","_cover","lightbox_events","gantt_save_btn","_save_lightbox","gantt_delete_btn","$click","hideLightbox","gantt_cancel_btn","_cancel_lightbox","src","sec","buttonTarget","SPACE","shiftKey","click","edit_save","edit_cancel","getLightboxValues","$new","_update_flags","refreshData","addTask","getTaskIndex","refreshTask","updateTask","hideCover","_custom_lightbox","_set_lightbox_values","lightbox_header","task_time","substr","getLightboxSection","getValue","setValue","get_template_control","control","get_select_control","get_textarea_control","get_time_control","eventElement","_move_while_dnd","_finish_dnd","_dnd_start_lb","gantt_unselectable","lb","now","pageX","pageY","_lb_start","ariaAttrs","date_part","time_format","limit_time_select","first_hour","last_hour","setHours","mapOffset","checkbox","resources","constraint","typeselect","_simple_confirm","message","ok","opts","confirm","type_value","_silent_redraw_lightbox","oldType","formData","updTask","scrollX","scrollState","visible","getTaskDND","tasksDnD","_tasks_dnd","touch_feedback","touch_feedback_duration","_prevent_touch_scroll","_touch_feedback","vibrate","platform","maxTouchPoints","touchEventsSupported","createEvent","_touch_events","touches","pointerEnabled","pointerType","msPointerEnabled","MSPOINTER_TYPE_MOUSE","touchHandlers","names","accessor","ignore","dblclicktime","actionMode","scrollMode","actionStart","longTapTimer","currentDndId","dndNodes","targetView","start_drag","on_mouse_move","preventDefault","cancelBubble","newScrollState","block_action","allViews","$layout","_locate_css","locate","on_mouse_down","renders","_getTaskLayers","isTaskVisible","task_attribute","cloneNode","_start_dnd","_touch_drag","remove","on_mouse_up","onDoubleClick","USE_KEY","_defaultScales","TimelineZoom","zoomIn","getCurrentLevel","setLevel","zoomOut","_levels","_activeLevelIndex","getLevels","zoomLevel","_getZoomIndexByName","_setLevel","levelName","Number","_getVisibleDate","scrollPos","_visibleDate","cursorOffset","nextConfig","chartConfig","cursorDate","newPosition","middleDate","_attachWheelEvent","_domEvents","_useKey","_handler","passive","_defaultHandler","timelineOffset","wheelUp","deltaY","wheelDelta","stopPropagation","_setScaleSettings","_setScaleDates","_initialStartDate","_initialEndDate","activeLevelIndex","_mapScales","levels","_minColumnWidth","minColumnWidth","_maxColumnWidth","maxColumnWidth","_widthStep","widthStep","useKey","_initialized","trigger","_stepUp","_stepDown","nextLevel","dhtmlx","attaches","attachGantt","cmp","attachObject","dataType","dataObj","that","vs","av","grid","border","gridId","gridObj","dhtmlXCellObject","jQuery","$","methods","fn","dhx_gantt","each","newgantt","Gantt","getGanttInstance","isHeadless","scrollRange","scrollStep","scrollDelay","scrollSpeed","interval","isMove","delayTimeout","startPos","started","eventPos","isDisplayed","isScrollState","dragMarker","isResize","isLink","isClickDrag","autoscroll","defineDelayTimeout","speed","autoscroll_speed","setInterval","tick","autoscroll_delay","defineScrollInterval","clearInterval","autoscrollInterval","isScroll","targetTouches","gridDrag","posX","posY","need_scroll","currentScrollTop","scrollOuterHeight","inner_height","scrollInnerHeight","currentScrollLeft","scrollOuterWidth","inner_width","scrollInnerWidth","autoscroll_step","boxSize","zoom","skins","link_line_width","link_arrow_size","_second_column_width","_third_column_width","material","_redefine_lightbox_buttons","getTaskNode","indx","broadway","_config_buttons_left","_config_buttons_right","terrace","meadow","skyblue","_get_skin","skin","href","match","skinset","resetSkin","getTimeline","getGrid","getBaseCell","getVerticalScrollbar","baseCell","getAttachedScrollbar","getHorizontalScrollbar","attachedScrollbar","DEFAULT_VALUE","tryCall","method","fallback","getTaskTop","getTaskPosition","getTaskBarHeight","getTaskHeight","roundTaskDates","domAttr","getLinkNode","oldH","oldV","scrollHorizontal","scrollVertical","verticalViews","_getLinkedViews","horizontalViews","commonViews","viewId","$skipSmartRenderOnScroll","newV","newH","showDate","date_x","scroll_to","task_scroll_offset","showTask","leftPos","_scroll_state","gridCell","timelineCell","x_pos","y_pos","scroll_size","x_inner","y_inner","scrollVer","scrollHor","horState","verState","getLayoutView","cellName","scrollLayoutCell","horizontalScroll","verticalScroll","addTaskLayer","addLinkLayer","_legacyGridResizerClass","layout","resizers","gridResizer","onCreated","mainTimeline","show_chart","colsWidth","hideGrid","show_grid","grid_limits","ganttContainerWidth","verticalScrollbarWidth","gridOverflow","original_grid_width","skinSettings","_initScrollStateEvents","_getVerticalScrollbar","_getHorizontalScrollbar","oldPos","newPos","$scroll_ver","$scroll_hor","_findGridResizer","gridFirst","_getSiblings","_behind","_front","onInitialized","resizeInfo","initialWidth","prevCellWidth","nextCellWidth","viewCell","limits","newBehindSize","newFrontSize","oldBackSize","oldFrontSize","newBackSize","oldSize","onDestroyed","initLinksDND","_link_landing","_link_target_task","_link_target_task_start","_link_source_task","_link_source_task_start","markerDefaultOffset","scrollDefaultSize","getDndState","DnD","dnd","sensitivity","updates_per_second","mousemoveContainer","getLinePos","shift","isStart","taskPos","xEnd","yEnd","milestoneWidth","origWidth","getPosition","markerSize","getMarkerSize","viewportSize","offsetX","tooltip_offset_x","offsetY","tooltip_offset_y","ganttOffsetY","updateMarkedHtml","drag_link_class","resetDndState","showDirectingLine","s_x","s_y","e_x","e_y","_direction","link_direction_class","dist","pow","tan","angle","atan","coordinateCircleQuarter","PI","sin","cos","shiftLeft","shiftTop","sX","eX","sY","eY","_dir_start","dd","landing","prevTarget","prevLanding","prevToStart","targ","eventTarget","_dir_end","targetChanged","_get_link_type","addLink","createLinkDND","createTaskDND","round_task_dates","dragMultiple","_events","before_start","before_finish","after_finish","_handlers","clear_drag_state","set_actions","drag_from_start","evs","stage","_move","_resize","_resize_progress","start_x","start_y","coords_x","_drag_task_coords","minDurationInUnits","_calculateMinDuration","min_duration","_init_task_timing","diffValue","_find_max_shift","dragItems","correctShift","minX","maxX","maxShift","minShift","multipleDragShift","new_start","new_end","obj_s_x","obj_e_x","_mouse_position_change","_is_number","isFinite","_update_on_move","_update_item_on_move","original","curr_date","dragHash","_isMultiselect","getSelectedTasks","dragProject","drag_project","initialDrag","childDrag","_bulk_dnd","_update_parents","_get_drag_mode","_fix_dnd_scale_time","fixStart","correct_work_time","roundDate","fixEnd","_fix_working_times","getClosestWorkTime","correctTaskWorkTime","_finalize_mouse_up","_fireEvent","_dhx_changed","finalizingBulkMove","moveCount","doFinalize","batchUpdate","modes","dragProperty","selectedTasksIds","selectedTask","_addSubtasksToDragMultiple","params","drag_state","drag_multiple","summaryId","taskDnD","linkDnD","_linksDnD","_tasksDnD","_attachDomEvents","_attachStateProvider","extendDom","_clearDomEvents","_clearStateProvider","_delete_link_handler","question","link_description","confirm_link_deleting","deleteLink","coll","coll_date","scale_step","unregisterProvider","gridToPageCoordinates","gridPos","setWidthWithinContainer","containerSize","removeLineHighlight","markerLine","highlightPosition","ePos","gridHeight","pointerEvents","markerFolder","maxBottom","folderHighlightWidth","linePos","indentNode","indent","itemTop","itemHeight","childCount","markerLineTop","dropTarget","relTargetPos","eventTop","findClosesTarget","allowedLevel","targetLevel","findTargetAbove","findTargetBelow","targetTask","targetAbove","targetBelow","rootLevel","getLockedLevelTarget","getMultiLevelTarget","higlighter","dnd_sensitivity","hideQuickInfo","_hideQuickInfo","checkPlaceholderTask","initial_open_state","outerHTML","drop_target","$transparent","getDropPosition","$drop_target","doctype","minTop","firstVisibleTaskIndex","firstVisibleTaskId","firstVisibleTaskPos","hiddenTaskPart","gridPosition","gridBottom","placeholderRowHeight","lockLevel","order_branch_free","getStore","lastTaskOfLevel","last_item","_getGridPos","_getTargetY","_getTaskByY","dropIndex","gridDataSizes","targetY","over","nextId","prevId","rowDnd","rowDndMarker","extendGantt","inlineEditors","_inlineEditors","createEditors","initEvents","clearEvents","scroll_on_click","_is_icon_open_click","conf","sorting_method","callHandler","createTask","totalWidth","getRowRectangle","getVisibleRange","resize_el","task_grid_row_resizer_attribute","getRectangle","getVisibleCellsRange","isColumnVisible","resourceTimetable","renderBar","renderConnection","prevLevel","getResourceLoad","renderedHistogramCells","renderedHistogramRows","renderedHistogramCapacity","detachRenderedHistogramCell","renderedRow","renderCapacityElement","capacityMatrix","maxCapacity","renderedElement","capacityElement","capacity","colStart","colEnd","bar","connection","renderHistogramCell","histogram_cell_class","histogram_cell_label","fill","histogram_cell_allocated","smartRendering","histogram_cell_capacity","row","checkedColumns","renderedCell","renderedResourceLines","renderResourceLineCell","resource_cell_class","resource_cell_value","detachRenderedResourceLine","aria","date_grid","tree","grid_indent","grid_blank","grid_file","grid_open","grid_folder","align","justifyContent","center","getGlobalTaskIndex","grid_row_class","css_template","isSelected","onrender","rowNode","cellNode","external_render","adapter","isElement","renderElement","isInViewPort","drawer","current_pos","dirs","down","path","point","get_lines","dots","line_to","get_path","line","_get_line","get_wrapper_sizes","wrapper_size","link_wrapper_width","get_line_sizes","line_size","marginTop","render_line","innerPos","get_direction","vect","path_builder","point_to","get_points","pt","get_endpoint","xy","shiftX","lineType","get_line_type","forward","sign","getMilestonePosition","milestoneHeight","lines","cssTemplate","link_class","isCriticalLink","endpoint","borderColor","placeholderConfig","lastTaskId","placeholderTask","unscheduled","calendar_id","bgPlaceholder","renderedCells","isRendered","detachRenderedCell","getCellClassTemplate","task_cell_class","warn","timeline_cell_class","getCellContentTemplate","timeline_cell_content","renderOneCell","contentTemplate","cssTemplateContent","htmlTemplateContent","customCell","static_background_cells","cellCssTemplate","cellHtmlTemplate","show_task_cells","odd","task_row_class","placeholderTop","placeholderHeight","prepareData","createBaseBarRender","defaultRender","renderedNodes","checkVisibility","generateChildElement","childCopy","$rendered_at","getKey","renderParentId","rollup","$rollup","itemNode","rollupKey","isBarInViewport","isInViewPortParent","isInViewPortChild","isProject","resetProjectDates","shouldUseSplitRendering","splitKey","mapTo","decreaseStartDate","schedule_from_end","TextEditor","formatters","durationFormatter","PredecessorEditor","linkFormatter","parseInputString","predecessors","delimiter","formatPredecessors","formatLinkKey","lag","linksDiff","predecessorCodes","selectedLinks","existingLinksSearch","linkId","linksToAdd","linkKey","linksToDelete","getLinksDiff","autoSchedule","inputPredecessors","taskPredecessors","html5DateFormat","dateToStr","strToDate","DateEditor","str_to_date","minValue","maxValue","parsed","SelectEditor","optionsHtml","NumberEditor","controller","onBlurDelay","keyNav","keyboardNavigation","activeCell","locateCell","columnName","editorState","getEditorConfig","startEdit","command","hasEditor","keyboard","preventKeyNav","ENTER","ctrlKey","metaKey","ESC","LEFT","RIGHT","editorType","DELETE","TAB","editPrevCell","editNextCell","modifiers","anyModifier","alt","ctrl","meta","getCommandHandler","onShow","onHide","isChanged","defaultPrevented","shouldPrevent","defaultMapping","keyNavMappings","setMapping","getMapping","keyboard_navigation_cells","getKeyboardMapping","textEditorFactory","numberEditorFactory","selectEditorFactory","dateEditorFactory","predecessorEditorFactory","durationEditorFactory","linkedPropertiesProcessor","initConfigs","editor_types","number","predecessor","keyboardMapping","eventBus","inlineEditController","updateTaskDateProperties","ganttHandlers","_itemId","_columnName","_editor","_editorType","_placeholder","batch_update","editorConfig","_getEditorPosition","findVisibleIndex","_createPlaceholder","_getItemValue","oldValue","inline_editors_date_processing","_findEditableCell","nextIndex","nextColumn","getNextCell","getFirstCell","getLastCell","canChangeRow","moveRow","moveTask","nextItem","editNextRow","skipReadonly","editPrevRow","ScrollbarCell","SCROLL_MODIFIER_KEYS","_scrollHorizontalHandler","_scrollVerticalHandler","_outerScrollVerticalHandler","_outerScrollHorizontalHandler","_mouseWheelHandler","_isHorizontal","scrollPosition","_isVertical","_initVertical","_initHorizontal","_initMouseWheel","_initLinkedViews","_getRootParent","_eachView","eachCell","_updateLinkedViews","scrollHorizontally","_scrolling","codeScrollLeft","scrollVertically","_wheel_time","_oldLeft","_getScrollSize","outerSize","isHorizontal","linked","scrollProperty","innerSizeProperty","outerProperty","_getScrollOffset","cellScrollSize","nonScrollableSize","outerScroll","innerScroll","scrollSizes","_setScrollSize","toggleVisibility","_getScaleOffset","parentLayout","_oldTop","_checkWheelTarget","targetNode","connectedViews","wheelSpeed","wheelSpeedConfig","wheel_scroll_sensitivity","ff","deltaX","wheelDeltaX","multiplier","deltaMode","wx","wy","horizontalScrollModifier","horizontal_scroll_key","oldLeft","detail","oldTop","ViewCell","childConfig","createView","$initialized","unload","outerX","outerY","childSize","ViewLayout","$cell","byMaxSize","otherCell","barRectangle","sourceBox","targetBox","genericViewPortChecker","basicGetRectangle","basicGetRange","task_area_pulls","task_area_renderers","getRenderer","renderMethod","updateMethod","renderCallbackMethod","specializedViewPortChecker","layer_attribute","render_item","layerView","viewConfig","rendererViewPort","dom","useBuffer","remove_item","clear_container","get_visible_range","prepare_data","render_items","buffer","createDocumentFragment","vis","itemsSearch","renderedItems","newElements","update_items","nodesToRemove","renderCalledFor","restore","replace_item","newNode","change_id","oldid","newid","clearRenderers","renderFactoryProvider","mergeFilters","filter_methods","filter_method","renderFactory","createGroup","getContainer","relativeRoot","defaultFilters","initLayer","renderGroup","tempCollection","renderers","filters","getLayers","_add","pending","topmost","rel","requestUpdate","onUpdateRequest","eachLayer","createLayerFactory","getVisibleTaskRange","getVisibleLinksRangeFactory","isLinkInViewport","previusSiblingContainer","defaultContainerSibling","setService","rangeFunction","removeTaskLayer","_clearTaskLayers","_getLinkLayers","removeLinkLayer","_clearLinkLayers","createMouseHandler","eventHandlers","doubleclick","contextMenu","addEventTarget","onClick","findEventHandlers","callEventHandlers","_multiselect","selectTask","onContextMenu","returnValue","delegateHandlers","details_on_dblclick","onMouseMove","_last_move_event","domEvents","reset","elementHandlers","extendSettings","parentSettings","own","$extendedConfig","setPrototypeOf","parentView","parentConfig","parentTemplates","configurable","createFactory","createdViews","creator","configure","registerView","viewConstructor","uiFactory","createLayers","Resizer","Scrollbar","ResourceGrid","ResourceTimeline","ResourceHistogram","gridEditorsFactory","renderTaskBar","renderSplitTaskBar","renderRollupTaskBar","renderTaskBg","renderLink","gridRenderer","resourceMatrixRenderer","resourceHistogramRenderer","gridTaskRowResizerRenderer","mainGridInitializer","mainTimelineInitializer","mainLayoutInitializer","attachInitializer","initializer","layersEngine","layersApi","resourceRow","resourceHistogram","layersService","boxAttribute","_dhx_msg_cfg","usercall","modalBox","modal_key","messageBox","modality","cover","info","expire","timers","getFirstDefined","values","_createBox","cancel","contentId","message_ok","message_cancel","btn","alertPopup","confirmPopup","boxPopup","box_params","focusable","hideAll","popups","modalbox","codeHelpers","_eventRemoveAll","uiApi","$mouseEvents","createLayoutFacade","targetAttribute","_locateHTML","initial_scroll","firstTask","getTaskByIndex","activePlugins","plugins","availablePlugins","auto_scheduling","click_drag","clickDrag","critical_path","drag_timeline","export_api","exportToPDF","fullscreen","grouping","groupBy","keyboard_navigation","addMarker","eachSelectedTask","overlay","quick_info","quick_info_content","tooltip","tooltips","undo","plugin","default","month_short","day_full","day_short","icon_save","icon_cancel","icon_details","icon_edit","icon_delete","confirm_closing","confirm_deleting","section_description","section_time","section_type","column_wbs","column_text","column_start_date","column_add","link_start","link_end","type_task","type_project","type_milestone","weeks","section_constraint","asap","alap","snet","snlt","fnet","fnlt","mso","mfo","resources_filter_placeholder","resources_filter_label","empty_state_text_link","empty_state_text_description","LocaleManager","addLocale","_locales","getLocale","locale_ar_1","locale_be_1","locale_ca_1","locale_cn_1","locale_cs_1","locale_da_1","locale_de_1","locale_el_1","locale_en_1","locale_es_1","locale_fa_1","locale_fi_1","locale_fr_1","locale_he_1","locale_hr_1","locale_hu_1","locale_id_1","locale_it_1","locale_jp_1","locale_kr_1","locale_manager_1","locale_nb_1","locale_nl_1","locale_no_1","locale_pl_1","locale_pt_1","locale_ro_1","locale_ru_1","locale_si_1","locale_sk_1","locale_sv_1","locale_tr_1","locale_ua_1","en","ar","be","ca","cn","cs","da","de","es","fa","fi","fr","he","hr","hu","it","jp","kr","nb","nl","no","pl","ro","ru","si","sk","sv","tr","ua","_dp","check","show_errors","listenWindowResize","resizeDelay","resizeTimeout","container_resize_timeout","container_resize_method","lowlevelResizeWatcher","repaintGantt","previousHeight","previousWidth","getPropertyValue","resizeWatcher","contentWindow","addResizeListener","calculateScaleRange","invalidContainerMessage","validateNode","isHTMLElement","_reinit","_quickRefresh","stores","_getDatastores","dropLayout","rebuildLayout","storeNames","resetLayout","initTemplates","edit","delete","confirm_deleting_title","deleteTask","preserveScroll","preserve_scroll","new_pos","verticalScrollbar","setSizes","getTaskRowNode","prevOffset","time_unit","offsetChanged","activate","_cached_functions","update_if_changed","active","critical_path_mode","wrap_methods","_prefetch_originals","prefetch","methodname","optimizer","argumentsArray","get_arguments_hash","cached_values","has_cached_value","get_cached_value","cache_value","arguments_hash","is_date","getUTCDate","stringify_argument","deactivate","setup","override_gantt","gantt_methods","optimize_render","deactivTimeout","checkType","isUnscheduledTask","show_unscheduled","taskStart","taskEnd","_getProjectEnd","project_end","_getProjectStart","project_start","getDefaultTaskDate","parent_id","_set_default_task_timing","details_on_create","parseDate","getSelectedId","getTaskTimingMode","task_type","$no_start","$no_end","$rendered_type","updateTaskTiming","$effective_calendar","getSubtaskInfo","task_mode","dirty","$calculate_duration","effectiveCalendar","inherit_calendar","taskMode","taskTiming","getSubtaskDuration","updateAll","has_changed","oldStart","oldEnd","upper","lower","colIndex","steps","calendarManager","timeCalculator","getWorkHours","setWorkTime","unsetWorkTime","_hasDuration","hasDuration","mergeCalendars","createCalendar","addCalendar","getCalendar","getCalendars","getResourceCalendar","deleteCalendar","CalendarDisabledTimeStrategy","argumentsHelper","_calculateDuration","fixedUnits","hasWorkTime","equals","createArgumentsHelper","NoWorkTimeCalendar","TimeCalculator","$disabledCalendar","_getCalendar","manager","dynamicCalendars","getCalendarIdFromMultipleResources","resourceAssignments","resource_id","tempCalendar","assignment","resourceId","isLegacyResourceCalendarFormat","resourceCalendarsProperty","getResourceProperty","resourceCalendarsConfig","resource_calendars","propertyName","getCalendarIdFromLegacyConfig","calendarId","DateDurationCache","_getCacheObject","_cache","unitCache","stepCache","yearCache","durations","endDates","_endDateCacheKey","_durationCacheKey","getEndDate","compute","startDateTimestamp","resultTimestamp","getDuration","endDateTimestamp","getMinutesPerWeek","weekStart","_weekCache","has","_calendar","minutesPerWeek","week_start","getHoursPerDay","set","getMinutesPerMonth","monthStart","_monthCache","minutesPerMonth","nextMonth","subCache","setItem","rawValue","CalendarWorkTimeStrategy","_workingUnitsCache","_largeUnitsCache","_dateDurationCache","_worktime","_cached_timestamps","_cached_timestamps_count","_clearCaches","_getUnitOrder","_resetTimestampCache","_timestamp","UTC","_checkIfWorkingUnit","_is_work_day","_getWorkHours","_is_work_hour","startHour","endHour","_getTimeOfDayStamp","dayEnd","_is_work_minute","checkTime","_nextDate","_getWorkUnitsBetweenGeneric","stepStart","stepEnd","checkFirst","checkLast","isLastStep","_isWorkTime","unitOrder","biggerTimeUnit","_getClosestWorkTimeFuture","_getMinutesPerHour","hourStart","hourEnd","worktimes","_getMinutesPerDay","durationMinutes","durationHours","_getWorkUnitsForRange","getUnitsPerDay","total","_getMinutesBetweenSingleDay","_getIntervalTimestamp","minuteFrom","minuteTo","_getMinutesBetween","firstDayStart","firstDayEnd","day_start","lastDayStart","lastDayEnd","startPart","endPart","_getHoursBetween","_setConfig","_parseSettings","haveCustomWeeks","customWeeks","customWeeksRangeStart","customWeeksRangeEnd","customWeeksBoundaries","_parseHours","minCustomRangeStart","maxCustomRangeEnd","customTime","rangeStart","rangeEnd","fromReadable","toReadable","currentWeek","_tryChangeCalendarSettings","backup","JSON","stringify","_arraysEqual","_compareSettings","mySettings","thatSettings","myDays","otherDates","myHours","otherHours","myWeek","thatWeek","getDay","getSeconds","endHours","timestampRanges","timerangeConfig","startMinute","endMinute","durationSeconds","calendarConfig","reset_calendar","dateKey","isWorkUnit","mult","_calculateEndDate","_calculateMinuteEndDate","_subtractMinuteDate","_calculateHourEndDate","_addInterval","stopAction","added","dstShift","_addHoursUntilDayEnd","rangeHours","addHours","intervalEnd","durationLeft","setMinutes","setSeconds","hoursPerDay","_addMinutesUntilHourEnd","hour_start","rangeMinutes","addMinutes","_subtractMinutesUntilHourStart","hourStartTimestamp","initialDateTimestamp","minutePrecision","_isMinutePrecision","addedInterval","calculatedDay","daySchedule","minutesInDay","dayStart","iterateFromDayEnd","isWorkHour","workInterval","prevInterval","minutesInHour","_getClosestWorkTimePast","times","lastInterval","_getClosestWorkTime","inputDate","closestFuture","closestPast","_getClosestWorkTimeGeneric","_findClosestTimeInDay","resultDate","fromDayEnd","_getClosestWorkMinute","increment","worktime","exceptions","hasRegularHours","_checkWorkHours","dayConfig","hoursArray","WorkTimeCalendarMerger","_getIntervals","_toHoursArray","intervalsArray","formatHHMM","secondsValue","minutePart","_intersectHourRanges","baseArray","overridesArray","base","_mergeAdjacentIntervals","_mergeHoursConfig","firstHours","secondHours","merge","firstConfig","secondConfig","mergedSettings","firstDate","secondDate","CalendarMergeHelper","legacyResourceCalendarConfig","dynamicResourceCalendars","CalendarManager","_calendars","_legacyConfig","_isLegacyConfig","createDefaultCalendars","_convertWorkTimeSettings","calendars","mergeHelper","_createCalendarFromConfig","apiCore","preparedConfig","parentCalendar","defaults","fulltime","_getOwnCalendar","calendar_property","dynamic_resource_calendars","calendarsConfig","taskObject","groupMode","group_mode","currentTask","isCalendar","restoreConfigCalendars","possibleCalendar","every","worktimeFacadeFactory","facade","jsonParseError","load","url","_load_url","cl","_load_type","ajax","on_load","xmlDoc","responseText","resp","status","responseURL","_process_loading","collections","_load_collections","resourcesStore","assignmentsByTasks","attachAssignmentsToTasks","linksStore","collections_loaded","option","option_key","$ignore","json","dhx_security","security_key","serializeTask","_copyObject","serializeLink","_copyLink","xml_format","format_date","rawLinks","getLinks","xml","_xmlNodeToJSON","attrs_only","nodeValue","_getCollections","loader","xpath","itms","_getXML","toptag","getXMLTopNode","xmltop","skey","oldxml","startdate","est","enddate","predecessortasks","editable_property","readonly_property","getGridColumn","ScrollableGrid","_scrollOrder","getCurrentX","_dnd","_scrollView","attachEvents","isScrollable","gridBoundingRect","maxLeft","minLeft","currentX","autoscrollRight","autoscrollStart","autoscrollLeft","autoscrollStop","getCorrection","scrollable_grid_1","ColumnsGridDnd","_targetMarker","calculateCurrentPosition","eventX","DND","_scrollableGrid","_draggedCell","draggedColumn","draggedIndex","_gridConfig","_originAutoscroll","_dragX","columnIndexes","findColumnsIndexes","targetColumn","cleanTargetMarker","setMarkerPosition","drawTargetMarker","_a","xBefore","xAfter","columnRelativePos","draggedId","currentColumn","startX","endX","relativeX","gridOffset","_obj","nextPosition","column_grid_dnd_1","_task_grid_row_resize","row_before_start","row_id","row_after_start","row_drag_move","pointerPosition","markerStartPosition","marker_height","minPointerPosition","min_task_grid_row_height","row_drag_end","oldItemHeight","finalHeight","cachedRowHeight","canUseSimpleCalc","_getRowHeight","_refreshState","globalRowHeight","visibleColumns","loadedBranches","oldHasChildren","branch_loading","branch_loading_property","requestData","encodeURIComponent","show_empty_state","emptyStateElement","isGanttEmpty","renderContent","placeholderContainer","clickEvents","attachAddTaskEvent","detachAddTaskEvents","oldNodes","emptyStateElementNode","LinkFormatterSimple","_getWBSCode","_linkReg","linkPart","exec","_findSource","_gantt","pred","getWBSCode","reqTemplate","wbs","getTaskByWBSCode","DurationFormatter","LinkFormatter","enter","callIfEnabled","auto_types","checkTaskType","changedTypes","targetType","getTaskTypeToUpdate","$needsUpdate","updateParentTypes","delTaskParent","allTypes","hasChildren","originalRowDndParent","originalMoveTaskParent","isParsingDone","updateAfterRemoveChild","insertPlaceholder","placeholders","afterEdit","newTask","dataProcessor","_silencedPlaceholder","setUpdated","ready","isPlaceholderLink","action","commands","entity","resourceAssignmentsProperty","resource_assignment_store","resourceAssignmentFormats","auto","singleValue","valueArray","resourceValueArray","assignmentsArray","resourceAssignmentFormat","assignmentModes","fixedDates","fixedDuration","initAssignmentFields","initDelay","timing","_assignmentTimeFromTask","resourceAssignmentsStore","createDatastore","_makeAssignmentsFromTask","detectFormat","usedIds","defaultMode","_updateTaskBack","_assignAssignments","getTaskAssignments","_loadAssignmentsFromTask","taskAssignments","_syncAssignments","storeAssignments","taskValues","assignmentsStoreValues","inBoth","inTaskNotInStore","inStoreNotInTask","taskOwner","ownerId","foundOwnerAssignment","taskSearch","storeSearch","processedIds","inTask","inStore","ignoreFields","assignmentHasChanged","_syncOnTaskUpdate","assignmentsStore","totalAssignments","needUpdate","needUpdateFor","undoBatchCancel","assignmentsHash","deleteIds","idsSearch","resourceAssignmentsCache","resourceTaskAssignmentsCache","taskAssignmentsCache","searchTaskId","resourceTaskCacheKey","getTaskResources","uniqueResources","updateTaskAssignments","createResourceMethods","singleResourceCacheBuilt","falsyValuePrefix","random","resourceHashFunction","getCacheKey","resourceIds","typeFilter","getResourceTasks","matchingResources","resourceValue","selectAssignments","owners","propertyValue","resourcePlugin","renderEditableLabel","editable","renderSummaryLabel","sum","reduce","editableResourceCellTemplate","editableResourceCellClass","getSummaryResourceAssignments","resource_store","childResource","initEditableDiagram","timeoutId","makeEditable","cancelAnimationFrame","requestAnimationFrame","contentEditable","assignmentEditInProcess","blur","strValue","innerText","rowId","assignmentId","parse_date","assignmentStore","saveState","nextChunk","dataprocessor_assignments","dataprocessor_resources","editable_resource_diagram","fetchTasks","lightbox_resources","lightboxOptions","resourceStoreConfig","initItems","storeType","$resourcesStore","lightboxOptionsFnc","defaultResourceCellClass","defaultResourceCellTemplate","_needRecalc","_isRecalcNeeded","_isGroupSort","_calcWBS","$virtual","$wbs","_setWBSCode","getByWBSCode","currentNode","_isFirst","_prevSibling","_wbs","_parent","isActive","disableMethod","methodName","dummyMethod","restoreMethod","restoreMethods","batchUpdatePayload","noRedraw","dp_mode","call_dp","updateMode","setUpdateMode","resetProjects","refreshLink","methodsHash","setGanttMode","sendData","createMethod","SimpleStorage","_storage","storeItem","getStoredItem","dp","getUserData","userdata","setUserData","_change_id","_ganttMode","changeTaskId","changeLinkId","_row_style","_delete_task","_sendTaskOrder","setDp","DataProcessorEvents","$dp","_dataProcessorHandlers","treeHelper","cascadeDelete","clientSideDelete","cascade_delete","deleteAfterConfirmation","needDbDelete","needCascadeDelete","dpMode","cascade","sendAllData","_tSend","_waitMode","itemLinks","_links","updateLink","_tMode","_serverProcessor","substring","serverProcessor","pluralizedMode","urlSeparator","upd","isExist","objData","xml_date","handleResourceCRUD","handleResourceAssignmentCRUD","updated","updatedRows","clientOnly","_in_progress","insertedTasks","pendingAssignments","insertResourceAssignment","data_processor_events_1","extend_gantt_1","simple_storage_1","createDataProcessor","router","tMode","DataProcessor","setTransactionMode","serverProcessorURL","action_param","autoUpdate","_headers","_payload","_postDelim","_routerParametersFormat","_invalid","messages","inserted","deleted","invalid","invalid_cell","enableUTFencoding","headers","_serializeAsJson","_router","escape","_utf","getSyncState","findRow","existing","set_invalid","is_invalid","markRow","_methods","details","getActionByState","checkBeforeUpdate","editStop","pendingUpdateModes_1","_beforeSendData","_getRowData","_serializeAsJSON","serialize_one","stack","pref","serialized","valid","_forEachUpdatedRow","_sendData","_getAllData","pattern","defineAction","_uActions","afterUpdateCallback","btag","ganttMode","correct","originalSid","afterUpdate","_xml","getGanttMode","reqUrl","filePath","processCallback","finalizeUpdate","cleanUpdate","atag","_dp_init","_setDefaultTransactionMode","delete_confirmation","dataProcessorEvents","setOnAfterUpdate","setOnBeforeUpdateHandler","setAutoUpdate","user","_user","_needUpdate","_updateBusy","afterAutoUpdate","fullSync","loadUpdate","xml_node","getUpdates","vers","_getXmlNodeValue","updates","status_1","parent_1","_applyPayload","_cleanupArgumentsBeforeSend","dataToSend","processedData","_cleanupItemBeforeSend","updatedItem","output","queryParams","dhxVersion","urlParams","preprocessedData","query","taskState_1","taskAction","ganttMode_1","_onResolvedCreateUpdate_1","actionPromise","errorMsgStart","errorMsgEnd","then","catch","hasOne","_prepareDate","_prepareArray","traversedObjects","_prepareObject","rawItem","processedItem","_prepareDataItem","dataItem","DEPRECATED_api","server","getDataProcessorModes","getAvailableModes","bindDataStore","itemRepainter","allData","loadedRanges","_i","layerData","skipRepaint","selectedId","deleteItem","_unselect","subItem","getLinkCount","newLink","getTaskCount","getVisibleTaskCount","startTask","calculateTaskLevel","createTasksFacade","createLinksFacade","createDatastoreSelect","datastoreRender","getDatastores","createDatastoreFacade","$StoreType","open_tree_initially","deepcopy_on_parse","storeAccessName","dropService","storeList","refresh_links","refreshLinks","hasSplitParent","_clear_data","oldSelectId","_skipResourceRepaint","unselectTask","facadeFactory","originalTask","checkLinkedTaskVisibility","sync_link","sourceTask","sync_link_delete","sync_links","mapEvents","mapFrom","sourceEvent","targetEvent","taskLinks","existingLink","sourceMatch","targetMatch","typeMatch","show_tasks_outside_timescale","changedTask","sourceVisible","targetVisible","deletedLinks","onItemLoading","onBeforeAdd","onAfterAdd","onBeforeUpdate","onAfterUpdate","onBeforeDelete","onAfterDelete","onIdChange","onBeforeItemMove","onAfterItemMove","onFilterItem","onItemOpen","onItemClose","onBeforeSelect","onAfterSelect","onAfterUnselect","setImmediate","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","messagePrefix","onGlobalMessage","MessageChannel","channel","port1","port2","script","onreadystatechange","clearImmediate","scope","Timeout","clearFn","_id","_clearFn","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","u","_dereq_","1","Promise","SomePromiseArray","_SomePromiseArray","any","promises","promise","setHowMany","setUnwrap","2","firstLineError","schedule","Queue","util","Async","_customScheduler","_isTickUsed","_lateQueue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","AsyncInvokeLater","receiver","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","_drainQueue","_drainQueueStep","_settlePromises","setScheduler","hasCustomScheduler","enableTrampoline","disableTrampolineIfNecessary","hasDevTools","haveItemsQueued","fatalError","stderr","write","exit","throwLater","invokeLater","invoke","settlePromises","_reset","./queue","./schedule","./util","3","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","_","_reject","targetRejected","context","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_bitField","_resolveCallback","bindingRejected","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","_target","_setBoundTo","_setOnCancel","_boundTo","_isBound","resolve","4","old","bluebird","noConflict","./promise","5","cr","callerCache","getterCache","canEvaluate","caller","classString","TypeError","namedGetter","indexedGetter","isIdentifier","maybeGetter","getGetter","6","PromiseArray","apiRejection","tryCatch","errorObj","async","_async","cancellation","_warn","_isCancellable","_cancelBy","_isFollowing","_followee","_cancelBranched","_cancellationParent","_setWillBeCancelled","_branchHasCancelled","_branchesRemainingToCancel","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancel","_setCancelled","_cancelPromises","_length","_unsetOnCancel","_onCancelField","isPending","_isCancelled","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","_attachExtraTrace","_resultCancelled","_onCancel","_invokeInternalOnCancel","7","NEXT_FILTER","getKeys","instances","cb","boundTo","predicateLoop","matchesPredicate","isObject","./es5","8","longStackTraces","contextStack","Context","_trace","CapturedTrace","peekContext","lastIndex","_promiseCreated","_pushContext","_popContext","_peekContext","trace","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","ctx","9","unhandledRejectionHandled","possiblyUnhandledRejection","printWarning","getDomain","_getDomain","Warning","es5","canAttachTrace","bluebirdFramePattern","nodeFramePattern","parseLinePattern","stackFramePattern","formatStack","indentStackFrames","debugging","warnings","wForgottenReturn","suppressUnhandledRejections","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","fireRejectionEvent","_setReturnedNonUndefined","_returnedNonUndefined","_isRejectionUnhandled","reason","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","shouldUseOwnTrace","onPossiblyUnhandledRejection","domain","domainBind","onUnhandledRejectionHandled","disableLongStackTraces","longStackTracesIsSupported","Promise_captureStackTrace","_captureStackTrace","Promise_attachExtraTrace","Promise_dereferenceTrace","_dereferenceTrace","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","longStackTracesDereferenceTrace","hasLongStackTraces","fireDomEvent","CustomEvent","dispatchEvent","eventData","cancelable","domEvent","Event","initCustomEvent","fireGlobalEvent","generatePromiseLifecycleEventObject","eventToObjectGenerator","promiseCreated","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","warning","_warning","unhandledRejection","rejectionHandled","activeFireEvent","globalEventFired","domEventFired","defaultFireEvent","cancellationExecute","executor","reject","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","cancellationOnCancel","cancellationSetOnCancel","cancellationClearCancellationData","cancellationPropagateFrom","flags","branchesRemainingToCancel","warningsOption","_clearCancellationData","_execute","_propagateFromFunction","monitoring","_boundValueFunction","isFulfilled","ignoreSelf","attachExtraTrace","__stackCleaned__","parseStackAndMessage","notEnumerableProp","formatAndLogError","cleanStack","isTraceLine","isInternalFrame","shouldIgnore","isSoft","localHandler","localEventFired","formatNonError","maxChars","captureStackTrace","parseLineInfoRegex","parseLineInfo","fileName","_promisesCreated","uncycle","inherits","stackToIndex","cycleEdgeNode","currentChildLength","stacks","currentLastIndex","currentLastLine","commonRootMeetPoint","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","hasStackAfterThrow","err","isTTY","checkForgottenReturns","handlerLine","creatorLine","traceLines","lineMatches","firstUserLine","msg","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","deprecated","replacement","./errors","10","returner","thrower","thenReturn","thenThrow","catchThrow","_reason","caught","catchReturn","_value","11","PromiseReduce","PromiseAll","promiseAllThis","mapSeries","12","_TypeError","_RangeError","Objectfreeze","freeze","subError","nameProperty","defaultMessage","SubError","CancellationError","TimeoutError","AggregateError","RangeError","writable","OperationalError","cause","errorTypes","RejectionError","13","isES5","getDescriptor","getOwnPropertyDescriptor","getOwnPropertyNames","propertyIsWritable","prop","descriptor","proto","ObjectKeys","14","PromiseMap","15","catchFilter","PassThroughHandlerContext","called","cancelPromise","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","isFinallyHandler","isRejected","_passThrough","success","lastly","tap","tapCatch","handlerOrPredicate","catchInstances","./catch_filter","16","Proxyable","yieldHandlers","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_promise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","_yieldedPromise","_cancellationPhase","_isResolved","_cleanup","_fulfill","_promiseCancelled","coroutine","returnSentinel","_continue","_promiseFulfilled","_promiseRejected","_run","_rejectCallback","traceParent","promiseFromYieldHandler","bitField","_proxy","PromiseSpawn$","generator","spawn","addYieldHandler","17","spread","18","MappingPromiseArray","limit","_filter","constructor$","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","concurrency","_init$","_init","_values","preservedValues","_totalResolved","_resolve","booleans","19","_resolveFromSyncValue","attempt","20","maybeWrapAsError","rErrorKey","wrapAsOperationalError","markAsOriginatingFromRejection","multiArgs","wrapped","21","spreadAdapter","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","22","makeSelfResolutionError","reflectHandler","PromiseInspection","UNDEFINED_BINDING","errors","APPLY","createContext","nodebackForPromise","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","deferResolve","deferReject","fillTypes","reflect","didFulfill","didReject","_setIsFinal","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","getNewLibraryCopy","is","fromNode","fromCallback","_isFateSealed","_setAsyncGuaranteed","cast","_setFulfilled","fulfilled","rejected","internalData","haveInternalData","settler","_settlePromiseCtx","_settlePromiseLateCancellationObserver","_addCallbacks","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_receiverAt","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","proxyable","shouldBind","_setFollowee","synchronous","ignoreNonErrorWarnings","ensureErrorObject","hasStack","_settlePromiseFromHandler","_settlePromise","isPromise","asyncGuaranteed","_settlePromise0","_clearCallbackDataAtIndex","_fulfillPromises","_rejectPromises","defer","toFastProperties","./any.js","./async","./bind","./call_get.js","./cancel","./context","./debuggability","./direct_resolve","./each.js","./filter.js","./finally","./generators.js","./join","./map.js","./method","./nodeback","./nodeify.js","./promise_array","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection","./thenables","./timers.js","./using.js","23","resolveValueIfEmpty","asArray","_iterate","_resolveEmptyArray","getActualLength","shouldCopyValues","isResolved","24","THIS","withAppended","defaultPromisified","__isPromisified__","noCopyPropsPattern","defaultFilter","propsFilter","isPromisified","hasPromisified","suffix","getDataPropertyOrDefault","promisifiableMethods","suffixRegexp","inheritedDataKeys","passesDefaultFilter","keyWithoutAsyncSuffix","escapeIdentRegex","makeNodePromisified","makeNodePromisifiedEval","defaultThis","promisified","promisifyAll","promisifier","promisifiedKey","promisify","copyDescriptors","isClass","25","Es6Map","mapToEntries","extractEntry","PropertiesPromiseArray","entries","isMap","_isMap","props","castValue","keyOffset","26","_capacity","_willBeOverCapacity","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","srcIndex","dst","dstIndex","27","raceLater","race","28","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","29","NativePromise","getNativePromise","MutationObserver","GlobalSetImmediate","ProcessNextTick","isRecentNode","nativePromise","standalone","cordova","toggleScheduled","div2","observe","disconnect","30","SettledPromiseArray","_promiseResolved","inspection","_settledValueField","settle","31","CANCELLATION","_howMany","_unwrap","some","howMany","isArrayResolved","_canPossiblyFulfill","_getRangeError","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","32","__isCancelled","33","hasProp","isAnyBluebirdPromise","34","HandleWrapper","afterValue","ms","successClear","failureClear","handleWrapper","35","NULL","dispose","thenable","_isDisposable","_getDisposer","_setDisposable","tryDispose","Disposer","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","doDispose","_unsetDisposable","using","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","36","tryCatchTarget","globalObject","tryCatcher","isPrimitive","excludedPrototypes","isExcludedProto","visitedKeys","enumeration","thisAssignmentPattern","rident","safeToString","isError","ArrayFrom","itResult","hasEnvVariables","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","defaultValue","Child","Parent","T","appendee","maybeError","FakeConstructor","ic","foo","filledRange","prefix","chrome","loadTimes","P","stateProviders","provider","regTemplates","initial","template_name","date_format","server_utc","task_unscheduled_time","grid_date_format","tooltip_date_format","copyDomEvent","altKey","_settings","inputMethods","getInputMethods","_drag_start_timer","clearDragTimer","eventParams","timeStamp","original_target","dragStart","traceDragEvents","domElement","inputMethod","mousemove","dragMove","dragScroll","limited_mousemove","dndActive","mouseup","dragEnd","checkPositionChange","diff_x","diff_y","initDnDMarker","backupEventTarget","getEvent","backup_element","elementFromPoint","_defineProperties","__webpack_exports__","_t","instance","Constructor","token","_url","_token","_mode","_seed","api","protoProps","staticProps","Accept","Content-Type","Remote-Token","_fetch","fetch","_x","_x2","_t2","credentials","_t3","_t4","_t5","_t6","websocket","_e","_e2","_s","_t29","_wrapper","connect","_this2","_t8","_socket","onclose","location","protocol","WebSocket","fire","_send","_resubscribe","onError","_t9","_this3","_uid","onCall","_t10","_this4","_t11","_t12","_t13","_t14","send","_t15","_e3","_t30","_t31","_e4","onResponse","_t18","_t32","_t20","_t34","_t23","_t33","_t24","_t35","_t26","_t27","_t28","remote_client","remoteEvents","remote","Client","req","_ready","back","_remote","cspVersion","utc","to_fixed","getUTCMonth","getUTCFullYear","getUTCDay","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCISOWeek","getISOWeek","mask","month_short_hash","month_full_hash","fastVersion","dateToStrFn","getWeek","splt","strToDateFn","cspCompliantVersion","canUseCsp","useCsp","time_part","start_on_monday","month_start","setDate","quarter_start","res_month","setMonth","year_start","minute_start","getMilliseconds","setMilliseconds","_add_days","modifiedDate","inc","originalDate","incCondition","getHoursCondition","getDateCondition","ndate","setYear","add_quarter","num","_getWeekNumber","isoWeek","nday","first_thursday","year_number","ordinal_date","convert_to_utc","createConfig","DOMParser","ActiveXObject","loadXML","parseFromString","tagname","xhr","responseXML","xpathExp","docObj","selectNodes","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","_call","onLoad","getSync","put","postData","del","post","postSync","isQt","readyState","noCache","setRequestHeader","toUpperCase","show_loading","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","project_sections","milestone_sections","grid_resizer_column_attribute","keep_grid_width","grid_resize","prevent_default_scroll","service","ExtensionsManager","addExtension","_extensions","getExtension","supportedExtensions","license","extensionManager","ExtensionManager","RemoteEvents","templatesLoader","stateService","selected_task","i18n","setLocale","localeObject","MAX_UNDO_STEPS","Undo","maxSteps","undoEnabled","redoEnabled","invert","revert","inverseCommands","_undoStack","_redoStack","getUndoStack","setUndoStack","getRedoStack","setRedoStack","clearUndoStack","clearRedoStack","updateConfigs","undo_steps","undo_types","undo_actions","redo","_pop","_reorderCommands","_applyAction","_push","logAction","weights","actionWeights","weightA","entities","actions","isExists","getMethod","startsWith","noTrack","onBeforeUndo","onBeforeRedo","batchActions","Monitor","_batchAction","_batchMode","_ignore","_ignoreMoveEvents","_initialTasks","_initialLinks","_nestedTasks","_nestedLinks","_undo","_attachEvents","overwrite","_storeTask","_storeLink","isMoveEventsIgnored","toggleIgnoreMoveEvents","startIgnore","stopIgnore","startBatchAction","_timeout","stopBatchAction","onTaskAdded","_storeTaskCommand","onTaskUpdated","onTaskMoved","getInitialTask","_storeEntityCommand","onTaskDeleted","childrenLinks","_storeLinkCommand","onLinkAdded","onLinkUpdated","onLinkDeleted","setNestedTasks","taskIds","_getLinks","setInitialTask","uniqueLinks","setInitialLink","setInitialTaskObject","clearInitialTasks","getInitialLink","clearInitialLinks","deleteCacheCooldown","saveInitialAll","getMoveObjectByTaskId","nested","_storeCommand","actionType","entityType","monitor_1","undo_1","monitor","changeTaskCommandId","updLink","oldTaskId","newTaskId","changeLinkCommandId","updateTasksIds","updateLinksIds","getInitialState","Tooltip","_tooltipNode","setViewport","_root","_isLikeMouseEvent","_calculateTooltipPosition","setContent","_getViewPort","_getViewPortSize","tooltipNode","mouse","containerPos","domEventsScope","tooltip_1","TooltipManager","_listeners","_initDelayedFunctions","hideTooltip","delayHide","watchableTarget","doOnMouseEnter","onmouseenter","onmousemove","onmouseleave","listener","tooltipFor","cloneDomEvent","clone","delayShow","tooltip_timeout","tooltip_hide_timeout","tooltipManager_1","tooltipManager","touch_tooltip","QuickInfo","_showForTask","_showAtCoordinates","forced","qi","_quickInfoBox","_quickInfoBoxId","_quickInfoTask","quick_info_detached","setContainer","_container","defaultContent","quickinfo_buttons","_createQuickInfoElement","titleBox","titleContent","titleDate","main","controls","_qiButtonClickHandler","_qiKeyPressHandler","_qi_button_click","_appendAtCoordinates","show_quick_info","_getContainer","_get_event_counter_part","xViewport","yViewport","_init_quick_info","_prepare_quick_info_classname","_fill_quick_data","_show_quick_info","domEv","_quickInfoReadonly","quick_info_class","allowedButtons","isEditor","quick_info_title","quick_info_date","popupHeight","scrolls","screenWidth","relativePopupBottom","top_1","quickInfo_1","quickInfo","hidingFunction","clearQuickInfo","multiselect_one_level","_selected","_one_level","_active","_first_selected_when_shift","getDefaultSelected","selected","getSelected","setFirstSelected","getFirstSelected","updateState","setLastSelected","getLastSelected","afterSelect","forSelected","isSameLevel","doSelection","target_ev","defaultLast","isLast","multiSelect","singleSelection","inline_editors_multiselect_open","blockSelection","first_indx","target_indx","last_indx","old_selectTask","old_unselectTask","toggleTaskSelection","getLastSelectedTask","old_isSelected","render_marker","show_markers","marker_class","markerHeight","initMarkerArea","markerArea","$marker_area","_markers","renderMarkers","getMarker","deleteMarker","updateMarker","_getMarkers","$keyboardNavigation","dispatcher","activeNode","globalNode","GanttNode","setActiveNode","getActiveNode","getDefaultNode","TaskCell","TaskRow","isValid","setDefaultNode","fromDomElement","inputs","HeaderCell","focusGlobalNode","blurNode","focusChanged","compareTo","keptFocus","keyDownHandler","isModal","ganttNode","shortcuts","getCommandFromEvent","findHandler","doAction","awaitsFocus","_delay","clearDelay","modalsStack","afterPopup","startModal","trapFocus","endModal","currentTarget","traceLightbox","focusElement","globalIndex","_compose","cellElement","nextElement","prevTask","moveTo","nextTask","home","pagedown","pageup","bindAll","KeyNavNode","viewWidth","viewHeight","scrollPositionX","scrollPositionY","attachedScrollbarHorizontal","scrollbarHorizontal","attachedScrollbarVertical","scrollbarVertical","shift+down","shift+up","shift+right","shift+left","space","ctrl+left","ctrl+right","ctrl+enter","taskRow","enter, space","EventHandler","canStringifyThis","canStringifyThat","eventFacade","$eventAttached","alt+left","alt+right","alt+up","alt+down","ctrl+z","ctrl+r","currentFocus","currentIndex","lastItem","firstItem","getHash","shortcut","unbind","initKeys","createCommand","expr","getExpressions","words","getWords","commandKeys","specialKeys","charCodeAt","printableKey","fromCharCode","getHashFromEvent","junctionChar","term","combinationChar","backspace","tab","esc","insert","plus","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","isTaskFocused","isInlineEditorCell","isNoKeyboardNavigationElement","focusHandler","$preventDefault","reFocusActiveNode","outsideGantt","localName","mousedownHandler","locateTask","removeAttribute","onReady","updateRender","_redrawTasks","focusedItemVisible","createdTaskId","keepFocusOnNewTask","nodeConstructor","focusOnCreate","getScope","scopes","headerCell","taskCell","findVisibleColumnIndex","keyNavFacade","addShortcut","scopeObject","getShortcutHandler","removeShortcut","isExpanded","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","isFullscreenAvailable","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","backupBodyPadding","backupElementSizes","zIndex","modified","backupPositioning","updateSizes","expandGantt","onFullScreenChange","getFullscreenElement","positions","originalPositioning","record","cantFullscreen","expand","requestArguments","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","collapse","requestExitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","exitFullscreen","EventsManager","_mouseDown","_calculateDirectionVector","vectors","resultVector_1","vector","magnitude","angleDegrees","atan2","_applyDndReadyStyles","_timeline","_clearDndReadyStyles","_getScrollPosition","_countNewScrollPosition","coords","_startPoint","shiftY","_scrollState","_setScrollPosition","_stopDrag","_originalReadonly","_startDrag","enabled","filterTargets","clickDragUseKey","eventsManager_1","helpers_1","SelectedRegion","_el","relative","_singleRow","_getTaskPositionByTop","_view","_viewPort","_endPoint","draw","singleRow","_useRequestAnimationFrame","useRequestAnimationFrame","getElement","setStart","startPoint","_startDate","setEnd","endPoint","_endDate","_positionPoint","absolute","setPosition","positionPoint","tasksByTime","tasksByIndex","_getTasksByTop","getInBounds","startValue","endValue","selectedRegion","_originPosition","_restoreOriginPosition","scheduledDndCoordinates","_getCoordinates","dragTimelineUseKey","viewPortBounds","selectedRegion_1","defaultConfig","eventsManager","__assign","click_drag_1","drag_timeline_1","fullscreen_1","quick_info_1","extensions_gpl_1","runClearTimeout","stringToByteArray","instanceOfAny","constructors","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","IDBDatabase","IDBObjectStore","IDBIndex","IDBCursor","IDBTransaction","getCursorAdvanceMethods","advance","continue","continuePrimaryKey","cursorRequestMap","WeakMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","promisifyRequest","request","unlisten","wrap","cacheDonePromiseForTransaction","tx","complete","DOMException","idbProxyTraps","objectStoreNames","objectStore","replaceTraps","wrapFunction","func","transaction","unwrap","transformCachableValue","Proxy","IDBRequest","_wrapIdbValue","require","openDB","blocked","upgrade","blocking","terminated","indexedDB","openPromise","oldVersion","newVersion","db","deleteDB","deleteDatabase","readMethods","writeMethods","cachedMethods","targetFuncName","useIndex","isWrite","storeName","oldTraps","appName","appCompatName","analyticsName","analyticsCompatName","appCheckName","appCheckCompatName","authName","authCompatName","databaseName","databaseCompatName","functionsName","functionsCompatName","installationsName","installationsCompatName","messagingName","messagingCompatName","performanceName","performanceCompatName","remoteConfigName","remoteConfigCompatName","storageName","storageCompatName","firestoreName","firestoreCompatName","packageName","setLogLevelImpl","enableLogging","MAX_NODE","setMaxNode","nodeFromJSON","setPriorityMaxNode","referenceConstructor","errorPrefixFxn","errorPrefix","enableLoggingImpl","SDK_VERSION","randomString","randomCharCode","getPreviousKey","targetKey","getNextKey","filterNonDollarFields","newObj","convertDataToString","_objectSpread","convertStringToData","usePureJavaScript","_reverseAlphabets","_encodeWithByteBuffer","alphabet","digits","carry","at","encode","maxline","Uint8Array","regex","decode","table","bytes","Buffer","forge","baseN","_checkBitsParam","ByteStringBuffer","read","isArrayBuffer","isArrayBufferView","putByte","_constructedStringLength","callbacks","oldSetImmediate","isNodejs","ArrayBuffer","byteLength","ByteBuffer","_MAX_CONSTRUCTED_STRING_LENGTH","DataBuffer","readOffset","growSize","DataView","byteOffset","writeOffset","putBytes","_optimizeConstructedString","isEmpty","fillWithByte","putString","encodeUtf8","putInt16","putInt24","putInt32","putInt16Le","putInt24Le","putInt32Le","putInt","putSignedInt","putBuffer","getBytes","getByte","getInt16","rval","getInt24","getInt32","getInt16Le","getInt24Le","getInt32Le","getInt","getSignedInt","setAt","createBuffer","compact","truncate","toHex","decodeUtf8","accommodate","amount","setUint8","encoding","binary","hex","base64","Uint16Array","utf16","setInt16","setInt8","setInt32","getInt8","getUint8","utf8","fillString","xorBytes","s1","s2","s3","hexToBytes","bytesToHex","int32ToBytes","_base64","_base64Idx","_base58","encode64","chr1","chr2","chr3","decode64","enc1","enc2","enc3","enc4","unescape","decodeURIComponent","base58","subarray","deflate","inflate","_setStorageObject","_getStorageObject","_setItem","_getItem","_removeItem","empty","_clearItems","_callStorageFunction","exception","idx","localStorage","ex","clearItems","re","argi","formatNumber","decimals","dec_point","thousands_sep","toFixed","formatSize","bytesFromIP","ip","bytesFromIPv4","bytesFromIPv6","blanks","zeros","bytesToIP","bytesToIPv4","bytesToIPv6","zeroGroups","zeroMaxGroup","estimateCores","cores","hardwareConcurrency","Worker","Blob","blobUrl","URL","createObjectURL","st","et","sample","samples","numWorkers","avg","revokeObjectURL","workers","results","worker","terminate","overlaps","r1","overlap","r2","sLevelInfo","sLoggers","sConsoleLogger","LEVEL_LOCKED","NO_LEVEL_CHECK","INTERPOLATE","logMessage","messageLevelIndex","logger","prepareStandard","standard","category","prepareFull","prepareStandardFull","standardFull","makeLogger","logFunction","lock","addLogger","levelHandlers","verbose","searchParams","consoleLogger","_dhtmlxGantt","_app","_database","_tools","_log","_interopRequireDefault","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","return","firebase_prefix","global_panel_data_prefix","firebaseConfig","initGlobalPanelData","firebaseApp","initializeApp","firebaseDatabase","getDatabase","global_panel_data_ref","snapshot","global_panel_data","_Object$keys","default_panel_id","panel_name","_i2","_Object$entries","_Object$entries$_i","addFooterButton","changeSelectedPanelButtonColor","loadDataInPanel","panel_id","convertPanelData2Gantt","enableEdit","saved_button_innerText","selection","removeAllRanges","createRange","addRange","finalize","old_name","panel_info","addBtn","newBtn","footer","previousPanelId","nextPanelId","insertEmptyDataPanel","bgColor","selected_panel_button_id","footerBtns","new_panel_id","new_panel_data","panel_data","gantt_data","_i3","_Object$entries2","_Object$entries2$_i","_i4","_Object$entries3","_Object$entries3$_i"],"mappings":"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","file":"ganttScript.8f4bafa9.js","sourceRoot":"..","sourcesContent":["import extensions from \"./ext/extensions_gpl\";\r\nimport * as base from \"./factory/make_instance_web\";\r\nimport * as scope from \"./utils/global\";\r\nconst gantt = (scope as any).gantt = base(extensions);\r\n\r\nexport default gantt;\r\nexport { gantt };","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"dhtmlxgantt\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dhtmlxgantt\"] = factory();\n\telse\n\t\troot[\"dhtmlxgantt\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/codebase/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 259);\n","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar helpers = require(\"./helpers\");\n\nvar plainObjectConstructor = {}.constructor.toString();\n\nfunction isCustomType(object) {\n  var constructorString = object.constructor.toString();\n  return constructorString !== plainObjectConstructor;\n}\n\nfunction copy(object) {\n  var i, result; // iterator, types array, result\n\n  if (object && _typeof(object) == \"object\") {\n    switch (true) {\n      case helpers.isDate(object):\n        result = new Date(object);\n        break;\n\n      case helpers.isArray(object):\n        result = new Array(object.length);\n\n        for (i = 0; i < object.length; i++) {\n          result[i] = copy(object[i]);\n        }\n\n        break;\n\n      /*\t\tcase (helpers.isStringObject(object)):\r\n      \t\t\tresult = new String(object);\r\n      \t\t\tbreak;\r\n      \t\tcase (helpers.isNumberObject(object)):\r\n      \t\t\tresult = new Number(object);\r\n      \t\t\tbreak;\r\n      \t\tcase (helpers.isBooleanObject(object)):\r\n      \t\t\tresult = new Boolean(object);\r\n      \t\t\tbreak;*/\n\n      default:\n        if (isCustomType(object)) {\n          result = Object.create(object);\n        } else {\n          result = {};\n        }\n\n        for (i in object) {\n          if (Object.prototype.hasOwnProperty.apply(object, [i])) result[i] = copy(object[i]);\n        }\n\n        break;\n    }\n  }\n\n  return result || object;\n}\n\nfunction mixin(target, source, force) {\n  for (var f in source) {\n    if (target[f] === undefined || force) target[f] = source[f];\n  }\n\n  return target;\n}\n\nfunction defined(obj) {\n  return typeof obj != \"undefined\";\n}\n\nvar seed;\n\nfunction uid() {\n  if (!seed) seed = new Date().valueOf();\n  seed++;\n  return seed;\n} //creates function with specified \"this\" pointer\n\n\nfunction bind(functor, object) {\n  if (functor.bind) return functor.bind(object);else return function () {\n    return functor.apply(object, arguments);\n  };\n}\n\nfunction event(el, event, handler, capture) {\n  if (el.addEventListener) el.addEventListener(event, handler, capture === undefined ? false : capture);else if (el.attachEvent) el.attachEvent(\"on\" + event, handler);\n}\n\nfunction eventRemove(el, event, handler, capture) {\n  if (el.removeEventListener) el.removeEventListener(event, handler, capture === undefined ? false : capture);else if (el.detachEvent) el.detachEvent(\"on\" + event, handler);\n}\n\nmodule.exports = {\n  copy: copy,\n  defined: defined,\n  mixin: mixin,\n  uid: uid,\n  bind: bind,\n  event: event,\n  eventRemove: eventRemove\n};","//returns position of html element on the page\nfunction elementPosition(elem) {\n  var top = 0,\n      left = 0,\n      right = 0,\n      bottom = 0;\n\n  if (elem.getBoundingClientRect) {\n    //HTML5 method\n    var box = elem.getBoundingClientRect();\n    var body = document.body;\n    var docElem = document.documentElement || document.body.parentNode || document.body;\n    var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\n    var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n    var clientTop = docElem.clientTop || body.clientTop || 0;\n    var clientLeft = docElem.clientLeft || body.clientLeft || 0;\n    top = box.top + scrollTop - clientTop;\n    left = box.left + scrollLeft - clientLeft;\n    right = document.body.offsetWidth - box.right;\n    bottom = document.body.offsetHeight - box.bottom;\n  } else {\n    //fallback to naive approach\n    while (elem) {\n      top = top + parseInt(elem.offsetTop, 10);\n      left = left + parseInt(elem.offsetLeft, 10);\n      elem = elem.offsetParent;\n    }\n\n    right = document.body.offsetWidth - elem.offsetWidth - left;\n    bottom = document.body.offsetHeight - elem.offsetHeight - top;\n  }\n\n  return {\n    y: Math.round(top),\n    x: Math.round(left),\n    width: elem.offsetWidth,\n    height: elem.offsetHeight,\n    right: Math.round(right),\n    bottom: Math.round(bottom)\n  };\n}\n\nfunction isVisible(node) {\n  var display = false,\n      visibility = false;\n\n  if (window.getComputedStyle) {\n    var style = window.getComputedStyle(node, null);\n    display = style[\"display\"];\n    visibility = style[\"visibility\"];\n  } else if (node.currentStyle) {\n    display = node.currentStyle[\"display\"];\n    visibility = node.currentStyle[\"visibility\"];\n  }\n\n  return display != \"none\" && visibility != \"hidden\";\n}\n\nfunction hasNonNegativeTabIndex(node) {\n  return !isNaN(node.getAttribute(\"tabindex\")) && node.getAttribute(\"tabindex\") * 1 >= 0;\n}\n\nfunction hasHref(node) {\n  var canHaveHref = {\n    \"a\": true,\n    \"area\": true\n  };\n\n  if (canHaveHref[node.nodeName.loLowerCase()]) {\n    return !!node.getAttribute(\"href\");\n  }\n\n  return true;\n}\n\nfunction isEnabled(node) {\n  var canDisable = {\n    \"input\": true,\n    \"select\": true,\n    \"textarea\": true,\n    \"button\": true,\n    \"object\": true\n  };\n\n  if (canDisable[node.nodeName.toLowerCase()]) {\n    return !node.hasAttribute(\"disabled\");\n  }\n\n  return true;\n}\n\nfunction getFocusableNodes(root) {\n  var nodes = root.querySelectorAll([\"a[href]\", \"area[href]\", \"input\", \"select\", \"textarea\", \"button\", \"iframe\", \"object\", \"embed\", \"[tabindex]\", \"[contenteditable]\"].join(\", \"));\n  var nodesArray = Array.prototype.slice.call(nodes, 0);\n\n  for (var i = 0; i < nodesArray.length; i++) {\n    nodesArray[i].$position = i; // we remember original nodes order, \n    // so when we sort them by tabindex we ensure order of nodes with same tabindex is preserved, \n    // since some browsers do unstable sort\n  } // use tabindex to sort focusable nodes\n\n\n  nodesArray.sort(function (a, b) {\n    if (a.tabIndex === 0 && b.tabIndex !== 0) {\n      return 1;\n    }\n\n    if (a.tabIndex !== 0 && b.tabIndex === 0) {\n      return -1;\n    }\n\n    if (a.tabIndex === b.tabIndex) {\n      // ensure we do stable sort\n      return a.$position - b.$position;\n    }\n\n    if (a.tabIndex < b.tabIndex) {\n      return -1;\n    }\n\n    return 1;\n  });\n\n  for (var i = 0; i < nodesArray.length; i++) {\n    var node = nodesArray[i];\n    var isValid = (hasNonNegativeTabIndex(node) || isEnabled(node) || hasHref(node)) && isVisible(node);\n\n    if (!isValid) {\n      nodesArray.splice(i, 1);\n      i--;\n    }\n  }\n\n  return nodesArray;\n}\n\nfunction getScrollSize() {\n  var div = document.createElement(\"div\");\n  div.style.cssText = \"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\n  document.body.appendChild(div);\n  var width = div.offsetWidth - div.clientWidth;\n  document.body.removeChild(div);\n  return width;\n}\n\nfunction getClassName(node) {\n  if (!node) return \"\";\n  var className = node.className || \"\";\n  if (className.baseVal) //'className' exist but not a string - IE svg element in DOM\n    className = className.baseVal;\n  if (!className.indexOf) className = \"\";\n  return _trimString(className);\n}\n\nfunction addClassName(node, className) {\n  if (className && node.className.indexOf(className) === -1) {\n    node.className += \" \" + className;\n  }\n}\n\nfunction removeClassName(node, name) {\n  name = name.split(\" \");\n\n  for (var i = 0; i < name.length; i++) {\n    var regEx = new RegExp(\"\\\\s?\\\\b\" + name[i] + \"\\\\b(?![-_.])\", \"\");\n    node.className = node.className.replace(regEx, \"\");\n  }\n}\n\nfunction hasClass(element, className) {\n  if ('classList' in element) {\n    return element.classList.contains(className);\n  } else {\n    return new RegExp(\"\\\\b\" + className + \"\\\\b\").test(element.className);\n  }\n}\n\nfunction toNode(node) {\n  if (typeof node === \"string\") {\n    return document.getElementById(node) || document.querySelector(node) || document.body;\n  }\n\n  return node || document.body;\n}\n\nvar _slave;\n\nfunction insert(node, newone) {\n  if (!_slave) {\n    _slave = document.createElement(\"div\");\n  }\n\n  _slave.innerHTML = newone;\n  var child = _slave.firstChild;\n  node.appendChild(child);\n  return child;\n}\n\nfunction remove(node) {\n  if (node && node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n}\n\nfunction getChildren(node, css) {\n  var ch = node.childNodes;\n  var len = ch.length;\n  var out = [];\n\n  for (var i = 0; i < len; i++) {\n    var obj = ch[i];\n\n    if (obj.className && obj.className.indexOf(css) !== -1) {\n      out.push(obj);\n    }\n  }\n\n  return out;\n}\n\nfunction getTargetNode(e) {\n  var trg;\n  if (e.tagName) trg = e;else {\n    e = e || window.event;\n    trg = e.target || e.srcElement;\n\n    if (trg.shadowRoot && e.composedPath) {\n      trg = e.composedPath()[0];\n    }\n  }\n  return trg;\n}\n\nfunction locateAttribute(e, attribute) {\n  if (!attribute) return;\n  var trg = getTargetNode(e);\n\n  while (trg) {\n    if (trg.getAttribute) {\n      //text nodes has not getAttribute\n      var test = trg.getAttribute(attribute);\n      if (test) return trg;\n    }\n\n    trg = trg.parentNode;\n  }\n\n  return null;\n}\n\nfunction _trimString(str) {\n  var func = String.prototype.trim || function () {\n    return this.replace(/^\\s+|\\s+$/g, \"\");\n  };\n\n  return func.apply(str);\n}\n\nfunction locateClassName(e, classname, strict) {\n  var trg = getTargetNode(e);\n  var css = \"\";\n  if (strict === undefined) strict = true;\n\n  while (trg) {\n    css = getClassName(trg);\n\n    if (css) {\n      var ind = css.indexOf(classname);\n\n      if (ind >= 0) {\n        if (!strict) return trg; //check that we have exact match\n\n        var left = ind === 0 || !_trimString(css.charAt(ind - 1));\n        var right = ind + classname.length >= css.length || !_trimString(css.charAt(ind + classname.length));\n        if (left && right) return trg;\n      }\n    }\n\n    trg = trg.parentNode;\n  }\n\n  return null;\n}\n/*\r\nevent position relatively to DOM element\r\n */\n\n\nfunction getRelativeEventPosition(ev, node) {\n  var d = document.documentElement;\n  var box = elementPosition(node);\n  return {\n    x: ev.clientX + d.scrollLeft - d.clientLeft - box.x + node.scrollLeft,\n    y: ev.clientY + d.scrollTop - d.clientTop - box.y + node.scrollTop\n  };\n}\n\nfunction isChildOf(child, parent) {\n  if (!child || !parent) {\n    return false;\n  }\n\n  while (child && child != parent) {\n    child = child.parentNode;\n  }\n\n  return child === parent;\n}\n\nfunction closest(element, selector) {\n  if (element.closest) {\n    return element.closest(selector);\n  } else if (element.matches || element.msMatchesSelector || element.webkitMatchesSelector) {\n    var el = element;\n    if (!document.documentElement.contains(el)) return null;\n\n    do {\n      var method = el.matches || el.msMatchesSelector || el.webkitMatchesSelector;\n      if (method.call(el, selector)) return el;\n      el = el.parentElement || el.parentNode;\n    } while (el !== null && el.nodeType === 1);\n\n    return null;\n  } else {\n    // eslint-disable-next-line no-console\n    console.error(\"Your browser is not supported\");\n    return null;\n  }\n}\n\nfunction isShadowDomSupported() {\n  return document.head.createShadowRoot || document.head.attachShadow;\n}\n/**\r\n * Returns element that has the browser focus, or null if no element has focus.\r\n * Works with shadow DOM, so it's prefereed to use this function instead of document.activeElement directly.\r\n * @returns HTMLElement\r\n */\n\n\nfunction getActiveElement() {\n  var activeElement = document.activeElement;\n\n  if (activeElement.shadowRoot) {\n    activeElement = activeElement.shadowRoot.activeElement;\n  }\n\n  if (activeElement === document.body && document.getSelection) {\n    activeElement = document.getSelection().focusNode || document.body;\n  }\n\n  return activeElement;\n}\n/**\r\n * Returns document.body or the host node of the ShadowRoot, if the element is attached to ShadowDom\r\n * @param {HTMLElement} element \r\n * @returns HTMLElement\r\n */\n\n\nfunction getRootNode(element) {\n  if (!element) {\n    return document.body;\n  }\n\n  if (!isShadowDomSupported()) {\n    return document.body;\n  }\n\n  while (element.parentNode && (element = element.parentNode)) {\n    if (element instanceof ShadowRoot) {\n      return element.host;\n    }\n  }\n\n  return document.body;\n}\n\nfunction hasShadowParent(element) {\n  return !!getRootNode(element);\n}\n\nmodule.exports = {\n  getNodePosition: elementPosition,\n  getFocusableNodes: getFocusableNodes,\n  getScrollSize: getScrollSize,\n  getClassName: getClassName,\n  addClassName: addClassName,\n  removeClassName: removeClassName,\n  insertNode: insert,\n  removeNode: remove,\n  getChildNodes: getChildren,\n  toNode: toNode,\n  locateClassName: locateClassName,\n  locateAttribute: locateAttribute,\n  getTargetNode: getTargetNode,\n  getRelativeEventPosition: getRelativeEventPosition,\n  isChildOf: isChildOf,\n  hasClass: hasClass,\n  closest: closest,\n  getRootNode: getRootNode,\n  hasShadowParent: hasShadowParent,\n  isShadowDomSupported: isShadowDomSupported,\n  getActiveElement: getActiveElement\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar units = {\n  \"second\": 1,\n  \"minute\": 60,\n  \"hour\": 60 * 60,\n  \"day\": 60 * 60 * 24,\n  \"week\": 60 * 60 * 24 * 7,\n  \"month\": 60 * 60 * 24 * 30,\n  \"quarter\": 60 * 60 * 24 * 30 * 3,\n  \"year\": 60 * 60 * 24 * 365\n};\n\nfunction getSecondsInUnit(unit) {\n  return units[unit] || units.hour;\n}\n\nfunction forEach(arr, callback) {\n  if (arr.forEach) {\n    arr.forEach(callback);\n  } else {\n    var workArray = arr.slice();\n\n    for (var i = 0; i < workArray.length; i++) {\n      callback(workArray[i], i);\n    }\n  }\n}\n\nfunction arrayMap(arr, callback) {\n  if (arr.map) {\n    return arr.map(callback);\n  } else {\n    var workArray = arr.slice();\n    var resArray = [];\n\n    for (var i = 0; i < workArray.length; i++) {\n      resArray.push(callback(workArray[i], i));\n    }\n\n    return resArray;\n  }\n}\n\nfunction arrayFind(arr, callback) {\n  if (arr.find) {\n    return arr.find(callback);\n  } else {\n    for (var i = 0; i < arr.length; i++) {\n      if (callback(arr[i], i)) {\n        return arr[i];\n      }\n    }\n  }\n}\n\nfunction arrayIncludes(arr, item) {\n  if (arr.includes) {\n    return arr.includes(item);\n  } else {\n    for (var i = 0; i < arr.length; i++) {\n      if (arr[i] === item) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n} // iframe-safe array type check instead of using instanceof\n\n\nfunction isArray(obj) {\n  if (Array.isArray) {\n    return Array.isArray(obj);\n  } else {\n    // close enough\n    return obj && obj.length !== undefined && obj.pop && obj.push;\n  }\n} // non-primitive string object, e.g. new String(\"abc\")\n\n\nfunction isStringObject(obj) {\n  return obj && _typeof(obj) === \"object\" && Function.prototype.toString.call(obj.constructor) === \"function String() { [native code] }\";\n} // non-primitive number object, e.g. new Number(5)\n\n\nfunction isNumberObject(obj) {\n  return obj && _typeof(obj) === \"object\" && Function.prototype.toString.call(obj.constructor) === \"function Number() { [native code] }\";\n} // non-primitive number object, e.g. new Boolean(true)\n\n\nfunction isBooleanObject(obj) {\n  return obj && _typeof(obj) === \"object\" && Function.prototype.toString.call(obj.constructor) === \"function Boolean() { [native code] }\";\n}\n\nfunction isDate(obj) {\n  if (obj && _typeof(obj) === \"object\") {\n    return !!(obj.getFullYear && obj.getMonth && obj.getDate);\n  } else {\n    return false;\n  }\n}\n\nfunction isValidDate(obj) {\n  return isDate(obj) && !isNaN(obj.getTime());\n}\n\nfunction arrayFilter(arr, callback) {\n  var result = [];\n\n  if (arr.filter) {\n    return arr.filter(callback);\n  } else {\n    for (var i = 0; i < arr.length; i++) {\n      if (callback(arr[i], i)) {\n        result[result.length] = arr[i];\n      }\n    }\n\n    return result;\n  }\n}\n\nfunction hashToArray(hash) {\n  var result = [];\n\n  for (var key in hash) {\n    if (hash.hasOwnProperty(key)) {\n      result.push(hash[key]);\n    }\n  }\n\n  return result;\n}\n\nfunction arraySome(arr, callback) {\n  if (arr.length === 0) return false;\n\n  for (var i = 0; i < arr.length; i++) {\n    if (callback(arr[i], i, arr)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction arrayDifference(arr, callback) {\n  return arrayFilter(arr, function (item, i) {\n    return !callback(item, i);\n  });\n}\n\nfunction throttle(callback, timeout) {\n  var wait = false;\n  return function () {\n    if (!wait) {\n      callback.apply(null, arguments);\n      wait = true;\n      setTimeout(function () {\n        wait = false;\n      }, timeout);\n    }\n  };\n}\n\nfunction delay(callback, timeout) {\n  var timer;\n\n  var result = function result() {\n    result.$cancelTimeout();\n    result.$pending = true;\n    var args = Array.prototype.slice.call(arguments);\n    timer = setTimeout(function () {\n      callback.apply(this, args);\n      result.$pending = false;\n    }, timeout);\n  };\n\n  result.$pending = false;\n\n  result.$cancelTimeout = function () {\n    clearTimeout(timer);\n    result.$pending = false;\n  };\n\n  result.$execute = function () {\n    var args = Array.prototype.slice.call(arguments);\n    callback.apply(this, args);\n    result.$cancelTimeout();\n  };\n\n  return result;\n}\n\nfunction sortArrayOfHash(arr, field, desc) {\n  var compare = function compare(a, b) {\n    return a < b;\n  };\n\n  arr.sort(function (a, b) {\n    if (a[field] === b[field]) return 0;\n    return desc ? compare(a[field], b[field]) : compare(b[field], a[field]);\n  });\n}\n\nfunction objectKeys(obj) {\n  if (Object.keys) {\n    return Object.keys(obj);\n  }\n\n  var result = [];\n  var key;\n\n  for (key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      result.push(key);\n    }\n  }\n\n  return result;\n}\n\nfunction isEventable(obj) {\n  return obj.attachEvent && obj.detachEvent;\n} //GS-1090: A task should be able to have the id = 0\n\n\nfunction replaceValidZeroId(id, rootId) {\n  if (checkZeroId(id) && !checkZeroId(rootId)) {\n    id = \"0\";\n  }\n\n  return id;\n}\n\nfunction checkZeroId(id) {\n  if (id === 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction findBinary(array, target) {\n  // modified binary search, target value not exactly match array elements, looking for closest one\n  var low = 0,\n      high = array.length - 1,\n      i,\n      item,\n      prev;\n\n  while (low <= high) {\n    i = Math.floor((low + high) / 2);\n    item = +array[i];\n    prev = +array[i - 1];\n\n    if (item < target) {\n      low = i + 1;\n      continue;\n    }\n\n    if (item > target) {\n      if (!(!isNaN(prev) && prev < target)) {\n        high = i - 1;\n        continue;\n      } else {\n        // if target is between 'i' and 'i-1' return 'i - 1'\n        return i - 1;\n      }\n    }\n\n    while (+array[i] == +array[i + 1]) {\n      i++;\n    }\n\n    return i;\n  }\n\n  return array.length - 1;\n}\n\nmodule.exports = {\n  getSecondsInUnit: getSecondsInUnit,\n  forEach: forEach,\n  arrayMap: arrayMap,\n  arrayIncludes: arrayIncludes,\n  arrayFind: arrayFind,\n  arrayFilter: arrayFilter,\n  arrayDifference: arrayDifference,\n  arraySome: arraySome,\n  hashToArray: hashToArray,\n  sortArrayOfHash: sortArrayOfHash,\n  throttle: throttle,\n  isArray: isArray,\n  isDate: isDate,\n  isValidDate: isValidDate,\n  isStringObject: isStringObject,\n  isNumberObject: isNumberObject,\n  isBooleanObject: isBooleanObject,\n  delay: delay,\n  objectKeys: objectKeys,\n  isEventable: isEventable,\n  replaceValidZeroId: replaceValidZeroId,\n  checkZeroId: checkZeroId,\n  findBinary: findBinary\n};","module.exports = function (d, b) {\n  for (var p in b) {\n    if (b.hasOwnProperty(p)) d[p] = b[p];\n  }\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};","var EventHost = function EventHost() {\n  this._silent_mode = false;\n  this.listeners = {};\n};\n\nEventHost.prototype = {\n  _silentStart: function _silentStart() {\n    this._silent_mode = true;\n  },\n  _silentEnd: function _silentEnd() {\n    this._silent_mode = false;\n  }\n};\n\nvar createEventStorage = function createEventStorage(obj) {\n  var handlers = {};\n  var index = 0;\n\n  var eventStorage = function eventStorage() {\n    var combinedResult = true;\n\n    for (var i in handlers) {\n      var handlerResult = handlers[i].apply(obj, arguments);\n      combinedResult = combinedResult && handlerResult;\n    }\n\n    return combinedResult;\n  };\n\n  eventStorage.addEvent = function (handler, settings) {\n    if (typeof handler == \"function\") {\n      var handlerId;\n\n      if (settings && settings.id) {\n        handlerId = settings.id;\n      } else {\n        handlerId = index;\n        index++;\n      }\n\n      if (settings && settings.once) {\n        var originalHandler = handler;\n\n        handler = function handler() {\n          originalHandler();\n          eventStorage.removeEvent(handlerId);\n        };\n      }\n\n      handlers[handlerId] = handler;\n      return handlerId;\n    }\n\n    return false;\n  };\n\n  eventStorage.removeEvent = function (id) {\n    delete handlers[id];\n  };\n\n  eventStorage.clear = function () {\n    handlers = {};\n  };\n\n  return eventStorage;\n};\n\nfunction makeEventable(obj) {\n  var eventHost = new EventHost();\n\n  obj.attachEvent = function (eventName, handler, settings) {\n    eventName = 'ev_' + eventName.toLowerCase();\n\n    if (!eventHost.listeners[eventName]) {\n      eventHost.listeners[eventName] = createEventStorage(this);\n    }\n\n    if (settings && settings.thisObject) {\n      handler = handler.bind(settings.thisObject);\n    }\n\n    var innerId = eventHost.listeners[eventName].addEvent(handler, settings);\n    var handlerId = eventName + ':' + innerId; //return ID (ev_eventname:1)\n\n    if (settings && settings.id) {\n      handlerId = settings.id;\n    }\n\n    return handlerId;\n  };\n\n  obj.attachAll = function (callback) {\n    this.attachEvent('listen_all', callback);\n  };\n\n  obj.callEvent = function (name, eventArguments) {\n    if (eventHost._silent_mode) return true;\n    var handlerName = 'ev_' + name.toLowerCase();\n    var listeners = eventHost.listeners;\n\n    if (listeners['ev_listen_all']) {\n      listeners['ev_listen_all'].apply(this, [name].concat(eventArguments));\n    }\n\n    if (listeners[handlerName]) return listeners[handlerName].apply(this, eventArguments);\n    return true;\n  };\n\n  obj.checkEvent = function (name) {\n    var listeners = eventHost.listeners;\n    return !!listeners['ev_' + name.toLowerCase()];\n  };\n\n  obj.detachEvent = function (id) {\n    if (id) {\n      var listeners = eventHost.listeners;\n\n      for (var i in listeners) {\n        listeners[i].removeEvent(id); //remove event\n      }\n\n      var list = id.split(':'); //get EventName and ID\n\n      var listeners = eventHost.listeners;\n\n      if (list.length === 2) {\n        var eventName = list[0];\n        var eventId = list[1];\n\n        if (listeners[eventName]) {\n          listeners[eventName].removeEvent(eventId); //remove event\n        }\n      }\n    }\n  };\n\n  obj.detachAllEvents = function () {\n    for (var name in eventHost.listeners) {\n      eventHost.listeners[name].clear();\n    }\n  };\n}\n\nmodule.exports = makeEventable;","module.exports = function getVisibleTasksRange(gantt, view, config, datastore, viewport) {\n  var buffer = 1;\n  var start = view.getItemIndexByTopPosition(viewport.y) || 0;\n  var end = view.getItemIndexByTopPosition(viewport.y_end) || datastore.count();\n  var indexStart = Math.max(0, start - buffer);\n  var indexEnd = Math.min(datastore.count(), end + buffer);\n  return {\n    start: indexStart,\n    end: indexEnd\n  };\n};","function dummy() {\n  // eslint-disable-next-line\n  console.log(\"Method is not implemented.\");\n}\n\nfunction BaseControl() {} // base methods will be runned in gantt context\n\n\nBaseControl.prototype.render = dummy; // arguments: sns\n\nBaseControl.prototype.set_value = dummy; // arguments: node, value, ev, sns(config)\n\nBaseControl.prototype.get_value = dummy; // arguments node, ev, sns(config)\n\nBaseControl.prototype.focus = dummy; // arguments: node\n\nmodule.exports = function (gantt) {\n  // we could send current instance of gantt to module\n  return BaseControl;\n};","module.exports = function (gantt) {\n  var BaseEditor = function BaseEditor() {};\n\n  BaseEditor.prototype = {\n    show: function show(id, column, config, placeholder) {},\n    hide: function hide() {},\n    set_value: function set_value(value, id, column, node) {\n      this.get_input(node).value = value;\n    },\n    get_value: function get_value(id, column, node) {\n      return this.get_input(node).value || \"\";\n    },\n    is_changed: function is_changed(value, id, column, node) {\n      var currentValue = this.get_value(id, column, node);\n\n      if (currentValue && value && currentValue.valueOf && value.valueOf) {\n        return currentValue.valueOf() != value.valueOf();\n      } else {\n        return currentValue != value;\n      }\n    },\n    is_valid: function is_valid(value, id, column, node) {\n      return true;\n    },\n    save: function save(id, column, node) {},\n    get_input: function get_input(node) {\n      return node.querySelector(\"input\");\n    },\n    focus: function focus(node) {\n      var input = this.get_input(node);\n\n      if (!input) {\n        return;\n      }\n\n      if (input.focus) {\n        input.focus();\n      }\n\n      if (input.select) {\n        input.select();\n      }\n    }\n  };\n  return BaseEditor;\n};","/* eslint-disable no-restricted-globals */\nvar isWindowAwailable = typeof window !== \"undefined\";\n/* eslint-enable no-restricted-globals */\n\nvar env = {\n  isIE: isWindowAwailable && (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\n  isIE6: isWindowAwailable && !XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0,\n  isIE7: isWindowAwailable && navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0,\n  isIE8: isWindowAwailable && navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0,\n  isOpera: isWindowAwailable && navigator.userAgent.indexOf(\"Opera\") >= 0,\n  isChrome: isWindowAwailable && navigator.userAgent.indexOf(\"Chrome\") >= 0,\n  isKHTML: isWindowAwailable && (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\n  isFF: isWindowAwailable && navigator.userAgent.indexOf(\"Firefox\") >= 0,\n  isIPad: isWindowAwailable && navigator.userAgent.search(/iPad/gi) >= 0,\n  isEdge: isWindowAwailable && navigator.userAgent.indexOf(\"Edge\") != -1,\n  isNode: !isWindowAwailable || typeof navigator == \"undefined\"\n};\nmodule.exports = env;","var utils = require(\"../../../utils/utils\"),\n    eventable = require(\"../../../utils/eventable\"),\n    domHelpers = require(\"../utils/dom_helpers\");\n\nvar Cell = function () {\n  \"use strict\";\n\n  function Cell(parent, config, factory, gantt) {\n    if (parent) {\n      this.$container = domHelpers.toNode(parent);\n      this.$parent = parent;\n    } // save config\n\n\n    this.$config = utils.mixin(config, {\n      headerHeight: 33\n    });\n    this.$gantt = gantt;\n    this.$domEvents = gantt._createDomEventScope(); // set id\n\n    this.$id = config.id || \"c\" + utils.uid();\n    this.$name = \"cell\";\n    this.$factory = factory;\n    eventable(this);\n  }\n\n  Cell.prototype.destructor = function () {\n    this.$parent = this.$container = this.$view = null;\n    var mouse = this.$gantt.$services.getService(\"mouseEvents\");\n    mouse.detach(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\n    this.$domEvents.detachAll();\n    this.callEvent(\"onDestroy\", []);\n    this.detachAllEvents();\n  };\n\n  Cell.prototype.cell = function (id) {\n    return null;\n  };\n\n  Cell.prototype.scrollTo = function (left, top) {\n    //GS-333 Add a way to scroll the HTML views:\n    var cell = this.$view;\n    if (this.$config.html) cell = this.$view.firstChild;\n\n    if (left * 1 == left) {\n      cell.scrollLeft = left;\n    }\n\n    if (top * 1 == top) {\n      cell.scrollTop = top;\n    }\n  };\n\n  Cell.prototype.clear = function () {\n    this.getNode().innerHTML = \"\";\n    this.getNode().className = \"gantt_layout_content\";\n    this.getNode().style.padding = \"0\";\n  };\n\n  Cell.prototype.resize = function (_final) {\n    if (this.$parent) {\n      return this.$parent.resize(_final);\n    }\n\n    if (_final === false) {\n      this.$preResize = true;\n    }\n\n    var topCont = this.$container;\n    var x = topCont.offsetWidth;\n    var y = topCont.offsetHeight;\n    var topSize = this.getSize();\n\n    if (topCont === document.body) {\n      x = document.body.offsetWidth;\n      y = document.body.offsetHeight;\n    }\n\n    if (x < topSize.minWidth) {\n      x = topSize.minWidth;\n    }\n\n    if (x > topSize.maxWidth) {\n      x = topSize.maxWidth;\n    }\n\n    if (y < topSize.minHeight) {\n      y = topSize.minHeight;\n    }\n\n    if (y > topSize.maxHeight) {\n      y = topSize.maxHeight;\n    }\n\n    this.setSize(x, y);\n\n    if (!this.$preResize) {//\tself.callEvent(\"onResize\", [x, y]);\n    }\n\n    this.$preResize = false;\n  };\n\n  Cell.prototype.hide = function () {\n    this._hide(true);\n\n    this.resize();\n  };\n\n  Cell.prototype.show = function (force) {\n    this._hide(false);\n\n    if (force && this.$parent) {\n      this.$parent.show();\n    }\n\n    this.resize();\n  };\n\n  Cell.prototype._hide = function (mode) {\n    if (mode === true && this.$view.parentNode) {\n      this.$view.parentNode.removeChild(this.$view);\n    } else if (mode === false && !this.$view.parentNode) {\n      var index = this.$parent.cellIndex(this.$id);\n      this.$parent.moveView(this, index);\n    }\n\n    this.$config.hidden = mode;\n  };\n\n  Cell.prototype.$toHTML = function (content, css) {\n    if (content === void 0) {\n      content = \"\";\n    }\n\n    css = [css || \"\", this.$config.css || \"\"].join(\" \");\n    var obj = this.$config;\n    var header = \"\";\n\n    if (obj.raw) {\n      content = typeof obj.raw === \"string\" ? obj.raw : \"\";\n    } else {\n      if (!content) {\n        content = \"<div class='gantt_layout_content' \" + (css ? \" class='\" + css + \"' \" : \"\") + \" >\" + (obj.html || \"\") + \"</div>\";\n      }\n\n      if (obj.header) {\n        var collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\n        header = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\n      }\n    }\n\n    return \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\n  };\n\n  Cell.prototype.$fill = function (node, parent) {\n    this.$view = node;\n    this.$parent = parent;\n    this.init();\n  };\n\n  Cell.prototype.getNode = function () {\n    return this.$view.querySelector(\"gantt_layout_cell\") || this.$view;\n  };\n\n  Cell.prototype.init = function () {\n    // [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\n    var self = this;\n\n    this._headerClickHandler = function (e) {\n      var cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\n\n      if (cellId == self.$id) {\n        self.toggle();\n      }\n    };\n\n    var mouse = this.$gantt.$services.getService(\"mouseEvents\");\n    mouse.delegate(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\n    this.callEvent(\"onReady\", []);\n  };\n\n  Cell.prototype.toggle = function () {\n    this.$config.collapsed = !this.$config.collapsed;\n    this.resize();\n  };\n\n  Cell.prototype.getSize = function () {\n    var size = {\n      height: this.$config.height || 0,\n      width: this.$config.width || 0,\n      gravity: this.$config.gravity || 1,\n      minHeight: this.$config.minHeight || 0,\n      minWidth: this.$config.minWidth || 0,\n      maxHeight: this.$config.maxHeight || 100000000000,\n      maxWidth: this.$config.maxWidth || 100000000000\n    };\n\n    if (this.$config.collapsed) {\n      var mode = this.$config.mode === \"x\";\n      size[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\n    }\n\n    return size;\n  };\n\n  Cell.prototype.getContentSize = function () {\n    var width = this.$lastSize.contentX;\n\n    if (width !== width * 1) {\n      width = this.$lastSize.width;\n    }\n\n    var height = this.$lastSize.contentY;\n\n    if (height !== height * 1) {\n      height = this.$lastSize.height;\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  };\n\n  Cell.prototype._getBorderSizes = function () {\n    var borders = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      horizontal: 0,\n      vertical: 0\n    };\n\n    if (this._currentBorders) {\n      if (this._currentBorders[this._borders.left]) {\n        borders.left = 1;\n        borders.horizontal++;\n      }\n\n      if (this._currentBorders[this._borders.right]) {\n        borders.right = 1;\n        borders.horizontal++;\n      }\n\n      if (this._currentBorders[this._borders.top]) {\n        borders.top = 1;\n        borders.vertical++;\n      }\n\n      if (this._currentBorders[this._borders.bottom]) {\n        borders.bottom = 1;\n        borders.vertical++;\n      }\n    }\n\n    return borders;\n  };\n\n  Cell.prototype.setSize = function (x, y) {\n    this.$view.style.width = x + \"px\";\n    this.$view.style.height = y + \"px\";\n\n    var borders = this._getBorderSizes();\n\n    var contentY = y - borders.vertical;\n    var contentX = x - borders.horizontal;\n    this.$lastSize = {\n      x: x,\n      y: y,\n      contentX: contentX,\n      contentY: contentY\n    };\n\n    if (this.$config.header) {\n      this._sizeHeader();\n    } else {\n      this._sizeContent();\n    }\n  };\n\n  Cell.prototype._borders = {\n    \"left\": \"gantt_layout_cell_border_left\",\n    \"right\": \"gantt_layout_cell_border_right\",\n    \"top\": \"gantt_layout_cell_border_top\",\n    \"bottom\": \"gantt_layout_cell_border_bottom\"\n  };\n\n  Cell.prototype._setBorders = function (css, view) {\n    if (!view) {\n      view = this;\n    }\n\n    var node = view.$view;\n\n    for (var i in this._borders) {\n      domHelpers.removeClassName(node, this._borders[i]);\n    }\n\n    if (typeof css == \"string\") {\n      css = [css];\n    }\n\n    var cssHash = {};\n\n    for (var i = 0; i < css.length; i++) {\n      domHelpers.addClassName(node, css[i]);\n      cssHash[css[i]] = true;\n    }\n\n    view._currentBorders = cssHash;\n  };\n\n  Cell.prototype._sizeContent = function () {\n    var content = this.$view.childNodes[0];\n\n    if (content && content.className == \"gantt_layout_content\") {\n      content.style.height = this.$lastSize.contentY + \"px\";\n    }\n  };\n\n  Cell.prototype._sizeHeader = function () {\n    var size = this.$lastSize;\n    size.contentY -= this.$config.headerHeight;\n    var header = this.$view.childNodes[0];\n    var content = this.$view.childNodes[1];\n    var xLayout = this.$config.mode === \"x\";\n\n    if (this.$config.collapsed) {\n      content.style.display = \"none\";\n\n      if (xLayout) {\n        header.className = \"gantt_layout_header collapsed_x\";\n        header.style.width = size.y + \"px\";\n        var d = Math.floor(size.y / 2 - size.x / 2);\n        header.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\n        content.style.display = \"none\";\n      } else {\n        header.className = \"gantt_layout_header collapsed_y\";\n      }\n    } else {\n      if (xLayout) {\n        header.className = \"gantt_layout_header\";\n      } else {\n        header.className = \"gantt_layout_header vertical\";\n      }\n\n      header.style.width = 'auto';\n      header.style.transform = '';\n      content.style.display = \"\";\n      content.style.height = size.contentY + \"px\";\n    }\n\n    header.style.height = this.$config.headerHeight + \"px\";\n  };\n\n  return Cell;\n}();\n\nmodule.exports = Cell;","var utils = require(\"./env\");\n\nmodule.exports = function (gantt) {\n  return utils.isNode || !gantt.$root;\n};","/**\r\n * Check the over task or draggble task is placeholder task\r\n */\nmodule.exports = function isPlaceholderTask(id, gantt, store, config) {\n  // return false;\n  var config = gantt ? gantt.config : config;\n\n  if (config && config.placeholder_task) {\n    if (store.exists(id)) {\n      var item = store.getItem(id);\n      return item.type === config.types.placeholder;\n    }\n  }\n\n  return false;\n};","var __extends = require(\"../../../../utils/extends\");\n\nvar htmlHelpers = require(\"../../utils/html_helpers\");\n\nmodule.exports = function (gantt) {\n  var _super = require(\"./base_control\")(gantt);\n\n  function SelectControl() {\n    var self = _super.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(SelectControl, _super);\n\n  SelectControl.prototype.render = function (sns) {\n    var height = (sns.height || \"23\") + \"px\";\n    var html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\n    html += htmlHelpers.getHtmlSelect(sns.options, [{\n      key: \"style\",\n      value: \"width:100%;\"\n    }]);\n    html += \"</div>\";\n    return html;\n  };\n\n  SelectControl.prototype.set_value = function (node, value, ev, sns) {\n    var select = node.firstChild;\n\n    if (!select._dhx_onchange && sns.onchange) {\n      select.onchange = sns.onchange;\n      select._dhx_onchange = true;\n    }\n\n    if (typeof value === \"undefined\") value = (select.options[0] || {}).value;\n    select.value = value || \"\";\n  };\n\n  SelectControl.prototype.get_value = function (node) {\n    return node.firstChild.value;\n  };\n\n  SelectControl.prototype.focus = function (node) {\n    var a = node.firstChild;\n\n    gantt._focus(a, true);\n  };\n\n  return SelectControl;\n};","// optimized checker for task bars smart rendering\n// first check the vertical position since it's easier to calculate\nmodule.exports = function isBarInViewport(item, viewport, view, config, gantt) {\n  if (!item.start_date || !item.end_date) {\n    return null;\n  }\n\n  var top = view.getItemTop(item.id);\n  var height = view.getItemHeight(item.id);\n\n  if (top > viewport.y_end || top + height < viewport.y) {\n    return false;\n  }\n\n  var padding = 200;\n  var startCoord = view.posFromDate(item.start_date);\n  var endCoord = view.posFromDate(item.end_date);\n  var left = Math.min(startCoord, endCoord) - padding;\n  var right = Math.max(startCoord, endCoord) + padding;\n\n  if (left > viewport.x_end || right < viewport.x) {\n    return false;\n  }\n\n  return true;\n};","module.exports = function (gantt) {\n  return gantt.config.smart_rendering && gantt._smart_render;\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar g; // This works in non-strict mode\n\ng = function () {\n  return this;\n}();\n\ntry {\n  // This works if eval is allowed (see CSP)\n  g = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n  // This works if the window reference is available\n  if ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n} // g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\n\nmodule.exports = g;","/* eslint-disable no-restricted-globals */\nvar globalScope;\n\nif (typeof window !== \"undefined\") {\n  globalScope = window;\n} else {\n  globalScope = global;\n}\n/* eslint-enable no-restricted-globals */\n\n\nmodule.exports = globalScope;","/**\r\n * The state object for order branch drag and drop\r\n */\nvar utils = require(\"../../../../utils/utils\");\n\nmodule.exports = {\n  createDropTargetObject: function createDropTargetObject(parent) {\n    var res = {\n      targetParent: null,\n      targetIndex: 0,\n      targetId: null,\n      child: false,\n      nextSibling: false,\n      prevSibling: false\n    };\n\n    if (parent) {\n      utils.mixin(res, parent, true);\n    }\n\n    return res;\n  },\n  nextSiblingTarget: function nextSiblingTarget(dndTaskId, targetTaskId, store) {\n    var result = this.createDropTargetObject();\n    result.targetId = targetTaskId;\n    result.nextSibling = true;\n    result.targetParent = store.getParent(result.targetId);\n    result.targetIndex = store.getBranchIndex(result.targetId);\n\n    if (store.getParent(dndTaskId) != result.targetParent || result.targetIndex < store.getBranchIndex(dndTaskId)) {\n      result.targetIndex += 1;\n    }\n\n    return result;\n  },\n  prevSiblingTarget: function prevSiblingTarget(dndTaskId, targetTaskId, store) {\n    var result = this.createDropTargetObject();\n    result.targetId = targetTaskId;\n    result.prevSibling = true;\n    result.targetParent = store.getParent(result.targetId);\n    result.targetIndex = store.getBranchIndex(result.targetId);\n\n    if (store.getParent(dndTaskId) == result.targetParent && result.targetIndex > store.getBranchIndex(dndTaskId)) {\n      result.targetIndex -= 1;\n    }\n\n    return result;\n  },\n  firstChildTarget: function firstChildTarget(dndTaskId, targetTaskId, store) {\n    var result = this.createDropTargetObject();\n    result.targetId = targetTaskId;\n    result.targetParent = result.targetId;\n    result.targetIndex = 0;\n    result.child = true;\n    return result;\n  },\n  lastChildTarget: function lastChildTarget(dndTaskId, targetTaskId, store) {\n    var children = store.getChildren(targetTaskId);\n    var result = this.createDropTargetObject();\n    result.targetId = children[children.length - 1];\n    result.targetParent = targetTaskId;\n    result.targetIndex = children.length;\n    result.nextSibling = true;\n    return result;\n  }\n};","var isLegacyRender = require(\"../is_legacy_smart_render\");\n\nmodule.exports = function isColumnVisible(columnIndex, scale, viewPort, gantt) {\n  var width = scale.width[columnIndex];\n\n  if (width <= 0) {\n    return false;\n  }\n\n  if (!gantt.config.smart_rendering || isLegacyRender(gantt)) {\n    return true;\n  }\n\n  var cellLeftCoord = scale.left[columnIndex] - width;\n  var cellRightCoord = scale.left[columnIndex] + width;\n  return cellLeftCoord <= viewPort.x_end && cellRightCoord >= viewPort.x; //do not render skipped columns\n};","module.exports = function getVisibleCellsRange(scale, viewport) {\n  var firstCellIndex = 0;\n  var lastCellIndex = scale.left.length - 1;\n\n  if (viewport) {\n    for (var i = 0; i < scale.left.length; i++) {\n      var left = scale.left[i];\n\n      if (left < viewport.x) {\n        firstCellIndex = i;\n      }\n\n      if (left > viewport.x_end) {\n        lastCellIndex = i;\n        break;\n      }\n    }\n  }\n\n  return {\n    start: firstCellIndex,\n    end: lastCellIndex\n  };\n};","module.exports = function (item, view, config) {\n  return {\n    top: view.getItemTop(item.id),\n    height: view.getItemHeight(item.id),\n    left: 0,\n    right: Infinity\n  };\n};","function createTaskRenderer(gantt) {\n  function _render_task_element(task, view, config) {\n    var config = view.$getConfig();\n    var painters = config.type_renderers;\n    var renderer = painters[gantt.getTaskType(task.type)],\n        defaultRenderer = _task_default_render;\n\n    if (!renderer) {\n      return defaultRenderer.call(gantt, task, view, config);\n    } else {\n      return renderer.call(gantt, task, function (task) {\n        return defaultRenderer.call(gantt, task, view, config);\n      }, view);\n    }\n  }\n\n  function _task_default_render(task, view, config) {\n    if (gantt._isAllowedUnscheduledTask(task)) return;\n\n    if (!gantt._isTaskInTimelineLimits(task)) {\n      return;\n    }\n\n    var pos = view.getItemPosition(task);\n    var cfg = config,\n        templates = view.$getTemplates();\n    var taskType = gantt.getTaskType(task.type);\n    var height = view.getBarHeight(task.id, taskType == cfg.types.milestone);\n    var controlsMargin = 0;\n\n    if (taskType == cfg.types.milestone) {\n      controlsMargin = (height - pos.height) / 2;\n    }\n\n    var padd = Math.floor((view.getItemHeight(task.id) - height) / 2); //\tif(task.type == cfg.types.milestone){\n    //\t\tpadd -= 1;\n    //\t}\n    //\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\n    //\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\n    //\t\tpadd += 1;\n    //\t}\n\n    if (taskType == cfg.types.milestone) {\n      pos.left -= Math.round(height / 2);\n      pos.width = height;\n    }\n\n    var div = document.createElement(\"div\");\n    var width = Math.round(pos.width);\n\n    if (view.$config.item_attribute) {\n      div.setAttribute(view.$config.item_attribute, task.id);\n      div.setAttribute(view.$config.bind + \"_id\", task.id); // 'task_id'/'resource_id' for backward compatibility\n    }\n\n    if (cfg.show_progress && taskType != cfg.types.milestone) {\n      _render_task_progress(task, div, width, cfg, templates);\n    } //use separate div to display content above progress bar\n\n\n    var content = _render_task_content(task, width, templates);\n\n    if (task.textColor) {\n      content.style.color = task.textColor;\n    }\n\n    div.appendChild(content);\n\n    var css = _combine_item_class(\"gantt_task_line\", templates.task_class(task.start_date, task.end_date, task), task.id, view);\n\n    if (task.color || task.progressColor || task.textColor) {\n      css += \" gantt_task_inline_color\";\n    }\n\n    if (pos.width < 20) {\n      css += \" gantt_thin_task\";\n    }\n\n    div.className = css;\n    var styles = [\"left:\" + pos.left + \"px\", \"top:\" + (padd + pos.top) + 'px', \"height:\" + (taskType == cfg.types.milestone ? pos.height : height) + 'px', \"line-height:\" + Math.max(height < 30 ? height - 2 : height, 0) + 'px', \"width:\" + width + 'px'];\n\n    if (task.color) {\n      styles.push(\"background-color:\" + task.color);\n    }\n\n    if (task.textColor) {\n      styles.push(\"color:\" + task.textColor);\n    }\n\n    div.style.cssText = styles.join(\";\");\n\n    var side = _render_leftside_content(task, cfg, templates, controlsMargin);\n\n    if (side) div.appendChild(side);\n    side = _render_rightside_content(task, cfg, templates, controlsMargin);\n    if (side) div.appendChild(side);\n\n    gantt._waiAria.setTaskBarAttr(task, div);\n\n    var state = gantt.getState();\n\n    if (!gantt.isReadonly(task)) {\n      if (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\n        _render_pair(div, \"gantt_task_drag\", task, function (css) {\n          var el = document.createElement(\"div\");\n          el.className = css;\n          return el;\n        }, cfg);\n      }\n\n      if (cfg.drag_links && cfg.show_links) {\n        _render_pair(div, \"gantt_link_control\", task, function (css) {\n          var outer = document.createElement(\"div\");\n          outer.className = css;\n          outer.style.cssText = [\"height:\" + height + 'px', \"line-height:\" + height + 'px'].join(\";\");\n          var inner = document.createElement(\"div\");\n          inner.className = \"gantt_link_point\";\n          var showLinkPoints = false;\n\n          if (state.link_source_id && cfg.touch) {\n            showLinkPoints = true;\n          }\n\n          inner.style.display = showLinkPoints ? \"block\" : \"\";\n          outer.appendChild(inner);\n          return outer;\n        }, cfg, controlsMargin);\n      }\n    }\n\n    return div;\n  }\n\n  function _render_side_content(task, template, cssClass, marginStyle) {\n    if (!template) return null;\n    var text = template(task.start_date, task.end_date, task);\n    if (!text) return null;\n    var content = document.createElement(\"div\");\n    content.className = \"gantt_side_content \" + cssClass;\n    content.innerHTML = text;\n\n    if (marginStyle) {\n      content.style[marginStyle.type] = Math.abs(marginStyle.value) + \"px\";\n    }\n\n    return content;\n  }\n\n  function _render_leftside_content(task, cfg, templates, margin) {\n    var css = \"gantt_left \" + _get_link_crossing_css(!cfg.rtl ? true : false, task, cfg);\n\n    var marginStyle = null;\n\n    if (margin) {\n      marginStyle = {\n        type: \"marginRight\",\n        value: margin\n      };\n    }\n\n    return _render_side_content(task, templates.leftside_text, css, marginStyle);\n  }\n\n  function _render_rightside_content(task, cfg, templates, margin) {\n    var css = \"gantt_right \" + _get_link_crossing_css(!cfg.rtl ? false : true, task, cfg);\n\n    var marginStyle = null;\n\n    if (margin) {\n      marginStyle = {\n        type: \"marginLeft\",\n        value: margin\n      };\n    }\n\n    return _render_side_content(task, templates.rightside_text, css, marginStyle);\n  }\n\n  function _get_link_crossing_css(left, task) {\n    var cond = _get_conditions(left);\n\n    for (var i in cond) {\n      var links = task[i];\n\n      for (var ln = 0; ln < links.length; ln++) {\n        var link = gantt.getLink(links[ln]);\n\n        for (var tp = 0; tp < cond[i].length; tp++) {\n          if (link.type == cond[i][tp]) {\n            return \"gantt_link_crossing\";\n          }\n        }\n      }\n    }\n\n    return \"\";\n  }\n\n  function _render_task_content(task, width, templates) {\n    var content = document.createElement(\"div\");\n\n    if (gantt.getTaskType(task.type) != gantt.config.types.milestone) {\n      content.innerHTML = templates.task_text(task.start_date, task.end_date, task);\n    } else if (gantt.getTaskType(task.type) == gantt.config.types.milestone && width) {\n      content.style.height = content.style.width = width + \"px\";\n    }\n\n    content.className = \"gantt_task_content\"; //content.style.width = width + 'px';\n\n    return content;\n  }\n\n  function _render_task_progress(task, element, maxWidth, cfg, templates) {\n    var done = task.progress * 1 || 0;\n    maxWidth = Math.max(maxWidth - 2, 0); //2px for borders\n\n    var pr = document.createElement(\"div\");\n    var width = Math.round(maxWidth * done);\n    width = Math.min(maxWidth, width);\n\n    if (task.progressColor) {\n      pr.style.backgroundColor = task.progressColor;\n      pr.style.opacity = 1;\n    }\n\n    pr.style.width = width + 'px';\n    pr.className = \"gantt_task_progress\";\n    pr.innerHTML = templates.progress_text(task.start_date, task.end_date, task);\n\n    if (cfg.rtl) {\n      pr.style.position = \"absolute\";\n      pr.style.right = \"0px\";\n    }\n\n    var wrapper = document.createElement(\"div\");\n    wrapper.className = \"gantt_task_progress_wrapper\";\n    wrapper.appendChild(pr);\n    element.appendChild(wrapper);\n\n    if (gantt.config.drag_progress && !gantt.isReadonly(task)) {\n      var drag = document.createElement(\"div\");\n      var markerPos = width;\n\n      if (cfg.rtl) {\n        markerPos = maxWidth - width;\n      }\n\n      drag.style.left = markerPos + 'px';\n      drag.className = \"gantt_task_progress_drag\";\n      pr.appendChild(drag);\n      element.appendChild(drag);\n    }\n  }\n\n  function _get_conditions(leftside) {\n    if (leftside) {\n      return {\n        $source: [gantt.config.links.start_to_start],\n        $target: [gantt.config.links.start_to_start, gantt.config.links.finish_to_start]\n      };\n    } else {\n      return {\n        $source: [gantt.config.links.finish_to_start, gantt.config.links.finish_to_finish],\n        $target: [gantt.config.links.finish_to_finish]\n      };\n    }\n  }\n\n  function _combine_item_class(basic, template, itemId, view) {\n    var cfg = view.$getConfig();\n    var css = [basic];\n    if (template) css.push(template);\n    var state = gantt.getState();\n    var task = gantt.getTask(itemId);\n\n    if (gantt.getTaskType(task.type) == cfg.types.milestone) {\n      css.push(\"gantt_milestone\");\n    } else if (gantt.getTaskType(task.type) == cfg.types.project) {\n      css.push(\"gantt_project\");\n    }\n\n    css.push(\"gantt_bar_\" + gantt.getTaskType(task.type));\n    if (gantt.isSummaryTask(task)) css.push(\"gantt_dependent_task\");\n\n    if (gantt.isSplitTask(task) && (cfg.open_split_tasks && !task.$open || !cfg.open_split_tasks)) {\n      css.push(\"gantt_split_parent\");\n    }\n\n    if (cfg.select_task && gantt.isSelectedTask(itemId)) {\n      css.push(\"gantt_selected\");\n    }\n\n    if (itemId == state.drag_id) {\n      css.push(\"gantt_drag_\" + state.drag_mode);\n\n      if (state.touch_drag) {\n        css.push(\"gantt_touch_\" + state.drag_mode);\n      }\n    }\n\n    if (state.link_source_id == itemId) css.push(\"gantt_link_source\");\n    if (state.link_target_id == itemId) css.push(\"gantt_link_target\");\n\n    if (cfg.highlight_critical_path && gantt.isCriticalTask) {\n      if (gantt.isCriticalTask(task)) css.push(\"gantt_critical_task\");\n    }\n\n    if (state.link_landing_area && state.link_target_id && state.link_source_id && state.link_target_id != state.link_source_id && (state.link_target_id == itemId || state.link_source_id == itemId)) {\n      var from_id = state.link_source_id;\n      var from_start = state.link_from_start;\n      var to_start = state.link_to_start;\n      var allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\n      var dragClass = \"\";\n\n      if (allowDrag) {\n        if (to_start) dragClass = \"link_start_allow\";else dragClass = \"link_finish_allow\";\n      } else {\n        if (to_start) dragClass = \"link_start_deny\";else dragClass = \"link_finish_deny\";\n      }\n\n      css.push(dragClass);\n    }\n\n    return css.join(\" \");\n  }\n\n  function _render_pair(parent, css, task, content, config, margin) {\n    var state = gantt.getState();\n    var className, element;\n\n    if (+task.start_date >= +state.min_date) {\n      className = [css, config.rtl ? \"task_right\" : \"task_left\", \"task_start_date\"];\n      element = content(className.join(\" \"));\n      element.setAttribute(\"data-bind-property\", \"start_date\");\n\n      if (margin) {\n        element.style.marginLeft = margin + \"px\";\n      }\n\n      parent.appendChild(element);\n    }\n\n    if (+task.end_date <= +state.max_date) {\n      className = [css, config.rtl ? \"task_left\" : \"task_right\", \"task_end_date\"];\n      element = content(className.join(\" \"));\n      element.setAttribute(\"data-bind-property\", \"end_date\");\n\n      if (margin) {\n        element.style.marginRight = margin + \"px\";\n      }\n\n      parent.appendChild(element);\n    }\n  }\n\n  return _render_task_element;\n}\n\nmodule.exports = createTaskRenderer;","var ScaleHelper = require(\"./scales_ignore\");\n\nvar eventable = require(\"../../../utils/eventable\");\n\nvar utils = require(\"../../../utils/utils\");\n\nvar helpers = require(\"../../../utils/helpers\");\n\nvar topPositionMixin = require(\"../row_position_mixin\");\n\nvar canvasRender = require(\"./tasks_canvas_render\");\n\nvar Timeline = function Timeline(parent, config, factory, gantt) {\n  this.$config = utils.mixin({}, config || {});\n  this.$scaleHelper = new ScaleHelper(gantt);\n  this.$gantt = gantt;\n  this._posFromDateCache = {};\n  this._timelineDragScroll = null;\n  utils.mixin(this, topPositionMixin(this));\n  eventable(this);\n};\n\nTimeline.prototype = {\n  init: function init(container) {\n    container.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\n    this.$task = container.childNodes[0];\n    this.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\n    this.$task_scale = this.$task.childNodes[0];\n    this.$task_data = this.$task.childNodes[1];\n    this.$task_data.innerHTML = \"<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>\";\n    this.$task_bg = this.$task_data.childNodes[0];\n    this.$task_links = this.$task_data.childNodes[1];\n    this.$task_bars = this.$task_data.childNodes[2];\n    this._tasks = {\n      col_width: 0,\n      width: [],\n      // width of each column\n      full_width: 0,\n      // width of all columns\n      trace_x: [],\n      rendered: {}\n    };\n    var config = this.$getConfig();\n    var attr = config[this.$config.bind + \"_attribute\"];\n    var linksAttr = config[this.$config.bindLinks + \"_attribute\"];\n\n    if (!attr && this.$config.bind) {\n      attr = \"data-\" + this.$config.bind + \"-id\";\n    }\n\n    if (!linksAttr && this.$config.bindLinks) {\n      linksAttr = \"data-\" + this.$config.bindLinks + \"-id\";\n    }\n\n    this.$config.item_attribute = attr || null;\n    this.$config.link_attribute = linksAttr || null;\n\n    var layers = this._createLayerConfig();\n\n    if (!this.$config.layers) {\n      this.$config.layers = layers.tasks;\n    }\n\n    if (!this.$config.linkLayers) {\n      this.$config.linkLayers = layers.links;\n    }\n\n    this._attachLayers(this.$gantt);\n\n    this.callEvent(\"onReady\", []); //this.refresh();\n\n    if (this.$gantt.ext.dragTimeline) {\n      this._timelineDragScroll = this.$gantt.ext.dragTimeline.create();\n\n      this._timelineDragScroll.attach(this);\n    }\n  },\n  setSize: function setSize(width, height) {\n    var config = this.$getConfig();\n\n    if (width * 1 === width) {\n      this.$config.width = width;\n    }\n\n    if (height * 1 === height) {\n      this.$config.height = height;\n      var dataHeight = Math.max(this.$config.height - config.scale_height);\n      this.$task_data.style.height = dataHeight + 'px';\n    }\n\n    this.refresh();\n    this.$task_bg.style.backgroundImage = \"\";\n\n    if (config.smart_rendering && this.$config.rowStore) {\n      this.$task_bg.style.height = this.getTotalHeight() + \"px\";\n    } else {\n      this.$task_bg.style.height = \"\";\n    }\n\n    var scale = this._tasks; //timeline area layers\n\n    var data_els = this.$task_data.childNodes;\n\n    for (var i = 0, len = data_els.length; i < len; i++) {\n      var el = data_els[i];\n      if (el.hasAttribute(\"data-layer\") && el.style) el.style.width = scale.full_width + \"px\";\n    }\n  },\n  isVisible: function isVisible() {\n    if (this.$parent && this.$parent.$config) {\n      return !this.$parent.$config.hidden;\n    } else {\n      return this.$task.offsetWidth;\n    }\n  },\n  getSize: function getSize() {\n    var config = this.$getConfig();\n    var store = this.$config.rowStore;\n    var contentHeight = store ? this.getTotalHeight() : 0,\n        contentWidth = this.isVisible() ? this._tasks.full_width : 0;\n    return {\n      x: this.isVisible() ? this.$config.width : 0,\n      y: this.isVisible() ? this.$config.height : 0,\n      contentX: this.isVisible() ? contentWidth : 0,\n      contentY: this.isVisible() ? config.scale_height + contentHeight : 0,\n      scrollHeight: this.isVisible() ? contentHeight : 0,\n      scrollWidth: this.isVisible() ? contentWidth : 0\n    };\n  },\n  scrollTo: function scrollTo(left, top) {\n    if (!this.isVisible()) return;\n    var scrolled = false;\n    this.$config.scrollTop = this.$config.scrollTop || 0;\n    this.$config.scrollLeft = this.$config.scrollLeft || 0;\n\n    if (top * 1 === top) {\n      this.$config.scrollTop = top;\n      this.$task_data.scrollTop = this.$config.scrollTop;\n      scrolled = true;\n    }\n\n    if (left * 1 === left) {\n      this.$task.scrollLeft = left;\n      this.$config.scrollLeft = this.$task.scrollLeft;\n\n      this._refreshScales();\n\n      scrolled = true;\n    }\n\n    if (scrolled) {\n      this.callEvent(\"onScroll\", [this.$config.scrollLeft, this.$config.scrollTop]);\n    }\n  },\n  _refreshScales: function _refreshScales() {\n    if (!this.isVisible()) return;\n    var config = this.$getConfig();\n    if (!config.smart_scales) return;\n    var viewPort = this.getViewPort();\n    var scales = this._scales;\n    this.$task_scale.innerHTML = this._getScaleChunkHtml(scales, viewPort.x, viewPort.x_end);\n  },\n  getViewPort: function getViewPort() {\n    var scrollLeft = this.$config.scrollLeft || 0;\n    var scrollTop = this.$config.scrollTop || 0;\n    var height = this.$config.height || 0;\n    var width = this.$config.width || 0;\n    return {\n      y: scrollTop,\n      y_end: scrollTop + height,\n      x: scrollLeft,\n      x_end: scrollLeft + width,\n      height: height,\n      width: width\n    };\n  },\n  _createLayerConfig: function _createLayerConfig() {\n    var self = this;\n\n    var taskFilter = function taskFilter() {\n      return self.isVisible();\n    };\n\n    var barVisible = function barVisible(id, task) {\n      return !task.hide_bar;\n    };\n\n    var taskLayers = [{\n      expose: true,\n      renderer: this.$gantt.$ui.layers.taskBar(),\n      container: this.$task_bars,\n      filter: [taskFilter, barVisible]\n    }, {\n      renderer: this.$gantt.$ui.layers.taskSplitBar(),\n      filter: [taskFilter],\n      container: this.$task_bars,\n      append: true\n    }, {\n      renderer: this.$gantt.$ui.layers.taskRollupBar(),\n      filter: [taskFilter],\n      container: this.$task_bars,\n      append: true\n    }, {\n      renderer: this.$gantt.$ui.layers.taskBg(),\n      container: this.$task_bg,\n      filter: [//function(){\n      //\treturn !self.$getConfig().static_background;\n      //},\n      taskFilter]\n    }];\n    var linkLayers = [{\n      expose: true,\n      renderer: this.$gantt.$ui.layers.link(),\n      container: this.$task_links,\n      filter: [taskFilter]\n    }];\n    return {\n      tasks: taskLayers,\n      links: linkLayers\n    };\n  },\n  _attachLayers: function _attachLayers(gantt) {\n    this._taskLayers = [];\n    this._linkLayers = [];\n    var self = this;\n    var layers = this.$gantt.$services.getService(\"layers\");\n\n    if (this.$config.bind) {\n      this._bindStore();\n\n      var taskRenderer = layers.getDataRender(this.$config.bind);\n\n      if (!taskRenderer) {\n        taskRenderer = layers.createDataRender({\n          name: this.$config.bind,\n          defaultContainer: function defaultContainer() {\n            return self.$task_data;\n          }\n        });\n      }\n\n      taskRenderer.container = function () {\n        return self.$task_data;\n      };\n\n      var taskLayers = this.$config.layers;\n\n      for (var i = 0; taskLayers && i < taskLayers.length; i++) {\n        var layer = taskLayers[i];\n\n        if (typeof layer == \"string\") {\n          layer = this.$gantt.$ui.layers[layer]();\n        }\n\n        if (typeof layer == \"function\" || layer && layer.render && layer.update) {\n          layer = {\n            renderer: layer\n          };\n        }\n\n        layer.view = this;\n        var bar_layer = taskRenderer.addLayer(layer);\n\n        this._taskLayers.push(bar_layer);\n\n        if (layer.expose) {\n          this._taskRenderer = taskRenderer.getLayer(bar_layer);\n        }\n      }\n\n      this._initStaticBackgroundRender();\n    }\n\n    if (this.$config.bindLinks) {\n      self.$config.linkStore = self.$gantt.getDatastore(self.$config.bindLinks);\n      var linkRenderer = layers.getDataRender(this.$config.bindLinks);\n\n      if (!linkRenderer) {\n        linkRenderer = layers.createDataRender({\n          name: this.$config.bindLinks,\n          defaultContainer: function defaultContainer() {\n            return self.$task_data;\n          }\n        });\n      }\n\n      var linkLayers = this.$config.linkLayers;\n\n      for (var i = 0; linkLayers && i < linkLayers.length; i++) {\n        if (typeof layer == \"string\") {\n          layer = this.$gantt.$ui.layers[layer]();\n        }\n\n        var layer = linkLayers[i];\n        layer.view = this; //\tlayer.getViewPort = getViewPort;\n        //\tsubscribeSmartRender(layer);\n\n        var linkLayer = linkRenderer.addLayer(layer);\n\n        this._taskLayers.push(linkLayer);\n\n        if (linkLayers[i].expose) {\n          this._linkRenderer = linkRenderer.getLayer(linkLayer);\n        }\n      }\n    }\n  },\n  _initStaticBackgroundRender: function _initStaticBackgroundRender() {\n    var self = this;\n    var staticRender = canvasRender.create();\n    var store = self.$config.rowStore;\n    if (!store) return;\n    this._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function (id, item, mode) {\n      if (id !== null) {\n        return;\n      }\n\n      if (!self.isVisible()) return;\n      var config = self.$getConfig();\n\n      if (config.static_background || config.timeline_placeholder) {\n        var store = self.$gantt.getDatastore(self.$config.bind);\n        var staticBgContainer = self.$task_bg_static;\n\n        if (!staticBgContainer) {\n          staticBgContainer = document.createElement(\"div\");\n          staticBgContainer.className = \"gantt_task_bg\";\n          self.$task_bg_static = staticBgContainer;\n\n          if (self.$task_bg.nextSibling) {\n            self.$task_data.insertBefore(staticBgContainer, self.$task_bg.nextSibling);\n          } else {\n            self.$task_data.appendChild(staticBgContainer);\n          }\n        }\n\n        if (store) {\n          var staticBackgroundHeight = self.getTotalHeight();\n\n          if (config.timeline_placeholder) {\n            staticBackgroundHeight = config.timeline_placeholder.height || self.$task_data.offsetHeight || 99999;\n          }\n\n          staticRender.render(staticBgContainer, config, self.getScale(), staticBackgroundHeight, self.getItemHeight(item ? item.id : null));\n        }\n      } else if (config.static_background) {\n        if (self.$task_bg_static && self.$task_bg_static.parentNode) {\n          self.$task_bg_static.parentNode.removeChild(self.$task_bg_static);\n        }\n      }\n    });\n    this.attachEvent(\"onDestroy\", function () {\n      staticRender.destroy();\n    });\n\n    this._initStaticBackgroundRender = function () {}; //init once\n\n  },\n  _clearLayers: function _clearLayers(gantt) {\n    var layers = this.$gantt.$services.getService(\"layers\");\n    var taskRenderer = layers.getDataRender(this.$config.bind);\n    var linkRenderer = layers.getDataRender(this.$config.bindLinks);\n\n    if (this._taskLayers) {\n      for (var i = 0; i < this._taskLayers.length; i++) {\n        taskRenderer.removeLayer(this._taskLayers[i]);\n      }\n    }\n\n    if (this._linkLayers) {\n      for (var i = 0; i < this._linkLayers.length; i++) {\n        linkRenderer.removeLayer(this._linkLayers[i]);\n      }\n    }\n\n    this._linkLayers = [];\n    this._taskLayers = [];\n  },\n  _render_tasks_scales: function _render_tasks_scales() {\n    var config = this.$getConfig();\n    var scales_html = \"\",\n        outer_width = 0,\n        scale_height = 0;\n    var state = this.$gantt.getState();\n\n    if (this.isVisible()) {\n      var helpers = this.$scaleHelper;\n\n      var scales = this._getScales();\n\n      scale_height = config.scale_height;\n      var availWidth = this.$config.width;\n\n      if (config.autosize == \"x\" || config.autosize == \"xy\") {\n        availWidth = Math.max(config.autosize_min_width, 0);\n      }\n\n      var cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height - 1, state.min_date, state.max_date, config.rtl);\n      var cfg = this._tasks = cfgs[cfgs.length - 1];\n      this._scales = cfgs;\n      this._posFromDateCache = {};\n      scales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\n      outer_width = cfg.full_width + \"px\"; //cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\n\n      scale_height += \"px\";\n    }\n\n    this.$task_scale.style.height = scale_height;\n    this.$task_data.style.width = this.$task_scale.style.width = outer_width;\n    this.$task_scale.innerHTML = scales_html;\n  },\n  _getScaleChunkHtml: function _get_scale_chunk_html(scales, fromPos, toPos) {\n    var templates = this.$gantt.templates;\n    var html = [];\n    var css = templates.scale_row_class;\n\n    for (var i = 0; i < scales.length; i++) {\n      var cssClass = \"gantt_scale_line\";\n      var tplClass = css(scales[i]);\n\n      if (tplClass) {\n        cssClass += \" \" + tplClass;\n      }\n\n      html.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + scales[i].height + \"px;position:relative;line-height:\" + scales[i].height + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos) + \"</div>\");\n    }\n\n    return html.join(\"\");\n  },\n  _prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos) {\n    var globalConfig = this.$getConfig();\n    var globalTemplates = this.$gantt.templates;\n    var cells = [];\n    var date = null,\n        css = null;\n    var content = config.format || config.template || config.date;\n\n    if (typeof content === \"string\") {\n      content = this.$gantt.date.date_to_str(content);\n    }\n\n    var startIndex = 0,\n        endIndex = config.count;\n\n    if (globalConfig.smart_scales && !isNaN(fromPos) && !isNaN(toPos)) {\n      startIndex = helpers.findBinary(config.left, fromPos);\n      endIndex = helpers.findBinary(config.left, toPos) + 1;\n    }\n\n    css = config.css || function () {};\n\n    if (!config.css && globalConfig.inherit_scale_class) {\n      css = globalTemplates.scale_cell_class;\n    }\n\n    for (var i = startIndex; i < endIndex; i++) {\n      if (!config.trace_x[i]) break;\n      date = new Date(config.trace_x[i]);\n      var value = content.call(this, date),\n          width = config.width[i],\n          height = config.height,\n          left = config.left[i],\n          style = \"\",\n          template = \"\",\n          cssclass = \"\";\n\n      if (width) {\n        var position = globalConfig.smart_scales ? \"position:absolute;left:\" + left + \"px\" : \"\";\n        style = \"width:\" + width + \"px;height:\" + height + \"px;\" + position;\n        cssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\n        template = css.call(this, date);\n        if (template) cssclass += \" \" + template;\n\n        var ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\n\n        var cell = \"<div class='\" + cssclass + \"'\" + ariaAttr + \" style='\" + style + \"'>\" + value + \"</div>\";\n        cells.push(cell);\n      } else {//do not render ignored cells\n      }\n    }\n\n    return cells.join(\"\");\n  },\n  dateFromPos: function dateFromPos(x) {\n    var scale = this._tasks;\n\n    if (x < 0 || x > scale.full_width || !scale.full_width) {\n      return null;\n    }\n\n    var ind = helpers.findBinary(this._tasks.left, x);\n    var summ = this._tasks.left[ind];\n    var col_width = scale.width[ind] || scale.col_width;\n    var part = 0;\n\n    if (col_width) {\n      part = (x - summ) / col_width;\n\n      if (scale.rtl) {\n        part = 1 - part;\n      }\n    }\n\n    var unit = 0;\n\n    if (part) {\n      unit = this._getColumnDuration(scale, scale.trace_x[ind]);\n    }\n\n    var date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\n    return date;\n  },\n  posFromDate: function posFromDate(date) {\n    if (!this.isVisible()) return 0;\n\n    if (!date) {\n      return 0;\n    }\n\n    var dateValue = String(date.valueOf());\n\n    if (this._posFromDateCache[dateValue] !== undefined) {\n      return this._posFromDateCache[dateValue];\n    }\n\n    var ind = this.columnIndexByDate(date);\n    this.$gantt.assert(ind >= 0, \"Invalid day index\");\n    var wholeCells = Math.floor(ind);\n    var partCell = ind % 1;\n\n    var pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\n\n    if (wholeCells == this._tasks.width.length) pos += this._tasks.width[this._tasks.width.length - 1]; //for(var i=1; i <= wholeCells; i++)\n    //\tpos += gantt._tasks.width[i-1];\n\n    if (partCell) {\n      if (wholeCells < this._tasks.width.length) {\n        pos += this._tasks.width[wholeCells] * (partCell % 1);\n      } else {\n        pos += 1;\n      }\n    }\n\n    var roundPos = Math.round(pos);\n    this._posFromDateCache[dateValue] = roundPos;\n    return Math.round(roundPos);\n  },\n  _getNextVisibleColumn: function _getNextVisibleColumn(startIndex, columns, ignores) {\n    // iterate columns to the right\n    var date = +columns[startIndex];\n    var visibleDateIndex = startIndex;\n\n    while (ignores[date]) {\n      visibleDateIndex++;\n      date = +columns[visibleDateIndex];\n    }\n\n    return visibleDateIndex;\n  },\n  _getPrevVisibleColumn: function _getPrevVisibleColumn(startIndex, columns, ignores) {\n    // iterate columns to the left\n    var date = +columns[startIndex];\n    var visibleDateIndex = startIndex;\n\n    while (ignores[date]) {\n      visibleDateIndex--;\n      date = +columns[visibleDateIndex];\n    }\n\n    return visibleDateIndex;\n  },\n  _getClosestVisibleColumn: function _getClosestVisibleColumn(startIndex, columns, ignores) {\n    var visibleDateIndex = this._getNextVisibleColumn(startIndex, columns, ignores);\n\n    if (!columns[visibleDateIndex]) {\n      visibleDateIndex = this._getPrevVisibleColumn(startIndex, columns, ignores);\n    }\n\n    return visibleDateIndex;\n  },\n  columnIndexByDate: function columnIndexByDate(date) {\n    var pos = new Date(date).valueOf();\n    var days = this._tasks.trace_x_ascending,\n        ignores = this._tasks.ignore_x;\n    var state = this.$gantt.getState();\n\n    if (pos <= state.min_date) {\n      if (this._tasks.rtl) {\n        return days.length;\n      } else {\n        return 0;\n      }\n    }\n\n    if (pos >= state.max_date) {\n      if (this._tasks.rtl) {\n        return 0;\n      } else {\n        return days.length;\n      }\n    }\n\n    var dateIndex = helpers.findBinary(days, pos);\n\n    var visibleIndex = this._getClosestVisibleColumn(dateIndex, days, ignores);\n\n    var visibleDate = days[visibleIndex];\n    var transition = this._tasks.trace_index_transition;\n\n    if (!visibleDate) {\n      if (transition) {\n        return transition[0];\n      } else {\n        return 0;\n      }\n    }\n\n    var part = (date - days[visibleIndex]) / this._getColumnDuration(this._tasks, days[visibleIndex]);\n\n    if (transition) {\n      return transition[visibleIndex] + (1 - part);\n    } else {\n      return visibleIndex + part;\n    }\n  },\n  getItemPosition: function getItemPosition(task, start_date, end_date) {\n    var xLeft, xRight, width;\n\n    if (this._tasks.rtl) {\n      xRight = this.posFromDate(start_date || task.start_date);\n      xLeft = this.posFromDate(end_date || task.end_date);\n    } else {\n      xLeft = this.posFromDate(start_date || task.start_date);\n      xRight = this.posFromDate(end_date || task.end_date);\n    }\n\n    width = Math.max(xRight - xLeft, 0);\n    var y = this.getItemTop(task.id);\n    var height = this.getBarHeight(task.id);\n    var rowHeight = this.getItemHeight(task.id);\n    return {\n      left: xLeft,\n      top: y,\n      height: height,\n      width: width,\n      rowHeight: rowHeight\n    };\n  },\n  getBarHeight: function getBarHeight(taskId, isMilestoneRender) {\n    var config = this.$getConfig();\n    var task = this.$config.rowStore.getItem(taskId); // height of the bar item\n\n    var height = task.task_height || task.bar_height || config.bar_height || config.task_height;\n    var rowHeight = this.getItemHeight(taskId);\n\n    if (height == \"full\") {\n      var offset = config.task_height_offset || 5;\n      height = rowHeight - offset;\n    } //item height cannot be bigger than row height\n\n\n    height = Math.min(height, rowHeight);\n\n    if (isMilestoneRender) {\n      // to get correct height for addapting Milestone to the row\n      height = Math.round(height / Math.sqrt(2));\n    }\n\n    return Math.max(height, 0);\n  },\n  getScale: function getScale() {\n    return this._tasks;\n  },\n  _getScales: function _get_scales() {\n    var config = this.$getConfig();\n    var helpers = this.$scaleHelper;\n    var scales = [helpers.primaryScale(config)].concat(helpers.getSubScales(config));\n    helpers.sortScales(scales);\n    return scales;\n  },\n  _getColumnDuration: function _get_coll_duration(scale, date) {\n    return this.$gantt.date.add(date, scale.step, scale.unit) - date;\n  },\n  _bindStore: function _bindStore() {\n    if (this.$config.bind) {\n      var rowStore = this.$gantt.getDatastore(this.$config.bind);\n      this.$config.rowStore = rowStore;\n\n      if (rowStore && !rowStore._timelineCacheAttached) {\n        var self = this;\n        rowStore._timelineCacheAttached = rowStore.attachEvent(\"onBeforeFilter\", function () {\n          self._resetTopPositionHeight();\n        });\n      }\n    }\n  },\n  _unbindStore: function _unbindStore() {\n    if (this.$config.bind) {\n      var rowStore = this.$gantt.getDatastore(this.$config.bind);\n\n      if (rowStore && rowStore._timelineCacheAttached) {\n        rowStore.detachEvent(rowStore._timelineCacheAttached);\n        rowStore._timelineCacheAttached = false;\n      }\n    }\n  },\n  refresh: function refresh() {\n    this._bindStore();\n\n    if (this.$config.bindLinks) {\n      this.$config.linkStore = this.$gantt.getDatastore(this.$config.bindLinks);\n    }\n\n    this._resetTopPositionHeight();\n\n    this._resetHeight();\n\n    this._initStaticBackgroundRender();\n\n    this._render_tasks_scales();\n  },\n  destructor: function destructor() {\n    var gantt = this.$gantt;\n\n    this._clearLayers(gantt);\n\n    this._unbindStore();\n\n    this.$task = null;\n    this.$task_scale = null;\n    this.$task_data = null;\n    this.$task_bg = null;\n    this.$task_links = null;\n    this.$task_bars = null;\n    this.$gantt = null;\n\n    if (this.$config.rowStore) {\n      this.$config.rowStore.detachEvent(this._staticBgHandler);\n      this.$config.rowStore = null;\n    }\n\n    if (this.$config.linkStore) {\n      this.$config.linkStore = null;\n    }\n\n    if (this._timelineDragScroll) {\n      this._timelineDragScroll.destructor();\n\n      this._timelineDragScroll = null;\n    }\n\n    this.callEvent(\"onDestroy\", []);\n    this.detachAllEvents();\n  }\n};\nmodule.exports = Timeline;","module.exports = function (item, view, config) {\n  return {\n    top: view.getItemTop(item.id),\n    height: view.getItemHeight(item.id),\n    left: 0,\n    right: Infinity\n  };\n};","function create(gantt) {\n  var events = [];\n  return {\n    delegate: function delegate(event, className, handler, root) {\n      events.push([event, className, handler, root]);\n      var helper = gantt.$services.getService(\"mouseEvents\");\n      helper.delegate(event, className, handler, root);\n    },\n    destructor: function destructor() {\n      var mouseEvents = gantt.$services.getService(\"mouseEvents\");\n\n      for (var i = 0; i < events.length; i++) {\n        var h = events[i];\n        mouseEvents.detach(h[0], h[1], h[2], h[3]);\n      }\n\n      events = [];\n    }\n  };\n}\n\nmodule.exports = create;","var domHelpers = require(\"../utils/dom_helpers\"),\n    utils = require(\"../../../utils/utils\"),\n    eventable = require(\"../../../utils/eventable\"),\n    gridResize = require(\"./grid_resize\"),\n    topPositionMixin = require(\"../row_position_mixin\"),\n    rowResize = require(\"./task_grid_row_resize\");\n\nvar ColumnDnd = require(\"../plugins/column_grid_dnd\")[\"default\"];\n\nvar Grid = function Grid(parent, config, factory, gantt) {\n  this.$config = utils.mixin({}, config || {});\n  this.$gantt = gantt;\n  this.$parent = parent;\n  eventable(this);\n  this.$state = {};\n  utils.mixin(this, topPositionMixin(this));\n};\n\nGrid.prototype = {\n  init: function init(container) {\n    var gantt = this.$gantt;\n\n    var gridAriaAttr = gantt._waiAria.gridAttrString();\n\n    var gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\n\n    var _ganttConfig = this.$getConfig();\n\n    var reorderColumns = _ganttConfig.reorder_grid_columns || false;\n\n    if (this.$config.reorder_grid_columns !== undefined) {\n      reorderColumns = this.$config.reorder_grid_columns;\n    }\n\n    container.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \" + gridAriaAttr + \"></div>\";\n    this.$grid = container.childNodes[0];\n    this.$grid.innerHTML = \"<div class='gantt_grid_scale' \" + gantt._waiAria.gridScaleRowAttrString() + \"></div><div class='gantt_grid_data' \" + gridDataAriaAttr + \"></div>\";\n    this.$grid_scale = this.$grid.childNodes[0];\n    this.$grid_data = this.$grid.childNodes[1];\n    var attr = _ganttConfig[this.$config.bind + \"_attribute\"];\n\n    if (!attr && this.$config.bind) {\n      attr = \"data-\" + this.$config.bind + \"-id\";\n    }\n\n    this.$config.item_attribute = attr || null;\n\n    if (!this.$config.layers) {\n      var layers = this._createLayerConfig();\n\n      this.$config.layers = layers;\n    }\n\n    var resizer = gridResize(gantt, this);\n    resizer.init();\n    this._renderHeaderResizers = resizer.doOnRender;\n    this._mouseDelegates = require(\"../mouse_event_container\")(gantt);\n    var resizerrow = rowResize(gantt, this);\n    resizerrow.init();\n\n    this._addLayers(this.$gantt);\n\n    this._initEvents();\n\n    if (reorderColumns) {\n      this._columnDND = new ColumnDnd(gantt, this);\n\n      this._columnDND.init();\n    }\n\n    this.callEvent(\"onReady\", []); //this.refresh();\n  },\n  _validateColumnWidth: function _validateColumnWidth(column, property) {\n    // user can set {name:\"text\", width:\"200\",...} for some reason,\n    // check and convert it to number when possible\n    var value = column[property];\n\n    if (value && value != \"*\") {\n      var gantt = this.$gantt;\n      var numericWidth = value * 1;\n\n      if (isNaN(numericWidth)) {\n        gantt.assert(false, \"Wrong \" + property + \" value of column \" + column.name);\n      } else {\n        column[property] = numericWidth;\n      }\n    }\n  },\n  setSize: function setSize(width, height) {\n    this.$config.width = this.$state.width = width;\n    this.$config.height = this.$state.height = height; // TODO: maybe inherit and override in a subclass instead of extending here\n\n    var columns = this.getGridColumns(),\n        innerWidth = 0;\n    var config = this.$getConfig();\n    var elasticColumns = config.grid_elastic_columns;\n\n    for (var i = 0, l = columns.length; i < l; i++) {\n      this._validateColumnWidth(columns[i], \"min_width\");\n\n      this._validateColumnWidth(columns[i], \"max_width\");\n\n      this._validateColumnWidth(columns[i], \"width\");\n\n      innerWidth += columns[i].width * 1;\n    }\n\n    var outerWidth;\n\n    if (isNaN(innerWidth) || !this.$config.scrollable) {\n      outerWidth = this._setColumnsWidth(width + 1);\n      innerWidth = outerWidth;\n    }\n\n    if (this.$config.scrollable && elasticColumns && !isNaN(innerWidth)) {\n      // GS-1352: Allow resizing the grid columns, then the grid width is increased\n      // or keep the grid width, but don't allow column resize to affect the grid width\n      var columnProperty = \"width\";\n\n      if (elasticColumns == \"min_width\") {\n        columnProperty = \"min_width\";\n      }\n\n      var newColumnWidth = 0;\n      columns.forEach(function (col) {\n        newColumnWidth += col[columnProperty] || config.min_grid_column_width;\n      });\n      newColumnWidth--; // the total column width shouldn't match the outerWidth\n\n      var columnsWidth = Math.max(newColumnWidth, width);\n      innerWidth = this._setColumnsWidth(columnsWidth);\n      outerWidth = width;\n    }\n\n    if (this.$config.scrollable) {\n      this.$grid_scale.style.width = innerWidth + \"px\";\n      this.$grid_data.style.width = innerWidth + \"px\";\n    } else {\n      this.$grid_scale.style.width = \"inherit\";\n      this.$grid_data.style.width = \"inherit\";\n    }\n\n    this.$config.width -= 1;\n    var config = this.$getConfig();\n\n    if (outerWidth !== width) {\n      if (outerWidth !== undefined) {\n        config.grid_width = outerWidth;\n        this.$config.width = outerWidth - 1;\n      } else {\n        if (!isNaN(innerWidth)) {\n          this._setColumnsWidth(innerWidth);\n\n          config.grid_width = innerWidth;\n          this.$config.width = innerWidth - 1;\n        }\n      }\n    }\n\n    var dataHeight = Math.max(this.$state.height - config.scale_height, 0);\n    this.$grid_data.style.height = dataHeight + \"px\";\n    this.refresh();\n  },\n  getSize: function getSize() {\n    var config = this.$getConfig();\n    var store = this.$config.rowStore;\n\n    var contentHeight = store ? this.getTotalHeight() : 0,\n        contentWidth = this._getGridWidth();\n\n    var size = {\n      x: this.$state.width,\n      y: this.$state.height,\n      contentX: this.isVisible() ? contentWidth : 0,\n      contentY: this.isVisible() ? config.scale_height + contentHeight : 0,\n      scrollHeight: this.isVisible() ? contentHeight : 0,\n      scrollWidth: this.isVisible() ? contentWidth : 0\n    };\n    return size;\n  },\n  _bindStore: function _bindStore() {\n    if (this.$config.bind) {\n      var rowStore = this.$gantt.getDatastore(this.$config.bind);\n      this.$config.rowStore = rowStore;\n\n      if (rowStore && !rowStore._gridCacheAttached) {\n        var self = this;\n        rowStore._gridCacheAttached = rowStore.attachEvent(\"onBeforeFilter\", function () {\n          self._resetTopPositionHeight();\n        });\n      }\n    }\n  },\n  _unbindStore: function _unbindStore() {\n    if (this.$config.bind) {\n      var rowStore = this.$gantt.getDatastore(this.$config.bind);\n\n      if (rowStore && rowStore._gridCacheAttached) {\n        rowStore.detachEvent(rowStore._gridCacheAttached);\n        rowStore._gridCacheAttached = false;\n      }\n    }\n  },\n  refresh: function refresh() {\n    this._bindStore();\n\n    this._resetTopPositionHeight();\n\n    this._resetHeight();\n\n    this._initSmartRenderingPlaceholder();\n\n    this._calculateGridWidth();\n\n    this._renderGridHeader();\n  },\n  getViewPort: function getViewPort() {\n    var scrollLeft = this.$config.scrollLeft || 0;\n    var scrollTop = this.$config.scrollTop || 0;\n    var height = this.$config.height || 0;\n    var width = this.$config.width || 0;\n    return {\n      y: scrollTop,\n      y_end: scrollTop + height,\n      x: scrollLeft,\n      x_end: scrollLeft + width,\n      height: height,\n      width: width\n    };\n  },\n  scrollTo: function scrollTo(left, top) {\n    if (!this.isVisible()) return;\n    var scrolled = false;\n    this.$config.scrollTop = this.$config.scrollTop || 0;\n    this.$config.scrollLeft = this.$config.scrollLeft || 0;\n\n    if (left * 1 == left) {\n      this.$config.scrollLeft = this.$state.scrollLeft = this.$grid.scrollLeft = left;\n      scrolled = true;\n    } // var config = this.$getConfig();\n\n\n    if (top * 1 == top) {\n      this.$config.scrollTop = this.$state.scrollTop = this.$grid_data.scrollTop = top;\n      scrolled = true;\n    }\n\n    if (scrolled) {\n      this.callEvent(\"onScroll\", [this.$config.scrollLeft, this.$config.scrollTop]);\n    }\n  },\n  getColumnIndex: function getColumnIndex(name, excludeHidden) {\n    var columns = this.$getConfig().columns;\n    var hiddenIndexShift = 0;\n\n    for (var i = 0; i < columns.length; i++) {\n      // GS-1257. If the cell is hidden, the target column index should be correct\n      if (excludeHidden && columns[i].hide) {\n        hiddenIndexShift++;\n      }\n\n      if (columns[i].name == name) {\n        return i - hiddenIndexShift;\n      }\n    }\n\n    return null;\n  },\n  getColumn: function getColumn(name) {\n    var index = this.getColumnIndex(name);\n\n    if (index === null) {\n      return null;\n    }\n\n    return this.$getConfig().columns[index];\n  },\n  getGridColumns: function getGridColumns() {\n    var config = this.$getConfig();\n    return config.columns.slice();\n  },\n  isVisible: function isVisible() {\n    if (this.$parent && this.$parent.$config) {\n      return !this.$parent.$config.hidden;\n    } else {\n      return this.$grid.offsetWidth;\n    }\n  },\n  // getItemHeight: function () {\n  // \tvar config = this.$getConfig();\n  // \treturn config.row_height;\n  // },\n  _createLayerConfig: function _createLayerConfig() {\n    var gantt = this.$gantt;\n    var self = this;\n    var layers = [{\n      renderer: gantt.$ui.layers.gridLine(),\n      container: this.$grid_data,\n      filter: [function () {\n        return self.isVisible();\n      }]\n    }, {\n      renderer: gantt.$ui.layers.gridTaskRowResizer(),\n      container: this.$grid_data,\n      append: true,\n      filter: [function () {\n        return gantt.config.resize_rows;\n      }]\n    }];\n    return layers;\n  },\n  _addLayers: function _addLayers(gantt) {\n    if (!this.$config.bind) return;\n    this._taskLayers = [];\n    var self = this;\n    var layers = this.$gantt.$services.getService(\"layers\");\n    var taskRenderer = layers.getDataRender(this.$config.bind);\n\n    if (!taskRenderer) {\n      taskRenderer = layers.createDataRender({\n        name: this.$config.bind,\n        defaultContainer: function defaultContainer() {\n          return self.$grid_data;\n        }\n      });\n    }\n\n    var taskLayers = this.$config.layers;\n\n    for (var i = 0; taskLayers && i < taskLayers.length; i++) {\n      var layer = taskLayers[i];\n      layer.view = this;\n      var bar_layer = taskRenderer.addLayer(layer);\n\n      this._taskLayers.push(bar_layer);\n    }\n\n    this._bindStore();\n\n    this._initSmartRenderingPlaceholder();\n  },\n  _refreshPlaceholderOnStoreUpdate: function _refreshPlaceholderOnStoreUpdate(id) {\n    var config = this.$getConfig(),\n        store = this.$config.rowStore;\n\n    if (!store || id !== null || !this.isVisible() || !config.smart_rendering) {\n      return;\n    }\n\n    var contentHeight;\n\n    if (this.$config.scrollY) {\n      var scroll = this.$gantt.$ui.getView(this.$config.scrollY);\n      if (scroll) contentHeight = scroll.getScrollState().scrollSize;\n    }\n\n    if (!contentHeight) {\n      contentHeight = store ? this.getTotalHeight() : 0;\n    }\n\n    if (contentHeight) {\n      if (this.$rowsPlaceholder && this.$rowsPlaceholder.parentNode) {\n        this.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);\n      }\n\n      var placeholder = this.$rowsPlaceholder = document.createElement(\"div\");\n      placeholder.style.visibility = \"hidden\";\n      placeholder.style.height = contentHeight + \"px\";\n      placeholder.style.width = \"1px\";\n      this.$grid_data.appendChild(placeholder);\n    }\n  },\n  _initSmartRenderingPlaceholder: function _initSmartRenderingPlaceholder() {\n    var store = this.$config.rowStore;\n\n    if (!store) {\n      return;\n    } else {\n      this._initSmartRenderingPlaceholder = function () {};\n    }\n\n    this._staticBgHandler = store.attachEvent(\"onStoreUpdated\", utils.bind(this._refreshPlaceholderOnStoreUpdate, this));\n  },\n  _initEvents: function _initEvents() {\n    var gantt = this.$gantt;\n\n    this._mouseDelegates.delegate(\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\n      var store = this.$config.rowStore;\n      if (!store) return true;\n      var target = domHelpers.locateAttribute(e, this.$config.item_attribute);\n\n      if (target) {\n        store.close(target.getAttribute(this.$config.item_attribute));\n      }\n\n      return false;\n    }, this), this.$grid);\n\n    this._mouseDelegates.delegate(\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\n      var store = this.$config.rowStore;\n      if (!store) return true;\n      var target = domHelpers.locateAttribute(e, this.$config.item_attribute);\n\n      if (target) {\n        store.open(target.getAttribute(this.$config.item_attribute));\n      }\n\n      return false;\n    }, this), this.$grid);\n  },\n  _clearLayers: function _clearLayers(gantt) {\n    var layers = this.$gantt.$services.getService(\"layers\");\n    var taskRenderer = layers.getDataRender(this.$config.bind);\n\n    if (this._taskLayers) {\n      for (var i = 0; i < this._taskLayers.length; i++) {\n        taskRenderer.removeLayer(this._taskLayers[i]);\n      }\n    }\n\n    this._taskLayers = [];\n  },\n  _getColumnWidth: function _getColumnWidth(column, config, width) {\n    var min_width = column.min_width || config.min_grid_column_width;\n    var new_width = Math.max(width, min_width || 10);\n    if (column.max_width) new_width = Math.min(new_width, column.max_width);\n    return new_width;\n  },\n  // set min width only if width < than config.min_grid_column_width\n  _checkGridColumnMinWidthLimits: function _checkGridColumnMinWidthLimits(columns, config) {\n    for (var i = 0, l = columns.length; i < l; i++) {\n      var width = columns[i].width * 1;\n\n      if (!columns[i].min_width && width < config.min_grid_column_width) {\n        columns[i].min_width = width;\n      }\n    }\n  },\n  // return min and max possible grid width according to restricts\n  _getGridWidthLimits: function _getGridWidthLimits() {\n    var config = this.$getConfig(),\n        columns = this.getGridColumns(),\n        min_limit = 0,\n        max_limit = 0;\n\n    for (var i = 0; i < columns.length; i++) {\n      min_limit += columns[i].min_width ? columns[i].min_width : config.min_grid_column_width;\n\n      if (max_limit !== undefined) {\n        max_limit = columns[i].max_width ? max_limit + columns[i].max_width : undefined;\n      }\n    }\n\n    this._checkGridColumnMinWidthLimits(columns, config); // FIX ME: should it be before calculating limits?\n\n\n    return [min_limit, max_limit];\n  },\n  // resize columns to get total newWidth, starting from columns[start_index]\n  _setColumnsWidth: function _setColumnsWidth(newWidth, start_index) {\n    var config = this.$getConfig();\n    var columns = this.getGridColumns(),\n        columns_width = 0,\n        final_width = newWidth;\n    start_index = !window.isNaN(start_index) ? start_index : -1;\n\n    for (var i = 0, l = columns.length; i < l; i++) {\n      columns_width += columns[i].width * 1;\n    }\n\n    if (window.isNaN(columns_width)) {\n      this._calculateGridWidth();\n\n      columns_width = 0;\n\n      for (var i = 0, l = columns.length; i < l; i++) {\n        columns_width += columns[i].width * 1;\n      }\n    }\n\n    var extra_width = final_width - columns_width;\n    var start_width = 0;\n\n    for (var i = 0; i < start_index + 1; i++) {\n      start_width += columns[i].width;\n    }\n\n    columns_width -= start_width;\n\n    for (var i = start_index + 1; i < columns.length; i++) {\n      var col = columns[i];\n      var share = Math.round(extra_width * (col.width / columns_width)); // columns have 2 additional restrict fields - min_width & max_width that are set by user\n\n      if (extra_width < 0) {\n        if (col.min_width && col.width + share < col.min_width) share = col.min_width - col.width;else if (!col.min_width && config.min_grid_column_width && col.width + share < config.min_grid_column_width) share = config.min_grid_column_width - col.width;\n      } else if (col.max_width && col.width + share > col.max_width) share = col.max_width - col.width;\n\n      columns_width -= col.width;\n      col.width += share;\n      extra_width -= share;\n    }\n\n    var iterator = extra_width > 0 ? 1 : -1;\n\n    while (extra_width > 0 && iterator === 1 || extra_width < 0 && iterator === -1) {\n      var curExtra = extra_width;\n\n      for (i = start_index + 1; i < columns.length; i++) {\n        var new_width = columns[i].width + iterator;\n\n        if (new_width == this._getColumnWidth(columns[i], config, new_width)) {\n          extra_width -= iterator;\n          columns[i].width = new_width;\n        }\n\n        if (!extra_width) break;\n      }\n\n      if (curExtra == extra_width) break;\n    } // if impossible to resize the right-side columns, resize the start column\n\n\n    if (extra_width && start_index > -1) {\n      var new_width = columns[start_index].width + extra_width;\n      if (new_width == this._getColumnWidth(columns[start_index], config, new_width)) columns[start_index].width = new_width;\n    } //if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\n    //\treturn;\n\n\n    return this._getColsTotalWidth();\n  },\n  _getColsTotalWidth: function _getColsTotalWidth() {\n    var columns = this.getGridColumns();\n    var cols_width = 0;\n\n    for (var i = 0; i < columns.length; i++) {\n      var v = parseFloat(columns[i].width);\n\n      if (window.isNaN(v)) {\n        return false;\n      }\n\n      cols_width += v;\n    }\n\n    return cols_width;\n  },\n  _calculateGridWidth: function _calculateGridWidth() {\n    var config = this.$getConfig();\n    var columns = this.getGridColumns();\n    var cols_width = 0;\n    var unknown = [];\n    var width = [];\n\n    for (var i = 0; i < columns.length; i++) {\n      var v = parseFloat(columns[i].width);\n\n      if (window.isNaN(v)) {\n        v = config.min_grid_column_width || 10;\n        unknown.push(i);\n      }\n\n      width[i] = v;\n      cols_width += v;\n    }\n\n    var gridWidth = this._getGridWidth() + 1;\n\n    if (config.autofit || unknown.length) {\n      var diff = gridWidth - cols_width; // TODO: logic may be improved for proportional changing of width\n      // autofit adjusts columns widths to the outer grid width\n      // it doesn't makes sense if grid has inner scroll with elastic columns\n\n      if (config.autofit && !config.grid_elastic_columns) {\n        // delta must be added for all columns\n        for (var i = 0; i < width.length; i++) {\n          var delta = Math.round(diff / (width.length - i));\n          width[i] += delta;\n\n          var new_width = this._getColumnWidth(columns[i], config, width[i]);\n\n          if (new_width != width[i]) {\n            delta = new_width - width[i];\n            width[i] = new_width;\n          }\n\n          diff -= delta;\n        }\n      } else if (unknown.length) {\n        // there are several columns with undefined width\n        for (var i = 0; i < unknown.length; i++) {\n          var delta = Math.round(diff / (unknown.length - i)); // no float values, just integer\n\n          var index = unknown[i];\n          width[index] += delta;\n\n          var new_width = this._getColumnWidth(columns[index], config, width[index]);\n\n          if (new_width != width[index]) {\n            delta = new_width - width[index];\n            width[index] = new_width;\n          }\n\n          diff -= delta;\n        }\n      }\n\n      for (var i = 0; i < width.length; i++) {\n        columns[i].width = width[i];\n      }\n    } else {\n      var changed = gridWidth != cols_width;\n      this.$config.width = cols_width - 1;\n      config.grid_width = cols_width;\n\n      if (changed) {\n        this.$parent._setContentSize(this.$config.width, null);\n      }\n    }\n  },\n  _renderGridHeader: function _renderGridHeader() {\n    var gantt = this.$gantt;\n    var config = this.$getConfig();\n    var locale = this.$gantt.locale;\n    var templates = this.$gantt.templates;\n    var columns = this.getGridColumns();\n\n    if (config.rtl) {\n      columns = columns.reverse();\n    }\n\n    var cells = [];\n    var width = 0,\n        labels = locale.labels;\n    var lineHeigth = config.scale_height - 1;\n\n    for (var i = 0; i < columns.length; i++) {\n      var last = i == columns.length - 1;\n      var col = columns[i]; // ensure columns have non-empty names\n\n      if (!col.name) {\n        col.name = gantt.uid() + \"\";\n      }\n\n      var colWidth = col.width * 1;\n\n      var gridWidth = this._getGridWidth();\n\n      if (last && gridWidth > width + colWidth) col.width = colWidth = gridWidth - width;\n      width += colWidth;\n      var sort = gantt._sort && col.name == gantt._sort.name ? \"<div class='gantt_sort gantt_\" + gantt._sort.direction + \"'></div>\" : \"\";\n      var cssClass = [\"gantt_grid_head_cell\", \"gantt_grid_head_\" + col.name, last ? \"gantt_last_cell\" : \"\", templates.grid_header_class(col.name, col)].join(\" \");\n      var style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\n      var label = col.label || labels[\"column_\" + col.name] || labels[col.name];\n      label = label || \"\";\n\n      var ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\n\n      var cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \" data-column-id='\" + col.name + \"' column_id='\" + col.name + \"'\" + \" data-column-name='\" + col.name + \"' data-column-index='\" + i + \"'\" + \">\" + label + sort + \"</div>\";\n      cells.push(cell);\n    }\n\n    this.$grid_scale.style.height = config.scale_height + \"px\";\n    this.$grid_scale.style.lineHeight = lineHeigth + \"px\"; //this.$grid_scale.style.width = \"inherit\";\n\n    this.$grid_scale.innerHTML = cells.join(\"\");\n\n    if (this._renderHeaderResizers) {\n      this._renderHeaderResizers();\n    }\n  },\n  _getGridWidth: function _getGridWidth() {\n    // TODO: refactor/remove/comment some of _getGridWidth/this.$config.width/this.$state.width, it's not clear what they do\n    return this.$config.width;\n  },\n  destructor: function destructor() {\n    this._clearLayers(this.$gantt);\n\n    if (this._mouseDelegates) {\n      this._mouseDelegates.destructor();\n\n      this._mouseDelegates = null;\n    }\n\n    this._unbindStore();\n\n    this.$grid = null;\n    this.$grid_scale = null;\n    this.$grid_data = null;\n    this.$gantt = null;\n\n    if (this.$config.rowStore) {\n      this.$config.rowStore.detachEvent(this._staticBgHandler);\n      this.$config.rowStore = null;\n    }\n\n    this.callEvent(\"onDestroy\", []);\n    this.detachAllEvents();\n  }\n};\nmodule.exports = Grid;","var utils = require(\"../../../utils/utils\");\n\nfunction ScaleHelper(gantt) {\n  var dateHelper = gantt.date;\n  var services = gantt.$services;\n  return {\n    getSum: function getSum(sizes, from, to) {\n      if (to === undefined) to = sizes.length - 1;\n      if (from === undefined) from = 0;\n      var summ = 0;\n\n      for (var i = from; i <= to; i++) {\n        summ += sizes[i];\n      }\n\n      return summ;\n    },\n    setSumWidth: function setSumWidth(sum_width, scale, from, to) {\n      var parts = scale.width;\n      if (to === undefined) to = parts.length - 1;\n      if (from === undefined) from = 0;\n      var length = to - from + 1;\n      if (from > parts.length - 1 || length <= 0 || to > parts.length - 1) return;\n      var oldWidth = this.getSum(parts, from, to);\n      var diff = sum_width - oldWidth;\n      this.adjustSize(diff, parts, from, to);\n      this.adjustSize(-diff, parts, to + 1);\n      scale.full_width = this.getSum(parts);\n    },\n    splitSize: function splitSize(width, count) {\n      var arr = [];\n\n      for (var i = 0; i < count; i++) {\n        arr[i] = 0;\n      }\n\n      this.adjustSize(width, arr);\n      return arr;\n    },\n    adjustSize: function adjustSize(width, parts, from, to) {\n      if (!from) from = 0;\n      if (to === undefined) to = parts.length - 1;\n      var length = to - from + 1;\n      var full = this.getSum(parts, from, to);\n\n      for (var i = from; i <= to; i++) {\n        var share = Math.floor(width * (full ? parts[i] / full : 1 / length));\n        full -= parts[i];\n        width -= share;\n        length--;\n        parts[i] += share;\n      }\n\n      parts[parts.length - 1] += width;\n    },\n    sortScales: function sortScales(scales) {\n      function cellSize(unit, step) {\n        var d = new Date(1970, 0, 1);\n        return dateHelper.add(d, step, unit) - d;\n      }\n\n      scales.sort(function (a, b) {\n        if (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\n          return 1;\n        } else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\n          return -1;\n        } else {\n          return 0;\n        }\n      });\n\n      for (var i = 0; i < scales.length; i++) {\n        scales[i].index = i;\n      }\n    },\n    _isLegacyMode: function _isLegacyMode(config) {\n      var scaleConfig = config || gantt.config;\n      return scaleConfig.scale_unit || scaleConfig.date_scale || scaleConfig.subscales;\n    },\n    _prepareScaleObject: function _prepareScaleObject(scale) {\n      var format = scale.format;\n\n      if (!format) {\n        format = scale.template || scale.date || \"%d %M\";\n      }\n\n      if (typeof format === \"string\") {\n        format = gantt.date.date_to_str(format);\n      }\n\n      return {\n        unit: scale.unit || \"day\",\n        step: scale.step || 1,\n        format: format,\n        css: scale.css\n      };\n    },\n    primaryScale: function primaryScale(config) {\n      var templates = services.getService(\"templateLoader\");\n\n      var legacyMode = this._isLegacyMode(config);\n\n      var scaleConfig = config || gantt.config;\n      var result;\n\n      if (legacyMode) {\n        templates.initTemplate(\"date_scale\", undefined, undefined, scaleConfig, gantt.config.templates);\n        result = {\n          unit: gantt.config.scale_unit,\n          step: gantt.config.step,\n          template: gantt.templates.date_scale,\n          date: gantt.config.date_scale,\n          css: gantt.templates.scale_cell_class\n        };\n      } else {\n        var primaryScale = scaleConfig.scales[0];\n        result = {\n          unit: primaryScale.unit,\n          step: primaryScale.step,\n          template: primaryScale.template,\n          format: primaryScale.format,\n          date: primaryScale.date,\n          css: primaryScale.css || gantt.templates.scale_cell_class\n        };\n      }\n\n      return this._prepareScaleObject(result);\n    },\n    getSubScales: function getSubScales(config) {\n      var legacyMode = this._isLegacyMode(config);\n\n      var scaleConfig = config || gantt.config;\n      var scales;\n\n      if (legacyMode) {\n        scales = scaleConfig.subscales || [];\n      } else {\n        scales = scaleConfig.scales.slice(1);\n      }\n\n      return scales.map(function (scale) {\n        return this._prepareScaleObject(scale);\n      }.bind(this));\n    },\n    prepareConfigs: function prepareConfigs(scales, min_coll_width, container_width, scale_height, minDate, maxDate, rtl) {\n      var heights = this.splitSize(scale_height, scales.length);\n      var full_width = container_width;\n      var configs = [];\n\n      for (var i = scales.length - 1; i >= 0; i--) {\n        var main_scale = i == scales.length - 1;\n        var cfg = this.initScaleConfig(scales[i], minDate, maxDate);\n\n        if (main_scale) {\n          this.processIgnores(cfg);\n        }\n\n        this.initColSizes(cfg, min_coll_width, full_width, heights[i]);\n        this.limitVisibleRange(cfg);\n\n        if (main_scale) {\n          full_width = cfg.full_width;\n        }\n\n        configs.unshift(cfg);\n      }\n\n      for (var i = 0; i < configs.length - 1; i++) {\n        this.alineScaleColumns(configs[configs.length - 1], configs[i]);\n      }\n\n      for (var i = 0; i < configs.length; i++) {\n        if (rtl) {\n          this.reverseScale(configs[i]);\n        }\n\n        this.setPosSettings(configs[i]);\n      }\n\n      return configs;\n    },\n    reverseScale: function reverseScale(scale) {\n      scale.width = scale.width.reverse();\n      scale.trace_x = scale.trace_x.reverse();\n      var indexes = scale.trace_indexes;\n      scale.trace_indexes = {};\n      scale.trace_index_transition = {};\n      scale.rtl = true;\n\n      for (var i = 0; i < scale.trace_x.length; i++) {\n        scale.trace_indexes[scale.trace_x[i].valueOf()] = i;\n        scale.trace_index_transition[indexes[scale.trace_x[i].valueOf()]] = i;\n      }\n\n      return scale;\n    },\n    setPosSettings: function setPosSettings(config) {\n      for (var i = 0, len = config.trace_x.length; i < len; i++) {\n        config.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\n      }\n    },\n    _ignore_time_config: function _ignore_time_config(date, scale) {\n      if (gantt.config.skip_off_time) {\n        var skip = true;\n        var probe = date; // check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\n\n        for (var i = 0; i < scale.step; i++) {\n          if (i) {\n            probe = dateHelper.add(date, i, scale.unit);\n          }\n\n          skip = skip && !this.isWorkTime(probe, scale.unit);\n        }\n\n        return skip;\n      }\n\n      return false;\n    },\n    //defined in an extension\n    processIgnores: function processIgnores(config) {\n      config.ignore_x = {};\n      config.display_count = config.count;\n    },\n    initColSizes: function initColSizes(config, min_col_width, full_width, line_height) {\n      var cont_width = full_width;\n      config.height = line_height;\n      var column_count = config.display_count === undefined ? config.count : config.display_count;\n      if (!column_count) column_count = 1;\n      config.col_width = Math.floor(cont_width / column_count);\n\n      if (min_col_width) {\n        if (config.col_width < min_col_width) {\n          config.col_width = min_col_width;\n          cont_width = config.col_width * column_count;\n        }\n      }\n\n      config.width = [];\n      var ignores = config.ignore_x || {};\n\n      for (var i = 0; i < config.trace_x.length; i++) {\n        if (ignores[config.trace_x[i].valueOf()] || config.display_count == config.count) {\n          config.width[i] = 0;\n        } else {\n          // width of month columns should be proportional month duration\n          var width = 1;\n\n          if (config.unit == \"month\") {\n            var days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\n            width = days;\n          }\n\n          config.width[i] = width;\n        }\n      }\n\n      this.adjustSize(cont_width - this.getSum(config.width)\n      /* 1 width per column from the code above */\n      , config.width);\n      config.full_width = this.getSum(config.width);\n    },\n    initScaleConfig: function initScaleConfig(config, min_date, max_date) {\n      var cfg = utils.mixin({\n        count: 0,\n        col_width: 0,\n        full_width: 0,\n        height: 0,\n        width: [],\n        left: [],\n        trace_x: [],\n        trace_indexes: {},\n        min_date: new Date(min_date),\n        max_date: new Date(max_date)\n      }, config);\n      this.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\n        cfg.count++;\n        cfg.trace_x.push(new Date(date));\n        cfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\n      });\n      cfg.trace_x_ascending = cfg.trace_x.slice();\n      return cfg;\n    },\n    iterateScales: function iterateScales(lower_scale, upper_scale, from, to, callback) {\n      var upper_dates = upper_scale.trace_x;\n      var lower_dates = lower_scale.trace_x;\n      var prev = from || 0;\n      var end = to || lower_dates.length - 1;\n      var prevUpper = 0;\n\n      for (var up = 1; up < upper_dates.length; up++) {\n        var target_index = lower_scale.trace_indexes[+upper_dates[up]];\n\n        if (target_index !== undefined && target_index <= end) {\n          if (callback) {\n            callback.apply(this, [prevUpper, up, prev, target_index]);\n          }\n\n          prev = target_index;\n          prevUpper = up;\n          continue;\n        }\n      }\n    },\n    alineScaleColumns: function alineScaleColumns(lower_scale, upper_scale, from, to) {\n      this.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\n        var targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\n        var actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\n\n        if (actualWidth != targetWidth) {\n          this.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\n        }\n      });\n    },\n    eachColumn: function eachColumn(unit, step, min_date, max_date, callback) {\n      var start = new Date(min_date),\n          end = new Date(max_date);\n\n      if (dateHelper[unit + \"_start\"]) {\n        start = dateHelper[unit + \"_start\"](start);\n      }\n\n      var curr = new Date(start);\n\n      if (+curr >= +end) {\n        end = dateHelper.add(curr, step, unit);\n      }\n\n      while (+curr < +end) {\n        callback.call(this, new Date(curr));\n        var tzOffset = curr.getTimezoneOffset();\n        curr = dateHelper.add(curr, step, unit);\n        curr = gantt._correct_dst_change(curr, tzOffset, step, unit);\n        if (dateHelper[unit + '_start']) curr = dateHelper[unit + \"_start\"](curr);\n      }\n    },\n    limitVisibleRange: function limitVisibleRange(cfg) {\n      var dates = cfg.trace_x;\n      var left = 0,\n          right = cfg.width.length - 1;\n      var diff = 0;\n\n      if (+dates[0] < +cfg.min_date && left != right) {\n        var width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\n        diff += cfg.width[0] - width;\n        cfg.width[0] = width;\n        dates[0] = new Date(cfg.min_date);\n      }\n\n      var last = dates.length - 1;\n      var lastDate = dates[last];\n      var outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\n\n      if (+outDate > +cfg.max_date && last > 0) {\n        var width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\n        diff += cfg.width[last] - width;\n        cfg.width[last] = width;\n      }\n\n      if (diff) {\n        var full = this.getSum(cfg.width);\n        var shared = 0;\n\n        for (var i = 0; i < cfg.width.length; i++) {\n          var share = Math.floor(diff * (cfg.width[i] / full));\n          cfg.width[i] += share;\n          shared += share;\n        }\n\n        this.adjustSize(diff - shared, cfg.width);\n      }\n    }\n  };\n}\n\nmodule.exports = ScaleHelper;","var helpers = require(\"../../../utils/helpers\");\n\nvar htmlHelpers = {\n  getHtmlSelect: function getHtmlSelect(options, attributes, value) {\n    var innerHTML = \"\";\n\n    var _this = this;\n\n    options = options || [];\n    helpers.forEach(options, function (entry) {\n      var _attributes = [{\n        key: \"value\",\n        value: entry.key\n      }];\n\n      if (value == entry.key) {\n        _attributes[_attributes.length] = {\n          key: \"selected\",\n          value: \"selected\"\n        };\n      }\n\n      if (entry.attributes) {\n        _attributes = _attributes.concat(entry.attributes);\n      }\n\n      innerHTML += _this.getHtmlOption({\n        innerHTML: entry.label\n      }, _attributes);\n    });\n    return _getHtmlContainer(\"select\", {\n      innerHTML: innerHTML\n    }, attributes);\n  },\n  getHtmlOption: function getHtmlOption(options, attributes) {\n    return _getHtmlContainer(\"option\", options, attributes);\n  },\n  getHtmlButton: function getHtmlButton(options, attributes) {\n    return _getHtmlContainer(\"button\", options, attributes);\n  },\n  getHtmlDiv: function getHtmlDiv(options, attributes) {\n    return _getHtmlContainer(\"div\", options, attributes);\n  },\n  getHtmlLabel: function getHtmlLabel(options, attributes) {\n    return _getHtmlContainer(\"label\", options, attributes);\n  },\n  getHtmlInput: function getHtmlInput(attributes) {\n    return \"<input\" + _getHtmlAttributes(attributes || []) + \">\";\n  }\n};\n\nfunction _getHtmlContainer(tag, options, attributes) {\n  var html;\n  options = options || [];\n  html = \"<\" + tag + _getHtmlAttributes(attributes || []) + \">\" + (options.innerHTML || \"\") + \"</\" + tag + \">\";\n  return html;\n}\n\nfunction _getHtmlAttributes(attributes) {\n  var html = \"\";\n  helpers.forEach(attributes, function (entry) {\n    html += \" \" + entry.key + \"='\" + entry.value + \"'\";\n  });\n  return html;\n}\n\nmodule.exports = htmlHelpers;","var helpers = require(\"../utils/helpers\");\n\nmodule.exports = function createResourceTimelineBuilder(gantt) {\n  var resourceTaskCache = {};\n  gantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function () {\n    resourceTaskCache = {};\n  });\n\n  function getResourceLoad(resource, resourceProperty, scale, timeline) {\n    var cacheKey = resource.id + \"_\" + resourceProperty + \"_\" + scale.unit + \"_\" + scale.step;\n    var res;\n\n    if (!resourceTaskCache[cacheKey]) {\n      res = resourceTaskCache[cacheKey] = calculateResourceLoad(resource, resourceProperty, scale, timeline);\n    } else {\n      res = resourceTaskCache[cacheKey];\n    }\n\n    return res;\n  }\n\n  function calculateResourceLoadFromAssignments(items, scale, assignmentsPassed) {\n    var scaleUnit = scale.unit;\n    var scaleStep = scale.step;\n    var timegrid = {};\n    var precalculatedTimes = {};\n\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      var task = item;\n\n      if (assignmentsPassed) {\n        task = gantt.getTask(item.task_id);\n      }\n\n      var minDate = item.start_date || task.start_date;\n      var maxDate = item.end_date || task.end_date;\n\n      if (assignmentsPassed) {\n        if (item.start_date) {\n          minDate = new Date(Math.max(item.start_date.valueOf(), task.start_date.valueOf()));\n        }\n\n        if (item.end_date) {\n          maxDate = new Date(Math.min(item.end_date.valueOf(), task.end_date.valueOf()));\n        }\n      }\n\n      var firstColumn = helpers.findBinary(scale.trace_x, minDate.valueOf());\n      var currDate = new Date(scale.trace_x[firstColumn] || gantt.date[scaleUnit + \"_start\"](new Date(minDate)));\n      var calendar = gantt.config.work_time ? gantt.getTaskCalendar(task) : gantt;\n      precalculatedTimes[calendar.id] = {};\n\n      while (currDate < maxDate) {\n        var cachedTimes = precalculatedTimes[calendar.id];\n        var date = currDate;\n        var timestamp = date.valueOf();\n        currDate = gantt.date.add(currDate, scaleStep, scaleUnit);\n\n        if (cachedTimes[timestamp] === false) {\n          continue;\n        }\n\n        var isWorkTime = calendar.isWorkTime({\n          date: date,\n          task: task,\n          unit: scaleUnit\n        });\n\n        if (!isWorkTime) {\n          cachedTimes[timestamp] = false;\n          continue;\n        }\n\n        if (!timegrid[timestamp]) {\n          timegrid[timestamp] = {\n            tasks: [],\n            assignments: []\n          };\n        }\n\n        timegrid[timestamp].tasks.push(task);\n\n        if (assignmentsPassed) {\n          timegrid[timestamp].assignments.push(item);\n        }\n      }\n    }\n\n    return timegrid;\n  }\n\n  function calculateResourceLoad(resource, resourceProperty, scale, timeline) {\n    var items;\n    var assignmentsPassed = false;\n    var timegrid = {};\n\n    if (gantt.config.process_resource_assignments && resourceProperty === gantt.config.resource_property) {\n      if (resource.$role == \"task\") {\n        items = gantt.getResourceAssignments(resource.$resource_id, resource.$task_id);\n      } else {\n        items = gantt.getResourceAssignments(resource.id);\n      }\n\n      assignmentsPassed = true;\n    } else if (resource.$role == \"task\") {\n      items = [];\n    } else {\n      items = gantt.getTaskBy(resourceProperty, resource.id);\n    }\n\n    var timegrid = calculateResourceLoadFromAssignments(items, scale, assignmentsPassed);\n    var scaleUnit = scale.unit;\n    var scaleStep = scale.step;\n    var timetable = [];\n    var start, end, tasks, assignments, cell;\n    var config = timeline.$getConfig();\n\n    for (var i = 0; i < scale.trace_x.length; i++) {\n      start = new Date(scale.trace_x[i]);\n      end = gantt.date.add(start, scaleStep, scaleUnit);\n      cell = timegrid[start.valueOf()] || {};\n      tasks = cell.tasks || [];\n      assignments = cell.assignments || [];\n\n      if (tasks.length || config.resource_render_empty_cells) {\n        timetable.push({\n          start_date: start,\n          end_date: end,\n          tasks: tasks,\n          assignments: assignments\n        });\n      } else {\n        timetable.push(null);\n      }\n    }\n\n    return timetable;\n  }\n\n  return getResourceLoad;\n};","var __extends = require(\"../../../utils/extends\"),\n    domHelpers = require(\"../utils/dom_helpers\"),\n    Cell = require(\"./cell\");\n\nvar Layout = function (_super) {\n  \"use strict\";\n\n  __extends(Layout, _super);\n\n  function Layout(parent, config, factory) {\n    var _this = _super.apply(this, arguments) || this;\n\n    if (parent) _this.$root = true;\n\n    _this._parseConfig(config);\n\n    _this.$name = \"layout\";\n    return _this;\n  }\n\n  Layout.prototype.destructor = function () {\n    if (this.$container && this.$view) {\n      domHelpers.removeNode(this.$view);\n    }\n\n    for (var i = 0; i < this.$cells.length; i++) {\n      var child = this.$cells[i];\n      child.destructor();\n    }\n\n    this.$cells = [];\n\n    _super.prototype.destructor.call(this);\n  };\n\n  Layout.prototype._resizeScrollbars = function (autosize, scrollbars) {\n    var scrollChanged = false;\n    var visibleScrollbars = [],\n        hiddenScrollbars = [];\n    var scrollbarsToHide = [];\n\n    function showScrollbar(scrollbar) {\n      scrollbar.$parent.show();\n      scrollChanged = true;\n      visibleScrollbars.push(scrollbar);\n    }\n\n    function hideScrollbar(scrollbar) {\n      scrollbar.$parent.hide();\n      scrollChanged = true;\n      hiddenScrollbars.push(scrollbar);\n    }\n\n    var scrollbar;\n\n    for (var i = 0; i < scrollbars.length; i++) {\n      scrollbar = scrollbars[i];\n\n      if (autosize[scrollbar.$config.scroll]) {\n        hideScrollbar(scrollbar);\n      } else if (scrollbar.shouldHide()) {\n        //hideScrollbar(scrollbar);\n        scrollbarsToHide.push(scrollbar);\n      } else if (scrollbar.shouldShow()) {\n        showScrollbar(scrollbar);\n      } else {\n        if (scrollbar.isVisible()) {\n          visibleScrollbars.push(scrollbar);\n        } else {\n          hiddenScrollbars.push(scrollbar);\n        }\n      }\n    }\n\n    var visibleGroups = {};\n\n    for (var i = 0; i < visibleScrollbars.length; i++) {\n      if (visibleScrollbars[i].$config.group) {\n        visibleGroups[visibleScrollbars[i].$config.group] = true;\n      }\n    } // GS-2220\n\n\n    scrollbarsToHide.forEach(function (scrollbar) {\n      if (!(scrollbar.$config.group && visibleGroups[scrollbar.$config.group])) {\n        hideScrollbar(scrollbar);\n      }\n    });\n\n    for (var i = 0; i < hiddenScrollbars.length; i++) {\n      scrollbar = hiddenScrollbars[i];\n\n      if (scrollbar.$config.group && visibleGroups[scrollbar.$config.group]) {\n        showScrollbar(scrollbar); // GS-707 If the scrollbar was hidden then showed, the container resize shouldn't happen because of that\n\n        for (var j = 0; j < visibleScrollbars.length; j++) {\n          if (visibleScrollbars[j] == scrollbar) {\n            this.$gantt.$scrollbarRepaint = true;\n            break;\n          }\n        }\n      }\n    }\n\n    return scrollChanged;\n  };\n\n  Layout.prototype._syncCellSizes = function (groupName, newSize) {\n    if (!groupName) return;\n    var groups = {};\n\n    this._eachChild(function (cell) {\n      if (cell.$config.group && cell.$name != \"scrollbar\" && cell.$name != \"resizer\") {\n        if (!groups[cell.$config.group]) {\n          groups[cell.$config.group] = [];\n        }\n\n        groups[cell.$config.group].push(cell);\n      }\n    });\n\n    if (groups[groupName]) {\n      this._syncGroupSize(groups[groupName], newSize);\n    }\n\n    return groups[groupName];\n  };\n\n  Layout.prototype._syncGroupSize = function (cells, newSize) {\n    if (!cells.length) return;\n    var property = cells[0].$parent._xLayout ? \"width\" : \"height\";\n    var direction = cells[0].$parent.getNextSibling(cells[0].$id) ? 1 : -1;\n    var newSizeValue = newSize.value;\n    var isGravity = newSize.isGravity;\n\n    for (var i = 0; i < cells.length; i++) {\n      var ownSize = cells[i].getSize();\n      var resizeSibling = direction > 0 ? cells[i].$parent.getNextSibling(cells[i].$id) : cells[i].$parent.getPrevSibling(cells[i].$id);\n\n      if (resizeSibling.$name == \"resizer\") {\n        resizeSibling = direction > 0 ? resizeSibling.$parent.getNextSibling(resizeSibling.$id) : resizeSibling.$parent.getPrevSibling(resizeSibling.$id);\n      }\n\n      var siblingSize = resizeSibling.getSize();\n\n      if (!isGravity) {\n        if (resizeSibling[property]) {\n          var totalGravity = ownSize.gravity + siblingSize.gravity;\n          var totalSize = ownSize[property] + siblingSize[property];\n          var k = totalGravity / totalSize;\n          cells[i].$config.gravity = k * newSizeValue;\n          resizeSibling.$config[property] = totalSize - newSizeValue;\n          resizeSibling.$config.gravity = totalGravity - k * newSizeValue;\n        } else {\n          cells[i].$config[property] = newSizeValue;\n        }\n      } else {\n        cells[i].$config.gravity = newSizeValue;\n      }\n\n      var mainGrid = this.$gantt.$ui.getView(\"grid\");\n\n      if (mainGrid && cells[i].$content === mainGrid && !mainGrid.$config.scrollable && !isGravity) {\n        this.$gantt.config.grid_width = newSizeValue;\n      }\n    }\n  };\n\n  Layout.prototype.resize = function (startStage) {\n    var mainCall = false;\n\n    if (this.$root && !this._resizeInProgress) {\n      this.callEvent(\"onBeforeResize\", []);\n      mainCall = true;\n      this._resizeInProgress = true;\n    }\n\n    _super.prototype.resize.call(this, true);\n\n    _super.prototype.resize.call(this, false);\n\n    if (mainCall) {\n      var contentViews = [];\n      contentViews = contentViews.concat(this.getCellsByType(\"viewCell\"));\n      contentViews = contentViews.concat(this.getCellsByType(\"viewLayout\"));\n      contentViews = contentViews.concat(this.getCellsByType(\"hostCell\"));\n      var scrollbars = this.getCellsByType(\"scroller\");\n\n      for (var i = 0; i < contentViews.length; i++) {\n        if (!contentViews[i].$config.hidden) contentViews[i].setContentSize();\n      }\n\n      var autosize = this._getAutosizeMode(this.$config.autosize);\n      /* // possible to rollback set content size when autisize is disabled, not sure if need to\r\n      \t\tcontentViews.forEach(function(view){\r\n      \t\t\tconst parent = view.$parent;\r\n      \t\t\tif(!autosize.x){\r\n      \t\t\t\tif(parent.$config.$originalWidthStored){\r\n      \t\t\t\t\tparent.$config.$originalWidthStored = false;\r\n      \t\t\t\t\tparent.$config.width = parent.$config.$originalWidth;\r\n      \t\t\t\t\tparent.$config.$originalWidth = undefined;\r\n      \t\t\t\t}\r\n      \t\t\t}\r\n      \n      \t\t\tif(!autosize.y){\r\n      \t\t\t\tif(parent.$config.$originalHeightStored){\r\n      \t\t\t\t\tparent.$config.$originalHeightStored = false;\r\n      \t\t\t\t\tparent.$config.height = parent.$config.$originalHeight;\r\n      \t\t\t\t\tparent.$config.$originalHeight = undefined;\r\n      \t\t\t\t}\r\n      \t\t\t}\r\n      \t\t});*/\n\n\n      var scrollChanged = this._resizeScrollbars(autosize, scrollbars);\n\n      if (this.$config.autosize) {\n        this.autosize(this.$config.autosize);\n        contentViews.forEach(function (view) {\n          var parent = view.$parent;\n          var sizes = parent.getContentSize(autosize);\n\n          if (autosize.x) {\n            if (!parent.$config.$originalWidthStored) {\n              parent.$config.$originalWidthStored = true;\n              parent.$config.$originalWidth = parent.$config.width;\n            }\n\n            parent.$config.width = sizes.width;\n          }\n\n          if (autosize.y) {\n            if (!parent.$config.$originalHeightStored) {\n              parent.$config.$originalHeightStored = true;\n              parent.$config.$originalHeight = parent.$config.height;\n            }\n\n            parent.$config.height = sizes.height;\n          }\n        });\n        scrollChanged = true;\n      }\n\n      if (scrollChanged) {\n        this.resize();\n\n        for (var i = 0; i < contentViews.length; i++) {\n          if (!contentViews[i].$config.hidden) contentViews[i].setContentSize();\n        }\n      }\n\n      this.callEvent(\"onResize\", []);\n    }\n\n    if (mainCall) {\n      this._resizeInProgress = false;\n    }\n  };\n\n  Layout.prototype._eachChild = function (code, cell) {\n    cell = cell || this;\n    code(cell);\n\n    if (cell.$cells) {\n      for (var i = 0; i < cell.$cells.length; i++) {\n        this._eachChild(code, cell.$cells[i]);\n      }\n    }\n  };\n\n  Layout.prototype.isChild = function (view) {\n    var res = false;\n\n    this._eachChild(function (child) {\n      if (child === view || child.$content === view) {\n        res = true;\n      }\n    });\n\n    return res;\n  };\n\n  Layout.prototype.getCellsByType = function (type) {\n    var res = [];\n\n    if (type === this.$name) {\n      res.push(this);\n    }\n\n    if (this.$content && this.$content.$name == type) {\n      res.push(this.$content);\n    }\n\n    if (this.$cells) {\n      for (var i = 0; i < this.$cells.length; i++) {\n        var children = Layout.prototype.getCellsByType.call(this.$cells[i], type);\n\n        if (children.length) {\n          res.push.apply(res, children);\n        }\n      }\n    }\n\n    return res;\n  };\n\n  Layout.prototype.getNextSibling = function (cellId) {\n    var index = this.cellIndex(cellId);\n\n    if (index >= 0 && this.$cells[index + 1]) {\n      return this.$cells[index + 1];\n    } else {\n      return null;\n    }\n  };\n\n  Layout.prototype.getPrevSibling = function (cellId) {\n    var index = this.cellIndex(cellId);\n\n    if (index >= 0 && this.$cells[index - 1]) {\n      return this.$cells[index - 1];\n    } else {\n      return null;\n    }\n  };\n\n  Layout.prototype.cell = function (id) {\n    for (var i = 0; i < this.$cells.length; i++) {\n      var child = this.$cells[i];\n\n      if (child.$id === id) {\n        return child;\n      }\n\n      var sub = child.cell(id);\n\n      if (sub) {\n        return sub;\n      }\n    }\n  };\n\n  Layout.prototype.cellIndex = function (id) {\n    for (var i = 0; i < this.$cells.length; i++) {\n      if (this.$cells[i].$id === id) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  Layout.prototype.moveView = function (view, ind) {\n    if (this.$cells[ind] !== view) {\n      return window.alert(\"Not implemented\");\n    } else {\n      ind += this.$config.header ? 1 : 0;\n      var node = this.$view;\n\n      if (ind >= node.childNodes.length) {\n        node.appendChild(view.$view);\n      } else {\n        node.insertBefore(view.$view, node.childNodes[ind]);\n      }\n    }\n  };\n\n  Layout.prototype._parseConfig = function (config) {\n    this.$cells = [];\n    this._xLayout = !config.rows;\n    var cells = config.rows || config.cols || config.views;\n\n    for (var i = 0; i < cells.length; i++) {\n      var cell = cells[i];\n      cell.mode = this._xLayout ? \"x\" : \"y\";\n      var $content = this.$factory.initUI(cell, this);\n\n      if (!$content) {\n        cells.splice(i, 1);\n        i--;\n      } else {\n        $content.$parent = this;\n        this.$cells.push($content);\n      }\n    }\n  };\n\n  Layout.prototype.getCells = function () {\n    return this.$cells;\n  };\n\n  Layout.prototype.render = function () {\n    var view = domHelpers.insertNode(this.$container, this.$toHTML());\n    this.$fill(view, null);\n    this.callEvent(\"onReady\", []);\n    this.resize(); // do simple repaint after the first call\n\n    this.render = this.resize;\n  };\n\n  Layout.prototype.$fill = function (node, parent) {\n    this.$view = node;\n    this.$parent = parent;\n    var cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\n\n    for (var i = cells.length - 1; i >= 0; i--) {\n      var sub = this.$cells[i];\n      sub.$fill(cells[i], this); // initially hidden cell\n\n      if (sub.$config.hidden) {\n        sub.$view.parentNode.removeChild(sub.$view);\n      }\n    }\n  };\n\n  Layout.prototype.$toHTML = function () {\n    var mode = this._xLayout ? \"x\" : \"y\";\n    var html = [];\n\n    for (var i = 0; i < this.$cells.length; i++) {\n      html.push(this.$cells[i].$toHTML());\n    }\n\n    return _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\n  };\n\n  Layout.prototype.getContentSize = function (mode) {\n    var contentWidth = 0,\n        contentHeight = 0;\n    var cellSize, cell, borders;\n\n    for (var i = 0; i < this.$cells.length; i++) {\n      cell = this.$cells[i];\n      if (cell.$config.hidden) continue;\n      cellSize = cell.getContentSize(mode);\n\n      if (cell.$config.view === \"scrollbar\" && mode[cell.$config.scroll]) {\n        cellSize.height = 0;\n        cellSize.width = 0;\n      }\n\n      if (cell.$config.resizer) {\n        if (this._xLayout) {\n          cellSize.height = 0;\n        } else {\n          cellSize.width = 0;\n        }\n      }\n\n      borders = cell._getBorderSizes();\n\n      if (this._xLayout) {\n        contentWidth += cellSize.width + borders.horizontal;\n        contentHeight = Math.max(contentHeight, cellSize.height + borders.vertical);\n      } else {\n        contentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\n        contentHeight += cellSize.height + borders.vertical;\n      }\n    }\n\n    borders = this._getBorderSizes();\n    contentWidth += borders.horizontal;\n    contentHeight += borders.vertical; // GS-149 & GS-150: By default this code only increases the container sizes, because of that, the cell sizes\n    // are also increased. Keep this code here in the case if something goes wrong\n\n    /*\r\n    if(this.$root){\r\n    \tcontentWidth += 1;\r\n    \tcontentHeight += 1;\r\n    }\r\n    */\n\n    return {\n      width: contentWidth,\n      height: contentHeight\n    };\n  };\n\n  Layout.prototype._cleanElSize = function (value) {\n    return (value || \"\").toString().replace(\"px\", \"\") * 1 || 0;\n  };\n\n  Layout.prototype._getBoxStyles = function (div) {\n    var computed = null;\n\n    if (window.getComputedStyle) {\n      computed = window.getComputedStyle(div, null);\n    } else {\n      //IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\n      computed = {\n        \"width\": div.clientWidth,\n        \"height\": div.clientHeight\n      };\n    }\n\n    var properties = [\"width\", \"height\", \"paddingTop\", \"paddingBottom\", \"paddingLeft\", \"paddingRight\", \"borderLeftWidth\", \"borderRightWidth\", \"borderTopWidth\", \"borderBottomWidth\"];\n    var styles = {\n      boxSizing: computed.boxSizing == \"border-box\"\n    };\n\n    if (computed.MozBoxSizing) {\n      styles.boxSizing = computed.MozBoxSizing == \"border-box\";\n    }\n\n    for (var i = 0; i < properties.length; i++) {\n      styles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\n    }\n\n    var box = {\n      horPaddings: styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth,\n      vertPaddings: styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth,\n      borderBox: styles.boxSizing,\n      innerWidth: styles.width,\n      innerHeight: styles.height,\n      outerWidth: styles.width,\n      outerHeight: styles.height\n    };\n\n    if (box.borderBox) {\n      box.innerWidth -= box.horPaddings;\n      box.innerHeight -= box.vertPaddings;\n    } else {\n      box.outerWidth += box.horPaddings;\n      box.outerHeight += box.vertPaddings;\n    }\n\n    return box;\n  };\n\n  Layout.prototype._getAutosizeMode = function (config) {\n    var res = {\n      x: false,\n      y: false\n    };\n\n    if (config === \"xy\") {\n      res.x = res.y = true;\n    } else if (config === \"y\" || config === true) {\n      res.y = true;\n    } else if (config === \"x\") {\n      res.x = true;\n    }\n\n    return res;\n  };\n\n  Layout.prototype.autosize = function (mode) {\n    var res = this._getAutosizeMode(mode);\n\n    var boxSizes = this._getBoxStyles(this.$container);\n\n    var contentSizes = this.getContentSize(mode);\n    var node = this.$container;\n\n    if (res.x) {\n      if (boxSizes.borderBox) {\n        contentSizes.width += boxSizes.horPaddings;\n      }\n\n      node.style.width = contentSizes.width + \"px\";\n    }\n\n    if (res.y) {\n      if (boxSizes.borderBox) {\n        contentSizes.height += boxSizes.vertPaddings;\n      }\n\n      node.style.height = contentSizes.height + \"px\";\n    }\n  };\n\n  Layout.prototype.getSize = function () {\n    this._sizes = [];\n    var width = 0;\n    var minWidth = 0;\n    var maxWidth = 100000000000;\n    var height = 0;\n    var maxHeight = 100000000000;\n    var minHeight = 0;\n\n    for (var i = 0; i < this.$cells.length; i++) {\n      var size = this._sizes[i] = this.$cells[i].getSize();\n\n      if (this.$cells[i].$config.hidden) {\n        continue;\n      }\n\n      if (this._xLayout) {\n        if (!size.width && size.minWidth) {\n          width += size.minWidth;\n        } else {\n          width += size.width;\n        }\n\n        maxWidth += size.maxWidth;\n        minWidth += size.minWidth;\n        height = Math.max(height, size.height);\n        maxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\n\n        minHeight = Math.max(minHeight, size.minHeight); // max of minHeight\n      } else {\n        if (!size.height && size.minHeight) {\n          height += size.minHeight;\n        } else {\n          height += size.height;\n        }\n\n        maxHeight += size.maxHeight;\n        minHeight += size.minHeight;\n        width = Math.max(width, size.width);\n        maxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\n\n        minWidth = Math.max(minWidth, size.minWidth); // max of minWidth\n      }\n    }\n\n    var self = _super.prototype.getSize.call(this); // maxWidth\n\n\n    if (self.maxWidth >= 100000) {\n      self.maxWidth = maxWidth;\n    } // maxHeight\n\n\n    if (self.maxHeight >= 100000) {\n      self.maxHeight = maxHeight;\n    } // minWidth\n\n\n    self.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth; // || self.width || Math.max(minWidth, width);\n    // minHeight\n\n    self.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight; //self.minHeight || self.height || Math.max(minHeight, height);\n    // sizes with paddings and margins\n\n    if (this._xLayout) {\n      self.minWidth += this.$config.margin * this.$cells.length || 0;\n      self.minWidth += this.$config.padding * 2 || 0;\n      self.minHeight += this.$config.padding * 2 || 0;\n    } else {\n      self.minHeight += this.$config.margin * this.$cells.length || 0;\n      self.minHeight += this.$config.padding * 2 || 0;\n    }\n\n    return self;\n  }; // calc total gravity and free space\n\n\n  Layout.prototype._calcFreeSpace = function (s, cell, xLayout) {\n    var min = xLayout ? cell.minWidth : cell.minHeight;\n    var max = xLayout ? cell.maxWidth : cell.maxWidth;\n    var side = s;\n\n    if (!side) {\n      side = Math.floor(this._free / this._gravity * cell.gravity);\n\n      if (side > max) {\n        side = max;\n        this._free -= side;\n        this._gravity -= cell.gravity;\n      }\n\n      if (side < min) {\n        side = min;\n        this._free -= side;\n        this._gravity -= cell.gravity;\n      }\n    } else {\n      if (side > max) {\n        side = max;\n      }\n\n      if (side < min) {\n        side = min;\n      }\n\n      this._free -= side;\n    }\n\n    return side;\n  };\n\n  Layout.prototype._calcSize = function (s, size, xLayout) {\n    var side = s;\n    var min = xLayout ? size.minWidth : size.minHeight;\n    var max = xLayout ? size.maxWidth : size.maxHeight;\n\n    if (!side) {\n      side = Math.floor(this._free / this._gravity * size.gravity);\n    }\n\n    if (side > max) {\n      side = max;\n    }\n\n    if (side < min) {\n      side = min;\n    }\n\n    return side;\n  };\n\n  Layout.prototype._configureBorders = function () {\n    if (this.$root) {\n      this._setBorders([this._borders.left, this._borders.top, this._borders.right, this._borders.bottom], this);\n    }\n\n    var borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\n    var cells = this.$cells;\n    var lastVisibleIndex = cells.length - 1;\n\n    for (var i = lastVisibleIndex; i >= 0; i--) {\n      if (!cells[i].$config.hidden) {\n        lastVisibleIndex = i;\n        break;\n      }\n    }\n\n    for (var i = 0; i < cells.length; i++) {\n      if (cells[i].$config.hidden) {\n        continue;\n      }\n\n      var lastCell = i >= lastVisibleIndex;\n      var borderColorClass = \"\";\n\n      if (!lastCell && cells[i + 1]) {\n        if (cells[i + 1].$config.view == \"scrollbar\") {\n          if (this._xLayout) {\n            lastCell = true;\n          } else {\n            borderColorClass = \"gantt_layout_cell_border_transparent\";\n          }\n        }\n      }\n\n      this._setBorders(lastCell ? [] : [borderClass, borderColorClass], cells[i]);\n    }\n  };\n\n  Layout.prototype._updateCellVisibility = function () {\n    var oldVisibleCells = this._visibleCells || {};\n    var firstCall = !this._visibleCells;\n    var visibleCells = {};\n    var cell = null;\n    var parentVisibility = [];\n\n    for (var i = 0; i < this._sizes.length; i++) {\n      cell = this.$cells[i];\n\n      if (cell.$config.hide_empty) {\n        parentVisibility.push(cell);\n      }\n\n      if (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\n        cell._hide(true);\n      } else if (!cell.$config.hidden && !oldVisibleCells[cell.$id]) {\n        cell._hide(false);\n      }\n\n      if (!cell.$config.hidden) {\n        visibleCells[cell.$id] = true;\n      }\n    }\n\n    this._visibleCells = visibleCells; // GS-27. A way to hide the whole cell if all its children are hidden\n\n    for (var i = 0; i < parentVisibility.length; i++) {\n      var cell = parentVisibility[i];\n      var children = cell.$cells;\n      var hideCell = true;\n      children.forEach(function (child) {\n        if (!child.$config.hidden && !child.$config.resizer) {\n          hideCell = false;\n        }\n      });\n      cell.$config.hidden = hideCell;\n    }\n  };\n\n  Layout.prototype.setSize = function (x, y) {\n    this._configureBorders();\n\n    _super.prototype.setSize.call(this, x, y);\n\n    y = this.$lastSize.contentY;\n    x = this.$lastSize.contentX;\n    var padding = this.$config.padding || 0;\n    this.$view.style.padding = padding + \"px\";\n    this._gravity = 0;\n    this._free = this._xLayout ? x : y;\n    this._free -= padding * 2; // calc all gravity\n\n    var cell, size;\n\n    this._updateCellVisibility();\n\n    for (var i = 0; i < this._sizes.length; i++) {\n      cell = this.$cells[i];\n\n      if (cell.$config.hidden) {\n        continue;\n      }\n\n      var margin = this.$config.margin || 0;\n\n      if (cell.$name == \"resizer\" && !margin) {\n        margin = -1;\n      } // set margins to child cell\n\n\n      var cellView = cell.$view;\n      var marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\n\n      if (i !== this.$cells.length - 1) {\n        cellView.style[marginSide] = margin + \"px\";\n        this._free -= margin; // calc free space without margin\n      }\n\n      size = this._sizes[i];\n\n      if (this._xLayout) {\n        if (!size.width) {\n          this._gravity += size.gravity;\n        }\n      } else {\n        if (!size.height) {\n          this._gravity += size.gravity;\n        }\n      }\n    }\n\n    for (var i = 0; i < this._sizes.length; i++) {\n      cell = this.$cells[i];\n\n      if (cell.$config.hidden) {\n        continue;\n      }\n\n      size = this._sizes[i];\n      var width = size.width;\n      var height = size.height;\n\n      if (this._xLayout) {\n        this._calcFreeSpace(width, size, true);\n      } else {\n        this._calcFreeSpace(height, size, false);\n      }\n    }\n\n    for (var i = 0; i < this.$cells.length; i++) {\n      cell = this.$cells[i];\n\n      if (cell.$config.hidden) {\n        continue;\n      }\n\n      size = this._sizes[i];\n      var dx = void 0;\n      var dy = void 0;\n\n      if (this._xLayout) {\n        dx = this._calcSize(size.width, size, true);\n        dy = y - padding * 2; // layout height without paddings\n      } else {\n        dx = x - padding * 2; // layout width without paddings\n\n        dy = this._calcSize(size.height, size, false);\n      }\n\n      cell.setSize(dx, dy);\n    }\n  };\n\n  return Layout;\n}(Cell);\n\nmodule.exports = Layout;","// optimized checker for links smart rendering\n// first check the vertical position since it's easier to calculate\nmodule.exports = function isLinkInViewPort(item, viewport, view, config, gantt) {\n  var source = view.$gantt.getTask(item.source);\n  var target = view.$gantt.getTask(item.target); // check vertical visibility first since it's a lighter check\n\n  var sourceTop = view.getItemTop(source.id);\n  var sourceHeight = view.getItemHeight(source.id);\n  var targetTop = view.getItemTop(target.id);\n  var targetHeight = view.getItemHeight(target.id);\n\n  if (viewport.y > sourceTop + sourceHeight && viewport.y > targetTop + targetHeight) {\n    return false;\n  }\n\n  if (viewport.y_end < targetTop && viewport.y_end < sourceTop) {\n    return false;\n  }\n\n  var padding = 100;\n  var sourceLeft = view.posFromDate(source.start_date);\n  var sourceRight = view.posFromDate(source.end_date);\n  var targetLeft = view.posFromDate(target.start_date);\n  var targetRight = view.posFromDate(target.end_date);\n\n  if (sourceLeft > sourceRight) {\n    // rtl\n    var tmp = sourceRight;\n    sourceRight = sourceLeft;\n    sourceLeft = tmp;\n  }\n\n  if (targetLeft > targetRight) {\n    // rtl\n    var tmp = targetRight;\n    targetRight = targetLeft;\n    targetLeft = tmp;\n  }\n\n  sourceLeft += -padding; // add buffer for custom elements\n\n  sourceRight += padding;\n  targetLeft += -padding; // add buffer for custom elements\n\n  targetRight += padding;\n\n  if (viewport.x > sourceRight && viewport.x > targetRight) {\n    return false;\n  }\n\n  if (viewport.x_end < sourceLeft && viewport.x_end < targetLeft) {\n    return false;\n  }\n\n  return true;\n};","var getLinkRectangle = require(\"../get_link_rectangle\");\n\nmodule.exports = function () {\n  var coordinates = [];\n  var calculated = false;\n\n  function clearCache() {\n    coordinates = [];\n    calculated = false;\n  }\n\n  function buildCache(datastore, view, gantt) {\n    var config = view.$getConfig();\n    var visibleItems = datastore.getVisibleItems(); //datastore.eachItem(function(link){\n\n    visibleItems.forEach(function (link) {\n      var rec = getLinkRectangle(link, view, config, gantt);\n\n      if (!rec) {\n        return;\n      }\n\n      coordinates.push({\n        id: link.id,\n        rec: rec\n      });\n    });\n    coordinates.sort(function (a, b) {\n      if (a.rec.right < b.rec.right) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n    calculated = true;\n  }\n\n  var initialized = false;\n\n  function init(datastore) {\n    if (initialized) {\n      return;\n    }\n\n    initialized = true;\n    datastore.attachEvent(\"onPreFilter\", clearCache);\n    datastore.attachEvent(\"onStoreUpdated\", clearCache);\n    datastore.attachEvent(\"onClearAll\", clearCache);\n    datastore.attachEvent(\"onBeforeStoreUpdate\", clearCache);\n  }\n\n  return function getVisibleLinksRange(gantt, view, config, datastore, viewport) {\n    init(datastore);\n\n    if (!calculated) {\n      buildCache(datastore, view, gantt);\n    }\n\n    var visibleBoxes = [];\n\n    for (var i = 0; i < coordinates.length; i++) {\n      var item = coordinates[i];\n      var box = item.rec;\n\n      if (box.right < viewport.x) {\n        continue;\n      }\n\n      if (box.left < viewport.x_end && box.right > viewport.x && box.top < viewport.y_end && box.bottom > viewport.y) {\n        visibleBoxes.push(item.id);\n      }\n    }\n\n    return {\n      ids: visibleBoxes\n    };\n  };\n};","import { IWorkUnitCache } from \"./workunit_cache_interface\";\r\nimport { WorkUnitsMapCache } from \"./workunit_map_cache\";\r\nimport { WorkUnitsObjectCache } from \"./workunit_object_cache\";\r\nexport { LargerUnitsCache } from \"./larger_units_helper\";\r\n\r\nexport function createCacheObject(): IWorkUnitCache {\r\n\r\n\t// worktime hash is on the hot path,\r\n\t// Map seems to work faster than plain array, use it whenever possible\r\n\tif (typeof Map !== \"undefined\") {\r\n\t\treturn new WorkUnitsMapCache();\r\n\t} else {\r\n\t\treturn new WorkUnitsObjectCache();\r\n\t}\r\n}\r\n","var utils = require(\"../../utils/utils\");\n\nvar helpers = require(\"../../utils/helpers\");\n\nfunction IsWorkTimeArgument(date, unit, task, id, calendar) {\n  this.date = date;\n  this.unit = unit;\n  this.task = task;\n  this.id = id;\n  this.calendar = calendar;\n  return this;\n}\n\nfunction ClosestWorkTimeArgument(date, dir, unit, task, id, calendar) {\n  this.date = date;\n  this.dir = dir;\n  this.unit = unit;\n  this.task = task;\n  this.id = id;\n  this.calendar = calendar;\n  return this;\n}\n\nfunction CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar) {\n  this.start_date = start_date;\n  this.duration = duration;\n  this.unit = unit;\n  this.step = step;\n  this.task = task;\n  this.id = id;\n  this.calendar = calendar;\n  return this;\n}\n\nfunction GetDurationArgument(start, end, task, calendar) {\n  this.start_date = start;\n  this.end_date = end;\n  this.task = task;\n  this.calendar = calendar;\n  this.unit = null;\n  this.step = null;\n  return this;\n}\n\nvar calendarArgumentsHelper = function calendarArgumentsHelper(gantt) {\n  return {\n    getWorkHoursArguments: function getWorkHoursArguments() {\n      var config = arguments[0];\n\n      if (helpers.isDate(config)) {\n        config = {\n          date: config\n        };\n      } else {\n        config = utils.mixin({}, config);\n      }\n\n      if (!helpers.isValidDate(config.date)) {\n        gantt.assert(false, \"Invalid date argument for getWorkHours method\");\n        throw new Error(\"Invalid date argument for getWorkHours method\");\n      }\n\n      return config;\n    },\n    setWorkTimeArguments: function setWorkTimeArguments() {\n      return arguments[0];\n    },\n    unsetWorkTimeArguments: function unsetWorkTimeArguments() {\n      return arguments[0];\n    },\n    isWorkTimeArguments: function isWorkTimeArguments() {\n      var config = arguments[0];\n\n      if (config instanceof IsWorkTimeArgument) {\n        return config;\n      }\n\n      var processedConfig;\n\n      if (!config.date) {\n        //IsWorkTimeArgument(date, unit, task, id, calendar)\n        processedConfig = new IsWorkTimeArgument(arguments[0], arguments[1], arguments[2], null, arguments[3]);\n      } else {\n        processedConfig = new IsWorkTimeArgument(config.date, config.unit, config.task, null, config.calendar);\n      }\n\n      processedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\n\n      if (!helpers.isValidDate(processedConfig.date)) {\n        gantt.assert(false, \"Invalid date argument for isWorkTime method\");\n        throw new Error(\"Invalid date argument for isWorkTime method\");\n      }\n\n      return processedConfig;\n    },\n    getClosestWorkTimeArguments: function getClosestWorkTimeArguments(arg) {\n      var config = arguments[0];\n      if (config instanceof ClosestWorkTimeArgument) return config;\n      var processedConfig;\n\n      if (helpers.isDate(config)) {\n        processedConfig = new ClosestWorkTimeArgument(config);\n      } else {\n        processedConfig = new ClosestWorkTimeArgument(config.date, config.dir, config.unit, config.task, null, //config.id,\n        config.calendar);\n      }\n\n      if (config.id) {\n        processedConfig.task = config;\n      }\n\n      processedConfig.dir = config.dir || 'any';\n      processedConfig.unit = config.unit || gantt.config.duration_unit;\n\n      if (!helpers.isValidDate(processedConfig.date)) {\n        gantt.assert(false, \"Invalid date argument for getClosestWorkTime method\");\n        throw new Error(\"Invalid date argument for getClosestWorkTime method\");\n      }\n\n      return processedConfig;\n    },\n    _getStartEndConfig: function _getStartEndConfig(param) {\n      var argumentType = GetDurationArgument;\n      var config;\n      if (param instanceof argumentType) return param;\n\n      if (helpers.isDate(param)) {\n        config = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\n      } else {\n        config = new argumentType(param.start_date, param.end_date, param.task);\n\n        if (param.id !== null && param.id !== undefined) {\n          config.task = param;\n        }\n      }\n\n      config.unit = config.unit || gantt.config.duration_unit;\n      config.step = config.step || gantt.config.duration_step;\n      config.start_date = config.start_date || config.start || config.date;\n\n      if (!helpers.isValidDate(config.start_date)) {\n        gantt.assert(false, \"Invalid start_date argument for getDuration method\");\n        throw new Error(\"Invalid start_date argument for getDuration method\");\n      }\n\n      if (!helpers.isValidDate(config.end_date)) {\n        gantt.assert(false, \"Invalid end_date argument for getDuration method\");\n        throw new Error(\"Invalid end_date argument for getDuration method\");\n      }\n\n      return config;\n    },\n    getDurationArguments: function getDurationArguments(start, end, unit, step) {\n      return this._getStartEndConfig.apply(this, arguments);\n    },\n    hasDurationArguments: function hasDurationArguments(start, end, unit, step) {\n      return this._getStartEndConfig.apply(this, arguments);\n    },\n    calculateEndDateArguments: function calculateEndDateArguments(start, duration, unit, step) {\n      var config = arguments[0];\n      if (config instanceof CalculateEndDateArgument) return config;\n      var processedConfig; //CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar)\n\n      if (helpers.isDate(config)) {\n        processedConfig = new CalculateEndDateArgument(arguments[0], arguments[1], arguments[2], undefined, arguments[3], undefined, arguments[4]);\n      } else {\n        processedConfig = new CalculateEndDateArgument(config.start_date, config.duration, config.unit, config.step, config.task, null, //config.id,\n        config.calendar);\n      }\n\n      if (config.id !== null && config.id !== undefined) {\n        processedConfig.task = config; // received a task object as an argument\n        // ignore 'unit' and 'step' properties in this case, since it's likely a part of data model of a task\n\n        processedConfig.unit = null;\n        processedConfig.step = null;\n      }\n\n      processedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\n      processedConfig.step = processedConfig.step || gantt.config.duration_step;\n\n      if (!helpers.isValidDate(processedConfig.start_date)) {\n        gantt.assert(false, \"Invalid start_date argument for calculateEndDate method\");\n        throw new Error(\"Invalid start_date argument for calculateEndDate method\");\n      }\n\n      return processedConfig;\n    }\n  };\n};\n\nmodule.exports = calendarArgumentsHelper;","var quickPositionHelperFactory = require(\"./row_position_fixed_height\");\n\nfunction createMixin(view) {\n  var getItemTopCache = {};\n  var getRowTopCache = {};\n  var getItemHeightCache = null;\n  var totalHeightCache = -1;\n  var getItemHeightCacheState = null;\n  var quickPosition = quickPositionHelperFactory(view);\n  return {\n    _resetTopPositionHeight: function _resetTopPositionHeight() {\n      getItemTopCache = {};\n      getRowTopCache = {};\n      quickPosition.resetCache();\n    },\n    _resetHeight: function _resetHeight() {\n      var store = this.$config.rowStore;\n      var newState = this.getCacheStateTotalHeight(store);\n\n      if (!getItemHeightCacheState) {\n        getItemHeightCacheState = newState;\n      } else if (this.shouldClearHeightCache(getItemHeightCacheState, newState)) {\n        getItemHeightCacheState = newState;\n        getItemHeightCache = null;\n      }\n\n      totalHeightCache = -1;\n      quickPosition.resetCache();\n    },\n\n    /**\r\n     * Get top coordinate by row index (order)\r\n     * @param {number} index\r\n     */\n    getRowTop: function getRowTop(index) {\n      if (quickPosition.canUseSimpleCalculation()) {\n        return quickPosition.getRowTop(index);\n      }\n\n      var store = this.$config.rowStore;\n\n      if (!store) {\n        return 0;\n      }\n\n      if (getRowTopCache[index] !== undefined) {\n        return getRowTopCache[index];\n      } else {\n        var all = store.getIndexRange();\n        var top = 0;\n        var result = 0;\n\n        for (var i = 0; i < all.length; i++) {\n          getRowTopCache[i] = top;\n          top += this.getItemHeight(all[i].id);\n\n          if (i < index) {\n            result = top;\n          }\n        }\n\n        return result;\n      }\n    },\n\n    /**\r\n     * Get top coordinate by item id\r\n     * @param {*} task_id\r\n     */\n    getItemTop: function getItemTop(taskId) {\n      if (this.$config.rowStore) {\n        if (getItemTopCache[taskId] !== undefined) {\n          return getItemTopCache[taskId];\n        }\n\n        var store = this.$config.rowStore;\n        if (!store) return 0;\n        var itemIndex = store.getIndexById(taskId);\n\n        if (itemIndex === -1 && store.getParent && store.exists(taskId)) {\n          var parentId = store.getParent(taskId);\n\n          if (store.exists(parentId)) {\n            // if task is not found in list - maybe it's parent is a split task and we should use parents index instead\n            var parent = store.getItem(parentId);\n\n            if (this.$gantt.isSplitTask(parent)) {\n              return this.getItemTop(parentId);\n            }\n          }\n        }\n\n        getItemTopCache[taskId] = this.getRowTop(itemIndex);\n        return getItemTopCache[taskId];\n      } else {\n        return 0;\n      }\n    },\n\n    /**\r\n     * Get height of the item by item id\r\n     * @param {*} itemId\r\n     */\n    getItemHeight: function getItemHeight(itemId) {\n      if (quickPosition.canUseSimpleCalculation()) {\n        return quickPosition.getItemHeight(itemId);\n      }\n\n      if (!getItemHeightCache && this.$config.rowStore) {\n        this._fillHeightCache(this.$config.rowStore);\n      }\n\n      if (getItemHeightCache[itemId] !== undefined) {\n        return getItemHeightCache[itemId];\n      }\n\n      var defaultHeight = this.$getConfig().row_height;\n\n      if (this.$config.rowStore) {\n        var store = this.$config.rowStore;\n        if (!store) return defaultHeight;\n        var item = store.getItem(itemId);\n        return getItemHeightCache[itemId] = item && item.row_height || defaultHeight;\n      } else {\n        return defaultHeight;\n      }\n    },\n    _fillHeightCache: function _fillHeightCache(store) {\n      if (!store) {\n        return;\n      }\n\n      getItemHeightCache = {};\n      var defaultHeight = this.$getConfig().row_height;\n      store.eachItem(function (item) {\n        return getItemHeightCache[item.id] = item && item.row_height || defaultHeight;\n      });\n    },\n    getCacheStateTotalHeight: function getCacheStateTotalHeight(store) {\n      var globalHeight = this.$getConfig().row_height;\n      var itemHeightCache = {};\n      var items = [];\n      var sumHeight = 0;\n\n      if (store) {\n        store.eachItem(function (item) {\n          items.push(item);\n          itemHeightCache[item.id] = item.row_height;\n          sumHeight += item.row_height || globalHeight;\n        });\n      }\n\n      return {\n        globalHeight: globalHeight,\n        items: items,\n        count: items.length,\n        sumHeight: sumHeight\n      };\n    },\n    shouldClearHeightCache: function shouldClearHeightCache(oldState, newState) {\n      if (oldState.count != newState.count) {\n        return true;\n      }\n\n      if (oldState.globalHeight != newState.globalHeight) {\n        return true;\n      }\n\n      if (oldState.sumHeight != newState.sumHeight) {\n        return true;\n      }\n\n      for (var i in oldState.items) {\n        var newValue = newState.items[i];\n\n        if (newValue !== undefined && newValue != oldState.items[i]) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\r\n     * Get total height of items\r\n     */\n    getTotalHeight: function getTotalHeight() {\n      if (quickPosition.canUseSimpleCalculation()) {\n        return quickPosition.getTotalHeight();\n      }\n\n      if (totalHeightCache != -1) {\n        return totalHeightCache;\n      }\n\n      if (this.$config.rowStore) {\n        var store = this.$config.rowStore;\n\n        this._fillHeightCache(store);\n\n        var getHeight = this.getItemHeight.bind(this);\n        var visibleItems = store.getVisibleItems();\n        var totalHeight = 0;\n        visibleItems.forEach(function (item) {\n          totalHeight += getHeight(item.id);\n        });\n        totalHeightCache = totalHeight;\n        return totalHeight;\n      } else {\n        return 0;\n      }\n    },\n\n    /**\r\n     * Get item by top position\r\n     * @param {*} top\r\n     */\n    getItemIndexByTopPosition: function getItemIndexByTopPosition(top) {\n      if (this.$config.rowStore) {\n        if (quickPosition.canUseSimpleCalculation()) {\n          return quickPosition.getItemIndexByTopPosition(top);\n        }\n\n        var store = this.$config.rowStore;\n\n        for (var i = 0; i < store.countVisible(); i++) {\n          var current = this.getRowTop(i);\n          var next = this.getRowTop(i + 1);\n\n          if (!next) {\n            var taskId = store.getIdByIndex(i);\n            next = current + this.getItemHeight(taskId);\n          }\n\n          if (top >= current && top < next) {\n            return i;\n          }\n        } // GS-1723: If we iterated all tasks and didn't find the position, the target is below all other tasks\n\n\n        return store.countVisible() + 2;\n      } else {\n        return 0;\n      }\n    }\n  };\n}\n\nmodule.exports = createMixin;","export default class DurationFormatterNumeric implements IDurationFormatter {\r\n\tstatic create = (settings: IDurationFormatterConfig = null): IDurationFormatter => {\r\n\t\treturn new DurationFormatterNumeric();\r\n\t}\r\n\tcanParse = (value: string) : boolean => {\r\n\t\treturn !isNaN(this.parse(value));\r\n\t}\r\n\tformat = (value: number) : string => {\r\n\t\treturn String(value);\r\n\t}\r\n\tparse = (value: string) : number => {\r\n\t\treturn parseInt(value, 10);\r\n\t}\r\n}","function copyLinkIdsArray(gantt, linkIds, targetHash) {\n  for (var i = 0; i < linkIds.length; i++) {\n    if (gantt.isLinkExists(linkIds[i])) {\n      targetHash[linkIds[i]] = gantt.getLink(linkIds[i]);\n    }\n  }\n}\n\nfunction copyLinkIds(gantt, task, targetHash) {\n  copyLinkIdsArray(gantt, task.$source, targetHash);\n  copyLinkIdsArray(gantt, task.$target, targetHash);\n}\n\nfunction getSubtreeLinks(gantt, rootId) {\n  var res = {};\n\n  if (gantt.isTaskExists(rootId)) {\n    copyLinkIds(gantt, gantt.getTask(rootId), res);\n  }\n\n  gantt.eachTask(function (child) {\n    copyLinkIds(gantt, child, res);\n  }, rootId);\n  return res;\n}\n\nfunction getSubtreeTasks(gantt, rootId) {\n  var res = {};\n  gantt.eachTask(function (child) {\n    res[child.id] = child;\n  }, rootId);\n  return res;\n}\n\nmodule.exports = {\n  getSubtreeLinks: getSubtreeLinks,\n  getSubtreeTasks: getSubtreeTasks\n};","var ScaleHelper = require(\"./ui/timeline/scales_ignore\");\n\nvar PrimaryScaleHelper = require(\"./ui/timeline/scales\");\n\nfunction resolveConfigRange(unit, gantt) {\n  var range = {\n    start_date: null,\n    end_date: null\n  };\n\n  if (gantt.config.start_date && gantt.config.end_date) {\n    range.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\n    var end = new Date(gantt.config.end_date);\n    var start_interval = gantt.date[unit + \"_start\"](new Date(end));\n\n    if (+end != +start_interval) {\n      end = gantt.date.add(start_interval, 1, unit);\n    } else {\n      end = start_interval;\n    }\n\n    range.end_date = end;\n  }\n\n  return range;\n}\n\nfunction _scale_range_unit(gantt) {\n  var primaryScale = new PrimaryScaleHelper(gantt).primaryScale();\n  var unit = primaryScale.unit;\n  var step = primaryScale.step;\n\n  if (gantt.config.scale_offset_minimal) {\n    var helper = new ScaleHelper(gantt);\n    var scales = [helper.primaryScale()].concat(helper.getSubScales());\n    helper.sortScales(scales);\n    unit = scales[scales.length - 1].unit;\n    step = scales[scales.length - 1].step || 1;\n  }\n\n  return {\n    unit: unit,\n    step: step\n  };\n}\n\nfunction _init_tasks_range(gantt) {\n  var cfg = _scale_range_unit(gantt);\n\n  var unit = cfg.unit,\n      step = cfg.step;\n  var range = resolveConfigRange(unit, gantt); // GS-1544: Show correct date range if we have tasks or only projects\n\n  if (!(range.start_date && range.end_date)) {\n    var onlyProjectTasks = true;\n    var tasks = gantt.getTaskByTime();\n\n    for (var i = 0; i < tasks.length; i++) {\n      var task = tasks[i];\n\n      if (task.type !== gantt.config.types.project) {\n        onlyProjectTasks = false;\n        break;\n      }\n    }\n\n    if (tasks.length && onlyProjectTasks) {\n      var start_date = tasks[0].start_date;\n      var end_date = gantt.date.add(start_date, 1, gantt.config.duration_unit);\n      range = {\n        start_date: new Date(start_date),\n        end_date: new Date(end_date)\n      };\n    } else {\n      range = gantt.getSubtaskDates();\n    }\n\n    if (!range.start_date || !range.end_date) {\n      range = {\n        start_date: new Date(),\n        end_date: new Date()\n      };\n    }\n\n    range.start_date = gantt.date[unit + \"_start\"](range.start_date);\n    range.start_date = gantt.calculateEndDate({\n      start_date: gantt.date[unit + \"_start\"](range.start_date),\n      duration: -1,\n      unit: unit,\n      step: step\n    }); //one free column before first task\n\n    range.end_date = gantt.date[unit + \"_start\"](range.end_date);\n    range.end_date = gantt.calculateEndDate({\n      start_date: range.end_date,\n      duration: 2,\n      unit: unit,\n      step: step\n    }); //one free column after last task\n  }\n\n  gantt._min_date = range.start_date;\n  gantt._max_date = range.end_date;\n}\n\nfunction _adjust_scales(gantt) {\n  if (gantt.config.fit_tasks) {\n    var old_min = +gantt._min_date,\n        old_max = +gantt._max_date; //this._init_tasks_range();\n\n    if (+gantt._min_date != old_min || +gantt._max_date != old_max) {\n      gantt.render();\n      gantt.callEvent(\"onScaleAdjusted\", []);\n      return true;\n    }\n  }\n\n  return false;\n}\n\nmodule.exports = function updateTasksRange(gantt) {\n  _init_tasks_range(gantt);\n\n  _adjust_scales(gantt);\n};","var powerArray = require(\"./power_array\");\n\nvar utils = require(\"../../utils/utils\");\n\nvar helpers = require(\"../../utils/helpers\");\n\nvar DataStore = require(\"./datastore\");\n\nvar isPlaceholderTask = require(\"../../utils/placeholder_task\");\n\nvar _require = require(\"../../utils/helpers\"),\n    replaceValidZeroId = _require.replaceValidZeroId; // TODO: remove workaround for mixup with es5 and ts imports\n\n\nif (DataStore[\"default\"]) {\n  DataStore = DataStore[\"default\"];\n}\n\nvar TreeDataStore = function TreeDataStore(config) {\n  DataStore.apply(this, [config]);\n  this._branches = {};\n  this.pull = {}; //GS-761 Update existing item instead of adding it to the new position\n\n  this.$initItem = function (item) {\n    var loadedItem = item;\n\n    if (config.initItem) {\n      loadedItem = config.initItem(loadedItem);\n    }\n\n    var existingItem = this.getItem(item.id);\n\n    if (existingItem && existingItem.parent != loadedItem.parent) {\n      this.move(loadedItem.id, loadedItem.$index || -1, loadedItem.parent || this._ganttConfig.root_id);\n    }\n\n    return loadedItem;\n  };\n\n  this.$parentProperty = config.parentProperty || \"parent\";\n\n  if (typeof config.rootId !== \"function\") {\n    this.$getRootId = function (val) {\n      return function () {\n        return val;\n      };\n    }(config.rootId || 0);\n  } else {\n    this.$getRootId = config.rootId;\n  } // TODO: replace with live reference to gantt config\n\n\n  this.$openInitially = config.openInitially;\n  this.visibleOrder = powerArray.$create();\n  this.fullOrder = powerArray.$create();\n  this._searchVisibleOrder = {};\n  this._indexRangeCache = {};\n  this._eachItemMainRangeCache = null;\n  this._getItemsCache = null;\n  this._skip_refresh = false;\n  this._ganttConfig = null;\n\n  if (config.getConfig) {\n    this._ganttConfig = config.getConfig();\n  }\n\n  var splitParents = {};\n  var splitItems = {};\n  var taskOpenState = {};\n  var taskVisibility = {};\n  var haveSplitItems = false;\n\n  this._attachDataChange(function () {\n    this._indexRangeCache = {};\n    this._eachItemMainRangeCache = null;\n    this._getItemsCache = null;\n    return true;\n  });\n\n  this.attachEvent(\"onPreFilter\", function () {\n    this._indexRangeCache = {};\n    this._eachItemMainRangeCache = null;\n    splitParents = {};\n    splitItems = {};\n    taskOpenState = {};\n    taskVisibility = {};\n    haveSplitItems = false;\n    this.eachItem(function (item) {\n      var parent = this.getParent(item.id);\n\n      if (item.$open && taskOpenState[parent] !== false) {\n        taskOpenState[item.id] = true;\n      } else {\n        taskOpenState[item.id] = false;\n      }\n\n      if (this._isSplitItem(item)) {\n        haveSplitItems = true;\n        splitParents[item.id] = true;\n        splitItems[item.id] = true;\n      }\n\n      if (haveSplitItems && splitItems[parent]) {\n        splitItems[item.id] = true;\n      }\n\n      if (taskOpenState[parent] || taskOpenState[parent] === undefined) {\n        taskVisibility[item.id] = true;\n      } else {\n        taskVisibility[item.id] = false;\n      }\n    });\n  });\n  this.attachEvent(\"onFilterItem\", function (id, item) {\n    var canOpenSplitTasks = false;\n\n    if (this._ganttConfig) {\n      var canOpenSplitTasks = this._ganttConfig.open_split_tasks;\n    }\n\n    var open = taskVisibility[item.id];\n\n    if (haveSplitItems) {\n      if (open && splitItems[item.id] && !splitParents[item.id]) {\n        open = !!canOpenSplitTasks;\n      }\n\n      if (splitItems[item.id] && !splitParents[item.id]) {\n        item.$split_subtask = true;\n      }\n    }\n\n    item.$expanded_branch = !!taskVisibility[item.id];\n    return !!open;\n  });\n  this.attachEvent(\"onFilter\", function () {\n    splitParents = {};\n    splitItems = {};\n    taskOpenState = {};\n    taskVisibility = {};\n  });\n  return this;\n};\n\nTreeDataStore.prototype = utils.mixin({\n  _buildTree: function _buildTree(data) {\n    var item = null;\n    var rootId = this.$getRootId();\n\n    for (var i = 0, len = data.length; i < len; i++) {\n      item = data[i];\n      this.setParent(item, replaceValidZeroId(this.getParent(item), rootId) || rootId);\n    } // calculating $level for each item\n\n\n    for (var i = 0, len = data.length; i < len; i++) {\n      item = data[i];\n\n      this._add_branch(item);\n\n      item.$level = this.calculateItemLevel(item);\n      item.$local_index = this.getBranchIndex(item.id);\n\n      if (!utils.defined(item.$open)) {\n        item.$open = utils.defined(item.open) ? item.open : this.$openInitially();\n      }\n    }\n\n    this._updateOrder();\n  },\n  _isSplitItem: function _isSplitItem(item) {\n    return item.render == \"split\" && this.hasChild(item.id);\n  },\n  parse: function parse(data) {\n    if (!this._skip_refresh) {\n      this.callEvent(\"onBeforeParse\", [data]);\n    }\n\n    var loaded = this._parseInner(data);\n\n    this._buildTree(loaded);\n\n    this.filter();\n\n    if (!this._skip_refresh) {\n      this.callEvent(\"onParse\", [loaded]);\n    }\n  },\n  _addItemInner: function _addItemInner(item, index) {\n    var parent = this.getParent(item);\n\n    if (!utils.defined(parent)) {\n      parent = this.$getRootId();\n      this.setParent(item, parent);\n    }\n\n    var parentIndex = this.getIndexById(parent);\n    var targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\n\n    if (targetIndex * 1 !== targetIndex) {\n      targetIndex = undefined;\n    }\n\n    DataStore.prototype._addItemInner.call(this, item, targetIndex);\n\n    this.setParent(item, parent);\n\n    if (item.hasOwnProperty(\"$rendered_parent\")) {\n      this._move_branch(item, item.$rendered_parent);\n    }\n\n    this._add_branch(item, index);\n  },\n  _changeIdInner: function _changeIdInner(oldId, newId) {\n    var children = this.getChildren(oldId);\n    var visibleOrder = this._searchVisibleOrder[oldId];\n\n    DataStore.prototype._changeIdInner.call(this, oldId, newId);\n\n    var parent = this.getParent(newId);\n\n    this._replace_branch_child(parent, oldId, newId);\n\n    if (this._branches[oldId]) {\n      this._branches[newId] = this._branches[oldId];\n    }\n\n    for (var i = 0; i < children.length; i++) {\n      var child = this.getItem(children[i]);\n      child[this.$parentProperty] = newId;\n      child.$rendered_parent = newId;\n    }\n\n    this._searchVisibleOrder[newId] = visibleOrder;\n    delete this._branches[oldId];\n  },\n  _traverseBranches: function _traverseBranches(code, parent) {\n    if (!utils.defined(parent)) {\n      parent = this.$getRootId();\n    }\n\n    var branch = this._branches[parent];\n\n    if (branch) {\n      for (var i = 0; i < branch.length; i++) {\n        var itemId = branch[i];\n        code.call(this, itemId);\n        if (this._branches[itemId]) this._traverseBranches(code, itemId);\n      }\n    }\n  },\n  _updateOrder: function _updateOrder(code) {\n    this.fullOrder = powerArray.$create();\n\n    this._traverseBranches(function (taskId) {\n      this.fullOrder.push(taskId);\n    });\n\n    if (code) DataStore.prototype._updateOrder.call(this, code);\n  },\n  _removeItemInner: function _removeItemInner(id) {\n    var items = [];\n    this.eachItem(function (child) {\n      items.push(child);\n    }, id);\n    items.push(this.getItem(id));\n\n    for (var i = 0; i < items.length; i++) {\n      this._move_branch(items[i], this.getParent(items[i]), null);\n\n      DataStore.prototype._removeItemInner.call(this, items[i].id);\n\n      this._move_branch(items[i], this.getParent(items[i]), null);\n    }\n  },\n  move: function move(sid, tindex, parent) {\n    //target id as 4th parameter\n    var id = arguments[3];\n    var config = this._ganttConfig || {};\n    var root_id = config.root_id || 0;\n    id = replaceValidZeroId(id, root_id);\n\n    if (id) {\n      if (id === sid) return;\n      parent = this.getParent(id);\n      tindex = this.getBranchIndex(id);\n    }\n\n    if (sid == parent) {\n      return;\n    }\n\n    if (!utils.defined(parent)) {\n      parent = this.$getRootId();\n    }\n\n    var source = this.getItem(sid);\n    var source_pid = this.getParent(source.id);\n    var tbranch = this.getChildren(parent);\n    if (tindex == -1) tindex = tbranch.length + 1;\n\n    if (source_pid == parent) {\n      var sindex = this.getBranchIndex(sid);\n      if (sindex == tindex) return;\n    }\n\n    if (this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false) return false;\n    var placeholderIds = [];\n\n    for (var i = 0; i < tbranch.length; i++) {\n      if (isPlaceholderTask(tbranch[i], null, this, this._ganttConfig)) {\n        placeholderIds.push(tbranch[i]);\n        tbranch.splice(i, 1);\n        i--;\n      }\n    }\n\n    this._replace_branch_child(source_pid, sid);\n\n    tbranch = this.getChildren(parent);\n    var tid = tbranch[tindex];\n    tid = replaceValidZeroId(tid, root_id);\n    if (!tid) //adding as last element\n      tbranch.push(sid);else tbranch = tbranch.slice(0, tindex).concat([sid]).concat(tbranch.slice(tindex));\n\n    if (placeholderIds.length) {\n      tbranch = tbranch.concat(placeholderIds);\n    }\n\n    this.setParent(source, parent);\n    this._branches[parent] = tbranch;\n    var diff = this.calculateItemLevel(source) - source.$level;\n    source.$level += diff;\n    this.eachItem(function (item) {\n      item.$level += diff;\n    }, source.id, this);\n\n    this._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\n\n    this.callEvent(\"onAfterItemMove\", [sid, parent, tindex]);\n    this.refresh();\n  },\n  getBranchIndex: function getBranchIndex(id) {\n    var branch = this.getChildren(this.getParent(id));\n    var index = branch.indexOf(id + \"\");\n\n    if (index == -1) {\n      index = branch.indexOf(+id);\n    }\n\n    return index;\n  },\n  hasChild: function hasChild(id) {\n    var branch = this._branches[id];\n    return branch && branch.length;\n  },\n  getChildren: function getChildren(id) {\n    var branch = this._branches[id];\n    return branch ? branch : powerArray.$create();\n  },\n  isChildOf: function isChildOf(childId, parentId) {\n    if (!this.exists(childId)) return false;\n    if (parentId === this.$getRootId()) return true;\n    if (!this.hasChild(parentId)) return false;\n    var item = this.getItem(childId);\n    var pid = this.getParent(childId);\n    var parent = this.getItem(parentId);\n\n    if (parent.$level >= item.$level) {\n      return false;\n    }\n\n    while (item && this.exists(pid)) {\n      item = this.getItem(pid);\n      if (item && item.id == parentId) return true;\n      pid = this.getParent(item);\n    }\n\n    return false;\n  },\n  getSiblings: function getSiblings(id) {\n    if (!this.exists(id)) {\n      return powerArray.$create();\n    }\n\n    var parent = this.getParent(id);\n    return this.getChildren(parent);\n  },\n  getNextSibling: function getNextSibling(id) {\n    var siblings = this.getSiblings(id);\n\n    for (var i = 0, len = siblings.length; i < len; i++) {\n      if (siblings[i] == id) {\n        var nextSibling = siblings[i + 1];\n\n        if (nextSibling === 0 && i > 0) {\n          nextSibling = \"0\";\n        }\n\n        return nextSibling || null;\n      }\n    }\n\n    return null;\n  },\n  getPrevSibling: function getPrevSibling(id) {\n    var siblings = this.getSiblings(id);\n\n    for (var i = 0, len = siblings.length; i < len; i++) {\n      if (siblings[i] == id) {\n        var previousSibling = siblings[i - 1];\n\n        if (previousSibling === 0 && i > 0) {\n          previousSibling = \"0\";\n        }\n\n        return previousSibling || null;\n      }\n    }\n\n    return null;\n  },\n  getParent: function getParent(id) {\n    var item = null;\n\n    if (id.id !== undefined) {\n      item = id;\n    } else {\n      item = this.getItem(id);\n    }\n\n    var parent;\n\n    if (item) {\n      parent = item[this.$parentProperty];\n    } else {\n      parent = this.$getRootId();\n    }\n\n    return parent;\n  },\n  clearAll: function clearAll() {\n    this._branches = {};\n    DataStore.prototype.clearAll.call(this);\n  },\n  calculateItemLevel: function calculateItemLevel(item) {\n    var level = 0;\n    this.eachParent(function () {\n      level++;\n    }, item);\n    return level;\n  },\n  _setParentInner: function _setParentInner(item, new_pid, silent) {\n    if (!silent) {\n      if (item.hasOwnProperty(\"$rendered_parent\")) {\n        this._move_branch(item, item.$rendered_parent, new_pid);\n      } else {\n        this._move_branch(item, item[this.$parentProperty], new_pid);\n      }\n    }\n  },\n  setParent: function setParent(item, new_pid, silent) {\n    this._setParentInner(item, new_pid, silent);\n\n    item[this.$parentProperty] = new_pid;\n  },\n  _eachItemCached: function _eachItemCached(code, cache) {\n    for (var i = 0, len = cache.length; i < len; i++) {\n      code.call(this, cache[i]);\n    }\n  },\n  _eachItemIterate: function _eachItemIterate(code, startId, cache) {\n    var itemsStack = this.getChildren(startId);\n\n    if (itemsStack.length) {\n      itemsStack = itemsStack.slice().reverse();\n    }\n\n    while (itemsStack.length) {\n      var itemId = itemsStack.pop();\n      var item = this.getItem(itemId);\n      code.call(this, item);\n\n      if (cache) {\n        cache.push(item);\n      }\n\n      if (this.hasChild(item.id)) {\n        var children = this.getChildren(item.id);\n        var len = children.length;\n\n        for (var i = len - 1; i >= 0; i--) {\n          itemsStack.push(children[i]);\n        }\n      }\n    }\n  },\n  eachItem: function eachItem(code, parent) {\n    var rootId = this.$getRootId();\n\n    if (!utils.defined(parent)) {\n      parent = rootId;\n    }\n\n    var startId = replaceValidZeroId(parent, rootId) || rootId;\n    var useCache = false;\n    var buildCache = false;\n    var cache = null;\n\n    if (startId === rootId) {\n      if (this._eachItemMainRangeCache) {\n        useCache = true;\n        cache = this._eachItemMainRangeCache;\n      } else {\n        buildCache = true;\n        cache = this._eachItemMainRangeCache = [];\n      }\n    }\n\n    if (useCache) {\n      this._eachItemCached(code, cache);\n    } else {\n      this._eachItemIterate(code, startId, buildCache ? cache : null);\n    }\n  },\n  eachParent: function eachParent(code, startItem) {\n    var parentsHash = {};\n    var item = startItem;\n    var parent = this.getParent(item);\n\n    while (this.exists(parent)) {\n      if (parentsHash[parent]) {\n        throw new Error(\"Invalid tasks tree. Cyclic reference has been detected on task \" + parent);\n      }\n\n      parentsHash[parent] = true;\n      item = this.getItem(parent);\n      code.call(this, item);\n      parent = this.getParent(item);\n    }\n  },\n  _add_branch: function _add_branch(item, index, parent) {\n    var pid = parent === undefined ? this.getParent(item) : parent;\n    if (!this.hasChild(pid)) this._branches[pid] = powerArray.$create();\n    var branch = this.getChildren(pid);\n    var added_already = branch.indexOf(item.id + \"\") > -1 || branch.indexOf(+item.id) > -1;\n\n    if (!added_already) {\n      if (index * 1 == index) {\n        branch.splice(index, 0, item.id);\n      } else {\n        branch.push(item.id);\n      }\n\n      item.$rendered_parent = pid;\n    }\n  },\n  _move_branch: function _move_branch(item, old_parent, new_parent) {\n    this._eachItemMainRangeCache = null; //this.setParent(item, new_parent);\n    //this._sync_parent(task);\n\n    this._replace_branch_child(old_parent, item.id);\n\n    if (this.exists(new_parent) || new_parent == this.$getRootId()) {\n      this._add_branch(item, undefined, new_parent);\n    } else {\n      delete this._branches[item.id];\n    }\n\n    item.$level = this.calculateItemLevel(item);\n    this.eachItem(function (child) {\n      child.$level = this.calculateItemLevel(child);\n    }, item.id);\n  },\n  _replace_branch_child: function _replace_branch_child(node, old_id, new_id) {\n    var branch = this.getChildren(node);\n\n    if (branch && node !== undefined) {\n      var newbranch = powerArray.$create();\n      var index = branch.indexOf(old_id + \"\");\n\n      if (index == -1 && !isNaN(+old_id)) {\n        index = branch.indexOf(+old_id);\n      }\n\n      if (index > -1) {\n        if (new_id) {\n          branch.splice(index, 1, new_id);\n        } else {\n          branch.splice(index, 1);\n        }\n      }\n\n      newbranch = branch;\n      this._branches[node] = newbranch;\n    }\n  },\n  sort: function sort(field, desc, parent) {\n    if (!this.exists(parent)) {\n      parent = this.$getRootId();\n    }\n\n    if (!field) field = \"order\";\n    var criteria = typeof field == \"string\" ? function (a, b) {\n      if (a[field] == b[field] || helpers.isDate(a[field]) && helpers.isDate(b[field]) && a[field].valueOf() == b[field].valueOf()) {\n        return 0;\n      }\n\n      var result = a[field] > b[field];\n      return result ? 1 : -1;\n    } : field;\n\n    if (desc) {\n      var original_criteria = criteria;\n\n      criteria = function criteria(a, b) {\n        return original_criteria(b, a);\n      };\n    }\n\n    var els = this.getChildren(parent);\n\n    if (els) {\n      var temp = [];\n\n      for (var i = els.length - 1; i >= 0; i--) {\n        temp[i] = this.getItem(els[i]);\n      }\n\n      temp.sort(criteria);\n\n      for (var i = 0; i < temp.length; i++) {\n        els[i] = temp[i].id;\n        this.sort(field, desc, els[i]);\n      }\n    }\n  },\n  filter: function filter(rule) {\n    for (var i in this.pull) {\n      var renderedParent = this.pull[i].$rendered_parent;\n      var actualParent = this.getParent(this.pull[i]);\n\n      if (renderedParent !== actualParent) {\n        this._move_branch(this.pull[i], renderedParent, actualParent);\n      }\n    }\n\n    return DataStore.prototype.filter.apply(this, arguments);\n  },\n  open: function open(id) {\n    if (this.exists(id)) {\n      this.getItem(id).$open = true; // GS-2170. Do not recalculate the indexes and dates as they will be recalculated later\n\n      this._skipTaskRecalculation = true;\n      this.callEvent(\"onItemOpen\", [id]);\n    }\n  },\n  close: function close(id) {\n    if (this.exists(id)) {\n      this.getItem(id).$open = false; // GS-2170. Do not recalculate the indexes and dates as they will be recalculated later\n\n      this._skipTaskRecalculation = true;\n      this.callEvent(\"onItemClose\", [id]);\n    }\n  },\n  destructor: function destructor() {\n    DataStore.prototype.destructor.call(this);\n    this._branches = null;\n    this._indexRangeCache = {};\n    this._eachItemMainRangeCache = null;\n  }\n}, DataStore.prototype);\nmodule.exports = TreeDataStore;","var utils = require(\"../../utils/utils\");\n\nvar $powerArray = {\n  $create: function $create(array) {\n    return utils.mixin(array || [], this);\n  },\n  //remove element at specified position\n  $removeAt: function $removeAt(pos, len) {\n    if (pos >= 0) this.splice(pos, len || 1);\n  },\n  //find element in collection and remove it\n  $remove: function $remove(value) {\n    this.$removeAt(this.$find(value));\n  },\n  //add element to collection at specific position\n  $insertAt: function $insertAt(data, pos) {\n    if (!pos && pos !== 0) //add to the end by default\n      this.push(data);else {\n      var b = this.splice(pos, this.length - pos);\n      this[pos] = data;\n      this.push.apply(this, b); //reconstruct array without loosing this pointer\n    }\n  },\n  //return index of element, -1 if it doesn't exists\n  $find: function $find(data) {\n    for (var i = 0; i < this.length; i++) {\n      if (data == this[i]) return i;\n    }\n\n    return -1;\n  },\n  //execute some method for each element of array\n  $each: function $each(functor, master) {\n    for (var i = 0; i < this.length; i++) {\n      functor.call(master || this, this[i]);\n    }\n  },\n  //create new array from source, by using results of functor\n  $map: function $map(functor, master) {\n    for (var i = 0; i < this.length; i++) {\n      this[i] = functor.call(master || this, this[i]);\n    }\n\n    return this;\n  },\n  $filter: function $filter(functor, master) {\n    for (var i = 0; i < this.length; i++) {\n      if (!functor.call(master || this, this[i])) {\n        this.splice(i, 1);\n        i--;\n      }\n    }\n\n    return this;\n  }\n};\nmodule.exports = $powerArray;","var powerArray = require(\"./power_array\");\n\nvar utils = require(\"../../utils/utils\");\n\nvar eventable = require(\"../../utils/eventable\");\n\nvar isPlaceholderTask = require(\"../../utils/placeholder_task\");\n\nvar DataStore = function DataStore(config) {\n  this.pull = {};\n  this.$initItem = config.initItem;\n  this.visibleOrder = powerArray.$create();\n  this.fullOrder = powerArray.$create();\n  this._skip_refresh = false;\n  this._filterRule = null;\n  this._searchVisibleOrder = {};\n  this._indexRangeCache = {};\n  this._getItemsCache = null;\n  this.$config = config;\n  eventable(this);\n\n  this._attachDataChange(function () {\n    this._indexRangeCache = {};\n    this._getItemsCache = null;\n    return true;\n  });\n\n  return this;\n};\n\nDataStore.prototype = {\n  _attachDataChange: function _attachDataChange(callback) {\n    this.attachEvent(\"onClearAll\", callback);\n    this.attachEvent(\"onBeforeParse\", callback);\n    this.attachEvent(\"onBeforeUpdate\", callback);\n    this.attachEvent(\"onBeforeDelete\", callback);\n    this.attachEvent(\"onBeforeAdd\", callback);\n    this.attachEvent(\"onParse\", callback);\n    this.attachEvent(\"onBeforeFilter\", callback);\n  },\n  _parseInner: function _parseInner(data) {\n    var item = null,\n        loaded = [];\n\n    for (var i = 0, len = data.length; i < len; i++) {\n      item = data[i];\n\n      if (this.$initItem) {\n        if (this.$config.copyOnParse()) {\n          item = utils.copy(item);\n        }\n\n        item = this.$initItem(item);\n      }\n\n      if (this.callEvent(\"onItemLoading\", [item])) {\n        if (!this.pull.hasOwnProperty(item.id)) {\n          this.fullOrder.push(item.id);\n        }\n\n        loaded.push(item);\n        this.pull[item.id] = item;\n      }\n    }\n\n    return loaded;\n  },\n  parse: function parse(data) {\n    if (!this.isSilent()) {\n      this.callEvent(\"onBeforeParse\", [data]);\n    }\n\n    var loaded = this._parseInner(data);\n\n    if (!this.isSilent()) {\n      this.refresh();\n      this.callEvent(\"onParse\", [loaded]);\n    }\n  },\n  getItem: function getItem(id) {\n    return this.pull[id];\n  },\n  _updateOrder: function _updateOrder(code) {\n    code.call(this.visibleOrder);\n    code.call(this.fullOrder);\n  },\n  updateItem: function updateItem(id, item) {\n    if (!utils.defined(item)) item = this.getItem(id);\n\n    if (!this.isSilent()) {\n      if (this.callEvent(\"onBeforeUpdate\", [item.id, item]) === false) return false;\n    } // This is how it worked before updating the properties:\n    // this.pull[id]=item;\n\n\n    utils.mixin(this.pull[id], item, true);\n\n    if (!this.isSilent()) {\n      this.callEvent(\"onAfterUpdate\", [item.id, item]);\n      this.callEvent(\"onStoreUpdated\", [item.id, item, \"update\"]);\n    }\n  },\n  _removeItemInner: function _removeItemInner(id) {\n    //clear from collections\n    //this.visibleOrder.$remove(id);\n    this._updateOrder(function () {\n      this.$remove(id);\n    });\n\n    delete this.pull[id];\n  },\n  removeItem: function removeItem(id) {\n    //utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\n    var obj = this.getItem(id); //save for later event\n\n    if (!this.isSilent()) {\n      if (this.callEvent(\"onBeforeDelete\", [obj.id, obj]) === false) return false;\n    }\n\n    this.callEvent(\"onAfterDeleteConfirmed\", [obj.id, obj]);\n\n    this._removeItemInner(id);\n\n    if (!this.isSilent()) {\n      this.filter();\n      this.callEvent(\"onAfterDelete\", [obj.id, obj]); //repaint signal\n\n      this.callEvent(\"onStoreUpdated\", [obj.id, obj, \"delete\"]);\n    }\n  },\n  _addItemInner: function _addItemInner(item, index) {\n    //in case of treetable order is sent as 3rd parameter\n    //var order = index;\n    if (this.exists(item.id)) {\n      this.silent(function () {\n        this.updateItem(item.id, item);\n      });\n    } else {\n      var order = this.visibleOrder; //by default item is added to the end of the list\n\n      var data_size = order.length;\n      if (!utils.defined(index) || index < 0) index = data_size; //check to prevent too big indexes\n\n      if (index > data_size) {\n        //dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\n        index = Math.min(order.length, index);\n      }\n    } //gantt.assert(!this.exists(id), \"Not unique ID\");\n\n\n    this.pull[item.id] = item;\n\n    if (!this.isSilent()) {\n      this._updateOrder(function () {\n        if (this.$find(item.id) === -1) this.$insertAt(item.id, index);\n      });\n    }\n\n    this.filter(); //order.$insertAt(item.id,index);\n  },\n  isVisible: function isVisible(id) {\n    return this.visibleOrder.$find(id) > -1;\n  },\n  getVisibleItems: function getVisibleItems() {\n    return this.getIndexRange();\n  },\n  addItem: function addItem(item, index) {\n    if (!utils.defined(item.id)) item.id = utils.uid();\n\n    if (this.$initItem) {\n      item = this.$initItem(item);\n    }\n\n    if (!this.isSilent()) {\n      if (this.callEvent(\"onBeforeAdd\", [item.id, item]) === false) return false;\n    }\n\n    this._addItemInner(item, index);\n\n    if (!this.isSilent()) {\n      this.callEvent(\"onAfterAdd\", [item.id, item]); //repaint signal\n\n      this.callEvent(\"onStoreUpdated\", [item.id, item, \"add\"]);\n    }\n\n    return item.id;\n  },\n  _changeIdInner: function _changeIdInner(oldId, newId) {\n    if (this.pull[oldId]) this.pull[newId] = this.pull[oldId];\n    var visibleOrder = this._searchVisibleOrder[oldId];\n    this.pull[newId].id = newId;\n\n    this._updateOrder(function () {\n      this[this.$find(oldId)] = newId;\n    });\n\n    this._searchVisibleOrder[newId] = visibleOrder;\n    delete this._searchVisibleOrder[oldId]; //this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\n\n    delete this.pull[oldId];\n  },\n  changeId: function changeId(oldId, newId) {\n    this._changeIdInner(oldId, newId);\n\n    this.callEvent(\"onIdChange\", [oldId, newId]);\n  },\n  exists: function exists(id) {\n    return !!this.pull[id];\n  },\n  _moveInner: function _moveInner(sindex, tindex) {\n    var id = this.getIdByIndex(sindex);\n\n    this._updateOrder(function () {\n      this.$removeAt(sindex);\n      this.$insertAt(id, Math.min(this.length, tindex));\n    }); //this.visibleOrder.$removeAt(sindex);\t//remove at old position\n    //if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\n    //this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\n\n  },\n  move: function move(sindex, tindex) {\n    //gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\n    var id = this.getIdByIndex(sindex);\n    var obj = this.getItem(id);\n\n    this._moveInner(sindex, tindex);\n\n    if (!this.isSilent()) {\n      //repaint signal\n      this.callEvent(\"onStoreUpdated\", [obj.id, obj, \"move\"]);\n    }\n  },\n  clearAll: function clearAll() {\n    if (this.$destroyed) {\n      return;\n    } // GS-956 We need to unselect the resource as its ID is cached\n\n\n    this.silent(function () {\n      this.unselect();\n    });\n    this.pull = {};\n    this.visibleOrder = powerArray.$create();\n    this.fullOrder = powerArray.$create();\n    if (this.isSilent()) return;\n    this.callEvent(\"onClearAll\", []);\n    this.refresh();\n  },\n  silent: function silent(code, master) {\n    var alreadySilent = false;\n\n    if (this.isSilent()) {\n      alreadySilent = true;\n    }\n\n    this._skip_refresh = true;\n    code.call(master || this);\n\n    if (!alreadySilent) {\n      this._skip_refresh = false;\n    }\n  },\n  isSilent: function isSilent() {\n    return !!this._skip_refresh;\n  },\n  arraysEqual: function arraysEqual(arr1, arr2) {\n    if (arr1.length !== arr2.length) return false;\n\n    for (var i = 0; i < arr1.length; i++) {\n      if (arr1[i] !== arr2[i]) return false;\n    }\n\n    return true;\n  },\n  refresh: function refresh(id, quick) {\n    if (this.isSilent()) return;\n    var item;\n\n    if (id) {\n      item = this.getItem(id);\n    }\n\n    var args;\n\n    if (id) {\n      args = [id, item, \"paint\"];\n    } else {\n      args = [null, null, null];\n    }\n\n    if (this.callEvent(\"onBeforeStoreUpdate\", args) === false) {\n      return;\n    }\n\n    var skipFilter = this._quick_refresh && !this._mark_recompute;\n    this._mark_recompute = false;\n\n    if (id) {\n      // if item changes visible order (e.g. expand-collapse branch) - do a complete repaint\n      if (!quick && !skipFilter) {\n        var oldOrder = this.visibleOrder;\n        this.filter();\n\n        if (!this.arraysEqual(oldOrder, this.visibleOrder)) {\n          id = undefined;\n        }\n      }\n    } else if (!skipFilter) {\n      this.filter();\n    }\n\n    if (id) {\n      args = [id, item, \"paint\"];\n    } else {\n      args = [null, null, null];\n    }\n\n    this.callEvent(\"onStoreUpdated\", args);\n  },\n  count: function count() {\n    return this.fullOrder.length;\n  },\n  countVisible: function countVisible() {\n    return this.visibleOrder.length;\n  },\n  sort: function sort(_sort) {},\n  serialize: function serialize() {},\n  eachItem: function eachItem(code) {\n    for (var i = 0; i < this.fullOrder.length; i++) {\n      var item = this.getItem(this.fullOrder[i]);\n      code.call(this, item);\n    }\n  },\n  find: function find(filter) {\n    var result = [];\n    this.eachItem(function (item) {\n      if (filter(item)) {\n        result.push(item);\n      }\n    });\n    return result;\n  },\n  filter: function filter(rule) {\n    if (!this.isSilent()) {\n      this.callEvent(\"onBeforeFilter\", []);\n    }\n\n    this.callEvent(\"onPreFilter\", []);\n    var filteredOrder = powerArray.$create();\n    var placeholderIds = [];\n    this.eachItem(function (item) {\n      if (this.callEvent(\"onFilterItem\", [item.id, item])) {\n        if (isPlaceholderTask(item.id, null, this, this._ganttConfig)) {\n          placeholderIds.push(item.id);\n        } else {\n          filteredOrder.push(item.id);\n        }\n      }\n    });\n\n    for (var i = 0; i < placeholderIds.length; i++) {\n      filteredOrder.push(placeholderIds[i]);\n    }\n\n    this.visibleOrder = filteredOrder;\n    this._searchVisibleOrder = {};\n\n    for (var i = 0; i < this.visibleOrder.length; i++) {\n      this._searchVisibleOrder[this.visibleOrder[i]] = i;\n    }\n\n    if (!this.isSilent()) {\n      this.callEvent(\"onFilter\", []);\n    }\n  },\n  getIndexRange: function getIndexRange(from, to) {\n    var max = Math.min(to || Infinity, this.countVisible() - 1);\n    var min = from || 0;\n    var cacheKey = min + '-' + max;\n\n    if (this._indexRangeCache[cacheKey]) {\n      return this._indexRangeCache[cacheKey].slice();\n    }\n\n    var ret = [];\n\n    for (var i = min; i <= max; i++) {\n      ret.push(this.getItem(this.visibleOrder[i]));\n    }\n\n    this._indexRangeCache[cacheKey] = ret.slice();\n    return ret;\n  },\n  getItems: function getItems() {\n    if (this._getItemsCache) {\n      return this._getItemsCache.slice();\n    }\n\n    var res = [];\n\n    for (var i in this.pull) {\n      res.push(this.pull[i]);\n    }\n\n    this._getItemsCache = res.slice();\n    return res;\n  },\n  getIdByIndex: function getIdByIndex(index) {\n    return this.visibleOrder[index];\n  },\n  getIndexById: function getIndexById(id) {\n    var res = this._searchVisibleOrder[id];\n\n    if (res === undefined) {\n      res = -1;\n    }\n\n    return res;\n  },\n  _getNullIfUndefined: function _getNullIfUndefined(value) {\n    if (value === undefined) {\n      return null;\n    } else {\n      return value;\n    }\n  },\n  getFirst: function getFirst() {\n    return this._getNullIfUndefined(this.visibleOrder[0]);\n  },\n  getLast: function getLast() {\n    return this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length - 1]);\n  },\n  getNext: function getNext(id) {\n    return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) + 1]);\n  },\n  getPrev: function getPrev(id) {\n    return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) - 1]);\n  },\n  destructor: function destructor() {\n    this.callEvent(\"onDestroy\", []);\n    this.detachAllEvents();\n    this.$destroyed = true;\n    this.pull = null;\n    this.$initItem = null;\n    this.visibleOrder = null;\n    this.fullOrder = null;\n    this._skip_refresh = null;\n    this._filterRule = null;\n    this._searchVisibleOrder = null;\n    this._indexRangeCache = {};\n  }\n};\nmodule.exports = DataStore;","// shim for using process in browser\nvar process = module.exports = {}; // cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n  throw new Error('setTimeout has not been defined');\n}\n\nfunction defaultClearTimeout() {\n  throw new Error('clearTimeout has not been defined');\n}\n\n(function () {\n  try {\n    if (typeof setTimeout === 'function') {\n      cachedSetTimeout = setTimeout;\n    } else {\n      cachedSetTimeout = defaultSetTimout;\n    }\n  } catch (e) {\n    cachedSetTimeout = defaultSetTimout;\n  }\n\n  try {\n    if (typeof clearTimeout === 'function') {\n      cachedClearTimeout = clearTimeout;\n    } else {\n      cachedClearTimeout = defaultClearTimeout;\n    }\n  } catch (e) {\n    cachedClearTimeout = defaultClearTimeout;\n  }\n})();\n\nfunction runTimeout(fun) {\n  if (cachedSetTimeout === setTimeout) {\n    //normal enviroments in sane situations\n    return setTimeout(fun, 0);\n  } // if setTimeout wasn't available but was latter defined\n\n\n  if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n    cachedSetTimeout = setTimeout;\n    return setTimeout(fun, 0);\n  }\n\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedSetTimeout(fun, 0);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n      return cachedSetTimeout.call(null, fun, 0);\n    } catch (e) {\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n      return cachedSetTimeout.call(this, fun, 0);\n    }\n  }\n}\n\nfunction runClearTimeout(marker) {\n  if (cachedClearTimeout === clearTimeout) {\n    //normal enviroments in sane situations\n    return clearTimeout(marker);\n  } // if clearTimeout wasn't available but was latter defined\n\n\n  if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n    cachedClearTimeout = clearTimeout;\n    return clearTimeout(marker);\n  }\n\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedClearTimeout(marker);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n      return cachedClearTimeout.call(null, marker);\n    } catch (e) {\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n      // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n      return cachedClearTimeout.call(this, marker);\n    }\n  }\n}\n\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n  if (!draining || !currentQueue) {\n    return;\n  }\n\n  draining = false;\n\n  if (currentQueue.length) {\n    queue = currentQueue.concat(queue);\n  } else {\n    queueIndex = -1;\n  }\n\n  if (queue.length) {\n    drainQueue();\n  }\n}\n\nfunction drainQueue() {\n  if (draining) {\n    return;\n  }\n\n  var timeout = runTimeout(cleanUpNextTick);\n  draining = true;\n  var len = queue.length;\n\n  while (len) {\n    currentQueue = queue;\n    queue = [];\n\n    while (++queueIndex < len) {\n      if (currentQueue) {\n        currentQueue[queueIndex].run();\n      }\n    }\n\n    queueIndex = -1;\n    len = queue.length;\n  }\n\n  currentQueue = null;\n  draining = false;\n  runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n  var args = new Array(arguments.length - 1);\n\n  if (arguments.length > 1) {\n    for (var i = 1; i < arguments.length; i++) {\n      args[i - 1] = arguments[i];\n    }\n  }\n\n  queue.push(new Item(fun, args));\n\n  if (queue.length === 1 && !draining) {\n    runTimeout(drainQueue);\n  }\n}; // v8 likes predictible objects\n\n\nfunction Item(fun, array) {\n  this.fun = fun;\n  this.array = array;\n}\n\nItem.prototype.run = function () {\n  this.fun.apply(null, this.array);\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\n\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) {\n  return [];\n};\n\nprocess.binding = function (name) {\n  throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () {\n  return '/';\n};\n\nprocess.chdir = function (dir) {\n  throw new Error('process.chdir is not supported');\n};\n\nprocess.umask = function () {\n  return 0;\n};","function checkTimeout(host, updPerSecond) {\n  if (!updPerSecond) return true;\n  if (host._on_timeout) return false;\n  var timeout = Math.ceil(1000 / updPerSecond);\n  if (timeout < 2) return true;\n  setTimeout(function () {\n    delete host._on_timeout;\n  }, timeout);\n  host._on_timeout = true;\n  return true;\n}\n\nmodule.exports = checkTimeout;","var utils = require(\"../../../utils/utils\");\n\nfunction createScope(addEvent, removeEvent) {\n  addEvent = addEvent || utils.event;\n  removeEvent = removeEvent || utils.eventRemove;\n  var handlers = [];\n  var eventScope = {\n    attach: function attach(el, event, callback, capture) {\n      handlers.push({\n        element: el,\n        event: event,\n        callback: callback,\n        capture: capture\n      });\n      addEvent(el, event, callback, capture);\n    },\n    detach: function detach(el, event, callback, capture) {\n      removeEvent(el, event, callback, capture);\n\n      for (var i = 0; i < handlers.length; i++) {\n        var handler = handlers[i];\n\n        if (handler.element === el && handler.event === event && handler.callback === callback && handler.capture === capture) {\n          handlers.splice(i, 1);\n          i--;\n        }\n      }\n    },\n    detachAll: function detachAll() {\n      var staticArray = handlers.slice(); // original handlers array can be spliced on every iteration\n\n      for (var i = 0; i < staticArray.length; i++) {\n        var handler = staticArray[i];\n        eventScope.detach(handler.element, handler.event, handler.callback, handler.capture);\n        eventScope.detach(handler.element, handler.event, handler.callback, undefined);\n        eventScope.detach(handler.element, handler.event, handler.callback, false);\n        eventScope.detach(handler.element, handler.event, handler.callback, true);\n      }\n\n      handlers.splice(0, handlers.length);\n    },\n    extend: function extend() {\n      return createScope(this.event, this.eventRemove);\n    }\n  };\n  return eventScope;\n}\n\nmodule.exports = createScope;","module.exports = function (gantt) {\n  // TODO: why eslint fails on regexp?\n  // eslint-disable-next-line no-control-regex\n  var htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\n  var extraSpaces = new RegExp(\" +\", \"gm\");\n\n  function stripHTMLLite(htmlText) {\n    return (htmlText + \"\").replace(htmlTags, \" \").replace(extraSpaces, \" \");\n  }\n\n  var singleQuotes = new RegExp(\"'\", \"gm\");\n\n  function escapeQuotes(text) {\n    return (text + \"\").replace(singleQuotes, \"&#39;\");\n  }\n\n  gantt._waiAria = {\n    getAttributeString: function getAttributeString(attr) {\n      var attributes = [\" \"];\n\n      for (var i in attr) {\n        var text = escapeQuotes(stripHTMLLite(attr[i]));\n        attributes.push(i + \"='\" + text + \"'\");\n      }\n\n      attributes.push(\" \");\n      return attributes.join(\" \");\n    },\n    getTimelineCellAttr: function getTimelineCellAttr(dateString) {\n      return gantt._waiAria.getAttributeString({\n        \"aria-label\": dateString\n      });\n    },\n    _taskCommonAttr: function _taskCommonAttr(task, div) {\n      if (!(task.start_date && task.end_date)) return;\n      div.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\n\n      if (task.$dataprocessor_class) {\n        div.setAttribute(\"aria-busy\", true);\n      }\n\n      div.setAttribute(\"aria-selected\", gantt.isSelectedTask(task.id) ? \"true\" : \"false\");\n    },\n    setTaskBarAttr: function setTaskBarAttr(task, div) {\n      this._taskCommonAttr(task, div);\n\n      if (!gantt.isReadonly(task) && gantt.config.drag_move) {\n        if (task.id != gantt.getState(\"tasksDnd\").drag_id) {\n          div.setAttribute(\"aria-grabbed\", false);\n        } else {\n          div.setAttribute(\"aria-grabbed\", true);\n        }\n      }\n    },\n    taskRowAttr: function taskRowAttr(task, div) {\n      this._taskCommonAttr(task, div);\n\n      if (!gantt.isReadonly(task) && gantt.config.order_branch) {\n        div.setAttribute(\"aria-grabbed\", false);\n      }\n\n      div.setAttribute(\"role\", \"row\");\n      div.setAttribute(\"aria-level\", task.$level);\n\n      if (gantt.hasChild(task.id)) {\n        div.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\n      }\n    },\n    linkAttr: function linkAttr(link, div) {\n      var linkTypes = gantt.config.links;\n      var toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\n      var fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\n      var content = gantt.locale.labels.link + \" \" + gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\n      div.setAttribute(\"aria-label\", stripHTMLLite(content));\n\n      if (gantt.isReadonly(link)) {\n        div.setAttribute(\"aria-readonly\", true);\n      }\n    },\n    gridSeparatorAttr: function gridSeparatorAttr(div) {\n      div.setAttribute(\"role\", \"separator\");\n    },\n    lightboxHiddenAttr: function lightboxHiddenAttr(div) {\n      div.setAttribute(\"aria-hidden\", \"true\");\n    },\n    lightboxVisibleAttr: function lightboxVisibleAttr(div) {\n      div.setAttribute(\"aria-hidden\", \"false\");\n    },\n    lightboxAttr: function lightboxAttr(div) {\n      div.setAttribute(\"role\", \"dialog\");\n      div.setAttribute(\"aria-hidden\", \"true\");\n      div.firstChild.setAttribute(\"role\", \"heading\");\n    },\n    lightboxButtonAttrString: function lightboxButtonAttrString(buttonName) {\n      return this.getAttributeString({\n        \"role\": \"button\",\n        \"aria-label\": gantt.locale.labels[buttonName],\n        \"tabindex\": \"0\"\n      });\n    },\n    lightboxHeader: function lightboxHeader(div, headerText) {\n      div.setAttribute(\"aria-label\", headerText);\n    },\n    lightboxSelectAttrString: function lightboxSelectAttrString(time_option) {\n      var label = \"\";\n\n      switch (time_option) {\n        case \"%Y\":\n          label = gantt.locale.labels.years;\n          break;\n\n        case \"%m\":\n          label = gantt.locale.labels.months;\n          break;\n\n        case \"%d\":\n          label = gantt.locale.labels.days;\n          break;\n\n        case \"%H:%i\":\n          label = gantt.locale.labels.hours + gantt.locale.labels.minutes;\n          break;\n\n        default:\n          break;\n      }\n\n      return gantt._waiAria.getAttributeString({\n        \"aria-label\": label\n      });\n    },\n    lightboxDurationInputAttrString: function lightboxDurationInputAttrString(section) {\n      return this.getAttributeString({\n        \"aria-label\": gantt.locale.labels.column_duration,\n        \"aria-valuemin\": \"0\"\n      });\n    },\n    gridAttrString: function gridAttrString() {\n      return [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\n    },\n    gridScaleRowAttrString: function gridScaleRowAttrString() {\n      return \"role='row'\";\n    },\n    gridScaleCellAttrString: function gridScaleCellAttrString(column, label) {\n      var attrs = \"\";\n\n      if (column.name == \"add\") {\n        attrs = this.getAttributeString({\n          \"role\": \"button\",\n          \"aria-label\": gantt.locale.labels.new_task\n        });\n      } else {\n        var attributes = {\n          \"role\": \"columnheader\",\n          \"aria-label\": label\n        };\n\n        if (gantt._sort && gantt._sort.name == column.name) {\n          if (gantt._sort.direction == \"asc\") {\n            attributes[\"aria-sort\"] = \"ascending\";\n          } else {\n            attributes[\"aria-sort\"] = \"descending\";\n          }\n        }\n\n        attrs = this.getAttributeString(attributes);\n      }\n\n      return attrs;\n    },\n    gridDataAttrString: function gridDataAttrString() {\n      return \"role='rowgroup'\";\n    },\n    gridCellAttrString: function gridCellAttrString(column, textValue, task) {\n      var attributes = {\n        \"role\": \"gridcell\",\n        \"aria-label\": textValue\n      };\n\n      if (!column.editor || gantt.isReadonly(task)) {\n        attributes[\"aria-readonly\"] = true;\n      }\n\n      return this.getAttributeString(attributes);\n    },\n    gridAddButtonAttrString: function gridAddButtonAttrString(column) {\n      return this.getAttributeString({\n        \"role\": \"button\",\n        \"aria-label\": gantt.locale.labels.new_task\n      });\n    },\n    messageButtonAttrString: function messageButtonAttrString(buttonLabel) {\n      return \"tabindex='0' role='button' aria-label='\" + buttonLabel + \"'\";\n    },\n    messageInfoAttr: function messageInfoAttr(div) {\n      div.setAttribute(\"role\", \"alert\"); //div.setAttribute(\"tabindex\", \"-1\");\n    },\n    messageModalAttr: function messageModalAttr(div, uid) {\n      div.setAttribute(\"role\", \"dialog\");\n\n      if (uid) {\n        div.setAttribute(\"aria-labelledby\", uid);\n      } //\tdiv.setAttribute(\"tabindex\", \"-1\");\n\n    },\n    quickInfoAttr: function quickInfoAttr(div) {\n      div.setAttribute(\"role\", \"dialog\");\n    },\n    quickInfoHeaderAttrString: function quickInfoHeaderAttrString() {\n      return \" role='heading' \";\n    },\n    quickInfoHeader: function quickInfoHeader(div, header) {\n      div.setAttribute(\"aria-label\", header);\n    },\n    quickInfoButtonAttrString: function quickInfoButtonAttrString(label) {\n      return gantt._waiAria.getAttributeString({\n        \"role\": \"button\",\n        \"aria-label\": label,\n        \"tabindex\": \"0\"\n      });\n    },\n    tooltipAttr: function tooltipAttr(div) {\n      div.setAttribute(\"role\", \"tooltip\");\n    },\n    tooltipVisibleAttr: function tooltipVisibleAttr(div) {\n      div.setAttribute(\"aria-hidden\", \"false\");\n    },\n    tooltipHiddenAttr: function tooltipHiddenAttr(div) {\n      div.setAttribute(\"aria-hidden\", \"true\");\n    }\n  };\n\n  function isDisabled() {\n    return !gantt.config.wai_aria_attributes;\n  }\n\n  for (var i in gantt._waiAria) {\n    gantt._waiAria[i] = function (payload) {\n      return function () {\n        if (isDisabled()) {\n          return \"\";\n        }\n\n        return payload.apply(this, arguments);\n      };\n    }(gantt._waiAria[i]);\n  }\n};","module.exports = function (gantt) {\n  gantt._extend_to_optional = function (lightbox_block) {\n    var duration = lightbox_block;\n    var optional_time = {\n      render: duration.render,\n      focus: duration.focus,\n      set_value: function set_value(node, value, task, section) {\n        var mapping = gantt._resolve_default_mapping(section);\n\n        if (!task[mapping.start_date] || mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task)) {\n          optional_time.disable(node, section);\n          var val = {};\n\n          for (var i in mapping) {\n            //take default values from the time control from task start/end dates\n            val[mapping[i]] = task[i];\n          }\n\n          return duration.set_value.call(gantt, node, value, val, section); //set default value\n        } else {\n          optional_time.enable(node, section);\n          return duration.set_value.call(gantt, node, value, task, section);\n        }\n      },\n      get_value: function get_value(node, task, section) {\n        if (section.disabled) {\n          return {\n            start_date: null\n          };\n        } else {\n          return duration.get_value.call(gantt, node, task, section);\n        }\n      },\n      update_block: function update_block(node, section) {\n        gantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\n        node.style.display = section.disabled ? \"none\" : \"block\";\n\n        if (section.button) {\n          var button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\n              labels = gantt.locale.labels;\n          var button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\n          button.innerHTML = button_text;\n        }\n\n        gantt.resizeLightbox();\n      },\n      disable: function disable(node, section) {\n        section.disabled = true;\n        optional_time.update_block(node, section);\n      },\n      enable: function enable(node, section) {\n        section.disabled = false;\n        optional_time.update_block(node, section);\n      },\n      button_click: function button_click(index, el, section, container) {\n        if (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\n          return;\n        }\n\n        var config = gantt._get_typed_lightbox_config()[index];\n\n        if (config.disabled) {\n          optional_time.enable(container, config);\n        } else {\n          optional_time.disable(container, config);\n        }\n      }\n    };\n    return optional_time;\n  };\n\n  gantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\n  gantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\n};","var __extends = require(\"../../../../utils/extends\");\n\nmodule.exports = function (gantt) {\n  var _super = require(\"./select_control\")(gantt);\n\n  function TypeselectControl() {\n    var self = _super.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(TypeselectControl, _super);\n\n  TypeselectControl.prototype.render = function (sns) {\n    var types = gantt.config.types,\n        locale = gantt.locale.labels,\n        options = [];\n\n    var filter = sns.filter || function (typeKey, typeValue) {\n      if (!types.placeholder || typeValue !== types.placeholder) {\n        return true;\n      }\n\n      return false;\n    };\n\n    for (var i in types) {\n      if (!filter(i, types[i]) === false) {\n        options.push({\n          key: types[i],\n          label: locale[\"type_\" + i]\n        });\n      }\n    }\n\n    sns.options = options;\n    var oldOnChange = sns.onchange;\n\n    sns.onchange = function () {\n      gantt.changeLightboxType(this.value);\n\n      if (this.value === gantt.config.types.task) {\n        gantt._lightbox_new_type = \"task\";\n      }\n\n      if (typeof oldOnChange == 'function') {\n        oldOnChange.apply(this, arguments);\n      }\n    };\n\n    return _super.prototype.render.apply(this, arguments);\n  };\n\n  return TypeselectControl;\n};","var __extends = require(\"../../../../utils/extends\");\n\nvar htmlHelpers = require(\"../../utils/html_helpers\");\n\nmodule.exports = function (gantt) {\n  var _super = require(\"./base_control\")(gantt);\n\n  function ConstraintControl() {\n    var self = _super.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(ConstraintControl, _super);\n\n  function isNonTimedConstraint(value) {\n    if (!value || value === gantt.config.constraint_types.ASAP || value === gantt.config.constraint_types.ALAP) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  function toggleTimeSelect(timeSelects, typeValue) {\n    var isNonTimed = isNonTimedConstraint(typeValue);\n\n    for (var i = 0; i < timeSelects.length; i++) {\n      timeSelects[i].disabled = isNonTimed;\n    }\n  }\n\n  ConstraintControl.prototype.render = function (sns) {\n    var height = (sns.height || 30) + \"px\";\n    var html = \"<div class='gantt_cal_ltext gantt_section_\" + sns.name + \"' style='height:\" + height + \";'>\";\n    var options = [];\n\n    for (var i in gantt.config.constraint_types) {\n      options.push({\n        key: gantt.config.constraint_types[i],\n        label: gantt.locale.labels[gantt.config.constraint_types[i]]\n      });\n    }\n\n    sns.options = sns.options || options;\n    html += \"<span data-constraint-type-select>\" + htmlHelpers.getHtmlSelect(sns.options, [{\n      key: \"data-type\",\n      value: \"constraint-type\"\n    }]) + \"</span>\";\n    var timeLabel = gantt.locale.labels[\"constraint_date\"] || \"Constraint date\";\n    html += \"<label data-constraint-time-select>\" + timeLabel + \": \" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</label>\";\n    html += \"</div>\";\n    return html;\n  };\n\n  ConstraintControl.prototype.set_value = function (node, value, task, config) {\n    var typeSelect = node.querySelector(\"[data-constraint-type-select] select\");\n    var timeSelects = node.querySelectorAll(\"[data-constraint-time-select] select\");\n    var map = config._time_format_order;\n\n    var mapping = gantt._resolve_default_mapping(config);\n\n    if (!typeSelect._eventsInitialized) {\n      typeSelect.addEventListener(\"change\", function (e) {\n        toggleTimeSelect(timeSelects, e.target.value);\n      });\n      typeSelect._eventsInitialized = true;\n    }\n\n    var constraintDate = task[mapping.constraint_date] || new Date();\n\n    gantt.form_blocks._fill_lightbox_select(timeSelects, 0, constraintDate, map, config);\n\n    var constraintType = task[mapping.constraint_type] || gantt.getConstraintType(task);\n    typeSelect.value = constraintType;\n    toggleTimeSelect(timeSelects, constraintType);\n  };\n\n  ConstraintControl.prototype.get_value = function (node, task, config) {\n    var typeSelect = node.querySelector(\"[data-constraint-type-select] select\");\n    var timeSelects = node.querySelectorAll(\"[data-constraint-time-select] select\");\n    var constraintType = typeSelect.value;\n    var constraintDate = null;\n\n    if (!isNonTimedConstraint(constraintType)) {\n      constraintDate = gantt.form_blocks.getTimePickerValue(timeSelects, config);\n    }\n\n    return {\n      constraint_type: constraintType,\n      constraint_date: constraintDate\n    };\n  };\n\n  ConstraintControl.prototype.focus = function (node) {\n    gantt._focus(node.querySelector(\"select\"));\n  };\n\n  return ConstraintControl;\n};","var __extends = require(\"../../../../utils/extends\");\n\nmodule.exports = function (gantt) {\n  var _super = require(\"./select_control\")(gantt);\n\n  function ParentControl() {\n    var self = _super.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(ParentControl, _super);\n\n  ParentControl.prototype.render = function (sns) {\n    return _display(sns, false);\n  };\n\n  ParentControl.prototype.set_value = function (node, value, ev, config) {\n    // GS-1051. If the value is `0`, the set_value function in the select control won't select \n    // the first child because (0 || '') = '';\n    if (value === 0) value = \"0\";\n    var tmpDom = document.createElement(\"div\");\n    tmpDom.innerHTML = _display(config, ev.id);\n    var newOptions = tmpDom.removeChild(tmpDom.firstChild);\n    node.onselect = null;\n    node.parentNode.replaceChild(newOptions, node);\n    return gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\n  };\n\n  function _display(config, item_id) {\n    var tasks = [],\n        options = [];\n\n    if (item_id) {\n      tasks = gantt.getTaskByTime();\n\n      if (config.allow_root) {\n        tasks.unshift({\n          id: gantt.config.root_id,\n          text: config.root_label || \"\"\n        });\n      }\n\n      tasks = _filter(tasks, config, item_id);\n\n      if (config.sort) {\n        tasks.sort(config.sort);\n      }\n    }\n\n    var text = config.template || gantt.templates.task_text;\n\n    for (var i = 0; i < tasks.length; i++) {\n      var label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\n\n      if (label === undefined) {\n        label = \"\";\n      }\n\n      options.push({\n        key: tasks[i].id,\n        label: label\n      });\n    }\n\n    config.options = options;\n    config.map_to = config.map_to || \"parent\";\n    return gantt.form_blocks.select.render.apply(this, arguments);\n  }\n\n  function _filter(options, config, item_id) {\n    var filter = config.filter || function () {\n      return true;\n    };\n\n    options = options.slice(0);\n\n    for (var i = 0; i < options.length; i++) {\n      var task = options[i];\n\n      if (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\n        options.splice(i, 1);\n        i--;\n      }\n    }\n\n    return options;\n  }\n\n  return ParentControl;\n};","var __extends = require(\"../../../../utils/extends\");\n\nvar DurationFormatterNumeric = require(\"../../../common/duration_formatter_numeric\")[\"default\"];\n\nmodule.exports = function (gantt) {\n  var _super = require(\"./base_control\")(gantt);\n\n  function DurationControl() {\n    var self = _super.apply(this, arguments) || this;\n    return self;\n  }\n\n  function getFormatter(config) {\n    return config.formatter || new DurationFormatterNumeric();\n  }\n\n  __extends(DurationControl, _super);\n\n  DurationControl.prototype.render = function (sns) {\n    var time = \"<div class='gantt_time_selects'>\" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</div>\";\n    var label = \" \" + gantt.locale.labels[gantt.config.duration_unit + \"s\"] + \" \";\n    var singleDate = sns.single_date ? \" style='display:none'\" : \"\";\n    var readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\n\n    var ariaAttr = gantt._waiAria.lightboxDurationInputAttrString(sns);\n\n    var durationInputClass = \"gantt_duration_value\";\n\n    if (sns.formatter) {\n      label = \"\";\n      durationInputClass += \" gantt_duration_value_formatted\";\n    }\n\n    var duration = \"<div class='gantt_duration' \" + singleDate + \">\" + \"<input type='button' class='gantt_duration_dec' value=''\" + readonly + \">\" + \"<input type='text' value='5days' class='\" + durationInputClass + \"'\" + readonly + \" \" + ariaAttr + \">\" + \"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \">\" + label + \"<span></span>\" + \"</div>\";\n    var html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>\" + time + \" \" + duration + \"</div>\";\n    return html;\n  };\n\n  DurationControl.prototype.set_value = function (node, value, ev, config) {\n    var s = node.getElementsByTagName(\"select\");\n    var inps = node.getElementsByTagName(\"input\");\n    var duration = inps[1];\n    var btns = [inps[0], inps[2]];\n    var endspan = node.getElementsByTagName(\"span\")[0];\n    var map = config._time_format_order;\n    var mapping;\n    var start_date;\n    var end_date;\n    var duration_val;\n\n    function _calc_date() {\n      var start_date = _getStartDate.call(gantt, node, config);\n\n      var duration = _getDuration.call(gantt, node, config);\n\n      var end_date = gantt.calculateEndDate({\n        start_date: start_date,\n        duration: duration,\n        task: ev\n      });\n      var template = gantt.templates.task_end_date || gantt.templates.task_date;\n      endspan.innerHTML = template(end_date);\n    }\n\n    function _change_duration(step) {\n      var value = duration.value;\n      value = getFormatter(config).parse(value);\n      if (window.isNaN(value)) value = 0;\n      value += step;\n      if (value < 1) value = 1;\n      duration.value = getFormatter(config).format(value);\n\n      _calc_date();\n    }\n\n    btns[0].onclick = gantt.bind(function () {\n      _change_duration(-1 * gantt.config.duration_step);\n    }, this);\n    btns[1].onclick = gantt.bind(function () {\n      _change_duration(1 * gantt.config.duration_step);\n    }, this);\n    s[0].onchange = _calc_date;\n    s[1].onchange = _calc_date;\n    s[2].onchange = _calc_date;\n    if (s[3]) s[3].onchange = _calc_date;\n    duration.onkeydown = gantt.bind(function (e) {\n      var code;\n      e = e || window.event;\n      code = e.charCode || e.keyCode || e.which;\n\n      if (code == gantt.constants.KEY_CODES.DOWN) {\n        _change_duration(-1 * gantt.config.duration_step);\n\n        return false;\n      }\n\n      if (code == gantt.constants.KEY_CODES.UP) {\n        _change_duration(1 * gantt.config.duration_step);\n\n        return false;\n      }\n\n      window.setTimeout(_calc_date, 1);\n    }, this);\n    duration.onchange = gantt.bind(_calc_date, this);\n    mapping = gantt._resolve_default_mapping(config);\n    if (typeof mapping === \"string\") mapping = {\n      start_date: mapping\n    };\n    start_date = ev[mapping.start_date] || new Date();\n    end_date = ev[mapping.end_date] || gantt.calculateEndDate({\n      start_date: start_date,\n      duration: 1,\n      task: ev\n    });\n    duration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\n      start_date: start_date,\n      end_date: end_date,\n      task: ev\n    });\n    duration_val = getFormatter(config).format(duration_val);\n\n    gantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, config);\n\n    duration.value = duration_val;\n\n    _calc_date();\n  };\n\n  DurationControl.prototype.get_value = function (node, ev, config) {\n    var startDate = _getStartDate(node, config);\n\n    var duration = _getDuration(node, config);\n\n    var endDate = gantt.calculateEndDate({\n      start_date: startDate,\n      duration: duration,\n      task: ev\n    });\n\n    if (typeof gantt._resolve_default_mapping(config) == \"string\") {\n      return startDate;\n    }\n\n    return {\n      start_date: startDate,\n      end_date: endDate,\n      duration: duration\n    };\n  };\n\n  DurationControl.prototype.focus = function (node) {\n    gantt._focus(node.getElementsByTagName(\"select\")[0]);\n  };\n\n  function _getStartDate(node, config) {\n    var s = node.getElementsByTagName(\"select\");\n    var map = config._time_format_order;\n    var hours = 0;\n    var minutes = 0;\n\n    if (gantt.defined(map[3])) {\n      var input = s[map[3]];\n      var time = parseInt(input.value, 10);\n\n      if (isNaN(time) && input.hasAttribute(\"data-value\")) {\n        time = parseInt(input.getAttribute(\"data-value\"), 10);\n      }\n\n      hours = Math.floor(time / 60);\n      minutes = time % 60;\n    }\n\n    return new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\n  }\n\n  function _getDuration(node, config) {\n    var duration = node.getElementsByTagName(\"input\")[1];\n    duration = getFormatter(config).parse(duration.value);\n    if (!duration || window.isNaN(duration)) duration = 1;\n    if (duration < 0) duration *= -1;\n    return duration;\n  }\n\n  return DurationControl;\n};","var __extends = require(\"../../../../utils/extends\");\n\nmodule.exports = function (gantt) {\n  var _super = require(\"./base_control\")(gantt);\n\n  function RadioControl() {\n    var self = _super.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(RadioControl, _super);\n\n  RadioControl.prototype.render = function (sns) {\n    var height = (sns.height || \"23\") + \"px\";\n    var html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\n\n    if (sns.options && sns.options.length) {\n      for (var i = 0; i < sns.options.length; i++) {\n        html += \"<label><input type='radio' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\n      }\n    }\n\n    html += \"</div>\";\n    return html;\n  };\n\n  RadioControl.prototype.set_value = function (node, value, ev, sns) {\n    var radio;\n    if (!sns.options || !sns.options.length) return;\n    radio = node.querySelector(\"input[type=radio][value='\" + value + \"']\") || node.querySelector(\"input[type=radio][value='\" + sns.default_value + \"']\");\n    if (!radio) return;\n\n    if (!node._dhx_onchange && sns.onchange) {\n      node.onchange = sns.onchange;\n      node._dhx_onchange = true;\n    }\n\n    radio.checked = true;\n  };\n\n  RadioControl.prototype.get_value = function (node, ev) {\n    var result = node.querySelector(\"input[type=radio]:checked\");\n    return result ? result.value : \"\";\n  };\n\n  RadioControl.prototype.focus = function (node) {\n    gantt._focus(node.querySelector(\"input[type=radio]\"));\n  };\n\n  return RadioControl;\n};","var helpers = require(\"../../../../utils/helpers\");\n\nvar __extends = require(\"../../../../utils/extends\");\n\nmodule.exports = function (gantt) {\n  var _super = require(\"./base_control\")(gantt);\n\n  function CheckboxControl() {\n    var self = _super.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(CheckboxControl, _super);\n\n  CheckboxControl.prototype.render = function (sns) {\n    var height = (sns.height || \"23\") + \"px\";\n    var html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\n\n    if (sns.options && sns.options.length) {\n      for (var i = 0; i < sns.options.length; i++) {\n        html += \"<label><input type='checkbox' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\n      }\n    } else {\n      sns.single_value = true;\n      html += \"<label><input type='checkbox' name='\" + sns.name + \"'></label>\";\n    }\n\n    html += \"</div>\";\n    return html;\n  };\n\n  CheckboxControl.prototype.set_value = function (node, value, ev, sns) {\n    var checkboxes = Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]\"));\n\n    if (!node._dhx_onchange && sns.onchange) {\n      node.onchange = sns.onchange;\n      node._dhx_onchange = true;\n    }\n\n    if (sns.single_value) {\n      var box = checkboxes[0];\n      box.checked = !!value;\n    } else {\n      helpers.forEach(checkboxes, function (entry) {\n        entry.checked = value ? value.indexOf(entry.value) >= 0 : false;\n      });\n    }\n  };\n\n  CheckboxControl.prototype.get_value = function (node, task, sns) {\n    if (sns.single_value) {\n      var box = node.querySelector(\"input[type=checkbox]\");\n      return box.checked;\n    } else {\n      return helpers.arrayMap(Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]:checked\")), function (entry) {\n        return entry.value;\n      });\n    }\n  };\n\n  CheckboxControl.prototype.focus = function (node) {\n    gantt._focus(node.querySelector(\"input[type=checkbox]\"));\n  };\n\n  return CheckboxControl;\n};","var __extends = require(\"../../../../utils/extends\");\n\nmodule.exports = function (gantt) {\n  var _super = require(\"./base_control\")(gantt);\n\n  function TimeControl() {\n    var self = _super.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(TimeControl, _super);\n\n  TimeControl.prototype.render = function (sns) {\n    var time = gantt.form_blocks.getTimePicker.call(this, sns);\n    var html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>\";\n    html += time;\n\n    if (sns.single_date) {\n      time = gantt.form_blocks.getTimePicker.call(this, sns, true);\n      html += \"<span></span>\";\n    } else {\n      html += \"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\";\n    }\n\n    html += time;\n    html += \"</div>\";\n    return html;\n  };\n\n  TimeControl.prototype.set_value = function (node, value, ev, config) {\n    var cfg = config;\n    var s = node.getElementsByTagName(\"select\");\n    var map = config._time_format_order;\n\n    if (cfg.auto_end_date) {\n      var _update_lightbox_select = function _update_lightbox_select() {\n        start_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\n        end_date = gantt.calculateEndDate({\n          start_date: start_date,\n          duration: 1,\n          task: ev\n        });\n\n        gantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\n      };\n\n      for (var i = 0; i < 4; i++) {\n        s[i].onchange = _update_lightbox_select;\n      }\n    }\n\n    var mapping = gantt._resolve_default_mapping(config);\n\n    if (typeof mapping === \"string\") mapping = {\n      start_date: mapping\n    };\n    var start_date = ev[mapping.start_date] || new Date();\n    var end_date = ev[mapping.end_date] || gantt.calculateEndDate({\n      start_date: start_date,\n      duration: 1,\n      task: ev\n    });\n\n    gantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\n\n    gantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\n  };\n\n  TimeControl.prototype.get_value = function (node, ev, config) {\n    var selects = node.getElementsByTagName(\"select\");\n    var startDate;\n    var map = config._time_format_order;\n\n    function _getEndDate(selects, map, startDate) {\n      var endDate = gantt.form_blocks.getTimePickerValue(selects, config, map.size); // GS-1010: We need to add a way to obtain exact end_date for validation\n\n      if (endDate <= startDate) {\n        // when end date seems wrong\n        if (config.autofix_end !== false || config.single_date) {\n          // auto correct it in two cases - when the auto correction is not disabled, or when we have 'single date' control and the user don't have the UI to specify the end date\n          return gantt.date.add(startDate, gantt._get_timepicker_step(), \"minute\");\n        }\n      }\n\n      return endDate;\n    }\n\n    startDate = gantt.form_blocks.getTimePickerValue(selects, config);\n\n    if (typeof gantt._resolve_default_mapping(config) === \"string\") {\n      return startDate;\n    }\n\n    return {\n      start_date: startDate,\n      end_date: _getEndDate(selects, map, startDate)\n    };\n  };\n\n  TimeControl.prototype.focus = function (node) {\n    gantt._focus(node.getElementsByTagName(\"select\")[0]);\n  };\n\n  return TimeControl;\n};","var __extends = require(\"../../../../utils/extends\");\n\nmodule.exports = function (gantt) {\n  var _super = require(\"./base_control\")(gantt);\n\n  function TextareaControl() {\n    var self = _super.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(TextareaControl, _super);\n\n  TextareaControl.prototype.render = function (sns) {\n    var height = (sns.height || \"130\") + \"px\";\n    return \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><textarea></textarea></div>\";\n  };\n\n  TextareaControl.prototype.set_value = function (node, value) {\n    gantt.form_blocks.textarea._get_input(node).value = value || \"\";\n  };\n\n  TextareaControl.prototype.get_value = function (node) {\n    return gantt.form_blocks.textarea._get_input(node).value;\n  };\n\n  TextareaControl.prototype.focus = function (node) {\n    var a = gantt.form_blocks.textarea._get_input(node);\n\n    gantt._focus(a, true);\n  };\n\n  TextareaControl.prototype._get_input = function (node) {\n    return node.querySelector(\"textarea\");\n  };\n\n  return TextareaControl;\n};","var __extends = require(\"../../../../utils/extends\");\n\nmodule.exports = function (gantt) {\n  var _super = require(\"./base_control\")(gantt);\n\n  function TemplateControl() {\n    var self = _super.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(TemplateControl, _super);\n\n  TemplateControl.prototype.render = function (sns) {\n    var height = (sns.height || \"30\") + \"px\";\n    return \"<div class='gantt_cal_ltext gantt_cal_template' style='height:\" + height + \";'></div>\";\n  };\n\n  TemplateControl.prototype.set_value = function (node, value) {\n    node.innerHTML = value || \"\";\n  };\n\n  TemplateControl.prototype.get_value = function (node) {\n    return node.innerHTML || \"\";\n  };\n\n  TemplateControl.prototype.focus = function () {};\n\n  return TemplateControl;\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nmodule.exports = function (gantt) {\n  var domHelpers = require(\"../utils/dom_helpers\");\n\n  var helpers = require(\"../../../utils/helpers\");\n\n  var TemplateControl = require(\"./controls/template_control\")(gantt);\n\n  var TextareaControl = require(\"./controls/textarea_control\")(gantt);\n\n  var TimeControl = require(\"./controls/time_control\")(gantt);\n\n  var SelectControl = require(\"./controls/select_control\")(gantt);\n\n  var CheckboxControl = require(\"./controls/checkbox_control\")(gantt);\n\n  var RadioControl = require(\"./controls/radio_control\")(gantt);\n\n  var DurationControl = require(\"./controls/duration_control\")(gantt);\n\n  var ParentControl = require(\"./controls/parent_control\")(gantt);\n\n  var ResourcesControl = require(\"./controls/resources_control\")(gantt);\n\n  var ConstraintControl = require(\"./controls/constraint_control\")(gantt);\n\n  var TypeselectControl = require(\"./controls/typeselect_control\")(gantt);\n\n  gantt._lightbox_methods = {};\n  gantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\"; // GS-1952. Attaching the lightbox to the BODY element is not considered secure.\n  // Attach it to Gantt container for Salesforce and other secure environments\n\n  gantt._lightbox_root = gantt.$root;\n\n  function setParentNode() {\n    var cspEnvironment = gantt.config.csp === true;\n    var salesforceEnvironment = !!window[\"Sfdc\"] || !!window[\"$A\"] || window[\"Aura\"] || '$shadowResolver$' in document.body;\n\n    if (cspEnvironment || salesforceEnvironment) {\n      gantt._lightbox_root = gantt.$root;\n    } else {\n      gantt._lightbox_root = document.body;\n    }\n  } //TODO: gantt._lightbox_id is changed from data.js and accessed from autoscheduling, check if it can be removed from gantt object\n\n\n  var state = gantt.$services.getService(\"state\");\n  state.registerProvider(\"lightbox\", function () {\n    return {\n      lightbox: gantt._lightbox_id\n    };\n  });\n\n  gantt.showLightbox = function (id) {\n    if (!this.callEvent(\"onBeforeLightbox\", [id])) return;\n    var task = this.getTask(id);\n    var box = this.getLightbox(this.getTaskType(task.type));\n\n    this._center_lightbox(box);\n\n    this.showCover();\n\n    this._fill_lightbox(id, box);\n\n    this._waiAria.lightboxVisibleAttr(box);\n\n    this.callEvent(\"onLightbox\", [id]);\n  };\n\n  function _is_chart_visible(gantt) {\n    var timeline = gantt.$ui.getView(\"timeline\");\n\n    if (timeline && timeline.isVisible()) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  gantt._get_timepicker_step = function () {\n    if (this.config.round_dnd_dates) {\n      var step;\n\n      if (_is_chart_visible(this)) {\n        var scale = gantt.getScale();\n        step = helpers.getSecondsInUnit(scale.unit) * scale.step / 60; //timepicker step is measured in minutes\n      }\n\n      if (!step || step >= 60 * 24) {\n        step = this.config.time_step;\n      }\n\n      return step;\n    }\n\n    return this.config.time_step;\n  };\n\n  gantt.getLabel = function (property, key) {\n    var sections = this._get_typed_lightbox_config();\n\n    for (var i = 0; i < sections.length; i++) {\n      if (sections[i].map_to == property) {\n        var options = sections[i].options;\n\n        for (var j = 0; j < options.length; j++) {\n          if (options[j].key == key) {\n            return options[j].label;\n          }\n        }\n      }\n    }\n\n    return \"\";\n  };\n\n  gantt.updateCollection = function (list_name, collection) {\n    collection = collection.slice(0);\n    var list = gantt.serverList(list_name);\n    if (!list) return false;\n    list.splice(0, list.length);\n    list.push.apply(list, collection || []);\n    gantt.resetLightbox();\n  };\n\n  gantt.getLightboxType = function () {\n    return this.getTaskType(this._lightbox_type);\n  };\n\n  gantt.getLightbox = function (type) {\n    var lightboxDiv;\n    var fullWidth;\n    var html;\n    var sns;\n    var ds;\n    var classNames = \"\";\n    setParentNode();\n    if (type === undefined) type = this.getLightboxType();\n\n    if (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\n      this._lightbox_type = this.getTaskType(type);\n      lightboxDiv = document.createElement(\"div\");\n      classNames = \"gantt_cal_light\";\n      fullWidth = this._is_lightbox_timepicker();\n      if (gantt.config.wide_form || fullWidth) classNames += \" gantt_cal_light_wide\";\n\n      if (fullWidth) {\n        gantt.config.wide_form = true;\n        classNames += \" gantt_cal_light_full\";\n      }\n\n      lightboxDiv.className = classNames;\n      lightboxDiv.style.visibility = \"hidden\";\n      html = this._lightbox_template;\n      html += getHtmlButtons(this.config.buttons_left);\n      html += getHtmlButtons(this.config.buttons_right, true);\n      lightboxDiv.innerHTML = html;\n\n      gantt._waiAria.lightboxAttr(lightboxDiv);\n\n      if (gantt.config.drag_lightbox) {\n        lightboxDiv.firstChild.onmousedown = gantt._ready_to_dnd;\n\n        lightboxDiv.firstChild.onselectstart = function () {\n          return false;\n        };\n\n        lightboxDiv.firstChild.style.cursor = \"pointer\";\n\n        gantt._init_dnd_events();\n      } // GS-1428: If there is lightbox node, we need to remove it from the DOM\n\n\n      if (this._lightbox) {\n        this.resetLightbox();\n      }\n\n      gantt._lightbox_root.insertBefore(lightboxDiv, gantt._lightbox_root.firstChild);\n\n      this._lightbox = lightboxDiv;\n      sns = this._get_typed_lightbox_config(type);\n      html = this._render_sections(sns);\n      ds = lightboxDiv.querySelector(\"div.gantt_cal_larea\"); //GS-1131. If gantt_cal_larea is displayed, Firefox renders buttons incorrectly;\n\n      var backup_overflow = ds.style.overflow;\n      ds.style.overflow = 'hidden';\n      ds.innerHTML = html;\n      bindLabelsToInputs(sns); //sizes\n\n      this.resizeLightbox();\n      ds.style.overflow = backup_overflow;\n\n      this._init_lightbox_events(this);\n\n      lightboxDiv.style.display = \"none\";\n      lightboxDiv.style.visibility = \"visible\";\n    }\n\n    return this._lightbox;\n  };\n\n  gantt._render_sections = function (sns) {\n    var html = \"\";\n\n    for (var i = 0; i < sns.length; i++) {\n      var block = this.form_blocks[sns[i].type];\n      if (!block) continue; //ignore incorrect blocks\n\n      sns[i].id = \"area_\" + this.uid();\n      var display = sns[i].hidden ? \" style='display:none'\" : \"\";\n      var button = \"\";\n\n      if (sns[i].button) {\n        button = \"<div class='gantt_custom_button' data-index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\n      }\n\n      if (this.config.wide_form) {\n        html += \"<div class='gantt_wrap_section' \" + display + \">\";\n      }\n\n      html += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + this.locale.labels[\"section_\" + sns[i].name] + \"</label></div>\" + block.render.call(this, sns[i]);\n      html += \"</div>\";\n    }\n\n    return html;\n  };\n\n  gantt.resizeLightbox = function () {\n    if (!this._lightbox) return;\n\n    var con = this._lightbox.querySelector(\".gantt_cal_larea\");\n\n    con.style.height = \"0px\";\n    con.style.height = con.scrollHeight + \"px\";\n    this._lightbox.style.height = con.scrollHeight + this.config.lightbox_additional_height + \"px\";\n    con.style.height = con.scrollHeight + \"px\"; //it is incredible , how ugly IE can be\n  };\n\n  gantt._center_lightbox = function (box) {\n    if (box) {\n      box.style.display = \"block\";\n      var scroll_top = window.pageYOffset || gantt._lightbox_root.scrollTop || document.documentElement.scrollTop;\n      var scroll_left = window.pageXOffset || gantt._lightbox_root.scrollLeft || document.documentElement.scrollLeft;\n      var view_height = window.innerHeight || document.documentElement.clientHeight;\n      if (scroll_top) // if vertical scroll on window\n        box.style.top = Math.round(scroll_top + Math.max((view_height - box.offsetHeight) / 2, 0)) + \"px\";else // vertical scroll on body\n        box.style.top = Math.round(Math.max((view_height - box.offsetHeight) / 2, 0) + 9) + \"px\"; // +9 for compatibility with auto tests\n      // not quite accurate but used for compatibility reasons\n\n      if (document.documentElement.scrollWidth > gantt._lightbox_root.offsetWidth) // if horizontal scroll on the window\n        box.style.left = Math.round(scroll_left + (gantt._lightbox_root.offsetWidth - box.offsetWidth) / 2) + \"px\";else // horizontal scroll on the body\n        box.style.left = Math.round((gantt._lightbox_root.offsetWidth - box.offsetWidth) / 2) + \"px\";\n    }\n  };\n\n  gantt.showCover = function () {\n    if (this._cover) return;\n    this._cover = document.createElement(\"DIV\");\n    this._cover.className = \"gantt_cal_cover\";\n    var rootElement = gantt._lightbox_root || gantt.$root;\n    rootElement.appendChild(this._cover);\n  };\n\n  gantt.event(window, \"deviceorientation\", function () {\n    if (gantt.getState().lightbox) {\n      gantt._center_lightbox(gantt.getLightbox());\n    }\n  });\n\n  gantt._init_lightbox_events = function () {\n    gantt.lightbox_events = {};\n\n    gantt.lightbox_events.gantt_save_btn = function () {\n      gantt._save_lightbox();\n    };\n\n    gantt.lightbox_events.gantt_delete_btn = function () {\n      gantt._lightbox_new_type = null;\n      if (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id])) return;\n\n      if (gantt.isTaskExists(gantt._lightbox_id)) {\n        gantt.$click.buttons[\"delete\"](gantt._lightbox_id);\n      } else {\n        gantt.hideLightbox();\n      }\n    };\n\n    gantt.lightbox_events.gantt_cancel_btn = function () {\n      gantt._cancel_lightbox();\n    };\n\n    gantt.lightbox_events[\"default\"] = function (e, src) {\n      if (src.getAttribute(\"data-dhx-button\")) {\n        gantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\n      } else {\n        var index, block, sec;\n        var className = domHelpers.getClassName(src);\n\n        if (className.indexOf(\"gantt_custom_button\") != -1) {\n          if (className.indexOf(\"gantt_custom_button_\") != -1) {\n            index = src.parentNode.getAttribute(\"data-index\");\n            sec = src;\n\n            while (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\n              sec = sec.parentNode;\n            }\n          } else {\n            index = src.getAttribute(\"data-index\");\n            sec = src.parentNode;\n            src = src.firstChild;\n          }\n        }\n\n        var sections = gantt._get_typed_lightbox_config();\n\n        if (index) {\n          index = index * 1;\n          block = gantt.form_blocks[sections[index * 1].type];\n          block.button_click(index, src, sec, sec.nextSibling);\n        }\n      }\n    };\n\n    this.event(gantt.getLightbox(), \"click\", function (e) {\n      e = e || window.event;\n      var src = domHelpers.getTargetNode(e);\n      var className = domHelpers.getClassName(src);\n\n      if (!className) {\n        src = src.previousSibling;\n        className = domHelpers.getClassName(src);\n      }\n\n      if (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\n        src = src.firstChild;\n        className = domHelpers.getClassName(src);\n      }\n\n      if (src && className) {\n        var func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\n        return func(e, src);\n      }\n\n      return false;\n    });\n\n    gantt.getLightbox().onkeydown = function (e) {\n      var event = e || window.event;\n      var target = e.target || e.srcElement;\n      var buttonTarget = domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1;\n\n      switch ((e || event).keyCode) {\n        case gantt.constants.KEY_CODES.SPACE:\n          {\n            if ((e || event).shiftKey) return;\n\n            if (buttonTarget && target.click) {\n              target.click();\n            }\n\n            break;\n          }\n\n        case gantt.keys.edit_save:\n          if ((e || event).shiftKey) return;\n\n          if (buttonTarget && target.click) {\n            target.click();\n          } else {\n            gantt._save_lightbox();\n          }\n\n          break;\n\n        case gantt.keys.edit_cancel:\n          gantt._cancel_lightbox();\n\n          break;\n\n        default:\n          break;\n      }\n    };\n  };\n\n  gantt._cancel_lightbox = function () {\n    var task = this.getLightboxValues();\n    this.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\n\n    if (gantt.isTaskExists(task.id) && task.$new) {\n      this.silent(function () {\n        gantt.$data.tasksStore.removeItem(task.id);\n\n        gantt._update_flags(task.id, null);\n      });\n      this.refreshData();\n    }\n\n    this.hideLightbox();\n  };\n\n  gantt._save_lightbox = function () {\n    var task = this.getLightboxValues();\n    if (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new])) return; // GS-2170. Do not recalculate the indexes and dates of other tasks\n    // as they will be recalculated in the `refreshData`\n\n    gantt.$data.tasksStore._skipTaskRecalculation = \"lightbox\";\n\n    if (task.$new) {\n      delete task.$new;\n      this.addTask(task, task.parent, this.getTaskIndex(task.id));\n    } else if (this.isTaskExists(task.id)) {\n      this.mixin(this.getTask(task.id), task, true);\n      this.refreshTask(task.id);\n      this.updateTask(task.id);\n    }\n\n    gantt.$data.tasksStore._skipTaskRecalculation = false;\n    this.refreshData(); // TODO: do we need any blockable events here to prevent closing lightbox?\n\n    this.hideLightbox();\n  };\n\n  gantt._resolve_default_mapping = function (section) {\n    var mapping = section.map_to;\n    var time_controls = {\n      \"time\": true,\n      \"time_optional\": true,\n      \"duration\": true,\n      \"duration_optional\": true\n    };\n\n    if (time_controls[section.type]) {\n      if (section.map_to == \"auto\") {\n        mapping = {\n          start_date: \"start_date\",\n          end_date: \"end_date\",\n          duration: \"duration\"\n        };\n      } else if (typeof section.map_to === \"string\") {\n        mapping = {\n          start_date: section.map_to\n        };\n      }\n    } else if (section.type === \"constraint\") {\n      if (!section.map_to || typeof section.map_to === \"string\") {\n        mapping = {\n          constraint_type: \"constraint_type\",\n          constraint_date: \"constraint_date\"\n        };\n      }\n    }\n\n    return mapping;\n  };\n\n  gantt.getLightboxValues = function () {\n    var task = {};\n\n    if (gantt.isTaskExists(this._lightbox_id)) {\n      task = this.mixin({}, this.getTask(this._lightbox_id));\n    }\n\n    var sns = this._get_typed_lightbox_config();\n\n    for (var i = 0; i < sns.length; i++) {\n      var node = gantt._lightbox_root.querySelector(\"#\" + sns[i].id);\n\n      node = node ? node.nextSibling : node;\n      var block = this.form_blocks[sns[i].type];\n      if (!block) continue;\n      var res = block.get_value.call(this, node, task, sns[i]);\n\n      var map_to = gantt._resolve_default_mapping(sns[i]);\n\n      if (typeof map_to == \"string\" && map_to != \"auto\") {\n        task[map_to] = res;\n      } else if (_typeof(map_to) == \"object\") {\n        for (var property in map_to) {\n          if (map_to[property]) task[map_to[property]] = res[property];\n        }\n      }\n    } // GS-1282 We need to preserve the task type even if the lightbox doesn't have the typeselect section\n\n\n    if (gantt._lightbox_new_type == \"task\") {\n      task.type = gantt.config.types.task;\n      gantt._lightbox_new_type = null;\n    }\n\n    return task;\n  };\n\n  gantt.hideLightbox = function () {\n    var box = this.getLightbox();\n    if (box) box.style.display = \"none\";\n\n    this._waiAria.lightboxHiddenAttr(box);\n\n    this._lightbox_id = null;\n    this.hideCover();\n    this.callEvent(\"onAfterLightbox\", []);\n  };\n\n  gantt.hideCover = function () {\n    if (this._cover) this._cover.parentNode.removeChild(this._cover);\n    this._cover = null;\n  };\n\n  gantt.resetLightbox = function () {\n    if (gantt._lightbox && !gantt._custom_lightbox) gantt._lightbox.parentNode.removeChild(gantt._lightbox);\n    gantt._lightbox = null;\n    gantt.hideCover();\n  };\n\n  gantt._set_lightbox_values = function (data, box) {\n    var task = data;\n    var s = box.getElementsByTagName(\"span\");\n    var lightboxHeader = [];\n\n    if (gantt.templates.lightbox_header) {\n      lightboxHeader.push(\"\");\n      lightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\n      s[1].innerHTML = \"\";\n      s[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\n    } else {\n      lightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\n      lightboxHeader.push(String(this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\n\n      s[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\n      s[2].innerHTML = String(this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\n    }\n\n    s[1].innerHTML = lightboxHeader[0];\n    s[2].innerHTML = lightboxHeader[1];\n\n    gantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\n\n    var sns = this._get_typed_lightbox_config(this.getLightboxType());\n\n    for (var i = 0; i < sns.length; i++) {\n      var section = sns[i];\n\n      if (!this.form_blocks[section.type]) {\n        continue; //skip incorrect sections, same check is done during rendering\n      }\n\n      var node = gantt._lightbox_root.querySelector(\"#\" + section.id).nextSibling;\n\n      var block = this.form_blocks[section.type];\n\n      var map_to = gantt._resolve_default_mapping(sns[i]);\n\n      var value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\n      block.set_value.call(gantt, node, value, task, section);\n      if (section.focus) block.focus.call(gantt, node);\n    }\n\n    if (gantt.isTaskExists(data.id)) {\n      gantt._lightbox_id = data.id;\n    }\n  };\n\n  gantt._fill_lightbox = function (id, box) {\n    var task = this.getTask(id);\n\n    this._set_lightbox_values(task, box);\n  };\n\n  gantt.getLightboxSection = function (name) {\n    var config = this._get_typed_lightbox_config();\n\n    var i = 0;\n\n    for (i; i < config.length; i++) {\n      if (config[i].name == name) break;\n    }\n\n    var section = config[i];\n    if (!section) return null;\n    if (!this._lightbox) this.getLightbox();\n\n    var header = gantt._lightbox_root.querySelector(\"#\" + section.id);\n\n    var node = header.nextSibling;\n    var result = {\n      section: section,\n      header: header,\n      node: node,\n      getValue: function getValue(ev) {\n        return gantt.form_blocks[section.type].get_value.call(gantt, node, ev || {}, section);\n      },\n      setValue: function setValue(value, ev) {\n        return gantt.form_blocks[section.type].set_value.call(gantt, node, value, ev || {}, section);\n      }\n    };\n    var handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\n    return handler ? handler(result) : result;\n  };\n\n  gantt._lightbox_methods.get_template_control = function (result) {\n    result.control = result.node;\n    return result;\n  };\n\n  gantt._lightbox_methods.get_select_control = function (result) {\n    result.control = result.node.getElementsByTagName(\"select\")[0];\n    return result;\n  };\n\n  gantt._lightbox_methods.get_textarea_control = function (result) {\n    result.control = result.node.getElementsByTagName(\"textarea\")[0];\n    return result;\n  };\n\n  gantt._lightbox_methods.get_time_control = function (result) {\n    result.control = result.node.getElementsByTagName(\"select\"); // array\n\n    return result;\n  };\n\n  gantt._init_dnd_events = function () {\n    var eventElement = gantt._lightbox_root;\n    this.event(eventElement, \"mousemove\", gantt._move_while_dnd);\n    this.event(eventElement, \"mouseup\", gantt._finish_dnd); // GS-1952: In Salesforce environment, the lightbox is attached to the Gantt container. \n    // So when Gantt is reinitialized, the events are no longer attached to the Gantt container.\n    // gantt._init_dnd_events = function () {\n    // };\n  };\n\n  gantt._move_while_dnd = function (event) {\n    if (gantt._dnd_start_lb) {\n      if (!document.gantt_unselectable) {\n        gantt._lightbox_root.className += \" gantt_unselectable\";\n        document.gantt_unselectable = true;\n      }\n\n      var lb = gantt.getLightbox();\n      var now = [event.pageX, event.pageY];\n      lb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\n      lb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\n    }\n  };\n\n  gantt._ready_to_dnd = function (event) {\n    var lb = gantt.getLightbox();\n    gantt._lb_start = [parseInt(lb.style.left, 10), parseInt(lb.style.top, 10)];\n    gantt._dnd_start_lb = [event.pageX, event.pageY];\n  };\n\n  gantt._finish_dnd = function () {\n    if (gantt._lb_start) {\n      gantt._lb_start = gantt._dnd_start_lb = false;\n      gantt._lightbox_root.className = gantt._lightbox_root.className.replace(\" gantt_unselectable\", \"\");\n      document.gantt_unselectable = false;\n    }\n  };\n\n  gantt._focus = function (node, select) {\n    if (node && node.focus) {\n      if (gantt.config.touch) {//do not focus editor, to prevent auto-zoom\n      } else {\n        try {\n          if (select && node.select) node.select();\n          node.focus();\n        } catch (e) {// silent errors\n        }\n      }\n    }\n  };\n\n  gantt.form_blocks = {\n    getTimePicker: function getTimePicker(sns, hidden) {\n      var html = \"\";\n      var cfg = this.config;\n      var i;\n      var options;\n      var ariaAttrs;\n      var readonly;\n      var display;\n      var settings = {\n        first: 0,\n        last: 24 * 60,\n        date: this.date.date_part(new Date(gantt._min_date.valueOf())),\n        timeFormat: getTimeFormat(sns)\n      }; // map: default order => real one\n\n      sns._time_format_order = {\n        size: 0\n      };\n\n      if (gantt.config.limit_time_select) {\n        settings.first = 60 * cfg.first_hour;\n        settings.last = 60 * cfg.last_hour + 1;\n        settings.date.setHours(cfg.first_hour);\n      }\n\n      for (i = 0; i < settings.timeFormat.length; i++) {\n        // adding spaces between selects\n        if (i > 0) {\n          html += \" \";\n        }\n\n        options = getHtmlTimePickerOptions(sns, i, settings);\n\n        if (options) {\n          ariaAttrs = gantt._waiAria.lightboxSelectAttrString(settings.timeFormat[i]);\n          readonly = sns.readonly ? \"disabled='disabled'\" : \"\";\n          display = hidden ? \" style='display:none' \" : \"\";\n          html += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\n        }\n      }\n\n      return html;\n    },\n    getTimePickerValue: function getTimePickerValue(selects, config, offset) {\n      var map = config._time_format_order;\n      var needSetTime = gantt.defined(map[3]);\n      var time;\n      var hours = 0;\n      var minutes = 0;\n      var mapOffset = offset || 0;\n\n      if (needSetTime) {\n        time = parseInt(selects[map[3] + mapOffset].value, 10);\n        hours = Math.floor(time / 60);\n        minutes = time % 60;\n      }\n\n      return new Date(selects[map[2] + mapOffset].value, selects[map[1] + mapOffset].value, selects[map[0] + mapOffset].value, hours, minutes);\n    },\n    _fill_lightbox_select: function _fill_lightbox_select(s, i, d, map) {\n      s[i + map[0]].value = d.getDate();\n      s[i + map[1]].value = d.getMonth();\n      s[i + map[2]].value = d.getFullYear();\n\n      if (gantt.defined(map[3])) {\n        var v = d.getHours() * 60 + d.getMinutes();\n        v = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\n        var input = s[i + map[3]];\n        input.value = v; //in case option not shown\n\n        input.setAttribute(\"data-value\", v);\n      }\n    },\n    template: new TemplateControl(),\n    textarea: new TextareaControl(),\n    select: new SelectControl(),\n    time: new TimeControl(),\n    duration: new DurationControl(),\n    parent: new ParentControl(),\n    radio: new RadioControl(),\n    checkbox: new CheckboxControl(),\n    resources: new ResourcesControl(),\n    constraint: new ConstraintControl(),\n    typeselect: new TypeselectControl()\n  };\n\n  gantt._is_lightbox_timepicker = function () {\n    var s = this._get_typed_lightbox_config();\n\n    for (var i = 0; i < s.length; i++) {\n      if (s[i].name == \"time\" && s[i].type == \"time\") return true;\n    }\n\n    return false;\n  };\n\n  gantt._simple_confirm = function (message, title, callback, ok) {\n    if (!message) return callback();\n    var opts = {\n      text: message\n    };\n    if (title) opts.title = title;\n\n    if (ok) {\n      opts.ok = ok;\n    }\n\n    if (callback) {\n      opts.callback = function (result) {\n        if (result) callback();\n      };\n    }\n\n    gantt.confirm(opts);\n  };\n\n  function _get_type_name(type_value) {\n    for (var i in this.config.types) {\n      if (this.config.types[i] == type_value) {\n        return i;\n      }\n    }\n\n    return \"task\";\n  }\n\n  gantt._get_typed_lightbox_config = function (type) {\n    if (type === undefined) {\n      type = this.getLightboxType();\n    }\n\n    var field = _get_type_name.call(this, type);\n\n    if (gantt.config.lightbox[field + \"_sections\"]) {\n      return gantt.config.lightbox[field + \"_sections\"];\n    } else {\n      return gantt.config.lightbox.sections;\n    }\n  };\n\n  gantt._silent_redraw_lightbox = function (type) {\n    var oldType = this.getLightboxType();\n\n    if (this.getState().lightbox) {\n      var taskId = this.getState().lightbox;\n      var formData = this.getLightboxValues(),\n          task = this.copy(this.getTask(taskId));\n      this.resetLightbox();\n      var updTask = this.mixin(task, formData, true);\n      var box = this.getLightbox(type ? type : undefined);\n\n      this._center_lightbox(this.getLightbox());\n\n      this._set_lightbox_values(updTask, box);\n\n      this.showCover();\n    } else {\n      this.resetLightbox();\n      this.getLightbox(type ? type : undefined);\n    }\n\n    this.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\n  };\n\n  function bindLabelsToInputs(sns) {\n    var section;\n    var label;\n    var labelBlock;\n    var inputBlock;\n    var input;\n    var i;\n\n    for (i = 0; i < sns.length; i++) {\n      section = sns[i];\n      labelBlock = gantt._lightbox_root.querySelector(\"#\" + section.id);\n      if (!section.id || !labelBlock) continue;\n      label = labelBlock.querySelector(\"label\");\n      inputBlock = labelBlock.nextSibling;\n      if (!inputBlock) continue;\n      input = inputBlock.querySelector(\"input, select, textarea\");\n\n      if (input) {\n        input.id = input.id || \"input_\" + gantt.uid();\n        section.inputId = input.id;\n        label.setAttribute(\"for\", section.inputId);\n      }\n    }\n  }\n\n  function getHtmlButtons(buttons, floatRight) {\n    var button;\n    var ariaAttr;\n    var html = \"\";\n    var i;\n\n    for (i = 0; i < buttons.length; i++) {\n      // needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\n      button = gantt.config._migrate_buttons[buttons[i]] ? gantt.config._migrate_buttons[buttons[i]] : buttons[i];\n      ariaAttr = gantt._waiAria.lightboxButtonAttrString(button);\n      html += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'\" + (floatRight ? \" style='float:right;'\" : \"\") + \"><div dhx_button='1' data-dhx-button='1' class='\" + button + \"'></div><div>\" + gantt.locale.labels[button] + \"</div></div>\";\n    }\n\n    return html;\n  }\n\n  function getTimeFormat(sns) {\n    var scale;\n    var unit;\n    var result;\n    if (sns.time_format) return sns.time_format; // default order\n\n    result = [\"%d\", \"%m\", \"%Y\"];\n    scale = gantt.getScale();\n    unit = scale ? scale.unit : gantt.config.duration_unit;\n\n    if (helpers.getSecondsInUnit(unit) < helpers.getSecondsInUnit(\"day\")) {\n      result.push(\"%H:%i\");\n    }\n\n    return result;\n  }\n\n  function getHtmlTimePickerOptions(sns, index, settings) {\n    var range;\n    var offset;\n    var start_year;\n    var end_year;\n    var i;\n    var time;\n    var diff;\n    var tdate;\n    var html = \"\";\n\n    switch (settings.timeFormat[index]) {\n      case \"%Y\":\n        sns._time_format_order[2] = index;\n        sns._time_format_order.size++; //year\n\n        if (sns.year_range) {\n          if (!isNaN(sns.year_range)) {\n            range = sns.year_range;\n          } else if (sns.year_range.push) {\n            // if\n            start_year = sns.year_range[0];\n            end_year = sns.year_range[1];\n          }\n        }\n\n        range = range || 10;\n        offset = offset || Math.floor(range / 2);\n        start_year = start_year || settings.date.getFullYear() - offset;\n        end_year = end_year || gantt.getState().max_date.getFullYear() + offset;\n\n        for (i = start_year; i < end_year; i++) {\n          html += \"<option value='\" + i + \"'>\" + i + \"</option>\";\n        }\n\n        break;\n\n      case \"%m\":\n        sns._time_format_order[1] = index;\n        sns._time_format_order.size++; //month\n\n        for (i = 0; i < 12; i++) {\n          html += \"<option value='\" + i + \"'>\" + gantt.locale.date.month_full[i] + \"</option>\";\n        }\n\n        break;\n\n      case \"%d\":\n        sns._time_format_order[0] = index;\n        sns._time_format_order.size++; //days\n\n        for (i = 1; i < 32; i++) {\n          html += \"<option value='\" + i + \"'>\" + i + \"</option>\";\n        }\n\n        break;\n\n      case \"%H:%i\":\n        //  var last = 24*60, first = 0;\n        sns._time_format_order[3] = index;\n        sns._time_format_order.size++; //hours\n\n        i = settings.first;\n        tdate = settings.date.getDate();\n        sns._time_values = [];\n\n        while (i < settings.last) {\n          time = gantt.templates.time_picker(settings.date);\n          html += \"<option value='\" + i + \"'>\" + time + \"</option>\";\n\n          sns._time_values.push(i);\n\n          settings.date.setTime(settings.date.valueOf() + gantt._get_timepicker_step() * 60 * 1000);\n          diff = settings.date.getDate() != tdate ? 1 : 0; // moved or not to the next day\n\n          i = diff * 24 * 60 + settings.date.getHours() * 60 + settings.date.getMinutes();\n        }\n\n        break;\n\n      default:\n        break;\n    }\n\n    return html;\n  }\n};","module.exports = function (gantt) {\n  gantt.config.touch_drag = 500; //nearly immediate dnd\n\n  gantt.config.touch = true;\n  gantt.config.touch_feedback = true;\n  gantt.config.touch_feedback_duration = 1;\n  gantt._prevent_touch_scroll = false;\n\n  gantt._touch_feedback = function () {\n    if (gantt.config.touch_feedback) {\n      if (navigator.vibrate) navigator.vibrate(gantt.config.touch_feedback_duration);\n    }\n  };\n\n  gantt.attachEvent(\"onGanttReady\", gantt.bind(function () {\n    if (this.config.touch != \"force\") this.config.touch = this.config.touch && (navigator.userAgent.indexOf(\"Mobile\") != -1 || navigator.userAgent.indexOf(\"iPad\") != -1 || navigator.userAgent.indexOf(\"Android\") != -1 || navigator.userAgent.indexOf(\"Touch\") != -1) || navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1;\n\n    if (this.config.touch) {\n      var touchEventsSupported = true;\n\n      try {\n        document.createEvent(\"TouchEvent\");\n      } catch (e) {\n        touchEventsSupported = false;\n      }\n\n      if (touchEventsSupported) {\n        this._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\n          if (ev.touches && ev.touches.length > 1) return null;\n          if (ev.touches[0]) return {\n            target: ev.target,\n            pageX: ev.touches[0].pageX,\n            pageY: ev.touches[0].pageY,\n            clientX: ev.touches[0].clientX,\n            clientY: ev.touches[0].clientY\n          };else return ev;\n        }, function () {\n          return false;\n        });\n      } else if (window.navigator.pointerEnabled) {\n        this._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\n          if (ev.pointerType == \"mouse\") return null;\n          return ev;\n        }, function (ev) {\n          return !ev || ev.pointerType == \"mouse\";\n        });\n      } else if (window.navigator.msPointerEnabled) {\n        this._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\n          if (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\n          return ev;\n        }, function (ev) {\n          return !ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE;\n        });\n      }\n    }\n  }, gantt));\n\n  function findTargetView(event) {\n    var allViews = gantt.$layout.getCellsByType(\"viewCell\");\n\n    for (var i = 0; i < allViews.length; i++) {\n      var box = allViews[i].$view.getBoundingClientRect();\n\n      if (event.clientX >= box.left && event.clientX <= box.right && event.clientY <= box.bottom && event.clientY >= box.top) {\n        return allViews[i];\n      }\n    }\n  }\n\n  function getScrollState(view) {\n    var scrollX = view.$config.scrollX ? gantt.$ui.getView(view.$config.scrollX) : null;\n    var scrollY = view.$config.scrollY ? gantt.$ui.getView(view.$config.scrollY) : null;\n    var scrollState = {\n      x: null,\n      y: null\n    };\n\n    if (scrollX) {\n      var state = scrollX.getScrollState();\n\n      if (state.visible) {\n        scrollState.x = scrollX.$view.scrollLeft;\n      }\n    }\n\n    if (scrollY) {\n      var state = scrollY.getScrollState();\n\n      if (state.visible) {\n        scrollState.y = scrollY.$view.scrollTop;\n      }\n    }\n\n    return scrollState;\n  }\n\n  function scrollView(view, left, top) {\n    var scrollX = view.$config.scrollX ? gantt.$ui.getView(view.$config.scrollX) : null;\n    var scrollY = view.$config.scrollY ? gantt.$ui.getView(view.$config.scrollY) : null;\n\n    if (scrollX) {\n      scrollX.scrollTo(left, null);\n    }\n\n    if (scrollY) {\n      scrollY.scrollTo(null, top);\n    }\n  }\n\n  function getTaskDND() {\n    var tasksDnD;\n\n    if (gantt.$ui.getView(\"timeline\")) {\n      tasksDnD = gantt.$ui.getView(\"timeline\")._tasks_dnd;\n    }\n\n    return tasksDnD;\n  }\n\n  var touchHandlers = []; //we can't use native scrolling, as we need to sync momentum between different parts\n  //so we will block native scroll and use the custom one\n  //in future we can add custom momentum\n\n  gantt._touch_events = function (names, accessor, ignore) {\n    //webkit on android need to be handled separately\n    var dblclicktime = 0;\n    var actionMode = false;\n    var scrollMode = false;\n    var actionStart = null;\n    var scrollState;\n    var longTapTimer = null;\n    var currentDndId = null;\n    var dndNodes = [];\n    var targetView = null;\n\n    for (var i = 0; i < touchHandlers.length; i++) {\n      gantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\n    }\n\n    touchHandlers = []; //touch move\n\n    touchHandlers.push([gantt.$container, names[0], function (e) {\n      var tasksDnD = getTaskDND();\n      if (ignore(e)) return; //ignore common and scrolling moves\n\n      if (!actionMode) return;\n      if (longTapTimer) clearTimeout(longTapTimer);\n      var source = accessor(e);\n\n      if (tasksDnD && (tasksDnD.drag.id || tasksDnD.drag.start_drag)) {\n        tasksDnD.on_mouse_move(source);\n        if (e.preventDefault) e.preventDefault();\n        e.cancelBubble = true;\n        return false;\n      }\n\n      if (!gantt._prevent_touch_scroll) {\n        if (source && actionStart) {\n          var dx = actionStart.pageX - source.pageX;\n          var dy = actionStart.pageY - source.pageY;\n\n          if (!scrollMode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\n            scrollMode = true; //gantt._touch_scroll_active = scroll_mode = true;\n\n            dblclicktime = 0;\n\n            if (targetView) {\n              scrollState = getScrollState(targetView);\n            } else {\n              scrollState = gantt.getScrollState();\n            }\n          }\n\n          if (scrollMode) {\n            var newScrollState;\n            var scrollX = scrollState.x + dx;\n            var scrollY = scrollState.y + dy;\n\n            if (targetView) {\n              scrollView(targetView, scrollX, scrollY);\n              newScrollState = getScrollState(targetView);\n            } else {\n              gantt.scrollTo(scrollX, scrollY);\n              newScrollState = gantt.getScrollState();\n            }\n\n            if (scrollState.x != newScrollState.x && dy > 2 * dx || scrollState.y != newScrollState.y && dx > 2 * dy) {\n              return block_action(e);\n            }\n          }\n        }\n\n        return block_action(e);\n      }\n\n      return true;\n    }]); //block touch context menu in IE10\n\n    touchHandlers.push([this.$container, \"contextmenu\", function (e) {\n      if (actionMode) return block_action(e);\n    }]); //touch start\n\n    touchHandlers.push([this.$container, names[1], function (e) {\n      // block pull-to-refresh\n      if (document && document.body) {\n        document.body.classList.add(\"gantt_touch_active\");\n      }\n\n      if (ignore(e)) return;\n\n      if (e.touches && e.touches.length > 1) {\n        actionMode = false;\n        return;\n      }\n\n      actionStart = accessor(e);\n      targetView = findTargetView(actionStart);\n\n      if (!gantt._locate_css(actionStart, \"gantt_hor_scroll\") && !gantt._locate_css(actionStart, \"gantt_ver_scroll\")) {\n        actionMode = true;\n      }\n\n      var tasksDnD = getTaskDND(); //long tap\n\n      longTapTimer = setTimeout(function () {\n        var taskId = gantt.locate(actionStart);\n\n        if (tasksDnD && taskId && !gantt._locate_css(actionStart, \"gantt_link_control\") && !gantt._locate_css(actionStart, \"gantt_grid_data\")) {\n          tasksDnD.on_mouse_down(actionStart);\n\n          if (tasksDnD.drag && tasksDnD.drag.start_drag) {\n            cloneTaskRendered(taskId);\n\n            tasksDnD._start_dnd(actionStart);\n\n            gantt._touch_drag = true;\n            gantt.refreshTask(taskId);\n\n            gantt._touch_feedback();\n          }\n        }\n\n        longTapTimer = null;\n      }, gantt.config.touch_drag);\n    }]); //touch end\n\n    touchHandlers.push([this.$container, names[2], function (e) {\n      if (document && document.body) {\n        document.body.classList.remove(\"gantt_touch_active\");\n      }\n\n      if (ignore(e)) return;\n      if (longTapTimer) clearTimeout(longTapTimer);\n      gantt._touch_drag = false;\n      actionMode = false;\n      var source = accessor(e);\n      var tasksDnD = getTaskDND();\n      if (tasksDnD) tasksDnD.on_mouse_up(source);\n\n      if (currentDndId && gantt.isTaskExists(currentDndId)) {\n        gantt.refreshTask(currentDndId);\n\n        if (dndNodes.length) {\n          dndNodes.forEach(function (node) {\n            if (node.parentNode) {\n              node.parentNode.removeChild(node);\n            }\n          });\n\n          gantt._touch_feedback();\n        }\n      } //gantt._touch_scroll_active = action_mode = scroll_mode = false;\n\n\n      actionMode = scrollMode = false;\n      dndNodes = [];\n      currentDndId = null; //dbl-tap handling\n\n      if (actionStart && dblclicktime) {\n        var now = new Date();\n\n        if (now - dblclicktime < 500) {\n          var mouseEvents = gantt.$services.getService(\"mouseEvents\");\n          mouseEvents.onDoubleClick(actionStart);\n          block_action(e);\n        } else dblclicktime = now;\n      } else {\n        dblclicktime = new Date();\n      }\n    }]);\n\n    for (var i = 0; i < touchHandlers.length; i++) {\n      gantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\n    } //common helper, prevents event\n\n\n    function block_action(e) {\n      if (e && e.preventDefault) {\n        e.preventDefault();\n      }\n\n      e.cancelBubble = true;\n      return false;\n    }\n\n    function cloneTaskRendered(taskId) {\n      var renders = gantt._getTaskLayers();\n\n      var task = gantt.getTask(taskId);\n\n      if (task && gantt.isTaskVisible(taskId)) {\n        currentDndId = taskId;\n\n        for (var i = 0; i < renders.length; i++) {\n          task = renders[i].rendered[taskId];\n\n          if (task && task.getAttribute(gantt.config.task_attribute) && task.getAttribute(gantt.config.task_attribute) == taskId) {\n            var copy = task.cloneNode(true);\n            dndNodes.push(task);\n            renders[i].rendered[taskId] = copy;\n            task.style.display = \"none\";\n            copy.className += \" gantt_drag_move \";\n            task.parentNode.appendChild(copy); //return copy;\n          }\n        }\n      }\n    }\n  };\n};","import * as env from \"../../../utils/env\";\r\nimport * as eventable from \"../../../utils/eventable\";\r\nimport { IScale, TModifierKeys } from \"../../common/config\";\r\n\r\ninterface ITimelineZoomConfig {\r\n\thandler?: (e: Event) => {};\r\n\tstartDate?: Date;\r\n\tendDate?: Date;\r\n\tlevels: IZoomLevel[];\r\n\tactiveLevelIndex?: number;\r\n\twidthStep?: number;\r\n\tminColumnWidth?: number;\r\n\tmaxColumnWidth?: number;\r\n\tuseKey?: \"ctrlKey\" | \"altKey\" | \"shiftKey\";\r\n\ttrigger?: \"wheel\" | null | undefined;\r\n\telement?: Element | (() => Element);\r\n}\r\n\r\nconst USE_KEY = [\"ctrlKey\", \"altKey\", \"shiftKey\", \"metaKey\"];\r\n\r\ninterface IZoomLevel {\r\n\tname?: string;\r\n\tscale_height?: number;\r\n\tmin_column_width: number;\r\n\tscales: IScale[];\r\n}\r\n\r\nconst _defaultScales = [\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"month\",\r\n\t\t\tdate: \"%M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d\",\r\n\t\t\tstep: 1\r\n\t\t}\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t}\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"hour\",\r\n\t\t\tdate: \"%H:00\",\r\n\t\t\tstep: 8\r\n\t\t},\r\n\t],\r\n\t[\r\n\t\t{\r\n\t\t\tunit: \"day\",\r\n\t\t\tdate: \"%d %M\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t\t{\r\n\t\t\tunit: \"hour\",\r\n\t\t\tdate: \"%H:00\",\r\n\t\t\tstep: 1\r\n\t\t},\r\n\t],\r\n];\r\n\r\nexport default class TimelineZoom {\r\n\tpublic attachEvent: (eventName: string, handler: () => void) => string;\r\n\tpublic callEvent: (eventName: string, args: any[]) => any;\r\n\tpublic detachEvent: (eventName: string) => any;\r\n\tprotected _initialStartDate: Date;\r\n\tprotected _initialEndDate: Date;\r\n\tprotected _activeLevelIndex: number;\r\n\tprotected _levels: IZoomLevel[];\r\n\tprotected _handler: (e: any) => void;\r\n\tprotected $gantt;\r\n\tprotected _widthStep: number;\r\n\tprotected _minColumnWidth: number;\r\n\tprotected _maxColumnWidth: number;\r\n\tprotected _useKey: TModifierKeys;\r\n\tprotected _visibleDate: Date;\r\n\tprotected _initialized: boolean;\r\n\tprotected _domEvents: any;\r\n\r\n\tconstructor(gantt) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis._domEvents = this.$gantt._createDomEventScope();\r\n\t}\r\n\r\n\tpublic init(config: ITimelineZoomConfig) {\r\n\t\t// GS-1354 and GS-1318. If we check the headless mode using the function,\r\n\t\t// it will return false when Gantt is not initialized, but we may want to do it later\r\n\t\tif(this.$gantt.env.isNode){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._initialStartDate = config.startDate;\r\n\t\tthis._initialEndDate = config.endDate;\r\n\t\tthis._activeLevelIndex = config.activeLevelIndex ? config.activeLevelIndex : 0;\r\n\t\tthis._levels = this._mapScales(config.levels || _defaultScales);\r\n\t\tthis._handler = config.handler || this._defaultHandler;\r\n\t\tthis._minColumnWidth = config.minColumnWidth || 60;\r\n\t\tthis._maxColumnWidth = config.maxColumnWidth || 240;\r\n\t\tthis._widthStep = config.widthStep || 3/8 * config.minColumnWidth;\r\n\t\tthis._useKey = config.useKey;\r\n\r\n\t\tif(!this._initialized){\r\n\t\t\teventable(this);\r\n\t\t\tthis.$gantt.attachEvent(\"onGanttScroll\", () => {\r\n\t\t\t\tthis._getVisibleDate();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._domEvents.detachAll();\r\n\r\n\t\tif(config.trigger === \"wheel\"){\r\n\t\t\tif(this.$gantt.$root){\r\n\t\t\t\tthis._attachWheelEvent(config);\r\n\t\t\t}else{\r\n\t\t\t\tthis.$gantt.attachEvent(\"onGanttReady\", () => {\r\n\t\t\t\t\tthis._attachWheelEvent(config);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._initialized = true;\r\n\t\tthis.setLevel(this._activeLevelIndex);\r\n\t}\r\n\r\n\tpublic zoomIn = () => {\r\n\t\tconst index = this.getCurrentLevel() - 1;\r\n\t\tif(index < 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setLevel(index);\r\n\t}\r\n\r\n\tpublic zoomOut = () => {\r\n\t\tconst index = this.getCurrentLevel() + 1;\r\n\t\tif(index > this._levels.length - 1){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setLevel(index);\r\n\t}\r\n\r\n\tpublic getCurrentLevel = () => {\r\n\t\treturn this._activeLevelIndex;\r\n\t}\r\n\r\n\tpublic getLevels = () => {\r\n\t\treturn this._levels;\r\n\t}\r\n\r\n\tpublic setLevel = (level: number|string) => {\r\n\t\tconst zoomLevel = this._getZoomIndexByName(level);\r\n\r\n\t\tif(zoomLevel === -1){\r\n\t\t\tthis.$gantt.assert(zoomLevel !== -1, \"Invalid zoom level for gantt.ext.zoom.setLevel. \" + level + \" is not an expected value.\");\r\n\t\t}\r\n\t\tthis._setLevel(zoomLevel, 0);\r\n\t}\r\n\r\n\tprotected _getZoomIndexByName = (levelName: number|string) => {\r\n\t\tlet zoomLevel:number = -1;\r\n\t\tif(typeof levelName === \"string\"){\r\n\t\t\tif(!isNaN(Number(levelName)) &&  this._levels[Number(levelName)]){\r\n\t\t\t\tzoomLevel = Number(levelName);\r\n\t\t\t}else{\r\n\t\t\t\tfor(let i = 0; i < this._levels.length; i++){\r\n\t\t\t\t\tif(this._levels[i].name === levelName){\r\n\t\t\t\t\t\tzoomLevel = i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tzoomLevel = levelName;\r\n\t\t}\r\n\t\treturn zoomLevel;\r\n\t}\r\n\r\n\tprotected _mapScales(levels: IScale[][] | any): IZoomLevel[]{\r\n\t\treturn levels.map((l) => {\r\n\t\t\tif(Array.isArray(l)){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tscales: l\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn l;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprotected _getVisibleDate = () => {\r\n\t\t// GS-1450. Don't try to get the visible date if there is no timeline\r\n\t\tif (!this.$gantt.$task){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst scrollPos = this.$gantt.getScrollState().x;\r\n\t\tconst viewPort = this.$gantt.$task.offsetWidth;\r\n\t\tthis._visibleDate = this.$gantt.dateFromPos(scrollPos + viewPort/2);\r\n\t}\r\n\r\n\tprotected _setLevel = (level: number, cursorOffset: number) => {\r\n\t\tthis._activeLevelIndex = level;\r\n\r\n\t\tconst gantt = this.$gantt;\r\n\t\tconst nextConfig = gantt.copy(this._levels[this._activeLevelIndex]);\r\n\t\tconst chartConfig = gantt.copy(nextConfig);\r\n\t\tdelete chartConfig.name;\r\n\r\n\t\tgantt.mixin(gantt.config, chartConfig, true);\r\n\r\n\t\tconst isRendered = !!gantt.$root && !!gantt.$task;\r\n\r\n\t\tif(isRendered){\r\n\t\t\tif(cursorOffset){\r\n\t\t\t\tconst cursorDate = this.$gantt.dateFromPos(cursorOffset + this.$gantt.getScrollState().x);\r\n\t\t\t\tthis.$gantt.render();\r\n\t\t\t\tconst newPosition = this.$gantt.posFromDate(cursorDate);\r\n\t\t\t\tthis.$gantt.scrollTo(newPosition - cursorOffset);\r\n\t\t\t}else{\r\n\t\t\t\tconst viewPort = this.$gantt.$task.offsetWidth;\r\n\t\t\t\tif(!this._visibleDate){\r\n\t\t\t\t\tthis._getVisibleDate();\r\n\t\t\t\t}\r\n\t\t\t\tconst middleDate = this._visibleDate;\r\n\t\t\t\tthis.$gantt.render();\r\n\t\t\t\tconst newPosition = this.$gantt.posFromDate(middleDate);\r\n\t\t\t\tthis.$gantt.scrollTo(newPosition - viewPort/2);\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onAfterZoom\", [this._activeLevelIndex, nextConfig]);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _attachWheelEvent = (config) => {\r\n\t\tconst event = env.isFF ? \"wheel\" : \"mousewheel\";\r\n\t\tlet el: Element;\r\n\t\tif(typeof config.element === \"function\"){\r\n\t\t\tel = config.element();\r\n\t\t}else{\r\n\t\t\tel = config.element as Element;\r\n\t\t}\r\n\t\tif (!el){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._domEvents.attach(el, event, this.$gantt.bind(function(e) {\r\n\t\t\tif (this._useKey) {\r\n\t\t\t\tif (USE_KEY.indexOf(this._useKey) < 0) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!e[this._useKey]) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof this._handler === \"function\") {\r\n\t\t\t\tthis._handler.apply(this, [e]);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}, this), {passive: false});\r\n\t}\r\n\r\n\tprivate _defaultHandler = (e: any):void => {\r\n\t\tconst timelineOffset = this.$gantt.$task.getBoundingClientRect().x;\r\n\t\tconst cursorOffset = e.clientX - timelineOffset;\r\n\t\tconst wheelY = this.$gantt.env.isFF ? (e.deltaY*-40) : e.wheelDelta;\r\n\t\tlet wheelUp = false;\r\n\t\tif (wheelY > 0) {\r\n\t\t\twheelUp = true;\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tthis._setScaleSettings(wheelUp, cursorOffset);\r\n\t}\r\n\r\n\tprivate _setScaleSettings(wheelUp: boolean, cursorOffset: number) {\r\n\t\tif (wheelUp) {\r\n\t\t\tthis._stepUp(cursorOffset);\r\n\t\t} else {\r\n\t\t\tthis._stepDown(cursorOffset);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _setScaleDates = () => {\r\n\t\tif(this._initialStartDate && this._initialEndDate){\r\n\t\t\tthis.$gantt.config.start_date = this._initialStartDate;\r\n\t\t\tthis.$gantt.config.end_date = this._initialEndDate;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _stepUp(cursorOffset) {\r\n\t\tif (this._activeLevelIndex >= this._levels.length - 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet nextLevel = this._activeLevelIndex;\r\n\t\tthis._setScaleDates();\r\n\r\n\t\tif(this._widthStep){\r\n\t\t\tlet newColumnWidth = this.$gantt.config.min_column_width + this._widthStep;\r\n\t\t\tif (newColumnWidth > this._maxColumnWidth) {\r\n\t\t\t\tnewColumnWidth = this._minColumnWidth;\r\n\t\t\t\tnextLevel++;\r\n\t\t\t}\r\n\r\n\t\t\tthis.$gantt.config.min_column_width = newColumnWidth;\r\n\t\t}else{\r\n\t\t\tnextLevel++;\r\n\t\t}\r\n\t\tthis._setLevel(nextLevel, cursorOffset);\r\n\t}\r\n\tprivate _stepDown(cursorOffset) {\r\n\t\tif (this._activeLevelIndex < 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet nextLevel = this._activeLevelIndex;\r\n\t\tthis._setScaleDates();\r\n\r\n\t\tif(this._widthStep){\r\n\t\t\tlet newColumnWidth = this.$gantt.config.min_column_width - this._widthStep;\r\n\t\t\tif (newColumnWidth < this._minColumnWidth) {\r\n\t\t\t\tnewColumnWidth = this._maxColumnWidth;\r\n\t\t\t\tnextLevel--;\r\n\t\t\t}\r\n\t\t\tthis.$gantt.config.min_column_width = newColumnWidth;\r\n\t\t}else{\r\n\t\t\tnextLevel--;\r\n\t\t}\r\n\t\tthis._setLevel(nextLevel, cursorOffset);\r\n\t}\r\n}","if (window.dhtmlx) {\n  if (!window.dhtmlx.attaches) window.dhtmlx.attaches = {};\n\n  window.dhtmlx.attaches.attachGantt = function (start, end, gantt) {\n    var obj = document.createElement(\"DIV\");\n    gantt = gantt || window.gantt;\n    obj.id = \"gantt_\" + gantt.uid();\n    obj.style.width = \"100%\";\n    obj.style.height = \"100%\";\n    obj.cmp = \"grid\";\n    document.body.appendChild(obj);\n    this.attachObject(obj.id);\n    this.dataType = \"gantt\";\n    this.dataObj = gantt;\n    var that = this.vs[this.av];\n    that.grid = gantt;\n    gantt.init(obj.id, start, end);\n    obj.firstChild.style.border = \"none\";\n    that.gridId = obj.id;\n    that.gridObj = obj;\n    var method_name = \"_viewRestore\";\n    return this.vs[this[method_name]()].grid;\n  };\n}\n\nif (typeof window.dhtmlXCellObject != \"undefined\") {\n  window.dhtmlXCellObject.prototype.attachGantt = function (start, end, gantt) {\n    gantt = gantt || window.gantt;\n    var obj = document.createElement(\"DIV\");\n    obj.id = \"gantt_\" + gantt.uid();\n    obj.style.width = \"100%\";\n    obj.style.height = \"100%\";\n    obj.cmp = \"grid\";\n    document.body.appendChild(obj);\n    this.attachObject(obj.id);\n    this.dataType = \"gantt\";\n    this.dataObj = gantt;\n    gantt.init(obj.id, start, end);\n    obj.firstChild.style.border = \"none\";\n    obj = null;\n    this.callEvent(\"_onContentAttach\", []);\n    return this.dataObj;\n  };\n}\n\nmodule.exports = null;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nif (window.jQuery) {\n  (function ($) {\n    var methods = [];\n\n    $.fn.dhx_gantt = function (config) {\n      config = config || {};\n\n      if (typeof config === 'string') {\n        if (methods[config]) {\n          return methods[config].apply(this, []);\n        } else {\n          $.error('Method ' + config + ' does not exist on jQuery.dhx_gantt');\n        }\n      } else {\n        var views = [];\n        this.each(function () {\n          if (this && this.getAttribute) {\n            if (!this.gantt && !(window.gantt.$root == this)) {\n              var newgantt = window.gantt.$container && window.Gantt ? window.Gantt.getGanttInstance() : window.gantt;\n\n              for (var key in config) {\n                if (key != \"data\") newgantt.config[key] = config[key];\n              }\n\n              newgantt.init(this);\n              if (config.data) newgantt.parse(config.data);\n              views.push(newgantt);\n            } else views.push(_typeof(this.gantt) == \"object\" ? this.gantt : window.gantt);\n          }\n        });\n        if (views.length === 1) return views[0];\n        return views;\n      }\n    };\n  })(window.jQuery);\n}\n\nmodule.exports = null;","var domHelpers = require(\"../utils/dom_helpers\");\n\nvar isHeadless = require(\"../../../utils/is_headless\");\n\nmodule.exports = function (gantt) {\n  var scrollRange = 50,\n      scrollStep = 30,\n      scrollDelay = 10,\n      scrollSpeed = 50;\n  var interval = null,\n      isMove = false,\n      delayTimeout = null,\n      startPos = {\n    started: false\n  },\n      eventPos = {};\n\n  function isDisplayed(element) {\n    return element && domHelpers.isChildOf(element, gantt.$root) && element.offsetHeight;\n  }\n\n  function getAutoscrollContainer() {\n    var element;\n\n    if (isDisplayed(gantt.$task)) {\n      element = gantt.$task;\n    } else if (isDisplayed(gantt.$grid)) {\n      element = gantt.$grid;\n    } else {\n      element = gantt.$root;\n    }\n\n    return element;\n  }\n\n  function isScrollState() {\n    var dragMarker = !!document.querySelector(\".gantt_drag_marker\");\n    var isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\") || !!document.querySelector(\".gantt_drag_marker.gantt_row_grid_resize_area\");\n    var isLink = !!document.querySelector(\".gantt_link_direction\");\n    var state = gantt.getState();\n    var isClickDrag = state.autoscroll;\n    isMove = dragMarker && !isResize && !isLink;\n    return !(!state.drag_mode && !dragMarker || isResize) || isClickDrag;\n  }\n\n  function defineDelayTimeout(state) {\n    if (delayTimeout) {\n      clearTimeout(delayTimeout);\n      delayTimeout = null;\n    }\n\n    if (state) {\n      var speed = gantt.config.autoscroll_speed;\n      if (speed && speed < 10) // limit speed value to 10\n        speed = 10;\n      delayTimeout = setTimeout(function () {\n        interval = setInterval(tick, speed || scrollSpeed);\n      }, gantt.config.autoscroll_delay || scrollDelay);\n    }\n  }\n\n  function defineScrollInterval(state) {\n    if (state) {\n      defineDelayTimeout(true);\n\n      if (!startPos.started) {\n        startPos.x = eventPos.x;\n        startPos.y = eventPos.y;\n        startPos.started = true;\n      }\n    } else {\n      if (interval) {\n        clearInterval(interval);\n        interval = null;\n      }\n\n      defineDelayTimeout(false);\n      startPos.started = false;\n    }\n  }\n\n  function autoscrollInterval(event) {\n    var isScroll = isScrollState();\n\n    if ((interval || delayTimeout) && !isScroll) {\n      defineScrollInterval(false);\n    }\n\n    if (!gantt.config.autoscroll || !isScroll) {\n      return false;\n    }\n\n    eventPos = {\n      x: event.clientX,\n      y: event.clientY\n    }; // if it is a mobile device, we need to detect the touch event coords\n\n    if (event.type == \"touchmove\") {\n      eventPos.x = event.targetTouches[0].clientX;\n      eventPos.y = event.targetTouches[0].clientY;\n    }\n\n    if (!interval && isScroll) {\n      defineScrollInterval(true);\n    }\n  }\n\n  function tick() {\n    if (!isScrollState()) {\n      defineScrollInterval(false);\n      return false;\n    }\n\n    var container = getAutoscrollContainer();\n\n    if (!container) {\n      return;\n    } // GS-1150: if we reorder or resize something in the grid, we should obtain the grid container\n\n\n    var gridDrag = false;\n    var gridMarkers = [\".gantt_drag_marker.gantt_grid_resize_area\", \".gantt_drag_marker .gantt_row.gantt_row_task\", \".gantt_drag_marker.gantt_grid_dnd_marker\"];\n    gridMarkers.forEach(function (selector) {\n      gridDrag = gridDrag || !!document.querySelector(selector);\n    });\n\n    if (gridDrag) {\n      container = gantt.$grid;\n    }\n\n    var box = domHelpers.getNodePosition(container);\n    var posX = eventPos.x - box.x;\n    var posY = eventPos.y - box.y + window.scrollY; // GS-1315: window.scrollY here and below for the elements above Gantt\n\n    var scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\n    var scrollTop = need_scroll(posY, box.height, startPos.y - box.y + window.scrollY);\n    var scrollState = gantt.getScrollState();\n    var currentScrollTop = scrollState.y,\n        scrollOuterHeight = scrollState.inner_height,\n        scrollInnerHeight = scrollState.height,\n        currentScrollLeft = scrollState.x,\n        scrollOuterWidth = scrollState.inner_width,\n        scrollInnerWidth = scrollState.width; // do scrolling only if we have scrollable area to do so\n\n    if (scrollTop && !scrollOuterHeight) {\n      scrollTop = 0;\n    } else if (scrollTop < 0 && !currentScrollTop) {\n      scrollTop = 0;\n    } else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\n      scrollTop = 0;\n    }\n\n    if (scrollLeft && !scrollOuterWidth) {\n      scrollLeft = 0;\n    } else if (scrollLeft < 0 && !currentScrollLeft) {\n      scrollLeft = 0;\n    } else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\n      scrollLeft = 0;\n    }\n\n    var step = gantt.config.autoscroll_step;\n    if (step && step < 2) // limit step value to 2\n      step = 2;\n    scrollLeft = scrollLeft * (step || scrollStep);\n    scrollTop = scrollTop * (step || scrollStep);\n\n    if (scrollLeft || scrollTop) {\n      scroll(scrollLeft, scrollTop);\n    }\n  }\n\n  function need_scroll(pos, boxSize, startCoord) {\n    if (pos - scrollRange < 0 && pos < startCoord) return -1;else if (pos > boxSize - scrollRange && pos > startCoord) return 1;\n    return 0;\n  }\n\n  function scroll(left, top) {\n    var scrollState = gantt.getScrollState();\n    var scrollLeft = null,\n        scrollTop = null;\n\n    if (left) {\n      scrollLeft = scrollState.x + left;\n      scrollLeft = Math.min(scrollState.width, scrollLeft);\n      scrollLeft = Math.max(0, scrollLeft);\n    }\n\n    if (top) {\n      scrollTop = scrollState.y + top;\n      scrollTop = Math.min(scrollState.height, scrollTop);\n      scrollTop = Math.max(0, scrollTop);\n    }\n\n    gantt.scrollTo(scrollLeft, scrollTop);\n  }\n\n  gantt.attachEvent(\"onGanttReady\", function () {\n    if (!isHeadless(gantt)) {\n      var eventElement = domHelpers.getRootNode(gantt.$root) || document.body;\n      gantt.eventRemove(eventElement, \"mousemove\", autoscrollInterval);\n      gantt.event(eventElement, \"mousemove\", autoscrollInterval);\n      gantt.eventRemove(eventElement, \"touchmove\", autoscrollInterval);\n      gantt.event(eventElement, \"touchmove\", autoscrollInterval);\n      gantt.eventRemove(eventElement, \"pointermove\", autoscrollInterval);\n      gantt.event(eventElement, \"pointermove\", autoscrollInterval);\n    }\n  });\n  gantt.attachEvent(\"onDestroy\", function () {\n    defineScrollInterval(false);\n  });\n};","module.exports = function (gantt) {\n  if (!gantt.ext) {\n    gantt.ext = {};\n  }\n\n  var modules = [require(\"./autoscroll\"), require(\"./jquery_hooks\"), require(\"./dhtmlx_hooks\")];\n\n  for (var i = 0; i < modules.length; i++) {\n    if (modules[i]) modules[i](gantt);\n  }\n\n  var TimelineZoom = require(\"./timeline_zoom\")[\"default\"];\n\n  gantt.ext.zoom = new TimelineZoom(gantt);\n};","module.exports = function (gantt) {\n  gantt.skins[\"contrast_white\"] = {\n    config: {\n      grid_width: 360,\n      row_height: 35,\n      scale_height: 35,\n      link_line_width: 2,\n      link_arrow_size: 6,\n      lightbox_additional_height: 75\n    },\n    _second_column_width: 100,\n    _third_column_width: 80\n  };\n};","module.exports = function (gantt) {\n  gantt.skins[\"contrast_black\"] = {\n    config: {\n      grid_width: 360,\n      row_height: 35,\n      scale_height: 35,\n      link_line_width: 2,\n      link_arrow_size: 6,\n      lightbox_additional_height: 75\n    },\n    _second_column_width: 100,\n    _third_column_width: 80\n  };\n};","module.exports = function (gantt) {\n  gantt.skins.material = {\n    config: {\n      grid_width: 411,\n      row_height: 34,\n      task_height_offset: 6,\n      scale_height: 36,\n      link_line_width: 2,\n      link_arrow_size: 6,\n      lightbox_additional_height: 80\n    },\n    _second_column_width: 110,\n    _third_column_width: 75,\n    _redefine_lightbox_buttons: {\n      \"buttons_left\": [\"dhx_delete_btn\"],\n      \"buttons_right\": [\"dhx_save_btn\", \"dhx_cancel_btn\"]\n    }\n  };\n  gantt.attachEvent(\"onAfterTaskDrag\", function (id) {\n    var t = gantt.getTaskNode(id);\n\n    if (t) {\n      t.className += \" gantt_drag_animation\";\n      setTimeout(function () {\n        var indx = t.className.indexOf(\" gantt_drag_animation\");\n\n        if (indx > -1) {\n          t.className = t.className.slice(0, indx);\n        }\n      }, 200);\n    }\n  });\n};","module.exports = function (gantt) {\n  gantt.skins.broadway = {\n    config: {\n      grid_width: 360,\n      row_height: 35,\n      scale_height: 35,\n      link_line_width: 1,\n      link_arrow_size: 7,\n      lightbox_additional_height: 86\n    },\n    _second_column_width: 90,\n    _third_column_width: 80,\n    _lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\n    _config_buttons_left: {},\n    _config_buttons_right: {\n      \"gantt_delete_btn\": \"icon_delete\",\n      \"gantt_save_btn\": \"icon_save\"\n    }\n  };\n};","module.exports = function (gantt) {\n  gantt.skins.terrace = {\n    config: {\n      grid_width: 360,\n      row_height: 35,\n      scale_height: 35,\n      link_line_width: 2,\n      link_arrow_size: 6,\n      lightbox_additional_height: 75\n    },\n    _second_column_width: 90,\n    _third_column_width: 70\n  };\n};","module.exports = function (gantt) {\n  gantt.skins.meadow = {\n    config: {\n      grid_width: 350,\n      row_height: 27,\n      scale_height: 30,\n      link_line_width: 2,\n      link_arrow_size: 6,\n      lightbox_additional_height: 72\n    },\n    _second_column_width: 95,\n    _third_column_width: 80\n  };\n};","module.exports = function (gantt) {\n  gantt.skins.skyblue = {\n    config: {\n      grid_width: 350,\n      row_height: 27,\n      scale_height: 27,\n      link_line_width: 1,\n      link_arrow_size: 8,\n      lightbox_additional_height: 75\n    },\n    _second_column_width: 95,\n    _third_column_width: 80\n  };\n};","function _configure(col, data, force) {\n  for (var key in data) {\n    if (typeof col[key] == \"undefined\" || force) col[key] = data[key];\n  }\n}\n\nfunction _get_skin(force, gantt) {\n  var skin = gantt.skin;\n\n  if (!skin || force) {\n    var links = document.getElementsByTagName(\"link\");\n\n    for (var i = 0; i < links.length; i++) {\n      var res = links[i].href.match(\"dhtmlxgantt_([a-z_]+).css\");\n\n      if (res) {\n        if (gantt.skins[res[1]] || !skin) {\n          skin = res[1];\n          break;\n        }\n      }\n    }\n  }\n\n  gantt.skin = skin || \"terrace\";\n  var skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"]; //apply skin related settings\n\n  _configure(gantt.config, skinset.config, force);\n\n  var config = gantt.getGridColumns();\n  if (config[1] && !gantt.defined(config[1].width)) config[1].width = skinset._second_column_width;\n  if (config[2] && !gantt.defined(config[2].width)) config[2].width = skinset._third_column_width;\n\n  for (var i = 0; i < config.length; i++) {\n    var column = config[i];\n\n    if (column.name == \"add\") {\n      if (!column.width) {\n        column.width = 44;\n      }\n\n      if (!(gantt.defined(column.min_width) && gantt.defined(column.max_width))) {\n        column.min_width = column.min_width || column.width;\n        column.max_width = column.max_width || column.width;\n      }\n\n      if (column.min_width) column.min_width = +column.min_width;\n      if (column.max_width) column.max_width = +column.max_width;\n\n      if (column.width) {\n        column.width = +column.width;\n        column.width = column.min_width && column.min_width > column.width ? column.min_width : column.width;\n        column.width = column.max_width && column.max_width < column.width ? column.max_width : column.width;\n      }\n    }\n  }\n\n  if (skinset.config.task_height) {\n    gantt.config.task_height = skinset.config.task_height || \"full\";\n  }\n\n  if (skinset.config.bar_height) {\n    gantt.config.bar_height = skinset.config.bar_height || \"full\";\n  }\n\n  if (skinset._lightbox_template) gantt._lightbox_template = skinset._lightbox_template;\n\n  if (skinset._redefine_lightbox_buttons) {\n    gantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\n    gantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\n  }\n\n  gantt.resetLightbox();\n}\n\nmodule.exports = function (gantt) {\n  if (!gantt.resetSkin) {\n    gantt.resetSkin = function () {\n      this.skin = \"\";\n\n      _get_skin(true, this);\n    };\n\n    gantt.skins = {};\n    gantt.attachEvent(\"onGanttLayoutReady\", function () {\n      _get_skin(false, this);\n    });\n  }\n};","function createLayoutFacade() {\n  function getTimeline(gantt) {\n    return gantt.$ui.getView(\"timeline\");\n  }\n\n  function getGrid(gantt) {\n    return gantt.$ui.getView(\"grid\");\n  }\n\n  function getBaseCell(gantt) {\n    var timeline = getTimeline(gantt);\n\n    if (timeline && !timeline.$config.hidden) {\n      return timeline;\n    } else {\n      var grid = getGrid(gantt);\n\n      if (grid && !grid.$config.hidden) {\n        return grid;\n      } else {\n        return null;\n      }\n    }\n  }\n\n  function getVerticalScrollbar(gantt) {\n    var baseCell = null; // GS-1150: if we reorder or resize something in the grid, we should obtain the grid container\n\n    var gridDrag = false;\n    var gridMarkers = [\".gantt_drag_marker.gantt_grid_resize_area\", \".gantt_drag_marker .gantt_row.gantt_row_task\", \".gantt_drag_marker.gantt_grid_dnd_marker\"];\n    gridMarkers.forEach(function (selector) {\n      gridDrag = gridDrag || !!document.querySelector(selector);\n    });\n\n    if (gridDrag) {\n      baseCell = getGrid(gantt);\n    } else {\n      baseCell = getBaseCell(gantt);\n    } // GS-1827. If there is no grid and timeline, there is no scrollbar for them\n\n\n    if (!baseCell) {\n      return null;\n    }\n\n    var verticalScrollbar = getAttachedScrollbar(gantt, baseCell, \"scrollY\");\n    return verticalScrollbar;\n  }\n\n  function getHorizontalScrollbar(gantt) {\n    var baseCell = getBaseCell(gantt);\n\n    if (!baseCell || baseCell.id == \"grid\") {\n      return null; // if the timeline is not displayed, do not return the scrollbar\n    }\n\n    var horizontalScrollbar = getAttachedScrollbar(gantt, baseCell, \"scrollX\");\n    return horizontalScrollbar;\n  }\n\n  function getAttachedScrollbar(gantt, cell, type) {\n    var attachedScrollbar = cell.$config[type];\n    var scrollbarView = gantt.$ui.getView(attachedScrollbar);\n    return scrollbarView;\n  }\n\n  var DEFAULT_VALUE = \"DEFAULT_VALUE\";\n\n  function tryCall(getView, method, args, fallback) {\n    var view = getView(this);\n\n    if (!(view && view.isVisible())) {\n      if (fallback) {\n        return fallback();\n      } else {\n        return DEFAULT_VALUE;\n      }\n    } else {\n      return view[method].apply(view, args);\n    }\n  }\n\n  return {\n    getColumnIndex: function getColumnIndex(name) {\n      var res = tryCall.call(this, getGrid, \"getColumnIndex\", [name]);\n\n      if (res === DEFAULT_VALUE) {\n        return 0;\n      } else {\n        return res;\n      }\n    },\n    dateFromPos: function dateFromPos(x) {\n      var res = tryCall.call(this, getTimeline, \"dateFromPos\", Array.prototype.slice.call(arguments));\n\n      if (res === DEFAULT_VALUE) {\n        return this.getState().min_date;\n      } else {\n        return res;\n      }\n    },\n    posFromDate: function posFromDate(date) {\n      var res = tryCall.call(this, getTimeline, \"posFromDate\", [date]);\n\n      if (res === DEFAULT_VALUE) {\n        return 0;\n      } else {\n        return res;\n      }\n    },\n    getRowTop: function getRowTop(index) {\n      var self = this;\n      var res = tryCall.call(self, getTimeline, \"getRowTop\", [index], function () {\n        return tryCall.call(self, getGrid, \"getRowTop\", [index]);\n      });\n\n      if (res === DEFAULT_VALUE) {\n        return 0;\n      } else {\n        return res;\n      }\n    },\n    getTaskTop: function getTaskTop(id) {\n      var self = this;\n      var res = tryCall.call(self, getTimeline, \"getItemTop\", [id], function () {\n        return tryCall.call(self, getGrid, \"getItemTop\", [id]);\n      });\n\n      if (res === DEFAULT_VALUE) {\n        return 0;\n      } else {\n        return res;\n      }\n    },\n    getTaskPosition: function getTaskPosition(task, start_date, end_date) {\n      var res = tryCall.call(this, getTimeline, \"getItemPosition\", [task, start_date, end_date]);\n\n      if (res === DEFAULT_VALUE) {\n        var top = this.getTaskTop(task.id);\n        var height = this.getTaskBarHeight(task.id);\n        return {\n          left: 0,\n          top: top,\n          height: height,\n          width: 0\n        };\n      } else {\n        return res;\n      }\n    },\n    getTaskBarHeight: function getTaskBarHeight(taskId, isMilestoneRender) {\n      var self = this;\n      var res = tryCall.call(self, getTimeline, \"getBarHeight\", [taskId, isMilestoneRender], function () {\n        return tryCall.call(self, getGrid, \"getItemHeight\", [taskId]);\n      });\n\n      if (res === DEFAULT_VALUE) {\n        return 0;\n      } else {\n        return res;\n      }\n    },\n    getTaskHeight: function getTaskHeight(taskId) {\n      var self = this;\n      var res = tryCall.call(self, getTimeline, \"getItemHeight\", [taskId], function () {\n        return tryCall.call(self, getGrid, \"getItemHeight\", [taskId]);\n      });\n\n      if (res === DEFAULT_VALUE) {\n        return 0;\n      } else {\n        return res;\n      }\n    },\n    columnIndexByDate: function columnIndexByDate(date) {\n      var res = tryCall.call(this, getTimeline, \"columnIndexByDate\", [date]);\n\n      if (res === DEFAULT_VALUE) {\n        return 0;\n      } else {\n        return res;\n      }\n    },\n    roundTaskDates: function roundTaskDates() {\n      tryCall.call(this, getTimeline, \"roundTaskDates\", []);\n    },\n    getScale: function getScale() {\n      var res = tryCall.call(this, getTimeline, \"getScale\", []);\n\n      if (res === DEFAULT_VALUE) {\n        return null;\n      } else {\n        return res;\n      }\n    },\n    getTaskNode: function getTaskNode(id) {\n      var timeline = getTimeline(this);\n\n      if (!timeline || !timeline.isVisible()) {\n        return null;\n      } else {\n        var node = timeline._taskRenderer.rendered[id];\n\n        if (!node) {\n          var domAttr = timeline.$config.item_attribute;\n          node = timeline.$task_bars.querySelector(\"[\" + domAttr + \"='\" + id + \"']\");\n        }\n\n        return node || null;\n      }\n    },\n    getLinkNode: function getLinkNode(id) {\n      var timeline = getTimeline(this);\n\n      if (!timeline.isVisible()) {\n        return null;\n      } else {\n        return timeline._linkRenderer.rendered[id];\n      }\n    },\n    scrollTo: function scrollTo(left, top) {\n      var vertical = getVerticalScrollbar(this);\n      var horizontal = getHorizontalScrollbar(this);\n      var oldH = {\n        position: 0\n      },\n          oldV = {\n        position: 0\n      };\n\n      if (vertical) {\n        oldV = vertical.getScrollState();\n      }\n\n      if (horizontal) {\n        oldH = horizontal.getScrollState();\n      }\n\n      var scrollHorizontal = horizontal && left * 1 == left;\n      var scrollVertical = vertical && top * 1 == top;\n      var scrollBoth = scrollHorizontal && scrollVertical;\n\n      if (scrollBoth) {\n        // some views will be scrolled both horizontally and vertically and smart rendering can be called twice\n        // set flag in order not to invoke smart rendering at the horizontal scroll stage\n        // so it will repaint only once when the scroll is completed\n        var verticalViews = vertical._getLinkedViews();\n\n        var horizontalViews = horizontal._getLinkedViews();\n\n        var commonViews = [];\n\n        for (var i = 0; i < verticalViews.length; i++) {\n          for (var j = 0; j < horizontalViews.length; j++) {\n            if (verticalViews[i].$config.id && horizontalViews[j].$config.id && verticalViews[i].$config.id === horizontalViews[j].$config.id) {\n              commonViews.push(verticalViews[i].$config.id);\n            }\n          }\n        }\n      }\n\n      if (scrollHorizontal) {\n        if (commonViews) {\n          commonViews.forEach(function (viewId) {\n            this.$ui.getView(viewId).$config.$skipSmartRenderOnScroll = true;\n          }.bind(this));\n        }\n\n        horizontal.scroll(left);\n\n        if (commonViews) {\n          commonViews.forEach(function (viewId) {\n            this.$ui.getView(viewId).$config.$skipSmartRenderOnScroll = false;\n          }.bind(this));\n        }\n      }\n\n      if (scrollVertical) {\n        vertical.scroll(top);\n      }\n\n      var newV = {\n        position: 0\n      },\n          newH = {\n        position: 0\n      };\n\n      if (vertical) {\n        newV = vertical.getScrollState();\n      }\n\n      if (horizontal) {\n        newH = horizontal.getScrollState();\n      }\n\n      this.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\n    },\n    showDate: function showDate(date) {\n      var date_x = this.posFromDate(date);\n      var scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\n      this.scrollTo(scroll_to);\n    },\n    showTask: function showTask(id) {\n      var pos = this.getTaskPosition(this.getTask(id)); // GS-1261: we need to show the start_date even in the RTL mode\n\n      var leftPos = pos.left;\n      if (this.config.rtl) leftPos = pos.left + pos.width;\n      var left = Math.max(leftPos - this.config.task_scroll_offset, 0);\n\n      var dataHeight = this._scroll_state().y;\n\n      var top;\n\n      if (!dataHeight) {\n        top = pos.top;\n      } else {\n        top = pos.top - (dataHeight - this.getTaskBarHeight(id)) / 2;\n      }\n\n      this.scrollTo(left, top); // GS-1150: if the grid and timeline have different scrollbars, we need to scroll thegrid to show the task\n\n      var gridCell = getGrid(this);\n      var timelineCell = getTimeline(this);\n\n      if (gridCell && timelineCell && gridCell.$config.scrollY != timelineCell.$config.scrollY) {\n        var gridScrollbar = getAttachedScrollbar(this, gridCell, \"scrollY\");\n        gridScrollbar.scrollTo(null, top);\n      }\n    },\n    _scroll_state: function _scroll_state() {\n      var result = {\n        x: false,\n        y: false,\n        x_pos: 0,\n        y_pos: 0,\n        scroll_size: this.config.scroll_size + 1,\n        //1px for inner content\n        x_inner: 0,\n        y_inner: 0\n      };\n      var scrollVer = getVerticalScrollbar(this),\n          scrollHor = getHorizontalScrollbar(this);\n\n      if (scrollHor) {\n        var horState = scrollHor.getScrollState();\n\n        if (horState.visible) {\n          result.x = horState.size;\n          result.x_inner = horState.scrollSize;\n        }\n\n        result.x_pos = horState.position || 0;\n      }\n\n      if (scrollVer) {\n        var verState = scrollVer.getScrollState();\n\n        if (verState.visible) {\n          result.y = verState.size;\n          result.y_inner = verState.scrollSize;\n        }\n\n        result.y_pos = verState.position || 0;\n      }\n\n      return result;\n    },\n    getScrollState: function getScrollState() {\n      var state = this._scroll_state();\n\n      return {\n        x: state.x_pos,\n        y: state.y_pos,\n        inner_width: state.x,\n        inner_height: state.y,\n        width: state.x_inner,\n        height: state.y_inner\n      };\n    },\n    getLayoutView: function getLayoutView(cellName) {\n      return this.$ui.getView(cellName);\n    },\n    scrollLayoutCell: function scrollLayoutCell(cellName, left, top) {\n      var cell = this.$ui.getView(cellName);\n\n      if (!cell) {\n        return false;\n      }\n\n      if (left !== null) {\n        var horizontalScroll = this.$ui.getView(cell.$config.scrollX);\n\n        if (horizontalScroll) {\n          horizontalScroll.scrollTo(left, null);\n        }\n      }\n\n      if (top !== null) {\n        var verticalScroll = this.$ui.getView(cell.$config.scrollY);\n\n        if (verticalScroll) {\n          verticalScroll.scrollTo(null, top);\n        }\n      }\n    }\n  };\n}\n\nmodule.exports = createLayoutFacade;","module.exports = function (gantt) {\n  delete gantt.addTaskLayer;\n  delete gantt.addLinkLayer;\n};","var domHelpers = require(\"./utils/dom_helpers\");\n\nvar initializer = function () {\n  return function (gantt) {\n    return {\n      getVerticalScrollbar: function getVerticalScrollbar() {\n        return gantt.$ui.getView(\"scrollVer\");\n      },\n      getHorizontalScrollbar: function getHorizontalScrollbar() {\n        return gantt.$ui.getView(\"scrollHor\");\n      },\n      _legacyGridResizerClass: function _legacyGridResizerClass(layout) {\n        var resizers = layout.getCellsByType(\"resizer\");\n\n        for (var i = 0; i < resizers.length; i++) {\n          var r = resizers[i];\n          var gridResizer = false;\n          var prev = r.$parent.getPrevSibling(r.$id);\n\n          if (prev && prev.$config && prev.$config.id === \"grid\") {\n            gridResizer = true;\n          } else {\n            var next = r.$parent.getNextSibling(r.$id);\n\n            if (next && next.$config && next.$config.id === \"grid\") {\n              gridResizer = true;\n            }\n          }\n\n          if (gridResizer) {\n            r.$config.css = (r.$config.css ? r.$config.css + \" \" : \"\") + \"gantt_grid_resize_wrap\";\n          }\n        }\n      },\n      onCreated: function onCreated(layout) {\n        var first = true;\n\n        this._legacyGridResizerClass(layout);\n\n        layout.attachEvent(\"onBeforeResize\", function () {\n          var mainTimeline = gantt.$ui.getView(\"timeline\");\n          if (mainTimeline) mainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\n          var mainGrid = gantt.$ui.getView(\"grid\");\n          if (!mainGrid) return;\n\n          var colsWidth = mainGrid._getColsTotalWidth();\n\n          var hideGrid = !gantt.config.show_grid || !gantt.config.grid_width || colsWidth === 0;\n\n          if (first && !hideGrid && colsWidth !== false) {\n            gantt.config.grid_width = colsWidth;\n          }\n\n          mainGrid.$config.hidden = mainGrid.$parent.$config.hidden = hideGrid;\n\n          if (!mainGrid.$config.hidden) {\n            /* restrict grid width due to min_width, max_width, min_grid_column_width */\n            var grid_limits = mainGrid._getGridWidthLimits();\n\n            if (grid_limits[0] && gantt.config.grid_width < grid_limits[0]) gantt.config.grid_width = grid_limits[0];\n            if (grid_limits[1] && gantt.config.grid_width > grid_limits[1]) gantt.config.grid_width = grid_limits[1];\n\n            if (mainTimeline && gantt.config.show_chart) {\n              mainGrid.$config.width = gantt.config.grid_width - 1; // GS-1314: Don't let the non-scrollable grid to be larger than the container with the correct width\n\n              if (!mainGrid.$config.scrollable && mainGrid.$config.scrollY && gantt.$root.offsetWidth) {\n                var ganttContainerWidth = mainGrid.$gantt.$layout.$container.offsetWidth;\n                var verticalScrollbar = gantt.$ui.getView(mainGrid.$config.scrollY);\n                var verticalScrollbarWidth = verticalScrollbar.$config.width;\n                var gridOverflow = ganttContainerWidth - (mainGrid.$config.width + verticalScrollbarWidth);\n\n                if (gridOverflow < 0) {\n                  mainGrid.$config.width += gridOverflow;\n                  gantt.config.grid_width += gridOverflow;\n                }\n              }\n\n              if (!first) {\n                if (mainTimeline && !domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\n                  // timeline is being displayed after being not visible, reset grid with from full screen\n                  if (!mainGrid.$config.original_grid_width) {\n                    var skinSettings = gantt.skins[gantt.skin];\n\n                    if (skinSettings && skinSettings.config && skinSettings.config.grid_width) {\n                      mainGrid.$config.original_grid_width = skinSettings.config.grid_width;\n                    } else {\n                      mainGrid.$config.original_grid_width = 0;\n                    }\n                  }\n\n                  gantt.config.grid_width = mainGrid.$config.original_grid_width;\n                  mainGrid.$parent.$config.width = gantt.config.grid_width;\n                } else {\n                  mainGrid.$parent._setContentSize(mainGrid.$config.width, null);\n\n                  gantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, {\n                    value: gantt.config.grid_width,\n                    isGravity: false\n                  });\n                }\n              } else {\n                mainGrid.$parent.$config.width = gantt.config.grid_width;\n\n                if (mainGrid.$parent.$config.group) {\n                  gantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, {\n                    value: mainGrid.$parent.$config.width,\n                    isGravity: false\n                  });\n                }\n              }\n            } else {\n              if (mainTimeline && domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\n                // hiding timeline, remember grid with to restore it when timeline is displayed again\n                mainGrid.$config.original_grid_width = gantt.config.grid_width;\n              }\n\n              if (!first) {\n                mainGrid.$parent.$config.width = 0;\n              }\n            }\n          }\n\n          first = false;\n        });\n\n        this._initScrollStateEvents(layout);\n      },\n      _initScrollStateEvents: function _initScrollStateEvents(layout) {\n        gantt._getVerticalScrollbar = this.getVerticalScrollbar;\n        gantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\n        var vertical = this.getVerticalScrollbar();\n        var horizontal = this.getHorizontalScrollbar();\n\n        if (vertical) {\n          vertical.attachEvent(\"onScroll\", function (oldPos, newPos, dir) {\n            var scrollState = gantt.getScrollState();\n            gantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\n          });\n        }\n\n        if (horizontal) {\n          horizontal.attachEvent(\"onScroll\", function (oldPos, newPos, dir) {\n            var scrollState = gantt.getScrollState();\n            gantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]); // if the grid doesn't fit the width, scroll the row container\n\n            var grid = gantt.$ui.getView(\"grid\");\n\n            if (grid && grid.$grid_data && !grid.$config.scrollable) {\n              grid.$grid_data.style.left = grid.$grid.scrollLeft + \"px\";\n              grid.$grid_data.scrollLeft = grid.$grid.scrollLeft;\n            }\n          });\n        }\n\n        layout.attachEvent(\"onResize\", function () {\n          if (vertical && !gantt.$scroll_ver) {\n            gantt.$scroll_ver = vertical.$scroll_ver;\n          }\n\n          if (horizontal && !gantt.$scroll_hor) {\n            gantt.$scroll_hor = horizontal.$scroll_hor;\n          }\n        });\n      },\n      _findGridResizer: function _findGridResizer(layout, grid) {\n        var resizers = layout.getCellsByType(\"resizer\");\n        var gridFirst = true;\n        var gridResizer;\n\n        for (var i = 0; i < resizers.length; i++) {\n          var res = resizers[i];\n\n          res._getSiblings();\n\n          var prev = res._behind;\n          var next = res._front;\n\n          if (prev && prev.$content === grid || prev.isChild && prev.isChild(grid)) {\n            gridResizer = res;\n            gridFirst = true;\n            break;\n          } else if (next && next.$content === grid || next.isChild && next.isChild(grid)) {\n            gridResizer = res;\n            gridFirst = false;\n            break;\n          }\n        }\n\n        return {\n          resizer: gridResizer,\n          gridFirst: gridFirst\n        };\n      },\n      onInitialized: function onInitialized(layout) {\n        var grid = gantt.$ui.getView(\"grid\");\n\n        var resizeInfo = this._findGridResizer(layout, grid); // expose grid resize events\n\n\n        if (resizeInfo.resizer) {\n          var gridFirst = resizeInfo.gridFirst,\n              next = resizeInfo.resizer;\n\n          if (next.$config.mode !== \"x\") {\n            return; // track only horizontal resize\n          }\n\n          var initialWidth;\n          next.attachEvent(\"onResizeStart\", function (prevCellWidth, nextCellWidth) {\n            var grid = gantt.$ui.getView(\"grid\");\n            var viewCell = grid ? grid.$parent : null;\n\n            if (viewCell) {\n              var limits = grid._getGridWidthLimits(); // min grid width is defined by min widths of its columns, unless grid has horizontal scroll\n\n\n              if (!grid.$config.scrollable) viewCell.$config.minWidth = limits[0];\n              viewCell.$config.maxWidth = limits[1];\n            }\n\n            initialWidth = gridFirst ? prevCellWidth : nextCellWidth;\n            return gantt.callEvent(\"onGridResizeStart\", [initialWidth]);\n          });\n          next.attachEvent(\"onResize\", function (newBehindSize, newFrontSize) {\n            var newSize = gridFirst ? newBehindSize : newFrontSize;\n            return gantt.callEvent(\"onGridResize\", [initialWidth, newSize]);\n          });\n          next.attachEvent(\"onResizeEnd\", function (oldBackSize, oldFrontSize, newBackSize, newFrontSize) {\n            var oldSize = gridFirst ? oldBackSize : oldFrontSize;\n            var newSize = gridFirst ? newBackSize : newFrontSize;\n            var grid = gantt.$ui.getView(\"grid\");\n            var viewCell = grid ? grid.$parent : null;\n\n            if (viewCell) {\n              viewCell.$config.minWidth = undefined;\n            }\n\n            var res = gantt.callEvent(\"onGridResizeEnd\", [oldSize, newSize]);\n\n            if (res && newSize !== 0) {\n              // new size may be numeric zero when cell size is defined by 'gravity', actual size will be calculated by layout later\n              gantt.config.grid_width = newSize;\n            }\n\n            return res;\n          });\n        }\n      },\n      onDestroyed: function onDestroyed(timeline) {}\n    };\n  };\n}();\n\nmodule.exports = initializer;","var domHelpers = require(\"../utils/dom_helpers\");\n\nvar initLinksDND = function initLinksDND(timeline, gantt) {\n  var _link_landing,\n      _link_target_task,\n      _link_target_task_start,\n      _link_source_task,\n      _link_source_task_start,\n      markerDefaultOffset = 10,\n      scrollDefaultSize = 18;\n\n  function getVisibleMilestoneWidth(taskId) {\n    var origWidth = timeline.getBarHeight(taskId, true); //m-s have square shape\n\n    return Math.round(Math.sqrt(2 * origWidth * origWidth)) - 2;\n  }\n\n  function isMilestone(task) {\n    return gantt.getTaskType(task.type) == gantt.config.types.milestone;\n  }\n\n  function getDndState() {\n    return {\n      link_source_id: _link_source_task,\n      link_target_id: _link_target_task,\n      link_from_start: _link_source_task_start,\n      link_to_start: _link_target_task_start,\n      link_landing_area: _link_landing\n    };\n  }\n\n  var services = gantt.$services;\n  var state = services.getService(\"state\");\n  var DnD = services.getService(\"dnd\");\n  state.registerProvider(\"linksDnD\", getDndState);\n  var start_marker = \"task_start_date\",\n      end_marker = \"task_end_date\",\n      link_edge_marker = \"gantt_link_point\",\n      link_landing_hover_area = \"gantt_link_control\";\n  var dnd = new DnD(timeline.$task_bars, {\n    sensitivity: 0,\n    updates_per_second: 60,\n    mousemoveContainer: gantt.$root,\n    selector: \".\" + link_edge_marker,\n    preventDefault: true\n  });\n  dnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\n    var target = e.target || e.srcElement;\n    resetDndState();\n    if (gantt.getState(\"tasksDnd\").drag_id) return false;\n\n    if (domHelpers.locateClassName(target, link_edge_marker)) {\n      if (domHelpers.locateClassName(target, start_marker)) _link_source_task_start = true;\n      var sid = gantt.locate(e);\n      _link_source_task = sid;\n      var t = gantt.getTask(sid);\n\n      if (gantt.isReadonly(t)) {\n        resetDndState();\n        return false;\n      }\n\n      var shift = 0;\n      this._dir_start = getLinePos(t, !!_link_source_task_start, shift, timeline.$getConfig(), true);\n      return true;\n    } else {\n      return false;\n    }\n  }, this));\n  dnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\n    if (gantt.config.touch) {\n      gantt.refreshData();\n    }\n\n    updateMarkedHtml(dnd.config.marker);\n  }, this));\n\n  function getLinePos(task, to_start, shift, cfg, isStart) {\n    var taskPos = getMilestonePosition(task, function (task) {\n      return gantt.getTaskPosition(task);\n    }, cfg);\n    var pos = {\n      x: taskPos.x,\n      y: taskPos.y\n    };\n\n    if (!to_start) {\n      pos.x = taskPos.xEnd;\n    } //var pos = gantt._get_task_pos(task, !!to_start);\n\n\n    pos.y += gantt.getTaskHeight(task.id) / 2;\n    var offset = isMilestone(task) && isStart ? 2 : 0;\n    shift = shift || 0;\n    if (cfg.rtl) shift = shift * -1;\n    pos.x += (to_start ? -1 : 1) * shift - offset;\n    return pos;\n  }\n\n  function getMilestonePosition(task, getTaskPosition, cfg) {\n    var pos = getTaskPosition(task);\n    var res = {\n      x: pos.left,\n      y: pos.top,\n      width: pos.width,\n      height: pos.height\n    };\n\n    if (cfg.rtl) {\n      res.xEnd = res.x;\n      res.x = res.xEnd + res.width;\n    } else {\n      res.xEnd = res.x + res.width;\n    }\n\n    res.yEnd = res.y + res.height;\n\n    if (gantt.getTaskType(task.type) == gantt.config.types.milestone) {\n      var milestoneWidth = getVisibleMilestoneWidth(task.id);\n      res.x += (!cfg.rtl ? -1 : 1) * (milestoneWidth / 2);\n      res.xEnd += (!cfg.rtl ? 1 : -1) * (milestoneWidth / 2); //pos.x -= milestoneWidth / 2;\n      //pos.xEnd += milestoneWidth / 2;\n\n      res.width = pos.xEnd - pos.x;\n    }\n\n    return res;\n  }\n\n  function getVieportSize() {\n    var root = gantt.$root;\n    return {\n      right: root.offsetWidth,\n      bottom: root.offsetHeight\n    };\n  }\n\n  function getMarkerSize(marker) {\n    var width = 0,\n        height = 0;\n\n    if (marker) {\n      width = marker.offsetWidth || 0;\n      height = marker.offsetHeight || 0;\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n\n  function getPosition(e, marker) {\n    var oldPos = dnd.getPosition(e);\n    var markerSize = getMarkerSize(marker);\n    var viewportSize = getVieportSize();\n    var offsetX = gantt.config.tooltip_offset_x || markerDefaultOffset;\n    var offsetY = gantt.config.tooltip_offset_y || markerDefaultOffset;\n    var scrollSize = gantt.config.scroll_size || scrollDefaultSize; // GS-1315: Add offset if there are elements above Gantt\n\n    var ganttOffsetY = gantt.$container.getBoundingClientRect().y + window.scrollY;\n    var position = {\n      y: oldPos.y + offsetY,\n      x: oldPos.x + offsetX,\n      bottom: oldPos.y + markerSize.height + offsetY + scrollSize,\n      right: oldPos.x + markerSize.width + offsetX + scrollSize\n    };\n\n    if (position.bottom > viewportSize.bottom + ganttOffsetY) {\n      position.y = viewportSize.bottom + ganttOffsetY - markerSize.height - offsetY;\n    }\n\n    if (position.right > viewportSize.right) {\n      position.x = viewportSize.right - markerSize.width - offsetX;\n    }\n\n    return position;\n  }\n\n  dnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\n    var dd = dnd.config;\n    var pos = getPosition(e, dd.marker);\n    advanceMarker(dd.marker, pos);\n    var landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\n    var prevTarget = _link_target_task;\n    var prevLanding = _link_landing;\n    var prevToStart = _link_target_task_start;\n    var targ = gantt.locate(e),\n        to_start = true; // can drag and drop link to another gantt on the page, such links are not supported\n\n    var eventTarget = domHelpers.getTargetNode(e);\n    var sameGantt = domHelpers.isChildOf(eventTarget, gantt.$root);\n\n    if (!sameGantt) {\n      landing = false;\n      targ = null;\n    }\n\n    if (landing) {\n      //refreshTask\n      to_start = !domHelpers.locateClassName(e, end_marker);\n      landing = !!targ;\n    }\n\n    _link_target_task = targ;\n    _link_landing = landing;\n    _link_target_task_start = to_start;\n\n    if (landing) {\n      var t = gantt.getTask(targ);\n      var config = timeline.$getConfig();\n      var node = domHelpers.locateClassName(e, link_landing_hover_area);\n      var shift = 0;\n\n      if (node) {\n        shift = Math.floor(node.offsetWidth / 2);\n      }\n\n      this._dir_end = getLinePos(t, !!_link_target_task_start, shift, config);\n    } else {\n      this._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\n\n      if (gantt.env.isEdge) {\n        // to fix margin collapsing\n        this._dir_end.y += window.scrollY;\n      }\n    }\n\n    var targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\n\n    if (targetChanged) {\n      if (prevTarget) gantt.refreshTask(prevTarget, false);\n      if (targ) gantt.refreshTask(targ, false);\n    }\n\n    if (targetChanged) {\n      updateMarkedHtml(dd.marker);\n    }\n\n    showDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\n    return true;\n  }, this));\n  dnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\n    var drag = getDndState();\n\n    if (drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id) {\n      var type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\n\n      var link = {\n        source: drag.link_source_id,\n        target: drag.link_target_id,\n        type: type\n      };\n\n      if (link.type && gantt.isLinkAllowed(link)) {\n        if (gantt.callEvent(\"onLinkCreated\", [link])) {\n          gantt.addLink(link);\n        }\n      }\n    }\n\n    resetDndState();\n\n    if (gantt.config.touch) {\n      gantt.refreshData();\n    } else {\n      if (drag.link_source_id) gantt.refreshTask(drag.link_source_id, false);\n      if (drag.link_target_id) gantt.refreshTask(drag.link_target_id, false);\n    }\n\n    removeDirectionLine();\n  }, this));\n\n  function updateMarkedHtml(marker) {\n    var link = getDndState();\n    var css = [\"gantt_link_tooltip\"];\n\n    if (link.link_source_id && link.link_target_id) {\n      if (gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)) {\n        css.push(\"gantt_allowed_link\");\n      } else {\n        css.push(\"gantt_invalid_link\");\n      }\n    }\n\n    var className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\n    if (className) css.push(className);\n    var html = \"<div class='\" + className + \"'>\" + gantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) + \"</div>\";\n    marker.innerHTML = html;\n  }\n\n  function advanceMarker(marker, pos) {\n    marker.style.left = pos.x + \"px\";\n    marker.style.top = pos.y + \"px\";\n  }\n\n  function resetDndState() {\n    _link_source_task = _link_source_task_start = _link_target_task = null;\n    _link_target_task_start = true;\n  }\n\n  function showDirectingLine(s_x, s_y, e_x, e_y) {\n    var div = getDirectionLine();\n    var link = getDndState();\n    var css = [\"gantt_link_direction\"];\n\n    if (gantt.templates.link_direction_class) {\n      css.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\n    }\n\n    var dist = Math.sqrt(Math.pow(e_x - s_x, 2) + Math.pow(e_y - s_y, 2));\n    dist = Math.max(0, dist - 3);\n    if (!dist) return;\n    div.className = css.join(\" \");\n    var tan = (e_y - s_y) / (e_x - s_x),\n        angle = Math.atan(tan);\n\n    if (coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2) {\n      angle += Math.PI;\n    } else if (coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3) {\n      angle -= Math.PI;\n    }\n\n    var sin = Math.sin(angle),\n        cos = Math.cos(angle),\n        top = Math.round(s_y),\n        left = Math.round(s_x);\n    var style = [\"-webkit-transform: rotate(\" + angle + \"rad)\", \"-moz-transform: rotate(\" + angle + \"rad)\", \"-ms-transform: rotate(\" + angle + \"rad)\", \"-o-transform: rotate(\" + angle + \"rad)\", \"transform: rotate(\" + angle + \"rad)\", \"width:\" + Math.round(dist) + \"px\"];\n\n    if (window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1) {\n      //ms-filter breaks styles in ie9, so add it only for 8th\n      style.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\n      var shiftLeft = Math.abs(Math.round(s_x - e_x)),\n          shiftTop = Math.abs(Math.round(e_y - s_y)); //fix rotation axis\n\n      switch (coordinateCircleQuarter(s_x, e_x, s_y, e_y)) {\n        case 1:\n          top -= shiftTop;\n          break;\n\n        case 2:\n          left -= shiftLeft;\n          top -= shiftTop;\n          break;\n\n        case 3:\n          left -= shiftLeft;\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    style.push(\"top:\" + top + \"px\");\n    style.push(\"left:\" + left + \"px\");\n    div.style.cssText = style.join(\";\");\n  }\n\n  function ieTransform(sin, cos) {\n    return \"progid:DXImageTransform.Microsoft.Matrix(\" + \"M11 = \" + cos + \",\" + \"M12 = -\" + sin + \",\" + \"M21 = \" + sin + \",\" + \"M22 = \" + cos + \",\" + \"SizingMethod = 'auto expand'\" + \")\";\n  }\n\n  function coordinateCircleQuarter(sX, eX, sY, eY) {\n    if (eX >= sX) {\n      if (eY <= sY) {\n        return 1;\n      } else {\n        return 4;\n      }\n    } else {\n      if (eY <= sY) {\n        return 2;\n      } else {\n        return 3;\n      }\n    }\n  }\n\n  function getDirectionLine() {\n    if (!dnd._direction || !dnd._direction.parentNode) {\n      dnd._direction = document.createElement(\"div\");\n      timeline.$task_links.appendChild(dnd._direction);\n    }\n\n    return dnd._direction;\n  }\n\n  function removeDirectionLine() {\n    if (dnd._direction) {\n      if (dnd._direction.parentNode) //the event line can be detached because of data refresh\n        dnd._direction.parentNode.removeChild(dnd._direction);\n      dnd._direction = null;\n    }\n  }\n\n  gantt.attachEvent(\"onGanttRender\", gantt.bind(function () {\n    if (dnd._direction) {\n      showDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\n    }\n  }, this));\n};\n\nmodule.exports = {\n  createLinkDND: function createLinkDND() {\n    return {\n      init: initLinksDND\n    };\n  }\n};","var domHelpers = require(\"../utils/dom_helpers\");\n\nvar utils = require(\"../../../utils/utils\");\n\nvar timeout = require(\"../../../utils/timeout\");\n\nvar helpers = require(\"../../../utils/helpers\");\n\nfunction createTaskDND(timeline, gantt) {\n  var services = gantt.$services;\n  return {\n    drag: null,\n    dragMultiple: {},\n    _events: {\n      before_start: {},\n      before_finish: {},\n      after_finish: {}\n    },\n    _handlers: {},\n    init: function init() {\n      this._domEvents = gantt._createDomEventScope();\n      this.clear_drag_state();\n      var drag = gantt.config.drag_mode;\n      this.set_actions();\n      var stateService = services.getService(\"state\");\n      stateService.registerProvider(\"tasksDnd\", utils.bind(function () {\n        return {\n          drag_id: this.drag ? this.drag.id : undefined,\n          drag_mode: this.drag ? this.drag.mode : undefined,\n          drag_from_start: this.drag ? this.drag.left : undefined\n        };\n      }, this));\n      var evs = {\n        \"before_start\": \"onBeforeTaskDrag\",\n        \"before_finish\": \"onBeforeTaskChanged\",\n        \"after_finish\": \"onAfterTaskDrag\"\n      }; //for now, all drag operations will trigger the same events\n\n      for (var stage in this._events) {\n        for (var mode in drag) {\n          this._events[stage][mode] = evs[stage];\n        }\n      }\n\n      this._handlers[drag.move] = this._move;\n      this._handlers[drag.resize] = this._resize;\n      this._handlers[drag.progress] = this._resize_progress;\n    },\n    set_actions: function set_actions() {\n      var data = timeline.$task_data;\n\n      this._domEvents.attach(data, \"mousemove\", gantt.bind(function (e) {\n        this.on_mouse_move(e);\n      }, this));\n\n      this._domEvents.attach(data, \"mousedown\", gantt.bind(function (e) {\n        this.on_mouse_down(e);\n      }, this));\n\n      this._domEvents.attach(document.body, \"mouseup\", gantt.bind(function (e) {\n        this.on_mouse_up(e);\n      }, this));\n    },\n    clear_drag_state: function clear_drag_state() {\n      this.drag = {\n        id: null,\n        mode: null,\n        pos: null,\n        start_x: null,\n        start_y: null,\n        obj: null,\n        left: null\n      };\n      this.dragMultiple = {};\n    },\n    _resize: function _resize(task, shift, drag) {\n      var cfg = timeline.$getConfig();\n\n      var coords_x = this._drag_task_coords(task, drag);\n\n      if (drag.left) {\n        task.start_date = gantt.dateFromPos(coords_x.start + shift);\n\n        if (!task.start_date) {\n          task.start_date = new Date(gantt.getState().min_date);\n        }\n      } else {\n        task.end_date = gantt.dateFromPos(coords_x.end + shift);\n\n        if (!task.end_date) {\n          task.end_date = new Date(gantt.getState().max_date);\n        }\n      }\n\n      var minDurationInUnits = this._calculateMinDuration(cfg.min_duration, cfg.duration_unit);\n\n      if (task.end_date - task.start_date < cfg.min_duration) {\n        if (drag.left) task.start_date = gantt.calculateEndDate(task.end_date, -minDurationInUnits, cfg.duration_unit, task);else task.end_date = gantt.calculateEndDate(task.start_date, minDurationInUnits, cfg.duration_unit, task);\n      }\n\n      gantt._init_task_timing(task);\n    },\n    _calculateMinDuration: function _calculateMinDuration(duration, unit) {\n      var inMs = {\n        \"minute\": 60000,\n        \"hour\": 3600000,\n        \"day\": 86400000,\n        \"week\": 604800000,\n        \"month\": 2419200000,\n        \"year\": 31356000000\n      };\n      return Math.ceil(duration / inMs[unit]);\n    },\n    _resize_progress: function _resize_progress(task, shift, drag) {\n      var coords_x = this._drag_task_coords(task, drag);\n\n      var config = timeline.$getConfig();\n      var diffValue = !config.rtl ? drag.pos.x - coords_x.start : coords_x.start - drag.pos.x;\n      var diff = Math.max(0, diffValue);\n      task.progress = Math.min(1, diff / Math.abs(coords_x.end - coords_x.start));\n    },\n    _find_max_shift: function _find_max_shift(dragItems, shift) {\n      var correctShift;\n\n      for (var i in dragItems) {\n        var drag = dragItems[i];\n        var task = gantt.getTask(drag.id);\n\n        var coords_x = this._drag_task_coords(task, drag);\n\n        var minX = gantt.posFromDate(new Date(gantt.getState().min_date));\n        var maxX = gantt.posFromDate(new Date(gantt.getState().max_date));\n\n        if (coords_x.end + shift > maxX) {\n          var maxShift = maxX - coords_x.end;\n\n          if (maxShift < correctShift || correctShift === undefined) {\n            correctShift = maxShift;\n          }\n        } else if (coords_x.start + shift < minX) {\n          var minShift = minX - coords_x.start;\n\n          if (minShift > correctShift || correctShift === undefined) {\n            correctShift = minShift;\n          }\n        }\n      }\n\n      return correctShift;\n    },\n    _move: function _move(task, shift, drag, multipleDragShift) {\n      var coords_x = this._drag_task_coords(task, drag);\n\n      var new_start = null,\n          new_end = null; // GS-454: If we drag multiple tasks, rely on the dates instead of timeline coordinates\n\n      if (multipleDragShift) {\n        new_start = new Date(+drag.obj.start_date + multipleDragShift), new_end = new Date(+drag.obj.end_date + multipleDragShift);\n      } else {\n        new_start = gantt.dateFromPos(coords_x.start + shift), new_end = gantt.dateFromPos(coords_x.end + shift);\n      }\n\n      if (!new_start) {\n        task.start_date = new Date(gantt.getState().min_date);\n        task.end_date = gantt.dateFromPos(gantt.posFromDate(task.start_date) + (coords_x.end - coords_x.start));\n      } else if (!new_end) {\n        task.end_date = new Date(gantt.getState().max_date);\n        task.start_date = gantt.dateFromPos(gantt.posFromDate(task.end_date) - (coords_x.end - coords_x.start));\n      } else {\n        task.start_date = new_start;\n        task.end_date = new_end;\n      }\n    },\n    _drag_task_coords: function _drag_task_coords(t, drag) {\n      var start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\n      var end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\n      return {\n        start: start,\n        end: end\n      };\n    },\n    _mouse_position_change: function _mouse_position_change(oldPos, newPos) {\n      var dx = oldPos.x - newPos.x,\n          dy = oldPos.y - newPos.y;\n      return Math.sqrt(dx * dx + dy * dy);\n    },\n    _is_number: function _is_number(n) {\n      return !isNaN(parseFloat(n)) && isFinite(n);\n    },\n    on_mouse_move: function on_mouse_move(e) {\n      if (this.drag.start_drag) {\n        var pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\n        var sX = this.drag.start_drag.start_x,\n            sY = this.drag.start_drag.start_y;\n\n        if (Date.now() - this.drag.timestamp > 50 || this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\n          x: sX,\n          y: sY\n        }, pos) > 20) {\n          this._start_dnd(e);\n        }\n      }\n\n      var drag = this.drag;\n\n      if (drag.mode) {\n        if (!timeout(this, 40)) //limit update frequency\n          return;\n\n        this._update_on_move(e);\n      }\n    },\n    _update_item_on_move: function _update_item_on_move(shift, id, mode, drag, e, multipleDragShift) {\n      var task = gantt.getTask(id);\n      var original = gantt.mixin({}, task);\n      var copy = gantt.mixin({}, task);\n\n      this._handlers[mode].apply(this, [copy, shift, drag, multipleDragShift]);\n\n      gantt.mixin(task, copy, true); //gantt._update_parents(drag.id, true);\n\n      gantt.callEvent(\"onTaskDrag\", [task.id, mode, copy, original, e]);\n      gantt.mixin(task, copy, true);\n      gantt.refreshTask(id);\n    },\n    _update_on_move: function _update_on_move(e) {\n      var drag = this.drag;\n      var config = timeline.$getConfig();\n\n      if (drag.mode) {\n        var pos = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\n        if (drag.pos && drag.pos.x == pos.x) return;\n        drag.pos = pos;\n        var curr_date = gantt.dateFromPos(pos.x);\n        if (!curr_date || isNaN(curr_date.getTime())) return;\n        var shift = pos.x - drag.start_x;\n        var task = gantt.getTask(drag.id);\n\n        if (this._handlers[drag.mode]) {\n          if (drag.mode === config.drag_mode.move) {\n            var dragHash = {};\n\n            if (this._isMultiselect()) {\n              var selectedTasksIds = gantt.getSelectedTasks();\n\n              if (selectedTasksIds.indexOf(drag.id) >= 0) {\n                dragHash = this.dragMultiple;\n              }\n            }\n\n            var dragProject = false;\n\n            if (gantt.isSummaryTask(task) && gantt.config.drag_project) {\n              var initialDrag = {};\n              initialDrag[drag.id] = utils.copy(drag);\n              dragProject = true;\n              dragHash = utils.mixin(initialDrag, this.dragMultiple);\n            }\n\n            var maxShift = this._find_max_shift(dragHash, shift);\n\n            if (maxShift !== undefined) {\n              shift = maxShift;\n            }\n\n            this._update_item_on_move(shift, drag.id, drag.mode, drag, e);\n\n            for (var i in dragHash) {\n              var childDrag = dragHash[i];\n\n              if (dragProject && childDrag.id != drag.id) {\n                gantt._bulk_dnd = true;\n              } // GS-454: Calculate the date shift in milliseconds instead of pixels\n\n\n              if (maxShift === undefined && (dragProject || Object.keys(dragHash).length > 1)) {\n                var shiftDate = gantt.dateFromPos(drag.start_x);\n                var multipleDragShift = curr_date - shiftDate;\n              }\n\n              this._update_item_on_move(shift, childDrag.id, childDrag.mode, childDrag, e, multipleDragShift);\n            }\n\n            gantt._bulk_dnd = false;\n          } else {\n            // for resize and progress\n            this._update_item_on_move(shift, drag.id, drag.mode, drag, e);\n          }\n\n          gantt._update_parents(drag.id);\n        }\n      }\n    },\n    on_mouse_down: function on_mouse_down(e, src) {\n      // on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\n      // let's ignore right mouse button then\n      if (e.button == 2 && e.button !== undefined) return;\n      var config = timeline.$getConfig();\n      var id = gantt.locate(e);\n      var task = null;\n\n      if (gantt.isTaskExists(id)) {\n        task = gantt.getTask(id);\n      }\n\n      if (gantt.isReadonly(task) || this.drag.mode) return;\n      this.clear_drag_state();\n      src = src || e.target || e.srcElement;\n      var className = domHelpers.getClassName(src);\n\n      var drag = this._get_drag_mode(className, src);\n\n      if (!className || !drag) {\n        if (src.parentNode) return this.on_mouse_down(e, src.parentNode);else return;\n      }\n\n      if (!drag) {\n        if (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\n          if (src.parentNode) return this.on_mouse_down(e, src.parentNode);\n        }\n      } else {\n        if (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\n          id = gantt.locate(src);\n          task = gantt.copy(gantt.getTask(id) || {});\n\n          if (gantt.isReadonly(task)) {\n            this.clear_drag_state();\n            return false;\n          }\n\n          if (gantt.isSummaryTask(task) && !config.drag_project && drag.mode != config.drag_mode.progress) {\n            //only progress drag is allowed for tasks with flexible duration\n            this.clear_drag_state();\n            return;\n          }\n\n          drag.id = id;\n          var pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\n          drag.start_x = pos.x;\n          drag.start_y = pos.y;\n          drag.obj = task;\n          this.drag.start_drag = drag;\n          this.drag.timestamp = Date.now();\n        } else this.clear_drag_state();\n      }\n    },\n    _fix_dnd_scale_time: function _fix_dnd_scale_time(task, drag) {\n      var config = timeline.$getConfig();\n      var unit = gantt.getScale().unit,\n          step = gantt.getScale().step;\n\n      if (!config.round_dnd_dates) {\n        unit = 'minute';\n        step = config.time_step;\n      }\n\n      function fixStart(task) {\n        if (!gantt.config.correct_work_time) return;\n        var config = timeline.$getConfig();\n        if (!gantt.isWorkTime(task.start_date, undefined, task)) task.start_date = gantt.calculateEndDate({\n          start_date: task.start_date,\n          duration: -1,\n          unit: config.duration_unit,\n          task: task\n        });\n      }\n\n      function fixEnd(task) {\n        if (!gantt.config.correct_work_time) return;\n        var config = timeline.$getConfig();\n        if (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task)) task.end_date = gantt.calculateEndDate({\n          start_date: task.end_date,\n          duration: 1,\n          unit: config.duration_unit,\n          task: task\n        });\n      }\n\n      if (drag.mode == config.drag_mode.resize) {\n        if (drag.left) {\n          task.start_date = gantt.roundDate({\n            date: task.start_date,\n            unit: unit,\n            step: step\n          });\n          fixStart(task);\n        } else {\n          task.end_date = gantt.roundDate({\n            date: task.end_date,\n            unit: unit,\n            step: step\n          });\n          fixEnd(task);\n        }\n      } else if (drag.mode == config.drag_mode.move) {\n        task.start_date = gantt.roundDate({\n          date: task.start_date,\n          unit: unit,\n          step: step\n        });\n        fixStart(task);\n        task.end_date = gantt.calculateEndDate(task);\n      }\n    },\n    _fix_working_times: function _fix_working_times(task, drag) {\n      var config = timeline.$getConfig();\n      var drag = drag || {\n        mode: config.drag_mode.move\n      };\n\n      if (drag.mode == config.drag_mode.resize) {\n        if (drag.left) {\n          task.start_date = gantt.getClosestWorkTime({\n            date: task.start_date,\n            dir: 'future',\n            task: task\n          });\n        } else {\n          task.end_date = gantt.getClosestWorkTime({\n            date: task.end_date,\n            dir: 'past',\n            task: task\n          });\n        }\n      } else if (drag.mode == config.drag_mode.move) {\n        gantt.correctTaskWorkTime(task);\n      }\n    },\n    _finalize_mouse_up: function _finalize_mouse_up(taskId, config, drag, e) {\n      var task = gantt.getTask(taskId);\n\n      if (config.work_time && config.correct_work_time) {\n        this._fix_working_times(task, drag);\n      }\n\n      this._fix_dnd_scale_time(task, drag);\n\n      if (!this._fireEvent(\"before_finish\", drag.mode, [taskId, drag.mode, gantt.copy(drag.obj), e])) {\n        //drag.obj._dhx_changed = false;\n        this.clear_drag_state();\n\n        if (taskId == drag.id) {\n          drag.obj._dhx_changed = false;\n          gantt.mixin(task, drag.obj, true);\n        }\n\n        gantt.refreshTask(task.id);\n      } else {\n        var drag_id = taskId;\n\n        gantt._init_task_timing(task);\n\n        this.clear_drag_state();\n        gantt.updateTask(task.id);\n\n        this._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\n      }\n    },\n    on_mouse_up: function on_mouse_up(e) {\n      var drag = this.drag;\n\n      if (drag.mode && drag.id) {\n        var config = timeline.$getConfig(); //drop\n\n        var task = gantt.getTask(drag.id);\n        var dragMultiple = this.dragMultiple;\n        var finalizingBulkMove = false;\n        var moveCount = 0;\n\n        if (drag.mode === config.drag_mode.move) {\n          if (gantt.isSummaryTask(task) && config.drag_project || this._isMultiselect()) {\n            finalizingBulkMove = true;\n            moveCount = Object.keys(dragMultiple).length;\n          }\n        }\n\n        var doFinalize = function doFinalize() {\n          if (finalizingBulkMove) {\n            for (var i in dragMultiple) {\n              this._finalize_mouse_up(dragMultiple[i].id, config, dragMultiple[i], e);\n            }\n          }\n\n          this._finalize_mouse_up(drag.id, config, drag, e);\n        };\n\n        if (finalizingBulkMove && moveCount > 10) {\n          // 10 - arbitrary threshold for bulk dnd at which we start doing complete repaint to refresh\n          gantt.batchUpdate(function () {\n            doFinalize.call(this);\n          }.bind(this));\n        } else {\n          doFinalize.call(this);\n        }\n      }\n\n      this.clear_drag_state();\n    },\n    _get_drag_mode: function _get_drag_mode(className, el) {\n      var config = timeline.$getConfig();\n      var modes = config.drag_mode;\n      var classes = (className || \"\").split(\" \");\n      var classname = classes[0];\n      var drag = {\n        mode: null,\n        left: null\n      };\n\n      switch (classname) {\n        case \"gantt_task_line\":\n        case \"gantt_task_content\":\n          drag.mode = modes.move;\n          break;\n\n        case \"gantt_task_drag\":\n          drag.mode = modes.resize;\n          var dragProperty = el.getAttribute(\"data-bind-property\");\n\n          if (dragProperty == \"start_date\") {\n            drag.left = true;\n          } else {\n            drag.left = false;\n          }\n\n          break;\n\n        case \"gantt_task_progress_drag\":\n          drag.mode = modes.progress;\n          break;\n\n        case \"gantt_link_control\":\n        case \"gantt_link_point\":\n          drag.mode = modes.ignore;\n          break;\n\n        default:\n          drag = null;\n          break;\n      }\n\n      return drag;\n    },\n    _start_dnd: function _start_dnd(e) {\n      var drag = this.drag = this.drag.start_drag;\n      delete drag.start_drag;\n      var cfg = timeline.$getConfig();\n      var id = drag.id;\n\n      if (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\n        this.clear_drag_state();\n      } else {\n        delete drag.start_drag;\n        var task = gantt.getTask(id);\n\n        if (gantt.isReadonly(task)) {\n          this.clear_drag_state();\n          return;\n        }\n\n        if (this._isMultiselect()) {\n          // for don't move selected tasks when drag unselected task\n          var selectedTasksIds = gantt.getSelectedTasks();\n\n          if (selectedTasksIds.indexOf(drag.id) >= 0) {\n            helpers.forEach(selectedTasksIds, gantt.bind(function (taskId) {\n              var selectedTask = gantt.getTask(taskId);\n\n              if (gantt.isSummaryTask(selectedTask) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move) {\n                this._addSubtasksToDragMultiple(selectedTask.id);\n              }\n\n              this.dragMultiple[taskId] = gantt.mixin({\n                id: selectedTask.id,\n                obj: gantt.copy(selectedTask)\n              }, this.drag);\n            }, this));\n          }\n        } // for move unselected summary\n\n\n        if (gantt.isSummaryTask(task) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move) {\n          this._addSubtasksToDragMultiple(task.id);\n        }\n\n        gantt.callEvent(\"onTaskDragStart\", []);\n      }\n    },\n    _fireEvent: function _fireEvent(stage, mode, params) {\n      gantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\n      var trigger = this._events[stage][mode];\n      gantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\n      gantt.assert(params, \"Invalid event arguments\");\n      if (!gantt.checkEvent(trigger)) return true;\n      return gantt.callEvent(trigger, params);\n    },\n    round_task_dates: function round_task_dates(task) {\n      var drag_state = this.drag;\n      var config = timeline.$getConfig();\n\n      if (!drag_state) {\n        drag_state = {\n          mode: config.drag_mode.move\n        };\n      }\n\n      this._fix_dnd_scale_time(task, drag_state);\n    },\n    destructor: function destructor() {\n      this._domEvents.detachAll();\n    },\n    _isMultiselect: function _isMultiselect() {\n      return gantt.config.drag_multiple && !!(gantt.getSelectedTasks && gantt.getSelectedTasks().length > 0);\n    },\n    _addSubtasksToDragMultiple: function _addSubtasksToDragMultiple(summaryId) {\n      gantt.eachTask(function (child) {\n        this.dragMultiple[child.id] = gantt.mixin({\n          id: child.id,\n          obj: gantt.copy(child)\n        }, this.drag);\n      }, summaryId, this);\n    }\n  };\n}\n\nfunction initTaskDND() {\n  var _tasks_dnd;\n\n  return {\n    extend: function extend(timeline) {\n      timeline.roundTaskDates = function (task) {\n        _tasks_dnd.round_task_dates(task);\n      };\n    },\n    init: function init(timeline, gantt) {\n      _tasks_dnd = createTaskDND(timeline, gantt); // TODO: entry point for touch handlers, move touch to timeline\n\n      timeline._tasks_dnd = _tasks_dnd;\n      return _tasks_dnd.init(gantt);\n    },\n    destructor: function destructor() {\n      if (_tasks_dnd) {\n        _tasks_dnd.destructor();\n\n        _tasks_dnd = null;\n      }\n    }\n  };\n}\n\nmodule.exports = {\n  createTaskDND: initTaskDND\n};","var utils = require(\"../../../utils/utils\"),\n    taskDnD = require(\"./tasks_dnd\"),\n    linkDnD = require(\"./links_dnd\"),\n    domHelpers = require(\"../utils/dom_helpers\");\n\nvar initializer = function () {\n  return function (gantt) {\n    var services = gantt.$services;\n    return {\n      onCreated: function onCreated(timeline) {\n        var config = timeline.$config;\n        config.bind = utils.defined(config.bind) ? config.bind : \"task\";\n        config.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\n        timeline._linksDnD = linkDnD.createLinkDND();\n        timeline._tasksDnD = taskDnD.createTaskDND();\n\n        timeline._tasksDnD.extend(timeline);\n\n        this._mouseDelegates = require(\"../mouse_event_container\")(gantt);\n      },\n      onInitialized: function onInitialized(timeline) {\n        this._attachDomEvents(gantt);\n\n        this._attachStateProvider(gantt, timeline);\n\n        timeline._tasksDnD.init(timeline, gantt);\n\n        timeline._linksDnD.init(timeline, gantt);\n\n        if (timeline.$config.id == \"timeline\") {\n          this.extendDom(timeline);\n        }\n      },\n      onDestroyed: function onDestroyed(timeline) {\n        this._clearDomEvents(gantt);\n\n        this._clearStateProvider(gantt);\n\n        if (timeline._tasksDnD) {\n          timeline._tasksDnD.destructor();\n        }\n      },\n      extendDom: function extendDom(timeline) {\n        gantt.$task = timeline.$task;\n        gantt.$task_scale = timeline.$task_scale;\n        gantt.$task_data = timeline.$task_data;\n        gantt.$task_bg = timeline.$task_bg;\n        gantt.$task_links = timeline.$task_links;\n        gantt.$task_bars = timeline.$task_bars;\n      },\n      _clearDomEvents: function _clearDomEvents() {\n        this._mouseDelegates.destructor();\n\n        this._mouseDelegates = null;\n      },\n      _attachDomEvents: function _attachDomEvents(gantt) {\n        function _delete_link_handler(id, e) {\n          if (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\n            var link = this.getLink(id);\n            if (this.isReadonly(link)) return;\n            var title = \"\";\n            var question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\n            window.setTimeout(function () {\n              gantt._simple_confirm(question, title, function () {\n                gantt.deleteLink(id);\n              });\n            }, this.config.touch ? 300 : 1);\n          }\n        }\n\n        this._mouseDelegates.delegate(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\n          var id = this.locate(e, this.config.link_attribute);\n\n          if (id) {\n            this.callEvent(\"onLinkClick\", [id, e]);\n          }\n        }, gantt), this.$task);\n\n        this._mouseDelegates.delegate(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\n          var pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\n          var date = gantt.dateFromPos(pos.x);\n          var coll = Math.floor(gantt.columnIndexByDate(date));\n          var coll_date = gantt.getScale().trace_x[coll];\n          gantt.callEvent(\"onScaleClick\", [e, coll_date]);\n        }, gantt), this.$task);\n\n        this._mouseDelegates.delegate(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\n          var id = this.locate(e, gantt.config.link_attribute);\n\n          _delete_link_handler.call(this, id, e);\n        }, gantt), this.$task);\n\n        this._mouseDelegates.delegate(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\n          var id = this.locate(e),\n              task = this.getTask(id);\n          var link = null;\n\n          if (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\n            if (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\n              link = task.$target[0];\n            } else {\n              link = task.$source[0];\n            }\n          }\n\n          if (link) _delete_link_handler.call(this, link, e);\n          return false;\n        }, gantt), this.$task);\n      },\n      _attachStateProvider: function _attachStateProvider(gantt, timeline) {\n        var self = timeline;\n        var state = services.getService(\"state\");\n        state.registerProvider(\"tasksTimeline\", function () {\n          return {\n            scale_unit: self._tasks ? self._tasks.unit : undefined,\n            scale_step: self._tasks ? self._tasks.step : undefined\n          };\n        });\n      },\n      _clearStateProvider: function _clearStateProvider() {\n        var state = services.getService(\"state\");\n        state.unregisterProvider(\"tasksTimeline\");\n      }\n    };\n  };\n}();\n\nmodule.exports = initializer;","var domHelpers = require(\"../../utils/dom_helpers\");\n/**\r\n * methods for highlighting current drag and drop position\r\n */\n\n\nfunction highlightPosition(target, root, grid) {\n  var markerPos = getTaskMarkerPosition(target, grid); // setting position of row\n\n  root.marker.style.left = markerPos.x + 9 + \"px\";\n  root.marker.style.width = markerPos.width + \"px\";\n  root.marker.style.overflow = \"hidden\";\n  var markerLine = root.markerLine;\n\n  if (!markerLine) {\n    markerLine = document.createElement(\"div\");\n    markerLine.className = \"gantt_drag_marker gantt_grid_dnd_marker\";\n    markerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\n    markerLine.style.pointerEvents = \"none\";\n  }\n\n  if (target.child) {\n    highlightFolder(target, markerLine, grid);\n  } else {\n    highlightRow(target, markerLine, grid);\n  }\n\n  if (!root.markerLine) {\n    document.body.appendChild(markerLine);\n    root.markerLine = markerLine;\n  }\n}\n\nfunction removeLineHighlight(root) {\n  if (root.markerLine && root.markerLine.parentNode) {\n    root.markerLine.parentNode.removeChild(root.markerLine);\n  }\n\n  root.markerLine = null;\n}\n\nfunction highlightRow(target, markerLine, grid) {\n  var linePos = getLineMarkerPosition(target, grid);\n  var maxBottom = grid.$grid_data.getBoundingClientRect().bottom + window.scrollY;\n  markerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\n  markerLine.style.left = linePos.x + \"px\";\n  markerLine.style.height = \"4px\";\n  var markerLineTop = linePos.y - 2;\n  markerLine.style.top = markerLineTop + \"px\";\n  markerLine.style.width = linePos.width + \"px\";\n\n  if (markerLineTop > maxBottom) {\n    markerLine.style.top = maxBottom + 'px';\n  }\n\n  return markerLine;\n}\n\nfunction highlightFolder(target, markerFolder, grid) {\n  var id = target.targetParent;\n  var pos = gridToPageCoordinates({\n    x: 0,\n    y: grid.getItemTop(id)\n  }, grid);\n  var maxBottom = grid.$grid_data.getBoundingClientRect().bottom + window.scrollY;\n  var folderHighlightWidth = setWidthWithinContainer(grid.$gantt, grid.$grid_data.offsetWidth);\n  markerFolder.innerHTML = \"<div class='gantt_grid_dnd_marker_folder'></div>\";\n  markerFolder.style.width = folderHighlightWidth + \"px\";\n  markerFolder.style.top = pos.y + \"px\";\n  markerFolder.style.left = pos.x + \"px\";\n  markerFolder.style.height = grid.getItemHeight(id) + \"px\";\n\n  if (pos.y > maxBottom) {\n    markerFolder.style.top = maxBottom + 'px';\n  }\n\n  return markerFolder;\n}\n\nfunction getLineMarkerPosition(target, grid) {\n  var store = grid.$config.rowStore;\n  var pos = {\n    x: 0,\n    y: 0\n  };\n  var indentNode = grid.$grid_data.querySelector(\".gantt_tree_indent\");\n  var indent = 15;\n  var level = 0;\n\n  if (indentNode) {\n    indent = indentNode.offsetWidth;\n  }\n\n  var iconWidth = 40;\n\n  if (target.targetId !== store.$getRootId()) {\n    var itemTop = grid.getItemTop(target.targetId);\n    var itemHeight = grid.getItemHeight(target.targetId);\n    level = store.exists(target.targetId) ? store.calculateItemLevel(store.getItem(target.targetId)) : 0;\n\n    if (target.prevSibling) {\n      pos.y = itemTop;\n    } else if (target.nextSibling) {\n      var childCount = 0;\n      store.eachItem(function (child) {\n        if (store.getIndexById(child.id) !== -1) childCount++;\n      }, target.targetId);\n      pos.y = itemTop + itemHeight + childCount * itemHeight;\n    } else {\n      pos.y = itemTop + itemHeight;\n      level += 1;\n    }\n  }\n\n  pos.x = iconWidth + level * indent;\n  pos.width = setWidthWithinContainer(grid.$gantt, Math.max(grid.$grid_data.offsetWidth - pos.x, 0), pos.x);\n  return gridToPageCoordinates(pos, grid);\n}\n\nfunction gridToPageCoordinates(pos, grid) {\n  var gridPos = domHelpers.getNodePosition(grid.$grid_data);\n  pos.x += gridPos.x + grid.$grid.scrollLeft;\n  pos.y += gridPos.y - grid.$grid_data.scrollTop;\n  return pos;\n}\n\nfunction getTaskMarkerPosition(e, grid) {\n  var pos = domHelpers.getNodePosition(grid.$grid_data);\n  var ePos = domHelpers.getRelativeEventPosition(e, grid.$grid_data); // row offset\n\n  var x = pos.x + grid.$grid.scrollLeft;\n  var y = ePos.y - 10;\n  var rowHeight = grid.getItemHeight(e.targetId); // prevent moving row out of grid_data container\n\n  if (y < pos.y) y = pos.y;\n  var gridHeight = grid.getTotalHeight();\n  if (y > pos.y + gridHeight - rowHeight) y = pos.y + gridHeight - rowHeight;\n  pos.x = x;\n  pos.y = y;\n  pos.width = setWidthWithinContainer(grid.$gantt, pos.width, 9);\n  return pos;\n}\n\nfunction setWidthWithinContainer(gantt, width) {\n  var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var containerSize = domHelpers.getNodePosition(gantt.$root);\n\n  if (width > containerSize.width) {\n    width = containerSize.width - offset - 2;\n  }\n\n  return width;\n}\n\nmodule.exports = {\n  removeLineHighlight: removeLineHighlight,\n  highlightPosition: highlightPosition\n};","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = true\r\n */\nvar dropTarget = require(\"./drop_target\");\n\nmodule.exports = function getMultiLevelDropPosition(dndTaskId, targetTaskId, relTargetPos, eventTop, store) {\n  var result;\n\n  if (targetTaskId !== store.$getRootId()) {\n    if (relTargetPos < 0.25) {\n      result = dropTarget.prevSiblingTarget(dndTaskId, targetTaskId, store);\n    } else if (relTargetPos > 0.60 && !(store.hasChild(targetTaskId) && store.getItem(targetTaskId).$open)) {\n      result = dropTarget.nextSiblingTarget(dndTaskId, targetTaskId, store);\n    } else {\n      result = dropTarget.firstChildTarget(dndTaskId, targetTaskId, store);\n    }\n  } else {\n    var rootId = store.$getRootId();\n\n    if (store.hasChild(rootId) && eventTop >= 0) {\n      result = dropTarget.lastChildTarget(dndTaskId, rootId, store);\n    } else {\n      result = dropTarget.firstChildTarget(dndTaskId, rootId, store);\n    }\n  }\n\n  return result;\n};","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = false\r\n */\nvar dropTarget = require(\"./drop_target\");\n\nfunction getLast(store) {\n  var current = store.getNext();\n\n  while (store.exists(current)) {\n    var next = store.getNext(current);\n\n    if (!store.exists(next)) {\n      return current;\n    } else {\n      current = next;\n    }\n  }\n\n  return null;\n}\n\nfunction findClosesTarget(dndTaskId, taskId, allowedLevel, store, up) {\n  var prev = taskId;\n\n  while (store.exists(prev)) {\n    var targetLevel = store.calculateItemLevel(store.getItem(prev));\n\n    if ((targetLevel === allowedLevel || targetLevel === allowedLevel - 1) && store.getBranchIndex(prev) > -1) {\n      break;\n    } else {\n      prev = up ? store.getPrev(prev) : store.getNext(prev);\n    }\n  }\n\n  if (store.exists(prev)) {\n    if (store.calculateItemLevel(store.getItem(prev)) === allowedLevel) {\n      return up ? dropTarget.nextSiblingTarget(dndTaskId, prev, store) : dropTarget.prevSiblingTarget(dndTaskId, prev, store);\n    } else {\n      return dropTarget.firstChildTarget(dndTaskId, prev, store);\n    }\n  }\n\n  return null;\n}\n\nfunction findTargetAbove(dndTaskId, taskId, allowedLevel, store) {\n  return findClosesTarget(dndTaskId, taskId, allowedLevel, store, true);\n}\n\nfunction findTargetBelow(dndTaskId, taskId, allowedLevel, store) {\n  return findClosesTarget(dndTaskId, taskId, allowedLevel, store, false);\n}\n\nmodule.exports = function getSameLevelDropPosition(dndTaskId, targetTaskId, relTargetPos, eventTop, store, level) {\n  var result;\n\n  if (targetTaskId !== store.$getRootId()) {\n    var targetTask = store.getItem(targetTaskId);\n    var targetLevel = store.calculateItemLevel(targetTask);\n\n    if (targetLevel === level) {\n      var prevSibling = store.getPrevSibling(targetTaskId);\n\n      if (relTargetPos < 0.5 && !prevSibling) {\n        result = dropTarget.prevSiblingTarget(dndTaskId, targetTaskId, store);\n      } else {\n        if (relTargetPos < 0.5) {\n          targetTaskId = prevSibling;\n        }\n\n        result = dropTarget.nextSiblingTarget(dndTaskId, targetTaskId, store);\n      }\n    } else if (targetLevel > level) {\n      store.eachParent(function (parent) {\n        if (store.calculateItemLevel(parent) === level) {\n          targetTaskId = parent.id;\n        }\n      }, targetTask);\n      result = findTargetAbove(dndTaskId, targetTaskId, level, store);\n    } else {\n      var targetAbove = findTargetAbove(dndTaskId, targetTaskId, level, store);\n      var targetBelow = findTargetBelow(dndTaskId, targetTaskId, level, store);\n      result = relTargetPos < 0.5 ? targetAbove : targetBelow;\n    }\n  } else {\n    var rootId = store.$getRootId();\n    var rootLevel = store.getChildren(rootId);\n    result = dropTarget.createDropTargetObject();\n\n    if (rootLevel.length && eventTop >= 0) {\n      result = findTargetAbove(dndTaskId, getLast(store), level, store);\n    } else {\n      result = findTargetBelow(dndTaskId, rootId, level, store);\n    }\n  }\n\n  return result;\n};","var domHelpers = require(\"../utils/dom_helpers\");\n\nvar dropTarget = require(\"./tasks_grid_dnd_marker_helpers/drop_target\");\n\nvar getLockedLevelTarget = require(\"./tasks_grid_dnd_marker_helpers/locked_level\");\n\nvar getMultiLevelTarget = require(\"./tasks_grid_dnd_marker_helpers/multi_level\");\n\nvar higlighter = require(\"./tasks_grid_dnd_marker_helpers/highlight\");\n\nvar isPlaceholderTask = require(\"../../../utils/placeholder_task\");\n\nfunction _init_dnd(gantt, grid) {\n  var DnD = gantt.$services.getService(\"dnd\");\n\n  if (!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)) {\n    return;\n  }\n\n  function locate(e) {\n    return domHelpers.locateAttribute(e, grid.$config.item_attribute);\n  }\n\n  function getStore() {\n    return gantt.getDatastore(grid.$config.bind);\n  }\n\n  function checkPlaceholderTask(id) {\n    return isPlaceholderTask(id, gantt, getStore());\n  }\n\n  var dnd = new DnD(grid.$grid_data, {\n    updates_per_second: 60\n  });\n  if (gantt.defined(grid.$getConfig().dnd_sensitivity)) dnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\n  dnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\n    var el = locate(e);\n    if (!el) return false;\n    if (gantt.hideQuickInfo) gantt._hideQuickInfo();\n\n    if (domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\")) {\n      return false;\n    }\n\n    var id = el.getAttribute(grid.$config.item_attribute);\n    var datastore = grid.$config.rowStore;\n    var task = datastore.getItem(id);\n    if (gantt.isReadonly(task) || checkPlaceholderTask(id)) return false;\n    dnd.config.initial_open_state = task.$open;\n\n    if (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\n      return false;\n    }\n  }, gantt));\n  dnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\n    var el = locate(e);\n    dnd.config.marker.innerHTML = el.outerHTML;\n    var element = dnd.config.marker.firstChild;\n\n    if (element) {\n      dnd.config.marker.style.opacity = 0.4;\n      element.style.position = \"static\";\n      element.style.pointerEvents = \"none\";\n    }\n\n    dnd.config.id = el.getAttribute(grid.$config.item_attribute);\n    var store = grid.$config.rowStore;\n    var task = store.getItem(dnd.config.id);\n    dnd.config.level = store.calculateItemLevel(task);\n    dnd.config.drop_target = dropTarget.createDropTargetObject({\n      targetParent: store.getParent(task.id),\n      targetIndex: store.getBranchIndex(task.id),\n      targetId: task.id,\n      nextSibling: true\n    });\n    task.$open = false;\n    task.$transparent = true;\n    this.refreshData();\n  }, gantt));\n\n  function getTargetTaskId(e) {\n    var y = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\n    var store = grid.$config.rowStore;\n\n    if (!document.doctype) {\n      y += window.scrollY;\n    }\n\n    y = y || 0; // limits for the marker according to the layout layer\n\n    var scrollPos = grid.$state.scrollTop || 0;\n    var maxBottom = gantt.$grid_data.getBoundingClientRect().height + scrollPos + window.scrollY;\n    var minTop = scrollPos;\n    var firstVisibleTaskIndex = grid.getItemIndexByTopPosition(grid.$state.scrollTop);\n\n    if (!store.exists(firstVisibleTaskIndex)) {\n      firstVisibleTaskIndex = store.countVisible() - 1;\n    }\n\n    if (firstVisibleTaskIndex < 0) {\n      return store.$getRootId();\n    }\n\n    var firstVisibleTaskId = store.getIdByIndex(firstVisibleTaskIndex);\n    var firstVisibleTaskPos = grid.$state.scrollTop / grid.getItemHeight(firstVisibleTaskId);\n    var hiddenTaskPart = firstVisibleTaskPos - Math.floor(firstVisibleTaskPos);\n\n    if (hiddenTaskPart > 0.1 && hiddenTaskPart < 0.9) {\n      maxBottom = maxBottom - grid.getItemHeight(firstVisibleTaskId) * hiddenTaskPart;\n      minTop = minTop + grid.getItemHeight(firstVisibleTaskId) * (1 - hiddenTaskPart);\n    } // GS-715. The placeholder task row shouldn't be draggable below the Gantt container\n\n\n    var gridPosition = domHelpers.getNodePosition(grid.$grid_data);\n    var gridBottom = gridPosition.y + gridPosition.height;\n    var placeholderRowHeight = dnd.config.marker.offsetHeight;\n\n    if (y + placeholderRowHeight + window.scrollY >= maxBottom) {\n      dnd.config.marker.style.top = gridBottom - placeholderRowHeight + \"px\";\n    }\n\n    if (y >= maxBottom) {\n      y = maxBottom;\n    } else if (y <= minTop) {\n      y = minTop;\n      dnd.config.marker.style.top = gridPosition.y + \"px\";\n    }\n\n    var index = grid.getItemIndexByTopPosition(y);\n\n    if (index > store.countVisible() - 1 || index < 0) {\n      return store.$getRootId();\n    }\n\n    var targetId = store.getIdByIndex(index);\n\n    if (checkPlaceholderTask(targetId)) {\n      return store.getPrevSibling(targetId);\n    }\n\n    return store.getIdByIndex(index);\n  }\n\n  function getDropPosition(e) {\n    var targetTaskId = getTargetTaskId(e);\n    var relTargetPos = null;\n    var store = grid.$config.rowStore;\n    var config = grid.$getConfig();\n    var lockLevel = !config.order_branch_free;\n    var eventTop = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\n\n    if (!document.doctype) {\n      eventTop += window.scrollY;\n    }\n\n    if (targetTaskId !== store.$getRootId()) {\n      var rowTop = grid.getItemTop(targetTaskId);\n      var rowHeight = grid.getItemHeight(targetTaskId);\n      relTargetPos = (eventTop - rowTop) / rowHeight;\n    }\n\n    var result;\n\n    if (!lockLevel) {\n      result = getMultiLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store);\n    } else {\n      result = getLockedLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store, dnd.config.level);\n\n      if (result && result.targetParent && checkPlaceholderTask(result.targetParent)) {\n        targetTaskId = store.getPrevSibling(result.targetParent);\n        result = getLockedLevelTarget(dnd.config.id, targetTaskId, relTargetPos, eventTop, store, dnd.config.level);\n      }\n    }\n\n    return result;\n  }\n\n  dnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\n    var target = getDropPosition(e);\n\n    if (!target || gantt.callEvent(\"onBeforeRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]) === false) {\n      target = dropTarget.createDropTargetObject(dnd.config.drop_target);\n    }\n\n    higlighter.highlightPosition(target, dnd.config, grid);\n    dnd.config.drop_target = target;\n    this.callEvent(\"onRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]);\n    return true;\n  }, gantt));\n  dnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\n    var store = grid.$config.rowStore;\n    var task = store.getItem(dnd.config.id);\n    higlighter.removeLineHighlight(dnd.config);\n    task.$transparent = false;\n    task.$open = dnd.config.initial_open_state;\n    var target = dnd.config.drop_target;\n\n    if (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]) === false) {\n      task.$drop_target = null;\n    } else {\n      store.move(dnd.config.id, target.targetIndex, target.targetParent);\n      gantt.render();\n      this.callEvent(\"onRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]);\n    }\n\n    store.refresh(task.id);\n  }, gantt));\n}\n\nmodule.exports = {\n  init: _init_dnd\n};","var domHelpers = require(\"../utils/dom_helpers\");\n\nvar isPlaceholderTask = require(\"../../../utils/placeholder_task\");\n\nfunction _init_dnd(gantt, grid) {\n  var DnD = gantt.$services.getService(\"dnd\");\n\n  if (!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)) {\n    return;\n  }\n\n  function locate(e) {\n    return domHelpers.locateAttribute(e, grid.$config.item_attribute);\n  }\n\n  function getStore() {\n    return gantt.getDatastore(grid.$config.bind);\n  }\n\n  function checkPlaceholderTask(id) {\n    return isPlaceholderTask(id, gantt, getStore());\n  }\n\n  var dnd = new DnD(grid.$grid_data, {\n    updates_per_second: 60\n  });\n  if (gantt.defined(grid.$getConfig().dnd_sensitivity)) dnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\n  dnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\n    var el = locate(e);\n    if (!el) return false;\n    if (gantt.hideQuickInfo) gantt._hideQuickInfo();\n\n    if (domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\")) {\n      return false;\n    }\n\n    var id = el.getAttribute(grid.$config.item_attribute);\n    if (checkPlaceholderTask(id)) return false;\n    var datastore = getStore();\n    var task = datastore.getItem(id);\n    if (gantt.isReadonly(task)) return false;\n    dnd.config.initial_open_state = task.$open;\n\n    if (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\n      return false;\n    }\n  }, gantt));\n  dnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\n    var el = locate(e);\n    dnd.config.marker.innerHTML = el.outerHTML;\n    var element = dnd.config.marker.firstChild;\n\n    if (element) {\n      element.style.position = \"static\";\n    }\n\n    dnd.config.id = el.getAttribute(grid.$config.item_attribute);\n    var store = getStore();\n    var task = store.getItem(dnd.config.id);\n    dnd.config.index = store.getBranchIndex(dnd.config.id);\n    dnd.config.parent = task.parent;\n    task.$open = false;\n    task.$transparent = true;\n    this.refreshData();\n  }, gantt));\n\n  dnd.lastTaskOfLevel = function (level) {\n    var last_item = null;\n    var store = getStore();\n    var tasks = store.getItems();\n\n    for (var i = 0, len = tasks.length; i < len; i++) {\n      if (tasks[i].$level == level) {\n        last_item = tasks[i];\n      }\n    }\n\n    return last_item ? last_item.id : null;\n  };\n\n  dnd._getGridPos = gantt.bind(function (e) {\n    var pos = domHelpers.getNodePosition(grid.$grid_data); // row offset\n\n    var x = pos.x + grid.$grid.scrollLeft;\n    var y = e.pos.y - 10;\n    var rowHeight = grid.getItemHeight(dnd.config.id); // prevent moving row out of grid_data container\n\n    if (y < pos.y) y = pos.y;\n    var gridHeight = grid.getTotalHeight();\n    if (y > pos.y + gridHeight - rowHeight) y = pos.y + gridHeight - rowHeight;\n    var maxBottom = pos.y + pos.height;\n\n    if (y > maxBottom - rowHeight) {\n      y = maxBottom - rowHeight;\n    }\n\n    pos.x = x;\n    pos.y = y;\n    return pos;\n  }, gantt);\n  dnd._getTargetY = gantt.bind(function (e) {\n    var pos = domHelpers.getNodePosition(grid.$grid_data);\n    var scrollPos = grid.$state.scrollTop || 0;\n    var maxBottom = gantt.$grid_data.getBoundingClientRect().height + scrollPos;\n    var y = e.pageY - pos.y + scrollPos;\n\n    if (y > maxBottom) {\n      y = maxBottom;\n    } else if (y < scrollPos) {\n      y = scrollPos;\n    }\n\n    return y;\n  }, gantt);\n  dnd._getTaskByY = gantt.bind(function (y, dropIndex) {\n    var store = getStore();\n    y = y || 0;\n    var index = grid.getItemIndexByTopPosition(y);\n    index = dropIndex < index ? index - 1 : index;\n    if (index > store.countVisible() - 1) return null;\n    return store.getIdByIndex(index);\n  }, gantt);\n  dnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\n    var gridDataSizes = gantt.$grid_data.getBoundingClientRect();\n    var maxBottom = gridDataSizes.height + gridDataSizes.y + (grid.$state.scrollTop || 0) + window.scrollY;\n    var dd = dnd.config;\n\n    var pos = dnd._getGridPos(e);\n\n    var config = grid.$getConfig(),\n        store = getStore(); // setting position of row\n\n    if (pos.y < maxBottom) {\n      dd.marker.style.top = pos.y + \"px\";\n    } else {\n      dd.marker.style.top = maxBottom + \"px\";\n    }\n\n    dd.marker.style.left = pos.x + 10 + \"px\";\n    var containerSize = domHelpers.getNodePosition(gantt.$root);\n\n    if (pos.width > containerSize.width) {\n      dd.marker.style.width = containerSize.width - 10 - 2 + \"px\";\n      dd.marker.style.overflow = \"hidden\";\n    } // highlight row when mouseover\n\n\n    var item = store.getItem(dnd.config.id);\n\n    var targetY = dnd._getTargetY(e);\n\n    var el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\n\n    if (!store.exists(el)) {\n      el = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\n\n      if (el == dnd.config.id) {\n        el = null;\n      }\n    }\n\n    function allowedLevel(next, item) {\n      return !store.isChildOf(over.id, item.id) && (next.$level == item.$level || config.order_branch_free);\n    }\n\n    if (store.exists(el)) {\n      var over = store.getItem(el);\n      var itemTop = grid.getItemTop(over.id);\n      var itemHeight = grid.getItemHeight(over.id);\n\n      if (itemTop + itemHeight / 2 < targetY) {\n        //hovering over bottom part of item, check can be drop to bottom\n        var index = store.getIndexById(over.id);\n        var nextId = store.getNext(over.id); //adds +1 when hovering over placeholder\n\n        var next = store.getItem(nextId);\n\n        if (checkPlaceholderTask(nextId)) {\n          var prevId = store.getPrev(next.id);\n          next = store.getItem(prevId);\n        }\n\n        if (next) {\n          if (next.id != item.id) {\n            over = next; //there is a valid target\n          } else {\n            if (config.order_branch_free) {\n              if (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1)) return;else {\n                store.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\n                return;\n              }\n            } else {\n              return;\n            }\n          }\n        } else {\n          //we at end of the list, check and drop at the end of list\n          nextId = store.getIdByIndex(index);\n          next = store.getItem(nextId);\n\n          if (checkPlaceholderTask(nextId)) {\n            var prevId = store.getPrev(next.id);\n            next = store.getItem(prevId);\n          }\n\n          if (allowedLevel(next, item) && next.id != item.id) {\n            store.move(item.id, -1, store.getParent(next.id));\n            return;\n          }\n        }\n      } else if (config.order_branch_free) {\n        if (over.id != item.id && allowedLevel(over, item) && !checkPlaceholderTask(over.id)) {\n          if (!store.hasChild(over.id)) {\n            over.$open = true;\n            store.move(item.id, -1, over.id);\n            return;\n          }\n\n          if (store.getIndexById(over.id) || itemHeight / 3 < targetY) return;\n        }\n      } //if item is on different level, check the one before it\n\n\n      var index = store.getIndexById(over.id),\n          prevId = store.getIdByIndex(index - 1);\n      var prev = store.getItem(prevId);\n      var shift = 1;\n\n      while ((!prev || prev.id == over.id) && index - shift >= 0) {\n        prevId = store.getIdByIndex(index - shift);\n        prev = store.getItem(prevId);\n        shift++;\n      }\n\n      if (item.id == over.id || checkPlaceholderTask(over.id)) return; //replacing item under cursor\n\n      if (allowedLevel(over, item) && item.id != over.id) {\n        store.move(item.id, 0, 0, over.id);\n      } else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\n        store.move(item.id, 0, over.id);\n      } else if (prev && allowedLevel(prev, item) && item.id != prev.id) {\n        store.move(item.id, -1, store.getParent(prev.id));\n      }\n    }\n\n    return true;\n  }, gantt));\n  dnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\n    var store = getStore();\n    var task = store.getItem(dnd.config.id);\n    task.$transparent = false;\n    task.$open = dnd.config.initial_open_state;\n\n    if (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\n      store.move(dnd.config.id, dnd.config.index, dnd.config.parent);\n      task.$drop_target = null;\n    } else {\n      this.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\n    }\n\n    gantt.render();\n    this.refreshData();\n  }, gantt));\n}\n\nmodule.exports = {\n  init: _init_dnd\n};","var utils = require(\"../../../utils/utils\");\n\nvar rowDnd = require(\"./tasks_grid_dnd\");\n\nvar rowDndMarker = require(\"./tasks_grid_dnd_marker\");\n\nvar initializer = function () {\n  return function (gantt) {\n    return {\n      onCreated: function onCreated(grid) {\n        grid.$config = utils.mixin(grid.$config, {\n          bind: \"task\"\n        });\n\n        if (grid.$config.id == \"grid\") {\n          this.extendGantt(grid);\n          gantt.ext.inlineEditors = gantt.ext._inlineEditors.createEditors(grid);\n          gantt.ext.inlineEditors.init();\n        }\n\n        this._mouseDelegates = require(\"../mouse_event_container\")(gantt);\n      },\n      onInitialized: function onInitialized(grid) {\n        var config = grid.$getConfig();\n\n        if (config.order_branch) {\n          if (config.order_branch == \"marker\") {\n            rowDndMarker.init(grid.$gantt, grid);\n          } else {\n            rowDnd.init(grid.$gantt, grid);\n          }\n        }\n\n        this.initEvents(grid, gantt);\n\n        if (grid.$config.id == \"grid\") {\n          this.extendDom(grid);\n        }\n      },\n      onDestroyed: function onDestroyed(grid) {\n        if (grid.$config.id == \"grid\") {\n          gantt.ext.inlineEditors.destructor();\n        }\n\n        this.clearEvents(grid, gantt);\n      },\n      initEvents: function initEvents(grid, gantt) {\n        this._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\n          var config = grid.$getConfig();\n\n          if (id !== null) {\n            var task = this.getTask(id);\n            if (config.scroll_on_click && !gantt._is_icon_open_click(e)) this.showDate(task.start_date);\n            gantt.callEvent(\"onTaskRowClick\", [id, trg]);\n          }\n        }, gantt), grid.$grid);\n\n        this._mouseDelegates.delegate(\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\n          var column = trg.getAttribute(\"data-column-id\");\n          if (!gantt.callEvent(\"onGridHeaderClick\", [column, e])) return;\n          var config = grid.$getConfig();\n\n          if (column == \"add\") {\n            var mouseEvents = gantt.$services.getService(\"mouseEvents\");\n            mouseEvents.callHandler(\"click\", \"gantt_add\", grid.$grid, [e, config.root_id]);\n            return;\n          }\n\n          if (config.sort && column) {\n            // GS-929: if there is no column name, we cannot sort the column\n            var sorting_method = column,\n                conf;\n\n            for (var i = 0; i < config.columns.length; i++) {\n              if (config.columns[i].name == column) {\n                conf = config.columns[i];\n                break;\n              }\n            }\n\n            if (conf && conf.sort !== undefined && conf.sort !== true) {\n              sorting_method = conf.sort;\n\n              if (!sorting_method) {\n                // column sort property 'false', no sorting\n                return;\n              }\n            }\n\n            var sort = this._sort && this._sort.direction && this._sort.name == column ? this._sort.direction : \"desc\"; // invert sort direction\n\n            sort = sort == \"desc\" ? \"asc\" : \"desc\";\n            this._sort = {\n              name: column,\n              direction: sort\n            };\n            this.sort(sorting_method, sort == \"desc\");\n          }\n        }, gantt), grid.$grid);\n\n        this._mouseDelegates.delegate(\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\n          var config = grid.$getConfig();\n          if (config.readonly) return;\n          var item = {};\n          this.createTask(item, id ? id : gantt.config.root_id);\n          return false;\n        }, gantt), grid.$grid);\n      },\n      clearEvents: function clearEvents(grid, gantt) {\n        this._mouseDelegates.destructor();\n\n        this._mouseDelegates = null;\n      },\n      extendDom: function extendDom(grid) {\n        gantt.$grid = grid.$grid;\n        gantt.$grid_scale = grid.$grid_scale;\n        gantt.$grid_data = grid.$grid_data;\n      },\n      extendGantt: function extendGantt(grid) {\n        gantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\n        grid.attachEvent(\"onColumnResizeStart\", function () {\n          return gantt.callEvent(\"onColumnResizeStart\", arguments);\n        });\n        grid.attachEvent(\"onColumnResize\", function () {\n          return gantt.callEvent(\"onColumnResize\", arguments);\n        });\n        grid.attachEvent(\"onColumnResizeEnd\", function () {\n          return gantt.callEvent(\"onColumnResizeEnd\", arguments);\n        });\n        grid.attachEvent(\"onColumnResizeComplete\", function (columns, totalWidth) {\n          gantt.config.grid_width = totalWidth;\n        });\n        grid.attachEvent(\"onBeforeRowResize\", function () {\n          return gantt.callEvent(\"onBeforeRowResize\", arguments);\n        });\n        grid.attachEvent(\"onRowResize\", function () {\n          return gantt.callEvent(\"onRowResize\", arguments);\n        });\n        grid.attachEvent(\"onBeforeRowResizeEnd\", function () {\n          return gantt.callEvent(\"onBeforeRowResizeEnd\", arguments);\n        });\n        grid.attachEvent(\"onAfterRowResize\", function () {\n          return gantt.callEvent(\"onAfterRowResize\", arguments);\n        });\n      }\n    };\n  };\n}();\n\nmodule.exports = initializer;","var getRowRectangle = require(\"./viewport/get_grid_row_rectangle\");\n\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\n\nfunction createGridTaskRowResizerRender(gantt) {\n  function _render_grid_item(item, view, viewport) {\n    var config = view.$getConfig();\n    var resize_el = document.createElement(\"div\");\n    resize_el.className = \"gantt_task_grid_row_resize_wrap\";\n    resize_el.style.top = view.getItemTop(item.id) + view.getItemHeight(item.id) + \"px\";\n    resize_el.innerHTML = \"<div class='gantt_task_grid_row_resize'></div>\";\n    resize_el.setAttribute(config.task_grid_row_resizer_attribute, item.id);\n\n    gantt._waiAria.gridSeparatorAttr(resize_el);\n\n    return resize_el;\n  }\n\n  return {\n    render: _render_grid_item,\n    update: null,\n    getRectangle: getRowRectangle,\n    getVisibleRange: getVisibleRange\n  };\n}\n\nmodule.exports = createGridTaskRowResizerRender;","var getRectangle = require(\"./viewport/get_bg_row_rectangle\");\n\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\n\nvar getVisibleCellsRange = require(\"./viewport/get_visible_cells_range\");\n\nvar isColumnVisible = require(\"./viewport/is_column_visible\");\n\nvar resourceTimetable = require(\"../../resource_timetable_builder\");\n\nfunction renderBar(level, start, end, timeline) {\n  var top = (1 - (level * 1 || 0)) * 100;\n  var left = timeline.posFromDate(start);\n  var right = timeline.posFromDate(end);\n  var element = document.createElement(\"div\");\n  element.className = \"gantt_histogram_hor_bar\";\n  element.style.top = top + '%';\n  element.style.left = left + \"px\";\n  element.style.width = right - left + 1 + \"px\";\n  return element;\n}\n\nfunction renderConnection(prevLevel, nextLevel, left) {\n  if (prevLevel === nextLevel) {\n    return null;\n  }\n\n  var top = 1 - Math.max(prevLevel, nextLevel);\n  var height = Math.abs(prevLevel - nextLevel);\n  var element = document.createElement(\"div\");\n  element.className = \"gantt_histogram_vert_bar\";\n  element.style.top = top * 100 + \"%\";\n  element.style.height = height * 100 + \"%\";\n  element.style.left = left + \"px\";\n  return element;\n}\n\nfunction generateRenderResourceHistogram(gantt) {\n  var getResourceLoad = resourceTimetable(gantt);\n  var renderedHistogramCells = {};\n  var renderedHistogramRows = {};\n  var renderedHistogramCapacity = {};\n\n  function detachRenderedHistogramCell(id, index) {\n    var renderedRow = renderedHistogramCells[id];\n\n    if (renderedRow && renderedRow[index] && renderedRow[index].parentNode) {\n      renderedRow[index].parentNode.removeChild(renderedRow[index]);\n    }\n  }\n\n  function renderHistogramLine(capacity, timeline, maxCapacity, viewport) {\n    var scale = timeline.getScale();\n    var el = document.createElement(\"div\");\n    var range = getVisibleCellsRange(scale, viewport);\n\n    for (var i = range.start; i <= range.end; i++) {\n      var colStart = scale.trace_x[i];\n      var colEnd = scale.trace_x[i + 1] || gantt.date.add(colStart, scale.step, scale.unit);\n      var col = scale.trace_x[i].valueOf();\n      var level = Math.min(capacity[col] / maxCapacity, 1) || 0; // do not render histogram for lines with below zero capacity, as it's reserved for folders\n\n      if (level < 0) {\n        return null;\n      }\n\n      var nextLevel = Math.min(capacity[colEnd.valueOf()] / maxCapacity, 1) || 0;\n      var bar = renderBar(level, colStart, colEnd, timeline);\n\n      if (bar) {\n        el.appendChild(bar);\n      }\n\n      var connection = renderConnection(level, nextLevel, timeline.posFromDate(colEnd));\n\n      if (connection) {\n        el.appendChild(connection);\n      }\n    }\n\n    return el;\n  }\n\n  function renderCapacityElement(resource, sizes, capacityMatrix, config, timeline, maxCapacity, viewport) {\n    var renderedElement = renderedHistogramCapacity[resource.id];\n\n    if (renderedElement && renderedElement.parentNode) {\n      renderedElement.parentNode.removeChild(renderedElement);\n    }\n\n    var capacityElement = renderHistogramLine(capacityMatrix, timeline, maxCapacity, viewport);\n\n    if (capacityElement && sizes) {\n      capacityElement.setAttribute(\"data-resource-id\", resource.id);\n      capacityElement.setAttribute(timeline.$config.item_attribute, resource.id);\n      capacityElement.style.position = \"absolute\";\n      capacityElement.style.top = sizes.top + 1 + \"px\";\n      capacityElement.style.height = timeline.getItemHeight(resource.id) - 1 + \"px\";\n      capacityElement.style.left = 0;\n    }\n\n    return capacityElement;\n  }\n\n  function renderHistogramCell(resource, sizes, maxCapacity, config, templates, day, timeline) {\n    var css = templates.histogram_cell_class(day.start_date, day.end_date, resource, day.tasks, day.assignments);\n    var content = templates.histogram_cell_label(day.start_date, day.end_date, resource, day.tasks, day.assignments);\n    var fill = templates.histogram_cell_allocated(day.start_date, day.end_date, resource, day.tasks, day.assignments);\n    var height = timeline.getItemHeight(resource.id) - 1;\n\n    if (css || content) {\n      var el = document.createElement('div');\n      el.className = [\"gantt_histogram_cell\", css].join(\" \");\n      el.setAttribute(timeline.$config.item_attribute, resource.id);\n      el.style.cssText = ['left:' + sizes.left + 'px', 'width:' + sizes.width + 'px', 'height:' + height + 'px', 'line-height:' + height + 'px', 'top:' + (sizes.top + 1) + 'px'].join(\";\");\n\n      if (content) {\n        content = \"<div class='gantt_histogram_label'>\" + content + \"</div>\";\n      }\n\n      if (fill) {\n        content = \"<div class='gantt_histogram_fill' style='height:\" + Math.min(fill / maxCapacity || 0, 1) * 100 + \"%;'></div>\" + content;\n      }\n\n      if (content) {\n        el.innerHTML = content;\n      }\n\n      return el;\n    }\n\n    return null;\n  }\n\n  function renderResourceHistogram(resource, timeline, config, viewport) {\n    var templates = timeline.$getTemplates();\n    var scale = timeline.getScale();\n    var timetable = getResourceLoad(resource, config.resource_property, scale, timeline);\n    var cells = [];\n    var capacityMatrix = {};\n    var maxCapacity = resource.capacity || timeline.$config.capacity || 24;\n    renderedHistogramCells[resource.id] = {};\n    renderedHistogramRows[resource.id] = null;\n    renderedHistogramCapacity[resource.id] = null;\n    var smartRendering = !!viewport; //no viewport means smart rendering is disabled\n\n    var range = getVisibleCellsRange(scale, viewport);\n\n    for (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\n      var day = timetable[columnIndex];\n\n      if (!day) {\n        continue;\n      }\n\n      if (smartRendering && !isColumnVisible(columnIndex, scale, viewport, gantt)) {\n        continue;\n      }\n\n      var capacity = templates.histogram_cell_capacity(day.start_date, day.end_date, resource, day.tasks, day.assignments);\n      capacityMatrix[day.start_date.valueOf()] = capacity || 0;\n      var sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\n      var el = renderHistogramCell(resource, sizes, maxCapacity, config, templates, day, timeline);\n\n      if (el) {\n        cells.push(el);\n        renderedHistogramCells[resource.id][columnIndex] = el;\n      }\n    }\n\n    var row = null;\n\n    if (cells.length) {\n      row = document.createElement(\"div\");\n\n      for (var i = 0; i < cells.length; i++) {\n        row.appendChild(cells[i]);\n      }\n\n      var capacityElement = renderCapacityElement(resource, sizes, capacityMatrix, config, timeline, maxCapacity, viewport);\n\n      if (capacityElement) {\n        row.appendChild(capacityElement);\n        renderedHistogramCapacity[resource.id] = capacityElement;\n      }\n\n      renderedHistogramRows[resource.id] = row;\n    }\n\n    return row;\n  }\n\n  function updateResourceHistogram(resource, node, timeline, config, viewport) {\n    var templates = timeline.$getTemplates();\n    var scale = timeline.getScale();\n    var timetable = getResourceLoad(resource, config.resource_property, scale, timeline);\n    var maxCapacity = resource.capacity || timeline.$config.capacity || 24;\n    var capacityMatrix = {};\n    var smartRendering = !!viewport; //no viewport means smart rendering is disabled\n\n    var range = getVisibleCellsRange(scale, viewport);\n    var checkedColumns = {};\n\n    if (renderedHistogramCells && renderedHistogramCells[resource.id]) {\n      for (var i in renderedHistogramCells[resource.id]) {\n        checkedColumns[i] = i;\n      }\n    }\n\n    for (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\n      var day = timetable[columnIndex];\n      checkedColumns[columnIndex] = false;\n\n      if (!day) {\n        continue;\n      }\n\n      var capacity = templates.histogram_cell_capacity(day.start_date, day.end_date, resource, day.tasks, day.assignments);\n      capacityMatrix[day.start_date.valueOf()] = capacity || 0;\n      var sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\n\n      if (smartRendering && !isColumnVisible(columnIndex, scale, viewport, gantt)) {\n        detachRenderedHistogramCell(resource.id, columnIndex);\n        continue;\n      }\n\n      var renderedCell = renderedHistogramCells[resource.id];\n\n      if (!renderedCell || !renderedCell[columnIndex]) {\n        var el = renderHistogramCell(resource, sizes, maxCapacity, config, templates, day, timeline);\n\n        if (el) {\n          node.appendChild(el);\n          renderedHistogramCells[resource.id][columnIndex] = el;\n        }\n      } else if (renderedCell && renderedCell[columnIndex] && !renderedCell[columnIndex].parentNode) {\n        node.appendChild(renderedCell[columnIndex]);\n      }\n    }\n\n    for (var i in checkedColumns) {\n      if (checkedColumns[i] !== false) {\n        detachRenderedHistogramCell(resource.id, i);\n      }\n    }\n\n    var capacityElement = renderCapacityElement(resource, sizes, capacityMatrix, config, timeline, maxCapacity, viewport);\n\n    if (capacityElement) {\n      node.appendChild(capacityElement);\n      renderedHistogramCapacity[resource.id] = capacityElement;\n    }\n  }\n\n  return {\n    render: renderResourceHistogram,\n    update: updateResourceHistogram,\n    getRectangle: getRectangle,\n    getVisibleRange: getVisibleRange\n  };\n}\n\nmodule.exports = generateRenderResourceHistogram;","var getRectangle = require(\"./viewport/get_bg_row_rectangle\");\n\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\n\nvar getVisibleCellsRange = require(\"./viewport/get_visible_cells_range\");\n\nvar isColumnVisible = require(\"./viewport/is_column_visible\");\n\nvar resourceTimetable = require(\"../../resource_timetable_builder\");\n\nfunction generateRenderResourceLine(gantt) {\n  var getResourceLoad = resourceTimetable(gantt);\n  var renderedResourceLines = {};\n\n  function renderResourceLineCell(resource, day, templates, config, timeline) {\n    var css = templates.resource_cell_class(day.start_date, day.end_date, resource, day.tasks, day.assignments);\n    var content = templates.resource_cell_value(day.start_date, day.end_date, resource, day.tasks, day.assignments);\n    var height = timeline.getItemHeight(resource.id) - 1;\n\n    if (css || content) {\n      var sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\n      var el = document.createElement('div');\n      el.setAttribute(timeline.$config.item_attribute, resource.id);\n      el.className = [\"gantt_resource_marker\", css].join(\" \");\n      el.style.cssText = ['left:' + sizes.left + 'px', 'width:' + sizes.width + 'px', 'height:' + height + 'px', 'line-height:' + height + 'px', 'top:' + sizes.top + 'px'].join(\";\");\n      if (content) el.innerHTML = content;\n      return el;\n    }\n\n    return null;\n  }\n\n  function detachRenderedResourceLine(id, index) {\n    if (renderedResourceLines[id] && renderedResourceLines[id][index] && renderedResourceLines[id][index].parentNode) {\n      renderedResourceLines[id][index].parentNode.removeChild(renderedResourceLines[id][index]);\n    }\n  }\n\n  function renderResourceLine(resource, timeline, config, viewport) {\n    var templates = timeline.$getTemplates();\n    var scale = timeline.getScale();\n    var timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\n    var smartRendering = !!viewport; //no viewport means smart rendering is disabled\n\n    var cells = [];\n    renderedResourceLines[resource.id] = {};\n    var range = getVisibleCellsRange(scale, viewport);\n\n    for (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\n      var day = timetable[columnIndex];\n\n      if (!day) {\n        continue;\n      }\n\n      if (smartRendering && !isColumnVisible(columnIndex, scale, viewport, gantt)) {\n        continue;\n      }\n\n      var cell = renderResourceLineCell(resource, day, templates, config, timeline);\n\n      if (cell) {\n        cells.push(cell);\n        renderedResourceLines[resource.id][columnIndex] = cell;\n      }\n    }\n\n    var row = null;\n\n    if (cells.length) {\n      row = document.createElement(\"div\");\n\n      for (var i = 0; i < cells.length; i++) {\n        row.appendChild(cells[i]);\n      }\n    }\n\n    return row;\n  }\n\n  function updateResourceLine(resource, node, timeline, config, viewport) {\n    var templates = timeline.$getTemplates();\n    var scale = timeline.getScale();\n    var timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\n    var range = getVisibleCellsRange(scale, viewport);\n    var checkedColumns = {};\n\n    if (renderedResourceLines && renderedResourceLines[resource.id]) {\n      for (var i in renderedResourceLines[resource.id]) {\n        checkedColumns[i] = i;\n      }\n    }\n\n    for (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\n      var day = timetable[columnIndex];\n      checkedColumns[columnIndex] = false;\n\n      if (!day) {\n        continue;\n      }\n\n      if (!isColumnVisible(columnIndex, scale, viewport, gantt)) {\n        detachRenderedResourceLine(resource.id, columnIndex);\n        continue;\n      }\n\n      if (!renderedResourceLines[resource.id] || !renderedResourceLines[resource.id][columnIndex]) {\n        var cell = renderResourceLineCell(resource, day, templates, config, timeline);\n\n        if (cell) {\n          node.appendChild(cell);\n          renderedResourceLines[resource.id][columnIndex] = cell;\n        }\n      } else if (renderedResourceLines[resource.id] && renderedResourceLines[resource.id][columnIndex] && !renderedResourceLines[resource.id][columnIndex].parentNode) {\n        node.appendChild(renderedResourceLines[resource.id][columnIndex]);\n      }\n    }\n\n    for (var i in checkedColumns) {\n      if (checkedColumns[i] !== false) {\n        detachRenderedResourceLine(resource.id, i);\n      }\n    }\n  }\n\n  return {\n    render: renderResourceLine,\n    update: updateResourceLine,\n    getRectangle: getRectangle,\n    getVisibleRange: getVisibleRange\n  };\n}\n\nmodule.exports = generateRenderResourceLine;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar helpers = require(\"../../../utils/helpers\");\n\nvar getRowRectangle = require(\"./viewport/get_grid_row_rectangle\");\n\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\n\nfunction createGridLineRender(gantt) {\n  function _render_grid_item(item, view, config, viewport) {\n    var columns = view.getGridColumns();\n    var templates = view.$getTemplates();\n    var store = view.$config.rowStore;\n    var cells = [];\n    var has_child;\n\n    for (var i = 0; i < columns.length; i++) {\n      var last = i == columns.length - 1;\n      var col = columns[i];\n      var cell;\n      var value;\n      var textValue;\n\n      if (col.name == \"add\") {\n        var aria = gantt._waiAria.gridAddButtonAttrString(col);\n\n        value = \"<div \" + aria + \" class='gantt_add'></div>\";\n        textValue = \"\";\n      } else {\n        if (col.template) value = col.template(item);else value = item[col.name];\n\n        if (helpers.isDate(value)) {\n          value = templates.date_grid(value, item, col.name);\n        }\n\n        if (value === null || value === undefined) {\n          value = \"\";\n        }\n\n        textValue = value;\n        value = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\n      }\n\n      var css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\n      var tree = [];\n\n      if (col.tree) {\n        css += \" gantt_cell_tree\";\n\n        for (var j = 0; j < item.$level; j++) {\n          tree.push(templates.grid_indent(item));\n        }\n\n        has_child = store.hasChild(item.id) && !(gantt.isSplitTask(item) && !gantt.config.open_split_tasks);\n\n        if (has_child) {\n          tree.push(templates.grid_open(item));\n          tree.push(templates.grid_folder(item));\n        } else {\n          tree.push(templates.grid_blank(item));\n          tree.push(templates.grid_file(item));\n        }\n      }\n\n      var style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\n\n      if (this.defined(col.align)) {\n        var flexAlign = {\n          right: \"flex-end\",\n          left: \"flex-start\",\n          center: \"center\"\n        };\n        var justifyContent = flexAlign[col.align];\n        style += \"text-align:\" + col.align + \";justify-content:\" + justifyContent + \";\";\n      }\n\n      var aria = gantt._waiAria.gridCellAttrString(col, textValue, item);\n\n      tree.push(value);\n      cell = \"<div class='\" + css + \"' data-column-index='\" + i + \"' data-column-name='\" + col.name + \"' style='\" + style + \"' \" + aria + \">\" + tree.join(\"\") + \"</div>\";\n      cells.push(cell);\n    } // GS-291. The odd class should be assigned correctly\n\n\n    css = \"\";\n    var storeName = store.$config.name;\n\n    switch (storeName) {\n      case \"task\":\n        css = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\n        break;\n\n      case \"resource\":\n        css = store.visibleOrder.indexOf(item.id) % 2 === 0 ? \"\" : \" odd\";\n        break;\n    }\n\n    css += item.$transparent ? \" gantt_transparent\" : \"\";\n    css += item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\";\n\n    if (templates.grid_row_class) {\n      var css_template = templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\n      if (css_template) css += \" \" + css_template;\n    }\n\n    if (store.isSelected(item.id)) {\n      css += \" gantt_selected\";\n    }\n\n    var el = document.createElement(\"div\");\n    el.className = \"gantt_row\" + css + \" gantt_row_\" + gantt.getTaskType(item.type);\n    var height = view.getItemHeight(item.id);\n    el.style.height = height + \"px\";\n    el.style.lineHeight = height + \"px\";\n\n    if (config.smart_rendering) {\n      el.style.position = \"absolute\";\n      el.style.left = \"0px\";\n      el.style.top = view.getItemTop(item.id) + \"px\";\n    }\n\n    if (view.$config.item_attribute) {\n      el.setAttribute(view.$config.item_attribute, item.id);\n      el.setAttribute(view.$config.bind + \"_id\", item.id); // 'task_id'/'resource_id' for backward compatibility\n    }\n\n    gantt._waiAria.taskRowAttr(item, el);\n\n    el.innerHTML = cells.join(\"\");\n    return el;\n  }\n\n  function onrender(item, rowNode, view) {\n    var columns = view.getGridColumns();\n\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[i];\n\n      if (column.onrender) {\n        // find cell node for current column\n        var cellNode = rowNode.querySelector(\"[data-column-name=\" + column.name + \"]\");\n\n        if (cellNode) {\n          var content = column.onrender(item, cellNode);\n\n          if (content && typeof content === \"string\") {\n            cellNode.innerHTML = content;\n          } else if (content && _typeof(content) === \"object\") {\n            // render object to node using additional functionality\n            if (gantt.config.external_render) {\n              var adapter = gantt.config.external_render;\n\n              if (adapter.isElement(content)) {\n                adapter.renderElement(content, cellNode);\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    render: _render_grid_item,\n    update: null,\n    getRectangle: getRowRectangle,\n    getVisibleRange: getVisibleRange,\n    onrender: onrender\n  };\n}\n\nmodule.exports = createGridLineRender;","var isInViewPort = require(\"./viewport/is_link_in_viewport\");\n\nvar getVisibleRange = require(\"./viewport/factory/get_visible_link_range\");\n\nfunction createLinkRender(gantt) {\n  function _render_link_element(link, view, config) {\n    var source = gantt.getTask(link.source);\n\n    if (source.hide_bar) {\n      return;\n    }\n\n    var target = gantt.getTask(link.target);\n\n    if (target.hide_bar) {\n      return;\n    }\n\n    var pt = path_builder.get_endpoint(link, view, source, target);\n    var dy = pt.e_y - pt.y;\n    var dx = pt.e_x - pt.x;\n\n    if (!dx && !dy) {\n      return null;\n    }\n\n    var dots = path_builder.get_points(link, view, source, target);\n    var lines = drawer.get_lines(dots, view);\n    var div = document.createElement(\"div\");\n    var css = \"gantt_task_link\";\n\n    if (link.color) {\n      css += \" gantt_link_inline_color\";\n    }\n\n    var cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\n\n    if (cssTemplate) {\n      css += \" \" + cssTemplate;\n    }\n\n    if (config.highlight_critical_path && gantt.isCriticalLink) {\n      if (gantt.isCriticalLink(link)) css += \" gantt_critical_link\";\n    }\n\n    div.className = css;\n\n    if (view.$config.link_attribute) {\n      div.setAttribute(view.$config.link_attribute, link.id);\n      div.setAttribute(\"link_id\", link.id);\n    }\n\n    for (var i = 0; i < lines.length; i++) {\n      if (i == lines.length - 1) {\n        lines[i].size -= config.link_arrow_size;\n      }\n\n      var el = drawer.render_line(lines[i], lines[i + 1], view, link.source);\n\n      if (link.color) {\n        el.firstChild.style.backgroundColor = link.color;\n      }\n\n      div.appendChild(el);\n    }\n\n    var direction = lines[lines.length - 1].direction;\n\n    var endpoint = _render_link_arrow(dots[dots.length - 1], direction, view, link.source);\n\n    if (link.color) {\n      endpoint.style.borderColor = link.color;\n    }\n\n    div.appendChild(endpoint);\n\n    gantt._waiAria.linkAttr(link, div);\n\n    return div;\n  }\n\n  function _render_link_arrow(point, direction, view, targetId) {\n    var config = view.$getConfig();\n    var div = document.createElement(\"div\");\n    var top = point.y;\n    var left = point.x;\n    var size = config.link_arrow_size;\n    var className = \"gantt_link_arrow gantt_link_arrow_\" + direction;\n\n    switch (direction) {\n      case drawer.dirs.right:\n        top -= size / 2;\n        left -= size;\n        break;\n\n      case drawer.dirs.left:\n        top -= size / 2;\n        break;\n\n      case drawer.dirs.up:\n        left -= size;\n        break;\n\n      case drawer.dirs.down:\n        top += size * 2;\n        left -= size;\n        break;\n\n      default:\n        break;\n    }\n\n    div.style.cssText = [\"top:\" + top + \"px\", \"left:\" + left + 'px'].join(';');\n    div.className = className;\n    return div;\n  }\n\n  var drawer = {\n    current_pos: null,\n    dirs: {\n      \"left\": 'left',\n      \"right\": 'right',\n      \"up\": 'up',\n      \"down\": 'down'\n    },\n    path: [],\n    clear: function clear() {\n      this.current_pos = null;\n      this.path = [];\n    },\n    point: function point(pos) {\n      this.current_pos = gantt.copy(pos);\n    },\n    get_lines: function get_lines(dots) {\n      this.clear();\n      this.point(dots[0]);\n\n      for (var i = 1; i < dots.length; i++) {\n        this.line_to(dots[i]);\n      }\n\n      return this.get_path();\n    },\n    line_to: function line_to(pos) {\n      var next = gantt.copy(pos);\n      var prev = this.current_pos;\n\n      var line = this._get_line(prev, next);\n\n      this.path.push(line);\n      this.current_pos = next;\n    },\n    get_path: function get_path() {\n      return this.path;\n    },\n    get_wrapper_sizes: function get_wrapper_sizes(v, view, itemId) {\n      var config = view.$getConfig();\n      var res,\n          wrapper_size = config.link_wrapper_width,\n          y = v.y - wrapper_size / 2;\n\n      switch (v.direction) {\n        case this.dirs.left:\n          res = {\n            top: y,\n            height: wrapper_size,\n            lineHeight: wrapper_size,\n            left: v.x - v.size - wrapper_size / 2,\n            width: v.size + wrapper_size\n          };\n          break;\n\n        case this.dirs.right:\n          res = {\n            top: y,\n            lineHeight: wrapper_size,\n            height: wrapper_size,\n            left: v.x - wrapper_size / 2,\n            width: v.size + wrapper_size\n          };\n          break;\n\n        case this.dirs.up:\n          res = {\n            top: y - v.size,\n            lineHeight: v.size + wrapper_size,\n            height: v.size + wrapper_size,\n            left: v.x - wrapper_size / 2,\n            width: wrapper_size\n          };\n          break;\n\n        case this.dirs.down:\n          res = {\n            top: y\n            /*- wrapper_size/2*/\n            ,\n            lineHeight: v.size + wrapper_size,\n            height: v.size + wrapper_size,\n            left: v.x - wrapper_size / 2,\n            width: wrapper_size\n          };\n          break;\n\n        default:\n          break;\n      }\n\n      return res;\n    },\n    get_line_sizes: function get_line_sizes(v, view) {\n      var config = view.$getConfig();\n      var res,\n          line_size = config.link_line_width,\n          wrapper_size = config.link_wrapper_width,\n          size = v.size + line_size;\n\n      switch (v.direction) {\n        case this.dirs.left:\n        case this.dirs.right:\n          res = {\n            height: line_size,\n            width: size,\n            marginTop: (wrapper_size - line_size) / 2,\n            marginLeft: (wrapper_size - line_size) / 2\n          };\n          break;\n\n        case this.dirs.up:\n        case this.dirs.down:\n          res = {\n            height: size,\n            width: line_size,\n            marginTop: (wrapper_size - line_size) / 2,\n            marginLeft: (wrapper_size - line_size) / 2\n          };\n          break;\n\n        default:\n          break;\n      }\n\n      return res;\n    },\n    render_line: function render_line(v, end, view, itemId) {\n      var pos = this.get_wrapper_sizes(v, view, itemId);\n      var wrapper = document.createElement(\"div\");\n      wrapper.style.cssText = [\"top:\" + pos.top + \"px\", \"left:\" + pos.left + \"px\", \"height:\" + pos.height + \"px\", \"width:\" + pos.width + \"px\"].join(';');\n      wrapper.className = \"gantt_line_wrapper\";\n      var innerPos = this.get_line_sizes(v, view);\n      var inner = document.createElement(\"div\");\n      inner.style.cssText = [\"height:\" + innerPos.height + \"px\", \"width:\" + innerPos.width + \"px\", \"margin-top:\" + innerPos.marginTop + \"px\", \"margin-left:\" + innerPos.marginLeft + \"px\"].join(\";\");\n      inner.className = \"gantt_link_line_\" + v.direction;\n      wrapper.appendChild(inner);\n      return wrapper;\n    },\n    _get_line: function _get_line(from, to) {\n      var direction = this.get_direction(from, to);\n      var vect = {\n        x: from.x,\n        y: from.y,\n        direction: this.get_direction(from, to)\n      };\n\n      if (direction == this.dirs.left || direction == this.dirs.right) {\n        vect.size = Math.abs(from.x - to.x);\n      } else {\n        vect.size = Math.abs(from.y - to.y);\n      }\n\n      return vect;\n    },\n    get_direction: function get_direction(from, to) {\n      var direction = 0;\n\n      if (to.x < from.x) {\n        direction = this.dirs.left;\n      } else if (to.x > from.x) {\n        direction = this.dirs.right;\n      } else if (to.y > from.y) {\n        direction = this.dirs.down;\n      } else {\n        direction = this.dirs.up;\n      }\n\n      return direction;\n    }\n  };\n  var path_builder = {\n    path: [],\n    clear: function clear() {\n      this.path = [];\n    },\n    current: function current() {\n      return this.path[this.path.length - 1];\n    },\n    point: function point(next) {\n      if (!next) return this.current();\n      this.path.push(gantt.copy(next));\n      return next;\n    },\n    point_to: function point_to(direction, diff, point) {\n      if (!point) point = gantt.copy(this.point());else point = {\n        x: point.x,\n        y: point.y\n      };\n      var dir = drawer.dirs;\n\n      switch (direction) {\n        case dir.left:\n          point.x -= diff;\n          break;\n\n        case dir.right:\n          point.x += diff;\n          break;\n\n        case dir.up:\n          point.y -= diff;\n          break;\n\n        case dir.down:\n          point.y += diff;\n          break;\n\n        default:\n          break;\n      }\n\n      return this.point(point);\n    },\n    get_points: function get_points(link, view, source, target) {\n      var pt = this.get_endpoint(link, view, source, target);\n      var xy = gantt.config;\n      var dy = pt.e_y - pt.y;\n      var dx = pt.e_x - pt.x;\n      var dir = drawer.dirs;\n      var rowHeight = view.getItemHeight(link.source);\n      this.clear();\n      this.point({\n        x: pt.x,\n        y: pt.y\n      });\n      var shiftX = 2 * xy.link_arrow_size; //just random size for first line\n\n      var lineType = this.get_line_type(link, view.$getConfig());\n      var forward = pt.e_x > pt.x;\n\n      if (lineType.from_start && lineType.to_start) {\n        this.point_to(dir.left, shiftX);\n\n        if (forward) {\n          this.point_to(dir.down, dy);\n          this.point_to(dir.right, dx);\n        } else {\n          this.point_to(dir.right, dx);\n          this.point_to(dir.down, dy);\n        }\n\n        this.point_to(dir.right, shiftX);\n      } else if (!lineType.from_start && lineType.to_start) {\n        forward = pt.e_x > pt.x + 2 * shiftX;\n        this.point_to(dir.right, shiftX);\n\n        if (forward) {\n          dx -= shiftX;\n          this.point_to(dir.down, dy);\n          this.point_to(dir.right, dx);\n        } else {\n          dx -= 2 * shiftX;\n          var sign = dy > 0 ? 1 : -1;\n          this.point_to(dir.down, sign * (rowHeight / 2));\n          this.point_to(dir.right, dx);\n          this.point_to(dir.down, sign * (Math.abs(dy) - rowHeight / 2));\n          this.point_to(dir.right, shiftX);\n        }\n      } else if (!lineType.from_start && !lineType.to_start) {\n        this.point_to(dir.right, shiftX);\n\n        if (forward) {\n          this.point_to(dir.right, dx);\n          this.point_to(dir.down, dy);\n        } else {\n          this.point_to(dir.down, dy);\n          this.point_to(dir.right, dx);\n        }\n\n        this.point_to(dir.left, shiftX);\n      } else if (lineType.from_start && !lineType.to_start) {\n        forward = pt.e_x > pt.x - 2 * shiftX;\n        this.point_to(dir.left, shiftX);\n\n        if (!forward) {\n          dx += shiftX;\n          this.point_to(dir.down, dy);\n          this.point_to(dir.right, dx);\n        } else {\n          dx += 2 * shiftX;\n          var sign = dy > 0 ? 1 : -1;\n          this.point_to(dir.down, sign * (rowHeight / 2));\n          this.point_to(dir.right, dx);\n          this.point_to(dir.down, sign * (Math.abs(dy) - rowHeight / 2));\n          this.point_to(dir.left, shiftX);\n        }\n      }\n\n      return this.path;\n    },\n    get_line_type: function get_line_type(link, config) {\n      var types = config.links;\n      var from_start = false,\n          to_start = false;\n\n      if (link.type == types.start_to_start) {\n        from_start = to_start = true;\n      } else if (link.type == types.finish_to_finish) {\n        from_start = to_start = false;\n      } else if (link.type == types.finish_to_start) {\n        from_start = false;\n        to_start = true;\n      } else if (link.type == types.start_to_finish) {\n        from_start = true;\n        to_start = false;\n      } else {\n        gantt.assert(false, \"Invalid link type\");\n      }\n\n      if (config.rtl) {\n        from_start = !from_start;\n        to_start = !to_start;\n      }\n\n      return {\n        from_start: from_start,\n        to_start: to_start\n      };\n    },\n    get_endpoint: function get_endpoint(link, view, source, target) {\n      var config = view.$getConfig();\n      var lineType = this.get_line_type(link, config);\n      var from_start = lineType.from_start,\n          to_start = lineType.to_start;\n      var from = getMilestonePosition(source, view, config),\n          to = getMilestonePosition(target, view, config);\n      return {\n        x: from_start ? from.left : from.left + from.width,\n        e_x: to_start ? to.left : to.left + to.width,\n        y: from.top + from.rowHeight / 2 - 1,\n        e_y: to.top + to.rowHeight / 2 - 1\n      };\n    }\n  };\n\n  function getMilestonePosition(task, view, config) {\n    var pos = view.getItemPosition(task);\n\n    if (gantt.getTaskType(task.type) == config.types.milestone) {\n      var milestoneHeight = view.getBarHeight(task.id, true);\n      var milestoneWidth = Math.sqrt(2 * milestoneHeight * milestoneHeight);\n      pos.left -= milestoneWidth / 2;\n      pos.width = milestoneWidth;\n    }\n\n    return pos;\n  }\n\n  return {\n    render: _render_link_element,\n    update: null,\n    //getRectangle: getLinkRectangle\n    isInViewPort: isInViewPort,\n    getVisibleRange: getVisibleRange()\n  };\n}\n\nmodule.exports = createLinkRender;","module.exports = function (items, gantt) {\n  var placeholderConfig = gantt.config.timeline_placeholder;\n  items = items || [];\n\n  if (placeholderConfig && items.filter(function (e) {\n    return e.id === 'timeline_placeholder_task';\n  }).length === 0) {\n    var state = gantt.getState();\n    var lastTaskId = null;\n    var start_date = state.min_date;\n    var end_date = state.max_date;\n\n    if (items.length) {\n      lastTaskId = items[items.length - 1].id;\n    }\n\n    var placeholderTask = {\n      start_date: start_date,\n      end_date: end_date,\n      row_height: placeholderConfig.height || 0,\n      id: \"timeline_placeholder_task\",\n      unscheduled: true,\n      lastTaskId: lastTaskId,\n      calendar_id: placeholderConfig.calendar || \"global\",\n      $source: [],\n      $target: []\n    };\n    items.push(placeholderTask);\n  }\n};","var getRowRectangle = require(\"./viewport/get_bg_row_rectangle\");\n\nvar isLegacyRender = require(\"./is_legacy_smart_render\");\n\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\n\nvar getVisibleCellsRange = require(\"./viewport/get_visible_cells_range\");\n\nvar isColumnVisible = require(\"./viewport/is_column_visible\");\n\nvar bgPlaceholder = require(\"./prerender/task_bg_placeholder\");\n\nfunction createTaskBgRender(gantt) {\n  var renderedCells = {};\n  var visibleCells = {};\n\n  function isRendered(item, columnIndex) {\n    if (renderedCells[item.id][columnIndex] && renderedCells[item.id][columnIndex].parentNode) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  function detachRenderedCell(itemId, columnIndex) {\n    if (renderedCells[itemId] && renderedCells[itemId][columnIndex] && renderedCells[itemId][columnIndex].parentNode) {\n      renderedCells[itemId][columnIndex].parentNode.removeChild(renderedCells[itemId][columnIndex]);\n    }\n  }\n\n  function getCellClassTemplate(view) {\n    var templates = view.$getTemplates();\n    var cssTemplate;\n\n    if (typeof templates.task_cell_class !== \"undefined\") {\n      cssTemplate = templates.task_cell_class; // eslint-disable-next-line no-console\n\n      var log = console.warn || console.log;\n      log('gantt.templates.task_cell_class template is deprecated and will be removed soon. Please use gantt.templates.timeline_cell_class instead.');\n    } else {\n      cssTemplate = templates.timeline_cell_class;\n    }\n\n    return cssTemplate;\n  }\n\n  function getCellContentTemplate(view) {\n    var templates = view.$getTemplates();\n    var contentTemplate = templates.timeline_cell_content;\n    return contentTemplate;\n  }\n\n  function renderCells(item, node, view, config, viewPort) {\n    var cfg = view.getScale();\n    var count = cfg.count;\n    var cssTemplate = getCellClassTemplate(view);\n    var contentTemplate = getCellContentTemplate(view);\n\n    if (config.show_task_cells) {\n      if (!renderedCells[item.id]) {\n        renderedCells[item.id] = {};\n      }\n\n      if (!visibleCells[item.id]) {\n        visibleCells[item.id] = {};\n      }\n\n      var range = getVisibleCellsRange(cfg, viewPort);\n\n      for (var i in visibleCells[item.id]) {\n        var index = visibleCells[item.id][i];\n\n        if (Number(index) < range.start || Number(index) > range.end) {\n          detachRenderedCell(item.id, index);\n        }\n      }\n\n      visibleCells[item.id] = {}; // TODO: do not iterate all cell, only ones in the viewport and once that are already rendered\n\n      for (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\n        var cell = renderOneCell(cfg, columnIndex, item, viewPort, count, cssTemplate, contentTemplate, config);\n\n        if (!cell && isRendered(item, columnIndex)) {\n          detachRenderedCell(item.id, columnIndex);\n        } else if (cell && !cell.parentNode) {\n          node.appendChild(cell);\n        }\n      }\n    }\n  }\n\n  function renderOneCell(scale, columnIndex, item, viewPort, count, cssTemplate, contentTemplate, config) {\n    var width = scale.width[columnIndex],\n        cssclass = \"\";\n\n    if (isColumnVisible(columnIndex, scale, viewPort, gantt)) {\n      //do not render skipped columns\n      var cssTemplateContent = cssTemplate(item, scale.trace_x[columnIndex]);\n      var htmlTemplateContent = \"\";\n\n      if (contentTemplate) {\n        // for backward compatibility, contentTemplate was added in 7.2.0+, will be undefined if someone used copy of old config/template object\n        htmlTemplateContent = contentTemplate(item, scale.trace_x[columnIndex]);\n      }\n\n      if (config.static_background) {\n        // if cell render in static background is not allowed, or if it's a blank cell\n        var customCell = !!(cssTemplateContent || htmlTemplateContent);\n\n        if (!(config.static_background_cells && customCell)) {\n          return null;\n        }\n      }\n\n      if (renderedCells[item.id][columnIndex]) {\n        visibleCells[item.id][columnIndex] = columnIndex;\n        return renderedCells[item.id][columnIndex];\n      }\n\n      var cell = document.createElement(\"div\");\n      cell.style.width = width + \"px\";\n      cssclass = \"gantt_task_cell\" + (columnIndex == count - 1 ? \" gantt_last_cell\" : \"\");\n\n      if (cssTemplateContent) {\n        cssclass += \" \" + cssTemplateContent;\n      }\n\n      cell.className = cssclass;\n\n      if (htmlTemplateContent) {\n        cell.innerHTML = htmlTemplateContent;\n      }\n\n      cell.style.position = \"absolute\";\n      cell.style.left = scale.left[columnIndex] + \"px\";\n      renderedCells[item.id][columnIndex] = cell;\n      visibleCells[item.id][columnIndex] = columnIndex;\n      return cell;\n    }\n\n    return null;\n  }\n\n  function _render_bg_line(item, view, config, viewPort) {\n    var templates = view.$getTemplates();\n    var cfg = view.getScale();\n    var count = cfg.count;\n\n    if (config.static_background && !config.static_background_cells) {\n      return null;\n    }\n\n    var row = document.createElement(\"div\");\n    var cellCssTemplate = getCellClassTemplate(view);\n    var cellHtmlTemplate = getCellContentTemplate(view);\n    var range;\n\n    if (!viewPort || !config.smart_rendering || isLegacyRender(gantt)) {\n      range = {\n        start: 0,\n        end: count - 1\n      };\n    } else {\n      range = getVisibleCellsRange(cfg, viewPort.x);\n    }\n\n    if (config.show_task_cells) {\n      renderedCells[item.id] = {};\n      visibleCells[item.id] = {};\n\n      for (var columnIndex = range.start; columnIndex <= range.end; columnIndex++) {\n        var cell = renderOneCell(cfg, columnIndex, item, viewPort, count, cellCssTemplate, cellHtmlTemplate, config);\n\n        if (cell) {\n          row.appendChild(cell);\n        }\n      }\n    } // GS-291. The odd class should be assigned correctly\n\n\n    var store = view.$config.rowStore;\n    var odd = store.getIndexById(item.id) % 2 !== 0;\n    var cssTemplate = templates.task_row_class(item.start_date, item.end_date, item);\n    var css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\n\n    if (store.isSelected(item.id)) {\n      css += \" gantt_selected\";\n    }\n\n    row.className = css;\n\n    if (config.smart_rendering) {\n      row.style.position = \"absolute\";\n      row.style.top = view.getItemTop(item.id) + \"px\";\n      row.style.width = \"100%\";\n    } else {\n      row.style.position = \"relative\";\n    }\n\n    row.style.height = view.getItemHeight(item.id) + \"px\";\n\n    if (item.id == \"timeline_placeholder_task\") {\n      var placeholderTop = 0;\n\n      if (item.lastTaskId) {\n        var lastTaskTop = view.getItemTop(item.lastTaskId);\n        var lastTaskHeight = view.getItemHeight(item.lastTaskId);\n        placeholderTop = lastTaskTop + lastTaskHeight;\n      }\n\n      var maxHeight = item.row_height || view.$task_data.offsetHeight;\n      var placeholderHeight = maxHeight - placeholderTop; // So that it won't exceed the placeholder timeline height\n\n      if (placeholderHeight < 0) {\n        placeholderHeight = 0;\n      }\n\n      if (config.smart_rendering) {\n        row.style.top = placeholderTop + \"px\";\n      }\n\n      row.style.height = placeholderHeight + \"px\";\n    }\n\n    if (view.$config.item_attribute) {\n      row.setAttribute(view.$config.item_attribute, item.id);\n      row.setAttribute(view.$config.bind + \"_id\", item.id); // 'task_id'/'resource_id' for backward compatibility\n    }\n\n    return row;\n  }\n\n  return {\n    render: _render_bg_line,\n    update: renderCells,\n    getRectangle: getRowRectangle,\n    getVisibleRange: getVisibleRange,\n    prepareData: bgPlaceholder\n  };\n}\n\nmodule.exports = createTaskBgRender;","var createBaseBarRender = require(\"./task_bar_render\");\n\nvar isInViewPort = require(\"./viewport/is_bar_in_viewport\");\n\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\n\nfunction createTaskRenderer(gantt) {\n  var defaultRender = createBaseBarRender(gantt);\n  var renderedNodes = {};\n\n  function checkVisibility(child, viewPort, timeline, config, gantt) {\n    var isVisible = true; // GS-2123. Don't render rollup tasks that are outside the viewport\n\n    if (config.smart_rendering) {\n      isVisible = isInViewPort(child, viewPort, timeline, config, gantt);\n    }\n\n    return isVisible;\n  }\n\n  function generateChildElement(task, child, timeline, sizes) {\n    var childCopy = gantt.copy(gantt.getTask(child.id));\n    childCopy.$rendered_at = task.id; // a way to filter rollup tasks:\n\n    var displayRollup = gantt.callEvent(\"onBeforeRollupTaskDisplay\", [childCopy.id, childCopy, task.id]);\n\n    if (displayRollup === false) {\n      return;\n    }\n\n    var element = defaultRender(childCopy, timeline);\n\n    if (!element) {\n      return;\n    }\n\n    var height = timeline.getBarHeight(task.id, child.type == gantt.config.types.milestone);\n    var padding = Math.floor((timeline.getItemHeight(task.id) - height) / 2);\n    element.style.top = sizes.top + padding + \"px\";\n    element.classList.add(\"gantt_rollup_child\");\n    element.setAttribute(\"data-rollup-parent-id\", task.id);\n    return element;\n  }\n\n  function getKey(childId, renderParentId) {\n    return childId + \"_\" + renderParentId;\n  }\n\n  function renderRollupTask(task, timeline, config, viewPort) {\n    if (task.rollup !== false && task.$rollup && task.$rollup.length) {\n      var el = document.createElement('div'),\n          sizes = gantt.getTaskPosition(task); // vertical position is not important for the rollup tasks as long as the parent is rendered\n\n      viewPort.y = 0;\n      viewPort.y_end = gantt.$task_bg.scrollHeight;\n      task.$rollup.forEach(function (itemId) {\n        if (!gantt.isTaskExists(itemId)) {\n          return;\n        }\n\n        var child = gantt.getTask(itemId);\n        var isVisible = checkVisibility(child, viewPort, timeline, config, gantt);\n\n        if (!isVisible) {\n          return;\n        }\n\n        var element = generateChildElement(task, child, timeline, sizes);\n\n        if (element) {\n          renderedNodes[getKey(child.id, task.id)] = element;\n          el.appendChild(element);\n        } else {\n          renderedNodes[getKey(child.id, task.id)] = false;\n        }\n      });\n      return el;\n    }\n\n    return false;\n  }\n\n  function repaintRollupTask(task, itemNode, timeline, config, viewPort) {\n    var el = document.createElement(\"div\"),\n        sizes = gantt.getTaskPosition(task); // vertical position is not important for the rollup tasks as long as the parent is rendered\n\n    viewPort.y = 0;\n    viewPort.y_end = gantt.$task_bg.scrollHeight;\n    task.$rollup.forEach(function (itemId) {\n      var child = gantt.getTask(itemId);\n      var rollupKey = getKey(child.id, task.id);\n      var isVisible = checkVisibility(child, viewPort, timeline, config, gantt);\n\n      if (isVisible !== !!renderedNodes[rollupKey]) {\n        if (isVisible) {\n          var element = generateChildElement(task, child, timeline, sizes);\n          renderedNodes[rollupKey] = element || false;\n        } else {\n          renderedNodes[rollupKey] = false;\n        }\n      }\n\n      if (!!renderedNodes[rollupKey]) {\n        el.appendChild(renderedNodes[rollupKey]);\n      }\n\n      itemNode.innerHTML = \"\";\n      itemNode.appendChild(el);\n    });\n  }\n\n  return {\n    render: renderRollupTask,\n    update: repaintRollupTask,\n    //getRectangle: getBarRectangle\n    isInViewPort: isInViewPort,\n    getVisibleRange: getVisibleRange\n  };\n}\n\nmodule.exports = createTaskRenderer;","var isBarInViewport = require(\"./is_bar_in_viewport\");\n\nmodule.exports = function isSplitTaskInViewport(item, viewport, view, config, gantt) {\n  if (!gantt.isSplitTask(item)) {\n    return false;\n  }\n\n  var range = gantt.getSubtaskDates(item.id);\n  return isBarInViewport({\n    id: item.id,\n    start_date: range.start_date,\n    end_date: range.end_date,\n    parent: item.parent\n  }, viewport, view, gantt);\n};","var createBaseBarRender = require(\"./task_bar_render\"); //const isInViewPort = require(\"./viewport/is_split_task_in_viewport\");\n\n\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\n\nvar isInViewPortParent = require(\"./viewport/is_split_task_in_viewport\");\n\nvar isInViewPortChild = require(\"./viewport/is_bar_in_viewport\");\n\nfunction createTaskRenderer(gantt) {\n  var defaultRender = createBaseBarRender(gantt);\n  var renderedNodes = {};\n\n  function checkVisibility(child, viewPort, timeline, config, gantt) {\n    var isVisible = !child.hide_bar; // GS-1195. Don't render split tasks that are outside the viewport\n\n    if (config.smart_rendering && isVisible) {\n      isVisible = isInViewPortChild(child, viewPort, timeline, config, gantt);\n    }\n\n    return isVisible;\n  }\n\n  function generateChildElement(task, child, timeline, sizes) {\n    if (child.hide_bar) {\n      return;\n    }\n\n    var isProject = gantt.isSummaryTask(child);\n\n    if (isProject) {\n      gantt.resetProjectDates(child);\n    }\n\n    var childCopy = gantt.copy(gantt.getTask(child.id));\n    childCopy.$rendered_at = task.id; // a way to filter split tasks:\n\n    var showSplitTask = gantt.callEvent(\"onBeforeSplitTaskDisplay\", [childCopy.id, childCopy, task.id]);\n\n    if (showSplitTask === false) {\n      return;\n    }\n\n    var element = defaultRender(childCopy, timeline);\n    if (!element) return;\n    var height = timeline.getBarHeight(task.id, child.type == gantt.config.types.milestone);\n    var padding = Math.floor((timeline.getItemHeight(task.id) - height) / 2);\n    element.style.top = sizes.top + padding + \"px\";\n    element.classList.add(\"gantt_split_child\");\n\n    if (isProject) {\n      element.classList.add(\"gantt_split_subproject\");\n    }\n\n    return element;\n  }\n\n  function getKey(childId, renderParentId) {\n    return childId + \"_\" + renderParentId;\n  }\n\n  function shouldUseSplitRendering(task, config) {\n    return gantt.isSplitTask(task) && (config.open_split_tasks && !task.$open || !config.open_split_tasks) && gantt.hasChild(task.id);\n  }\n\n  function renderSplitTask(task, timeline, config, viewPort) {\n    if (shouldUseSplitRendering(task, config)) {\n      var el = document.createElement('div'),\n          sizes = gantt.getTaskPosition(task);\n\n      if (gantt.hasChild(task.id)) {\n        gantt.eachTask(function (child) {\n          var isVisible = checkVisibility(child, viewPort, timeline, config, gantt);\n\n          if (!isVisible) {\n            return;\n          }\n\n          var element = generateChildElement(task, child, timeline, sizes);\n\n          if (element) {\n            renderedNodes[getKey(child.id, task.id)] = element;\n            el.appendChild(element);\n          } else {\n            renderedNodes[getKey(child.id, task.id)] = false;\n          }\n        }, task.id);\n      }\n\n      return el;\n    }\n\n    return false;\n  }\n\n  function repaintSplitTask(task, itemNode, timeline, config, viewPort) {\n    if (shouldUseSplitRendering(task, config)) {\n      var el = document.createElement(\"div\"),\n          sizes = gantt.getTaskPosition(task);\n      gantt.eachTask(function (child) {\n        var splitKey = getKey(child.id, task.id);\n        var isVisible = checkVisibility(child, viewPort, timeline, config, gantt);\n\n        if (isVisible !== !!renderedNodes[splitKey]) {\n          if (isVisible) {\n            var element = generateChildElement(task, child, timeline, sizes);\n            renderedNodes[splitKey] = element || false;\n          } else {\n            renderedNodes[splitKey] = false;\n          }\n        }\n\n        if (!!renderedNodes[splitKey]) {\n          el.appendChild(renderedNodes[splitKey]);\n        }\n\n        itemNode.innerHTML = \"\";\n        itemNode.appendChild(el);\n      }, task.id);\n    }\n  }\n\n  return {\n    render: renderSplitTask,\n    update: repaintSplitTask,\n    isInViewPort: isInViewPortParent,\n    getVisibleRange: getVisibleRange\n  };\n}\n\nmodule.exports = createTaskRenderer;","var isInViewPort = require(\"./viewport/is_bar_in_viewport\");\n\nvar getVisibleRange = require(\"./viewport/get_visible_bars_range\");\n\nvar createBaseBarRender = require(\"./task_bar_render\");\n\nmodule.exports = function createTaskRenderer(gantt) {\n  var defaultRender = createBaseBarRender(gantt);\n  return {\n    render: defaultRender,\n    update: null,\n    //getRectangle: getBarRectangle\n    isInViewPort: isInViewPort,\n    getVisibleRange: getVisibleRange\n  };\n};","module.exports = function (gantt) {\n  return function processTaskDateProperties(item, mapTo, mode) {\n    if (mode == \"keepDates\") {\n      keepDatesOnEdit(item, mapTo);\n    } else if (mode == \"keepDuration\") {\n      keepDurationOnEdit(item, mapTo);\n    } else {\n      defaultActionOnEdit(item, mapTo);\n    }\n  }; // resize task\n  // resize task when start/end/duration changes\n\n  function keepDatesOnEdit(item, mapTo) {\n    if (mapTo == \"duration\") {\n      item.end_date = gantt.calculateEndDate(item);\n    } else if (mapTo == \"end_date\" || mapTo == \"start_date\") {\n      item.duration = gantt.calculateDuration(item);\n    }\n  } // move task(before 6.2)\n  // move task when start/end dates changes\n  // resize task when duration changes\n\n\n  function keepDurationOnEdit(item, mapTo) {\n    if (mapTo == \"end_date\") {\n      item.start_date = decreaseStartDate(item);\n    } else if (mapTo == \"start_date\" || mapTo == \"duration\") {\n      item.end_date = gantt.calculateEndDate(item);\n    }\n  } // default behavior\n  // move task when start date changes\n  // resize task when end date/duration changes\n\n\n  function defaultActionOnEdit(item, mapTo) {\n    if (gantt.config.schedule_from_end) {\n      if (mapTo == \"end_date\" || mapTo == \"duration\") {\n        item.start_date = decreaseStartDate(item);\n      } else if (mapTo == \"start_date\") {\n        item.duration = gantt.calculateDuration(item);\n      }\n    } else {\n      if (mapTo == \"start_date\" || mapTo == \"duration\") {\n        item.end_date = gantt.calculateEndDate(item);\n      } else if (mapTo == \"end_date\") {\n        item.duration = gantt.calculateDuration(item);\n      }\n    }\n  }\n\n  function decreaseStartDate(item) {\n    return gantt.calculateEndDate({\n      start_date: item.end_date,\n      duration: -item.duration,\n      task: item\n    });\n  }\n};","module.exports = function (gantt) {\n  var BaseEditor = require(\"./base\")(gantt),\n      utils = require(\"../../../../../utils/utils\");\n\n  var __extends = require(\"../../../../../utils/extends\");\n\n  function TextEditor() {\n    var self = BaseEditor.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(TextEditor, BaseEditor);\n\n  function getFormatter(config) {\n    return config.formatter || gantt.ext.formatters.durationFormatter();\n  }\n\n  utils.mixin(TextEditor.prototype, {\n    show: function show(id, column, config, placeholder) {\n      var html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\n      placeholder.innerHTML = html;\n    },\n    set_value: function set_value(value, id, column, node) {\n      this.get_input(node).value = getFormatter(column.editor).format(value);\n    },\n    get_value: function get_value(id, column, node) {\n      return getFormatter(column.editor).parse(this.get_input(node).value || \"\");\n    }\n  }, true);\n  return TextEditor;\n};","module.exports = function (gantt) {\n  var BaseEditor = require(\"./base\")(gantt),\n      utils = require(\"../../../../../utils/utils\");\n\n  var __extends = require(\"../../../../../utils/extends\");\n\n  function PredecessorEditor() {\n    var self = BaseEditor.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(PredecessorEditor, BaseEditor);\n\n  function getFormatter(config) {\n    return config.formatter || gantt.ext.formatters.linkFormatter();\n  }\n\n  function parseInputString(value, config) {\n    var predecessors = (value || \"\").split(config.delimiter || \",\");\n\n    for (var i = 0; i < predecessors.length; i++) {\n      var val = predecessors[i].trim();\n\n      if (val) {\n        predecessors[i] = val;\n      } else {\n        predecessors.splice(i, 1);\n        i--;\n      }\n    }\n\n    predecessors.sort();\n    return predecessors;\n  }\n\n  function formatPredecessors(task, config, gantt) {\n    var links = task.$target;\n    var labels = [];\n\n    for (var i = 0; i < links.length; i++) {\n      var link = gantt.getLink(links[i]);\n      labels.push(getFormatter(config).format(link));\n    }\n\n    return labels.join((config.delimiter || \",\") + \" \");\n  }\n\n  function getSelectedLinks(taskId, predecessorCodes, config) {\n    var links = [];\n    predecessorCodes.forEach(function (code) {\n      var link = getFormatter(config).parse(code);\n\n      if (link) {\n        link.target = taskId; // GS-1290 A way to preserve the link. Otherwise validation will return false\n        // because the existing link ID is not passed there\n\n        link.id = \"predecessor_generated\";\n\n        if (gantt.isLinkAllowed(link)) {\n          link.id = undefined;\n          links.push(link);\n        }\n      }\n    });\n    return links;\n  }\n\n  function formatLinkKey(link) {\n    return link.source + \"_\" + link.target + \"_\" + link.type + \"_\" + (link.lag || 0);\n  }\n\n  function getLinksDiff(task, predecessorCodes, config) {\n    var selectedLinks = getSelectedLinks(task.id, predecessorCodes, config);\n    var existingLinksSearch = {};\n    task.$target.forEach(function (linkId) {\n      var link = gantt.getLink(linkId);\n      existingLinksSearch[formatLinkKey(link)] = link.id;\n    });\n    var linksToAdd = [];\n    selectedLinks.forEach(function (link) {\n      var linkKey = formatLinkKey(link);\n\n      if (!existingLinksSearch[linkKey]) {\n        linksToAdd.push(link);\n      } else {\n        delete existingLinksSearch[linkKey];\n      }\n    });\n    var linksToDelete = [];\n\n    for (var i in existingLinksSearch) {\n      linksToDelete.push(existingLinksSearch[i]);\n    }\n\n    return {\n      add: linksToAdd,\n      remove: linksToDelete\n    };\n  }\n\n  utils.mixin(PredecessorEditor.prototype, {\n    show: function show(id, column, config, placeholder) {\n      var html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\n      placeholder.innerHTML = html;\n    },\n    hide: function hide() {},\n    set_value: function set_value(value, id, column, node) {\n      this.get_input(node).value = formatPredecessors(value, column.editor, gantt);\n    },\n    get_value: function get_value(id, column, node) {\n      return parseInputString(this.get_input(node).value || \"\", column.editor);\n    },\n    save: function save(id, column, node) {\n      var task = gantt.getTask(id);\n      var linksDiff = getLinksDiff(task, this.get_value(id, column, node), column.editor);\n\n      if (linksDiff.add.length || linksDiff.remove.length) {\n        gantt.batchUpdate(function () {\n          linksDiff.add.forEach(function (link) {\n            gantt.addLink(link);\n          });\n          linksDiff.remove.forEach(function (linkId) {\n            gantt.deleteLink(linkId);\n          });\n          if (gantt.autoSchedule) gantt.autoSchedule();\n        });\n      }\n    },\n    is_changed: function is_changed(value, id, column, node) {\n      var inputPredecessors = this.get_value(id, column, node);\n      var taskPredecessors = parseInputString(formatPredecessors(value, column.editor, gantt), column.editor);\n      return inputPredecessors.join() !== taskPredecessors.join();\n    }\n  }, true);\n  return PredecessorEditor;\n};","module.exports = function (gantt) {\n  var BaseEditor = require(\"./base\")(gantt),\n      utils = require(\"../../../../../utils/utils\");\n\n  var __extends = require(\"../../../../../utils/extends\");\n\n  var html5DateFormat = \"%Y-%m-%d\";\n  var dateToStr = null;\n  var strToDate = null;\n\n  function init() {\n    if (!dateToStr) {\n      dateToStr = gantt.date.date_to_str(html5DateFormat);\n    }\n\n    if (!strToDate) {\n      strToDate = gantt.date.str_to_date(html5DateFormat);\n    }\n  }\n\n  function DateEditor() {\n    var self = BaseEditor.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(DateEditor, BaseEditor);\n\n  utils.mixin(DateEditor.prototype, {\n    show: function show(id, column, config, placeholder) {\n      init();\n      var minValue = null;\n      var maxValue = null;\n\n      if (typeof config.min === \"function\") {\n        minValue = config.min(id, column);\n      } else {\n        minValue = config.min;\n      }\n\n      if (typeof config.max === \"function\") {\n        maxValue = config.max(id, column);\n      } else {\n        maxValue = config.max;\n      }\n\n      var minAttr = minValue ? \" min='\" + dateToStr(minValue) + \"' \" : \"\";\n      var maxAttr = maxValue ? \" max='\" + dateToStr(maxValue) + \"' \" : \"\";\n      var html = \"<div style='width:140px'><input type='date' \" + minAttr + maxAttr + \" name='\" + column.name + \"'></div>\";\n      placeholder.innerHTML = html;\n    },\n    set_value: function set_value(value, id, column, node) {\n      if (value && value.getFullYear) {\n        this.get_input(node).value = dateToStr(value);\n      } else {\n        this.get_input(node).value = value;\n      }\n    },\n    is_valid: function is_valid(value, id, column, node) {\n      if (!value || isNaN(value.getTime())) return false;\n      return true;\n    },\n    get_value: function get_value(id, column, node) {\n      var parsed;\n\n      try {\n        parsed = strToDate(this.get_input(node).value || \"\");\n      } catch (e) {\n        parsed = null; // return null will cancel changes\n      }\n\n      return parsed;\n    }\n  }, true);\n  return DateEditor;\n};","module.exports = function (gantt) {\n  var BaseEditor = require(\"./base\")(gantt),\n      utils = require(\"../../../../../utils/utils\");\n\n  var __extends = require(\"../../../../../utils/extends\");\n\n  function SelectEditor() {\n    var self = BaseEditor.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(SelectEditor, BaseEditor);\n\n  utils.mixin(SelectEditor.prototype, {\n    show: function show(id, column, config, placeholder) {\n      var html = \"<div><select name='\" + column.name + \"'>\";\n      var optionsHtml = [],\n          options = config.options || [];\n\n      for (var i = 0; i < options.length; i++) {\n        optionsHtml.push(\"<option value='\" + config.options[i].key + \"'>\" + options[i].label + \"</option>\");\n      }\n\n      html += optionsHtml.join(\"\") + \"</select></div>\";\n      placeholder.innerHTML = html;\n    },\n    get_input: function get_input(node) {\n      return node.querySelector(\"select\");\n    }\n  }, true);\n  return SelectEditor;\n};","module.exports = function (gantt) {\n  var BaseEditor = require(\"./base\")(gantt),\n      utils = require(\"../../../../../utils/utils\");\n\n  var __extends = require(\"../../../../../utils/extends\");\n\n  function NumberEditor() {\n    var self = BaseEditor.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(NumberEditor, BaseEditor);\n\n  utils.mixin(NumberEditor.prototype, {\n    show: function show(id, column, config, placeholder) {\n      var min = config.min || 0,\n          max = config.max || 100;\n      var html = \"<div><input type='number' min='\" + min + \"' max='\" + max + \"' name='\" + column.name + \"'></div>\";\n      placeholder.innerHTML = html;\n    },\n    get_value: function get_value(id, column, node) {\n      return this.get_input(node).value || \"\";\n    },\n    is_valid: function is_valid(value, id, column, node) {\n      return !isNaN(parseInt(value, 10));\n    }\n  }, true);\n  return NumberEditor;\n};","module.exports = function (gantt) {\n  var BaseEditor = require(\"./base\")(gantt),\n      utils = require(\"../../../../../utils/utils\");\n\n  var __extends = require(\"../../../../../utils/extends\");\n\n  function TextEditor() {\n    var self = BaseEditor.apply(this, arguments) || this;\n    return self;\n  }\n\n  __extends(TextEditor, BaseEditor);\n\n  utils.mixin(TextEditor.prototype, {\n    show: function show(id, column, config, placeholder) {\n      var html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\n      placeholder.innerHTML = html;\n    }\n  }, true);\n  return TextEditor;\n};","module.exports = {\n  init: function init(controller, grid) {\n    var self = controller;\n    var gantt = grid.$gantt;\n    var onBlurDelay = null;\n    var keyNav = gantt.ext.keyboardNavigation;\n    keyNav.attachEvent(\"onBeforeFocus\", function (node) {\n      var activeCell = controller.locateCell(node);\n      clearTimeout(onBlurDelay);\n\n      if (activeCell) {\n        var columnName = activeCell.columnName;\n        var id = activeCell.id;\n        var editorState = self.getState();\n\n        if (self.isVisible()) {\n          if (editorState.id == id && editorState.columnName === columnName) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    });\n    keyNav.attachEvent(\"onFocus\", function (node) {\n      var activeCell = controller.locateCell(node);\n      var state = controller.getState();\n      clearTimeout(onBlurDelay);\n\n      if (activeCell && !(activeCell.id == state.id && activeCell.columnName == state.columnName)) {\n        if (self.isVisible()) {\n          self.save();\n        }\n      }\n\n      return true;\n    });\n    controller.attachEvent(\"onHide\", function () {\n      clearTimeout(onBlurDelay);\n    });\n    keyNav.attachEvent(\"onBlur\", function () {\n      onBlurDelay = setTimeout(function () {\n        self.save();\n      });\n      return true;\n    });\n    gantt.attachEvent(\"onTaskDblClick\", function (id, e) {\n      // block lightbox on double click inside editor\n      var state = controller.getState();\n      var cell = controller.locateCell(e.target);\n\n      if (cell && controller.isVisible() && cell.columnName == state.columnName) {\n        return false;\n      }\n\n      return true;\n    });\n    gantt.attachEvent(\"onTaskClick\", function (id, e) {\n      if (gantt._is_icon_open_click(e)) return true;\n      var state = controller.getState();\n      var cell = controller.locateCell(e.target);\n\n      if (cell && controller.getEditorConfig(cell.columnName)) {\n        if (controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName) {// do nothing if editor is already active in this cell\n        } else {\n          controller.startEdit(cell.id, cell.columnName);\n        }\n\n        return false;\n      }\n\n      return true;\n    });\n    gantt.attachEvent(\"onEmptyClick\", function () {\n      self.save();\n      return true;\n    });\n    keyNav.attachEvent(\"onKeyDown\", function (command, e) {\n      var activeCell = controller.locateCell(e.target);\n      var hasEditor = activeCell ? controller.getEditorConfig(activeCell.columnName) : false;\n      var state = controller.getState();\n      var keyboard = gantt.constants.KEY_CODES;\n      var keyCode = e.keyCode;\n      var preventKeyNav = false;\n\n      switch (keyCode) {\n        case keyboard.ENTER:\n          if (controller.isVisible()) {\n            controller.save();\n            e.preventDefault();\n            preventKeyNav = true;\n          } else if (hasEditor && !(e.ctrlKey || e.metaKey || e.shiftKey)) {\n            self.startEdit(activeCell.id, activeCell.columnName);\n            e.preventDefault();\n            preventKeyNav = true;\n          }\n\n          break;\n\n        case keyboard.ESC:\n          if (controller.isVisible()) {\n            controller.hide();\n            e.preventDefault();\n            preventKeyNav = true;\n          }\n\n          break;\n\n        case keyboard.UP:\n        case keyboard.DOWN:\n          break;\n\n        case keyboard.LEFT:\n        case keyboard.RIGHT:\n          if (hasEditor && controller.isVisible() || state.editorType === \"date\") {\n            preventKeyNav = true;\n          }\n\n          break;\n\n        case keyboard.SPACE:\n          if (controller.isVisible()) {\n            preventKeyNav = true;\n          }\n\n          if (hasEditor && !controller.isVisible()) {\n            self.startEdit(activeCell.id, activeCell.columnName);\n            e.preventDefault();\n            preventKeyNav = true;\n          }\n\n          break;\n\n        case keyboard.DELETE:\n          if (hasEditor && !controller.isVisible()) {\n            self.startEdit(activeCell.id, activeCell.columnName);\n            preventKeyNav = true;\n          } else if (hasEditor && controller.isVisible()) {\n            preventKeyNav = true;\n          }\n\n          break;\n\n        case keyboard.TAB:\n          if (controller.isVisible()) {\n            if (e.shiftKey) {\n              controller.editPrevCell(true);\n            } else {\n              controller.editNextCell(true);\n            }\n\n            var newState = controller.getState();\n\n            if (newState.id) {\n              keyNav.focus({\n                type: \"taskCell\",\n                id: newState.id,\n                column: newState.columnName\n              });\n            }\n\n            e.preventDefault();\n            preventKeyNav = true;\n          }\n\n          break;\n\n        default:\n          if (controller.isVisible()) preventKeyNav = true;else {\n            // start editing on character key\n            if (keyCode >= 48 && keyCode <= 57 || // [0-9]\n            keyCode > 95 && keyCode < 112 || // numpad\n            keyCode >= 64 && keyCode <= 91 || // [a-z]\n            keyCode > 185 && keyCode < 193 || //;=-,etc\n            keyCode > 218 && keyCode < 223) {\n              var modifiers = command.modifiers;\n              var anyModifier = modifiers.alt || modifiers.ctrl || modifiers.meta || modifiers.shift;\n\n              if (modifiers.alt) {// don't start editing on alt+key\n              } else if (anyModifier && keyNav.getCommandHandler(command, \"taskCell\")) {// don't start editing if command already have a keyboard shortcut\n              } else if (hasEditor && !controller.isVisible()) {\n                self.startEdit(activeCell.id, activeCell.columnName);\n                preventKeyNav = true;\n              }\n            }\n          }\n          break;\n      }\n\n      if (preventKeyNav) {\n        return false;\n      } else {\n        return true;\n      }\n    });\n  },\n  onShow: function onShow(controller, placeholder, grid) {},\n  onHide: function onHide(controller, placeholder, grid) {\n    var gantt = grid.$gantt;\n    gantt.focus();\n  },\n  destroy: function destroy() {}\n};","module.exports = {\n  init: function init(controller, grid) {\n    var gantt = grid.$gantt;\n    gantt.attachEvent(\"onTaskClick\", function (id, e) {\n      if (gantt._is_icon_open_click(e)) return true;\n      var state = controller.getState();\n      var cell = controller.locateCell(e.target);\n\n      if (cell && controller.getEditorConfig(cell.columnName)) {\n        if (controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName) {// do nothing if editor is already active in this cell\n        } else {\n          controller.startEdit(cell.id, cell.columnName);\n        }\n\n        return false;\n      }\n\n      return true;\n    });\n    gantt.attachEvent(\"onEmptyClick\", function () {\n      if (controller.isVisible() && controller.isChanged()) {\n        controller.save();\n      } else {\n        controller.hide();\n      }\n\n      return true;\n    });\n    gantt.attachEvent(\"onTaskDblClick\", function (id, e) {\n      var state = controller.getState();\n      var cell = controller.locateCell(e.target);\n\n      if (cell && controller.isVisible() && cell.columnName == state.columnName) {\n        //GS-933 probably, we don't need to hide the inline editor because the lightbox cannot be opened if you double-click on an inline editor\n        //remove this code later if people don't complain\n        //controller.hide();\n        return false;\n      }\n\n      return true;\n    });\n  },\n  onShow: function onShow(controller, placeholder, grid) {\n    var gantt = grid.$gantt;\n\n    if (gantt.ext && gantt.ext.keyboardNavigation) {\n      var keyNav = gantt.ext.keyboardNavigation;\n      keyNav.attachEvent(\"onKeyDown\", function (command, e) {\n        var keyboard = gantt.constants.KEY_CODES;\n        var keyCode = e.keyCode;\n        var preventKeyNav = false;\n\n        switch (keyCode) {\n          case keyboard.SPACE:\n            if (controller.isVisible()) {\n              preventKeyNav = true;\n            }\n\n            break;\n        }\n\n        if (preventKeyNav) {\n          return false;\n        } else {\n          return true;\n        }\n      });\n    }\n\n    placeholder.onkeydown = function (e) {\n      e = e || window.event;\n      var keyboard = gantt.constants.KEY_CODES;\n\n      if (e.defaultPrevented || e.shiftKey && e.keyCode != keyboard.TAB) {\n        return;\n      }\n\n      var shouldPrevent = true;\n\n      switch (e.keyCode) {\n        case gantt.keys.edit_save:\n          controller.save();\n          break;\n\n        case gantt.keys.edit_cancel:\n          controller.hide();\n          break;\n\n        case keyboard.UP:\n        case keyboard.DOWN:\n          if (controller.isVisible()) {\n            controller.hide();\n            shouldPrevent = false;\n          }\n\n          break;\n\n        case keyboard.TAB:\n          if (e.shiftKey) {\n            controller.editPrevCell(true);\n          } else {\n            controller.editNextCell(true);\n          }\n\n          break;\n\n        default:\n          shouldPrevent = false;\n          break;\n      }\n\n      if (shouldPrevent) {\n        e.preventDefault();\n      }\n    };\n  },\n  onHide: function onHide() {},\n  destroy: function destroy() {}\n};","var defaultMapping = require(\"./keyboard_mappings/default\");\n\nvar keyNavMappings = require(\"./keyboard_mappings/keyboard_navigation\");\n\nmodule.exports = function (gantt) {\n  var mapping = null;\n  return {\n    setMapping: function setMapping(map) {\n      mapping = map;\n    },\n    getMapping: function getMapping() {\n      if (mapping) {\n        return mapping;\n      } else if (gantt.config.keyboard_navigation_cells && gantt.ext.keyboardNavigation) {\n        return keyNavMappings;\n      } else {\n        return defaultMapping;\n      }\n    }\n  };\n};","var getKeyboardMapping = require(\"./keyboard_mappings\");\n\nvar textEditorFactory = require(\"./editors/text\"),\n    numberEditorFactory = require(\"./editors/number\"),\n    selectEditorFactory = require(\"./editors/select\"),\n    dateEditorFactory = require(\"./editors/date\"),\n    predecessorEditorFactory = require(\"./editors/predecessor\"),\n    durationEditorFactory = require(\"./editors/duration\");\n\nvar utils = require(\"../../../../utils/utils\");\n\nvar domHelpers = require(\"../../utils/dom_helpers\");\n\nvar eventable = require(\"../../../../utils/eventable\");\n\nvar linkedPropertiesProcessor = require(\"./linked_properties\");\n\nfunction initConfigs(gantt) {\n  gantt.config.editor_types = {\n    text: new (textEditorFactory(gantt))(),\n    number: new (numberEditorFactory(gantt))(),\n    select: new (selectEditorFactory(gantt))(),\n    date: new (dateEditorFactory(gantt))(),\n    predecessor: new (predecessorEditorFactory(gantt))(),\n    duration: new (durationEditorFactory(gantt))()\n  };\n}\n\nfunction create(gantt) {\n  var keyboardMapping = getKeyboardMapping(gantt);\n  var eventBus = {};\n  eventable(eventBus);\n\n  function createGridEditors(grid) {\n    function _getGridCellFromNode(node) {\n      if (!domHelpers.isChildOf(node, grid.$grid)) {\n        return null;\n      }\n\n      var row = domHelpers.locateAttribute(node, grid.$config.item_attribute);\n      var cell = domHelpers.locateAttribute(node, \"data-column-name\");\n\n      if (row && cell) {\n        var columnName = cell.getAttribute(\"data-column-name\");\n        var id = row.getAttribute(grid.$config.item_attribute);\n        return {\n          id: id,\n          columnName: columnName\n        };\n      }\n\n      return null;\n    }\n\n    function _getEditorPosition(itemId, columnName) {\n      var config = grid.$getConfig();\n      var top = grid.getItemTop(itemId);\n      var height = grid.getItemHeight(itemId);\n      var cols = grid.getGridColumns();\n      var left = 0,\n          right = 0,\n          width = 0;\n\n      for (var i = 0; i < cols.length; i++) {\n        if (cols[i].name == columnName) {\n          width = cols[i].width;\n          break;\n        }\n\n        if (config.rtl) {\n          right += cols[i].width;\n        } else {\n          left += cols[i].width;\n        }\n      }\n\n      if (config.rtl) {\n        return {\n          top: top,\n          right: right,\n          height: height,\n          width: width\n        };\n      } else {\n        return {\n          top: top,\n          left: left,\n          height: height,\n          width: width\n        };\n      }\n    }\n\n    function findVisibleIndex(grid, columnName) {\n      var columns = grid.getGridColumns();\n\n      for (var i = 0; i < columns.length; i++) {\n        if (columns[i].name == columnName) {\n          return i;\n        }\n      }\n\n      return 0;\n    }\n\n    function _createPlaceholder(itemId, columnName) {\n      var config = grid.$getConfig();\n\n      var pos = _getEditorPosition(itemId, columnName);\n\n      var el = document.createElement(\"div\");\n      el.className = \"gantt_grid_editor_placeholder\";\n      el.setAttribute(grid.$config.item_attribute, itemId);\n      el.setAttribute(grid.$config.bind + \"_id\", itemId); // for backward compatibility\n\n      el.setAttribute(\"data-column-name\", columnName);\n      var visibleIndex = findVisibleIndex(grid, columnName);\n      el.setAttribute(\"data-column-index\", visibleIndex);\n\n      if (config.rtl) {\n        el.style.cssText = [\"top:\" + pos.top + \"px\", \"right:\" + pos.right + \"px\", \"width:\" + pos.width + \"px\", \"height:\" + pos.height + \"px\"].join(\";\");\n      } else {\n        el.style.cssText = [\"top:\" + pos.top + \"px\", \"left:\" + pos.left + \"px\", \"width:\" + pos.width + \"px\", \"height:\" + pos.height + \"px\"].join(\";\");\n      }\n\n      return el;\n    }\n\n    var updateTaskDateProperties = linkedPropertiesProcessor(gantt);\n    var handlers = [];\n    var ganttHandlers = [];\n    var store = null;\n    var controller = {\n      _itemId: null,\n      _columnName: null,\n      _editor: null,\n      _editorType: null,\n      _placeholder: null,\n      locateCell: _getGridCellFromNode,\n      getEditorConfig: function getEditorConfig(columnName) {\n        var column = grid.getColumn(columnName);\n        return column.editor;\n      },\n      init: function init() {\n        var mapping = keyboardMapping.getMapping();\n\n        if (mapping.init) {\n          mapping.init(this, grid);\n        }\n\n        store = grid.$gantt.getDatastore(grid.$config.bind);\n        var self = this;\n        handlers.push(store.attachEvent(\"onIdChange\", function (oldId, newId) {\n          if (self._itemId == oldId) {\n            self._itemId = newId;\n          }\n        }));\n        handlers.push(store.attachEvent(\"onStoreUpdated\", function () {\n          if (grid.$gantt.getState(\"batchUpdate\").batch_update) {\n            return;\n          }\n\n          if (self.isVisible() && !store.isVisible(self._itemId)) {\n            self.hide();\n          }\n        }));\n        ganttHandlers.push(gantt.attachEvent(\"onDataRender\", function () {\n          if (self._editor && self._placeholder && !domHelpers.isChildOf(self._placeholder, gantt.$root)) {\n            grid.$grid_data.appendChild(self._placeholder);\n          }\n        }));\n\n        this.init = function () {};\n      },\n      getState: function getState() {\n        return {\n          editor: this._editor,\n          editorType: this._editorType,\n          placeholder: this._placeholder,\n          id: this._itemId,\n          columnName: this._columnName\n        };\n      },\n      startEdit: function startEdit(itemId, columnName) {\n        if (this.isVisible()) {\n          this.save();\n        }\n\n        if (!store.exists(itemId)) {\n          return;\n        }\n\n        var editorState = {\n          id: itemId,\n          columnName: columnName\n        };\n\n        if (gantt.isReadonly(store.getItem(itemId))) {\n          this.callEvent(\"onEditPrevent\", [editorState]);\n          return;\n        }\n\n        if (this.callEvent(\"onBeforeEditStart\", [editorState]) === false) {\n          this.callEvent(\"onEditPrevent\", [editorState]);\n          return;\n        }\n\n        this.show(editorState.id, editorState.columnName);\n        this.setValue();\n        this.callEvent(\"onEditStart\", [editorState]);\n      },\n      isVisible: function isVisible() {\n        return !!(this._editor && domHelpers.isChildOf(this._placeholder, gantt.$root));\n      },\n      show: function show(itemId, columnName) {\n        if (this.isVisible()) {\n          this.save();\n        }\n\n        var editorState = {\n          id: itemId,\n          columnName: columnName\n        };\n        var column = grid.getColumn(editorState.columnName);\n        var editorConfig = this.getEditorConfig(column.name);\n        if (!editorConfig) return;\n        var editor = grid.$getConfig().editor_types[editorConfig.type];\n\n        var placeholder = _createPlaceholder(editorState.id, editorState.columnName);\n\n        grid.$grid_data.appendChild(placeholder);\n        editor.show(editorState.id, column, editorConfig, placeholder);\n        this._editor = editor;\n        this._placeholder = placeholder;\n        this._itemId = editorState.id;\n        this._columnName = editorState.columnName;\n        this._editorType = editorConfig.type;\n        var mapping = keyboardMapping.getMapping();\n\n        if (mapping.onShow) {\n          mapping.onShow(this, placeholder, grid);\n        }\n      },\n      setValue: function setValue() {\n        var state = this.getState();\n        var itemId = state.id,\n            columnName = state.columnName;\n        var column = grid.getColumn(columnName);\n        var item = store.getItem(itemId);\n        var editorConfig = this.getEditorConfig(columnName);\n        if (!editorConfig) return;\n        var value = item[editorConfig.map_to];\n\n        if (editorConfig.map_to == \"auto\") {\n          value = store.getItem(itemId);\n        }\n\n        this._editor.set_value(value, itemId, column, this._placeholder);\n\n        this.focus();\n      },\n      focus: function focus() {\n        this._editor.focus(this._placeholder);\n      },\n      getValue: function getValue() {\n        var column = grid.getColumn(this._columnName);\n        return this._editor.get_value(this._itemId, column, this._placeholder);\n      },\n      _getItemValue: function _getItemValue() {\n        var editorConfig = this.getEditorConfig(this._columnName);\n        if (!editorConfig) return;\n        var item = gantt.getTask(this._itemId);\n        var value = item[editorConfig.map_to];\n\n        if (editorConfig.map_to == \"auto\") {\n          value = store.getItem(this._itemId);\n        }\n\n        return value;\n      },\n      isChanged: function isChanged() {\n        var column = grid.getColumn(this._columnName);\n\n        var value = this._getItemValue();\n\n        return this._editor.is_changed(value, this._itemId, column, this._placeholder);\n      },\n      hide: function hide() {\n        if (!this._itemId) return;\n        var itemId = this._itemId,\n            columnName = this._columnName;\n        var mapping = keyboardMapping.getMapping();\n\n        if (mapping.onHide) {\n          mapping.onHide(this, this._placeholder, grid);\n        }\n\n        this._itemId = null;\n        this._columnName = null;\n        this._editorType = null;\n        if (!this._placeholder) return;\n\n        if (this._editor && this._editor.hide) {\n          this._editor.hide(this._placeholder);\n        }\n\n        this._editor = null;\n\n        if (this._placeholder.parentNode) {\n          this._placeholder.parentNode.removeChild(this._placeholder);\n        }\n\n        this._placeholder = null;\n        this.callEvent(\"onEditEnd\", [{\n          id: itemId,\n          columnName: columnName\n        }]);\n      },\n      save: function save() {\n        if (!(this.isVisible() && store.exists(this._itemId) && this.isChanged())) {\n          this.hide();\n          return;\n        }\n\n        var itemId = this._itemId,\n            columnName = this._columnName;\n\n        if (!store.exists(itemId)) {\n          return;\n        }\n\n        var item = store.getItem(itemId);\n        var editorConfig = this.getEditorConfig(columnName);\n        var editorState = {\n          id: itemId,\n          columnName: columnName,\n          newValue: this.getValue(),\n          oldValue: this._getItemValue()\n        };\n\n        if (this.callEvent(\"onBeforeSave\", [editorState]) !== false) {\n          if (!this._editor.is_valid || this._editor.is_valid(editorState.newValue, editorState.id, grid.getColumn(columnName), this._placeholder)) {\n            var mapTo = editorConfig.map_to;\n            var value = editorState.newValue;\n\n            if (mapTo != \"auto\") {\n              item[mapTo] = value;\n              updateTaskDateProperties(item, mapTo, gantt.config.inline_editors_date_processing);\n              store.updateItem(itemId);\n            } else {\n              this._editor.save(itemId, grid.getColumn(columnName), this._placeholder);\n            }\n\n            this.callEvent(\"onSave\", [editorState]);\n          }\n        }\n\n        this.hide();\n      },\n      _findEditableCell: function findEditableCell(start, direction) {\n        var nextIndex = start;\n        var columns = grid.getGridColumns();\n        var nextColumn = columns[nextIndex];\n        var columnName = nextColumn ? nextColumn.name : null;\n\n        if (columnName) {\n          while (columnName && !this.getEditorConfig(columnName)) {\n            columnName = this._findEditableCell(start + direction, direction);\n          }\n\n          return columnName;\n        }\n\n        return null;\n      },\n      getNextCell: function moveCell(dir) {\n        // GS-1257. true means to exclude hidden columns\n        return this._findEditableCell(grid.getColumnIndex(this._columnName, true) + dir, dir);\n      },\n      getFirstCell: function getFirstCell() {\n        return this._findEditableCell(0, 1);\n      },\n      getLastCell: function getLastCell() {\n        return this._findEditableCell(grid.getGridColumns().length - 1, -1);\n      },\n      editNextCell: function nextCell(canChangeRow) {\n        var cell = this.getNextCell(1);\n\n        if (cell) {\n          var nextColumn = this.getNextCell(1);\n\n          if (nextColumn && this.getEditorConfig(nextColumn)) {\n            this.startEdit(this._itemId, nextColumn);\n          }\n        } else if (canChangeRow && this.moveRow(1)) {\n          var task = this.moveRow(1);\n          cell = this.getFirstCell();\n\n          if (cell && this.getEditorConfig(cell)) {\n            this.startEdit(task, cell);\n          }\n        }\n      },\n      editPrevCell: function prevCell(canChangeRow) {\n        var cell = this.getNextCell(-1);\n\n        if (cell) {\n          var nextColumn = this.getNextCell(-1);\n\n          if (nextColumn && this.getEditorConfig(nextColumn)) {\n            this.startEdit(this._itemId, nextColumn);\n          }\n        } else if (canChangeRow && this.moveRow(-1)) {\n          var task = this.moveRow(-1);\n          cell = this.getLastCell();\n\n          if (cell && this.getEditorConfig(cell)) {\n            this.startEdit(task, cell);\n          }\n        }\n      },\n      moveRow: function moveRow(dir) {\n        var moveTask = dir > 0 ? gantt.getNext : gantt.getPrev;\n        moveTask = gantt.bind(moveTask, gantt);\n        var nextItem = moveTask(this._itemId); // skip readonly rows\n\n        while (gantt.isTaskExists(nextItem) && gantt.isReadonly(gantt.getTask(nextItem))) {\n          nextItem = moveTask(nextItem);\n        }\n\n        return nextItem;\n      },\n      editNextRow: function nextRow(skipReadonly) {\n        var id = this.getState().id;\n        if (!gantt.isTaskExists(id)) return;\n        var next = null;\n\n        if (skipReadonly) {\n          next = this.moveRow(1);\n        } else {\n          next = gantt.getNext(id);\n        }\n\n        if (gantt.isTaskExists(next)) {\n          this.startEdit(next, this._columnName);\n        }\n      },\n      editPrevRow: function prevRow(skipReadonly) {\n        var id = this.getState().id;\n        if (!gantt.isTaskExists(id)) return;\n        var prev = null;\n\n        if (skipReadonly) {\n          prev = this.moveRow(-1);\n        } else {\n          prev = gantt.getPrev(id);\n        }\n\n        if (gantt.isTaskExists(prev)) {\n          this.startEdit(prev, this._columnName);\n        }\n      },\n      destructor: function destructor() {\n        handlers.forEach(function (handlerId) {\n          store.detachEvent(handlerId);\n        });\n        ganttHandlers.forEach(function (handlerId) {\n          gantt.detachEvent(handlerId);\n        });\n        handlers = [];\n        ganttHandlers = [];\n        store = null;\n        this.hide();\n        this.detachAllEvents();\n      }\n    };\n    utils.mixin(controller, keyboardMapping);\n    utils.mixin(controller, eventBus);\n    return controller;\n  }\n\n  var inlineEditController = {\n    init: initConfigs,\n    createEditors: createGridEditors\n  };\n  utils.mixin(inlineEditController, keyboardMapping);\n  utils.mixin(inlineEditController, eventBus);\n  return inlineEditController;\n}\n\nmodule.exports = create;","var createStaticBgHelper = function createStaticBgHelper() {\n  return {\n    render: function render() {},\n    destroy: function destroy() {}\n  };\n};\n\nmodule.exports = {\n  create: function create() {\n    return createStaticBgHelper();\n  }\n};","var __extends = require(\"../../../utils/extends\"),\n    domHelpers = require(\"../utils/dom_helpers\"),\n    utils = require(\"../../../utils/utils\"),\n    env = require(\"../../../utils/env\"),\n    Cell = require(\"./cell\");\n\nvar ScrollbarCell = function (_super) {\n  \"use strict\";\n\n  var SCROLL_MODIFIER_KEYS = [\"altKey\", \"shiftKey\", \"metaKey\"]; // it's no way to disable ctrl+wheel\n\n  __extends(ScrollbarCell, _super);\n\n  function ScrollbarCell(parent, config, factory, gantt) {\n    var _this = _super.apply(this, arguments) || this;\n\n    this.$config = utils.mixin(config, {\n      scroll: \"x\"\n    });\n    _this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\n    _this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\n    _this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\n    _this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\n    _this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\n    this.$config.hidden = true;\n    var size = gantt.config.scroll_size;\n\n    if (gantt.env.isIE) {\n      // full element height/width must be bigger than just a browser scrollbar,\n      // otherwise the scrollbar element won't be scrolled on click\n      size += 1;\n    }\n\n    if (this._isHorizontal()) {\n      _this.$config.height = size;\n      _this.$parent.$config.height = size;\n    } else {\n      _this.$config.width = size;\n      _this.$parent.$config.width = size;\n    }\n\n    this.$config.scrollPosition = 0;\n    _this.$name = \"scroller\";\n    return _this;\n  }\n\n  ScrollbarCell.prototype.init = function (container) {\n    container.innerHTML = this.$toHTML();\n    this.$view = container.firstChild;\n\n    if (!this.$view) {\n      this.init();\n    }\n\n    if (this._isVertical()) {\n      this._initVertical();\n    } else {\n      this._initHorizontal();\n    }\n\n    this._initMouseWheel();\n\n    this._initLinkedViews();\n  };\n\n  ScrollbarCell.prototype.$toHTML = function () {\n    var className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\n    return \"<div class='gantt_layout_cell \" + className + \"'><div style='\" + (this._isHorizontal() ? \"width:2000px\" : \"height:2000px\") + \"'></div></div>\";\n  };\n\n  ScrollbarCell.prototype._getRootParent = function () {\n    var parent = this.$parent;\n\n    while (parent && parent.$parent) {\n      parent = parent.$parent;\n    }\n\n    if (parent) {\n      return parent;\n    }\n  };\n\n  function eachCell(root, res) {\n    res.push(root);\n\n    if (root.$cells) {\n      for (var i = 0; i < root.$cells.length; i++) {\n        eachCell(root.$cells[i], res);\n      }\n    }\n  }\n\n  ScrollbarCell.prototype._eachView = function () {\n    var res = [];\n    eachCell(this._getRootParent(), res);\n    return res;\n  };\n\n  ScrollbarCell.prototype._getLinkedViews = function () {\n    var views = this._eachView();\n\n    var res = [];\n\n    for (var i = 0; i < views.length; i++) {\n      if (views[i].$config && (this._isVertical() && views[i].$config.scrollY == this.$id || this._isHorizontal() && views[i].$config.scrollX == this.$id)) {\n        res.push(views[i]);\n      }\n    }\n\n    return res;\n  };\n\n  ScrollbarCell.prototype._initHorizontal = function () {\n    this.$scroll_hor = this.$view;\n    this.$domEvents.attach(this.$view, \"scroll\", this._scrollHorizontalHandler);\n  };\n\n  ScrollbarCell.prototype._initLinkedViews = function () {\n    var views = this._getLinkedViews();\n\n    var css = this._isVertical() ? \"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\n\n    for (var i = 0; i < views.length; i++) {\n      //views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\n      domHelpers.addClassName(views[i].$view || views[i].getNode(), css);\n    }\n  };\n\n  ScrollbarCell.prototype._initVertical = function () {\n    this.$scroll_ver = this.$view;\n    this.$domEvents.attach(this.$view, \"scroll\", this._scrollVerticalHandler);\n  };\n\n  ScrollbarCell.prototype._updateLinkedViews = function () {};\n\n  ScrollbarCell.prototype._initMouseWheel = function () {\n    var ff = env.isFF;\n    if (ff) this.$domEvents.attach(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler, {\n      passive: false\n    });else this.$domEvents.attach(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler, {\n      passive: false\n    });\n  };\n\n  ScrollbarCell.prototype.scrollHorizontally = function (left) {\n    if (this._scrolling) return;\n    this._scrolling = true;\n    this.$scroll_hor.scrollLeft = left;\n    this.$config.codeScrollLeft = left;\n    left = this.$scroll_hor.scrollLeft;\n\n    var views = this._getLinkedViews();\n\n    for (var i = 0; i < views.length; i++) {\n      if (views[i].scrollTo) {\n        views[i].scrollTo(left, undefined);\n      }\n    }\n\n    var oldSize = this.$config.scrollPosition;\n    this.$config.scrollPosition = left;\n    this.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\n    this._scrolling = false;\n  };\n\n  ScrollbarCell.prototype.scrollVertically = function (top) {\n    if (this._scrolling) return;\n    this._scrolling = true;\n    this.$scroll_ver.scrollTop = top;\n    top = this.$scroll_ver.scrollTop;\n\n    var views = this._getLinkedViews();\n\n    for (var i = 0; i < views.length; i++) {\n      if (views[i].scrollTo) {\n        views[i].scrollTo(undefined, top);\n      }\n    }\n\n    var oldSize = this.$config.scrollPosition;\n    this.$config.scrollPosition = top;\n    this.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\n    this._scrolling = false;\n  };\n\n  ScrollbarCell.prototype._isVertical = function () {\n    return this.$config.scroll == \"y\";\n  };\n\n  ScrollbarCell.prototype._isHorizontal = function () {\n    return this.$config.scroll == \"x\";\n  };\n\n  ScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\n    if (this._isVertical() || this._scrolling) {\n      return;\n    } //in safari we can catch previous onscroll after setting new value from mouse-wheel event\n    //set delay to prevent value drifiting\n\n\n    if (new Date() - (this._wheel_time || 0) < 100) return true; //if (this.$gantt._touch_scroll_active) return;\n\n    var left = this.$scroll_hor.scrollLeft;\n    this.scrollHorizontally(left);\n    this._oldLeft = this.$scroll_hor.scrollLeft;\n  };\n\n  ScrollbarCell.prototype._outerScrollHorizontalHandler = function (e) {\n    if (this._isVertical()) {\n      return;\n    }\n  };\n\n  ScrollbarCell.prototype.show = function () {\n    this.$parent.show();\n  };\n\n  ScrollbarCell.prototype.hide = function () {\n    this.$parent.hide();\n  };\n\n  ScrollbarCell.prototype._getScrollSize = function () {\n    var scrollSize = 0;\n    var outerSize = 0;\n\n    var isHorizontal = this._isHorizontal();\n\n    var linked = this._getLinkedViews();\n\n    var view;\n    var scrollProperty = isHorizontal ? \"scrollWidth\" : \"scrollHeight\",\n        innerSizeProperty = isHorizontal ? \"contentX\" : \"contentY\";\n    var outerProperty = isHorizontal ? \"x\" : \"y\";\n\n    var offset = this._getScrollOffset();\n\n    for (var i = 0; i < linked.length; i++) {\n      view = linked[i];\n      if (!(view && view.$content && view.$content.getSize && !view.$config.hidden)) continue;\n      var sizes = view.$content.getSize();\n      var cellScrollSize;\n\n      if (sizes.hasOwnProperty(scrollProperty)) {\n        cellScrollSize = sizes[scrollProperty];\n      } else {\n        cellScrollSize = sizes[innerSizeProperty];\n      }\n\n      if (offset) {\n        // precalculated vertical/horizontal offsets of scrollbar to emulate 4.x look\n        if (sizes[innerSizeProperty] > sizes[outerProperty] && sizes[innerSizeProperty] > scrollSize && cellScrollSize > sizes[outerProperty] - offset + 2) {\n          scrollSize = cellScrollSize + (isHorizontal ? 0 : 2);\n          outerSize = sizes[outerProperty];\n        }\n      } else {\n        var nonScrollableSize = Math.max(sizes[innerSizeProperty] - cellScrollSize, 0);\n        var scrollableViewPortSize = Math.max(sizes[outerProperty] - nonScrollableSize, 0);\n        cellScrollSize = cellScrollSize + nonScrollableSize;\n\n        if (cellScrollSize > scrollableViewPortSize && cellScrollSize > scrollSize) {\n          //|| (cellScrollSize === scrollSize && sizes[outerProperty] < outerSize) // same scroll width but smaller scrollable view port\n          scrollSize = cellScrollSize;\n          outerSize = sizes[outerProperty];\n        }\n      }\n    }\n\n    return {\n      outerScroll: outerSize,\n      innerScroll: scrollSize\n    };\n  };\n\n  ScrollbarCell.prototype.scroll = function (position) {\n    if (this._isHorizontal()) {\n      this.scrollHorizontally(position);\n    } else {\n      this.scrollVertically(position);\n    }\n  };\n\n  ScrollbarCell.prototype.getScrollState = function () {\n    return {\n      visible: this.isVisible(),\n      direction: this.$config.scroll,\n      size: this.$config.outerSize,\n      scrollSize: this.$config.scrollSize || 0,\n      position: this.$config.scrollPosition || 0\n    };\n  };\n\n  ScrollbarCell.prototype.setSize = function (width, height) {\n    _super.prototype.setSize.apply(this, arguments);\n\n    var scrollSizes = this._getScrollSize();\n\n    var ownSize = (this._isVertical() ? height : width) - this._getScrollOffset() + (this._isHorizontal() ? 1 : 0);\n\n    if (scrollSizes.innerScroll && ownSize > scrollSizes.outerScroll) {\n      scrollSizes.innerScroll += ownSize - scrollSizes.outerScroll;\n    }\n\n    this.$config.scrollSize = scrollSizes.innerScroll;\n    this.$config.width = width;\n    this.$config.height = height;\n\n    this._setScrollSize(scrollSizes.innerScroll);\n  };\n\n  ScrollbarCell.prototype.isVisible = function () {\n    return !!(this.$parent && this.$parent.$view.parentNode);\n  };\n\n  ScrollbarCell.prototype.shouldShow = function () {\n    var scrollSizes = this._getScrollSize();\n\n    if (!scrollSizes.innerScroll && this.$parent && this.$parent.$view.parentNode) {\n      return false;\n    } else if (scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  ScrollbarCell.prototype.shouldHide = function () {\n    var scrollSizes = this._getScrollSize();\n\n    if (!scrollSizes.innerScroll && this.$parent && this.$parent.$view.parentNode) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  ScrollbarCell.prototype.toggleVisibility = function () {\n    if (this.shouldHide()) {\n      this.hide();\n    } else if (this.shouldShow()) {\n      this.show();\n    }\n  };\n\n  ScrollbarCell.prototype._getScaleOffset = function (view) {\n    var offset = 0;\n\n    if (view && (view.$config.view == \"timeline\" || view.$config.view == \"grid\")) {\n      offset = view.$content.$getConfig().scale_height;\n    }\n\n    return offset;\n  };\n\n  ScrollbarCell.prototype._getScrollOffset = function () {\n    var offset = 0;\n\n    if (this._isVertical()) {\n      var parentLayout = this.$parent.$parent;\n      offset = Math.max(this._getScaleOffset(parentLayout.getPrevSibling(this.$parent.$id)), this._getScaleOffset(parentLayout.getNextSibling(this.$parent.$id)));\n    } else {\n      var linked = this._getLinkedViews();\n\n      for (var i = 0; i < linked.length; i++) {\n        var view = linked[i],\n            vparent = view.$parent;\n        var cells = vparent.$cells;\n        var last = cells[cells.length - 1];\n\n        if (last && last.$config.view == \"scrollbar\" && last.$config.hidden === false) {\n          offset = last.$config.width;\n          break;\n        }\n      }\n    }\n\n    return offset || 0;\n  };\n\n  ScrollbarCell.prototype._setScrollSize = function (size) {\n    var property = this._isHorizontal() ? \"width\" : \"height\";\n    var scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\n\n    var offset = this._getScrollOffset();\n\n    var node = scrollbar.firstChild;\n\n    if (offset) {\n      if (this._isVertical()) {\n        this.$config.outerSize = this.$config.height - offset + 3;\n        scrollbar.style.height = this.$config.outerSize + \"px\";\n        scrollbar.style.top = offset - 1 + \"px\";\n        domHelpers.addClassName(scrollbar, this.$parent._borders.top);\n        domHelpers.addClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\n      } else {\n        this.$config.outerSize = this.$config.width - offset + 1;\n        scrollbar.style.width = this.$config.outerSize + \"px\"; //domHelpers.addClassName(scrollbar, this.$parent._borders.right);\n      }\n    } else {\n      scrollbar.style.top = \"auto\";\n      domHelpers.removeClassName(scrollbar, this.$parent._borders.top);\n      domHelpers.removeClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\n      this.$config.outerSize = this.$config.height;\n    }\n\n    node.style[property] = size + \"px\";\n  };\n\n  ScrollbarCell.prototype._scrollVerticalHandler = function (e) {\n    if (this._scrollHorizontalHandler() || this._scrolling) {\n      return;\n    } //if (this.$gantt._touch_scroll_active) return;\n\n\n    var top = this.$scroll_ver.scrollTop;\n    var prev = this._oldTop;\n    if (top == prev) return;\n    this.scrollVertically(top);\n    this._oldTop = this.$scroll_ver.scrollTop;\n  };\n\n  ScrollbarCell.prototype._outerScrollVerticalHandler = function (e) {\n    if (this._scrollHorizontalHandler()) {\n      return;\n    }\n  };\n\n  ScrollbarCell.prototype._checkWheelTarget = function (targetNode) {\n    var connectedViews = this._getLinkedViews().concat(this);\n\n    for (var i = 0; i < connectedViews.length; i++) {\n      var node = connectedViews[i].$view;\n\n      if (domHelpers.isChildOf(targetNode, node)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ScrollbarCell.prototype._mouseWheelHandler = function (e) {\n    var target = e.target || e.srcElement;\n    if (!this._checkWheelTarget(target)) return;\n    this._wheel_time = new Date();\n    var res = {};\n    var wheelSpeed = {\n      x: 1,\n      y: 1\n    };\n    var wheelSpeedConfig = this.$gantt.config.wheel_scroll_sensitivity;\n\n    if (typeof wheelSpeedConfig == \"number\" && !!wheelSpeedConfig) {\n      wheelSpeed = {\n        x: wheelSpeedConfig,\n        y: wheelSpeedConfig\n      };\n    } else if ({}.toString.apply(wheelSpeedConfig) == \"[object Object]\") {\n      wheelSpeed = {\n        x: wheelSpeedConfig.x,\n        y: wheelSpeedConfig.y\n      };\n    }\n\n    var ff = env.isFF;\n    var deltaX = ff ? e.deltaX : e.wheelDeltaX;\n    var deltaY = ff ? e.deltaY : e.wheelDelta;\n    var multiplier = -20;\n\n    if (ff) {\n      if (e.deltaMode !== 0) {\n        multiplier = -40;\n      } else {\n        multiplier = -10;\n      }\n    }\n\n    var wx = ff ? deltaX * multiplier * wheelSpeed.x : deltaX * 2 * wheelSpeed.x;\n    var wy = ff ? deltaY * multiplier * wheelSpeed.y : deltaY * wheelSpeed.y;\n    var horizontalScrollModifier = this.$gantt.config.horizontal_scroll_key;\n\n    if (horizontalScrollModifier !== false) {\n      if (SCROLL_MODIFIER_KEYS.indexOf(horizontalScrollModifier) >= 0) {\n        if (e[horizontalScrollModifier] && !(e.deltaX || e.wheelDeltaX)) {\n          // shift+mousewheel for horizontal scroll\n          wx = wy * 2;\n          wy = 0;\n        }\n      }\n    }\n\n    if (wx && Math.abs(wx) > Math.abs(wy)) {\n      if (this._isVertical()) {\n        return;\n      }\n\n      if (res.x) return true; //no horisontal scroll, must not block scrolling\n\n      if (!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\n      var dir = wx / -40;\n      var oldLeft = this._oldLeft;\n      var left = oldLeft + dir * 30;\n      this.scrollHorizontally(left);\n      this.$scroll_hor.scrollLeft = left; // not block scroll if position hasn't changed\n\n      if (oldLeft == this.$scroll_hor.scrollLeft) {\n        return true;\n      }\n\n      this._oldLeft = this.$scroll_hor.scrollLeft;\n    } else {\n      if (this._isHorizontal()) {\n        return;\n      }\n\n      if (res.y) return true; //no vertical scroll, must not block scrolling\n\n      if (!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\n      var dir = wy / -40;\n      if (typeof wy == \"undefined\") dir = e.detail;\n      var oldTop = this._oldTop;\n      var top = this.$scroll_ver.scrollTop + dir * 30; //if(!this.$gantt.config.prevent_default_scroll &&\n      //\t(this.$gantt._cached_scroll_pos && ((this.$gantt._cached_scroll_pos.y == top) || (this.$gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\n\n      this.scrollVertically(top);\n      this.$scroll_ver.scrollTop = top; // not block scroll if position hasn't changed\n\n      if (oldTop == this.$scroll_ver.scrollTop) {\n        return true;\n      }\n\n      this._oldTop = this.$scroll_ver.scrollTop;\n    }\n\n    if (e.preventDefault) e.preventDefault();\n    e.cancelBubble = true;\n    return false;\n  };\n\n  return ScrollbarCell;\n}(Cell);\n\nmodule.exports = ScrollbarCell;","module.exports = null;","var __extends = require(\"../../../utils/extends\"),\n    utils = require(\"../../../utils/utils\"),\n    Cell = require(\"./cell\");\n\nvar ViewCell = function (_super) {\n  \"use strict\";\n\n  __extends(ViewCell, _super);\n\n  function ViewCell(parent, config, factory) {\n    var _this = _super.apply(this, arguments) || this;\n\n    if (config.view) {\n      if (config.id) {\n        // pass id to the nested view\n        this.$id = utils.uid();\n      }\n\n      var childConfig = utils.copy(config);\n      delete childConfig.config;\n      delete childConfig.templates;\n      this.$content = this.$factory.createView(config.view, this, childConfig, this);\n      if (!this.$content) return false;\n    }\n\n    _this.$name = \"viewCell\";\n    return _this;\n  }\n\n  ViewCell.prototype.destructor = function () {\n    this.clear();\n\n    _super.prototype.destructor.call(this);\n  };\n\n  ViewCell.prototype.clear = function () {\n    this.$initialized = false; // call destructor\n\n    if (this.$content) {\n      var method = this.$content.unload || this.$content.destructor;\n\n      if (method) {\n        method.call(this.$content);\n      }\n    }\n\n    _super.prototype.clear.call(this);\n  };\n\n  ViewCell.prototype.scrollTo = function (left, top) {\n    if (this.$content && this.$content.scrollTo) {\n      this.$content.scrollTo(left, top);\n    } else {\n      _super.prototype.scrollTo.call(this, left, top);\n    }\n  };\n\n  ViewCell.prototype._setContentSize = function (x, y) {\n    var borders = this._getBorderSizes();\n\n    if (typeof x === \"number\") {\n      var outerX = x + borders.horizontal;\n      this.$config.width = outerX;\n    }\n\n    if (typeof y === \"number\") {\n      var outerY = y + borders.vertical;\n      this.$config.height = outerY;\n    }\n  };\n\n  ViewCell.prototype.setSize = function (x, y) {\n    _super.prototype.setSize.call(this, x, y);\n\n    if (!this.$preResize && this.$content) {\n      if (!this.$initialized) {\n        this.$initialized = true;\n        var header = this.$view.childNodes[0];\n        var content = this.$view.childNodes[1];\n        if (!content) content = header;\n        /*if(this.$content.$config){\r\n        \tthis.$content.$config.width = this.$lastSize.contentX;\r\n        \tthis.$content.$config.height = this.$lastSize.contentY;\r\n        }*/\n\n        this.$content.init(content);\n      }\n    }\n  };\n\n  ViewCell.prototype.setContentSize = function () {\n    if (!this.$preResize && this.$content) {\n      if (this.$initialized) {\n        this.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\n      }\n    }\n  };\n\n  ViewCell.prototype.getContentSize = function () {\n    var size = _super.prototype.getContentSize.call(this);\n\n    if (this.$content && this.$initialized) {\n      var childSize = this.$content.getSize();\n      size.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\n      size.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\n    }\n\n    var borders = this._getBorderSizes();\n\n    size.width += borders.horizontal;\n    size.height += borders.vertical;\n    return size;\n  };\n\n  return ViewCell;\n}(Cell);\n\nmodule.exports = ViewCell;","var __extends = require(\"../../../utils/extends\"),\n    Layout = require(\"./layout\"),\n    Cell = require(\"./cell\");\n\nvar ViewLayout = function (_super) {\n  \"use strict\";\n\n  __extends(ViewLayout, _super);\n\n  function ViewLayout(parent, config, factory) {\n    var _this = _super.apply(this, arguments) || this;\n\n    for (var i = 0; i < _this.$cells.length; i++) {\n      _this.$cells[i].$config.hidden = i !== 0;\n    }\n\n    _this.$cell = _this.$cells[0];\n    _this.$name = \"viewLayout\";\n    return _this;\n  }\n\n  ViewLayout.prototype.cell = function (id) {\n    var cell = _super.prototype.cell.call(this, id);\n\n    if (!cell.$view) {\n      this.$fill(null, this);\n    }\n\n    return cell;\n  };\n\n  ViewLayout.prototype.moveView = function (view) {\n    var body = this.$view;\n\n    if (this.$cell) {\n      this.$cell.$config.hidden = true;\n      body.removeChild(this.$cell.$view);\n    }\n\n    this.$cell = view;\n    body.appendChild(view.$view);\n  };\n\n  ViewLayout.prototype.setSize = function (x, y) {\n    Cell.prototype.setSize.call(this, x, y);\n  };\n\n  ViewLayout.prototype.setContentSize = function () {\n    var size = this.$lastSize;\n    this.$cell.setSize(size.contentX, size.contentY);\n  };\n\n  ViewLayout.prototype.getSize = function () {\n    var sizes = _super.prototype.getSize.call(this);\n\n    if (this.$cell) {\n      var cellSize = this.$cell.getSize();\n\n      if (this.$config.byMaxSize) {\n        for (var i = 0; i < this.$cells.length; i++) {\n          var otherCell = this.$cells[i].getSize();\n\n          for (var cell in cellSize) {\n            cellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\n          }\n        }\n      }\n\n      for (var size in sizes) {\n        sizes[size] = sizes[size] || cellSize[size];\n      }\n\n      sizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\n    }\n\n    return sizes;\n  };\n\n  return ViewLayout;\n}(Layout);\n\nmodule.exports = ViewLayout;","module.exports = function (item, view, config) {\n  if (!item.start_date || !item.end_date) {\n    return null;\n  }\n\n  var padding = 200;\n  var startCoord = view.posFromDate(item.start_date);\n  var endCoord = view.posFromDate(item.end_date);\n  var left = Math.min(startCoord, endCoord) - padding;\n  var right = Math.max(startCoord, endCoord) + padding;\n  return {\n    top: view.getItemTop(item.id),\n    height: view.getItemHeight(item.id),\n    left: left,\n    width: right - left\n  };\n};","var barRectangle = require(\"./get_bar_rectangle\");\n\nmodule.exports = function getLinkBox(item, view, config, gantt) {\n  if (!gantt.isTaskExists(item.source)) {\n    return null;\n  }\n\n  if (!gantt.isTaskExists(item.target)) {\n    return null;\n  }\n\n  var sourceBox = barRectangle(gantt.getTask(item.source), view, gantt);\n  var targetBox = barRectangle(gantt.getTask(item.target), view, gantt);\n\n  if (!sourceBox || !targetBox) {\n    return null;\n  }\n\n  var padding = 100;\n  var left = Math.min(sourceBox.left, targetBox.left) - padding;\n  var right = Math.max(sourceBox.left + sourceBox.width, targetBox.left + targetBox.width) + padding;\n  var top = Math.min(sourceBox.top, targetBox.top) - padding;\n  var bottom = Math.max(sourceBox.top + sourceBox.height, targetBox.top + targetBox.height) + padding;\n  return {\n    top: top,\n    height: bottom - top,\n    bottom: bottom,\n    left: left,\n    width: right - left,\n    right: right\n  };\n};","module.exports = function (viewport, box) {\n  if (!box) {\n    return false;\n  }\n\n  if (box.left > viewport.x_end || box.left + box.width < viewport.x) {\n    return false;\n  }\n\n  if (box.top > viewport.y_end || box.top + box.height < viewport.y) {\n    return false;\n  }\n\n  return true;\n};","var genericViewPortChecker = require(\"./viewport/is_in_viewport\");\n\nvar isLegacyRender = require(\"./is_legacy_smart_render\");\n\nvar basicGetRectangle = require(\"./viewport/get_grid_row_rectangle\");\n\nvar basicGetRange = require(\"./viewport/get_visible_bars_range\");\n\nvar rendererFactory = function rendererFactory(gantt) {\n  //hash of dom elements is needed to redraw single bar/link\n  var task_area_pulls = {},\n      task_area_renderers = {};\n\n  function getView(layer) {\n    var view = null;\n\n    if (typeof layer.view === \"string\") {\n      view = gantt.$ui.getView(layer.view);\n    } else if (layer.view) {\n      view = layer.view;\n    }\n\n    return view;\n  }\n\n  function getRenderer(id, layer, node) {\n    if (task_area_renderers[id]) return task_area_renderers[id];\n    if (!layer.renderer) gantt.assert(false, \"Invalid renderer call\");\n    var renderMethod = null;\n    var updateMethod = null;\n    var getRectangle = null;\n    var renderCallbackMethod = null;\n    var specializedViewPortChecker = null;\n\n    if (typeof layer.renderer === \"function\") {\n      renderMethod = layer.renderer;\n      getRectangle = basicGetRectangle;\n    } else {\n      renderMethod = layer.renderer.render;\n      updateMethod = layer.renderer.update;\n      renderCallbackMethod = layer.renderer.onrender;\n\n      if (layer.renderer.isInViewPort) {\n        specializedViewPortChecker = layer.renderer.isInViewPort;\n      } else {\n        getRectangle = layer.renderer.getRectangle;\n      }\n\n      if (!getRectangle && getRectangle !== null) {\n        getRectangle = basicGetRectangle;\n      }\n    }\n\n    var filter = layer.filter;\n    if (node) node.setAttribute(gantt.config.layer_attribute, true);\n    task_area_renderers[id] = {\n      render_item: function render_item(item, container, viewPort, layerView, viewConfig) {\n        container = container || node;\n\n        if (filter) {\n          if (!filter(item)) {\n            this.remove_item(item.id);\n            return;\n          }\n        }\n\n        var view = layerView || getView(layer);\n        var config = viewConfig || (view ? view.$getConfig() : null);\n        var rendererViewPort = viewPort;\n\n        if (!rendererViewPort && config && config.smart_rendering) {\n          rendererViewPort = view.getViewPort();\n        }\n\n        var dom = null;\n\n        if (!isLegacyRender(gantt) && (getRectangle || specializedViewPortChecker) && rendererViewPort) {\n          var isVisible = false;\n\n          if (specializedViewPortChecker) {\n            isVisible = specializedViewPortChecker(item, rendererViewPort, view, config, gantt);\n          } else {\n            isVisible = genericViewPortChecker(rendererViewPort, getRectangle(item, view, config, gantt));\n          }\n\n          if (isVisible) {\n            dom = renderMethod.call(gantt, item, view, config, rendererViewPort);\n          }\n        } else {\n          dom = renderMethod.call(gantt, item, view, config, rendererViewPort);\n        }\n\n        this.append(item, dom, container);\n        var useBuffer = container.nodeType == 11; //DocumentFragment\n\n        if (renderCallbackMethod && !useBuffer && dom) {\n          renderCallbackMethod.call(gantt, item, dom, view);\n        }\n      },\n      clear: function clear(container) {\n        this.rendered = task_area_pulls[id] = {};\n        if (!layer.append) this.clear_container(container);\n      },\n      clear_container: function clear_container(container) {\n        container = container || node;\n\n        if (container) {\n          container.innerHTML = \"\";\n        }\n      },\n      get_visible_range: function get_visible_range(datastore) {\n        var view = getView(layer);\n        var viewport;\n        var viewConfig = view ? view.$getConfig() : null;\n\n        if (viewConfig && viewConfig.smart_rendering) {\n          viewport = view.getViewPort();\n        }\n\n        var range;\n\n        if (view && viewport) {\n          if (typeof layer.renderer === \"function\") {\n            range = basicGetRange(gantt, view, viewConfig, datastore, viewport);\n          } else if (layer.renderer && layer.renderer.getVisibleRange) {\n            range = layer.renderer.getVisibleRange(gantt, view, viewConfig, datastore, viewport);\n          }\n        }\n\n        if (!range) {\n          range = {\n            start: 0,\n            end: datastore.count()\n          };\n        }\n\n        return range;\n      },\n      prepare_data: function prepare_data(items) {\n        if (layer.renderer && layer.renderer.prepareData) {\n          return layer.renderer.prepareData(items, gantt, layer);\n        }\n      },\n      render_items: function render_items(items, container) {\n        container = container || node;\n        var buffer = document.createDocumentFragment();\n        this.clear(container);\n        var viewPort = null;\n        var view = getView(layer);\n        var viewConfig = view ? view.$getConfig() : null;\n\n        if (viewConfig && viewConfig.smart_rendering) {\n          viewPort = view.getViewPort();\n        }\n\n        for (var i = 0, vis = items.length; i < vis; i++) {\n          this.render_item(items[i], buffer, viewPort, view, viewConfig);\n        }\n\n        container.appendChild(buffer, container);\n        var itemsSearch = {};\n        items.forEach(function (item) {\n          itemsSearch[item.id] = item;\n        });\n        var renderedItems = {};\n\n        if (renderCallbackMethod) {\n          var newElements = {};\n\n          for (var i in this.rendered) {\n            if (!renderedItems[i]) {\n              newElements[i] = this.rendered[i];\n              renderCallbackMethod.call(gantt, itemsSearch[i], this.rendered[i], view);\n            }\n          }\n        }\n      },\n      update_items: function update_items(items, container) {\n        var view = getView(layer);\n        var viewConfig = view ? view.$getConfig() : null;\n\n        if (!view || !view.$getConfig().smart_rendering || isLegacyRender(gantt)) {\n          return;\n        }\n\n        if (!this.rendered) {\n          return;\n        }\n\n        if (!(getRectangle || specializedViewPortChecker)) {\n          return;\n        }\n\n        container = container || node;\n        var buffer = document.createDocumentFragment();\n        var viewPort = null;\n\n        if (view) {\n          viewPort = view.getViewPort();\n        }\n\n        var itemsSearch = {};\n        items.forEach(function (item) {\n          itemsSearch[item.id] = item;\n        });\n        var renderedItems = {};\n        var nodesToRemove = {};\n\n        for (var i in this.rendered) {\n          nodesToRemove[i] = true;\n          renderedItems[i] = true;\n        }\n\n        var renderCalledFor = {};\n\n        for (var i = 0, vis = items.length; i < vis; i++) {\n          var item = items[i];\n          var itemNode = this.rendered[item.id];\n          nodesToRemove[item.id] = false;\n\n          if (itemNode && itemNode.parentNode) {\n            var isVisible = false;\n\n            if (specializedViewPortChecker) {\n              isVisible = specializedViewPortChecker(item, viewPort, view, viewConfig, gantt);\n            } else {\n              isVisible = genericViewPortChecker(viewPort, getRectangle(item, view, viewConfig, gantt));\n            }\n\n            if (!isVisible) {\n              nodesToRemove[item.id] = true;\n            } else {\n              if (updateMethod) {\n                updateMethod.call(gantt, item, itemNode, view, viewConfig, viewPort);\n              }\n\n              this.restore(item, buffer);\n            }\n          } else {\n            renderCalledFor[items[i].id] = true;\n            this.render_item(items[i], buffer, viewPort, view, viewConfig);\n          }\n        }\n\n        for (var i in nodesToRemove) {\n          if (nodesToRemove[i]) {\n            this.hide(i);\n          }\n        }\n\n        if (buffer.childNodes.length) {\n          container.appendChild(buffer, container);\n        }\n\n        if (renderCallbackMethod) {\n          var newElements = {};\n\n          for (var i in this.rendered) {\n            if (!renderedItems[i] || renderCalledFor[i]) {\n              newElements[i] = this.rendered[i];\n              renderCallbackMethod.call(gantt, itemsSearch[i], this.rendered[i], view);\n            }\n          }\n        }\n      },\n      append: function append(item, node, container) {\n        if (!this.rendered) {\n          return;\n        }\n\n        if (!node) {\n          if (this.rendered[item.id]) {\n            this.remove_item(item.id);\n          }\n\n          return;\n        }\n\n        if (this.rendered[item.id] && this.rendered[item.id].parentNode) {\n          this.replace_item(item.id, node);\n        } else {\n          container.appendChild(node);\n        }\n\n        this.rendered[item.id] = node;\n      },\n      replace_item: function replace_item(item_id, newNode) {\n        var item = this.rendered[item_id];\n\n        if (item && item.parentNode) {\n          item.parentNode.replaceChild(newNode, item);\n        }\n\n        this.rendered[item_id] = newNode;\n      },\n      remove_item: function remove_item(item_id) {\n        this.hide(item_id);\n        delete this.rendered[item_id];\n      },\n      hide: function hide(item_id) {\n        var item = this.rendered[item_id];\n\n        if (item && item.parentNode) {\n          item.parentNode.removeChild(item);\n        }\n      },\n      restore: function restore(item, container) {\n        var dom = this.rendered[item.id];\n\n        if (dom) {\n          if (!dom.parentNode) {\n            this.append(item, dom, container || node);\n          }\n        } else {\n          this.render_item(item, container || node);\n        }\n      },\n      change_id: function change_id(oldid, newid) {\n        this.rendered[newid] = this.rendered[oldid];\n        delete this.rendered[oldid];\n      },\n      rendered: task_area_pulls[id],\n      node: node,\n      destructor: function destructor() {\n        this.clear();\n        delete task_area_renderers[id];\n        delete task_area_pulls[id];\n      }\n    };\n    return task_area_renderers[id];\n  }\n\n  function clearRenderers() {\n    for (var i in task_area_renderers) {\n      getRenderer(i).destructor();\n    }\n  }\n\n  return {\n    getRenderer: getRenderer,\n    clearRenderers: clearRenderers\n  };\n};\n\nmodule.exports = rendererFactory;","var renderFactoryProvider = require(\"./render_factory\");\n\nvar utils = require(\"../../../utils/utils\"),\n    domHelpers = require(\"../utils/dom_helpers\"),\n    isLegacyRender = require(\"./is_legacy_smart_render\");\n\nvar layerFactory = function layerFactory(gantt) {\n  var renderFactory = renderFactoryProvider(gantt);\n  return {\n    createGroup: function createGroup(getContainer, relativeRoot, defaultFilters, initLayer) {\n      var renderGroup = {\n        tempCollection: [],\n        renderers: {},\n        container: getContainer,\n        filters: [],\n        getLayers: function getLayers() {\n          this._add(); // add pending layers\n\n\n          var res = [];\n\n          for (var i in this.renderers) {\n            res.push(this.renderers[i]);\n          }\n\n          return res;\n        },\n        getLayer: function getLayer(id) {\n          return this.renderers[id];\n        },\n        _add: function _add(layer) {\n          if (layer) {\n            layer.id = layer.id || utils.uid();\n            this.tempCollection.push(layer);\n          }\n\n          var container = this.container();\n          var pending = this.tempCollection;\n\n          for (var i = 0; i < pending.length; i++) {\n            layer = pending[i];\n            if (!this.container() && !(layer && layer.container && domHelpers.isChildOf(layer.container, document.body))) continue;\n            var node = layer.container,\n                id = layer.id,\n                topmost = layer.topmost;\n\n            if (!node.parentNode) {\n              //insert on top or below the tasks\n              if (topmost) {\n                container.appendChild(node);\n              } else {\n                var rel = relativeRoot ? relativeRoot() : container.firstChild; // GS-1274: if we don't add the second check, Gantt stops working if\n                // we add the task layer without the timeline and switch to a layout with the timeline\n\n                if (rel && rel.parentNode == container) container.insertBefore(node, rel);else container.appendChild(node);\n              }\n            }\n\n            this.renderers[id] = renderFactory.getRenderer(id, layer, node);\n\n            if (initLayer) {\n              initLayer(layer, gantt);\n            }\n\n            this.tempCollection.splice(i, 1);\n            i--;\n          }\n        },\n        addLayer: function addLayer(config) {\n          if (config) {\n            if (typeof config == \"function\") {\n              config = {\n                renderer: config\n              };\n            }\n\n            if (config.filter === undefined) {\n              config.filter = mergeFilters(defaultFilters || []);\n            } else if (config.filter instanceof Array) {\n              config.filter.push(defaultFilters);\n              config.filter = mergeFilters(config.filter);\n            }\n\n            if (!config.container) {\n              config.container = document.createElement(\"div\");\n            }\n\n            var self = this;\n\n            config.requestUpdate = function () {\n              if (gantt.config.smart_rendering && !isLegacyRender(gantt)) {\n                if (self.renderers[config.id]) {\n                  self.onUpdateRequest(self.renderers[config.id]);\n                }\n              }\n            };\n          }\n\n          this._add(config);\n\n          return config ? config.id : undefined;\n        },\n        onUpdateRequest: function onUpdateRequest(layer) {},\n        eachLayer: function eachLayer(code) {\n          for (var i in this.renderers) {\n            code(this.renderers[i]);\n          }\n        },\n        removeLayer: function removeLayer(id) {\n          if (!this.renderers[id]) return;\n          this.renderers[id].destructor();\n          delete this.renderers[id];\n        },\n        clear: function clear() {\n          for (var i in this.renderers) {\n            this.renderers[i].destructor();\n          }\n\n          this.renderers = {};\n        } //,\n        //prepareConfig: prepareConfig\n\n      };\n      gantt.attachEvent(\"onDestroy\", function () {\n        renderGroup.clear();\n        renderGroup = null;\n      });\n      return renderGroup;\n    }\n  };\n};\n\nfunction mergeFilters(filter_methods) {\n  if (!(filter_methods instanceof Array)) {\n    filter_methods = Array.prototype.slice.call(arguments, 0);\n  }\n\n  return function (obj) {\n    var res = true;\n\n    for (var i = 0, len = filter_methods.length; i < len; i++) {\n      var filter_method = filter_methods[i];\n\n      if (filter_method) {\n        res = res && filter_method(obj.id, obj) !== false;\n      }\n    }\n\n    return res;\n  };\n}\n\nmodule.exports = layerFactory;","var createLayerFactory = require(\"./render/layer_engine\");\n\nvar getVisibleTaskRange = require(\"./render/viewport/get_visible_bars_range\");\n\nvar getVisibleLinksRangeFactory = require(\"./render/viewport/factory/get_visible_link_range\");\n\nvar isLinkInViewport = require(\"./render/viewport/is_link_in_viewport\");\n\nfunction initLayer(layer, gantt) {\n  if (!layer.view) {\n    return;\n  }\n\n  var view = layer.view;\n\n  if (typeof view === \"string\") {\n    view = gantt.$ui.getView(view);\n  }\n\n  if (view && view.attachEvent) {\n    view.attachEvent(\"onScroll\", function () {\n      var state = gantt.$services.getService(\"state\"); // don't repaint if we're inside batchUpdate, a complete repaint will be called afterwards\n\n      if (!state.getState(\"batchUpdate\").batch_update && !view.$config.$skipSmartRenderOnScroll) {\n        if (layer.requestUpdate) {\n          layer.requestUpdate();\n        }\n      }\n    });\n  }\n}\n\nvar createLayerEngine = function createLayerEngine(gantt) {\n  var factory = createLayerFactory(gantt);\n  return {\n    getDataRender: function getDataRender(name) {\n      return gantt.$services.getService(\"layer:\" + name) || null;\n    },\n    createDataRender: function createDataRender(config) {\n      var name = config.name,\n          defaultContainer = config.defaultContainer,\n          previusSiblingContainer = config.defaultContainerSibling;\n      var layers = factory.createGroup(defaultContainer, previusSiblingContainer, function (itemId, item) {\n        if (layers.filters) {\n          for (var i = 0; i < layers.filters.length; i++) {\n            if (layers.filters[i](itemId, item) === false) {\n              return false;\n            }\n          }\n        } else {\n          return true;\n        }\n      }, initLayer);\n      gantt.$services.setService(\"layer:\" + name, function () {\n        return layers;\n      });\n      gantt.attachEvent(\"onGanttReady\", function () {\n        layers.addLayer(); // init layers on start\n      });\n      return layers;\n    },\n    init: function init() {\n      var taskLayers = this.createDataRender({\n        name: \"task\",\n        defaultContainer: function defaultContainer() {\n          if (gantt.$task_data) {\n            return gantt.$task_data;\n          } else if (gantt.$ui.getView(\"timeline\")) {\n            return gantt.$ui.getView(\"timeline\").$task_data;\n          }\n        },\n        defaultContainerSibling: function defaultContainerSibling() {\n          if (gantt.$task_links) {\n            return gantt.$task_links;\n          } else if (gantt.$ui.getView(\"timeline\")) {\n            return gantt.$ui.getView(\"timeline\").$task_links;\n          }\n        },\n        filter: function filter(item) {}\n      }, gantt);\n      var linkLayers = this.createDataRender({\n        name: \"link\",\n        defaultContainer: function defaultContainer() {\n          if (gantt.$task_data) {\n            return gantt.$task_data;\n          } else if (gantt.$ui.getView(\"timeline\")) {\n            return gantt.$ui.getView(\"timeline\").$task_data;\n          }\n        }\n      }, gantt);\n      return {\n        addTaskLayer: function addTaskLayer(config) {\n          var rangeFunction = getVisibleTaskRange;\n\n          if (typeof config === \"function\") {\n            config = {\n              renderer: {\n                render: config,\n                getVisibleRange: rangeFunction\n              }\n            };\n          } else {\n            if (config.renderer && !config.renderer.getVisibleRange) {\n              config.renderer.getVisibleRange = rangeFunction;\n            }\n          }\n\n          config.view = \"timeline\";\n          return taskLayers.addLayer(config);\n        },\n        _getTaskLayers: function _getTaskLayers() {\n          return taskLayers.getLayers();\n        },\n        removeTaskLayer: function removeTaskLayer(id) {\n          taskLayers.removeLayer(id);\n        },\n        _clearTaskLayers: function _clearTaskLayers() {\n          taskLayers.clear();\n        },\n        addLinkLayer: function addLinkLayer(config) {\n          var rangeFunction = getVisibleLinksRangeFactory();\n\n          if (typeof config === \"function\") {\n            config = {\n              renderer: {\n                render: config,\n                getVisibleRange: rangeFunction\n              }\n            };\n          } else {\n            if (config.renderer && !config.renderer.getVisibleRange) {\n              config.renderer.getVisibleRange = rangeFunction;\n            }\n          }\n\n          config.view = \"timeline\";\n\n          if (config && config.renderer) {\n            if (!config.renderer.getRectangle && !config.renderer.isInViewPort) {\n              config.renderer.isInViewPort = isLinkInViewport;\n            }\n          }\n\n          return linkLayers.addLayer(config);\n        },\n        _getLinkLayers: function _getLinkLayers() {\n          return linkLayers.getLayers();\n        },\n        removeLinkLayer: function removeLinkLayer(id) {\n          linkLayers.removeLayer(id);\n        },\n        _clearLinkLayers: function _clearLinkLayers() {\n          linkLayers.clear();\n        }\n      };\n    }\n  };\n};\n\nmodule.exports = createLayerEngine;","var domHelpers = require(\"./utils/dom_helpers\");\n\nvar createMouseHandler = function (domHelpers) {\n  return function (gantt) {\n    var eventHandlers = {\n      \"click\": {},\n      \"doubleclick\": {},\n      \"contextMenu\": {}\n    };\n\n    function addEventTarget(event, className, handler, root) {\n      if (!eventHandlers[event][className]) {\n        eventHandlers[event][className] = [];\n      }\n\n      eventHandlers[event][className].push({\n        handler: handler,\n        root: root\n      });\n    }\n\n    function callHandler(eventName, className, root, args) {\n      var handlers = eventHandlers[eventName][className];\n\n      if (handlers) {\n        for (var i = 0; i < handlers.length; i++) {\n          if (!(root || handlers[i].root) || handlers[i].root === root) {\n            handlers[i].handler.apply(this, args);\n          }\n        }\n      }\n    }\n\n    function onClick(e) {\n      e = e || window.event;\n      var id = gantt.locate(e);\n      var handlers = findEventHandlers(e, eventHandlers.click);\n      var res = true;\n\n      if (id !== null) {\n        res = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\n      } else {\n        gantt.callEvent(\"onEmptyClick\", [e]);\n      }\n\n      if (res) {\n        var default_action = callEventHandlers(handlers, e, id);\n        if (!default_action) return; // GS-1025: if we don't do that, the dropdown or date select will be closed for unselected tasks\n        // GS-1078: or for the built-in select inline editor\n\n        switch (e.target.nodeName) {\n          case \"SELECT\":\n          case 'INPUT':\n            return;\n        } //allow task selection when the multiselect plugin is not enabled\n\n\n        if (id && gantt.getTask(id) && !gantt._multiselect && gantt.config.select_task) {\n          gantt.selectTask(id);\n        }\n      }\n    }\n\n    function onContextMenu(e) {\n      e = e || window.event;\n      var src = e.target || e.srcElement,\n          taskId = gantt.locate(src),\n          linkId = gantt.locate(src, gantt.config.link_attribute);\n      var res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\n\n      if (!res) {\n        if (e.preventDefault) e.preventDefault();else e.returnValue = false;\n      }\n\n      return res;\n    }\n\n    function findEventHandlers(e, hash) {\n      var trg = e.target || e.srcElement;\n      var handlers = [];\n\n      while (trg) {\n        var css = domHelpers.getClassName(trg);\n\n        if (css) {\n          css = css.split(\" \");\n\n          for (var i = 0; i < css.length; i++) {\n            if (!css[i]) continue;\n\n            if (hash[css[i]]) {\n              var delegateHandlers = hash[css[i]];\n\n              for (var h = 0; h < delegateHandlers.length; h++) {\n                if (delegateHandlers[h].root) {\n                  if (!domHelpers.isChildOf(trg, delegateHandlers[h].root)) {\n                    continue;\n                  }\n                }\n\n                handlers.push(delegateHandlers[h].handler);\n              }\n            }\n          }\n        }\n\n        trg = trg.parentNode;\n      }\n\n      return handlers;\n    }\n\n    function callEventHandlers(handlers, e, id) {\n      var res = true;\n\n      for (var i = 0; i < handlers.length; i++) {\n        var handlerResult = handlers[i].call(gantt, e, id, e.target || e.srcElement);\n        res = res && !(typeof handlerResult != \"undefined\" && handlerResult !== true);\n      }\n\n      return res;\n    }\n\n    function onDoubleClick(e) {\n      e = e || window.event;\n      var id = gantt.locate(e);\n      var handlers = findEventHandlers(e, eventHandlers.doubleclick); // when doubleclick fired not on task, id === null\n\n      var res = !gantt.checkEvent(\"onTaskDblClick\") || id === null || gantt.callEvent(\"onTaskDblClick\", [id, e]);\n\n      if (res) {\n        var default_action = callEventHandlers(handlers, e, id);\n        if (!default_action) return;\n\n        if (id !== null && gantt.getTask(id)) {\n          if (res && gantt.config.details_on_dblclick && !gantt.isReadonly(id)) {\n            gantt.showLightbox(id);\n          }\n        }\n      }\n    }\n\n    function onMouseMove(e) {\n      if (gantt.checkEvent(\"onMouseMove\")) {\n        var id = gantt.locate(e);\n        gantt._last_move_event = e;\n        gantt.callEvent(\"onMouseMove\", [id, e]);\n      }\n    }\n\n    function detach(eventName, className, handler, root) {\n      if (eventHandlers[eventName] && eventHandlers[eventName][className]) {\n        var handlers = eventHandlers[eventName];\n        var elementHandlers = handlers[className];\n\n        for (var i = 0; i < elementHandlers.length; i++) {\n          if (elementHandlers[i].root == root) {\n            elementHandlers.splice(i, 1);\n            i--;\n          }\n        }\n\n        if (!elementHandlers.length) {\n          delete handlers[className];\n        }\n      }\n    }\n\n    var domEvents = gantt._createDomEventScope();\n\n    function reset(node) {\n      domEvents.detachAll();\n\n      if (node) {\n        domEvents.attach(node, \"click\", onClick);\n        domEvents.attach(node, \"dblclick\", onDoubleClick);\n        domEvents.attach(node, \"mousemove\", onMouseMove);\n        domEvents.attach(node, \"contextmenu\", onContextMenu);\n      }\n    }\n\n    return {\n      reset: reset,\n      global: function global(event, classname, handler) {\n        addEventTarget(event, classname, handler, null);\n      },\n      delegate: addEventTarget,\n      detach: detach,\n      callHandler: callHandler,\n      onDoubleClick: onDoubleClick,\n      onMouseMove: onMouseMove,\n      onContextMenu: onContextMenu,\n      onClick: onClick,\n      destructor: function destructor() {\n        reset();\n        eventHandlers = null;\n        domEvents = null;\n      }\n    };\n  };\n}(domHelpers);\n\nmodule.exports = {\n  init: createMouseHandler\n};","var utils = require(\"../../utils/utils\");\n\nfunction extendSettings(store, parentSettings) {\n  var own = this.$config[store];\n\n  if (own) {\n    if (!own.$extendedConfig) {\n      own.$extendedConfig = true;\n      Object.setPrototypeOf(own, parentSettings);\n    }\n\n    return own;\n  } else {\n    return parentSettings;\n  }\n}\n\nvar configurable = function configurable(parentView) {\n  var parentConfig, parentTemplates;\n  return {\n    $getConfig: function $getConfig() {\n      if (!parentConfig) {\n        parentConfig = parentView ? parentView.$getConfig() : this.$gantt.config;\n      }\n\n      if (!this.$config.config) {\n        return parentConfig;\n      } else {\n        return extendSettings.call(this, \"config\", parentConfig);\n      }\n    },\n    $getTemplates: function $getTemplates() {\n      if (!parentTemplates) {\n        parentTemplates = parentView ? parentView.$getTemplates() : this.$gantt.templates;\n      }\n\n      if (!this.$config.templates) {\n        return parentTemplates;\n      } else {\n        return extendSettings.call(this, \"templates\", parentTemplates);\n      }\n    }\n  };\n};\n\nmodule.exports = function (obj, parent) {\n  utils.mixin(obj, configurable(parent));\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar utils = require(\"../../utils/utils\"),\n    configurable = require(\"./configurable\");\n\nvar uiFactory = function createFactory(gantt) {\n  var views = {};\n\n  function ui(cell, parentView) {\n    var content;\n    var view = \"cell\";\n\n    if (cell.view) {\n      view = \"viewcell\";\n    } else if (cell.resizer) {\n      view = \"resizer\";\n    } else if (cell.rows || cell.cols) {\n      view = \"layout\";\n    } else if (cell.views) {\n      view = \"multiview\";\n    }\n\n    content = createView.call(this, view, null, cell, parentView);\n    return content;\n  }\n\n  var createdViews = {};\n\n  function createView(name, parent, config, parentView) {\n    var creator = views[name];\n    if (!creator || !creator.create) return false;\n\n    if (name == \"resizer\" && !config.mode) {\n      if (parentView.$config.cols) {\n        config.mode = \"x\";\n      } else {\n        config.mode = \"y\";\n      }\n    }\n\n    if (name == \"viewcell\" && config.view == \"scrollbar\" && !config.scroll) {\n      if (parentView.$config.cols) {\n        config.scroll = \"y\";\n      } else {\n        config.scroll = \"x\";\n      }\n    }\n\n    var config = utils.copy(config);\n\n    if (!config.id && !createdViews[config.view]) {\n      config.id = config.view;\n    }\n\n    if (config.id && !config.css) {\n      config.css = config.id + \"_cell\";\n    }\n\n    var view = new creator.create(parent, config, this, gantt);\n\n    if (creator.configure) {\n      creator.configure(view);\n    }\n\n    configurable(view, parentView);\n\n    if (!view.$id) {\n      view.$id = config.id || gantt.uid();\n    }\n\n    if (!view.$parent && _typeof(parent) == \"object\") {\n      view.$parent = parent;\n    }\n\n    if (!view.$config) {\n      view.$config = config;\n    }\n\n    if (createdViews[view.$id]) {\n      view.$id = gantt.uid();\n    }\n\n    createdViews[view.$id] = view;\n    return view;\n  }\n\n  function reset() {\n    createdViews = {};\n  }\n\n  function register(name, viewConstructor, configure) {\n    views[name] = {\n      create: viewConstructor,\n      configure: configure\n    };\n  }\n\n  function getView(id) {\n    return createdViews[id];\n  }\n\n  var factory = {\n    initUI: ui,\n    reset: reset,\n    registerView: register,\n    createView: createView,\n    getView: getView\n  };\n  return factory;\n};\n\nmodule.exports = {\n  createFactory: uiFactory\n};","var uiFactory = require(\"./ui_factory\"),\n    mouseEvents = require(\"./mouse\"),\n    createLayers = require(\"./gantt_layers\"),\n    Cell = require(\"./layout/cell\"),\n    Layout = require(\"./layout/layout\"),\n    ViewLayout = require(\"./layout/view_layout\"),\n    ViewCell = require(\"./layout/view_cell\"),\n    Resizer = require(\"./layout/resizer_cell\"),\n    Scrollbar = require(\"./layout/scrollbar_cell\"),\n    Timeline = require(\"./timeline/timeline\"),\n    Grid = require(\"./grid/grid\"),\n    ResourceGrid = require(\"./grid/resource_grid\"),\n    ResourceTimeline = require(\"./timeline/resource_timeline\"),\n    ResourceHistogram = require(\"./timeline/resource_histogram\");\n\nvar gridEditorsFactory = require(\"./grid/editors/controller\");\n\nvar renderTaskBar = require(\"./render/task_bar_smart_render\"),\n    renderSplitTaskBar = require(\"./render/task_split_render\"),\n    renderRollupTaskBar = require(\"./render/task_rollup_render\"),\n    renderTaskBg = require(\"./render/task_bg_render\"),\n    renderLink = require(\"./render/link_render\"),\n    gridRenderer = require(\"./render/task_grid_line_render\"),\n    resourceMatrixRenderer = require(\"./render/resource_matrix_render\"),\n    resourceHistogramRenderer = require(\"./render/resource_histogram_render\"),\n    gridTaskRowResizerRenderer = require(\"./render/task_grid_row_resize_render\");\n\nvar mainGridInitializer = require(\"./grid/main_grid_initializer\");\n\nvar mainTimelineInitializer = require(\"./timeline/main_timeline_initializer\");\n\nvar mainLayoutInitializer = require(\"./main_layout_initializer\");\n\nfunction initUI(gantt) {\n  function attachInitializer(view, initializer) {\n    var ext = initializer(gantt);\n    if (ext.onCreated) ext.onCreated(view);\n    view.attachEvent(\"onReady\", function () {\n      if (ext.onInitialized) ext.onInitialized(view);\n    });\n    view.attachEvent(\"onDestroy\", function () {\n      if (ext.onDestroyed) ext.onDestroyed(view);\n    });\n  }\n\n  var factory = uiFactory.createFactory(gantt);\n  factory.registerView(\"cell\", Cell);\n  factory.registerView(\"resizer\", Resizer);\n  factory.registerView(\"scrollbar\", Scrollbar);\n  factory.registerView(\"layout\", Layout, function (view) {\n    var id = view.$config ? view.$config.id : null;\n\n    if (id === \"main\") {\n      attachInitializer(view, mainLayoutInitializer);\n    }\n  });\n  factory.registerView(\"viewcell\", ViewCell);\n  factory.registerView(\"multiview\", ViewLayout);\n  factory.registerView(\"timeline\", Timeline, function (view) {\n    var id = view.$config ? view.$config.id : null;\n\n    if (id === \"timeline\" || view.$config.bind == \"task\") {\n      attachInitializer(view, mainTimelineInitializer);\n    }\n  });\n  factory.registerView(\"grid\", Grid, function (view) {\n    var id = view.$config ? view.$config.id : null;\n\n    if (id === \"grid\" || view.$config.bind == \"task\") {\n      attachInitializer(view, mainGridInitializer);\n    }\n  });\n  factory.registerView(\"resourceGrid\", ResourceGrid);\n  factory.registerView(\"resourceTimeline\", ResourceTimeline);\n  factory.registerView(\"resourceHistogram\", ResourceHistogram);\n  var layersEngine = createLayers(gantt);\n  var inlineEditors = gridEditorsFactory(gantt);\n  gantt.ext.inlineEditors = inlineEditors;\n  gantt.ext._inlineEditors = inlineEditors;\n  inlineEditors.init(gantt);\n  return {\n    factory: factory,\n    mouseEvents: mouseEvents.init(gantt),\n    layersApi: layersEngine.init(),\n    render: {\n      gridLine: function gridLine() {\n        return gridRenderer(gantt);\n      },\n      taskBg: function taskBg() {\n        return renderTaskBg(gantt);\n      },\n      taskBar: function taskBar() {\n        return renderTaskBar(gantt);\n      },\n      taskRollupBar: function taskRollupBar() {\n        return renderRollupTaskBar(gantt);\n      },\n      taskSplitBar: function taskSplitBar() {\n        return renderSplitTaskBar(gantt);\n      },\n      link: function link() {\n        return renderLink(gantt);\n      },\n      resourceRow: function resourceRow() {\n        return resourceMatrixRenderer(gantt);\n      },\n      resourceHistogram: function resourceHistogram() {\n        return resourceHistogramRenderer(gantt);\n      },\n      gridTaskRowResizer: function gridTaskRowResizer() {\n        return gridTaskRowResizerRenderer(gantt);\n      }\n    },\n    layersService: {\n      getDataRender: function getDataRender(name) {\n        return layersEngine.getDataRender(name, gantt);\n      },\n      createDataRender: function createDataRender(config) {\n        return layersEngine.createDataRender(config, gantt);\n      }\n    }\n  };\n}\n\nmodule.exports = {\n  init: initUI\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar utils = require(\"../../utils/utils\");\n\nvar domHelpers = require(\"./utils/dom_helpers\");\n\nmodule.exports = function (gantt) {\n  var boxAttribute = \"data-dhxbox\";\n  var _dhx_msg_cfg = null;\n\n  function callback(config, result) {\n    var usercall = config.callback;\n    modalBox.hide(config.box);\n    _dhx_msg_cfg = config.box = null;\n    if (usercall) usercall(result);\n  }\n\n  function modal_key(event) {\n    if (_dhx_msg_cfg) {\n      var code = event.which || event.keyCode;\n      var preventDefault = false;\n\n      if (messageBox.keyboard) {\n        if (code == 13 || code == 32) {\n          // default behavior is to confirm/submit popup on space/enter\n          // if browser focus is set on button element - do button click instead of default behavior\n          var target = event.target || event.srcElement;\n\n          if (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\n            target.click();\n          } else {\n            callback(_dhx_msg_cfg, true);\n            preventDefault = true;\n          }\n        }\n\n        if (code == 27) {\n          callback(_dhx_msg_cfg, false);\n          preventDefault = true;\n        }\n      }\n\n      if (preventDefault) {\n        if (event.preventDefault) {\n          event.preventDefault();\n        }\n\n        return !(event.cancelBubble = true);\n      }\n\n      return;\n    }\n  }\n\n  var eventElement = domHelpers.getRootNode(gantt.$root) || document;\n  gantt.event(eventElement, \"keydown\", modal_key, true);\n\n  function modality(mode) {\n    if (!modality.cover) {\n      modality.cover = document.createElement(\"div\"); //necessary for IE only\n\n      modality.cover.onkeydown = modal_key;\n      modality.cover.className = \"dhx_modal_cover\";\n      document.body.appendChild(modality.cover);\n    }\n\n    modality.cover.style.display = mode ? \"inline-block\" : \"none\";\n  }\n\n  function button(text, className, result) {\n    var buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\n\n    var name = className.toLowerCase().replace(/ /g, \"_\");\n    var button_css = \"gantt_\" + name + \"_button\";\n    return \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button \" + button_css + \"' data-result='\" + result + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\n  }\n\n  function info(text) {\n    if (!messageBox.area) {\n      messageBox.area = document.createElement(\"div\");\n      messageBox.area.className = \"gantt_message_area\";\n      messageBox.area.style[messageBox.position] = \"5px\";\n      document.body.appendChild(messageBox.area);\n    }\n\n    messageBox.hide(text.id);\n    var message = document.createElement(\"div\");\n    message.innerHTML = \"<div>\" + text.text + \"</div>\";\n    message.className = \"gantt-info gantt-\" + text.type;\n\n    message.onclick = function () {\n      messageBox.hide(text.id);\n      text = null;\n    };\n\n    gantt._waiAria.messageInfoAttr(message);\n\n    if (messageBox.position == \"bottom\" && messageBox.area.firstChild) messageBox.area.insertBefore(message, messageBox.area.firstChild);else messageBox.area.appendChild(message);\n    if (text.expire > 0) messageBox.timers[text.id] = window.setTimeout(function () {\n      // GS-1213: We need that when Gantt is destroyed\n      if (messageBox) messageBox.hide(text.id);\n    }, text.expire);\n    messageBox.pull[text.id] = message;\n    message = null;\n    return text.id;\n  }\n\n  function getFirstDefined() {\n    var values = [].slice.apply(arguments, [0]);\n\n    for (var i = 0; i < values.length; i++) {\n      if (values[i]) {\n        return values[i];\n      }\n    }\n  }\n\n  function _boxStructure(config, ok, cancel) {\n    var box = document.createElement(\"div\");\n    var contentId = utils.uid();\n\n    gantt._waiAria.messageModalAttr(box, contentId);\n\n    box.className = \" gantt_modal_box gantt-\" + config.type;\n    box.setAttribute(boxAttribute, 1);\n    var inner = '';\n    if (config.width) box.style.width = config.width;\n    if (config.height) box.style.height = config.height;\n    if (config.title) inner += '<div class=\"gantt_popup_title\">' + config.title + '</div>';\n    inner += '<div class=\"gantt_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls\">';\n    if (ok) inner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\n    if (cancel) inner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\n\n    if (config.buttons) {\n      for (var i = 0; i < config.buttons.length; i++) {\n        var btn = config.buttons[i];\n\n        if (_typeof(btn) == \"object\") {\n          // Support { label:\"Save\", css:\"main_button\", value:\"save\" }\n          var label = btn.label;\n          var css = btn.css || \"gantt_\" + btn.label.toLowerCase() + \"_button\";\n          var value = btn.value || i;\n          inner += button(label, css, value);\n        } else {\n          inner += button(btn, btn, i);\n        }\n      }\n    }\n\n    inner += '</div>';\n    box.innerHTML = inner;\n\n    if (config.content) {\n      var node = config.content;\n      if (typeof node == \"string\") node = document.getElementById(node);\n      if (node.style.display == 'none') node.style.display = \"\";\n      box.childNodes[config.title ? 1 : 0].appendChild(node);\n    }\n\n    box.onclick = function (event) {\n      var source = event.target || event.srcElement;\n      if (!source.className) source = source.parentNode;\n\n      if (domHelpers.closest(source, \".gantt_popup_button\")) {\n        var result = source.getAttribute(\"data-result\");\n        result = result == \"true\" || (result == \"false\" ? false : result);\n        callback(config, result);\n      }\n    };\n\n    config.box = box;\n    if (ok || cancel) _dhx_msg_cfg = config;\n    return box;\n  }\n\n  function _createBox(config, ok, cancel) {\n    var box = config.tagName ? config : _boxStructure(config, ok, cancel);\n    if (!config.hidden) modality(true);\n    document.body.appendChild(box);\n    var x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\n    var y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\n    if (config.position == \"top\") box.style.top = \"-3px\";else box.style.top = y + 'px';\n    box.style.left = x + 'px'; //necessary for IE only\n\n    box.onkeydown = modal_key;\n    modalBox.focus(box);\n    if (config.hidden) modalBox.hide(box);\n    gantt.callEvent(\"onMessagePopup\", [box]);\n    return box;\n  }\n\n  function alertPopup(config) {\n    return _createBox(config, true, false);\n  }\n\n  function confirmPopup(config) {\n    return _createBox(config, true, true);\n  }\n\n  function boxPopup(config) {\n    return _createBox(config);\n  }\n\n  function box_params(text, type, callback) {\n    if (_typeof(text) != \"object\") {\n      if (typeof type == \"function\") {\n        callback = type;\n        type = \"\";\n      }\n\n      text = {\n        text: text,\n        type: type,\n        callback: callback\n      };\n    }\n\n    return text;\n  }\n\n  function params(text, type, expire, id) {\n    if (_typeof(text) != \"object\") text = {\n      text: text,\n      type: type,\n      expire: expire,\n      id: id\n    };\n    text.id = text.id || utils.uid();\n    text.expire = text.expire || messageBox.expire;\n    return text;\n  }\n\n  var alertBox = function alertBox() {\n    var text = box_params.apply(this, arguments);\n    text.type = text.type || \"confirm\";\n    return alertPopup(text);\n  };\n\n  var confirmBox = function confirmBox() {\n    var text = box_params.apply(this, arguments);\n    text.type = text.type || \"alert\";\n    return confirmPopup(text);\n  };\n\n  var modalBox = function modalBox() {\n    var text = box_params.apply(this, arguments);\n    text.type = text.type || \"alert\";\n    return boxPopup(text);\n  };\n\n  modalBox.hide = function (node) {\n    while (node && node.getAttribute && !node.getAttribute(boxAttribute)) {\n      node = node.parentNode;\n    }\n\n    if (node) {\n      node.parentNode.removeChild(node);\n      modality(false);\n      gantt.callEvent(\"onAfterMessagePopup\", [node]);\n    }\n  };\n\n  modalBox.focus = function (node) {\n    setTimeout(function () {\n      var focusable = domHelpers.getFocusableNodes(node);\n\n      if (focusable.length) {\n        if (focusable[0].focus) focusable[0].focus();\n      }\n    }, 1);\n  };\n\n  var messageBox = function messageBox(text, type, expire, id) {\n    text = params.apply(this, arguments);\n    text.type = text.type || \"info\";\n    var subtype = text.type.split(\"-\")[0];\n\n    switch (subtype) {\n      case \"alert\":\n        return alertPopup(text);\n\n      case \"confirm\":\n        return confirmPopup(text);\n\n      case \"modalbox\":\n        return boxPopup(text);\n\n      default:\n        return info(text);\n    }\n  };\n\n  messageBox.seed = new Date().valueOf();\n  messageBox.uid = utils.uid;\n  messageBox.expire = 4000;\n  messageBox.keyboard = true;\n  messageBox.position = \"top\";\n  messageBox.pull = {};\n  messageBox.timers = {};\n\n  messageBox.hideAll = function () {\n    for (var key in messageBox.pull) {\n      messageBox.hide(key);\n    }\n  };\n\n  messageBox.hide = function (id) {\n    var obj = messageBox.pull[id];\n\n    if (obj && obj.parentNode) {\n      window.setTimeout(function () {\n        obj.parentNode.removeChild(obj);\n        obj = null;\n      }, 2000);\n      obj.className += \" hidden\";\n      if (messageBox.timers[id]) window.clearTimeout(messageBox.timers[id]);\n      delete messageBox.pull[id];\n    }\n  };\n\n  var popups = [];\n  gantt.attachEvent(\"onMessagePopup\", function (box) {\n    popups.push(box);\n  });\n  gantt.attachEvent(\"onAfterMessagePopup\", function (box) {\n    for (var i = 0; i < popups.length; i++) {\n      if (popups[i] === box) {\n        popups.splice(i, 1);\n        i--;\n      }\n    }\n  });\n  gantt.attachEvent(\"onDestroy\", function () {\n    if (modality.cover && modality.cover.parentNode) {\n      modality.cover.parentNode.removeChild(modality.cover);\n    }\n\n    for (var i = 0; i < popups.length; i++) {\n      if (popups[i].parentNode) {\n        popups[i].parentNode.removeChild(popups[i]);\n      }\n    }\n\n    popups = null;\n\n    if (messageBox.area && messageBox.area.parentNode) {\n      messageBox.area.parentNode.removeChild(messageBox.area);\n    }\n\n    messageBox = null;\n  });\n  return {\n    alert: alertBox,\n    confirm: confirmBox,\n    message: messageBox,\n    modalbox: modalBox\n  };\n};","module.exports = function (gantt) {\n  var utils = require(\"../utils/utils\");\n\n  var env = require(\"../utils/env\");\n\n  var isHeadless = require(\"../utils/is_headless\");\n\n  if (!env.isNode) {\n    var domHelpers = require(\"./ui/utils/dom_helpers\");\n\n    var codeHelpers = require(\"../utils/helpers\");\n\n    gantt.utils = {\n      arrayFind: codeHelpers.arrayFind,\n      dom: domHelpers\n    };\n\n    var domEvents = require(\"./ui/utils/dom_event_scope\")();\n\n    gantt.event = domEvents.attach;\n    gantt.eventRemove = domEvents.detach;\n    gantt._eventRemoveAll = domEvents.detachAll;\n    gantt._createDomEventScope = domEvents.extend;\n    utils.mixin(gantt, require(\"./ui/message\")(gantt));\n\n    var uiApi = require(\"./ui/index\").init(gantt);\n\n    gantt.$ui = uiApi.factory;\n    gantt.$ui.layers = uiApi.render;\n    gantt.$mouseEvents = uiApi.mouseEvents;\n    gantt.$services.setService(\"mouseEvents\", function () {\n      return gantt.$mouseEvents;\n    });\n    gantt.mixin(gantt, uiApi.layersApi);\n\n    require(\"./data_task_layers\")(gantt);\n\n    gantt.$services.setService(\"layers\", function () {\n      return uiApi.layersService;\n    });\n\n    var createLayoutFacade = require(\"./facades/layout\");\n\n    gantt.mixin(gantt, createLayoutFacade());\n\n    require(\"./ui/skin\")(gantt);\n\n    require(\"../css/skins/skyblue\")(gantt);\n\n    require(\"../css/skins/meadow\")(gantt);\n\n    require(\"../css/skins/terrace\")(gantt);\n\n    require(\"../css/skins/broadway\")(gantt);\n\n    require(\"../css/skins/material\")(gantt);\n\n    require(\"../css/skins/contrast_black\")(gantt);\n\n    require(\"../css/skins/contrast_white\")(gantt);\n\n    require(\"./ui/plugins\")(gantt);\n\n    require(\"./ui/touch\")(gantt);\n\n    require(\"./ui/lightbox\")(gantt);\n\n    require(\"./ui/lightbox/lightbox_optional_time\")(gantt);\n\n    require(\"./ui/wai_aria\")(gantt);\n\n    gantt.locate = function (e) {\n      var trg = domHelpers.getTargetNode(e); // ignore empty rows/cells of the timeline\n\n      if (domHelpers.closest(trg, \".gantt_task_row\")) {\n        return null;\n      }\n\n      var targetAttribute = arguments[1] || this.config.task_attribute;\n      var node = domHelpers.locateAttribute(trg, targetAttribute);\n\n      if (node) {\n        return node.getAttribute(targetAttribute);\n      } else {\n        return null;\n      }\n    };\n\n    gantt._locate_css = function (e, classname, strict) {\n      return domHelpers.locateClassName(e, classname, strict);\n    };\n\n    gantt._locateHTML = function (e, attribute) {\n      return domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\n    };\n  }\n\n  gantt.attachEvent(\"onParse\", function () {\n    if (!isHeadless(gantt)) {\n      gantt.attachEvent(\"onGanttRender\", function () {\n        if (gantt.config.initial_scroll) {\n          var firstTask = gantt.getTaskByIndex(0);\n          var id = firstTask ? firstTask.id : gantt.config.root_id; // GS-1450. Don't scroll to the task if there is no timeline\n\n          if (gantt.isTaskExists(id) && gantt.$task && gantt.utils.dom.isChildOf(gantt.$task, gantt.$container)) {\n            gantt.showTask(id);\n          }\n        }\n      }, {\n        once: true\n      });\n    }\n  });\n  gantt.attachEvent(\"onBeforeGanttReady\", function () {\n    if (!this.config.scroll_size) this.config.scroll_size = domHelpers.getScrollSize() || 1;\n\n    if (!isHeadless(gantt)) {\n      // detach listeners before clearing old DOM, possible IE errors when accessing detached nodes\n      this._eventRemoveAll();\n\n      this.$mouseEvents.reset();\n      this.resetLightbox();\n    }\n  }); // GS-1261: scroll the views to the right side when RTL is enabled\n\n  gantt.attachEvent(\"onGanttReady\", function () {\n    if (!isHeadless(gantt) && gantt.config.rtl) {\n      gantt.$layout.getCellsByType(\"viewCell\").forEach(function (cell) {\n        var attachedScrollbar = cell.$config.scrollX;\n        if (!attachedScrollbar) return;\n        var scrollbar = gantt.$ui.getView(attachedScrollbar);\n        if (scrollbar) scrollbar.scrollTo(scrollbar.$config.scrollSize, 0);\n      });\n    }\n  }); // GS-1649: check if extensions are connected via files\n\n  gantt.attachEvent(\"onGanttReady\", function () {\n    if (!isHeadless(gantt)) {\n      var activePlugins = gantt.plugins();\n      var availablePlugins = {\n        auto_scheduling: gantt.autoSchedule,\n        click_drag: gantt.ext.clickDrag,\n        critical_path: gantt.isCriticalTask,\n        drag_timeline: gantt.ext.dragTimeline,\n        export_api: gantt.exportToPDF,\n        fullscreen: gantt.ext.fullscreen,\n        grouping: gantt.groupBy,\n        keyboard_navigation: gantt.ext.keyboardNavigation,\n        marker: gantt.addMarker,\n        multiselect: gantt.eachSelectedTask,\n        overlay: gantt.ext.overlay,\n        quick_info: gantt.templates.quick_info_content,\n        tooltip: gantt.ext.tooltips,\n        undo: gantt.undo\n      };\n\n      for (var plugin in availablePlugins) {\n        if (availablePlugins[plugin] && !activePlugins[plugin]) {\n          // eslint-disable-next-line no-console\n          console.warn(\"You connected the '\".concat(plugin, \"' extension via an obsolete file. \\nTo fix it, you need to remove the obsolete file and connect the extension via the plugins method: https://docs.dhtmlx.com/gantt/api__gantt_plugins.html\"));\n        }\n      }\n    }\n  });\n};","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"'\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", //   .   ?\r\n\t\tconfirm_deleting: \"  .  ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n * updated by @levkar at https://github.com/DHTMLX/gantt/pull/10\r\n */\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Ocak\", \"ubat\", \"Mart\", \"Nisan\", \"Mays\", \"Haziran\", \"Temmuz\", \"Austos\", \"Eyll\", \"Ekim\", \"Kasm\", \"Aralk\"],\r\n\t\tmonth_short: [\"Oca\", \"ub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"Au\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\r\n\t\tday_full: [\"Pazar\", \"Pazartesi\", \"Sal\", \"aramba\", \"Perembe\", \"Cuma\", \"Cumartesi\"],\r\n\t\tday_short: [\"Paz\", \"Pzt\", \"Sal\", \"ar\", \"Per\", \"Cum\", \"Cmt\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Yeni grev\",\r\n\t\ticon_save: \"Kaydet\",\r\n\t\ticon_cancel: \"ptal\",\r\n\t\ticon_details: \"Detaylar\",\r\n\t\ticon_edit: \"Dzenle\",\r\n\t\ticon_delete: \"Sil\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Grev silinecek, emin misiniz?\",\r\n\t\tsection_description: \"Aklama\",\r\n\t\tsection_time: \"Zaman Aral\",\r\n\t\tsection_type: \"Tip\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Grev Ad\",\r\n\t\tcolumn_start_date: \"Balang\",\r\n\t\tcolumn_duration: \"Sre\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Balant\",\r\n\t\tconfirm_link_deleting: \"silinecek\",\r\n\t\tlink_start: \" (balang)\",\r\n\t\tlink_end: \" (biti)\",\r\n\r\n\t\ttype_task: \"Grev\",\r\n\t\ttype_project: \"Proje\",\r\n\t\ttype_milestone: \"Kilometreta\",\r\n\r\n\r\n\t\tminutes: \"Dakika\",\r\n\t\thours: \"Saat\",\r\n\t\tdays: \"Gn\",\r\n\t\tweeks: \"Hafta\",\r\n\t\tmonths: \"Ay\",\r\n\t\tyears: \"Yl\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"ptal\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n\tTranslation by Peter Eriksson\r\n */\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Mars\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"Augusti\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Sndag\", \"Mndag\", \"Tisdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Mn\", \"Tis\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny uppgift\",\r\n\t\ticon_save: \"Spara\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detajer\",\r\n\t\ticon_edit: \"ndra\",\r\n\t\ticon_delete: \"Ta bort\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \"r du sker p att du vill ta bort hndelsen permanent?\",\r\n\t\tsection_description: \"Beskrivning\",\r\n\t\tsection_time: \"Tid\",\r\n\t\tsection_type: \"Typ\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Uppgiftsnamn\",\r\n\t\tcolumn_start_date: \"Starttid\",\r\n\t\tcolumn_duration: \"Varaktighet\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\r\n\t\tlink: \"Lnk\",\r\n\t\tconfirm_link_deleting: \"kommer tas bort\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (slut)\",\r\n\t\ttype_task: \"Uppgift\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milstolpe\",\r\n\r\n\t\tminutes: \"Minuter\",\r\n\t\thours: \"Timmar\",\r\n\t\tdays: \"Dagar\",\r\n\t\tweeks: \"Veckor\",\r\n\t\tmonths: \"Mnader\",\r\n\t\tyears: \"r\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janur\", \"Februr\", \"Marec\", \"Aprl\", \"Mj\", \"Jn\", \"Jl\", \"August\", \"September\", \"Oktber\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mj\", \"Jn\", \"Jl\", \"Aug\", \"Sept\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Nedea\", \"Pondelok\", \"Utorok\", \"Streda\", \"tvrtok\", \"Piatok\", \"Sobota\"],\r\n\t\tday_short: [\"Ne\", \"Po\", \"Ut\", \"St\", \"t\", \"Pi\", \"So\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nov loha\",\r\n\t\ticon_save: \"Uloi\",\r\n\t\ticon_cancel: \"Sp\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edituj\",\r\n\t\ticon_delete: \"Zmaza\",\r\n\t\tconfirm_closing: \"Vae zmeny nebud uloen. Skutone?\", // Vae zmny budou ztraceny, opravdu ?\r\n\t\tconfirm_deleting: \"Udalos bude natrvalo vymazan. Skutone?\",\r\n\t\tsection_description: \"Poznmky\",\r\n\t\tsection_time: \"Doba platnosti\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Sp\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marec\", \"April\", \"Maj\", \"Junij\", \"Julij\", \"Avgust\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Nedelja\", \"Ponedeljek\", \"Torek\", \"Sreda\", \"etrtek\", \"Petek\", \"Sobota\"],\r\n\t\tday_short: [\"Ned\", \"Pon\", \"Tor\", \"Sre\", \"et\", \"Pet\", \"Sob\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova naloga\",\r\n\t\ticon_save: \"Shrani\",\r\n\t\ticon_cancel: \"Preklii\",\r\n\t\ticon_details: \"Podrobnosti\",\r\n\t\ticon_edit: \"Uredi\",\r\n\t\ticon_delete: \"Izbrii\",\r\n\t\tconfirm_closing: \"\", // Spremembe ne bodo shranjene. elite nadaljevati ?\r\n\t\tconfirm_deleting: \"Dogodek bo izbrisan. elite nadaljevati?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"asovni okvir\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Preklii\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"O\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"Ma\", \"A\", \"Ma\", \"\", \"\", \"A\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", //    , ?\r\n\t\tconfirm_deleting: \"   , ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \" \",\r\n\t\tlink_start: \" ()\",\r\n\t\tlink_end: \" ()\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"    \",\r\n\t\tresources_filter_label: \"  \",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n\tTraducere de Ovidiu Lixandru: http://www.madball.ro\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Ianuarie\", \"Februarie\", \"Martie\", \"Aprilie\", \"Mai\", \"Iunie\", \"Iulie\", \"August\", \"Septembrie\", \"Octombrie\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Ian\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Iun\", \"Iul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Duminica\", \"Luni\", \"Marti\", \"Miercuri\", \"Joi\", \"Vineri\", \"Sambata\"],\r\n\t\tday_short: [\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sa\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Sarcina noua\",\r\n\t\ticon_save: \"Salveaza\",\r\n\t\ticon_cancel: \"Anuleaza\",\r\n\t\ticon_details: \"Detalii\",\r\n\t\ticon_edit: \"Editeaza\",\r\n\t\ticon_delete: \"Sterge\",\r\n\t\tconfirm_closing: \"Schimbarile nu vor fi salvate, esti sigur?\",// Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Evenimentul va fi sters permanent, esti sigur?\",\r\n\t\tsection_description: \"Descriere\",\r\n\t\tsection_time: \"Interval\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Anuleaza\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n\r\n TRANSLATION BY MATTHEUS PIROVANI RORIZ GONALVES\r\n\r\n mattheusroriz@hotmail.com / mattheus.pirovani@gmail.com /\r\n\r\n www.atrixian.com.br\r\n\r\n\r\n Updated by Jorge Albernaz Martins\r\n\r\n jorgefox@hotmail.com\r\n\r\n www.redfox.inf.br\r\n\r\n JorgeFox\r\n\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janeiro\", \"Fevereiro\", \"Maro\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\r\n\t\tmonth_short: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\r\n\t\tday_full: [\"Domingo\", \"Segunda\", \"Tera\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sbado\"],\r\n\t\tday_short: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova tarefa\",\r\n\t\ticon_save: \"Salvar\",\r\n\t\ticon_cancel: \"Cancelar\",\r\n\t\ticon_details: \"Detalhes\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Excluir\",\r\n\t\tconfirm_closing: \"\",// Suas alteraes sero perdidas, confirme?\r\n\t\tconfirm_deleting: \"As tarefas sero excluidas permanentemente, confirme?\",\r\n\t\tsection_description: \"Descrio\",\r\n\t\tsection_time: \"Perodo\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"EAP\",\r\n\t\tcolumn_text: \"Nome tarefa\",\r\n\t\tcolumn_start_date: \"Data incio\",\r\n\t\tcolumn_duration: \"Durao\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"Ser excludo!\",\r\n\t\tlink_start: \" (incio)\",\r\n\t\tlink_end: \" (fim)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Projeto\",\r\n\t\ttype_milestone: \"Marco\",\r\n\r\n\r\n\t\tminutes: \"Minutos\",\r\n\t\thours: \"Horas\",\r\n\t\tdays: \"Dias\",\r\n\t\tweeks: \"Semanas\",\r\n\t\tmonths: \"Meses\",\r\n\t\tyears: \"Anos\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancelar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Restrio\",\r\n\t\tconstraint_type: \"Tipo Restrio\",\r\n\t\tconstraint_date: \"Data restrio\",\r\n\t\tasap: \"Mais breve possvel\",\r\n\t\talap: \"Mais tarde possvel\",\r\n\t\tsnet: \"No comear antes de\",\r\n\t\tsnlt: \"No comear depois de\",\r\n\t\tfnet: \"No terminar antes de\",\r\n\t\tfnlt: \"No terminar depois de\",\r\n\t\tmso: \"Precisa comear em\",\r\n\t\tmfo: \"Precisa terminar em\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"Tipo de filtros\",\r\n\t\tresources_filter_label: \"Ocultar vazios\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Stycze\", \"Luty\", \"Marzec\", \"Kwiecie\", \"Maj\", \"Czerwiec\", \"Lipiec\", \"Sierpie\", \"Wrzesie\", \"Padziernik\", \"Listopad\", \"Grudzie\"],\r\n\t\tmonth_short: [\"Sty\", \"Lut\", \"Mar\", \"Kwi\", \"Maj\", \"Cze\", \"Lip\", \"Sie\", \"Wrz\", \"Pa\", \"Lis\", \"Gru\"],\r\n\t\tday_full: [\"Niedziela\", \"Poniedziaek\", \"Wtorek\", \"roda\", \"Czwartek\", \"Pitek\", \"Sobota\"],\r\n\t\tday_short: [\"Nie\", \"Pon\", \"Wto\", \"ro\", \"Czw\", \"Pi\", \"Sob\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nowe zadanie\",\r\n\t\ticon_save: \"Zapisz\",\r\n\t\ticon_cancel: \"Anuluj\",\r\n\t\ticon_details: \"Szczegy\",\r\n\t\ticon_edit: \"Edytuj\",\r\n\t\ticon_delete: \"Usu\",\r\n\t\tconfirm_closing: \"\", // Zmiany zostan usunite, jeste pewien?\r\n\t\tconfirm_deleting: \"Zdarzenie zostanie usunite na zawsze, kontynuowa?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"Okres czasu\",\r\n\t\tsection_type: \"Typ\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Nazwa zadania\",\r\n\t\tcolumn_start_date: \"Pocztek\",\r\n\t\tcolumn_duration: \"Czas trwania\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"zostanie usunity\",\r\n\t\tlink_start: \" (pocztek)\",\r\n\t\tlink_end: \" (koniec)\",\r\n\r\n\t\ttype_task: \"Zadanie\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuty\",\r\n\t\thours: \"Godziny\",\r\n\t\tdays: \"Dni\",\r\n\t\tweeks: \"Tydzie\",\r\n\t\tmonths: \"Miesice\",\r\n\t\tyears: \"Lata\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Anuluj\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny oppgave\",\r\n\t\ticon_save: \"Lagre\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Endre\",\r\n\t\ticon_delete: \"Slett\",\r\n\t\tconfirm_closing: \"Endringer blir ikke lagret, er du sikker?\", // Endringer blir ikke lagret, er du sikker?\r\n\t\tconfirm_deleting: \"Oppfringen vil bli slettet, er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maart\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Augustus\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"mrt\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Zondag\", \"Maandag\", \"Dinsdag\", \"Woensdag\", \"Donderdag\", \"Vrijdag\", \"Zaterdag\"],\r\n\t\tday_short: [\"Zo\", \"Ma\", \"Di\", \"Wo\", \"Do\", \"Vr\", \"Za\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nieuwe taak\",\r\n\t\ticon_save: \"Opslaan\",\r\n\t\ticon_cancel: \"Annuleren\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"Bewerken\",\r\n\t\ticon_delete: \"Verwijderen\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Item zal permanent worden verwijderd, doorgaan?\",\r\n\t\tsection_description: \"Beschrijving\",\r\n\t\tsection_time: \"Tijd periode\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Taak omschrijving\",\r\n\t\tcolumn_start_date: \"Startdatum\",\r\n\t\tcolumn_duration: \"Duur\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Koppeling\",\r\n\t\tconfirm_link_deleting: \"zal worden verwijderd\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (eind)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"minuten\",\r\n\t\thours: \"uren\",\r\n\t\tdays: \"dagen\",\r\n\t\tweeks: \"weken\",\r\n\t\tmonths: \"maanden\",\r\n\t\tyears: \"jaren\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Annuleren\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Mon\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny oppgave\",\r\n\t\ticon_save: \"Lagre\",\r\n\t\ticon_cancel: \"Avbryt\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Rediger\",\r\n\t\ticon_delete: \"Slett\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Hendelsen vil bli slettet permanent. Er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Avbryt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","export default class LocaleManager{\r\n\tprivate _locales:{[key:string]: IGanttLocale };\r\n\r\n\tconstructor(config: {[key:string]: IGanttLocale }){\r\n\t\tthis._locales = {};\r\n\t\tfor(const i in config){\r\n\t\t\tthis._locales[i] = config[i];\r\n\t\t}\r\n\t}\r\n\r\n\taddLocale = (name: string, locale: IGanttLocale) => {\r\n\t\tthis._locales[name] = locale;\r\n\t}\r\n\r\n\tgetLocale = (name: string): IGanttLocale => {\r\n\t\treturn this._locales[name];\r\n\t}\r\n}","/*\r\n\tTranslated by cjkim@dbvalley.com\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \" \",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \" ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"Type\",\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \" ?\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\t\ttype_task: \"\",\r\n\t\ttype_project: \"\",\r\n\t\ttype_milestone: \"\",\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n Translation by Genexus Japan Inc.\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"\",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", // \r\n\t\tconfirm_deleting: \"\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n Update 29/12/2015:\r\n New labels translation by ARCANGELI CLAUDIO\r\n\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"],\r\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"],\r\n\t\tday_full: [\"Domenica\", \"Luned\", \"Marted\", \"Mercoled\", \"Gioved\", \"Venerd\", \"Sabato\"],\r\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nuovo compito\",\r\n\t\ticon_save: \"Salva\",\r\n\t\ticon_cancel: \"Chiudi\",\r\n\t\ticon_details: \"Dettagli\",\r\n\t\ticon_edit: \"Modifica\",\r\n\t\ticon_delete: \"Elimina\",\r\n\t\tconfirm_closing: \"\",// \"Sei sicuro di confermare la chiusura?\",\r\n\t\tconfirm_deleting: \"Sei sicuro di confermare l'eliminazione?\",\r\n\t\tsection_description: \"Descrizione\",\r\n\t\tsection_time: \"Periodo di tempo\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Nome Attivit\",\r\n\t\tcolumn_start_date: \"Inizio\",\r\n\t\tcolumn_duration: \"Durata\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"sar eliminato\",\r\n\t\tlink_start: \" (inizio)\",\r\n\t\tlink_end: \" (fine)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuti\",\r\n\t\thours: \"Ore\",\r\n\t\tdays: \"Giorni\",\r\n\t\tweeks: \"Settimane\",\r\n\t\tmonths: \"Mesi\",\r\n\t\tyears: \"Anni\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Chiudi\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maret\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Agustus\", \"September\", \"Oktober\", \"November\", \"Desember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Ags\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Minggu\", \"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\"],\r\n\t\tday_short: [\"Ming\", \"Sen\", \"Sel\", \"Rab\", \"Kam\", \"Jum\", \"Sab\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Tugas baru\",\r\n\t\ticon_save: \"Simpan\",\r\n\t\ticon_cancel: \"Batal\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edit\",\r\n\t\ticon_delete: \"Hapus\",\r\n\t\tconfirm_closing: \"\", /* Perubahan tidak akan disimpan ? */\r\n\t\tconfirm_deleting: \"Acara akan dihapus\",\r\n\t\tsection_description: \"Keterangan\",\r\n\t\tsection_time: \"Periode\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Batal\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janur\", \"Februr\", \"Mrcius\", \"prilis\", \"Mjus\", \"Jnius\", \"Jlius\", \"Augusztus\", \"Szeptember\", \"Oktber\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mr\", \"pr\", \"Mj\", \"Jn\", \"Jl\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Vasrnap\", \"Htf\", \"Kedd\", \"Szerda\", \"Cstrtk\", \"Pntek\", \"szombat\"],\r\n\t\tday_short: [\"Va\", \"H\", \"Ke\", \"Sze\", \"Cs\", \"P\", \"Szo\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"j feladat\",\r\n\t\ticon_save: \"Ments\",\r\n\t\ticon_cancel: \"Mgse\",\r\n\t\ticon_details: \"Rszletek\",\r\n\t\ticon_edit: \"Szerkeszts\",\r\n\t\ticon_delete: \"Trls\",\r\n\t\tconfirm_closing: \"\", // A vltozsok elvesznek, biztosan folytatja? \"\r\n\t\tconfirm_deleting: \"Az esemny trlve lesz, biztosan folytatja?\",\r\n\t\tsection_description: \"Lers\",\r\n\t\tsection_time: \"Idszak\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Mgse\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n  Translation by Davor\r\n http://docs.dhtmlx.com/gantt/desktop__localization.html#comment-2569116291\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Sijeanj\", \"Veljaa\", \"Oujak\", \"Travanj\", \"Svibanj\", \"Lipanj\", \"Srpanj\", \"Kolovoz\", \"Rujan\", \"Listopad\", \"Studeni\", \"Prosinac\"],\r\n\t\tmonth_short: [\"Sij\", \"Velj\", \"Ou\", \"Tra\", \"Svi\", \"Lip\", \"Srp\", \"Kol\", \"Ruj\", \"Lis\", \"Stu\", \"Pro\"],\r\n\t\tday_full: [\"Nedjelja\", \"Ponedjeljak\", \"Utorak\", \"Srijeda\", \"etvrtak\", \"Petak\", \"Subota\"],\r\n\t\tday_short: [\"Ned\", \"Pon\", \"Uto\", \"Sri\", \"et\", \"Pet\", \"Sub\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Novi Zadatak\",\r\n\t\ticon_save: \"Spremi\",\r\n\t\ticon_cancel: \"Odustani\",\r\n\t\ticon_details: \"Detalji\",\r\n\t\ticon_edit: \"Izmjeni\",\r\n\t\ticon_delete: \"Obrii\",\r\n\t\tconfirm_closing: \"\",\r\n\t\tconfirm_deleting: \"Zadatak e biti trajno izbrisan, jeste li sigurni?\",\r\n\t\tsection_description: \"Opis\",\r\n\t\tsection_time: \"Vremenski Period\",\r\n\t\tsection_type: \"Tip\",\r\n\r\n\t\t/* grid columns */\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Naziv Zadatka\",\r\n\t\tcolumn_start_date: \"Poetno Vrijeme\",\r\n\t\tcolumn_duration: \"Trajanje\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Poveznica\",\r\n\t\tconfirm_link_deleting: \"e biti izbrisan\",\r\n\t\tlink_start: \" (poetak)\",\r\n\t\tlink_end: \" (kraj)\",\r\n\r\n\t\ttype_task: \"Zadatak\",\r\n\t\ttype_project: \"Projekt\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minute\",\r\n\t\thours: \"Sati\",\r\n\t\tdays: \"Dani\",\r\n\t\tweeks: \"Tjedni\",\r\n\t\tmonths: \"Mjeseci\",\r\n\t\tyears: \"Godine\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Odustani\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"  .?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Janvier\", \"Fvrier\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Aot\", \"Septembre\", \"Octobre\", \"Novembre\", \"Dcembre\"],\r\n\t\tmonth_short: [\"Jan\", \"Fv\", \"Mar\", \"Avr\", \"Mai\", \"Juin\", \"Juil\", \"Ao\", \"Sep\", \"Oct\", \"Nov\", \"Dc\"],\r\n\t\tday_full: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\r\n\t\tday_short: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nouvelle tche\",\r\n\t\ticon_save: \"Enregistrer\",\r\n\t\ticon_cancel: \"Annuler\",\r\n\t\ticon_details: \"Dtails\",\r\n\t\ticon_edit: \"Modifier\",\r\n\t\ticon_delete: \"Effacer\",\r\n\t\tconfirm_closing: \"\",// Vos modifications seront perdus, tes-vous sr ?\r\n\t\tconfirm_deleting: \"L'vnement sera effac sans appel, tes-vous sr ?\",\r\n\r\n\t\tsection_description: \"Description\",\r\n\t\tsection_time: \"Priode\",\r\n\t\tsection_type: \"Type\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"OTP\",\r\n\t\tcolumn_text: \"Nom de la tche\",\r\n\t\tcolumn_start_date: \"Date initiale\",\r\n\t\tcolumn_duration: \"Dure\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Le lien\",\r\n\t\tconfirm_link_deleting: \"sera supprim\",\r\n\t\tlink_start: \"(dbut)\",\r\n\t\tlink_end: \"(fin)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Heures\",\r\n\t\tdays: \"Jours\",\r\n\t\tweeks: \"Semaines\",\r\n\t\tmonths: \"Mois\",\r\n\t\tyears: \"Annes\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Annuler\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Tammikuu\", \"Helmikuu\", \"Maaliskuu\", \"Huhtikuu\", \"Toukokuu\", \"Kes&auml;kuu\", \"Hein&auml;kuu\", \"Elokuu\", \"Syyskuu\", \"Lokakuu\", \"Marraskuu\", \"Joulukuu\"],\r\n\t\tmonth_short: [\"Tam\", \"Hel\", \"Maa\", \"Huh\", \"Tou\", \"Kes\", \"Hei\", \"Elo\", \"Syy\", \"Lok\", \"Mar\", \"Jou\"],\r\n\t\tday_full: [\"Sunnuntai\", \"Maanantai\", \"Tiistai\", \"Keskiviikko\", \"Torstai\", \"Perjantai\", \"Lauantai\"],\r\n\t\tday_short: [\"Su\", \"Ma\", \"Ti\", \"Ke\", \"To\", \"Pe\", \"La\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Uusi tehtv\",\r\n\t\ticon_save: \"Tallenna\",\r\n\t\ticon_cancel: \"Peru\",\r\n\t\ticon_details: \"Tiedot\",\r\n\t\ticon_edit: \"Muokkaa\",\r\n\t\ticon_delete: \"Poista\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Haluatko varmasti poistaa tapahtuman?\",\r\n\t\tsection_description: \"Kuvaus\",\r\n\t\tsection_time: \"Aikajakso\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Peru\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n dhtmlxGantt Persian (Farsi, fa_IR) locale by Mohammad Shokri http://slashsbin.com/\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\"\r\n\t\t],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\"\r\n\t\t],\r\n\t\tday_short: [\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\",\r\n\t\t\t\"\"\r\n\t\t]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"       \",\r\n\t\tconfirm_deleting: \"         \",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \" \",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \"  \",\r\n\t\tlink_start: \" ()\",\r\n\t\tlink_end: \" ()\",\r\n\r\n\t\ttype_task: \"\",\r\n\t\ttype_project: \"\",\r\n\t\ttype_milestone: \"\",\r\n\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n @Autor Manuel Fernandez Panzuela - www.mfernandez.es\r\n\r\n Update 30/10/2015:\r\n Translation of new labels by Jorge Macias\r\n https://disqus.com/by/disqus_bTuZk1voC7/\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"],\r\n\t\tmonth_short: [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"],\r\n\t\tday_full: [\"Domingo\", \"Lunes\", \"Martes\", \"Mircoles\", \"Jueves\", \"Viernes\", \"Sbado\"],\r\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mi\", \"Jue\", \"Vie\", \"Sb\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nueva tarea\",\r\n\t\ticon_save: \"Guardar\",\r\n\t\ticon_cancel: \"Cancelar\",\r\n\t\ticon_details: \"Detalles\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Eliminar\",\r\n\t\tconfirm_closing: \"\", // \"Sus cambios se perdern, continuar ?\"\r\n\t\tconfirm_deleting: \"El evento se borrar definitivamente, continuar?\",\r\n\t\tsection_description: \"Descripcin\",\r\n\t\tsection_time: \"Perodo\",\r\n\t\tsection_type: \"Tipo\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"EDT\",\r\n\t\tcolumn_text: \"Tarea\",\r\n\t\tcolumn_start_date: \"Inicio\",\r\n\t\tcolumn_duration: \"Duracin\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Enlace\",\r\n\t\tconfirm_link_deleting: \"ser borrada\",\r\n\t\tlink_start: \" (inicio)\",\r\n\t\tlink_end: \" (fin)\",\r\n\r\n\t\ttype_task: \"Tarea\",\r\n\t\ttype_project: \"Proyecto\",\r\n\t\ttype_milestone: \"Hito\",\r\n\r\n\r\n\t\tminutes: \"Minutos\",\r\n\t\thours: \"Horas\",\r\n\t\tdays: \"Das\",\r\n\t\tweeks: \"Semanas\",\r\n\t\tmonths: \"Meses\",\r\n\t\tyears: \"Aos\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancelar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"New task\",\r\n\t\ticon_save: \"Save\",\r\n\t\ticon_cancel: \"Cancel\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"Edit\",\r\n\t\ticon_delete: \"Delete\",\r\n\t\tconfirm_closing: \"\",// Your changes will be lost, are you sure?\r\n\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\tsection_description: \"Description\",\r\n\t\tsection_time: \"Time period\",\r\n\t\tsection_type: \"Type\",\r\n\r\n\t\t/* grid columns */\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancel\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"    .   ;\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\" Januar\", \" Februar\", \" Mrz \", \" April\", \" Mai\", \" Juni\", \" Juli\", \" August\", \" September \", \" Oktober\", \" November \", \" Dezember\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mr\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\r\n\t\tday_full: [\"Sonntag\", \"Montag\", \"Dienstag\", \" Mittwoch\", \" Donnerstag\", \"Freitag\", \"Samstag\"],\r\n\t\tday_short: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Neue Aufgabe\",\r\n\t\ticon_save: \"Speichern\",\r\n\t\ticon_cancel: \"Abbrechen\",\r\n\t\ticon_details: \"Details\",\r\n\t\ticon_edit: \"ndern\",\r\n\t\ticon_delete: \"Lschen\",\r\n\t\tconfirm_closing: \"\", // \"Ihre Vernderungen werden verloren sein, wollen Sie ergnzen? \"\r\n\t\tconfirm_deleting: \"Der Eintrag wird gelscht\",\r\n\t\tsection_description: \"Beschreibung\",\r\n\t\tsection_time: \"Zeitspanne\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"PSP\",\r\n\t\tcolumn_text: \"Task-Namen\",\r\n\t\tcolumn_start_date: \"Startzeit\",\r\n\t\tcolumn_duration: \"Dauer\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"werden gelscht\",\r\n\t\tlink_start: \"(starten)\",\r\n\t\tlink_end: \"(ende)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minuten\",\r\n\t\thours: \"Stunden\",\r\n\t\tdays: \"Tage\",\r\n\t\tweeks: \"Wochen\",\r\n\t\tmonths: \"Monate\",\r\n\t\tyears: \"Jahre\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Abbrechen\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Regel\",\r\n\t\tconstraint_type: \"Regel\",\r\n\t\tconstraint_date: \"Regel - Datum\",\r\n\t\tasap: \"So bald wie mglich\",\r\n\t\talap: \"So spt wie mglich\",\r\n\t\tsnet: \"Beginn nicht vor\",\r\n\t\tsnlt: \"Beginn nicht spter als\",\r\n\t\tfnet: \"Fertigstellung nicht vor\",\r\n\t\tfnlt: \"Fertigstellung nicht spter als\",\r\n\t\tmso: \"Muss beginnen am\",\r\n\t\tmfo: \"Muss fertig sein am\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marts\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"December\"],\r\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\r\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\r\n\t\tday_short: [\"Sn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Ny opgave\",\r\n\t\ticon_save: \"Gem\",\r\n\t\ticon_cancel: \"Fortryd\",\r\n\t\ticon_details: \"Detaljer\",\r\n\t\ticon_edit: \"Tilret\",\r\n\t\ticon_delete: \"Slet\",\r\n\t\tconfirm_closing: \"Dine rettelser vil g tabt.. Er dy sikker?\", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"Bigivenheden vil blive slettet permanent. Er du sikker?\",\r\n\t\tsection_description: \"Beskrivelse\",\r\n\t\tsection_time: \"Tidsperiode\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Fortryd\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Leden\", \"nor\", \"Bezen\", \"Duben\", \"Kvten\", \"erven\", \"ervenec\", \"Srpen\", \"Z\", \"jen\", \"Listopad\", \"Prosinec\"],\r\n\t\tmonth_short: [\"Led\", \"n\", \"Be\", \"Dub\", \"Kv\", \"er\", \"ec\", \"Srp\", \"Z\", \"j\", \"List\", \"Pro\"],\r\n\t\tday_full: [\"Nedle\", \"Pondl\", \"ter\", \"Steda\", \"tvrtek\", \"Ptek\", \"Sobota\"],\r\n\t\tday_short: [\"Ne\", \"Po\", \"t\", \"St\", \"t\", \"P\", \"So\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nov prce\",\r\n\t\ticon_save: \"Uloit\",\r\n\t\ticon_cancel: \"Zpt\",\r\n\t\ticon_details: \"Detail\",\r\n\t\ticon_edit: \"Edituj\",\r\n\t\ticon_delete: \"Smazat\",\r\n\t\tconfirm_closing: \"\", // Vae zmny budou ztraceny, opravdu ?\r\n\t\tconfirm_deleting: \"Udlost bude trvale smazna, opravdu?\",\r\n\t\tsection_description: \"Poznmky\",\r\n\t\tsection_time: \"Doba platnosti\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Zpt\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\nTranslation by FreezeSoul\r\n\r\nUpdate 26/10/2015:\r\nTranslation of new labels by zwh8800\r\n https://github.com/DHTMLX/gantt/pull/7\r\n\r\n*/\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"\",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"!\", // Your changes will be lost, are your sure?\r\n\t\tconfirm_deleting: \"?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \"\",\r\n\t\tsection_type: \"\",\r\n\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \"\",\r\n\t\tlink_start: \" ()\",\r\n\t\tlink_end: \" ()\",\r\n\r\n\t\ttype_task: \"\",\r\n\t\ttype_project: \"\",\r\n\t\ttype_milestone: \"\",\r\n\r\n\t\tminutes: \"\",\r\n\t\thours: \"\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","/*\r\n @Traducido por Vicente Adria Bohigues - vicenteadria@hotmail.com\r\n */\r\n\r\nconst locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"Gener\", \"Febrer\", \"Mar\", \"Abril\", \"Maig\", \"Juny\", \"Juliol\", \"Agost\", \"Setembre\", \"Octubre\", \"Novembre\", \"Desembre\"],\r\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Oct\", \"Nov\", \"Des\"],\r\n\t\tday_full: [\"Diumenge\", \"Dilluns\", \"Dimarts\", \"Dimecres\", \"Dijous\", \"Divendres\", \"Dissabte\"],\r\n\t\tday_short: [\"Dg\", \"Dl\", \"Dm\", \"Dc\", \"Dj\", \"Dv\", \"Ds\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \"Nova tasca\",\r\n\t\ticon_save: \"Guardar\",\r\n\t\ticon_cancel: \"Cancellar\",\r\n\t\ticon_details: \"Detalls\",\r\n\t\ticon_edit: \"Editar\",\r\n\t\ticon_delete: \"Esborrar\",\r\n\t\tconfirm_closing: \"\", // \"Els seus canvis es perdrn, continuar ?\"\r\n\t\tconfirm_deleting: \"L'esdeveniment s'esborrar definitivament, continuar ?\",\r\n\t\tsection_description: \"Descripci\",\r\n\t\tsection_time: \"Periode de temps\",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"Cancellar\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"\", //    , ?\r\n\t\tconfirm_deleting: \"   , ?\",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"\",\r\n\t\tcolumn_text: \"\",\r\n\t\tcolumn_start_date: \"\",\r\n\t\tcolumn_duration: \"\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"\",\r\n\t\tconfirm_link_deleting: \" \",\r\n\t\tlink_start: \"()\",\r\n\t\tlink_end: \"()\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\r\n\t\tminutes: \"ii\",\r\n\t\thours: \"i\",\r\n\t\tdays: \"\",\r\n\t\tweeks: \"\",\r\n\t\tmonths: \"\",\r\n\t\tyears: \"\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","const locale: IGanttLocale = {\r\n\tdate: {\r\n\t\tmonth_full: [\" \", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \" \", \" \", \" \"],\r\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\r\n\t},\r\n\tlabels: {\r\n\t\tnew_task: \" \",\r\n\t\ticon_save: \"\",\r\n\t\ticon_cancel: \"\",\r\n\t\ticon_details: \"\",\r\n\t\ticon_edit: \"\",\r\n\t\ticon_delete: \"\",\r\n\t\tconfirm_closing: \"  ,   \", // Your changes will be lost, are your sure ?\r\n\t\tconfirm_deleting: \"       \",\r\n\t\tsection_description: \"\",\r\n\t\tsection_time: \" \",\r\n\t\tsection_type: \"Type\",\r\n\t\t/* grid columns */\r\n\r\n\t\tcolumn_wbs: \"WBS\",\r\n\t\tcolumn_text: \"Task name\",\r\n\t\tcolumn_start_date: \"Start time\",\r\n\t\tcolumn_duration: \"Duration\",\r\n\t\tcolumn_add: \"\",\r\n\r\n\t\t/* link confirmation */\r\n\t\tlink: \"Link\",\r\n\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\tlink_start: \" (start)\",\r\n\t\tlink_end: \" (end)\",\r\n\r\n\t\ttype_task: \"Task\",\r\n\t\ttype_project: \"Project\",\r\n\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\tminutes: \"Minutes\",\r\n\t\thours: \"Hours\",\r\n\t\tdays: \"Days\",\r\n\t\tweeks: \"Week\",\r\n\t\tmonths: \"Months\",\r\n\t\tyears: \"Years\",\r\n\r\n\t\t/* message popup */\r\n\t\tmessage_ok: \"OK\",\r\n\t\tmessage_cancel: \"\",\r\n\r\n\t\t/* constraints */\r\n\t\tsection_constraint: \"Constraint\",\r\n\t\tconstraint_type: \"Constraint type\",\r\n\t\tconstraint_date: \"Constraint date\",\r\n\t\tasap: \"As Soon As Possible\",\r\n\t\talap: \"As Late As Possible\",\r\n\t\tsnet: \"Start No Earlier Than\",\r\n\t\tsnlt: \"Start No Later Than\",\r\n\t\tfnet: \"Finish No Earlier Than\",\r\n\t\tfnlt: \"Finish No Later Than\",\r\n\t\tmso: \"Must Start On\",\r\n\t\tmfo: \"Must Finish On\",\r\n\r\n\t\t/* resource control */\r\n\t\tresources_filter_placeholder: \"type to filter\",\r\n\t\tresources_filter_label: \"hide empty\",\r\n\r\n\t\t/* empty state screen */\r\n\t\tempty_state_text_link: \"Click here\",\r\n\t\tempty_state_text_description: \"to create your first task\"\r\n\t}\r\n};\r\n\r\nexport default locale;\r\n","import ar from \"./locale_ar\";\r\nimport be from \"./locale_be\";\r\nimport ca from \"./locale_ca\";\r\nimport cn from \"./locale_cn\";\r\nimport cs from \"./locale_cs\";\r\nimport da from \"./locale_da\";\r\nimport de from \"./locale_de\";\r\nimport el from \"./locale_el\";\r\nimport en from \"./locale_en\";\r\nimport es from \"./locale_es\";\r\nimport fa from \"./locale_fa\";\r\nimport fi from \"./locale_fi\";\r\nimport fr from \"./locale_fr\";\r\nimport he from \"./locale_he\";\r\nimport hr from \"./locale_hr\";\r\nimport hu from \"./locale_hu\";\r\nimport id from \"./locale_id\";\r\nimport it from \"./locale_it\";\r\nimport jp from \"./locale_jp\";\r\nimport kr from \"./locale_kr\";\r\n\r\nimport LocaleManager from \"./locale_manager\";\r\n\r\nimport nb from \"./locale_nb\";\r\nimport nl from \"./locale_nl\";\r\nimport no from \"./locale_no\";\r\nimport pl from \"./locale_pl\";\r\nimport pt from \"./locale_pt\";\r\nimport ro from \"./locale_ro\";\r\nimport ru from \"./locale_ru\";\r\nimport si from \"./locale_si\";\r\nimport sk from \"./locale_sk\";\r\nimport sv from \"./locale_sv\";\r\nimport tr from \"./locale_tr\";\r\nimport ua from \"./locale_ua\";\r\n\r\nexport default function(){\r\n\treturn new LocaleManager({\r\n\t\ten,\r\n\t\tar,\r\n\t\tbe,\r\n\t\tca,\r\n\t\tcn,\r\n\t\tcs,\r\n\t\tda,\r\n\t\tde,\r\n\t\tel,\r\n\t\tes,\r\n\t\tfa,\r\n\t\tfi,\r\n\t\tfr,\r\n\t\the,\r\n\t\thr,\r\n\t\thu,\r\n\t\tid,\r\n\t\tit,\r\n\t\tjp,\r\n\t\tkr,\r\n\t\tnb,\r\n\t\tnl,\r\n\t\tno,\r\n\t\tpl,\r\n\t\tpt,\r\n\t\tro,\r\n\t\tru,\r\n\t\tsi,\r\n\t\tsk,\r\n\t\tsv,\r\n\t\ttr,\r\n\t\tua\r\n\t});\r\n}","// all builds except for evaluation version get this mockup\r\n// the evaluation build gets actual codes\r\nexport default () => {};","function extend(gantt) {\n  gantt.destructor = function () {\n    this.clearAll();\n    this.callEvent(\"onDestroy\", []);\n\n    if (this.$root) {\n      delete this.$root.gantt;\n    }\n\n    if (this._eventRemoveAll) {\n      this._eventRemoveAll();\n    }\n\n    if (this.$layout) {\n      this.$layout.destructor();\n    }\n\n    if (this.resetLightbox) {\n      this.resetLightbox();\n    }\n\n    if (this._dp && this._dp.destructor) {\n      this._dp.destructor();\n    }\n\n    this.$services.destructor(); // detachAllEvents should be called last, because in components may be attached events\n\n    this.detachAllEvents();\n\n    for (var i in this) {\n      if (i.indexOf(\"$\") === 0) {\n        delete this[i];\n      }\n    }\n\n    this.$destroyed = true;\n  };\n}\n\nmodule.exports = extend;","/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\nmodule.exports = function (gantt) {\n  return function assert(check, message) {\n    if (!check) {\n      if (gantt.config.show_errors && gantt.callEvent(\"onError\", [message]) !== false) {\n        if (gantt.message) {\n          gantt.message({\n            type: \"error\",\n            text: message,\n            expire: -1\n          });\n        } else {\n          // eslint-disable-next-line\n          console.log(message);\n        } // eslint-disable-next-line no-debugger\n\n\n        debugger;\n      }\n    }\n  };\n};","function addResizeListener(gantt) {\n  var containerStyles = window.getComputedStyle(gantt.$root);\n\n  if (containerStyles.getPropertyValue(\"position\") == \"static\") {\n    gantt.$root.style.position = \"relative\";\n  }\n\n  var resizeWatcher = document.createElement('iframe');\n  resizeWatcher.className = \"gantt_container_resize_watcher\";\n  resizeWatcher.tabIndex = -1;\n\n  if (gantt.config.wai_aria_attributes) {\n    resizeWatcher.setAttribute(\"role\", \"none\");\n    resizeWatcher.setAttribute(\"aria-hidden\", true);\n  }\n\n  var salesforce_environment = !!window[\"Sfdc\"] || !!window[\"$A\"] || window[\"Aura\"];\n\n  if (salesforce_environment) {\n    gantt.config.container_resize_method = \"timeout\";\n  } // in some environments (namely, in SalesForce) iframe.contentWindow is not available\n\n\n  gantt.$root.appendChild(resizeWatcher);\n\n  if (resizeWatcher.contentWindow) {\n    listenWindowResize(gantt, resizeWatcher.contentWindow);\n  } else {\n    // if so - ditch the iframe and fallback to listening the main window resize\n    gantt.$root.removeChild(resizeWatcher);\n    listenWindowResize(gantt, window);\n  }\n}\n\nfunction listenWindowResize(gantt, window) {\n  var resizeTimeout = gantt.config.container_resize_timeout || 20;\n  var resizeDelay;\n\n  if (gantt.config.container_resize_method == \"timeout\") {\n    lowlevelResizeWatcher();\n  } else {\n    try {\n      gantt.event(window, \"resize\", function () {\n        if (gantt.$scrollbarRepaint) {\n          gantt.$scrollbarRepaint = null;\n        } else {\n          repaintGantt();\n        }\n      });\n    } catch (e) {\n      lowlevelResizeWatcher();\n    }\n  }\n\n  function repaintGantt() {\n    clearTimeout(resizeDelay);\n    resizeDelay = setTimeout(function () {\n      if (!gantt.$destroyed) {\n        gantt.render();\n      }\n    }, resizeTimeout);\n  }\n\n  var previousHeight = gantt.$root.offsetHeight;\n  var previousWidth = gantt.$root.offsetWidth;\n\n  function lowlevelResizeWatcher() {\n    if (gantt.$root.offsetHeight != previousHeight || gantt.$root.offsetWidth != previousWidth) {\n      repaintGantt();\n    }\n\n    previousHeight = gantt.$root.offsetHeight;\n    previousWidth = gantt.$root.offsetWidth;\n    setTimeout(lowlevelResizeWatcher, resizeTimeout);\n  }\n}\n\nmodule.exports = addResizeListener;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar domHelpers = require(\"./ui/utils/dom_helpers\"),\n    helpers = require(\"../utils/helpers\");\n\nvar isHeadless = require(\"../utils/is_headless\");\n\nvar addResizeListener = require(\"./ui/resize_listener\");\n\nmodule.exports = function (gantt) {\n  var calculateScaleRange = require(\"./gantt_data_range\");\n\n  gantt.assert = require(\"./common/assert\")(gantt);\n\n  function isHTMLElement(node) {\n    try {\n      node.cloneNode(false);\n    } catch (e) {\n      return false;\n    }\n\n    return true;\n  }\n\n  var invalidContainerMessage = \"Invalid value of the first argument of `gantt.init`. Supported values: HTMLElement, String (element id).\" + \"This error means that either invalid object is passed into `gantt.init` or that the element with the specified ID doesn't exist on the page when `gantt.init` is called.\";\n\n  function validateNode(node) {\n    if (!node || typeof node == 'string' && document.getElementById(node)) return true;\n    if (isHTMLElement(node)) return true;\n    gantt.assert(false, invalidContainerMessage);\n    throw new Error(invalidContainerMessage);\n  } //initial initialization\n\n\n  gantt.init = function (node, from, to) {\n    if (gantt.env.isNode) {\n      node = null; // for the nodejs version\n    } else {\n      validateNode(node); // for the web version\n    }\n\n    if (from && to) {\n      this.config.start_date = this._min_date = new Date(from);\n      this.config.end_date = this._max_date = new Date(to);\n    }\n\n    this.date.init(); //can be called only once\n\n    this.init = function (node) {\n      if (gantt.env.isNode) {\n        node = null; // for the nodejs version\n      } else {\n        validateNode(node); // for the web version\n      }\n\n      if (this.$container && this.$container.parentNode) {\n        this.$container.parentNode.removeChild(this.$container);\n        this.$container = null;\n      }\n\n      if (this.$layout) {\n        this.$layout.clear();\n      }\n\n      this._reinit(node);\n    };\n\n    this._reinit(node);\n  };\n\n  gantt._quickRefresh = function (code) {\n    var stores = this._getDatastores.call(this);\n\n    for (var i = 0; i < stores.length; i++) {\n      stores[i]._quick_refresh = true;\n    }\n\n    code();\n\n    for (var i = 0; i < stores.length; i++) {\n      stores[i]._quick_refresh = false;\n    }\n  };\n\n  var dropLayout = function dropLayout() {\n    if (this._clearTaskLayers) {\n      this._clearTaskLayers();\n    }\n\n    if (this._clearLinkLayers) {\n      this._clearLinkLayers();\n    }\n\n    if (this.$layout) {\n      this.$layout.destructor();\n      this.$layout = null;\n      this.$ui.reset();\n    }\n  }.bind(gantt);\n\n  var rebuildLayout = function rebuildLayout() {\n    if (isHeadless(gantt)) {\n      return;\n    }\n\n    this.$root.innerHTML = \"\";\n    this.$root.gantt = this;\n    calculateScaleRange(this);\n    this.config.layout.id = \"main\";\n    this.$layout = this.$ui.createView(\"layout\", this.$root, this.config.layout);\n    this.$layout.attachEvent(\"onBeforeResize\", function () {\n      var storeNames = gantt.$services.getService(\"datastores\");\n\n      for (var i = 0; i < storeNames.length; i++) {\n        gantt.getDatastore(storeNames[i]).filter();\n\n        if (gantt.$data.tasksStore._skipTaskRecalculation) {\n          // do not repaint items, they will be repainted later in the onStoreUpdate event\n          if (gantt.$data.tasksStore._skipTaskRecalculation != \"lightbox\") {\n            gantt.$data.tasksStore._skipTaskRecalculation = false;\n          }\n        } else {\n          gantt.getDatastore(storeNames[i]).callEvent(\"onBeforeRefreshAll\", []);\n        }\n      }\n    });\n    this.$layout.attachEvent(\"onResize\", function () {\n      gantt._quickRefresh(function () {\n        gantt.refreshData();\n      });\n    });\n    this.callEvent(\"onGanttLayoutReady\", []);\n    this.$layout.render();\n    this.$container = this.$layout.$container.firstChild;\n    addResizeListener(this);\n  }.bind(gantt);\n\n  gantt.resetLayout = function () {\n    dropLayout();\n    rebuildLayout();\n    this.render();\n  };\n\n  gantt._reinit = function (node) {\n    this.callEvent(\"onBeforeGanttReady\", []);\n\n    this._update_flags();\n\n    var config = this.$services.getService(\"templateLoader\");\n    config.initTemplates(this);\n    dropLayout();\n    this.$root = null;\n\n    if (node) {\n      this.$root = domHelpers.toNode(node);\n      rebuildLayout();\n      this.$mouseEvents.reset(this.$root);\n    }\n\n    this.callEvent(\"onTemplatesReady\", []);\n    this.callEvent(\"onGanttReady\", []);\n    this.render();\n  };\n\n  gantt.$click = {\n    buttons: {\n      \"edit\": function edit(id) {\n        if (gantt.isReadonly(gantt.getTask(id))) {\n          return;\n        }\n\n        gantt.showLightbox(id);\n      },\n      \"delete\": function _delete(id) {\n        var task = gantt.getTask(id);\n\n        if (gantt.isReadonly(task)) {\n          return;\n        }\n\n        var question = gantt.locale.labels.confirm_deleting;\n        var title = gantt.locale.labels.confirm_deleting_title;\n\n        gantt._simple_confirm(question, title, function () {\n          if (!gantt.isTaskExists(id)) {\n            gantt.hideLightbox();\n            return;\n          }\n\n          if (task.$new) {\n            // GS-2170. Do not recalculate the indexes and dates of other tasks\n            // as they will be recalculated in the `refreshData`\n            gantt.$data.tasksStore._skipTaskRecalculation = \"lightbox\";\n            gantt.silent(function () {\n              gantt.deleteTask(id, true);\n            });\n            gantt.$data.tasksStore._skipTaskRecalculation = false;\n            gantt.refreshData();\n          } else {\n            gantt.$data.tasksStore._skipTaskRecalculation = true;\n            gantt.deleteTask(id);\n          }\n\n          gantt.hideLightbox();\n        });\n      }\n    }\n  }; //renders self\n\n  gantt.render = function () {\n    this.callEvent(\"onBeforeGanttRender\", []);\n    var visibleDate;\n\n    if (!isHeadless(gantt)) {\n      if (!this.config.sort && this._sort) {\n        this._sort = undefined;\n      }\n\n      if (this.$root) {\n        if (this.config.rtl) {\n          this.$root.classList.add(\"gantt_rtl\");\n          this.$root.firstChild.classList.add(\"gantt_rtl\"); // GS-1499\n        } else {\n          this.$root.classList.remove(\"gantt_rtl\");\n          this.$root.firstChild.classList.remove(\"gantt_rtl\"); // GS-1499\n        }\n      }\n\n      var pos = this.getScrollState();\n      var posX = pos ? pos.x : 0;\n\n      if (this._getHorizontalScrollbar()) {\n        var scrollbar = this._getHorizontalScrollbar();\n\n        posX = scrollbar.$config.codeScrollLeft || posX || 0;\n      }\n\n      visibleDate = null;\n\n      if (posX) {\n        visibleDate = gantt.dateFromPos(posX + this.config.task_scroll_offset);\n      }\n    }\n\n    calculateScaleRange(this);\n\n    if (!isHeadless(gantt)) {\n      this.$layout.$config.autosize = this.config.autosize;\n      var preserveScroll = this.config.preserve_scroll;\n      this.config.preserve_scroll = false; // prevent scrolling from layout resize, scroll will be called here later on\n\n      this.$layout.resize();\n      this.config.preserve_scroll = preserveScroll;\n\n      if (this.config.preserve_scroll && pos) {\n        // GS-1640: We need pos.y, otherwise part of the timeline won't be rendered if the scrollbar disappeared\n        if (posX || pos.y) {\n          var new_pos = gantt.getScrollState();\n          var new_date = gantt.dateFromPos(new_pos.x);\n\n          if (!(+visibleDate == +new_date && new_pos.y == pos.y)) {\n            var posX = null;\n            var posY = null;\n\n            if (visibleDate) {\n              var posX = Math.max(gantt.posFromDate(visibleDate) - gantt.config.task_scroll_offset, 0);\n            }\n\n            if (pos.y) {\n              posY = pos.y;\n            }\n\n            gantt.scrollTo(posX, posY);\n          }\n        } // GS-1640: We need to reset the scroll position for the grid if the scrollbar disappeared and\n        // the grid and timeline have different scrollbars\n\n\n        var gridCell = gantt.$ui.getView(\"grid\");\n\n        if (gridCell) {\n          var attachedScrollbar = gridCell.$config.scrollY;\n          var verticalScrollbar = gantt.$ui.getView(attachedScrollbar);\n\n          if (verticalScrollbar) {\n            var scrollbarNodeVisible = gantt.utils.dom.isChildOf(verticalScrollbar.$view, gantt.$container);\n\n            if (!scrollbarNodeVisible) {\n              gridCell.scrollTo(undefined, 0);\n            }\n          }\n        }\n      }\n    } else {\n      gantt.refreshData();\n    }\n\n    this.callEvent(\"onGanttRender\", []);\n  }; //TODO: add layout.resize method that wouldn't trigger data repaint\n\n\n  gantt.setSizes = gantt.render;\n\n  gantt.getTaskRowNode = function (id) {\n    var els = this.$grid_data.childNodes;\n    var attribute = this.config.task_attribute;\n\n    for (var i = 0; i < els.length; i++) {\n      if (els[i].getAttribute) {\n        var value = els[i].getAttribute(attribute);\n        if (value == id) return els[i];\n      }\n    }\n\n    return null;\n  };\n\n  gantt.changeLightboxType = function (type) {\n    if (this.getLightboxType() == type) return true;\n\n    gantt._silent_redraw_lightbox(type);\n  };\n\n  gantt._get_link_type = function (from_start, to_start) {\n    var type = null;\n\n    if (from_start && to_start) {\n      type = gantt.config.links.start_to_start;\n    } else if (!from_start && to_start) {\n      type = gantt.config.links.finish_to_start;\n    } else if (!from_start && !to_start) {\n      type = gantt.config.links.finish_to_finish;\n    } else if (from_start && !to_start) {\n      type = gantt.config.links.start_to_finish;\n    }\n\n    return type;\n  };\n\n  gantt.isLinkAllowed = function (from, to, from_start, to_start) {\n    var link = null;\n\n    if (_typeof(from) == \"object\") {\n      link = from;\n    } else {\n      link = {\n        source: from,\n        target: to,\n        type: this._get_link_type(from_start, to_start)\n      };\n    }\n\n    if (!link) return false;\n    if (!(link.source && link.target && link.type)) return false;\n    if (link.source == link.target) return false;\n    var res = true; //any custom rules\n\n    if (this.checkEvent(\"onLinkValidation\")) res = this.callEvent(\"onLinkValidation\", [link]);\n    return res;\n  };\n\n  gantt._correct_dst_change = function (date, prevOffset, step, unit) {\n    var time_unit = helpers.getSecondsInUnit(unit) * step;\n\n    if (time_unit > 60 * 60 && time_unit < 60 * 60 * 24) {\n      //correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\n      var offsetChanged = date.getTimezoneOffset() - prevOffset;\n\n      if (offsetChanged) {\n        date = gantt.date.add(date, offsetChanged, \"minute\");\n      }\n    }\n\n    return date;\n  };\n\n  gantt.isSplitTask = function (task) {\n    gantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\" + task + \" of gantt.isSplitTask. Task object was expected\");\n    return this.$data.tasksStore._isSplitItem(task);\n  };\n\n  gantt._is_icon_open_click = function (e) {\n    if (!e) return false;\n    var target = e.target || e.srcElement;\n    if (!(target && target.className)) return false;\n    var className = domHelpers.getClassName(target);\n    if (className.indexOf(\"gantt_tree_icon\") !== -1 && (className.indexOf(\"gantt_close\") !== -1 || className.indexOf(\"gantt_open\") !== -1)) return true;\n    return false;\n  };\n};","/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\nmodule.exports = function (gantt) {\n  gantt._cached_functions = {\n    cache: {},\n    mode: false,\n    critical_path_mode: false,\n    wrap_methods: function wrap_methods(methods, object) {\n      if (object._prefetch_originals) {\n        for (var i in object._prefetch_originals) {\n          object[i] = object._prefetch_originals[i];\n        }\n      }\n\n      object._prefetch_originals = {};\n\n      for (var i = 0; i < methods.length; i++) {\n        this.prefetch(methods[i], object);\n      }\n    },\n    prefetch: function prefetch(methodname, host) {\n      var original = host[methodname];\n\n      if (original) {\n        var optimizer = this;\n        host._prefetch_originals[methodname] = original;\n\n        host[methodname] = function get_prefetched_value() {\n          var argumentsArray = new Array(arguments.length);\n\n          for (var i = 0, l = arguments.length; i < l; i++) {\n            argumentsArray[i] = arguments[i];\n          }\n\n          if (optimizer.active) {\n            var args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\n\n            if (!optimizer.cache[methodname]) {\n              optimizer.cache[methodname] = {};\n            }\n\n            var cached_values = optimizer.cache[methodname];\n\n            if (optimizer.has_cached_value(cached_values, args)) {\n              return optimizer.get_cached_value(cached_values, args);\n            } else {\n              var value = original.apply(this, argumentsArray);\n              optimizer.cache_value(cached_values, args, value);\n              return value;\n            }\n          }\n\n          return original.apply(this, argumentsArray);\n        };\n      }\n\n      return original;\n    },\n    cache_value: function cache_value(cache, arguments_hash, value) {\n      if (this.is_date(value)) value = new Date(value);\n      cache[arguments_hash] = value;\n    },\n    has_cached_value: function has_cached_value(cache, arguments_hash) {\n      return cache.hasOwnProperty(arguments_hash);\n    },\n    get_cached_value: function get_cached_value(cache, arguments_hash) {\n      var data = cache[arguments_hash]; //for cached dates - return copy\n\n      if (this.is_date(data)) {\n        data = new Date(data);\n      }\n\n      return data;\n    },\n    is_date: function is_date(value) {\n      return value && value.getUTCDate;\n    },\n    get_arguments_hash: function get_arguments_hash(args) {\n      var values = [];\n\n      for (var i = 0; i < args.length; i++) {\n        values.push(this.stringify_argument(args[i]));\n      }\n\n      return \"(\" + values.join(\";\") + \")\";\n    },\n    stringify_argument: function stringify_argument(value) {\n      //expecting task or link, or any other data entries, dates and primitive values\n      var ret = \"\";\n\n      if (value.id) {\n        ret = value.id;\n      } else if (this.is_date(value)) {\n        ret = value.valueOf();\n      } else {\n        ret = value;\n      }\n\n      return ret + \"\";\n    },\n    activate: function activate() {\n      this.clear();\n      this.active = true;\n    },\n    deactivate: function deactivate() {\n      this.clear();\n      this.active = false;\n    },\n    clear: function clear() {\n      this.cache = {};\n    },\n    setup: function setup(gantt) {\n      var override_gantt = [];\n      var gantt_methods = ['_isProjectEnd', '_getProjectEnd', '_getSlack'];\n\n      if (this.mode == 'auto') {\n        if (gantt.config.highlight_critical_path) {\n          override_gantt = gantt_methods;\n        }\n      } else if (this.mode === true) {\n        override_gantt = gantt_methods;\n      }\n\n      this.wrap_methods(override_gantt, gantt);\n    },\n    update_if_changed: function update_if_changed(gantt) {\n      var changed = this.critical_path_mode != gantt.config.highlight_critical_path || this.mode !== gantt.config.optimize_render;\n\n      if (changed) {\n        this.critical_path_mode = gantt.config.highlight_critical_path;\n        this.mode = gantt.config.optimize_render;\n        this.setup(gantt);\n      }\n    }\n  };\n\n  function activate() {\n    gantt._cached_functions.update_if_changed(gantt);\n\n    if (!gantt._cached_functions.active) {\n      gantt._cached_functions.activate();\n    }\n\n    return true;\n  }\n\n  gantt.attachEvent(\"onBeforeGanttRender\", activate);\n  gantt.attachEvent(\"onBeforeDataRender\", activate);\n  gantt.attachEvent(\"onBeforeSmartRender\", function () {\n    activate();\n  });\n  gantt.attachEvent(\"onBeforeParse\", activate);\n  gantt.attachEvent(\"onDataRender\", function () {\n    gantt._cached_functions.deactivate();\n  });\n  var deactivTimeout = null;\n  gantt.attachEvent(\"onSmartRender\", function () {\n    if (deactivTimeout) clearTimeout(deactivTimeout);\n    deactivTimeout = setTimeout(function () {\n      gantt._cached_functions.deactivate();\n    }, 1000);\n  });\n  gantt.attachEvent(\"onBeforeGanttReady\", function () {\n    gantt._cached_functions.update_if_changed(gantt);\n\n    return true;\n  });\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nmodule.exports = function (gantt) {\n  gantt.getTaskType = function (type) {\n    var checkType = type;\n\n    if (type && _typeof(type) == \"object\") {\n      checkType = type.type;\n    }\n\n    for (var i in this.config.types) {\n      if (this.config.types[i] == checkType) {\n        return checkType;\n      }\n    }\n\n    return gantt.config.types.task;\n  };\n};","// all builds except for evaluation version get this mockup\r\n// the evaluation build gets actual codes\r\nexport default () => {};","var helpers = require(\"../utils/helpers\");\n\nmodule.exports = function (gantt) {\n  gantt.isUnscheduledTask = function (task) {\n    gantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\" + task + \" of gantt.isUnscheduledTask. Task object was expected\");\n    return !!task.unscheduled || !task.start_date;\n  };\n\n  gantt._isAllowedUnscheduledTask = function (task) {\n    return !!(task.unscheduled && gantt.config.show_unscheduled);\n  };\n\n  gantt._isTaskInTimelineLimits = function (task) {\n    var taskStart = task.start_date ? task.start_date.valueOf() : null;\n    var taskEnd = task.end_date ? task.end_date.valueOf() : null;\n    return !!(taskStart && taskEnd && taskStart <= this._max_date.valueOf() && taskEnd >= this._min_date.valueOf());\n  };\n\n  gantt.isTaskVisible = function (id) {\n    if (!this.isTaskExists(id)) {\n      return false;\n    }\n\n    var task = this.getTask(id);\n\n    if (!(this._isAllowedUnscheduledTask(task) || this._isTaskInTimelineLimits(task))) {\n      return false;\n    }\n\n    return !!(this.getGlobalTaskIndex(id) >= 0);\n  };\n\n  gantt._getProjectEnd = function () {\n    if (gantt.config.project_end) {\n      return gantt.config.project_end;\n    } else {\n      var tasks = gantt.getTaskByTime();\n      tasks = tasks.sort(function (a, b) {\n        return +a.end_date > +b.end_date ? 1 : -1;\n      });\n      return tasks.length ? tasks[tasks.length - 1].end_date : null;\n    }\n  };\n\n  gantt._getProjectStart = function () {\n    if (gantt.config.project_start) {\n      return gantt.config.project_start;\n    } // use timeline start if project start is not specified\n\n\n    if (gantt.config.start_date) {\n      return gantt.config.start_date;\n    }\n\n    if (gantt.getState().min_date) {\n      return gantt.getState().min_date;\n    } // earliest task start if neither project start nor timeline are specified\n\n\n    var tasks = gantt.getTaskByTime();\n    tasks = tasks.sort(function (a, b) {\n      return +a.start_date > +b.start_date ? 1 : -1;\n    });\n    return tasks.length ? tasks[0].start_date : null;\n  };\n\n  var getDefaultTaskDate = function getDefaultTaskDate(item, parent_id) {\n    var parentExists = parent_id && parent_id != gantt.config.root_id && gantt.isTaskExists(parent_id);\n    var parent = parentExists ? gantt.getTask(parent_id) : false,\n        startDate = null;\n\n    if (parent) {\n      if (gantt.config.schedule_from_end) {\n        startDate = gantt.calculateEndDate({\n          start_date: parent.end_date,\n          duration: -gantt.config.duration_step,\n          task: item\n        });\n      } else {\n        startDate = parent.start_date;\n      }\n    } else if (gantt.config.schedule_from_end) {\n      startDate = gantt.calculateEndDate({\n        start_date: gantt._getProjectEnd(),\n        duration: -gantt.config.duration_step,\n        task: item\n      });\n    } else {\n      var first = gantt.getTaskByIndex(0);\n      startDate = first ? first.start_date ? first.start_date : first.end_date ? gantt.calculateEndDate({\n        start_date: first.end_date,\n        duration: -gantt.config.duration_step,\n        task: item\n      }) : null : gantt.config.start_date || gantt.getState().min_date;\n    }\n\n    gantt.assert(startDate, \"Invalid dates\");\n    return new Date(startDate);\n  };\n\n  gantt._set_default_task_timing = function (task) {\n    task.start_date = task.start_date || getDefaultTaskDate(task, gantt.getParent(task));\n    task.duration = task.duration || gantt.config.duration_step;\n    task.end_date = task.end_date || gantt.calculateEndDate(task);\n  };\n\n  gantt.createTask = function (item, parent, index) {\n    item = item || {};\n    if (!gantt.defined(item.id)) item.id = gantt.uid();\n\n    if (!item.start_date) {\n      item.start_date = getDefaultTaskDate(item, parent);\n    }\n\n    if (item.text === undefined) {\n      item.text = gantt.locale.labels.new_task;\n    }\n\n    if (item.duration === undefined) {\n      item.duration = 1;\n    }\n\n    if (this.isTaskExists(parent)) {\n      this.setParent(item, parent, true);\n      var parentObj = this.getTask(parent);\n      parentObj.$open = true;\n    }\n\n    if (!this.callEvent(\"onTaskCreated\", [item])) {\n      return null;\n    }\n\n    if (this.config.details_on_create) {\n      //GS-761: assert unique ID\n      if (gantt.isTaskExists(item.id)) {\n        var task = gantt.getTask(item.id);\n\n        if (task.$index != item.$index) {\n          // Someone may try to mistakenly add a task with the same ID, and most likely\n          // use the string format for the dates. Gantt shouldn't break in this scenario\n          if (item.start_date && typeof item.start_date === \"string\") {\n            item.start_date = this.date.parseDate(item.start_date, \"parse_date\");\n          }\n\n          if (item.end_date && typeof item.end_date === \"string\") {\n            item.end_date = this.date.parseDate(item.end_date, \"parse_date\");\n          }\n\n          this.$data.tasksStore.updateItem(item.id, item);\n        }\n      } else {\n        item.$new = true;\n        this.silent(function () {\n          gantt.$data.tasksStore.addItem(item, index);\n        });\n      }\n\n      this.selectTask(item.id);\n      this.refreshData();\n      this.showLightbox(item.id);\n    } else {\n      if (this.addTask(item, parent, index)) {\n        this.showTask(item.id);\n        this.selectTask(item.id);\n      }\n    }\n\n    return item.id;\n  };\n\n  gantt._update_flags = function (oldid, newid) {\n    //  TODO: need a proper way to update all possible flags\n    var store = gantt.$data.tasksStore;\n\n    if (oldid === undefined) {\n      this._lightbox_id = null;\n      store.silent(function () {\n        store.unselect();\n      }); // GS-1522. If we have multiselect, unselect all previously selected tasks\n\n      if (this.getSelectedTasks) {\n        this._multiselect.reset();\n      }\n\n      if (this._tasks_dnd && this._tasks_dnd.drag) {\n        this._tasks_dnd.drag.id = null;\n      }\n    } else {\n      if (this._lightbox_id == oldid) this._lightbox_id = newid; // TODO: probably can be removed\n\n      if (store.getSelectedId() == oldid) {\n        store.silent(function () {\n          store.unselect(oldid);\n          store.select(newid);\n        });\n      }\n\n      if (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\n        this._tasks_dnd.drag.id = newid;\n      }\n    }\n  };\n\n  var getTaskTimingMode = function getTaskTimingMode(task, force) {\n    var task_type = gantt.getTaskType(task.type);\n    var state = {\n      type: task_type,\n      $no_start: false,\n      $no_end: false\n    };\n\n    if (!force && task_type == task.$rendered_type) {\n      state.$no_start = task.$no_start;\n      state.$no_end = task.$no_end;\n      return state;\n    }\n\n    if (task_type == gantt.config.types.project) {\n      //project duration is always defined by children duration\n      state.$no_end = state.$no_start = true;\n    } else if (task_type != gantt.config.types.milestone) {\n      //tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\n      state.$no_end = !(task.end_date || task.duration);\n      state.$no_start = !task.start_date;\n\n      if (gantt._isAllowedUnscheduledTask(task)) {\n        state.$no_end = state.$no_start = false;\n      }\n    }\n\n    return state;\n  };\n\n  gantt._init_task_timing = function (task) {\n    var task_mode = getTaskTimingMode(task, true);\n    var dirty = task.$rendered_type != task_mode.type;\n    var task_type = task_mode.type;\n\n    if (dirty) {\n      task.$no_start = task_mode.$no_start;\n      task.$no_end = task_mode.$no_end;\n      task.$rendered_type = task_mode.type;\n    }\n\n    if (dirty && task_type != this.config.types.milestone) {\n      if (task_type == this.config.types.project) {\n        //project duration is always defined by children duration\n        this._set_default_task_timing(task);\n\n        task.$calculate_duration = false; // do not recalculate duration below\n      }\n    }\n\n    if (task_type == this.config.types.milestone) {\n      task.end_date = task.start_date;\n    }\n\n    if (task.start_date && task.end_date && task.$calculate_duration !== false) {\n      task.duration = this.calculateDuration(task);\n    }\n\n    if (!task.$calculate_duration) {\n      task.$calculate_duration = true;\n    }\n\n    if (!task.end_date) {\n      task.end_date = task.start_date;\n    }\n\n    task.duration = task.duration || 0; // GS-1145. We should let tasks to have 0 duration if user wants it\n\n    if (this.config.min_duration === 0 && task.duration === 0) {\n      task.$no_end = false;\n    } // work calendar of task has changed\n\n\n    var effectiveCalendar = this.getTaskCalendar(task);\n\n    if (task.$effective_calendar && task.$effective_calendar !== effectiveCalendar.id) {\n      updateTaskTiming(task);\n\n      if (this.config.inherit_calendar && this.isSummaryTask(task)) {\n        this.eachTask(function (child) {\n          updateTaskTiming(child);\n        }, task.id);\n      }\n    }\n\n    task.$effective_calendar = effectiveCalendar.id;\n  };\n\n  function updateTaskTiming(task) {\n    task.$effective_calendar = gantt.getTaskCalendar(task).id;\n    task.start_date = gantt.getClosestWorkTime({\n      dir: \"future\",\n      date: task.start_date,\n      unit: gantt.config.duration_unit,\n      task: task\n    });\n    task.end_date = gantt.calculateEndDate(task);\n  }\n\n  gantt.isSummaryTask = function (task) {\n    gantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\" + task + \" of gantt.isSummaryTask. Task object was expected\");\n    var mode = getTaskTimingMode(task);\n    return !!(mode.$no_end || mode.$no_start);\n  }; // downward calculation of project duration\n\n\n  gantt.resetProjectDates = function (task) {\n    var taskMode = getTaskTimingMode(task);\n\n    if (taskMode.$no_end || taskMode.$no_start) {\n      var info = getSubtaskInfo(task.id);\n      assignProjectDates.call(this, task, taskMode, info.start_date, info.end_date);\n      task.$rollup = info.rollup;\n    }\n  };\n\n  function assignProjectDates(task, taskTiming, from, to) {\n    if (taskTiming.$no_start) {\n      if (from) {\n        task.start_date = new Date(from);\n      } else {\n        task.start_date = getDefaultTaskDate(task, this.getParent(task));\n      }\n    }\n\n    if (taskTiming.$no_end) {\n      if (to) {\n        task.end_date = new Date(to);\n      } else {\n        task.end_date = this.calculateEndDate({\n          start_date: task.start_date,\n          duration: this.config.duration_step,\n          task: task\n        });\n      }\n    }\n\n    if (taskTiming.$no_start || taskTiming.$no_end) {\n      this._init_task_timing(task);\n    }\n  }\n\n  gantt.getSubtaskDuration = function (taskId) {\n    var res = 0,\n        root = taskId !== undefined ? taskId : gantt.config.root_id;\n    this.eachTask(function (child) {\n      if (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child)) return;\n      res += child.duration;\n    }, root);\n    return res;\n  };\n\n  function getSubtaskInfo(taskId) {\n    var min = null,\n        max = null,\n        root = taskId !== undefined ? taskId : gantt.config.root_id,\n        rollup = [];\n    gantt.eachTask(function (child) {\n      if (gantt.getTaskType(child.type) == gantt.config.types.project || gantt.isUnscheduledTask(child)) return;\n\n      if (child.rollup) {\n        rollup.push(child.id);\n      }\n\n      if (child.start_date && !child.$no_start && (!min || min > child.start_date.valueOf())) min = child.start_date.valueOf();\n      if (child.end_date && !child.$no_end && (!max || max < child.end_date.valueOf())) max = child.end_date.valueOf();\n    }, root);\n    return {\n      start_date: min ? new Date(min) : null,\n      end_date: max ? new Date(max) : null,\n      rollup: rollup\n    };\n  }\n\n  gantt.getSubtaskDates = function (task_id) {\n    var info = getSubtaskInfo(task_id);\n    return {\n      start_date: info.start_date,\n      end_date: info.end_date\n    };\n  }; // upward calculation of project duration\n\n\n  gantt._update_parents = function (taskId, silent, updateAll) {\n    if (!taskId) return;\n    var task = this.getTask(taskId);\n\n    if (task.rollup) {\n      updateAll = true;\n    }\n\n    var pid = this.getParent(task);\n    var taskTiming = getTaskTimingMode(task);\n    var has_changed = true; // GS-761 the dates check is necessary for adding empty tasks: gantt.addTask({id:\"2\"})\n\n    if (updateAll || task.start_date && task.end_date && (taskTiming.$no_start || taskTiming.$no_end)) {\n      var oldStart = task.start_date.valueOf(),\n          oldEnd = task.end_date.valueOf();\n      gantt.resetProjectDates(task); // not refresh parent projects if dates hasn't changed\n\n      if (!updateAll && oldStart == task.start_date.valueOf() && oldEnd == task.end_date.valueOf()) {\n        has_changed = false;\n      }\n\n      if (has_changed && !silent) {\n        this.refreshTask(task.id, true);\n      }\n    }\n\n    if (has_changed && pid && this.isTaskExists(pid)) {\n      this._update_parents(pid, silent, updateAll);\n    }\n  };\n\n  gantt.roundDate = function (config) {\n    var scale = gantt.getScale();\n\n    if (helpers.isDate(config)) {\n      config = {\n        date: config,\n        unit: scale ? scale.unit : gantt.config.duration_unit,\n        step: scale ? scale.step : gantt.config.duration_step\n      };\n    }\n\n    var date = config.date,\n        steps = config.step,\n        unit = config.unit;\n\n    if (!scale) {\n      return date;\n    }\n\n    var upper, lower, colIndex;\n\n    if (unit == scale.unit && steps == scale.step && +date >= +scale.min_date && +date <= +scale.max_date) {\n      //find date in time scale config\n      colIndex = Math.floor(gantt.columnIndexByDate(date));\n\n      if (!scale.trace_x[colIndex]) {\n        colIndex -= 1; // end of time scale\n\n        if (scale.rtl) {\n          colIndex = 0;\n        }\n      }\n\n      lower = new Date(scale.trace_x[colIndex]);\n      upper = gantt.date.add(lower, steps, unit);\n    } else {\n      colIndex = Math.floor(gantt.columnIndexByDate(date));\n      upper = gantt.date[unit + \"_start\"](new Date(scale.min_date));\n\n      if (scale.trace_x[colIndex]) {\n        upper = gantt.date[unit + \"_start\"](scale.trace_x[colIndex]); // end of time scale\n      }\n\n      while (+upper < +date) {\n        upper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\n        var tzOffset = upper.getTimezoneOffset();\n        upper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\n        if (gantt.date[unit + '_start']) upper = gantt.date[unit + '_start'](upper);\n      }\n\n      lower = gantt.date.add(upper, -1 * steps, unit);\n    }\n\n    if (config.dir && config.dir == 'future') return upper;\n    if (config.dir && config.dir == 'past') return lower;\n\n    if (Math.abs(date - lower) < Math.abs(upper - date)) {\n      return lower;\n    } else {\n      return upper;\n    }\n  };\n\n  gantt.correctTaskWorkTime = function (task) {\n    if (gantt.config.work_time && gantt.config.correct_work_time) {\n      if (!this.isWorkTime(task.start_date, undefined, task)) {\n        task.start_date = this.getClosestWorkTime({\n          date: task.start_date,\n          dir: 'future',\n          task: task\n        });\n        task.end_date = this.calculateEndDate(task);\n      } else if (!this.isWorkTime(new Date(+task.end_date - 1), undefined, task)) {\n        task.end_date = this.calculateEndDate(task);\n      }\n    }\n  };\n\n  gantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\n    gantt._init_task_timing(task);\n\n    return true;\n  });\n  gantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\n    gantt._init_task_timing(task);\n\n    return true;\n  });\n  gantt.attachEvent(\"onAfterTaskMove\", function (id, parent, tindex) {\n    gantt._init_task_timing(gantt.getTask(id));\n\n    return true;\n  });\n};","// TODO: rework public api for date methods\nvar utils = require(\"../../utils/utils\");\n\nvar createWorkTimeFacade = function createWorkTimeFacade(calendarManager, timeCalculator) {\n  return {\n    getWorkHours: function getWorkHours(date) {\n      return timeCalculator.getWorkHours(date);\n    },\n    setWorkTime: function setWorkTime(config) {\n      return timeCalculator.setWorkTime(config);\n    },\n    unsetWorkTime: function unsetWorkTime(config) {\n      timeCalculator.unsetWorkTime(config);\n    },\n    isWorkTime: function isWorkTime(date, unit, task) {\n      return timeCalculator.isWorkTime(date, unit, task);\n    },\n    getClosestWorkTime: function getClosestWorkTime(config) {\n      return timeCalculator.getClosestWorkTime(config);\n    },\n    calculateDuration: function calculateDuration(start_date, end_date, task) {\n      return timeCalculator.calculateDuration(start_date, end_date, task);\n    },\n    _hasDuration: function _hasDuration(start_date, end_date, task) {\n      return timeCalculator.hasDuration(start_date, end_date, task);\n    },\n    calculateEndDate: function calculateEndDate(start, duration, unit, task) {\n      return timeCalculator.calculateEndDate(start, duration, unit, task);\n    },\n    mergeCalendars: utils.bind(calendarManager.mergeCalendars, calendarManager),\n    createCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\n    addCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\n    getCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\n    getCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\n    getResourceCalendar: utils.bind(calendarManager.getResourceCalendar, calendarManager),\n    getTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\n    deleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\n  };\n};\n\nmodule.exports = {\n  create: createWorkTimeFacade\n};","function CalendarDisabledTimeStrategy(gantt, argumentsHelper) {\n  this.argumentsHelper = argumentsHelper;\n  this.$gantt = gantt;\n}\n\nCalendarDisabledTimeStrategy.prototype = {\n  getWorkHours: function getWorkHours() {\n    return [0, 24];\n  },\n  setWorkTime: function setWorkTime() {\n    return true;\n  },\n  unsetWorkTime: function unsetWorkTime() {\n    return true;\n  },\n  isWorkTime: function isWorkTime() {\n    return true;\n  },\n  getClosestWorkTime: function getClosestWorkTime(config) {\n    var config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\n    return config.date;\n  },\n  calculateDuration: function calculateDuration() {\n    var config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\n    var from = config.start_date,\n        to = config.end_date,\n        unit = config.unit,\n        step = config.step;\n    return this._calculateDuration(from, to, unit, step);\n  },\n  _calculateDuration: function _calculateDuration(start, end, unit, step) {\n    var dateHelper = this.$gantt.date;\n    var fixedUnits = {\n      \"week\": 1000 * 60 * 60 * 24 * 7,\n      \"day\": 1000 * 60 * 60 * 24,\n      \"hour\": 1000 * 60 * 60,\n      \"minute\": 1000 * 60\n    };\n    var res = 0;\n\n    if (fixedUnits[unit]) {\n      res = Math.round((end - start) / (step * fixedUnits[unit]));\n    } else {\n      var from = new Date(start),\n          to = new Date(end);\n\n      while (from.valueOf() < to.valueOf()) {\n        res += 1;\n        from = dateHelper.add(from, step, unit);\n      }\n\n      if (from.valueOf() != end.valueOf()) {\n        res += (to - from) / (dateHelper.add(from, step, unit) - from);\n      }\n    }\n\n    return Math.round(res);\n  },\n  hasDuration: function hasDuration() {\n    var config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\n    var from = config.start_date,\n        to = config.end_date,\n        unit = config.unit;\n\n    if (!unit) {\n      return false;\n    }\n\n    from = new Date(from);\n    to = new Date(to);\n    return from.valueOf() < to.valueOf();\n  },\n  hasWorkTime: function hasWorkTime() {\n    return true;\n  },\n  equals: function equals(calendar) {\n    if (!(calendar instanceof CalendarDisabledTimeStrategy)) {\n      return false;\n    }\n\n    return true;\n  },\n  calculateEndDate: function calculateEndDate() {\n    var config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\n    var start = config.start_date,\n        duration = config.duration,\n        unit = config.unit,\n        step = config.step;\n    return this.$gantt.date.add(start, step * duration, unit);\n  }\n};\nmodule.exports = CalendarDisabledTimeStrategy;","var createArgumentsHelper = require(\"./calendar_arguments_helper\"),\n    NoWorkTimeCalendar = require(\"./strategy/no_work_time\");\n\nfunction TimeCalculator(calendarManager) {\n  this.$gantt = calendarManager.$gantt;\n  this.argumentsHelper = createArgumentsHelper(this.$gantt);\n  this.calendarManager = calendarManager;\n  this.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\n}\n\nTimeCalculator.prototype = {\n  _getCalendar: function _getCalendar(config) {\n    var calendar;\n\n    if (!this.$gantt.config.work_time) {\n      calendar = this.$disabledCalendar;\n    } else {\n      var manager = this.calendarManager;\n\n      if (config.task) {\n        calendar = manager.getTaskCalendar(config.task);\n      } else if (config.id) {\n        calendar = manager.getTaskCalendar(config);\n      } else if (config.calendar) {\n        calendar = config.calendar;\n      }\n\n      if (!calendar) {\n        calendar = manager.getTaskCalendar();\n      }\n    }\n\n    return calendar;\n  },\n  getWorkHours: function getWorkHours(config) {\n    config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\n\n    var calendar = this._getCalendar(config);\n\n    return calendar.getWorkHours(config.date);\n  },\n  setWorkTime: function setWorkTime(config, calendar) {\n    config = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\n    if (!calendar) calendar = this.calendarManager.getCalendar(); // Global\n\n    return calendar.setWorkTime(config);\n  },\n  unsetWorkTime: function unsetWorkTime(config, calendar) {\n    config = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\n    if (!calendar) calendar = this.calendarManager.getCalendar(); // Global\n\n    return calendar.unsetWorkTime(config);\n  },\n  isWorkTime: function isWorkTime(date, unit, task, calendar) {\n    var config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\n    calendar = this._getCalendar(config);\n    return calendar.isWorkTime(config);\n  },\n  getClosestWorkTime: function getClosestWorkTime(config) {\n    config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\n\n    var calendar = this._getCalendar(config);\n\n    return calendar.getClosestWorkTime(config);\n  },\n  calculateDuration: function calculateDuration() {\n    // start_date_date, end_date, task\n    var config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\n\n    var calendar = this._getCalendar(config);\n\n    return calendar.calculateDuration(config);\n  },\n  hasDuration: function hasDuration() {\n    var config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\n\n    var calendar = this._getCalendar(config);\n\n    return calendar.hasDuration(config);\n  },\n  calculateEndDate: function calculateEndDate(config) {\n    // start_date, duration, unit, task\n    var config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\n\n    var calendar = this._getCalendar(config);\n\n    return calendar.calculateEndDate(config);\n  }\n};\nmodule.exports = TimeCalculator;","module.exports = function () {\n  function getResourcesCalendarKey(resourceAssignments) {\n    return resourceAssignments.map(function (res) {\n      if (res && res.resource_id) {\n        return res.resource_id;\n      } else {\n        return res;\n      }\n    }).sort().join(\"-\");\n  }\n\n  var dynamicCalendars = {};\n\n  function mergeResourceCalendars(resourceAssignments, manager) {\n    return manager.mergeCalendars(resourceAssignments.map(function (assignment) {\n      var resourceId = assignment && assignment.resource_id ? assignment.resource_id : assignment;\n      return manager.getResourceCalendar(resourceId);\n    }));\n  }\n\n  function getCalendarIdFromMultipleResources(resourceAssignments, manager) {\n    var key = getResourcesCalendarKey(resourceAssignments);\n\n    if (!resourceAssignments.length) {\n      return null;\n    } else if (resourceAssignments.length === 1) {\n      return manager.getResourceCalendar(key).id;\n    } else if (dynamicCalendars[key]) {\n      return dynamicCalendars[key].id;\n    } else {\n      var tempCalendar = mergeResourceCalendars(resourceAssignments, manager);\n      dynamicCalendars[key] = tempCalendar;\n      return manager.addCalendar(tempCalendar);\n    }\n  }\n\n  return {\n    getCalendarIdFromMultipleResources: getCalendarIdFromMultipleResources\n  };\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nmodule.exports = {\n  isLegacyResourceCalendarFormat: function isLegacyResourceCalendarFormat(resourceCalendarsProperty) {\n    // modern format:\n    //gantt.config.resource_calendars = {\n    //\tresourceId: calendarId,\n    //\tresourceId: calendarId,\n    //\tresourceId: calendarId\n    //\t};\n    // legacy format:\n    // gantt.config.resource_calendars = {\n    //\t\"resourceProperty\": {\n    //\t\tresourceId: calendarId,\n    //\t\tresourceId: calendarId,\n    //\t\tresourceId: calendarId\n    //\t\t}\n    //\t};\n    if (!resourceCalendarsProperty) {\n      return false;\n    }\n\n    for (var i in resourceCalendarsProperty) {\n      if (resourceCalendarsProperty[i] && _typeof(resourceCalendarsProperty[i]) === \"object\") {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  getResourceProperty: function getResourceProperty(config) {\n    var resourceCalendarsConfig = config.resource_calendars;\n    var propertyName = config.resource_property;\n\n    if (this.isLegacyResourceCalendarFormat(resourceCalendarsConfig)) {\n      for (var i in config) {\n        propertyName = i;\n        break;\n      }\n    }\n\n    return propertyName;\n  },\n  getCalendarIdFromLegacyConfig: function getCalendarIdFromLegacyConfig(task, config) {\n    if (config) {\n      for (var field in config) {\n        var resource = config[field];\n\n        if (task[field]) {\n          var calendarId = resource[task[field]];\n\n          if (calendarId) {\n            return calendarId;\n          }\n        }\n      }\n    }\n\n    return null;\n  }\n};","export class DateDurationCache  {\r\n\tprivate _cache: any;\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\t_getCacheObject(startDate: Date, unit: string, step:number){\r\n\t\tconst cache = this._cache;\r\n\t\tif (!cache[unit]) {\r\n\t\t\tcache[unit] = [];\r\n\t\t}\r\n\t\tlet unitCache = cache[unit];\r\n\t\tif(!unitCache) {\r\n\t\t\tunitCache = cache[unit] = {};\r\n\t\t}\r\n\r\n\t\tlet stepCache = unitCache[step];\r\n\t\tif(!stepCache) {\r\n\t\t\tstepCache = unitCache[step] = {};\r\n\t\t}\r\n\r\n\t\tconst year = startDate.getFullYear();\r\n\t\tlet yearCache = stepCache[year];\r\n\t\tif(!yearCache){\r\n\t\t\tyearCache = stepCache[year] = {durations: {}, endDates: {}};\r\n\t\t}\r\n\r\n\t\treturn yearCache;\r\n\t}\r\n\t_endDateCacheKey(startDate: number, duration: number){\r\n\t\treturn String(startDate) + \"-\" + String(duration);\r\n\t}\r\n\t_durationCacheKey(startDate: number, endDate: number){\r\n\t\treturn String(startDate) + \"-\" + String(endDate);\r\n\t}\r\n\tgetEndDate(startDate: Date, duration: number, unit: string, step: number, compute: () => Date): number|null{\r\n\t\tconst cache = this._getCacheObject(startDate, unit, step);\r\n\r\n\t\tconst startDateTimestamp = startDate.valueOf();\r\n\t\tconst key = this._endDateCacheKey(startDateTimestamp, duration);\r\n\t\tlet endDate;\r\n\t\tif(cache.endDates[key] === undefined){\r\n\t\t\tconst result = compute();\r\n\t\t\tconst resultTimestamp = result.valueOf();\r\n\t\t\tcache.endDates[key] = resultTimestamp;\r\n\t\t\tcache.durations[this._durationCacheKey(startDateTimestamp, resultTimestamp)] = duration;\r\n\t\t\tendDate = result;\r\n\t\t}else{\r\n\t\t\tendDate = new Date(cache.endDates[key]);\r\n\t\t}\r\n\r\n\t\treturn endDate;\r\n\t}\r\n\r\n\tgetDuration(startDate: Date, endDate: Date, unit: string, step: number, compute: () => number): number|null{\r\n\t\tconst cache = this._getCacheObject(startDate, unit, step);\r\n\r\n\t\tconst startDateTimestamp = startDate.valueOf();\r\n\t\tconst endDateTimestamp = endDate.valueOf();\r\n\t\tconst key = this._durationCacheKey(startDateTimestamp, endDateTimestamp);\r\n\t\tlet duration;\r\n\t\tif(cache.durations[key] === undefined){\r\n\t\t\tconst result = compute();\r\n\t\t\tcache.durations[key] = result.valueOf();\r\n\r\n\t\t\t// can't populate end date due to logic of end date calculation, current unit tests capture it\r\n\t\t\t// cache.endDates[this._endDateCacheKey(startDateTimestamp, result)] = endDateTimestamp;\r\n\t\t\tduration = result;\r\n\t\t}else{\r\n\t\t\tduration = cache.durations[key];\r\n\t\t}\r\n\r\n\t\treturn duration;\r\n\t}\r\n\r\n\tclear(): void{\r\n\t\tthis._cache = {};\r\n\t}\r\n}","\r\n\r\nexport class LargerUnitsCache {\r\n\tprivate _weekCache: Map<number, number>;\r\n\tprivate _monthCache: Map<number, number>;\r\n\tprivate _calendar: any;\r\n\tconstructor(calendar) {\r\n\t\tthis.clear();\r\n\t\tthis._calendar = calendar;\r\n\t}\r\n\r\n\tgetMinutesPerWeek = (weekStart: Date) => {\r\n\t\tconst key = weekStart.valueOf();\r\n\r\n\t\tif(this._weekCache.has(key)){\r\n\t\t\treturn this._weekCache.get(key);\r\n\t\t}\r\n\r\n\t\tconst calendar = this._calendar;\r\n\t\tconst gantt = this._calendar.$gantt;\r\n\r\n\t\tlet minutesPerWeek = 0;\r\n\t\tlet start = gantt.date.week_start(new Date(weekStart));\r\n\t\tfor(let i = 0; i < 7; i++){\r\n\t\t\tminutesPerWeek += calendar.getHoursPerDay(start) * 60;\r\n\t\t\tstart = gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\r\n\t\tthis._weekCache.set(key, minutesPerWeek);\r\n\t\treturn minutesPerWeek;\r\n\t}\r\n\r\n\tgetMinutesPerMonth = (monthStart: Date) => {\r\n\t\tconst key = monthStart.valueOf();\r\n\r\n\t\tif(this._monthCache.has(key)){\r\n\t\t\treturn this._monthCache.get(key);\r\n\t\t}\r\n\r\n\t\tconst calendar = this._calendar;\r\n\t\tconst gantt = this._calendar.$gantt;\r\n\r\n\t\tlet minutesPerMonth = 0;\r\n\t\tlet start = gantt.date.week_start(new Date(monthStart));\r\n\t\tconst nextMonth = gantt.date.add(start, 1, \"month\").valueOf();\r\n\t\twhile(start.valueOf() < nextMonth){\r\n\t\t\tminutesPerMonth += calendar.getHoursPerDay(start) * 60;\r\n\t\t\tstart = gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\r\n\t\tthis._monthCache.set(key, minutesPerMonth);\r\n\t\treturn minutesPerMonth;\r\n\t}\r\n\r\n\tclear = (): void => {\r\n\t\tthis._weekCache = new Map<number, number>();\r\n\t\tthis._monthCache = new Map<number, number>();\r\n\t}\r\n}","import { IWorkUnitCache } from \"./workunit_cache_interface\";\r\n\r\nexport class WorkUnitsObjectCache implements IWorkUnitCache {\r\n\tprivate _cache: any;\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tgetItem(unit: string, timestamp: string, value: Date): number|boolean {\r\n\t\tconst cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tconst units = cache[unit];\r\n\t\t\tif(units === undefined){\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tconst subCache = units[value.getFullYear()];\r\n\t\t\tif (subCache && subCache[timestamp] !== undefined) {\r\n\t\t\t\treturn subCache[timestamp];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\tsetItem(unit: string, timestamp: string, value: boolean, rawValue: Date): void {\r\n\t\tif (!unit || !timestamp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst cache = this._cache;\r\n\r\n\t\tif (!cache) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!cache[unit]) {\r\n\t\t\tcache[unit] = [];\r\n\t\t}\r\n\t\tconst unitCache = cache[unit];\r\n\r\n\t\tconst year = rawValue.getFullYear();\r\n\t\tlet yearCache = unitCache[year];\r\n\t\tif(!yearCache){\r\n\t\t\tyearCache = unitCache[year] = {};\r\n\t\t}\r\n\t\tyearCache[timestamp] = value;\r\n\t}\r\n\tclear(): void{\r\n\t\tthis._cache = {};\r\n\t}\r\n}","\r\n\r\nimport { IWorkUnitCache } from \"./workunit_cache_interface\";\r\n\r\nexport class WorkUnitsMapCache implements IWorkUnitCache {\r\n\tprivate _cache: Map<string, Array<Map<string, boolean>>>;\r\n\tconstructor() {\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\tgetItem(unit: string, timestamp: string, value: Date): number|boolean {\r\n\t\tif (this._cache.has(unit)) {\r\n\t\t\tconst unitCache = this._cache.get(unit);\r\n\r\n\t\t\tconst subCache = unitCache[value.getFullYear()];\r\n\t\t\tif (subCache && subCache.has(timestamp)) {\r\n\t\t\t\treturn subCache.get(timestamp);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\tsetItem(unit: string, timestamp: string, value: boolean, rawValue: Date): void {\r\n\t\tif (!unit || !timestamp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst cache = this._cache;\r\n\t\tconst year = rawValue.getFullYear();\r\n\r\n\t\tlet unitCache;\r\n\t\tif (!cache.has(unit)) {\r\n\t\t\tunitCache = [];\r\n\t\t\tcache.set(unit, unitCache);\r\n\t\t} else {\r\n\t\t\tunitCache = cache.get(unit);\r\n\t\t}\r\n\r\n\t\tlet yearCache = unitCache[year];\r\n\t\tif(!yearCache){\r\n\t\t\tyearCache = unitCache[year] = new Map<string, boolean>();\r\n\t\t}\r\n\r\n\r\n\t\tyearCache.set(timestamp, value);\r\n\t}\r\n\tclear(): void{\r\n\t\tthis._cache = new Map<string, Array<Map<string, boolean>>>();\r\n\t}\r\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar createCacheObject = require(\"./work_unit_cache\").createCacheObject;\n\nvar LargerUnitsCache = require(\"./work_unit_cache\").LargerUnitsCache;\n\nvar utils = require(\"../../../utils/utils\");\n\nvar DateDurationCache = require(\"./work_unit_cache/date_duration_cache\").DateDurationCache;\n\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper) {\n  this.argumentsHelper = argumentsHelper;\n  this.$gantt = gantt;\n  this._workingUnitsCache = createCacheObject();\n  this._largeUnitsCache = new LargerUnitsCache(this);\n  this._dateDurationCache = new DateDurationCache();\n  this._worktime = null;\n  this._cached_timestamps = {};\n  this._cached_timestamps_count = 0;\n}\n\nCalendarWorkTimeStrategy.prototype = {\n  units: [\"year\", \"month\", \"week\", \"day\", \"hour\", \"minute\"],\n  _clearCaches: function _clearCaches() {\n    this._workingUnitsCache.clear();\n\n    this._largeUnitsCache.clear();\n\n    this._dateDurationCache.clear();\n  },\n  // cache previously calculated worktime\n  _getUnitOrder: function _getUnitOrder(unit) {\n    for (var i = 0, len = this.units.length; i < len; i++) {\n      if (this.units[i] == unit) return i;\n    }\n  },\n  _resetTimestampCache: function _resetTimestampCache() {\n    this._cached_timestamps = {};\n    this._cached_timestamps_count = 0;\n  },\n  _timestamp: function _timestamp(settings) {\n    // minor optimization, store calculated timestamps to reduce computations\n    // reset cache when number of keys exceeds large number where key lookup may became more expensive than the recalculation\n    if (this._cached_timestamps_count > 1000000) {\n      this._resetTimestampCache();\n    }\n\n    var timestamp = null;\n\n    if (settings.day || settings.day === 0) {\n      timestamp = settings.day;\n    } else if (settings.date) {\n      var value = String(settings.date.valueOf());\n\n      if (this._cached_timestamps[value]) {\n        timestamp = this._cached_timestamps[value];\n      } else {\n        // store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\n        timestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\n        this._cached_timestamps[value] = timestamp;\n        this._cached_timestamps_count++;\n      }\n    }\n\n    return timestamp;\n  },\n  _checkIfWorkingUnit: function _checkIfWorkingUnit(date, unit) {\n    // GS-596: If unit is larger than day or has a custom logic\n    if (!this[\"_is_work_\" + unit]) {\n      var from = this.$gantt.date[\"\".concat(unit, \"_start\")](new Date(date));\n      var to = this.$gantt.date.add(from, 1, unit);\n      return this.hasDuration(from, to);\n    }\n\n    return this[\"_is_work_\" + unit](date);\n  },\n  //checkings for particular time units\n  //methods for month-year-week can be defined, otherwise always return 'true'\n  _is_work_day: function _is_work_day(date) {\n    var val = this._getWorkHours(date);\n\n    if (Array.isArray(val)) {\n      return val.length > 0;\n    }\n\n    return false;\n  },\n  _is_work_hour: function _is_work_hour(date) {\n    var hours = this._getWorkHours(date); // [{start: 8*60*60, end: 12*60*60}, {start: 13*60*60, end: 17*60*60}]\n\n\n    var value = date.getHours();\n\n    for (var i = 0; i < hours.length; i++) {\n      if (value >= hours[i].startHour && value < hours[i].endHour) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  _getTimeOfDayStamp: function _getTimeOfDayStamp(date, dayEnd) {\n    var hours = date.getHours();\n\n    if (!date.getHours() && !date.getMinutes() && dayEnd) {\n      hours = 24;\n    }\n\n    return hours * 60 * 60 + date.getMinutes() * 60;\n  },\n  _is_work_minute: function _is_work_minute(date) {\n    var hours = this._getWorkHours(date); // [{start: 8*60*60, end: 12*60*60}, {start: 13*60*60, end: 17*60*60}]\n\n\n    var checkTime = this._getTimeOfDayStamp(date);\n\n    for (var i = 0; i < hours.length; i++) {\n      if (checkTime >= hours[i].start && checkTime < hours[i].end) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  _nextDate: function _nextDate(start, unit, step) {\n    return this.$gantt.date.add(start, step, unit);\n  },\n  _getWorkUnitsBetweenGeneric: function _getWorkUnitsBetweenGeneric(from, to, unit, step) {\n    var dateHelper = this.$gantt.date;\n    var start = new Date(from),\n        end = new Date(to);\n    step = step || 1;\n    var units = 0;\n    var next = null;\n    var stepStart, stepEnd; // calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\n    // and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\n    // durations must be rounded later\n\n    var checkFirst = false;\n    stepStart = dateHelper[unit + \"_start\"](new Date(start));\n\n    if (stepStart.valueOf() != start.valueOf()) {\n      checkFirst = true;\n    }\n\n    var checkLast = false;\n    stepEnd = dateHelper[unit + \"_start\"](new Date(to));\n\n    if (stepEnd.valueOf() != to.valueOf()) {\n      checkLast = true;\n    }\n\n    var isLastStep = false;\n\n    while (start.valueOf() < end.valueOf()) {\n      next = this._nextDate(start, unit, step);\n      isLastStep = next.valueOf() > end.valueOf();\n\n      if (this._isWorkTime(start, unit)) {\n        if (checkFirst || checkLast && isLastStep) {\n          stepStart = dateHelper[unit + \"_start\"](new Date(start));\n          stepEnd = dateHelper.add(stepStart, step, unit);\n        }\n\n        if (checkFirst) {\n          checkFirst = false;\n          next = this._nextDate(stepStart, unit, step);\n          units += (stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf());\n        } else if (checkLast && isLastStep) {\n          checkLast = false;\n          units += (end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf());\n        } else {\n          units++;\n        }\n      } else {\n        var unitOrder = this._getUnitOrder(unit);\n\n        var biggerTimeUnit = this.units[unitOrder - 1];\n\n        if (biggerTimeUnit && !this._isWorkTime(start, biggerTimeUnit)) {\n          next = this._getClosestWorkTimeFuture(start, biggerTimeUnit);\n        }\n      }\n\n      start = next;\n    }\n\n    return units;\n  },\n  _getMinutesPerHour: function _getMinutesPerHour(date) {\n    var hourStart = this._getTimeOfDayStamp(date);\n\n    var hourEnd = this._getTimeOfDayStamp(this._nextDate(date, \"hour\", 1));\n\n    if (hourEnd === 0) {\n      hourEnd = 24 * 60 * 60;\n    }\n\n    var worktimes = this._getWorkHours(date);\n\n    for (var i = 0; i < worktimes.length; i++) {\n      var interval = worktimes[i];\n\n      if (hourStart >= interval.start && hourEnd <= interval.end) {\n        return 60; // hour inside a working interval, all hour is a work hour\n      } else if (hourStart < interval.end && hourEnd > interval.start) {\n        // hour is partially work time\n        var duration = Math.min(hourEnd, interval.end) - Math.max(hourStart, interval.start);\n        return duration / 60;\n      }\n    }\n\n    return 0;\n  },\n  _getMinutesPerDay: function _getMinutesPerDay(date) {\n    var hours = this._getWorkHours(date);\n\n    var res = 0;\n    hours.forEach(function (interval) {\n      res += interval.durationMinutes;\n    });\n    return res;\n  },\n  getHoursPerDay: function getHoursPerDay(date) {\n    var hours = this._getWorkHours(date);\n\n    var res = 0;\n    hours.forEach(function (interval) {\n      res += interval.durationHours;\n    });\n    return res;\n  },\n  _getWorkUnitsForRange: function _getWorkUnitsForRange(from, to, unit, step) {\n    var total = 0;\n    var start = new Date(from),\n        end = new Date(to);\n    var getUnitsPerDay;\n\n    if (unit == \"minute\") {\n      getUnitsPerDay = utils.bind(this._getMinutesPerDay, this);\n    } else {\n      getUnitsPerDay = utils.bind(this.getHoursPerDay, this);\n    }\n\n    while (start.valueOf() < end.valueOf()) {\n      if (end - start > 1000 * 60 * 60 * 24 * 32 && start.getDate() === 0) {\n        var units = this._largeUnitsCache.getMinutesPerMonth(start);\n\n        if (unit == \"hour\") {\n          units = units / 60;\n        }\n\n        total += units;\n        start = this.$gantt.date.add(start, 1, \"month\");\n        continue;\n      } else if (end - start > 1000 * 60 * 60 * 24 * 16) {\n        var weekStart = this.$gantt.date.week_start(new Date(start));\n\n        if (start.valueOf() === weekStart.valueOf()) {\n          var units = this._largeUnitsCache.getMinutesPerWeek(start);\n\n          if (unit == \"hour\") {\n            units = units / 60;\n          }\n\n          total += units;\n          start = this.$gantt.date.add(start, 7, \"day\");\n          continue;\n        }\n      } //\tif (this._isWorkTime(start, \"day\")) {\n\n\n      total += getUnitsPerDay(start); //\t}\n\n      start = this._nextDate(start, \"day\", 1);\n    }\n\n    return total / step;\n  },\n  _getMinutesBetweenSingleDay: function _getMinutesBetweenSingleDay(from, to) {\n    var range = this._getIntervalTimestamp(from, to);\n\n    var worktimes = this._getWorkHours(from);\n\n    var result = 0;\n\n    for (var i = 0; i < worktimes.length; i++) {\n      var interval = worktimes[i];\n\n      if (range.end >= interval.start && range.start <= interval.end) {\n        var minuteFrom = Math.max(interval.start, range.start);\n        var minuteTo = Math.min(interval.end, range.end);\n        result += (minuteTo - minuteFrom) / 60;\n        range.start = minuteTo;\n      }\n    }\n\n    return Math.floor(result);\n  },\n  _getMinutesBetween: function _getMinutesBetween(from, to, unit, step) {\n    var start = new Date(from),\n        end = new Date(to);\n    step = step || 1;\n    var firstDayStart = new Date(start);\n    var firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\n\n    if (end.valueOf() <= firstDayEnd.valueOf()) {\n      return this._getMinutesBetweenSingleDay(from, to);\n    } else {\n      var lastDayStart = this.$gantt.date.day_start(new Date(end));\n      var lastDayEnd = end;\n\n      var startPart = this._getMinutesBetweenSingleDay(firstDayStart, firstDayEnd);\n\n      var endPart = this._getMinutesBetweenSingleDay(lastDayStart, lastDayEnd);\n\n      var rangePart = this._getWorkUnitsForRange(firstDayEnd, lastDayStart, unit, step);\n\n      var total = startPart + rangePart + endPart;\n      return total;\n    }\n  },\n  // optimized method for calculating work units duration of large time spans\n  // implemented for hours and minutes units, bigger time units don't benefit from the optimization so much\n  _getHoursBetween: function _getHoursBetween(from, to, unit, step) {\n    var start = new Date(from),\n        end = new Date(to);\n    step = step || 1;\n    var firstDayStart = new Date(start);\n    var firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\n\n    if (end.valueOf() <= firstDayEnd.valueOf()) {\n      return Math.round(this._getMinutesBetweenSingleDay(from, to) / 60);\n    } else {\n      var lastDayStart = this.$gantt.date.day_start(new Date(end));\n      var lastDayEnd = end;\n      var startPart = this._getMinutesBetweenSingleDay(firstDayStart, firstDayEnd, unit, step) / 60;\n      var endPart = this._getMinutesBetweenSingleDay(lastDayStart, lastDayEnd, unit, step) / 60;\n\n      var rangePart = this._getWorkUnitsForRange(firstDayEnd, lastDayStart, unit, step);\n\n      var total = startPart + rangePart + endPart;\n      return Math.round(total);\n    }\n  },\n  getConfig: function getConfig() {\n    return this._worktime;\n  },\n  _setConfig: function _setConfig(settings) {\n    this._worktime = settings;\n\n    this._parseSettings();\n\n    this._clearCaches();\n  },\n  _parseSettings: function _parseSettings() {\n    var settings = this.getConfig();\n    settings.parsed = {\n      dates: {},\n      hours: null,\n      haveCustomWeeks: false,\n      customWeeks: {},\n      customWeeksRangeStart: null,\n      customWeeksRangeEnd: null,\n      customWeeksBoundaries: []\n    };\n    settings.parsed.hours = this._parseHours(settings.hours);\n\n    for (var i in settings.dates) {\n      settings.parsed.dates[i] = this._parseHours(settings.dates[i]);\n    }\n\n    if (settings.customWeeks) {\n      var minCustomRangeStart = null;\n      var maxCustomRangeEnd = null;\n\n      for (var i in settings.customWeeks) {\n        var customTime = settings.customWeeks[i];\n\n        if (customTime.from && customTime.to) {\n          var rangeStart = customTime.from;\n          var rangeEnd = customTime.to;\n\n          if (!minCustomRangeStart || minCustomRangeStart > rangeStart.valueOf()) {\n            minCustomRangeStart = rangeStart.valueOf();\n          }\n\n          if (!maxCustomRangeEnd || maxCustomRangeEnd < rangeEnd.valueOf()) {\n            maxCustomRangeEnd = rangeEnd.valueOf();\n          }\n\n          settings.parsed.customWeeksBoundaries.push({\n            from: rangeStart.valueOf(),\n            fromReadable: new Date(rangeStart),\n            to: rangeEnd.valueOf(),\n            toReadable: new Date(rangeEnd),\n            name: i\n          });\n          settings.parsed.haveCustomWeeks = true;\n          var currentWeek = settings.parsed.customWeeks[i] = {\n            from: customTime.from,\n            to: customTime.to,\n            hours: this._parseHours(customTime.hours),\n            dates: {}\n          };\n\n          for (var d in customTime.dates) {\n            currentWeek.dates[d] = this._parseHours(customTime.dates[d]);\n          }\n        }\n      }\n\n      settings.parsed.customWeeksRangeStart = minCustomRangeStart;\n      settings.parsed.customWeeksRangeEnd = maxCustomRangeEnd;\n    }\n  },\n  _tryChangeCalendarSettings: function _tryChangeCalendarSettings(payload) {\n    var backup = JSON.stringify(this.getConfig());\n    payload();\n\n    if (!this.hasWorkTime()) {\n      //\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\n      this._setConfig(JSON.parse(backup));\n\n      this._clearCaches();\n\n      return false;\n    }\n\n    return true;\n  },\n  _arraysEqual: function _arraysEqual(a, b) {\n    if (a === b) return true;\n    if (!a || !b) return false;\n    if (a.length != b.length) return false;\n\n    for (var i = 0; i < a.length; ++i) {\n      if (a[i] !== b[i]) return false;\n    }\n\n    return true;\n  },\n  _compareSettings: function _compareSettings(mySettings, thatSettings) {\n    if (!this._arraysEqual(mySettings.hours, thatSettings.hours)) {\n      return false;\n    }\n\n    var myDays = Object.keys(mySettings.dates);\n    var otherDates = Object.keys(thatSettings.dates);\n    myDays.sort();\n    otherDates.sort();\n\n    if (!this._arraysEqual(myDays, otherDates)) {\n      return false;\n    }\n\n    for (var i = 0; i < myDays.length; i++) {\n      var timestamp = myDays[i];\n      var myHours = mySettings.dates[timestamp];\n      var otherHours = mySettings.dates[timestamp]; // day settings not equal\n\n      if (myHours !== otherHours && // but still can be two arrays with the equivalent hour settings\n      !(Array.isArray(myHours) && Array.isArray(otherHours) && this._arraysEqual(myHours, otherHours))) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n  equals: function equals(calendar) {\n    if (!(calendar instanceof CalendarWorkTimeStrategy)) {\n      return false;\n    }\n\n    var mySettings = this.getConfig();\n    var thatSettings = calendar.getConfig();\n\n    if (!this._compareSettings(mySettings, thatSettings)) {\n      return false;\n    }\n\n    if (mySettings.parsed.haveCustomWeeks && thatSettings.parsed.haveCustomWeeks) {\n      if (mySettings.parsed.customWeeksBoundaries.length != thatSettings.parsed.customWeeksBoundaries.length) {\n        return false;\n      }\n\n      for (var i in mySettings.parsed.customWeeks) {\n        var myWeek = mySettings.parsed.customWeeks[i];\n        var thatWeek = thatSettings.parsed.customWeeks[i];\n\n        if (!thatWeek) {\n          return false;\n        }\n\n        if (!this._compareSettings(myWeek, thatWeek)) {\n          return false;\n        }\n      }\n    } else if (mySettings.parse.haveCustomWeeks !== thatSettings.parsed.haveCustomWeeks) {\n      return false;\n    }\n\n    return true;\n  },\n  getWorkHours: function getWorkHours() {\n    var config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\n    return this._getWorkHours(config.date, false);\n  },\n  _getWorkHours: function _getWorkHours(date, parsed) {\n    var calendar = this.getConfig();\n\n    if (parsed !== false) {\n      calendar = calendar.parsed;\n    }\n\n    if (!date) {\n      return calendar.hours;\n    }\n\n    var dateValue = this._timestamp({\n      date: date\n    });\n\n    if (calendar.haveCustomWeeks) {\n      if (calendar.customWeeksRangeStart <= dateValue && calendar.customWeeksRangeEnd > dateValue) {\n        for (var i = 0; i < calendar.customWeeksBoundaries.length; i++) {\n          if (calendar.customWeeksBoundaries[i].from <= dateValue && calendar.customWeeksBoundaries[i].to > dateValue) {\n            calendar = calendar.customWeeks[calendar.customWeeksBoundaries[i].name];\n            break;\n          }\n        }\n      }\n    }\n\n    var hours = true;\n\n    if (calendar.dates[dateValue] !== undefined) {\n      hours = calendar.dates[dateValue]; //custom day\n    } else if (calendar.dates[date.getDay()] !== undefined) {\n      hours = calendar.dates[date.getDay()]; //week day\n    }\n\n    if (hours === true) {\n      return calendar.hours;\n    } else if (hours) {\n      return hours;\n    }\n\n    return [];\n  },\n  _getIntervalTimestamp: function _getIntervalTimestamp(from, to) {\n    var res = {\n      start: 0,\n      end: 0\n    };\n    res.start = from.getHours() * 60 * 60 + from.getMinutes() * 60 + from.getSeconds();\n    var endHours = to.getHours();\n\n    if (!endHours && !to.getMinutes() && !to.getSeconds() && from.valueOf() < to.valueOf()) {\n      endHours = 24;\n    }\n\n    res.end = endHours * 60 * 60 + to.getMinutes() * 60 + to.getSeconds();\n    return res;\n  },\n  _parseHours: function _parseHours(hours) {\n    if (Array.isArray(hours)) {\n      var timestampRanges = []; // worktime as seconds range\n\n      hours.forEach(function (hour) {\n        if (typeof hour === \"number\") {\n          timestampRanges.push(hour * 60 * 60);\n        } else if (typeof hour === \"string\") {\n          // \"12-13\", or \"12:00-13:00\", or \"12:00:00-13:00:00\"\n          hour.split(\"-\").map(function (time) {\n            return time.trim();\n          }).forEach(function (part) {\n            var parsed = part.split(\":\").map(function (time) {\n              return time.trim();\n            });\n            var value = parseInt(parsed[0] * 60 * 60);\n\n            if (parsed[1]) {\n              value += parseInt(parsed[1] * 60);\n            }\n\n            if (parsed[2]) {\n              value += parseInt(parsed[2]);\n            }\n\n            timestampRanges.push(value);\n          });\n        }\n      });\n      var timerangeConfig = [];\n\n      for (var i = 0; i < timestampRanges.length; i += 2) {\n        var start = timestampRanges[i];\n        var end = timestampRanges[i + 1];\n        var duration = end - start;\n        timerangeConfig.push({\n          start: start,\n          end: end,\n          startHour: Math.floor(start / (60 * 60)),\n          startMinute: Math.floor(start / 60),\n          endHour: Math.ceil(end / (60 * 60)),\n          endMinute: Math.ceil(end / 60),\n          durationSeconds: duration,\n          durationMinutes: duration / 60,\n          durationHours: duration / (60 * 60)\n        });\n      }\n\n      return timerangeConfig;\n    } else {\n      return hours;\n    }\n  },\n  setWorkTime: function setWorkTime(settings) {\n    return this._tryChangeCalendarSettings(utils.bind(function () {\n      var hours = settings.hours !== undefined ? settings.hours : true;\n\n      var timestamp = this._timestamp(settings);\n\n      var calendarConfig = this.getConfig();\n\n      if (timestamp !== null) {\n        calendarConfig.dates[timestamp] = hours;\n      } else if (!settings.customWeeks) {\n        calendarConfig.hours = hours;\n      }\n\n      if (settings.customWeeks) {\n        if (!calendarConfig.customWeeks) {\n          calendarConfig.customWeeks = {};\n        } // GS-1867. allow setWorkTime to exclude dates in the customWeeks range\n\n\n        if (typeof settings.customWeeks == \"string\") {\n          if (timestamp !== null) {\n            calendarConfig.customWeeks[settings.customWeeks].dates[timestamp] = hours;\n          } else if (!settings.customWeeks) {\n            calendarConfig.customWeeks[settings.customWeeks].hours = hours;\n          }\n        } else if (_typeof(settings.customWeeks) === \"object\" && Function.prototype.toString.call(settings.customWeeks.constructor) === \"function Object() { [native code] }\") {\n          for (var i in settings.customWeeks) {\n            calendarConfig.customWeeks[i] = settings.customWeeks[i];\n          }\n        }\n      }\n\n      this._parseSettings();\n\n      this._clearCaches();\n    }, this));\n  },\n  unsetWorkTime: function unsetWorkTime(settings) {\n    return this._tryChangeCalendarSettings(utils.bind(function () {\n      if (!settings) {\n        this.reset_calendar();\n      } else {\n        var timestamp = this._timestamp(settings);\n\n        if (timestamp !== null) {\n          delete this.getConfig().dates[timestamp];\n        }\n      } // Load updated settings and clear work units cache\n\n\n      this._parseSettings();\n\n      this._clearCaches();\n    }, this));\n  },\n  _isWorkTime: function _isWorkTime(date, unit) {\n    // Check if this item has in the cache\n    var useCache = true; //unit === \"day\"; // use cache only for days. In case of hours/minutes cache size grows too large and the overhead exceeds the gains\n\n    var isWorkUnit = -1;\n    var dateKey = null;\n\n    if (useCache) {\n      // use string keys\n      dateKey = String(date.valueOf());\n      isWorkUnit = this._workingUnitsCache.getItem(unit, dateKey, date);\n    }\n\n    if (isWorkUnit == -1) {\n      // calculate if not cached\n      isWorkUnit = this._checkIfWorkingUnit(date, unit);\n\n      if (useCache) {\n        this._workingUnitsCache.setItem(unit, dateKey, isWorkUnit, date);\n      }\n    }\n\n    return isWorkUnit;\n  },\n  isWorkTime: function isWorkTime() {\n    var config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\n    return this._isWorkTime(config.date, config.unit);\n  },\n  calculateDuration: function calculateDuration() {\n    var config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\n\n    if (!config.unit) {\n      return false;\n    } //return this._calculateDuration(config.start_date, config.end_date, config.unit, config.step);\n\n\n    var self = this;\n    return this._dateDurationCache.getDuration(config.start_date, config.end_date, config.unit, config.step, function () {\n      return self._calculateDuration(config.start_date, config.end_date, config.unit, config.step);\n    });\n  },\n  _calculateDuration: function _calculateDuration(from, to, unit, step) {\n    var res = 0;\n    var sign = 1;\n\n    if (from.valueOf() > to.valueOf()) {\n      var tmp = to;\n      to = from;\n      from = tmp;\n      sign = -1;\n    }\n\n    if (unit == \"hour\" && step == 1) {\n      res = this._getHoursBetween(from, to, unit, step);\n    } else if (unit == \"minute\" && step == 1) {\n      // quick calculation for minutes with 1 minute step\n      res = this._getMinutesBetween(from, to, unit, step);\n    } else {\n      res = this._getWorkUnitsBetweenGeneric(from, to, unit, step);\n    } // getWorkUnits.. returns decimal durations\n\n\n    return sign * Math.round(res);\n  },\n  hasDuration: function hasDuration() {\n    var config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\n    var from = config.start_date,\n        to = config.end_date,\n        unit = config.unit,\n        step = config.step;\n\n    if (!unit) {\n      return false;\n    }\n\n    var start = new Date(from),\n        end = new Date(to);\n    step = step || 1;\n\n    while (start.valueOf() < end.valueOf()) {\n      if (this._isWorkTime(start, unit)) return true;\n      start = this._nextDate(start, unit, step);\n    }\n\n    return false;\n  },\n  calculateEndDate: function calculateEndDate() {\n    var config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\n    var from = config.start_date,\n        duration = config.duration,\n        unit = config.unit,\n        step = config.step;\n    if (!unit) return false;\n    var mult = config.duration >= 0 ? 1 : -1;\n    duration = Math.abs(duration * 1); //\tvar endDate = this._calculateEndDate(from, duration, unit, step * mult);\n    //\treturn endDate;\n\n    var self = this;\n    return this._dateDurationCache.getEndDate(from, duration, unit, step * mult, function () {\n      return self._calculateEndDate(from, duration, unit, step * mult);\n    });\n  },\n  _calculateEndDate: function _calculateEndDate(from, duration, unit, step) {\n    if (!unit) return false;\n\n    if (step == 1 && unit == \"minute\") {\n      return this._calculateMinuteEndDate(from, duration, step);\n    } else if (step == -1 && unit == \"minute\") {\n      return this._subtractMinuteDate(from, duration, step);\n    } else if (step == 1 && unit == \"hour\") {\n      return this._calculateHourEndDate(from, duration, step);\n    } else {\n      var interval = this._addInterval(from, duration, unit, step, null);\n\n      return interval.end;\n    }\n  },\n  _addInterval: function _addInterval(start, duration, unit, step, stopAction) {\n    var added = 0;\n    var current = start;\n    var dstShift = false;\n\n    while (added < duration && !(stopAction && stopAction(current))) {\n      var next = this._nextDate(current, unit, step); // GS-1501. Correct hours after DST change\n\n\n      if (unit == \"day\") {\n        dstShift = dstShift || !current.getHours() && next.getHours();\n\n        if (dstShift) {\n          next.setHours(0);\n\n          if (next.getHours()) {// the day when the timezone is changed, try to correct hours next time\n          } else {\n            dstShift = false;\n          }\n        }\n      }\n\n      var dateValue = new Date(next.valueOf() + 1);\n\n      if (step > 0) {\n        dateValue = new Date(next.valueOf() - 1);\n      }\n\n      var workTimeCheck = this._isWorkTime(dateValue, unit);\n\n      if (workTimeCheck && !dstShift) {\n        added++;\n      }\n\n      current = next;\n    }\n\n    return {\n      end: current,\n      start: start,\n      added: added\n    };\n  },\n  _addHoursUntilDayEnd: function _addHoursUntilDayEnd(from, duration) {\n    var dayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(from)), 1, \"day\");\n    var added = 0;\n    var left = duration;\n\n    var range = this._getIntervalTimestamp(from, dayEnd);\n\n    var worktimes = this._getWorkHours(from);\n\n    for (var i = 0; i < worktimes.length && added < duration; i++) {\n      var interval = worktimes[i];\n\n      if (range.end >= interval.start && range.start <= interval.end) {\n        var minuteFrom = Math.max(interval.start, range.start);\n        var minuteTo = Math.min(interval.end, range.end);\n        var rangeHours = (minuteTo - minuteFrom) / (60 * 60);\n\n        if (rangeHours > left) {\n          rangeHours = left;\n          minuteTo = minuteFrom + left * 60 * 60;\n        }\n\n        var addHours = Math.round((minuteTo - minuteFrom) / (60 * 60));\n        added += addHours;\n        left -= addHours;\n        range.start = minuteTo;\n      }\n    }\n\n    var intervalEnd = dayEnd;\n\n    if (added === duration) {\n      intervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, range.start);\n    }\n\n    return {\n      added: added,\n      end: intervalEnd\n    };\n  },\n  _calculateHourEndDate: function _calculateHourEndDate(from, duration, step) {\n    var start = new Date(from),\n        added = 0;\n    step = step || 1;\n    duration = Math.abs(duration * 1);\n\n    var interval = this._addHoursUntilDayEnd(start, duration);\n\n    added = interval.added;\n    start = interval.end;\n    var durationLeft = duration - added;\n\n    if (durationLeft) {\n      var current = start;\n\n      while (added < duration) {\n        var next = this._nextDate(current, \"day\", step); // reset to day start in case DST switch happens in the process\n\n\n        next.setHours(0);\n        next.setMinutes(0);\n        next.setSeconds(0);\n        var hoursPerDay = 0;\n\n        if (step > 0) {\n          hoursPerDay = this.getHoursPerDay(new Date(next.valueOf() - 1));\n        } else {\n          hoursPerDay = this.getHoursPerDay(new Date(next.valueOf() + 1));\n        }\n\n        if (added + hoursPerDay >= duration) {\n          break;\n        } else {\n          added += hoursPerDay;\n        }\n\n        current = next;\n      }\n\n      start = current;\n    }\n\n    if (added < duration) {\n      var durationLeft = duration - added;\n      interval = this._addHoursUntilDayEnd(start, durationLeft);\n      start = interval.end;\n    }\n\n    return start;\n  },\n  _addMinutesUntilHourEnd: function _addMinutesUntilHourEnd(from, duration) {\n    if (from.getMinutes() === 0) {\n      // already at hour end\n      return {\n        added: 0,\n        end: new Date(from)\n      };\n    }\n\n    var hourEnd = this.$gantt.date.add(this.$gantt.date.hour_start(new Date(from)), 1, \"hour\");\n    var added = 0;\n    var left = duration;\n\n    var range = this._getIntervalTimestamp(from, hourEnd);\n\n    var worktimes = this._getWorkHours(from);\n\n    for (var i = 0; i < worktimes.length && added < duration; i++) {\n      var interval = worktimes[i];\n\n      if (range.end >= interval.start && range.start <= interval.end) {\n        var minuteFrom = Math.max(interval.start, range.start);\n        var minuteTo = Math.min(interval.end, range.end);\n        var rangeMinutes = (minuteTo - minuteFrom) / 60;\n\n        if (rangeMinutes > left) {\n          rangeMinutes = left;\n          minuteTo = minuteFrom + left * 60;\n        } // TODO: verify testcase https://dhtmlxsupport.teamwork.com/desk/tickets/9625700/messages\n\n        /*if (rangeMinutes === 0) {\r\n        \trangeMinutes = left;\r\n        \tminuteTo = minuteFrom + (left * 60);\r\n        }*/\n\n\n        var addMinutes = Math.round((minuteTo - minuteFrom) / 60);\n        left -= addMinutes;\n        added += addMinutes;\n        range.start = minuteTo;\n      }\n    }\n\n    var intervalEnd = hourEnd;\n\n    if (added === duration) {\n      intervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, range.start);\n    }\n\n    return {\n      added: added,\n      end: intervalEnd\n    };\n  },\n  _subtractMinutesUntilHourStart: function _subtractMinutesUntilHourStart(from, duration) {\n    var hourStart = this.$gantt.date.hour_start(new Date(from));\n    var added = 0;\n    var left = duration;\n    var hourStartTimestamp = hourStart.getHours() * 60 * 60 + hourStart.getMinutes() * 60 + hourStart.getSeconds();\n    var initialDateTimestamp = from.getHours() * 60 * 60 + from.getMinutes() * 60 + from.getSeconds();\n\n    var worktimes = this._getWorkHours(from);\n\n    for (var i = worktimes.length - 1; i >= 0 && added < duration; i--) {\n      var interval = worktimes[i];\n\n      if (initialDateTimestamp > interval.start && hourStartTimestamp <= interval.end) {\n        var minuteFrom = Math.min(initialDateTimestamp, interval.end);\n        var minuteTo = Math.max(hourStartTimestamp, interval.start); //\tvar minuteFrom = Math.max(interval.start, currentHour.start);\n        //\tvar minuteTo = Math.min(interval.end, currentHour.end);\n\n        var rangeMinutes = (minuteFrom - minuteTo) / 60;\n\n        if (rangeMinutes > left) {\n          rangeMinutes = left;\n          minuteTo = minuteFrom - left * 60;\n        } // TODO: verify testcase https://dhtmlxsupport.teamwork.com/desk/tickets/9625700/messages\n\n        /*if (rangeMinutes === 0) {\r\n        \trangeMinutes = left;\r\n        \tminuteTo = minuteFrom - (left * 60);\r\n        }*/\n\n\n        var addMinutes = Math.abs(Math.round((minuteFrom - minuteTo) / 60));\n        left -= addMinutes;\n        added += addMinutes;\n        initialDateTimestamp = minuteTo;\n      }\n    }\n\n    var intervalEnd = hourStart;\n\n    if (added === duration) {\n      intervalEnd = new Date(from.getFullYear(), from.getMonth(), from.getDate(), 0, 0, initialDateTimestamp);\n    }\n\n    return {\n      added: added,\n      end: intervalEnd\n    };\n  },\n  _subtractMinuteDate: function _subtractMinuteDate(from, duration, step) {\n    var start = new Date(from),\n        added = 0;\n    step = step || -1;\n    duration = Math.abs(duration * 1);\n    duration = Math.round(duration);\n\n    var minutePrecision = this._isMinutePrecision(start);\n\n    var addedInterval = this._subtractMinutesUntilHourStart(start, duration);\n\n    added += addedInterval.added;\n    start = addedInterval.end;\n    var calculatedDay = 0;\n    var daySchedule = [];\n    var minutesInDay = 0;\n\n    while (added < duration) {\n      var dayStart = this.$gantt.date.day_start(new Date(start));\n      var iterateFromDayEnd = false;\n\n      if (start.valueOf() === dayStart.valueOf()) {\n        dayStart = this.$gantt.date.add(dayStart, -1, \"day\");\n        iterateFromDayEnd = true;\n      } //var dayStartTimestamp = this.$gantt.date.day_start(new Date(start)).valueOf();\n\n\n      var dayEnd = new Date(dayStart.getFullYear(), dayStart.getMonth(), dayStart.getDate(), 23, 59, 59, 999).valueOf();\n\n      if (dayEnd !== calculatedDay) {\n        daySchedule = this._getWorkHours(dayStart);\n        minutesInDay = this._getMinutesPerDay(dayStart);\n        calculatedDay = dayEnd;\n      }\n\n      var left = duration - added;\n\n      var timestamp = this._getTimeOfDayStamp(start, iterateFromDayEnd);\n\n      if (!daySchedule.length || !minutesInDay) {\n        start = this.$gantt.date.add(start, -1, \"day\");\n        continue;\n      }\n\n      if (daySchedule[daySchedule.length - 1].end <= timestamp) {\n        if (left > minutesInDay) {\n          added += minutesInDay;\n          start = this.$gantt.date.add(start, -1, \"day\");\n          continue;\n        }\n      }\n\n      var isWorkHour = false;\n      var workInterval = null;\n      var prevInterval = null;\n\n      for (var i = daySchedule.length - 1; i >= 0; i--) {\n        if (daySchedule[i].start < timestamp - 1 && daySchedule[i].end >= timestamp - 1) {\n          isWorkHour = true;\n          workInterval = daySchedule[i];\n          prevInterval = daySchedule[i - 1];\n          break;\n        }\n      }\n\n      if (isWorkHour) {\n        // we're at the end of worktime interval and subtracting more than the duration of the interval\n        // -> subtract the duration of the interval and move to the start of the interval (we're moving from end)\n        if (timestamp === workInterval.end && left >= workInterval.durationMinutes) {\n          added += workInterval.durationMinutes;\n          start = this.$gantt.date.add(start, -workInterval.durationMinutes, \"minute\");\n        } // worktime is set in whole hours (no intervals like 9:15-10:00)\n        // the amount we need to subtract lies inside the interval\n        else if (!minutePrecision && left <= timestamp / 60 - workInterval.startMinute) {\n            added += left;\n            start = this.$gantt.date.add(start, -left, \"minute\");\n          } else if (minutePrecision) {\n            // GS-2129. If the working time is set in minutes, we accumulate the working time in minutes from right to left\n            // duration we need to subtract lies completely inside the work interval\n            if (left <= timestamp / 60 - workInterval.startMinute) {\n              added += left;\n              start = this.$gantt.date.add(start, -left, \"minute\");\n            } else {\n              // we need to go trough multiple work intervals to subtract needed time\n              added += timestamp / 60 - workInterval.startMinute;\n\n              if (prevInterval) {\n                start = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, prevInterval.end);\n              } else {\n                start = this.$gantt.date.day_start(start);\n              }\n            }\n          } else {\n            var minutesInHour = this._getMinutesPerHour(start);\n\n            if (minutesInHour <= left) {\n              added += minutesInHour;\n              start = this._nextDate(start, \"hour\", step);\n            } else {\n              addedInterval = this._subtractMinutesUntilHourStart(start, left);\n              added += addedInterval.added;\n              start = addedInterval.end;\n            }\n          }\n      } else {\n        if (start.getHours() === 0 && start.getMinutes() === 0 && start.getSeconds() === 0) {\n          var prev = this._getClosestWorkTimePast(start, \"hour\");\n\n          if (prev.valueOf() === start.valueOf()) {\n            var prev = this.$gantt.date.add(start, -1, \"day\");\n\n            var times = this._getWorkHours(prev);\n\n            if (times.length) {\n              var lastInterval = times[times.length - 1];\n              prev.setSeconds(lastInterval.durationSeconds);\n            }\n          }\n\n          start = prev;\n        } else {\n          start = this._getClosestWorkTimePast(new Date(start - 1), \"hour\");\n        }\n      }\n    }\n\n    if (added < duration) {\n      var durationLeft = duration - added;\n      addedInterval = this._subtractMinutesUntilHourStart(start, durationLeft);\n      added += addedInterval.added;\n      start = addedInterval.end;\n    }\n\n    return start;\n  },\n  _calculateMinuteEndDate: function _calculateMinuteEndDate(from, duration, step) {\n    var start = new Date(from),\n        added = 0;\n    step = step || 1;\n    duration = Math.abs(duration * 1);\n    duration = Math.round(duration);\n\n    var addedInterval = this._addMinutesUntilHourEnd(start, duration);\n\n    added += addedInterval.added;\n    start = addedInterval.end;\n    var calculatedDay = 0;\n    var daySchedule = [];\n    var minutesInDay = 0;\n\n    var minutePrecision = this._isMinutePrecision(start);\n\n    while (added < duration) {\n      var dayStart = this.$gantt.date.day_start(new Date(start)).valueOf();\n\n      if (dayStart !== calculatedDay) {\n        daySchedule = this._getWorkHours(start);\n        minutesInDay = this._getMinutesPerDay(start);\n        calculatedDay = dayStart;\n      }\n\n      var left = duration - added;\n\n      var timestamp = this._getTimeOfDayStamp(start);\n\n      if (!daySchedule.length || !minutesInDay) {\n        start = this.$gantt.date.add(this.$gantt.date.day_start(start), 1, \"day\");\n        continue;\n      }\n\n      if (daySchedule[0].start >= timestamp) {\n        if (left >= minutesInDay) {\n          added += minutesInDay;\n\n          if (left == minutesInDay) {\n            start = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, daySchedule[daySchedule.length - 1].end);\n            break;\n          } else {\n            start = this.$gantt.date.add(start, 1, \"day\");\n            start = this.$gantt.date.day_start(start);\n          }\n\n          continue;\n        }\n      }\n\n      var isWorkHour = false;\n      var workInterval = null;\n\n      for (var i = 0; i < daySchedule.length; i++) {\n        if (daySchedule[i].start <= timestamp && daySchedule[i].end > timestamp) {\n          isWorkHour = true;\n          workInterval = daySchedule[i];\n          break;\n        }\n      }\n\n      if (isWorkHour) {\n        if (timestamp === workInterval.start && left >= workInterval.durationMinutes) {\n          added += workInterval.durationMinutes;\n          start = this.$gantt.date.add(start, workInterval.durationMinutes, \"minute\");\n        } else if (left <= workInterval.endMinute - timestamp / 60) {\n          added += left;\n          start = this.$gantt.date.add(start, left, \"minute\");\n        } else {\n          var minutesInHour = this._getMinutesPerHour(start);\n\n          if (minutesInHour <= left) {\n            added += minutesInHour; // when the working time settings are set in minutes move to the next minutes\n\n            if (minutePrecision) {\n              start = this.$gantt.date.add(start, minutesInHour, \"minute\");\n            } else {\n              start = this._nextDate(start, \"hour\", step);\n            }\n          } else {\n            addedInterval = this._addMinutesUntilHourEnd(start, left);\n            added += addedInterval.added;\n            start = addedInterval.end;\n          }\n        }\n      } else {\n        start = this._getClosestWorkTimeFuture(start, \"hour\");\n      }\n    }\n\n    if (added < duration) {\n      var durationLeft = duration - added;\n      addedInterval = this._addMinutesUntilHourEnd(start, durationLeft);\n      added += addedInterval.added;\n      start = addedInterval.end;\n    }\n\n    return start;\n  },\n  getClosestWorkTime: function getClosestWorkTime() {\n    var settings = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\n    return this._getClosestWorkTime(settings.date, settings.unit, settings.dir);\n  },\n  _getClosestWorkTime: function _getClosestWorkTime(inputDate, unit, direction) {\n    var result = new Date(inputDate);\n\n    if (this._isWorkTime(result, unit)) {\n      return result;\n    }\n\n    result = this.$gantt.date[unit + '_start'](result);\n\n    if (direction == 'any' || !direction) {\n      var closestFuture = this._getClosestWorkTimeFuture(result, unit);\n\n      var closestPast = this._getClosestWorkTimePast(result, unit);\n\n      if (Math.abs(closestFuture - inputDate) <= Math.abs(inputDate - closestPast)) {\n        result = closestFuture;\n      } else {\n        result = closestPast;\n      }\n    } else if (direction == \"past\") {\n      result = this._getClosestWorkTimePast(result, unit);\n    } else {\n      result = this._getClosestWorkTimeFuture(result, unit);\n    }\n\n    return result;\n  },\n  _getClosestWorkTimeFuture: function _getClosestWorkTimeFuture(date, unit) {\n    return this._getClosestWorkTimeGeneric(date, unit, 1);\n  },\n  _getClosestWorkTimePast: function _getClosestWorkTimePast(date, unit) {\n    var result = this._getClosestWorkTimeGeneric(date, unit, -1); // should return the end of the closest work interval\n\n\n    return this.$gantt.date.add(result, 1, unit);\n  },\n  _findClosestTimeInDay: function _findClosestTimeInDay(date, direction, worktimes) {\n    var start = new Date(date);\n    var resultDate = null;\n    var fromDayEnd = false;\n\n    if (!this._getWorkHours(start).length) {\n      start = this._getClosestWorkTime(start, \"day\", direction < 0 ? \"past\" : \"future\");\n\n      if (direction < 0) {\n        start = new Date(start.valueOf() - 1);\n        fromDayEnd = true;\n      }\n\n      worktimes = this._getWorkHours(start);\n    }\n\n    var value = this._getTimeOfDayStamp(start);\n\n    if (fromDayEnd) {\n      value = this._getTimeOfDayStamp(new Date(start.valueOf() + 1), fromDayEnd);\n    }\n\n    if (direction > 0) {\n      for (var i = 0; i < worktimes.length; i++) {\n        if (worktimes[i].start >= value) {\n          resultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, worktimes[i].start);\n          break;\n        }\n      }\n    } else {\n      for (var i = worktimes.length - 1; i >= 0; i--) {\n        if (worktimes[i].end <= value) {\n          resultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, worktimes[i].end);\n          break;\n        } else if (worktimes[i].end > value && worktimes[i].start <= value) {\n          resultDate = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 0, 0, value);\n          break;\n        }\n      }\n    }\n\n    return resultDate;\n  },\n  _getClosestWorkMinute: function _getClosestWorkMinute(date, unit, direction) {\n    var start = new Date(date);\n\n    var worktimes = this._getWorkHours(start);\n\n    var resultDate = this._findClosestTimeInDay(start, direction, worktimes);\n\n    if (!resultDate) {\n      start = this.calculateEndDate(start, direction, \"day\");\n\n      if (direction > 0) {\n        start = this.$gantt.date.day_start(start);\n      } else {\n        start = this.$gantt.date.day_start(start);\n        start = this.$gantt.date.add(start, 1, \"day\");\n        start = new Date(start.valueOf() - 1);\n      }\n\n      worktimes = this._getWorkHours(start);\n      resultDate = this._findClosestTimeInDay(start, direction, worktimes);\n    }\n\n    if (direction < 0) {\n      // getClosestWorkTimePast adds one time unit to the result date after this\n      resultDate = this.$gantt.date.add(resultDate, -1, unit);\n    }\n\n    return resultDate;\n  },\n  _getClosestWorkTimeGeneric: function _getClosestWorkTimeGeneric(date, unit, increment) {\n    if (unit === \"hour\" || unit === \"minute\") {\n      return this._getClosestWorkMinute(date, unit, increment);\n    }\n\n    var unitOrder = this._getUnitOrder(unit),\n        biggerTimeUnit = this.units[unitOrder - 1];\n\n    var result = date; // be extra sure we won't fall into infinite loop, 3k seems big enough\n\n    var maximumLoop = 3000,\n        count = 0;\n\n    while (!this._isWorkTime(result, unit)) {\n      if (biggerTimeUnit && !this._isWorkTime(result, biggerTimeUnit)) {\n        // if we look for closest work hour and detect a week-end - first find the closest work day,\n        // and continue iterations after that\n        if (increment > 0) {\n          result = this._getClosestWorkTimeFuture(result, biggerTimeUnit);\n        } else {\n          result = this._getClosestWorkTimePast(result, biggerTimeUnit);\n        }\n\n        if (this._isWorkTime(result, unit)) {\n          break;\n        }\n      }\n\n      count++;\n\n      if (count > maximumLoop) {\n        this.$gantt.assert(false, \"Invalid working time check\");\n        return false;\n      }\n\n      var tzOffset = result.getTimezoneOffset();\n      result = this.$gantt.date.add(result, increment, unit);\n      result = this.$gantt._correct_dst_change(result, tzOffset, increment, unit);\n\n      if (this.$gantt.date[unit + '_start']) {\n        result = this.$gantt.date[unit + '_start'](result);\n      }\n    }\n\n    return result;\n  },\n\n  /**\r\n   * Check whether this calendar has working time. Calendar has working time only if there are regular working days of week\r\n   *\r\n   */\n  hasWorkTime: function hasWorkTime() {\n    var worktime = this.getConfig();\n    var dates = worktime.dates;\n    var daysOfWeek = [0, 1, 2, 3, 4, 5, 6];\n    var exceptions = [];\n\n    for (var i in worktime.dates) {\n      if (Number(i) > 6) {\n        exceptions.push(Number(i));\n      }\n    }\n\n    var hasRegularHours = this._checkWorkHours(worktime.hours);\n\n    var result = false;\n    daysOfWeek.forEach(function (day) {\n      if (result) {\n        return;\n      }\n\n      var dayConfig = dates[day];\n\n      if (dayConfig === true) {\n        // workday uses global hours\n        result = hasRegularHours;\n      } else if (Array.isArray(dayConfig)) {\n        // workday uses custom hours\n        result = this._checkWorkHours(dayConfig);\n      }\n    }.bind(this));\n    return result;\n  },\n  _checkWorkHours: function _checkWorkHours(hoursArray) {\n    if (hoursArray.length === 0) {\n      return false;\n    }\n\n    var result = false;\n\n    for (var i = 0; i < hoursArray.length; i += 2) {\n      if (hoursArray[i] !== hoursArray[i + 1]) {\n        result = true;\n      }\n    }\n\n    return result;\n  },\n  _isMinutePrecision: function _isMinutePrecision(date) {\n    var minutePrecision = false;\n\n    this._getWorkHours(date).forEach(function (interval) {\n      if (interval.startMinute % 60 || interval.endMinute % 60) {\n        minutePrecision = true;\n      }\n    });\n\n    return minutePrecision;\n  }\n};\nmodule.exports = CalendarWorkTimeStrategy;","var utils = require(\"../../../utils/utils\");\n\nfunction WorkTimeCalendarMerger() {}\n\nWorkTimeCalendarMerger.prototype = {\n  /**\r\n   * convert hours array items into objects, e.g. [8, 12, 17, 18] -> [{start: 8, end: 12}, {start:17, end:18}]\r\n   * @param {Array} hoursArray\r\n   */\n  _getIntervals: function _getIntervals(hoursArray) {\n    var result = [];\n\n    for (var i = 0; i < hoursArray.length; i += 2) {\n      result.push({\n        start: hoursArray[i],\n        end: hoursArray[i + 1]\n      });\n    }\n\n    return result;\n  },\n\n  /**\r\n   * Convert ranges config into hours array\r\n   * [{start: 8, end: 12}, {start:17, end:18}] --> [8, 12, 17, 18]\r\n   * @param {*} intervalsArray\r\n   */\n  _toHoursArray: function _toHoursArray(intervalsArray) {\n    var result = [];\n\n    function toFixed(value) {\n      var str = String(value);\n\n      if (str.length < 2) {\n        str = \"0\" + str;\n      }\n\n      return str;\n    }\n\n    function formatHHMM(secondsValue) {\n      var hours = Math.floor(secondsValue / (60 * 60));\n      var minutePart = secondsValue - hours * 60 * 60;\n      var minutes = Math.floor(minutePart / 60);\n      return hours + \":\" + toFixed(minutes);\n    }\n\n    for (var i = 0; i < intervalsArray.length; i++) {\n      result.push(formatHHMM(intervalsArray[i].start) + \"-\" + formatHHMM(intervalsArray[i].end));\n    }\n\n    return result;\n  },\n\n  /**\r\n   * Build intersection of hour intervals. e.g.\r\n   * first: [{start: 8, end: 12}, {start:13, end:18}]\r\n   * second: [{start: 10, end: 15}]\r\n   * result: [{start: 10, end: 12}, {start: 13, end: 15}]\r\n   * @param {Array} first\r\n   * @param {Array} second\r\n   */\n  _intersectHourRanges: function _intersectHourRanges(first, second) {\n    var result = [];\n    var baseArray = first.length > second.length ? first : second;\n    var overridesArray = first === baseArray ? second : first;\n    baseArray = baseArray.slice();\n    overridesArray = overridesArray.slice();\n    var result = [];\n\n    for (var i = 0; i < baseArray.length; i++) {\n      var base = baseArray[i];\n\n      for (var j = 0; j < overridesArray.length; j++) {\n        var current = overridesArray[j];\n\n        if (current.start < base.end && current.end > base.start) {\n          result.push({\n            start: Math.max(base.start, current.start),\n            end: Math.min(base.end, current.end)\n          });\n\n          if (base.end > current.end) {\n            overridesArray.splice(j, 1);\n            j--;\n            i--;\n          }\n        }\n      }\n    }\n\n    return result;\n  },\n\n  /**\r\n   * Reduce the number of ranges in config when possible,\r\n   * joins ranges that can be merged\r\n   * parts: [{start: 8, end: 12}, {start:12, end:13}, {start: 15, end: 17}]\r\n   * result: [{start: 8, end: 13}, {start: 15, end: 17}]\r\n   * @param {Array} parts\r\n   */\n  _mergeAdjacentIntervals: function _mergeAdjacentIntervals(parts) {\n    var result = parts.slice();\n    result.sort(function (a, b) {\n      return a.start - b.start;\n    });\n    var base = result[0];\n\n    for (var i = 1; i < result.length; i++) {\n      var current = result[i];\n\n      if (current.start <= base.end) {\n        if (current.end > base.end) {\n          base.end = current.end;\n        }\n\n        result.splice(i, 1);\n        i--;\n      } else {\n        base = current;\n      }\n    }\n\n    return result;\n  },\n  _mergeHoursConfig: function _mergeHoursConfig(firstHours, secondHours) {\n    //var firstIntervals = this._getIntervals(firstHours);\n    //var secondIntervals = this._getIntervals(secondHours);\n    return this._mergeAdjacentIntervals(this._intersectHourRanges(firstHours, secondHours));\n  },\n  merge: function merge(first, second) {\n    var firstConfig = utils.copy(first.getConfig().parsed);\n    var secondConfig = utils.copy(second.getConfig().parsed);\n    var mergedSettings = {\n      hours: this._toHoursArray(this._mergeHoursConfig(firstConfig.hours, secondConfig.hours)),\n      dates: {},\n      customWeeks: {}\n    };\n\n    for (var i in firstConfig.dates) {\n      var firstDate = firstConfig.dates[i];\n      var secondDate = secondConfig.dates[i]; // if this key is a working date in both calendars\n\n      if (firstDate && secondDate) {\n        // if at least one of working date is set by hours config - build intersection\n        if (Array.isArray(firstDate) || Array.isArray(secondDate)) {\n          var firstHours = Array.isArray(firstDate) ? firstDate : firstConfig.hours;\n          var secondHours = Array.isArray(secondDate) ? secondDate : secondConfig.hours;\n          mergedSettings.dates[i] = this._toHoursArray(this._mergeHoursConfig(firstHours, secondHours));\n        } else {\n          // date will use global hours\n          mergedSettings.dates[i] = true;\n        }\n      } else {\n        mergedSettings.dates[i] = false;\n      }\n    } // transfer and overwrite custom week calendars\n\n\n    if (firstConfig.customWeeks) {\n      for (var i in firstConfig.customWeeks) {\n        mergedSettings.customWeeks[i] = firstConfig.customWeeks[i];\n      }\n    }\n\n    if (secondConfig.customWeeks) {\n      for (var i in secondConfig.customWeeks) {\n        mergedSettings.customWeeks[i] = secondConfig.customWeeks[i];\n      }\n    }\n\n    return mergedSettings;\n  }\n};\nmodule.exports = WorkTimeCalendarMerger;","var utils = require(\"../../utils/utils\");\n\nvar createArgumentsHelper = require(\"./calendar_arguments_helper\");\n\nvar CalendarMergeHelper = require(\"./strategy/work_calendar_merger\");\n\nvar CalendarWorkTimeStrategy = require(\"./strategy/calendar_strategy\");\n\nvar legacyResourceCalendarConfig = require(\"./legacy_resource_config\");\n\nvar dynamicResourceCalendars = require(\"./dynamic_resource_calendars\")();\n\nfunction CalendarManager(gantt) {\n  this.$gantt = gantt;\n  this._calendars = {};\n  this._legacyConfig = undefined;\n  this.$gantt.attachEvent(\"onGanttReady\", function () {\n    if (this.$gantt.config.resource_calendars) {\n      this._isLegacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(this.$gantt.config.resource_calendars);\n    }\n  }.bind(this));\n  this.$gantt.attachEvent(\"onBeforeGanttReady\", function () {\n    this.createDefaultCalendars();\n  }.bind(this));\n  this.$gantt.attachEvent(\"onBeforeGanttRender\", function () {\n    this.createDefaultCalendars();\n  }.bind(this));\n}\n\nCalendarManager.prototype = {\n  _calendars: {},\n  _convertWorkTimeSettings: function _convertWorkTimeSettings(settings) {\n    var days = settings.days;\n\n    if (days && !settings.dates) {\n      settings.dates = settings.dates || {};\n\n      for (var i = 0; i < days.length; i++) {\n        settings.dates[i] = days[i];\n\n        if (!(days[i] instanceof Array)) {\n          settings.dates[i] = !!days[i];\n        }\n      }\n    }\n\n    delete settings.days;\n    return settings;\n  },\n  mergeCalendars: function mergeCalendars() {\n    var calendars = [];\n    var args = arguments;\n\n    if (Array.isArray(args[0])) {\n      calendars = args[0].slice();\n    } else {\n      for (var i = 0; i < arguments.length; i++) {\n        calendars.push(arguments[i]);\n      }\n    }\n\n    var mergeHelper = new CalendarMergeHelper();\n    var result;\n    calendars.forEach(function (calendar) {\n      if (!result) {\n        result = calendar;\n      } else {\n        result = this._createCalendarFromConfig(mergeHelper.merge(result, calendar));\n      }\n    }.bind(this));\n    return this.createCalendar(result);\n  },\n  _createCalendarFromConfig: function _createCalendarFromConfig(config) {\n    var apiCore = new CalendarWorkTimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\n    apiCore.id = String(utils.uid());\n\n    var preparedConfig = this._convertWorkTimeSettings(config);\n\n    if (preparedConfig.customWeeks) {\n      for (var i in preparedConfig.customWeeks) {\n        preparedConfig.customWeeks[i] = this._convertWorkTimeSettings(preparedConfig.customWeeks[i]);\n      }\n    }\n\n    apiCore._setConfig(preparedConfig);\n\n    return apiCore;\n  },\n  createCalendar: function createCalendar(parentCalendar) {\n    var settings;\n\n    if (!parentCalendar) {\n      parentCalendar = {};\n    }\n\n    if (parentCalendar.getConfig) {\n      settings = utils.copy(parentCalendar.getConfig());\n    } else if (parentCalendar.worktime) {\n      settings = utils.copy(parentCalendar.worktime);\n    } else {\n      settings = utils.copy(parentCalendar);\n    }\n\n    var defaults = utils.copy(this.defaults.fulltime.worktime);\n    utils.mixin(settings, defaults);\n    return this._createCalendarFromConfig(settings);\n  },\n  getCalendar: function getCalendar(id) {\n    id = id || \"global\";\n    var calendar = this._calendars[id];\n\n    if (!calendar) {\n      this.createDefaultCalendars();\n      calendar = this._calendars[id];\n    }\n\n    return calendar;\n  },\n  getCalendars: function getCalendars() {\n    var res = [];\n\n    for (var i in this._calendars) {\n      res.push(this.getCalendar(i));\n    }\n\n    return res;\n  },\n  _getOwnCalendar: function _getOwnCalendar(task) {\n    var config = this.$gantt.config;\n\n    if (task[config.calendar_property]) {\n      return this.getCalendar(task[config.calendar_property]);\n    }\n\n    if (config.resource_calendars) {\n      var calendar;\n      var calendarId;\n      var resourceProperty;\n\n      if (this._legacyConfig === false) {\n        resourceProperty = config.resource_property;\n      } else {\n        resourceProperty = legacyResourceCalendarConfig.getResourceProperty(config);\n      }\n\n      if (Array.isArray(task[resourceProperty])) {\n        // if multiple resources are attached to the task - merge their calendars\n        if (config.dynamic_resource_calendars) {\n          calendarId = dynamicResourceCalendars.getCalendarIdFromMultipleResources(task[resourceProperty], this);\n        }\n      } else {\n        if (this._legacyConfig === undefined) {\n          this._legacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(config.resource_calendars);\n        }\n\n        if (this._legacyConfig) {\n          var calendarId = legacyResourceCalendarConfig.getCalendarIdFromLegacyConfig(task, config.resource_calendars);\n        } else if (resourceProperty && task[resourceProperty] && config.resource_calendars[task[resourceProperty]]) {\n          var calendar = this.getResourceCalendar(task[resourceProperty]);\n        }\n      }\n\n      if (calendarId) {\n        calendar = this.getCalendar(calendarId);\n      }\n\n      if (calendar) {\n        return calendar;\n      }\n    }\n\n    return null;\n  },\n\n  /**\r\n   * Returns calendar assigned to the specified resource.\r\n   * Returns the global calendar if no custom calendar is associated with the resource.\r\n   * @param {(string|number|Object)} resource - resource object or resource id\r\n   * @returns {object} Calendar object\r\n   */\n  getResourceCalendar: function getResourceCalendar(resource) {\n    if (resource === null || resource === undefined) {\n      return this.getCalendar();\n    }\n\n    var resourceId = null; // if task id is provided\n\n    if (typeof resource === \"number\" || typeof resource === \"string\") {\n      resourceId = resource;\n    } else {\n      resourceId = resource.id || resource.key;\n    }\n\n    var config = this.$gantt.config;\n    var calendarsConfig = config.resource_calendars;\n    var calendarId = null;\n\n    if (calendarsConfig) {\n      if (this._legacyConfig === undefined) {\n        this._legacyConfig = legacyResourceCalendarConfig.isLegacyResourceCalendarFormat(config.resource_calendars);\n      }\n\n      if (this._legacyConfig) {\n        for (var field in calendarsConfig) {\n          if (calendarsConfig[field][resourceId]) {\n            calendarId = calendarsConfig[field][resourceId];\n            break;\n          }\n        }\n      } else {\n        var calendarId = calendarsConfig[resourceId];\n      }\n\n      if (calendarId) {\n        return this.getCalendar(calendarId);\n      }\n    }\n\n    return this.getCalendar();\n  },\n\n  /**\r\n   * Returns the calendar assigned to a task.\r\n   * - Returns a calendar assigned via task[gantt.config.calendar_property] if specified.\r\n   * - Returns a calendar assigned to the task resource if specified.\r\n   * - Returns the global calendar otherwise.\r\n   * @param {(string|number|Object)} task - task object or task id\r\n   * @returns {object} Calendar object\r\n   */\n  getTaskCalendar: function getTaskCalendar(task) {\n    var gantt = this.$gantt;\n    var taskObject;\n\n    if (task === null || task === undefined) {\n      return this.getCalendar();\n    } // if task id is provided\n\n\n    if ((typeof task === \"number\" || typeof task === \"string\") && gantt.isTaskExists(task)) {\n      taskObject = gantt.getTask(task);\n    } else {\n      taskObject = task;\n    }\n\n    if (!taskObject) {\n      return this.getCalendar();\n    }\n\n    var calendar = this._getOwnCalendar(taskObject);\n\n    var groupMode = !!gantt.getState().group_mode;\n\n    if (!calendar && gantt.config.inherit_calendar && gantt.isTaskExists(taskObject.parent)) {\n      // GS-1579  group mode overrides tree hierarchy, iterate using `.parent` property, instead of using eachParent iterator\n      var currentTask = taskObject;\n\n      while (gantt.isTaskExists(currentTask.parent)) {\n        currentTask = gantt.getTask(currentTask.parent);\n\n        if (gantt.isSummaryTask(currentTask)) {\n          calendar = this._getOwnCalendar(currentTask);\n\n          if (calendar) {\n            break;\n          }\n        }\n      }\n\n      if (groupMode && !calendar) {\n        // if group mode and inherit_calendars is enabled - preserve previously applied parent calendar\n        // we may need it when groupBy parses grouped data, old parent may be not loaded yet\n        if (task.$effective_calendar) {\n          calendar = this.getCalendar(task.$effective_calendar);\n        }\n      }\n    }\n\n    return calendar || this.getCalendar();\n  },\n  addCalendar: function addCalendar(calendar) {\n    // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\n    if (!this.isCalendar(calendar)) {\n      var id = calendar.id;\n      calendar = this.createCalendar(calendar);\n      calendar.id = id;\n    } // validate/check if empty calendar\n\n\n    if (!calendar._tryChangeCalendarSettings(function () {})) {\n      this.$gantt.callEvent(\"onCalendarError\", [{\n        message: \"Invalid calendar settings, no worktime available\"\n      }, calendar]);\n      return null;\n    } else {\n      var config = this.$gantt.config;\n      calendar.id = calendar.id || utils.uid();\n      this._calendars[calendar.id] = calendar;\n      if (!config.worktimes) config.worktimes = {};\n      config.worktimes[calendar.id] = calendar.getConfig();\n      return calendar.id;\n    }\n  },\n  deleteCalendar: function deleteCalendar(calendar) {\n    var config = this.$gantt.config;\n    if (!calendar) return false;\n\n    if (this._calendars[calendar]) {\n      delete this._calendars[calendar];\n      if (config.worktimes && config.worktimes[calendar]) delete config.worktimes[calendar];\n      return true;\n    } else {\n      return false;\n    }\n  },\n  restoreConfigCalendars: function restoreConfigCalendars(configs) {\n    for (var i in configs) {\n      if (this._calendars[i]) continue;\n      var settings = configs[i];\n      var calendar = this.createCalendar(settings);\n      calendar.id = i;\n      this.addCalendar(calendar);\n    }\n  },\n  defaults: {\n    global: {\n      id: \"global\",\n      worktime: {\n        hours: [8, 12, 13, 17],\n        days: [0, 1, 1, 1, 1, 1, 0]\n      }\n    },\n    fulltime: {\n      id: \"fulltime\",\n      worktime: {\n        hours: [0, 24],\n        days: [1, 1, 1, 1, 1, 1, 1]\n      }\n    }\n  },\n  createDefaultCalendars: function createDefaultCalendars() {\n    var config = this.$gantt.config;\n    this.restoreConfigCalendars(this.defaults);\n    this.restoreConfigCalendars(config.worktimes);\n  },\n  isCalendar: function isCalendar(possibleCalendar) {\n    // because we don't have any way to check without dependency to CalendarWorkTimeStrategy\n    var props = [possibleCalendar.isWorkTime, possibleCalendar.setWorkTime, possibleCalendar.getWorkHours, possibleCalendar.unsetWorkTime, possibleCalendar.getClosestWorkTime, possibleCalendar.calculateDuration, possibleCalendar.hasDuration, possibleCalendar.calculateEndDate];\n    return props.every(function (entry) {\n      return entry instanceof Function;\n    });\n  }\n};\nmodule.exports = CalendarManager;","var CalendarManager = require(\"./calendar_manager\"),\n    TimeCalculator = require(\"./time_calculator\"),\n    worktimeFacadeFactory = require(\"../facades/worktime_calendars\"),\n    utils = require(\"../../utils/utils\");\n\nmodule.exports = function (gantt) {\n  var manager = new CalendarManager(gantt),\n      timeCalculator = new TimeCalculator(manager);\n  var facade = worktimeFacadeFactory.create(manager, timeCalculator);\n  utils.mixin(gantt, facade);\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar helpers = require(\"../utils/helpers\");\n\nmodule.exports = function (gantt) {\n  gantt.load = function (url, type, callback) {\n    this._load_url = url;\n    this.assert(arguments.length, \"Invalid load arguments\");\n    var tp = 'json',\n        cl = null;\n\n    if (arguments.length >= 3) {\n      tp = type;\n      cl = callback;\n    } else {\n      if (typeof arguments[1] == \"string\") tp = arguments[1];else if (typeof arguments[1] == \"function\") cl = arguments[1];\n    }\n\n    this._load_type = tp;\n    this.callEvent(\"onLoadStart\", [url, tp]);\n    return this.ajax.get(url, gantt.bind(function (l) {\n      this.on_load(l, tp);\n      this.callEvent(\"onLoadEnd\", [url, tp]);\n      if (typeof cl == \"function\") cl.call(this);\n    }, this));\n  };\n\n  gantt.parse = function (data, type) {\n    this.on_load({\n      xmlDoc: {\n        responseText: data\n      }\n    }, type);\n  };\n\n  gantt.serialize = function (type) {\n    type = type || \"json\";\n    return this[type].serialize();\n  };\n  /*\r\n  tasks and relations\r\n  {\r\n  data:[\r\n  \t{\r\n  \t\t\"id\":\"string\",\r\n  \t\t\"text\":\"...\",\r\n  \t\t\"start_date\":\"Date or string\",\r\n  \t\t\"end_date\":\"Date or string\",\r\n  \t\t\"duration\":\"number\",\r\n  \t\t\"progress\":\"0..1\",\r\n  \t\t\"parent_id\":\"string\",\r\n  \t\t\"order\":\"number\"\r\n  \t},...],\r\n  links:[\r\n  \t{\r\n  \t\tid:\"string\",\r\n  \t\tsource:\"string\",\r\n  \t\ttarget:\"string\",\r\n  \t\ttype:\"string\"\r\n  \t},...],\r\n  collections:{\r\n  \t\tcollectionName:[\r\n  \t\t\t{key:, label:, optional:...},...\r\n  \t\t],...\r\n  \t}\r\n  }\r\n  \n  * */\n\n\n  gantt.on_load = function (resp, type) {\n    if (resp.xmlDoc && resp.xmlDoc.status === 404) {\n      // work if we don't have a file at current url\n      this.assert(false, \"Failed to load the data from <a href='\" + resp.xmlDoc.responseURL + \"' target='_blank'>\" + resp.xmlDoc.responseURL + \"</a>, server returns 404\");\n      return;\n    }\n\n    if (gantt.$destroyed) {\n      return;\n    }\n\n    this.callEvent(\"onBeforeParse\", []);\n    if (!type) type = \"json\";\n    this.assert(this[type], \"Invalid data type:'\" + type + \"'\");\n    var raw = resp.xmlDoc.responseText;\n    var data = this[type].parse(raw, resp);\n\n    this._process_loading(data);\n  };\n\n  function attachAssignmentsToTasks(tasks, assignments) {\n    var assignmentsByTasks = {};\n    assignments.forEach(function (a) {\n      if (!assignmentsByTasks[a.task_id]) {\n        assignmentsByTasks[a.task_id] = [];\n      }\n\n      assignmentsByTasks[a.task_id].push(a);\n    });\n    tasks.forEach(function (t) {\n      t[gantt.config.resource_property] = assignmentsByTasks[t.id] || [];\n    });\n  }\n\n  gantt._process_loading = function (data) {\n    if (data.collections) this._load_collections(data.collections);\n\n    if (data.resources && this.$data.resourcesStore) {\n      this.$data.resourcesStore.parse(data.resources);\n    }\n\n    var tasks = data.data || data.tasks;\n\n    if (data.assignments) {\n      attachAssignmentsToTasks(tasks, data.assignments);\n    }\n\n    this.$data.tasksStore.parse(tasks);\n    var links = data.links || (data.collections ? data.collections.links : []);\n    this.$data.linksStore.parse(links); //this._sync_links();\n\n    this.callEvent(\"onParse\", []);\n    this.render();\n  };\n\n  gantt._load_collections = function (collections) {\n    var collections_loaded = false;\n\n    for (var key in collections) {\n      if (collections.hasOwnProperty(key)) {\n        collections_loaded = true;\n        var collection = collections[key]; // GS-1728. Create an empty serverList if it doesn't exist\n\n        this.serverList[key] = this.serverList[key] || [];\n        var arr = this.serverList[key];\n        if (!arr) continue;\n        arr.splice(0, arr.length); //clear old options\n\n        for (var j = 0; j < collection.length; j++) {\n          var option = collection[j];\n          var obj = this.copy(option);\n          obj.key = obj.value; // resulting option object\n\n          for (var option_key in option) {\n            if (option.hasOwnProperty(option_key)) {\n              if (option_key == \"value\" || option_key == \"label\") continue;\n              obj[option_key] = option[option_key]; // obj['value'] = option['value']\n            }\n          }\n\n          arr.push(obj);\n        }\n      }\n    }\n\n    if (collections_loaded) this.callEvent(\"onOptionsLoad\", []);\n  };\n\n  gantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\n    return !task.$ignore;\n  });\n\n  function jsonParseError(data) {\n    gantt.assert(false, \"Can't parse data: incorrect value of gantt.parse or gantt.load method. \" + \"Actual argument value: \" + JSON.stringify(data));\n    throw new Error(\"Invalid argument for gantt.parse or gantt.load. An object or a JSON string of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#json is expected. Actual argument value: \" + JSON.stringify(data));\n  }\n\n  gantt.json = {\n    parse: function parse(data) {\n      if (!data) {\n        jsonParseError(data);\n      }\n\n      if (typeof data == \"string\") {\n        if ((typeof JSON === \"undefined\" ? \"undefined\" : _typeof(JSON)) != undefined) {\n          try {\n            data = JSON.parse(data);\n          } catch (e) {\n            jsonParseError(data);\n          }\n        } else {\n          gantt.assert(false, \"JSON is not supported\");\n        }\n      }\n\n      if (!data.data && !data.tasks) {\n        jsonParseError(data);\n      }\n\n      if (data.dhx_security) gantt.security_key = data.dhx_security;\n      return data;\n    },\n    serializeTask: function serializeTask(task) {\n      return this._copyObject(task);\n    },\n    serializeLink: function serializeLink(link) {\n      return this._copyLink(link);\n    },\n    _copyLink: function _copyLink(obj) {\n      var copy = {};\n\n      for (var key in obj) {\n        copy[key] = obj[key];\n      }\n\n      return copy;\n    },\n    _copyObject: function _copyObject(obj) {\n      var copy = {};\n\n      for (var key in obj) {\n        if (key.charAt(0) == \"$\") continue;\n        copy[key] = obj[key];\n\n        if (helpers.isDate(copy[key])) {\n          copy[key] = gantt.defined(gantt.templates.xml_format) ? gantt.templates.xml_format(copy[key]) : gantt.templates.format_date(copy[key]);\n        }\n      }\n\n      return copy;\n    },\n    serialize: function serialize() {\n      var tasks = [];\n      var links = [];\n      gantt.eachTask(function (obj) {\n        gantt.resetProjectDates(obj);\n        tasks.push(this.serializeTask(obj));\n      }, gantt.config.root_id, this);\n      var rawLinks = gantt.getLinks();\n\n      for (var i = 0; i < rawLinks.length; i++) {\n        links.push(this.serializeLink(rawLinks[i]));\n      }\n\n      return {\n        data: tasks,\n        links: links\n      };\n    }\n  };\n  /*\r\n  <data>\r\n  \t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n  \t\t<text>My task 1</text>\r\n  \t\t<start_date>16.08.2013</start_date>\r\n  \t\t<end_date>22.08.2013</end_date>\r\n  \t</task>\r\n  \t<coll_options>\r\n  \t\t<links>\r\n  \t\t\t<link source='a1' target='b2' type='c3' />\r\n  \t\t</links>\r\n  \t</coll_options>\r\n  </data>\r\n  */\n\n  function xmlParseError(data) {\n    gantt.assert(false, \"Can't parse data: incorrect value of gantt.parse or gantt.load method. \" + \"Actual argument value: \" + JSON.stringify(data));\n    throw new Error(\"Invalid argument for gantt.parse or gantt.load. An XML of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#xmldhtmlxgantt20 is expected. Actual argument value: \" + JSON.stringify(data));\n  }\n\n  gantt.xml = {\n    _xmlNodeToJSON: function _xmlNodeToJSON(node, attrs_only) {\n      var t = {};\n\n      for (var i = 0; i < node.attributes.length; i++) {\n        t[node.attributes[i].name] = node.attributes[i].value;\n      }\n\n      if (!attrs_only) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child = node.childNodes[i];\n          if (child.nodeType == 1) t[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\n        }\n\n        if (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\n      }\n\n      return t;\n    },\n    _getCollections: function _getCollections(loader) {\n      var collection = {};\n      var opts = gantt.ajax.xpath(\"//coll_options\", loader);\n\n      for (var i = 0; i < opts.length; i++) {\n        var bind = opts[i].getAttribute(\"for\");\n        var arr = collection[bind] = [];\n        var itms = gantt.ajax.xpath(\".//item\", opts[i]);\n\n        for (var j = 0; j < itms.length; j++) {\n          var itm = itms[j];\n          var attrs = itm.attributes;\n          var obj = {\n            key: itms[j].getAttribute(\"value\"),\n            label: itms[j].getAttribute(\"label\")\n          };\n\n          for (var k = 0; k < attrs.length; k++) {\n            var attr = attrs[k];\n            if (attr.nodeName == \"value\" || attr.nodeName == \"label\") continue;\n            obj[attr.nodeName] = attr.nodeValue;\n          }\n\n          arr.push(obj);\n        }\n      }\n\n      return collection;\n    },\n    _getXML: function _getXML(text, loader, toptag) {\n      toptag = toptag || \"data\";\n\n      if (!loader.getXMLTopNode) {\n        loader = gantt.ajax.parse(loader);\n      }\n\n      var xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\n\n      if (!xml || xml.tagName != toptag) {\n        xmlParseError(text);\n      }\n\n      var skey = xml.getAttribute(\"dhx_security\");\n      if (skey) gantt.security_key = skey;\n      return xml;\n    },\n    parse: function parse(text, loader) {\n      loader = this._getXML(text, loader);\n      var data = {};\n      var evs = data.data = [];\n      var xml = gantt.ajax.xpath(\"//task\", loader);\n\n      for (var i = 0; i < xml.length; i++) {\n        evs[i] = this._xmlNodeToJSON(xml[i]);\n      }\n\n      data.collections = this._getCollections(loader);\n      return data;\n    },\n    _copyLink: function _copyLink(obj) {\n      return \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\n    },\n    _copyObject: function _copyObject(obj) {\n      return \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + !!obj.open + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\n    },\n    serialize: function serialize() {\n      var tasks = [];\n      var links = [];\n      var json = gantt.json.serialize();\n\n      for (var i = 0, len = json.data.length; i < len; i++) {\n        tasks.push(this._copyObject(json.data[i]));\n      }\n\n      for (var i = 0, len = json.links.length; i < len; i++) {\n        links.push(this._copyLink(json.links[i]));\n      }\n\n      return \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\n    }\n  };\n  gantt.oldxml = {\n    parse: function parse(text, loader) {\n      loader = gantt.xml._getXML(text, loader, \"projects\");\n      var data = {\n        collections: {\n          links: []\n        }\n      };\n      var evs = data.data = [];\n      var xml = gantt.ajax.xpath(\"//task\", loader);\n\n      for (var i = 0; i < xml.length; i++) {\n        evs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\n        var parent = xml[i].parentNode;\n        if (parent.tagName == \"project\") evs[i].parent = \"project-\" + parent.getAttribute(\"id\");else evs[i].parent = parent.parentNode.getAttribute(\"id\");\n      }\n\n      xml = gantt.ajax.xpath(\"//project\", loader);\n\n      for (var i = 0; i < xml.length; i++) {\n        var ev = gantt.xml._xmlNodeToJSON(xml[i], true);\n\n        ev.id = \"project-\" + ev.id;\n        evs.push(ev);\n      }\n\n      for (var i = 0; i < evs.length; i++) {\n        var ev = evs[i];\n        ev.start_date = ev.startdate || ev.est;\n        ev.end_date = ev.enddate;\n        ev.text = ev.name;\n        ev.duration = ev.duration / 8;\n        ev.open = 1;\n        if (!ev.duration && !ev.end_date) ev.duration = 1;\n        if (ev.predecessortasks) data.collections.links.push({\n          target: ev.id,\n          source: ev.predecessortasks,\n          type: gantt.config.links.finish_to_start\n        });\n      }\n\n      return data;\n    },\n    serialize: function serialize() {\n      gantt.message(\"Serialization to 'old XML' is not implemented\");\n    }\n  };\n\n  gantt.serverList = function (name, array) {\n    if (array) {\n      this.serverList[name] = array.slice(0);\n    } else if (!this.serverList[name]) {\n      this.serverList[name] = [];\n    }\n\n    return this.serverList[name];\n  };\n};","module.exports = function (gantt) {\n  gantt.isReadonly = function (item) {\n    if ((typeof item == \"number\" || typeof item == \"string\") && gantt.isTaskExists(item)) {\n      item = gantt.getTask(item);\n    }\n\n    if (item && item[this.config.editable_property]) {\n      return false;\n    } else {\n      return item && item[this.config.readonly_property] || this.config.readonly;\n    }\n  };\n};","module.exports = function (gantt) {\n  gantt.getGridColumn = function (name) {\n    var columns = gantt.config.columns;\n\n    for (var i = 0; i < columns.length; i++) {\n      if (columns[i].name == name) return columns[i];\n    }\n\n    return null;\n  };\n\n  gantt.getGridColumns = function () {\n    return gantt.config.columns.slice();\n  };\n};","const SENSITIVITY = 20;\r\nconst TIMEOUT = 50;\r\nconst SCROLLSTEP = 10;\r\n\r\nexport default class ScrollableGrid {\r\n\tpublic getCurrentX;\r\n\tprivate $gantt;\r\n\tprivate $grid;\r\n\tprivate _dnd;\r\n\tprivate _scrollView;\r\n\tprivate _scrollOrder: 0 | 1 | -1 = 0;\r\n\r\n\tconstructor(params) {\r\n\t\tconst {gantt, grid, dnd, getCurrentX} = params;\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$grid = grid;\r\n\t\tthis._dnd = dnd;\r\n\t\tthis.getCurrentX = getCurrentX;\r\n\t\tthis._scrollView = this.$gantt.$ui.getView(this.$grid.$config.scrollX);\r\n\t\tthis.attachEvents();\r\n\t}\r\n\tattachEvents() {\r\n\t\tif (this.isScrollable()) {\r\n\t\t\tthis._dnd.attachEvent(\"onDragMove\", (obj, e) => {\r\n\t\t\t\tconst gridBoundingRect = this.$grid.$grid.getBoundingClientRect();\r\n\t\t\t\tconst maxLeft = gridBoundingRect.right;\r\n\t\t\t\tconst minLeft = gridBoundingRect.left;\r\n\t\t\t\tconst currentX = this.getCurrentX(e.clientX);\r\n\r\n\t\t\t\tif (currentX >= maxLeft - SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollRight();\r\n\t\t\t\t\tthis.autoscrollStart();\r\n\t\t\t\t}\r\n\t\t\t\tif (currentX <= minLeft + SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollLeft();\r\n\t\t\t\t\tthis.autoscrollStart();\r\n\t\t\t\t}\r\n\t\t\t\tif (currentX < maxLeft - SENSITIVITY && currentX > minLeft + SENSITIVITY) {\r\n\t\t\t\t\tthis.autoscrollStop();\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tthis._dnd.attachEvent(\"onDragEnd\", () => {\r\n\t\t\t\tthis.autoscrollStop();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tautoscrollStart() {\r\n\t\tif (this._scrollOrder === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst scrollStep = SCROLLSTEP * this._scrollOrder;\r\n\t\tconst scrollState = this._scrollView.getScrollState();\r\n\t\tthis._scrollView.scrollTo(scrollState.position + scrollStep);\r\n\t\tsetTimeout(() => { this.autoscrollStart(); }, TIMEOUT);\r\n\t}\r\n\tautoscrollRight() {\r\n\t\tthis._scrollOrder = 1;\r\n\t}\r\n\tautoscrollLeft() {\r\n\t\tthis._scrollOrder = -1;\r\n\t}\r\n\tautoscrollStop() {\r\n\t\tthis._scrollOrder = 0;\r\n\t}\r\n\tgetCorrection() {\r\n\t\tif (!this.isScrollable()) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this._scrollView.getScrollState().position;\r\n\t}\r\n\tisScrollable() {\r\n\t\treturn !!this.$grid.$config.scrollable;\r\n\t}\r\n}","import * as domHelpers from \"../../utils/dom_helpers\";\r\nimport ScrollableGrid from \"./scrollable_grid\";\r\n\r\nconst COLUMN_ID_ATTR_NAME = \"data-column-id\";\r\n\r\nexport class ColumnsGridDnd {\r\n\tprivate $gantt;\r\n\tprivate $grid;\r\n\tprivate _dragX;\r\n\tprivate _dnd;\r\n\tprivate _originAutoscroll;\r\n\tprivate _scrollableGrid: ScrollableGrid;\r\n\tprivate _draggedCell;\r\n\tprivate _targetMarker = null;\r\n\tprivate _gridConfig;\r\n\tconstructor(gantt, grid) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$grid = grid;\r\n\t}\r\n\tinit() {\r\n\t\tconst DND = this.$gantt.$services.getService(\"dnd\");\r\n\t\tthis._dnd = new DND(this.$grid.$grid_scale, { updates_per_second: 60 });\r\n\t\tthis._scrollableGrid = new ScrollableGrid({\r\n\t\t\tgantt: this.$gantt,\r\n\t\t\tgrid: this.$grid,\r\n\t\t\tdnd: this._dnd,\r\n\t\t\tgetCurrentX: this.calculateCurrentPosition\r\n\t\t});\r\n\t\tthis.attachEvents();\r\n\t}\r\n\tattachEvents() {\r\n\t\tthis._dnd.attachEvent(\"onBeforeDragStart\", (obj, e) => {\r\n\t\t\tthis._draggedCell = this.$gantt.utils.dom.closest(e.target, \".gantt_grid_head_cell\");\r\n\t\t\tif(!this._draggedCell){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\t\tconst columnName = this._draggedCell.getAttribute(COLUMN_ID_ATTR_NAME);\r\n\t\t\tlet draggedColumn;\r\n\t\t\tlet draggedIndex;\r\n\t\t\tcolumns.map(function(column, index){\r\n\t\t\t\tif(column.name === columnName){\r\n\t\t\t\t\tdraggedColumn = column;\r\n\t\t\t\t\tdraggedIndex = index;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (this.$grid.callEvent(\"onBeforeColumnDragStart\", [{ draggedColumn, draggedIndex}]) === false) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this._draggedCell || !draggedColumn) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._gridConfig = this.$grid.$getConfig();\r\n\t\t\tthis._originAutoscroll = this.$gantt.config.autoscroll;\r\n\t\t\tthis.$gantt.config.autoscroll = false;\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onAfterDragStart\", (obj, e) => {\r\n\t\t\tif (!this._draggedCell) {\r\n\t\t\t\treturn; // GS-1333: don't try to reorder a column when we resize it\r\n\t\t\t}\r\n\t\t\tthis._dnd.config.column = this._draggedCell.getAttribute(COLUMN_ID_ATTR_NAME);\r\n\t\t\tthis._dnd.config.marker.innerHTML = this._draggedCell.outerHTML;\r\n\t\t\tthis._dnd.config.marker.classList.add(\"gantt_column_drag_marker\");\r\n\t\t\tthis._dnd.config.marker.style.height = this._gridConfig.scale_height + \"px\";\r\n\t\t\tthis._dnd.config.marker.style.lineHeight = this._gridConfig.scale_height + \"px\";\r\n\t\t\tthis._draggedCell.classList.add(\"gantt_grid_head_cell_dragged\");\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onDragMove\", (obj, e) => {\r\n\t\t\tif(!this._draggedCell){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._dragX = e.clientX;\r\n\t\t\tconst x = this.calculateCurrentPosition(e.clientX);\r\n\t\t\tconst columnIndexes = this.findColumnsIndexes();\r\n\t\t\tconst targetIndex = columnIndexes.targetIndex;\r\n\t\t\tconst draggedIndex = columnIndexes.draggedIndex;\r\n\t\t\tconst columns = this.$grid.$getConfig().columns;\r\n\r\n\t\t\tconst draggedColumn = columns[draggedIndex];\r\n\t\t\tconst targetColumn = columns[targetIndex];\r\n\t\t\tif (this.$grid.callEvent(\"onColumnDragMove\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]) === false) {\r\n\t\t\t\tthis.cleanTargetMarker();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.setMarkerPosition(x);\r\n\t\t\tthis.drawTargetMarker(columnIndexes);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tthis._dnd.attachEvent(\"onDragEnd\", () => {\r\n\t\t\tif (!this._draggedCell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$gantt.config.autoscroll = this._originAutoscroll;\r\n\t\t\tthis._draggedCell.classList.remove(\"gantt_grid_head_cell_dragged\");\r\n\t\t\tthis.cleanTargetMarker();\r\n\t\t\tthis.reorderColumns();\r\n\t\t});\r\n\r\n\t}\r\n\treorderColumns() {\r\n\t\tconst { targetIndex, draggedIndex } = this.findColumnsIndexes();\r\n\r\n\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\tconst draggedColumn = columns[draggedIndex];\r\n\t\tconst targetColumn = columns[targetIndex];\r\n\r\n\t\tif (this.$grid.callEvent(\"onBeforeColumnReorder\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]) === false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (targetIndex === draggedIndex) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcolumns.splice(draggedIndex, 1);\r\n\t\tcolumns.splice(targetIndex, 0, draggedColumn);\r\n\t\tthis.$gantt.render();\r\n\t\tthis.$grid.callEvent(\"onAfterColumnReorder\", [{ draggedColumn, targetColumn, draggedIndex, targetIndex }]);\r\n\t}\r\n\tfindColumnsIndexes() {\r\n\t\tconst draggedId = this._dnd.config.column;\r\n\t\tconst columns = this.$grid.$getConfig().columns;\r\n\t\tlet targetIndex: number;\r\n\t\tlet draggedIndex: number;\r\n\t\tlet xBefore: number;\r\n\t\tlet xAfter: number;\r\n\t\tconst currentColumn = { startX: 0, endX: 0 };\r\n\r\n\t\tlet start = 0;\r\n\t\tlet end = columns.length - 1;\r\n\t\tlet compare = (a, b) => a <= b;\r\n\t\tlet next = (index) => ++index;\r\n\t\tif (this.$gantt.config.rtl) {\r\n\t\t\tstart = columns.length - 1;\r\n\t\t\tend = 0;\r\n\t\t\tcompare = (a, b) => a >= b;\r\n\t\t\tnext = (index) => --index;\r\n\t\t}\r\n\r\n\t\tlet columnRelativePos: number;\r\n\r\n\t\tconst relativeX = this._dragX - this.$grid.$grid.getBoundingClientRect().left + this._scrollableGrid.getCorrection();\r\n\t\tfor (let i = start; compare(i, end); i = next(i)) {\r\n\t\t\tif (targetIndex !== undefined && draggedIndex !== undefined) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif(!columns[i].hide) {\r\n\t\t\t\tcurrentColumn.startX = currentColumn.endX;\r\n\t\t\t\tcurrentColumn.endX += columns[i].width;\r\n\r\n\t\t\t\t// if drop on a column or drop after the last column\r\n\t\t\t\tif (relativeX >= currentColumn.startX && (relativeX <= currentColumn.endX || !compare(next(i), end))) {\r\n\t\t\t\t\ttargetIndex = i;\r\n\t\t\t\t\txBefore = currentColumn.startX;\r\n\t\t\t\t\txAfter = currentColumn.endX;\r\n\t\t\t\t\tcolumnRelativePos = (relativeX - currentColumn.startX) / (currentColumn.endX - currentColumn.startX);\r\n\t\t\t\t}\r\n\t\t\t\tif (draggedId === columns[i].name) {\r\n\t\t\t\t\tdraggedIndex = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttargetIndex,\r\n\t\t\tdraggedIndex,\r\n\t\t\txBefore,\r\n\t\t\txAfter,\r\n\t\t\tcolumnRelativePos\r\n\t\t};\r\n\t}\r\n\tsetMarkerPosition(x: number, y: number = 10) {\r\n\t\tconst { marker } = this._dnd.config;\r\n\t\tconst gridOffset = this._dnd._obj.getBoundingClientRect();\r\n\t\tmarker.style.top = `${gridOffset.y + y}px`;\r\n\t\tmarker.style.left = `${x}px`;\r\n\t}\r\n\tcalculateCurrentPosition = (eventX: number) => {\r\n\t\tconst gridBoundingRect = this.$grid.$grid.getBoundingClientRect();\r\n\t\tconst maxLeft = gridBoundingRect.right;\r\n\t\tconst minLeft = gridBoundingRect.left;\r\n\t\tlet x = eventX;\r\n\t\tif (x > maxLeft) {\r\n\t\t\tx = maxLeft;\r\n\t\t}\r\n\t\tif (x < minLeft) {\r\n\t\t\tx = minLeft;\r\n\t\t}\r\n\t\treturn x;\r\n\t}\r\n\tdrawTargetMarker({ targetIndex, draggedIndex, xBefore, xAfter, columnRelativePos }) {\r\n\t\tif (!this._targetMarker) {\r\n\t\t\tthis._targetMarker = document.createElement(\"div\");\r\n\t\t\tdomHelpers.addClassName(this._targetMarker, \"gantt_grid_target_marker\");\r\n\t\t\tthis._targetMarker.style.display = \"none\";\r\n\t\t\tthis._targetMarker.style.height = `${this._gridConfig.scale_height}px`;\r\n\t\t}\r\n\r\n\t\t// marker can be detached after gantt.render\r\n\t\tif(!this._targetMarker.parentNode){\r\n\t\t\tthis.$grid.$grid_scale.appendChild(this._targetMarker);\r\n\t\t}\r\n\r\n\t\tlet nextPosition: number;\r\n\t\tif (targetIndex > draggedIndex) {\r\n\t\t\tnextPosition = xAfter;\r\n\t\t} else if (targetIndex < draggedIndex) {\r\n\t\t\tnextPosition = xBefore;\r\n\t\t} else {\r\n\t\t\tif(columnRelativePos > 0.5){\r\n\t\t\t\tnextPosition = xAfter;\r\n\t\t\t}else{\r\n\t\t\t\tnextPosition = xBefore;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._targetMarker.style.left = `${nextPosition}px`;\r\n\t\tthis._targetMarker.style.display = \"block\";\r\n\t}\r\n\tcleanTargetMarker() {\r\n\t\tif (this._targetMarker && this._targetMarker.parentNode) {\r\n\t\t\tthis.$grid.$grid_scale.removeChild(this._targetMarker);\r\n\t\t}\r\n\t\tthis._targetMarker = null;\r\n\t}\r\n}","import {ColumnsGridDnd} from \"./column_grid_dnd\";\r\nexport default ColumnsGridDnd;","var domHelpers = require(\"../utils/dom_helpers\");\n\nfunction createRowResizer(gantt, grid) {\n  var _task_grid_row_resize = {\n    row_before_start: gantt.bind(function (dnd, obj, e) {\n      var config = grid.$getConfig();\n      var store = grid.$config.rowStore;\n      var el = domHelpers.locateAttribute(e, config.task_grid_row_resizer_attribute);\n      if (!el) return false;\n      var row_id = this.locate(e, config.task_grid_row_resizer_attribute),\n          row = store.getItem(row_id);\n      if (grid.callEvent(\"onBeforeRowResize\", [row]) === false) return false;\n    }, gantt),\n    row_after_start: gantt.bind(function (dnd, obj, e) {\n      var config = grid.$getConfig();\n      var row_id = this.locate(e, config.task_grid_row_resizer_attribute);\n      dnd.config.marker.innerHTML = \"\";\n      dnd.config.marker.className += \" gantt_row_grid_resize_area\";\n      dnd.config.marker.style.width = grid.$grid.offsetWidth + \"px\";\n      dnd.config.drag_id = row_id;\n    }, gantt),\n    row_drag_move: gantt.bind(function (dnd, obj, e) {\n      var store = grid.$config.rowStore;\n      var config = grid.$getConfig();\n      var dd = dnd.config;\n      var id = dd.drag_id,\n          itemHeight = grid.getItemHeight(id),\n          itemTop = grid.getItemTop(id);\n      var pos = domHelpers.getNodePosition(grid.$grid_data),\n          pointerPosition = parseInt(dd.marker.style.top, 10),\n          markerStartPosition = itemTop + pos.y,\n          marker_height = 0,\n          minPointerPosition = config.min_task_grid_row_height;\n      marker_height = pointerPosition - markerStartPosition;\n\n      if (marker_height < minPointerPosition) {\n        marker_height = minPointerPosition;\n      }\n\n      dd.marker.style.left = pos.x + \"px\";\n      dd.marker.style.top = markerStartPosition - 1 + \"px\";\n      dd.marker.style.height = Math.abs(marker_height) + 1 + \"px\";\n      dd.marker_height = marker_height;\n      grid.callEvent(\"onRowResize\", [id, store.getItem(id), marker_height + itemHeight]);\n      return true;\n    }, gantt),\n    row_drag_end: gantt.bind(function (dnd, obj, e) {\n      var store = grid.$config.rowStore;\n      var dd = dnd.config;\n      var id = dd.drag_id,\n          item = store.getItem(id),\n          oldItemHeight = grid.getItemHeight(id);\n      var finalHeight = dd.marker_height;\n      if (grid.callEvent(\"onBeforeRowResizeEnd\", [id, item, finalHeight]) === false) return;\n      if (item.row_height == finalHeight) return;\n      item.row_height = finalHeight;\n      gantt.updateTask(id);\n      grid.callEvent(\"onAfterRowResize\", [id, item, oldItemHeight, finalHeight]);\n      this.render();\n    }, gantt)\n  }; // calls the initialization of the D'n'D events for resize elements\n\n  var _init_resize = function _init_resize() {\n    var DnD = gantt.$services.getService(\"dnd\");\n    var config = grid.$getConfig();\n    var dnd = new DnD(grid.$grid_data, {\n      updates_per_second: 60\n    });\n    if (gantt.defined(config.dnd_sensitivity)) dnd.config.sensitivity = config.dnd_sensitivity;\n    dnd.attachEvent(\"onBeforeDragStart\", function (obj, e) {\n      return _task_grid_row_resize.row_before_start(dnd, obj, e);\n    });\n    dnd.attachEvent(\"onAfterDragStart\", function (obj, e) {\n      return _task_grid_row_resize.row_after_start(dnd, obj, e);\n    });\n    dnd.attachEvent(\"onDragMove\", function (obj, e) {\n      return _task_grid_row_resize.row_drag_move(dnd, obj, e);\n    });\n    dnd.attachEvent(\"onDragEnd\", function (obj, e) {\n      return _task_grid_row_resize.row_drag_end(dnd, obj, e);\n    });\n  };\n\n  return {\n    init: _init_resize\n  };\n}\n\nmodule.exports = createRowResizer;","function createHelper(view) {\n  var cachedRowHeight = -1;\n  var canUseSimpleCalc = -1;\n  return {\n    resetCache: function resetCache() {\n      cachedRowHeight = -1;\n      canUseSimpleCalc = -1;\n    },\n    _getRowHeight: function _getRowHeight() {\n      if (cachedRowHeight === -1) {\n        cachedRowHeight = view.$getConfig().row_height;\n      }\n\n      return cachedRowHeight;\n    },\n    _refreshState: function _refreshState() {\n      this.resetCache();\n      canUseSimpleCalc = true;\n      var store = view.$config.rowStore;\n\n      if (!store) {\n        return;\n      }\n\n      var globalRowHeight = this._getRowHeight();\n\n      for (var i = 0; i < store.fullOrder.length; i++) {\n        var item = store.getItem(store.fullOrder[i]); // GS-1491: ignore the task when it is filtered:\n\n        if (!item) {\n          continue;\n        }\n\n        if (item.row_height && item.row_height !== globalRowHeight) {\n          canUseSimpleCalc = false;\n          break;\n        }\n      }\n    },\n    canUseSimpleCalculation: function canUseSimpleCalculation() {\n      if (canUseSimpleCalc === -1) {\n        this._refreshState();\n      }\n\n      return canUseSimpleCalc;\n    },\n\n    /**\r\n     * Get top coordinate by row index (order)\r\n     * @param {number} index\r\n     */\n    getRowTop: function getRowTop(index) {\n      var store = view.$config.rowStore;\n\n      if (!store) {\n        return 0;\n      }\n\n      return index * this._getRowHeight();\n    },\n\n    /**\r\n     * Get height of the item by item id\r\n     * @param {*} itemId\r\n     */\n    getItemHeight: function getItemHeight(itemId) {\n      return this._getRowHeight();\n    },\n\n    /**\r\n     * Get total height of items\r\n     */\n    getTotalHeight: function getTotalHeight() {\n      if (view.$config.rowStore) {\n        var store = view.$config.rowStore;\n        return store.countVisible() * this._getRowHeight();\n      } else {\n        return 0;\n      }\n    },\n\n    /**\r\n     * Get item by top position\r\n     * @param {*} top\r\n     */\n    getItemIndexByTopPosition: function getItemIndexByTopPosition(top) {\n      if (view.$config.rowStore) {\n        return Math.floor(top / this._getRowHeight());\n      } else {\n        return 0;\n      }\n    }\n  };\n}\n\nmodule.exports = createHelper;","function createResizer(gantt, grid) {\n  return {\n    init: function init() {},\n    doOnRender: function doOnRender() {}\n  };\n}\n\nmodule.exports = createResizer;","var Grid = require(\"./ui/grid/grid\");\n\nmodule.exports = function (gantt) {\n  require(\"./grid_column_api.gpl\")(gantt);\n\n  Grid.prototype.getGridColumns = function () {\n    var config = this.$getConfig();\n    var columns = config.columns,\n        visibleColumns = [];\n\n    for (var i = 0; i < columns.length; i++) {\n      if (!columns[i].hide) visibleColumns.push(columns[i]);\n    }\n\n    return visibleColumns;\n  };\n};","module.exports = function (gantt) {\n  var TreeDataStore = require(\"./datastore/treedatastore\");\n\n  var loadedBranches = {};\n  gantt.attachEvent(\"onClearAll\", function () {\n    loadedBranches = {};\n  });\n  var oldHasChildren = TreeDataStore.prototype.hasChild;\n\n  gantt.$data.tasksStore.hasChild = function (id) {\n    if (!gantt.config.branch_loading) {\n      return oldHasChildren.call(this, id);\n    } else {\n      if (oldHasChildren.call(this, id)) return true;\n\n      if (this.exists(id)) {\n        return this.getItem(id)[gantt.config.branch_loading_property];\n      }\n    }\n\n    return false;\n  };\n\n  function needLoading(id) {\n    if (gantt.config.branch_loading && gantt._load_url) {\n      var alreadyLoaded = !!loadedBranches[id]; // call ajax only if branch has children\n\n      if (!alreadyLoaded && !gantt.getChildren(id).length && gantt.hasChild(id)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  gantt.attachEvent(\"onTaskOpened\", function (id) {\n    if (gantt.config.branch_loading && gantt._load_url) {\n      // call ajax only if branch has children\n      if (needLoading(id)) {\n        var url = gantt._load_url;\n        url = url.replace(/(\\?|&)?parent_id=.+&?/, \"\");\n        var param = url.indexOf(\"?\") >= 0 ? \"&\" : \"?\";\n        var y = gantt.getScrollState().y || 0;\n        var requestData = {\n          taskId: id,\n          url: url + param + \"parent_id=\" + encodeURIComponent(id)\n        };\n\n        if (gantt.callEvent(\"onBeforeBranchLoading\", [requestData]) === false) {\n          return;\n        }\n\n        gantt.load(requestData.url, this._load_type, function () {\n          if (y) {\n            gantt.scrollTo(null, y);\n          }\n\n          gantt.callEvent(\"onAfterBranchLoading\", [requestData]);\n        });\n        loadedBranches[id] = true;\n      }\n    }\n  });\n};","export default function(gantt: any){\r\n\r\n\tgantt.ext = gantt.ext || {};\r\n\tgantt.config.show_empty_state = false;\r\n\r\n\tgantt.ext.emptyStateElement = gantt.ext.emptyStateElement || {\r\n\t\tisEnabled() {\r\n\t\t\treturn gantt.config.show_empty_state === true;\r\n\t\t},\r\n\t\tisGanttEmpty(){\r\n\t\t\treturn !gantt.getTaskByTime().length;\r\n\t\t},\r\n\t\trenderContent(container){\r\n\t\t\tconst placeholderTextElement = `<div class='gantt_empty_state_text'>\r\n    <div class='gantt_empty_state_text_link' data-empty-state-create-task>${gantt.locale.labels.empty_state_text_link}</div>\r\n    <div class='gantt_empty_state_text_description'>${gantt.locale.labels.empty_state_text_description}</div>\r\n    </div>`;\r\n\t\t\tconst placeholderImageElement = \"<div class='gantt_empty_state_image'></div>\";\r\n\r\n\t\t\tconst placeholderContainer = `<div class='gantt_empty_state'>${placeholderImageElement}${placeholderTextElement}</div>`;\r\n\t\t\tcontainer.innerHTML = placeholderContainer;\r\n\t\t},\r\n\r\n\t\tclickEvents: [],\r\n\t\tattachAddTaskEvent(){\r\n\t\t\tconst id = gantt.attachEvent(\"onEmptyClick\", function(e){\r\n\t\t\t\tconst domHelpers = gantt.utils.dom;\r\n\t\t\t\tconst gridPlaceholder = domHelpers.closest(e.target, \"[data-empty-state-create-task]\");\r\n\t\t\t\tif (gridPlaceholder){\r\n\t\t\t\t\tgantt.createTask({\r\n\t\t\t\t\t\tid: gantt.uid(),\r\n\t\t\t\t\t\ttext: \"New Task\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.clickEvents.push(id);\r\n\t\t},\r\n\t\tdetachAddTaskEvents(){\r\n\t\t\tthis.clickEvents.forEach(function(event){\r\n\t\t\t\tgantt.detachEvent(event);\r\n\t\t\t});\r\n\t\t\tthis.clickEvents = [];\r\n\t\t},\r\n\r\n\t\tgetContainer(){\r\n\t\t\tif (gantt.$container) {\r\n\t\t\t\tconst domHelpers = gantt.utils.dom;\r\n\t\t\t\tif (gantt.$container.contains(gantt.$grid_data)) {\r\n\t\t\t\t\treturn domHelpers.closest(gantt.$grid_data, \".gantt_layout_content\");\r\n\t\t\t\t}\r\n\t\t\t\tif (gantt.$container.contains(gantt.$task_data)){\r\n\t\t\t\t\treturn domHelpers.closest(gantt.$task_data, \".gantt_layout_content\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\r\n\t\tgetNode(){\r\n\t\t\tconst container = this.getContainer();\r\n\t\t\tif (!container){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst emptyStateElementNode = container.querySelector(\".gantt_empty_state_wrapper\");\r\n\t\t\treturn emptyStateElementNode;\r\n\t\t},\r\n\r\n\t\tshow(){\r\n\t\t\tconst container = this.getContainer();\r\n\t\t\tif (!container && this.isGanttEmpty()){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst wrapper = document.createElement(\"div\");\r\n\t\t\twrapper.className = \"gantt_empty_state_wrapper\";\r\n\t\t\twrapper.style.marginTop = (gantt.config.scale_height - container.offsetHeight) + \"px\";\r\n\t\t\tconst oldNodes = gantt.$container.querySelectorAll(\".gantt_empty_state_wrapper\");\r\n\t\t\t// for IE11\r\n\t\t\tArray.prototype.forEach.call(oldNodes, function(node){\r\n\t\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\t});\r\n\r\n\t\t\tthis.detachAddTaskEvents();\r\n\t\t\tthis.attachAddTaskEvent();\r\n\r\n\t\t\tcontainer.appendChild(wrapper);\r\n\t\t\tthis.renderContent(wrapper);\r\n\t\t},\r\n\t\thide(){\r\n\t\t\tconst emptyStateElementNode = this.getNode();\r\n\t\t\tif (emptyStateElementNode){\r\n\t\t\t\temptyStateElementNode.parentNode.removeChild(emptyStateElementNode);\r\n\t\t\t} else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tinit(){ }\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onDataRender\", function() {\r\n\t\tconst emptyStateElement = gantt.ext.emptyStateElement;\r\n\t\tif (emptyStateElement.isEnabled() && emptyStateElement.isGanttEmpty()) {\r\n\t\t\temptyStateElement.show();\r\n\t\t} else {\r\n\t\t\temptyStateElement.hide();\r\n\t\t}\r\n\t});\r\n\r\n\r\n\r\n\r\n}\r\n","export default class LinkFormatterSimple implements ILinkFormatter {\r\n\tstatic create = (settings: ILinkFormatterConfig = null, gantt: any): LinkFormatterSimple => {\r\n\t\treturn new LinkFormatterSimple(gantt);\r\n\t}\r\n\tprotected _linkReg: RegExp;\r\n\tprotected _gantt: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._linkReg = /^[0-9\\.]+/;\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\tformat = (link: ILink) : string => {\r\n\t\tconst wbs = this._getWBSCode(link.source);\r\n\t\treturn wbs;\r\n\t}\r\n\r\n\tcanParse = (value: string) : boolean => {\r\n\t\treturn this._linkReg.test(value);\r\n\t}\r\n\tparse = (value: string) : ILink => {\r\n\t\tif(!this.canParse(value)){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst linkPart = this._linkReg.exec(value)[0].trim();\r\n\r\n\t\tconst source = this._findSource(linkPart) || null;\r\n\r\n\t\treturn {\r\n\t\t\tid: undefined,\r\n\t\t\tsource,\r\n\t\t\ttarget: null,\r\n\t\t\ttype: this._gantt.config.links.finish_to_start,\r\n\t\t\tlag: 0\r\n\t\t};\r\n\t}\r\n\r\n\tprotected _getWBSCode = (source: number | string) => {\r\n\t\tconst pred = this._gantt.getTask(source);\r\n\t\treturn this._gantt.getWBSCode(pred);\r\n\t}\r\n\r\n\tprotected _findSource = (value: string) => {\r\n\t\tconst reqTemplate = new RegExp(\"^[0-9\\.]+\", \"i\");\r\n\t\tif(reqTemplate.exec(value)){\r\n\t\t\tconst wbs = reqTemplate.exec(value)[0];\r\n\t\t\tconst task = this._gantt.getTaskByWBSCode(wbs);\r\n\t\t\tif(task){\r\n\t\t\t\treturn task.id;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}","var DurationFormatter = require(\"../common/duration_formatter\")[\"default\"];\n\nvar LinkFormatter = require(\"../common/link_formatter\")[\"default\"];\n\nmodule.exports = function (gantt) {\n  gantt.ext.formatters = {\n    durationFormatter: function durationFormatter(settings) {\n      if (!settings) {\n        settings = {};\n      }\n\n      if (!settings.store) {\n        settings.store = gantt.config.duration_unit;\n      }\n\n      if (!settings.enter) {\n        settings.enter = gantt.config.duration_unit;\n      }\n\n      return DurationFormatter.create(settings, gantt);\n    },\n    linkFormatter: function linkFormatter(settings) {\n      return LinkFormatter.create(settings, gantt);\n    }\n  };\n};","module.exports = function (gantt) {\n  function isEnabled() {\n    return gantt.config.auto_types && // if enabled\n    gantt.getTaskType(gantt.config.types.project) == gantt.config.types.project; // and supported\n  }\n\n  function callIfEnabled(callback) {\n    return function () {\n      if (!isEnabled()) {\n        return true;\n      }\n\n      return callback.apply(this, arguments);\n    };\n  }\n\n  function checkTaskType(id, changedTypes) {\n    var task = gantt.getTask(id);\n    var targetType = getTaskTypeToUpdate(task);\n\n    if (targetType !== false && gantt.getTaskType(task) !== targetType) {\n      changedTypes.$needsUpdate = true;\n      changedTypes[task.id] = {\n        task: task,\n        type: targetType\n      };\n    }\n  }\n\n  function getUpdatedTypes(id, changedTypes) {\n    changedTypes = changedTypes || {};\n    checkTaskType(id, changedTypes);\n    gantt.eachParent(function (parent) {\n      checkTaskType(parent.id, changedTypes);\n    }, id);\n    return changedTypes;\n  }\n\n  function applyChanges(changedTypes) {\n    for (var i in changedTypes) {\n      if (changedTypes[i] && changedTypes[i].task) {\n        var task = changedTypes[i].task;\n        task.type = changedTypes[i].type;\n        gantt.updateTask(task.id);\n      }\n    }\n  }\n\n  function updateParentTypes(startId) {\n    if (gantt.getState().group_mode) {\n      return;\n    }\n\n    var changedTypes = getUpdatedTypes(startId);\n\n    if (changedTypes.$needsUpdate) {\n      gantt.batchUpdate(function () {\n        applyChanges(changedTypes);\n      });\n    }\n  }\n\n  var delTaskParent;\n\n  function updateTaskType(task, targetType) {\n    if (!gantt.getState().group_mode) {\n      task.type = targetType;\n      gantt.updateTask(task.id);\n    }\n  }\n\n  function getTaskTypeToUpdate(task) {\n    var allTypes = gantt.config.types;\n    var hasChildren = gantt.hasChild(task.id);\n    var taskType = gantt.getTaskType(task.type);\n\n    if (hasChildren && taskType === allTypes.task) {\n      return allTypes.project;\n    }\n\n    if (!hasChildren && taskType === allTypes.project) {\n      return allTypes.task;\n    }\n\n    return false;\n  }\n\n  var isParsingDone = true;\n  gantt.attachEvent(\"onParse\", callIfEnabled(function () {\n    isParsingDone = false;\n\n    if (gantt.getState().group_mode) {\n      return;\n    }\n\n    gantt.batchUpdate(function () {\n      gantt.eachTask(function (task) {\n        var targetType = getTaskTypeToUpdate(task);\n\n        if (targetType !== false) {\n          updateTaskType(task, targetType);\n        }\n      });\n    });\n    isParsingDone = true;\n  }));\n  gantt.attachEvent(\"onAfterTaskAdd\", callIfEnabled(function (id) {\n    if (isParsingDone) {\n      updateParentTypes(id);\n    }\n  }));\n  gantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(function (id) {\n    if (isParsingDone) {\n      updateParentTypes(id);\n    }\n  }));\n\n  function updateAfterRemoveChild(id) {\n    if (id != gantt.config.root_id && gantt.isTaskExists(id)) {\n      updateParentTypes(id);\n    }\n  }\n\n  gantt.attachEvent(\"onBeforeTaskDelete\", callIfEnabled(function (id, task) {\n    delTaskParent = gantt.getParent(id);\n    return true;\n  }));\n  gantt.attachEvent(\"onAfterTaskDelete\", callIfEnabled(function (id, task) {\n    updateAfterRemoveChild(delTaskParent);\n  }));\n  var originalRowDndParent;\n  gantt.attachEvent(\"onRowDragStart\", callIfEnabled(function (id, target, e) {\n    originalRowDndParent = gantt.getParent(id);\n    return true;\n  }));\n  gantt.attachEvent(\"onRowDragEnd\", callIfEnabled(function (id, target) {\n    updateAfterRemoveChild(originalRowDndParent);\n    updateParentTypes(id);\n  }));\n  var originalMoveTaskParent;\n  gantt.attachEvent(\"onBeforeTaskMove\", callIfEnabled(function (sid, parent, tindex) {\n    originalMoveTaskParent = gantt.getParent(sid);\n    return true;\n  }));\n  gantt.attachEvent(\"onAfterTaskMove\", callIfEnabled(function (id, parent, tindex) {\n    if (document.querySelector(\".gantt_drag_marker\")) {\n      // vertical dnd in progress\n      return;\n    }\n\n    updateAfterRemoveChild(originalMoveTaskParent);\n    updateParentTypes(id);\n  }));\n};","module.exports = function addPlaceholder(gantt) {\n  function isEnabled() {\n    return gantt.config.placeholder_task;\n  }\n\n  function callIfEnabled(callback) {\n    return function () {\n      if (!isEnabled()) {\n        return true;\n      }\n\n      return callback.apply(this, arguments);\n    };\n  }\n\n  function silenceDataProcessor(dataProcessor) {\n    if (dataProcessor && !dataProcessor._silencedPlaceholder) {\n      dataProcessor._silencedPlaceholder = true;\n      dataProcessor.attachEvent(\"onBeforeUpdate\", callIfEnabled(function (id, state, data) {\n        if (data.type == gantt.config.types.placeholder) {\n          dataProcessor.setUpdated(id, false);\n          return false;\n        }\n\n        return true;\n      }));\n    }\n  }\n\n  function insertPlaceholder() {\n    var placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\n\n    if (!placeholders.length || !gantt.isTaskExists(placeholders[0].id)) {\n      var placeholder = {\n        unscheduled: true,\n        type: gantt.config.types.placeholder,\n        duration: 0,\n        text: gantt.locale.labels.new_task\n      };\n\n      if (gantt.callEvent(\"onTaskCreated\", [placeholder]) === false) {\n        return;\n      }\n\n      gantt.addTask(placeholder);\n    }\n  }\n\n  function afterEdit(id) {\n    var item = gantt.getTask(id);\n\n    if (item.type == gantt.config.types.placeholder) {\n      if (item.start_date && item.end_date && item.unscheduled) {\n        item.unscheduled = false;\n      }\n\n      gantt.batchUpdate(function () {\n        var newTask = gantt.copy(item);\n        gantt.silent(function () {\n          gantt.deleteTask(item.id);\n        });\n        delete newTask[\"!nativeeditor_status\"];\n        newTask.type = gantt.config.types.task;\n        newTask.id = gantt.uid();\n        gantt.addTask(newTask); //insertPlaceholder();\n      });\n    }\n  }\n\n  gantt.config.types.placeholder = \"placeholder\";\n  gantt.attachEvent(\"onDataProcessorReady\", callIfEnabled(silenceDataProcessor));\n  var ready = false;\n  gantt.attachEvent(\"onGanttReady\", function () {\n    if (ready) {\n      return;\n    }\n\n    ready = true;\n    gantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(afterEdit));\n    gantt.attachEvent(\"onAfterTaskAdd\", callIfEnabled(function (id, task) {\n      if (task.type != gantt.config.types.placeholder) {\n        var placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\n        placeholders.forEach(function (p) {\n          gantt.silent(function () {\n            if (gantt.isTaskExists(p.id)) gantt.deleteTask(p.id);\n          });\n        });\n        insertPlaceholder();\n      }\n    }));\n    gantt.attachEvent(\"onParse\", callIfEnabled(insertPlaceholder));\n  });\n\n  function isPlaceholderTask(taskId) {\n    if (gantt.config.types.placeholder && gantt.isTaskExists(taskId)) {\n      var task = gantt.getTask(taskId);\n\n      if (task.type == gantt.config.types.placeholder) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function isPlaceholderLink(link) {\n    if (isPlaceholderTask(link.source) || isPlaceholderTask(link.target)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  gantt.attachEvent(\"onLinkValidation\", function (link) {\n    if (isPlaceholderLink(link)) {\n      return false;\n    }\n\n    return true;\n  });\n  gantt.attachEvent(\"onBeforeLinkAdd\", function (id, link) {\n    if (isPlaceholderLink(link)) {\n      return false;\n    }\n\n    return true;\n  });\n  gantt.attachEvent(\"onBeforeUndoStack\", function (action) {\n    for (var i = 0; i < action.commands.length; i++) {\n      var command = action.commands[i];\n\n      if (command.entity === \"task\" && command.value.type === gantt.config.types.placeholder) {\n        action.commands.splice(i, 1);\n        i--;\n      }\n    }\n\n    return true;\n  });\n};","module.exports = function (gantt) {\n  var resourceAssignmentsProperty = \"$resourceAssignments\";\n  gantt.config.resource_assignment_store = \"resourceAssignments\";\n  gantt.config.process_resource_assignments = true;\n  var resourceAssignmentFormats = {\n    auto: \"auto\",\n    singleValue: \"singleValue\",\n    valueArray: \"valueArray\",\n    resourceValueArray: \"resourceValueArray\",\n    assignmentsArray: \"assignmentsArray\"\n  };\n  var resourceAssignmentFormat = resourceAssignmentFormats.auto; //\"primitiveSingle\";//\"primitive\";//\"object\"|\"assignment\"\n\n  var assignmentModes = {\n    fixedDates: \"fixedDates\",\n    fixedDuration: \"fixedDuration\",\n    \"default\": \"default\"\n  };\n\n  function initAssignmentFields(item, task) {\n    if (item.start_date) {\n      item.start_date = gantt.date.parseDate(item.start_date, \"parse_date\");\n    } else {\n      item.start_date = null;\n    }\n\n    if (item.end_date) {\n      item.end_date = gantt.date.parseDate(item.end_date, \"parse_date\");\n    } else {\n      item.end_date = null;\n    }\n\n    var delay = Number(item.delay);\n    var initDelay = false;\n\n    if (!isNaN(delay)) {\n      item.delay = delay;\n    } else {\n      item.delay = 0;\n      initDelay = true;\n    }\n\n    if (!gantt.defined(item.value)) {\n      item.value = null;\n    }\n\n    if (!item.task_id || !item.resource_id) {\n      return false;\n    }\n\n    item.mode = item.mode || assignmentModes[\"default\"];\n\n    if (item.mode === assignmentModes.fixedDuration) {\n      if (isNaN(Number(item.duration))) {\n        task = task || gantt.getTask(item.task_id);\n        item.duration = gantt.calculateDuration({\n          start_date: item.start_date,\n          end_date: item.end_date,\n          id: task\n        });\n      }\n\n      if (initDelay) {\n        task = task || gantt.getTask(item.task_id);\n        item.delay = gantt.calculateDuration({\n          start_date: task.start_date,\n          end_date: item.start_date,\n          id: task\n        });\n      }\n    }\n\n    if (item.mode !== assignmentModes.fixedDates && (task || gantt.isTaskExists(item.task_id))) {\n      task = task || gantt.getTask(item.task_id);\n\n      var timing = _assignmentTimeFromTask(item, task);\n\n      item.start_date = timing.start_date;\n      item.end_date = timing.end_date;\n      item.duration = timing.duration;\n    }\n  } // gantt init\n\n\n  var resourceAssignmentsStore = gantt.createDatastore({\n    name: gantt.config.resource_assignment_store,\n    initItem: function initItem(item) {\n      if (!item.id) {\n        item.id = gantt.uid();\n      }\n\n      initAssignmentFields(item);\n      return item;\n    }\n  });\n  gantt.$data.assignmentsStore = resourceAssignmentsStore;\n\n  function _assignmentTimeFromTask(assignment, task) {\n    if (assignment.mode === assignmentModes.fixedDates) {\n      return {\n        start_date: assignment.start_date,\n        end_date: assignment.end_date,\n        duration: assignment.duration\n      };\n    } else {\n      var start = assignment.delay ? gantt.calculateEndDate({\n        start_date: task.start_date,\n        duration: assignment.delay,\n        task: task\n      }) : new Date(task.start_date);\n      var end;\n      var duration;\n\n      if (assignment.mode === assignmentModes.fixedDuration) {\n        end = gantt.calculateEndDate({\n          start_date: start,\n          duration: assignment.duration,\n          task: task\n        });\n        duration = assignment.duration;\n      } else {\n        end = new Date(task.end_date);\n        duration = task.duration - assignment.delay;\n      }\n    }\n\n    return {\n      start_date: start,\n      end_date: end,\n      duration: duration\n    };\n  } // data loading\n\n\n  function _makeAssignmentsFromTask(task) {\n    var property = gantt.config.resource_property;\n    var assignments = task[property];\n    var resourceAssignments = [];\n    var detectFormat = resourceAssignmentFormat === resourceAssignmentFormats.auto;\n\n    if (gantt.defined(assignments) && assignments) {\n      if (!Array.isArray(assignments)) {\n        assignments = [assignments];\n\n        if (detectFormat) {\n          resourceAssignmentFormat = resourceAssignmentFormats.singleValue;\n          detectFormat = false;\n        }\n      }\n\n      var usedIds = {};\n      assignments.forEach(function (res) {\n        if (!res.resource_id) {\n          // when resource is a string/number\n          res = {\n            resource_id: res\n          };\n\n          if (detectFormat) {\n            resourceAssignmentFormat = resourceAssignmentFormats.valueArray;\n            detectFormat = false;\n          } //\tisSimpleArray = true;\n\n        }\n\n        if (detectFormat) {\n          if (res.id && res.resource_id) {\n            resourceAssignmentFormat = resourceAssignmentFormats.assignmentsArray;\n            detectFormat = false;\n          } else {\n            resourceAssignmentFormat = resourceAssignmentFormats.resourceValueArray;\n            detectFormat = false;\n          }\n        }\n\n        var defaultMode = assignmentModes[\"default\"];\n\n        if (!res.mode) {\n          if (res.start_date && res.end_date || res.start_date && res.duration) {\n            defaultMode = assignmentModes.fixedDuration;\n          }\n        }\n\n        var id;\n\n        if (!res.id && res.$id && !usedIds[res.$id]) {\n          id = res.$id;\n        } else if (res.id && !usedIds[res.id]) {\n          id = res.id;\n        } else {\n          id = gantt.uid();\n        }\n\n        usedIds[id] = true;\n        var assignment = {\n          id: id,\n          start_date: res.start_date,\n          duration: res.duration,\n          end_date: res.end_date,\n          delay: res.delay,\n          task_id: task.id,\n          resource_id: res.resource_id,\n          value: res.value,\n          mode: res.mode || defaultMode\n        };\n\n        if (!(assignment.start_date && assignment.start_date.getMonth && assignment.end_date && assignment.end_date.getMonth && typeof assignment.duration === \"number\")) {\n          initAssignmentFields(assignment, task);\n        }\n\n        resourceAssignments.push(assignment);\n      });\n    }\n\n    return resourceAssignments;\n  }\n\n  function _updateTaskBack(taskId) {\n    // GS-1493. In some cases, the resource assignment store has the tasks that no longer exist\n    if (!gantt.isTaskExists(taskId)) {\n      return;\n    }\n\n    var task = gantt.getTask(taskId);\n    var assignments = gantt.getTaskAssignments(task.id);\n\n    _assignAssignments(task, assignments);\n  }\n\n  function _assignAssignments(task, assignments) {\n    assignments.sort(function (a, b) {\n      if (a.start_date && b.start_date && a.start_date.valueOf() != b.start_date.valueOf()) {\n        return a.start_date - b.start_date;\n      } else {\n        return 0;\n      }\n    });\n\n    if (resourceAssignmentFormat == resourceAssignmentFormats.assignmentsArray) {\n      task[gantt.config.resource_property] = assignments;\n    } else if (resourceAssignmentFormat == resourceAssignmentFormats.resourceValueArray) {\n      task[gantt.config.resource_property] = assignments.map(function (a) {\n        return {\n          $id: a.id,\n          start_date: a.start_date,\n          duration: a.duration,\n          end_date: a.end_date,\n          delay: a.delay,\n          resource_id: a.resource_id,\n          value: a.value,\n          mode: a.mode\n        };\n      });\n    }\n\n    task[resourceAssignmentsProperty] = assignments;\n  }\n\n  function _loadAssignmentsFromTask(task) {\n    var assignments = _makeAssignmentsFromTask(task);\n\n    var taskAssignments = [];\n    assignments.forEach(function (a) {\n      a.id = a.id || gantt.uid(); //var newId = resourceAssignmentsStore.addItem(a);\n\n      taskAssignments.push(a);\n    });\n    return assignments;\n  }\n\n  function diffAssignments(taskValues, assignmentsStoreValues) {\n    var result = {\n      inBoth: [],\n      inTaskNotInStore: [],\n      inStoreNotInTask: []\n    };\n\n    if (resourceAssignmentFormat == resourceAssignmentFormats.singleValue) {\n      var taskOwner = taskValues[0];\n      var ownerId = taskOwner ? taskOwner.resource_id : null;\n      var foundOwnerAssignment = false;\n      assignmentsStoreValues.forEach(function (a) {\n        if (a.resource_id != ownerId) {\n          result.inStoreNotInTask.push(a);\n        } else if (a.resource_id == ownerId) {\n          result.inBoth.push({\n            store: a,\n            task: taskOwner\n          });\n          foundOwnerAssignment = true;\n        }\n      });\n\n      if (!foundOwnerAssignment && taskOwner) {\n        result.inTaskNotInStore.push(taskOwner);\n      }\n    } else if (resourceAssignmentFormat == resourceAssignmentFormats.valueArray) {\n      var taskSearch = {};\n      var storeSearch = {};\n      var processedIds = {};\n      taskValues.forEach(function (a) {\n        taskSearch[a.resource_id] = a;\n      });\n      assignmentsStoreValues.forEach(function (a) {\n        storeSearch[a.resource_id] = a;\n      });\n      taskValues.concat(assignmentsStoreValues).forEach(function (a) {\n        if (processedIds[a.resource_id]) {\n          return;\n        }\n\n        processedIds[a.resource_id] = true;\n        var inTask = taskSearch[a.resource_id];\n        var inStore = storeSearch[a.resource_id];\n\n        if (inTask && inStore) {\n          result.inBoth.push({\n            store: inStore,\n            task: inTask\n          });\n        } else if (inTask && !inStore) {\n          result.inTaskNotInStore.push(inTask);\n        } else if (!inTask && inStore) {\n          result.inStoreNotInTask.push(inStore);\n        }\n      });\n    } else if (resourceAssignmentFormat == resourceAssignmentFormats.assignmentsArray || resourceAssignmentFormat == resourceAssignmentFormats.resourceValueArray) {\n      var taskSearch = {};\n      var storeSearch = {};\n      var processedIds = {};\n      taskValues.forEach(function (a) {\n        taskSearch[a.id || a.$id] = a;\n      });\n      assignmentsStoreValues.forEach(function (a) {\n        storeSearch[a.id] = a;\n      });\n      taskValues.concat(assignmentsStoreValues).forEach(function (a) {\n        var id = a.id || a.$id;\n\n        if (processedIds[id]) {\n          return;\n        }\n\n        processedIds[id] = true;\n        var inTask = taskSearch[id];\n        var inStore = storeSearch[id];\n\n        if (inTask && inStore) {\n          result.inBoth.push({\n            store: inStore,\n            task: inTask\n          });\n        } else if (inTask && !inStore) {\n          result.inTaskNotInStore.push(inTask);\n        } else if (!inTask && inStore) {\n          result.inStoreNotInTask.push(inStore);\n        }\n      });\n    }\n\n    return result;\n  }\n\n  function assignmentHasChanged(source, target) {\n    var ignoreFields = {\n      id: true\n    };\n\n    for (var i in source) {\n      if (!ignoreFields[i]) {\n        if (String(source[i]) !== String(target[i])) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  function updateAssignment(source, target) {\n    var ignoreFields = {\n      id: true\n    };\n\n    for (var i in source) {\n      if (!ignoreFields[i]) {\n        target[i] = source[i];\n      }\n    }\n  }\n\n  function _syncAssignments(task, storeAssignments) {\n    var tasksAssignments = _makeAssignmentsFromTask(task);\n\n    var diff = diffAssignments(tasksAssignments, storeAssignments);\n    diff.inStoreNotInTask.forEach(function (a) {\n      resourceAssignmentsStore.removeItem(a.id);\n    });\n    diff.inTaskNotInStore.forEach(function (a) {\n      resourceAssignmentsStore.addItem(a);\n    });\n    diff.inBoth.forEach(function (a) {\n      if (assignmentHasChanged(a.task, a.store)) {\n        updateAssignment(a.task, a.store);\n        resourceAssignmentsStore.updateItem(a.store.id);\n      } else {\n        if (a.task.start_date && a.task.end_date && a.task.mode !== assignmentModes.fixedDates) {\n          var timing = _assignmentTimeFromTask(a.store, task);\n\n          if (a.store.start_date.valueOf() != timing.start_date.valueOf() || a.store.end_date.valueOf() != timing.end_date.valueOf()) {\n            a.store.start_date = timing.start_date;\n            a.store.end_date = timing.end_date;\n            a.store.duration = timing.duration;\n            resourceAssignmentsStore.updateItem(a.store.id);\n          }\n        }\n      }\n    });\n\n    _updateTaskBack(task.id);\n  }\n\n  function _syncOnTaskUpdate(task) {\n    var storeAssignments = task[resourceAssignmentsProperty] || resourceAssignmentsStore.find(function (a) {\n      return a.task_id == task.id;\n    });\n\n    _syncAssignments(task, storeAssignments);\n  }\n\n  function _syncOnTaskDelete(ids) {\n    var idsSearch = {};\n    ids.forEach(function (id) {\n      idsSearch[id] = true;\n    });\n    var taskResources = resourceAssignmentsStore.find(function (a) {\n      return idsSearch[a.task_id];\n    });\n    taskResources.forEach(function (a) {\n      resourceAssignmentsStore.removeItem(a.id);\n    });\n  }\n\n  gantt.attachEvent(\"onGanttReady\", function () {\n    if (gantt.config.process_resource_assignments) {\n      gantt.attachEvent(\"onParse\", function () {\n        gantt.silent(function () {\n          resourceAssignmentsStore.clearAll();\n          var totalAssignments = [];\n          gantt.eachTask(function (task) {\n            if (task.type === gantt.config.types.project) {\n              return;\n            }\n\n            var assignments = _loadAssignmentsFromTask(task);\n\n            _assignAssignments(task, assignments);\n\n            assignments.forEach(function (a) {\n              totalAssignments.push(a);\n            });\n          });\n          resourceAssignmentsStore.parse(totalAssignments);\n        });\n      });\n      var batchUpdate = false;\n      var needUpdate = false;\n      var needUpdateFor = {};\n      var undoBatchCancel = false;\n      gantt.attachEvent(\"onBeforeBatchUpdate\", function () {\n        batchUpdate = true;\n      });\n      gantt.attachEvent(\"onAfterBatchUpdate\", function () {\n        if (needUpdate) {\n          var assignmentsHash = {};\n\n          for (var i in needUpdateFor) {\n            assignmentsHash[i] = gantt.getTaskAssignments(needUpdateFor[i].id);\n          }\n\n          for (var i in needUpdateFor) {\n            _syncAssignments(needUpdateFor[i], assignmentsHash[i]);\n          }\n        }\n\n        needUpdate = false;\n        batchUpdate = false;\n        needUpdateFor = {};\n      });\n      gantt.attachEvent(\"onTaskCreated\", function (item) {\n        var assignments = _loadAssignmentsFromTask(item);\n\n        resourceAssignmentsStore.parse(assignments);\n\n        _assignAssignments(item, assignments);\n\n        return true;\n      });\n      gantt.attachEvent(\"onAfterTaskUpdate\", function (id, item) {\n        if (batchUpdate) {\n          needUpdate = true;\n          needUpdateFor[id] = item;\n        } else {\n          _syncOnTaskUpdate(item);\n        }\n      });\n      gantt.attachEvent(\"onAfterTaskAdd\", function (id, item) {\n        if (batchUpdate) {\n          needUpdate = true;\n          needUpdateFor[id] = item;\n        } else {\n          _syncOnTaskUpdate(item);\n        }\n      });\n      /*\tgantt.attachEvent(\"onRowDragMove\", function (id) {\r\n      \t\t_syncOnTaskUpdate(gantt.getTask(id));\r\n      \t});*/\n\n      gantt.attachEvent(\"onRowDragEnd\", function (id) {\n        _syncOnTaskUpdate(gantt.getTask(id));\n      });\n      gantt.$data.tasksStore.attachEvent(\"onAfterDeleteConfirmed\", function (id, item) {\n        var deleteIds = [id];\n        gantt.eachTask(function (task) {\n          deleteIds.push(task.id);\n        }, id);\n\n        _syncOnTaskDelete(deleteIds);\n      });\n      gantt.$data.tasksStore.attachEvent(\"onClearAll\", function () {\n        resourceAssignmentsCache = null;\n        resourceTaskAssignmentsCache = null;\n        taskAssignmentsCache = null;\n        resourceAssignmentsStore.clearAll();\n        return true;\n      });\n      gantt.attachEvent(\"onTaskIdChange\", function (id, new_id) {\n        var taskResources = resourceAssignmentsStore.find(function (a) {\n          return a.task_id == id;\n        });\n        taskResources.forEach(function (a) {\n          a.task_id = new_id;\n          resourceAssignmentsStore.updateItem(a.id);\n        });\n\n        _updateTaskBack(new_id); //any custom logic here\n\n      }); // GS-2144. When we Undo something, the cache should be reset\n      // during the `onStoreUpdated` event to properly update the assignments\n\n      gantt.attachEvent(\"onBeforeUndo\", function (action) {\n        undoBatchCancel = true;\n        return true;\n      });\n      gantt.attachEvent(\"onAfterUndo\", function (action) {\n        undoBatchCancel = true;\n      });\n      var resourceAssignmentsCache = null;\n      var resourceTaskAssignmentsCache = null;\n      var taskAssignmentsCache = null;\n      resourceAssignmentsStore.attachEvent(\"onStoreUpdated\", function resetCache() {\n        if (batchUpdate && !undoBatchCancel) {\n          return true;\n        }\n\n        resourceAssignmentsCache = null;\n        resourceTaskAssignmentsCache = null;\n        taskAssignmentsCache = null;\n        return true;\n      });\n\n      gantt.getResourceAssignments = function (resourceId, taskId) {\n        var searchTaskId = gantt.defined(taskId) && taskId !== null;\n\n        if (resourceAssignmentsCache === null) {\n          resourceAssignmentsCache = {};\n          resourceTaskAssignmentsCache = {};\n          resourceAssignmentsStore.eachItem(function (a) {\n            if (!resourceAssignmentsCache[a.resource_id]) {\n              resourceAssignmentsCache[a.resource_id] = [];\n            }\n\n            resourceAssignmentsCache[a.resource_id].push(a);\n            var resourceTaskCacheKey = a.resource_id + \"-\" + a.task_id;\n\n            if (!resourceTaskAssignmentsCache[resourceTaskCacheKey]) {\n              resourceTaskAssignmentsCache[resourceTaskCacheKey] = [];\n            }\n\n            resourceTaskAssignmentsCache[resourceTaskCacheKey].push(a);\n          });\n        }\n\n        if (searchTaskId) {\n          return (resourceTaskAssignmentsCache[resourceId + \"-\" + taskId] || []).slice();\n        } else {\n          return (resourceAssignmentsCache[resourceId] || []).slice();\n        }\n      };\n\n      gantt.getTaskAssignments = function (taskId) {\n        if (taskAssignmentsCache === null) {\n          var result = [];\n          taskAssignmentsCache = {};\n          resourceAssignmentsStore.eachItem(function (a) {\n            if (!taskAssignmentsCache[a.task_id]) {\n              taskAssignmentsCache[a.task_id] = [];\n            }\n\n            taskAssignmentsCache[a.task_id].push(a);\n\n            if (a.task_id == taskId) {\n              result.push(a);\n            }\n          });\n        }\n\n        return (taskAssignmentsCache[taskId] || []).slice();\n      };\n\n      gantt.getTaskResources = function (taskId) {\n        var store = gantt.getDatastore(\"resource\");\n        var assignments = gantt.getTaskAssignments(taskId);\n        var uniqueResources = {};\n        assignments.forEach(function (a) {\n          if (!uniqueResources[a.resource_id]) {\n            uniqueResources[a.resource_id] = a.resource_id;\n          }\n        });\n        var resources = [];\n\n        for (var i in uniqueResources) {\n          var res = store.getItem(uniqueResources[i]);\n\n          if (res) {\n            resources.push(res);\n          }\n        }\n\n        return resources;\n      };\n\n      gantt.updateTaskAssignments = _updateTaskBack;\n    }\n  }, {\n    once: true\n  });\n};","var helpers = require(\"../../utils/helpers\");\n\nfunction createResourceMethods(gantt) {\n  var resourceTaskCache = {};\n  var singleResourceCacheBuilt = false;\n  gantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function () {\n    resourceTaskCache = {};\n    singleResourceCacheBuilt = false;\n  });\n  gantt.attachEvent(\"onBeforeGanttRender\", function () {\n    resourceTaskCache = {};\n  });\n\n  function getTaskBy(propertyName, propertyValue, typeFilter) {\n    if (typeof propertyName == \"function\") {\n      return filterResourceTasks(propertyName);\n    } else {\n      if (helpers.isArray(propertyValue)) {\n        return getResourceTasks(propertyName, propertyValue, typeFilter);\n      } else {\n        return getResourceTasks(propertyName, [propertyValue], typeFilter);\n      }\n    }\n  }\n\n  function filterResourceTasks(filter) {\n    var res = [];\n    gantt.eachTask(function (task) {\n      if (filter(task)) {\n        res.push(task);\n      }\n    });\n    return res;\n  }\n\n  var falsyValuePrefix = String(Math.random());\n\n  function resourceHashFunction(value) {\n    if (value === null) {\n      return falsyValuePrefix + String(value);\n    }\n\n    return String(value);\n  }\n\n  function getCacheKey(resourceIds, property, typeFilter) {\n    if (Array.isArray(resourceIds)) {\n      return resourceIds.map(function (value) {\n        return resourceHashFunction(value);\n      }).join(\"_\") + \"_\".concat(property, \"_\").concat(typeFilter);\n    } else {\n      return resourceHashFunction(resourceIds) + \"_\".concat(property, \"_\").concat(typeFilter);\n    }\n  }\n\n  function getResourceTasks(property, resourceIds, typeFilter) {\n    var res;\n    var cacheKey = getCacheKey(resourceIds, property, JSON.stringify(typeFilter));\n    var matchingResources = {};\n    helpers.forEach(resourceIds, function (resourceId) {\n      matchingResources[resourceHashFunction(resourceId)] = true;\n    });\n\n    if (!resourceTaskCache[cacheKey]) {\n      res = resourceTaskCache[cacheKey] = [];\n      gantt.eachTask(function (task) {\n        if (typeFilter) {\n          if (!typeFilter[gantt.getTaskType(task)]) {\n            return;\n          }\n        } else if (task.type == gantt.config.types.project) {\n          return;\n        }\n\n        if (property in task) {\n          var resourceValue;\n\n          if (!helpers.isArray(task[property])) {\n            resourceValue = [task[property]];\n          } else {\n            resourceValue = task[property];\n          }\n\n          helpers.forEach(resourceValue, function (value) {\n            var resourceValue = value && value.resource_id ? value.resource_id : value;\n\n            if (matchingResources[resourceHashFunction(resourceValue)]) {\n              res.push(task);\n            } else if (!singleResourceCacheBuilt) {\n              var key = getCacheKey(value, property);\n\n              if (!resourceTaskCache[key]) {\n                resourceTaskCache[key] = [];\n              }\n\n              resourceTaskCache[key].push(task);\n            }\n          });\n        }\n      });\n      singleResourceCacheBuilt = true;\n    } else {\n      res = resourceTaskCache[cacheKey];\n    }\n\n    return res;\n  }\n\n  function selectAssignments(resourceId, taskId, result) {\n    var property = gantt.config.resource_property;\n    var owners = [];\n\n    if (gantt.getDatastore(\"task\").exists(taskId)) {\n      var task = gantt.getTask(taskId);\n      owners = task[property] || [];\n    }\n\n    if (!Array.isArray(owners)) {\n      owners = [owners];\n    }\n\n    for (var i = 0; i < owners.length; i++) {\n      if (owners[i].resource_id == resourceId) {\n        result.push({\n          task_id: task.id,\n          resource_id: owners[i].resource_id,\n          value: owners[i].value\n        });\n      }\n    }\n  }\n\n  function getResourceAssignments(resourceId, taskId) {\n    // resource assignment as an independent module:\n    // {taskId:, resourceId, value}\n    // TODO: probably should add a separate datastore for these\n    var assignments = [];\n    var property = gantt.config.resource_property;\n\n    if (taskId !== undefined) {\n      selectAssignments(resourceId, taskId, assignments);\n    } else {\n      var tasks = gantt.getTaskBy(property, resourceId);\n      tasks.forEach(function (task) {\n        selectAssignments(resourceId, task.id, assignments);\n      });\n    }\n\n    return assignments;\n  }\n\n  return {\n    getTaskBy: getTaskBy,\n    getResourceAssignments: getResourceAssignments\n  };\n}\n\nfunction createHelper(gantt) {\n  var resourcePlugin = {\n    renderEditableLabel: function renderEditableLabel(start_date, end_date, resource, tasks, assignments) {\n      var editable = gantt.config.readonly ? \"\" : \"contenteditable\";\n\n      if (start_date < resource.end_date && end_date > resource.start_date) {\n        for (var i = 0; i < assignments.length; i++) {\n          var a = assignments[i];\n          return \"<div \" + editable + \" data-assignment-cell data-assignment-id='\" + a.id + \"'\" + \" data-row-id='\" + resource.id + \"'\" + \" data-task='\" + resource.$task_id + \"'\" + \" data-start-date='\" + gantt.templates.format_date(start_date) + \"'\" + \" data-end-date='\" + gantt.templates.format_date(end_date) + \"'>\" + a.value + \"</div>\";\n        }\n\n        return \"<div \" + editable + \" data-assignment-cell data-empty \" + \" data-row-id='\" + resource.id + \"'\" + \" data-resource-id='\" + resource.$resource_id + \"'\" + \" data-task='\" + resource.$task_id + \"'\" + \" data-start-date='\" + gantt.templates.format_date(start_date) + \"'\" + \"'  data-end-date='\" + gantt.templates.format_date(end_date) + \"'>-</div>\";\n      }\n\n      return \"\";\n    },\n    renderSummaryLabel: function renderSummaryLabel(start_date, end_date, resource, tasks, assignments) {\n      var sum = assignments.reduce(function (total, assignment) {\n        return total + Number(assignment.value);\n      }, 0);\n\n      if (sum % 1) {\n        sum = Math.round(sum * 10) / 10;\n      }\n\n      if (sum) {\n        return \"<div>\" + sum + \"</div>\";\n      }\n\n      return \"\";\n    },\n    editableResourceCellTemplate: function editableResourceCellTemplate(start_date, end_date, resource, tasks, assignments) {\n      if (resource.$role === \"task\") {\n        return resourcePlugin.renderEditableLabel(start_date, end_date, resource, tasks, assignments);\n      } else {\n        return resourcePlugin.renderSummaryLabel(start_date, end_date, resource, tasks, assignments);\n      }\n    },\n    editableResourceCellClass: function editableResourceCellClass(start_date, end_date, resource, tasks, assignments) {\n      var css = [];\n      css.push(\"resource_marker\");\n\n      if (resource.$role === \"task\") {\n        css.push(\"task_cell\");\n      } else {\n        css.push(\"resource_cell\");\n      }\n\n      var sum = assignments.reduce(function (total, assignment) {\n        return total + Number(assignment.value);\n      }, 0);\n      var capacity = Number(resource.capacity);\n\n      if (isNaN(capacity)) {\n        capacity = 8;\n      }\n\n      if (sum <= capacity) {\n        css.push(\"workday_ok\");\n      } else {\n        css.push(\"workday_over\");\n      }\n\n      return css.join(\" \");\n    },\n    getSummaryResourceAssignments: function getResourceAssignments(resourceId) {\n      var assignments;\n      var store = gantt.getDatastore(gantt.config.resource_store);\n      var resource = store.getItem(resourceId);\n\n      if (resource.$role === \"task\") {\n        assignments = gantt.getResourceAssignments(resource.$resource_id, resource.$task_id);\n      } else {\n        assignments = gantt.getResourceAssignments(resourceId);\n\n        if (store.eachItem) {\n          store.eachItem(function (childResource) {\n            if (childResource.$role !== \"task\") {\n              assignments = assignments.concat(gantt.getResourceAssignments(childResource.id));\n            }\n          }, resourceId);\n        }\n      }\n\n      return assignments;\n    },\n    initEditableDiagram: function initEditableDiagram() {\n      gantt.config.resource_render_empty_cells = true;\n\n      (function () {\n        /// salesforce locker workaround\n        // SF removes 'contenteditable' attribute from cells\n        // restore it on render\n        var timeoutId = null;\n\n        function makeEditable() {\n          if (timeoutId) {\n            cancelAnimationFrame(timeoutId);\n          }\n\n          timeoutId = requestAnimationFrame(function () {\n            var cells = Array.prototype.slice.call(gantt.$container.querySelectorAll(\".resourceTimeline_cell [data-assignment-cell]\"));\n            cells.forEach(function (cell) {\n              cell.contentEditable = true;\n            });\n          });\n          return true;\n        }\n\n        gantt.attachEvent(\"onGanttReady\", function () {\n          gantt.getDatastore(gantt.config.resource_assignment_store).attachEvent(\"onStoreUpdated\", makeEditable);\n          gantt.getDatastore(gantt.config.resource_store).attachEvent(\"onStoreUpdated\", makeEditable);\n        }, {\n          once: true\n        });\n        gantt.attachEvent(\"onGanttLayoutReady\", function () {\n          var ganttViews = gantt.$layout.getCellsByType(\"viewCell\");\n          ganttViews.forEach(function (view) {\n            if (view.$config && view.$config.view === \"resourceTimeline\" && view.$content) {\n              view.$content.attachEvent(\"onScroll\", makeEditable);\n            }\n          });\n        });\n      })();\n\n      gantt.attachEvent(\"onGanttReady\", function () {\n        var assignmentEditInProcess = false;\n        gantt.event(gantt.$container, \"keypress\", function (e) {\n          var target = e.target.closest(\".resourceTimeline_cell [data-assignment-cell]\");\n\n          if (target) {\n            if (e.keyCode === 13 || e.keyCode === 27) {\n              target.blur();\n            }\n          }\n        });\n        gantt.event(gantt.$container, \"focusout\", function (e) {\n          if (assignmentEditInProcess) {\n            return;\n          }\n\n          assignmentEditInProcess = true;\n          setTimeout(function () {\n            assignmentEditInProcess = false;\n          }, 300);\n          var target = e.target.closest(\".resourceTimeline_cell [data-assignment-cell]\");\n\n          if (target) {\n            var strValue = (target.innerText || \"\").trim();\n\n            if (strValue == \"-\") {\n              strValue = \"0\";\n            }\n\n            var value = Number(strValue);\n            var rowId = target.getAttribute(\"data-row-id\");\n            var assignmentId = target.getAttribute(\"data-assignment-id\");\n            var taskId = target.getAttribute(\"data-task\");\n            var resourceId = target.getAttribute(\"data-resource-id\");\n            var startDate = gantt.templates.parse_date(target.getAttribute(\"data-start-date\"));\n            var endDate = gantt.templates.parse_date(target.getAttribute(\"data-end-date\"));\n            var assignmentStore = gantt.getDatastore(gantt.config.resource_assignment_store);\n\n            if (isNaN(value)) {\n              gantt.getDatastore(gantt.config.resource_store).refresh(rowId);\n            } else {\n              var task = gantt.getTask(taskId); // GS-2141. Track the changes by the Undo extension\n\n              if (gantt.plugins().undo) {\n                gantt.ext.undo.saveState(taskId, \"task\");\n              }\n\n              if (assignmentId) {\n                var assignment = assignmentStore.getItem(assignmentId);\n\n                if (value === assignment.value) {\n                  return;\n                }\n\n                if (assignment.start_date.valueOf() === startDate.valueOf() && assignment.end_date.valueOf() === endDate.valueOf()) {\n                  assignment.value = value;\n\n                  if (!value) {\n                    assignmentStore.removeItem(assignment.id);\n                  } else {\n                    assignmentStore.updateItem(assignment.id);\n                  }\n                } else {\n                  if (assignment.end_date.valueOf() > endDate.valueOf()) {\n                    var nextChunk = gantt.copy(assignment);\n                    nextChunk.id = gantt.uid();\n                    nextChunk.start_date = endDate;\n                    nextChunk.duration = gantt.calculateDuration({\n                      start_date: nextChunk.start_date,\n                      end_date: nextChunk.end_date,\n                      task: task\n                    });\n                    nextChunk.delay = gantt.calculateDuration({\n                      start_date: task.start_date,\n                      end_date: nextChunk.start_date,\n                      task: task\n                    });\n                    nextChunk.mode = assignment.mode || \"default\";\n\n                    if (nextChunk.duration !== 0) {\n                      assignmentStore.addItem(nextChunk);\n                    }\n                  }\n\n                  if (assignment.start_date.valueOf() < startDate.valueOf()) {\n                    assignment.end_date = startDate;\n                    assignment.duration = gantt.calculateDuration({\n                      start_date: assignment.start_date,\n                      end_date: assignment.end_date,\n                      task: task\n                    });\n                    assignment.mode = \"fixedDuration\";\n\n                    if (assignment.duration === 0) {\n                      assignmentStore.removeItem(assignment.id);\n                    } else {\n                      assignmentStore.updateItem(assignment.id);\n                    }\n                  } else {\n                    assignmentStore.removeItem(assignment.id);\n                  }\n\n                  if (value) {\n                    assignmentStore.addItem({\n                      task_id: assignment.task_id,\n                      resource_id: assignment.resource_id,\n                      value: value,\n                      start_date: startDate,\n                      end_date: endDate,\n                      duration: gantt.calculateDuration({\n                        start_date: startDate,\n                        end_date: endDate,\n                        task: task\n                      }),\n                      delay: gantt.calculateDuration({\n                        start_date: task.start_date,\n                        end_date: startDate,\n                        task: task\n                      }),\n                      mode: \"fixedDuration\"\n                    });\n                  }\n                }\n\n                gantt.updateTaskAssignments(task.id);\n                gantt.updateTask(task.id);\n              } else if (value) {\n                var assignment = {\n                  task_id: taskId,\n                  resource_id: resourceId,\n                  value: value,\n                  start_date: startDate,\n                  end_date: endDate,\n                  duration: gantt.calculateDuration({\n                    start_date: startDate,\n                    end_date: endDate,\n                    task: task\n                  }),\n                  delay: gantt.calculateDuration({\n                    start_date: task.start_date,\n                    end_date: startDate,\n                    task: task\n                  }),\n                  mode: \"fixedDuration\"\n                };\n                assignmentStore.addItem(assignment);\n                gantt.updateTaskAssignments(task.id);\n                gantt.updateTask(task.id);\n              }\n            }\n          }\n        });\n      }, {\n        once: true\n      });\n    }\n  };\n  return resourcePlugin;\n}\n\nmodule.exports = function (gantt) {\n  var methods = createResourceMethods(gantt);\n  gantt.ext.resources = createHelper(gantt);\n  gantt.config.resources = {\n    dataprocessor_assignments: false,\n    dataprocessor_resources: false,\n    editable_resource_diagram: false,\n    resource_store: {\n      type: \"treeDataStore\",\n      fetchTasks: false,\n      initItem: function initItem(item) {\n        item.parent = item.parent || gantt.config.root_id;\n        item[gantt.config.resource_property] = item.parent;\n        item.open = true;\n        return item;\n      }\n    },\n    lightbox_resources: function selectResourceControlOptions(resources) {\n      var lightboxOptions = [];\n      var store = gantt.getDatastore(gantt.config.resource_store);\n      resources.forEach(function (res) {\n        if (!store.hasChild(res.id)) {\n          var copy = gantt.copy(res);\n          copy.key = res.id;\n          copy.label = res.text;\n          lightboxOptions.push(copy);\n        }\n      });\n      return lightboxOptions;\n    }\n  };\n  gantt.attachEvent(\"onBeforeGanttReady\", function () {\n    if (gantt.getDatastore(gantt.config.resource_store)) {\n      return;\n    }\n\n    var resourceStoreConfig = gantt.config.resources ? gantt.config.resources.resource_store : undefined;\n    var fetchTasks = resourceStoreConfig ? resourceStoreConfig.fetchTasks : undefined;\n\n    if (gantt.config.resources && gantt.config.resources.editable_resource_diagram) {\n      fetchTasks = true;\n    }\n\n    var initItems = function initItems(item) {\n      item.parent = item.parent || gantt.config.root_id;\n      item[gantt.config.resource_property] = item.parent;\n      item.open = true;\n      return item;\n    };\n\n    if (resourceStoreConfig && resourceStoreConfig.initItem) {\n      initItems = resourceStoreConfig.initItem;\n    }\n\n    var storeType = resourceStoreConfig && resourceStoreConfig.type ? resourceStoreConfig.type : \"treeDatastore\";\n    gantt.$resourcesStore = gantt.createDatastore({\n      name: gantt.config.resource_store,\n      type: storeType,\n      fetchTasks: fetchTasks !== undefined ? fetchTasks : false,\n      initItem: initItems\n    });\n    gantt.$data.resourcesStore = gantt.$resourcesStore;\n    gantt.$resourcesStore.attachEvent(\"onParse\", function () {\n      function selectResourceControlOptions(resources) {\n        var lightboxOptions = [];\n        resources.forEach(function (res) {\n          if (!gantt.$resourcesStore.hasChild(res.id)) {\n            var copy = gantt.copy(res);\n            copy.key = res.id;\n            copy.label = res.text;\n            lightboxOptions.push(copy);\n          }\n        });\n        return lightboxOptions;\n      }\n\n      var lightboxOptionsFnc = selectResourceControlOptions;\n\n      if (gantt.config.resources && gantt.config.resources.lightbox_resources) {\n        lightboxOptionsFnc = gantt.config.resources.lightbox_resources;\n      }\n\n      var options = lightboxOptionsFnc(gantt.$resourcesStore.getItems());\n      gantt.updateCollection(\"resourceOptions\", options);\n    });\n  });\n  gantt.getTaskBy = methods.getTaskBy;\n  gantt.getResourceAssignments = methods.getResourceAssignments;\n  gantt.config.resource_property = \"owner_id\";\n  gantt.config.resource_store = \"resource\";\n  gantt.config.resource_render_empty_cells = false;\n  /**\r\n   * these are placeholder functions that should be redefined by the user\r\n  */\n\n  gantt.templates.histogram_cell_class = function (start_date, end_date, resource, tasks, assignments) {};\n\n  gantt.templates.histogram_cell_label = function (start_date, end_date, resource, tasks, assignments) {\n    return tasks.length + \"/3\";\n  };\n\n  gantt.templates.histogram_cell_allocated = function (start_date, end_date, resource, tasks, assignments) {\n    return tasks.length / 3;\n  };\n\n  gantt.templates.histogram_cell_capacity = function (start_date, end_date, resource, tasks, assignments) {\n    return 0;\n  };\n\n  var defaultResourceCellClass = function defaultResourceCellClass(start, end, resource, tasks, assignments) {\n    var css = \"\";\n\n    if (tasks.length <= 1) {\n      css = \"gantt_resource_marker_ok\";\n    } else {\n      css = \"gantt_resource_marker_overtime\";\n    }\n\n    return css;\n  };\n\n  var defaultResourceCellTemplate = function defaultResourceCellTemplate(start, end, resource, tasks, assignments) {\n    return tasks.length * 8;\n  };\n\n  gantt.templates.resource_cell_value = defaultResourceCellTemplate;\n  gantt.templates.resource_cell_class = defaultResourceCellClass; //editable_resource_diagram\n\n  gantt.attachEvent(\"onBeforeGanttReady\", function () {\n    if (gantt.config.resources && gantt.config.resources.editable_resource_diagram) {\n      gantt.config.resource_render_empty_cells = true;\n\n      if (gantt.templates.resource_cell_value === defaultResourceCellTemplate) {\n        gantt.templates.resource_cell_value = gantt.ext.resources.editableResourceCellTemplate;\n      }\n\n      if (gantt.templates.resource_cell_class === defaultResourceCellClass) {\n        gantt.templates.resource_cell_class = gantt.ext.resources.editableResourceCellClass;\n      }\n\n      gantt.ext.resources.initEditableDiagram(gantt);\n    }\n  });\n};","var createWbs = function createWbs(gantt) {\n  return {\n    _needRecalc: true,\n    reset: function reset() {\n      this._needRecalc = true;\n    },\n    _isRecalcNeeded: function _isRecalcNeeded() {\n      return !this._isGroupSort() && this._needRecalc;\n    },\n    _isGroupSort: function _isGroupSort() {\n      return !!gantt.getState().group_mode;\n    },\n    _getWBSCode: function _getWBSCode(task) {\n      if (!task) return \"\";\n\n      if (this._isRecalcNeeded()) {\n        this._calcWBS();\n      }\n\n      if (task.$virtual) return \"\";\n      if (this._isGroupSort()) return task.$wbs || \"\";\n\n      if (!task.$wbs) {\n        this.reset();\n\n        this._calcWBS();\n      }\n\n      return task.$wbs;\n    },\n    _setWBSCode: function _setWBSCode(task, value) {\n      task.$wbs = value;\n    },\n    getWBSCode: function getWBSCode(task) {\n      return this._getWBSCode(task);\n    },\n    getByWBSCode: function getByWBSCode(code) {\n      var parts = code.split(\".\");\n      var currentNode = gantt.config.root_id;\n\n      for (var i = 0; i < parts.length; i++) {\n        var children = gantt.getChildren(currentNode);\n        var index = parts[i] * 1 - 1;\n\n        if (gantt.isTaskExists(children[index])) {\n          currentNode = children[index];\n        } else {\n          return null;\n        }\n      }\n\n      if (gantt.isTaskExists(currentNode)) {\n        return gantt.getTask(currentNode);\n      } else {\n        return null;\n      }\n    },\n    _calcWBS: function _calcWBS() {\n      if (!this._isRecalcNeeded()) return;\n      var _isFirst = true;\n      gantt.eachTask(function (ch) {\n        if (_isFirst) {\n          _isFirst = false;\n\n          this._setWBSCode(ch, \"1\");\n\n          return;\n        }\n\n        var _prevSibling = gantt.getPrevSibling(ch.id);\n\n        if (_prevSibling !== null) {\n          var _wbs = gantt.getTask(_prevSibling).$wbs;\n\n          if (_wbs) {\n            _wbs = _wbs.split(\".\");\n            _wbs[_wbs.length - 1]++;\n\n            this._setWBSCode(ch, _wbs.join(\".\"));\n          }\n        } else {\n          var _parent = gantt.getParent(ch.id);\n\n          this._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\n        }\n      }, gantt.config.root_id, this);\n      this._needRecalc = false;\n    }\n  };\n};\n\nmodule.exports = function (gantt) {\n  var wbs = createWbs(gantt);\n\n  gantt.getWBSCode = function getWBSCode(task) {\n    return wbs.getWBSCode(task);\n  };\n\n  gantt.getTaskByWBSCode = function (code) {\n    return wbs.getByWBSCode(code);\n  };\n\n  function resetCache() {\n    wbs.reset();\n    return true;\n  }\n\n  gantt.attachEvent(\"onAfterTaskMove\", resetCache);\n  gantt.attachEvent(\"onBeforeParse\", resetCache);\n  gantt.attachEvent(\"onAfterTaskDelete\", resetCache);\n  gantt.attachEvent(\"onAfterTaskAdd\", resetCache);\n  gantt.attachEvent(\"onAfterSort\", resetCache);\n};","var global = require(\"../../utils/global\");\n\nfunction createMethod(gantt) {\n  var methods = {};\n  var isActive = false;\n\n  function disableMethod(methodName, dummyMethod) {\n    dummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function () {};\n\n    if (!methods[methodName]) {\n      methods[methodName] = this[methodName];\n      this[methodName] = dummyMethod;\n    }\n  }\n\n  function restoreMethod(methodName) {\n    if (methods[methodName]) {\n      this[methodName] = methods[methodName];\n      methods[methodName] = null;\n    }\n  }\n\n  function disableMethods(methodsHash) {\n    for (var i in methodsHash) {\n      disableMethod.call(this, i, methodsHash[i]);\n    }\n  }\n\n  function restoreMethods() {\n    for (var i in methods) {\n      restoreMethod.call(this, i);\n    }\n  }\n\n  function batchUpdatePayload(callback) {\n    try {\n      callback();\n    } catch (e) {\n      global.console.error(e);\n    }\n  }\n\n  var state = gantt.$services.getService(\"state\");\n  state.registerProvider(\"batchUpdate\", function () {\n    return {\n      batch_update: isActive\n    };\n  }, false);\n  return function batchUpdate(callback, noRedraw) {\n    if (isActive) {\n      // batch mode is already active\n      batchUpdatePayload(callback);\n      return;\n    }\n\n    var call_dp = this._dp && this._dp.updateMode != \"off\";\n    var dp_mode;\n\n    if (call_dp) {\n      dp_mode = this._dp.updateMode;\n\n      this._dp.setUpdateMode(\"off\");\n    } // temporary disable some methods while updating multiple tasks\n\n\n    var resetProjects = {};\n    var methods = {\n      \"render\": true,\n      \"refreshData\": true,\n      \"refreshTask\": true,\n      \"refreshLink\": true,\n      \"resetProjectDates\": function resetProjectDates(task) {\n        resetProjects[task.id] = task;\n      }\n    };\n    disableMethods.call(this, methods);\n    isActive = true;\n    this.callEvent(\"onBeforeBatchUpdate\", []);\n    batchUpdatePayload(callback);\n    this.callEvent(\"onAfterBatchUpdate\", []);\n    restoreMethods.call(this); // do required updates after changes applied\n\n    for (var i in resetProjects) {\n      this.resetProjectDates(resetProjects[i]);\n    }\n\n    isActive = false;\n\n    if (!noRedraw) {\n      this.render();\n    }\n\n    if (call_dp) {\n      this._dp.setUpdateMode(dp_mode);\n\n      this._dp.setGanttMode(\"task\");\n\n      this._dp.sendData();\n\n      this._dp.setGanttMode(\"link\");\n\n      this._dp.sendData();\n    }\n  };\n}\n\nmodule.exports = function (gantt) {\n  gantt.batchUpdate = createMethod(gantt);\n};","module.exports = function (gantt) {\n  if (!gantt.ext) {\n    gantt.ext = {};\n  }\n\n  var modules = [require(\"./batch_update\"), require(\"./wbs\"), require(\"./resources\"), require(\"./resource_assignments\"), require(\"./new_task_placeholder\"), require(\"./auto_task_types\"), require(\"./formatters\"), require(\"./empty_state_screen\")[\"default\"]];\n\n  for (var i = 0; i < modules.length; i++) {\n    if (modules[i]) modules[i](gantt);\n  }\n};","import * as utils from \"../../utils/utils\";\r\n\r\nexport default class SimpleStorage {\r\n\tpublic static create = () : SimpleStorage => {\r\n\t\treturn new SimpleStorage();\r\n\t}\r\n\r\n\tprotected _storage: { [id: string]: any; };\r\n\r\n\tprotected constructor() {\r\n\t\tthis._storage = {};\r\n\t}\r\n\r\n\tpublic clear = (): void => {\r\n\t\tthis._storage = {};\r\n\t}\r\n\r\n\tpublic storeItem = (item: any): void => {\r\n\t\tthis._storage[item.id] = utils.copy(item);\r\n\t}\r\n\r\n\tpublic getStoredItem = (id: string): any => {\r\n\t\treturn this._storage[id] || null;\r\n\t}\r\n}","\r\nexport default function extendGantt(gantt: any, dp: any) {\r\n\tgantt.getUserData = function(id, name, store) {\r\n\t\tif (!this.userdata) {\r\n\t\t\tthis.userdata = {};\r\n\t\t}\r\n\t\tthis.userdata[store] = this.userdata[store] || {};\r\n\t\tif (this.userdata[store][id] && this.userdata[store][id][name]) {\r\n\t\t\treturn this.userdata[store][id][name];\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value, store) {\r\n\t\tif (!this.userdata) {\r\n\t\t\tthis.userdata = {};\r\n\t\t}\r\n\t\tthis.userdata[store] = this.userdata[store] || {};\r\n\t\tthis.userdata[store][id] = this.userdata[store][id] || {};\r\n\t\tthis.userdata[store][id][name] = value;\r\n\t};\r\n\r\n\tgantt._change_id = function(oldId, newId) {\r\n\t\tswitch (this._dp._ganttMode) {\r\n\t\t\tcase \"task\":\r\n\t\t\t\tthis.changeTaskId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"link\":\r\n\t\t\t\tthis.changeLinkId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"assignment\":\r\n\t\t\t\tthis.$data.assignmentsStore.changeId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"resource\":\r\n\t\t\t\tthis.$data.resourcesStore.changeId(oldId, newId);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Invalid mode of the dataProcessor after database id is received: ${this._dp._ganttMode}, new id: ${newId}`);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._row_style = function(rowId, classname){\r\n\t\tif (this._dp._ganttMode !== \"task\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!gantt.isTaskExists(rowId)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst task = gantt.getTask(rowId);\r\n\t\ttask.$dataprocessor_class = classname;\r\n\t\tgantt.refreshTask(rowId);\r\n\t};\r\n\r\n\t// fake method for dataprocessor\r\n\tgantt._delete_task = function(rowId, node) {}; // tslint:disable-line\r\n\r\n\tgantt._sendTaskOrder = function(id, item){\r\n\t\tif (item.$drop_target) {\r\n\t\t\tthis._dp.setGanttMode(\"task\");\r\n\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\tthis._dp.setUpdated(id, true,\"order\");\r\n\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.setDp = function() {\r\n\t\tthis._dp = dp;\r\n\t};\r\n\r\n\tgantt.setDp();\r\n}","import * as helpers from \"../../utils/helpers\";\r\n\r\nexport default class DataProcessorEvents {\r\n\tprotected _dataProcessorHandlers: any[];\r\n\tprotected $gantt: any;\r\n\tprotected $dp: any;\r\n\r\n\tconstructor(gantt: any, dp: any) {\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$dp = dp;\r\n\t\tthis._dataProcessorHandlers = [];\r\n\t}\r\n\r\n\tattach() {\r\n\t\tconst dp = this.$dp;\r\n\t\tconst gantt = this.$gantt;\r\n\t\tconst treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tconst cascadeDelete = {};\r\n\r\n\t\tconst clientSideDelete = (id) => {\r\n\t\t\treturn this.clientSideDelete(id, dp, gantt);\r\n\t\t};\r\n\r\n\t\tfunction getTaskLinks(task) {\r\n\t\t\tlet _links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\t_links = _links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\t_links = _links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn _links;\r\n\t\t}\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskAdd\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true, \"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskUpdate\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\r\n\t\t\t\t// gantt can be destroyed/reinitialized after dp.setUpdated\r\n\t\t\t\tif(gantt._sendTaskOrder){\r\n\t\t\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onBeforeTaskDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.config.cascade_delete) {\r\n\t\t\t\tcascadeDelete[id] = {\r\n\t\t\t\t\ttasks: treeHelper.getSubtreeTasks(gantt, id),\r\n\t\t\t\t\tlinks: treeHelper.getSubtreeLinks(gantt, id)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t// GS-631. Keep the deleted item in Gantt until we receive the successful response from the server\r\n\t\t\tif (dp.deleteAfterConfirmation) {\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id, true, \"deleted\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterTaskDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tconst needDbDelete = !clientSideDelete(id);\r\n\t\t\tconst needCascadeDelete = gantt.config.cascade_delete && cascadeDelete[id];\r\n\t\t\tif (!needDbDelete && !needCascadeDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (needCascadeDelete) {\r\n\t\t\t\tconst dpMode = dp.updateMode;\r\n\t\t\t\tdp.setUpdateMode(\"off\");\r\n\r\n\t\t\t\tconst cascade = cascadeDelete[id];\r\n\t\t\t\tfor (const i in cascade.tasks) {\r\n\t\t\t\t\tif (!clientSideDelete(i)) {\r\n\t\t\t\t\t\tdp.storeItem(cascade.tasks[i]);\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tfor (const i in cascade.links) {\r\n\t\t\t\t\tif (!clientSideDelete(i)) {\r\n\t\t\t\t\t\tdp.storeItem(cascade.links[i]);\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcascadeDelete[id] = null;\r\n\r\n\t\t\t\tif (dpMode !== \"off\") {\r\n\t\t\t\t\tdp.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdateMode(dpMode);\r\n\t\t\t}\r\n\r\n\t\t\tif (needDbDelete){\r\n\t\t\t\tdp.storeItem(item);\r\n\t\t\t\tif (!dp.deleteAfterConfirmation){\r\n\t\t\t\t\tdp.setUpdated(id, true, \"deleted\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (dp.updateMode !== \"off\" && !dp._tSend) {\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkUpdate\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isLinkExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkAdd\", function(id, item) { // tslint:disable-line\r\n\t\t\tif (gantt.isLinkExists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onAfterLinkDelete\", function(id, item) { // tslint:disable-line\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tconst needDbDelete = !clientSideDelete(id);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t}));\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onRowDragEnd\", function(id, target) { // tslint:disable-line\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t}));\r\n\r\n\t\tlet tasks = null;\r\n\t\tlet links = null;\r\n\r\n\t\tthis._dataProcessorHandlers.push(gantt.attachEvent(\"onTaskIdChange\", function(oldId, newId) { // tslint:disable-line\r\n\t\t\tif (!dp._waitMode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst children = gantt.getChildren(newId);\r\n\t\t\tif (children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tconst ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst item = this.getTask(newId);\r\n\t\t\tconst itemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif (itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (let i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tconst link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function() {\r\n\t\t\tif (tasks || links) {\r\n\t\t\t\tgantt.batchUpdate(function() {\r\n\t\t\t\t\tfor (const id in tasks) {\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (const id in links) {\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif (tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tlet url = this._serverProcessor;\r\n\t\t\tif (this._tMode === \"REST-JSON\" || this._tMode === \"REST\") {\r\n\t\t\t\tconst mode = this._ganttMode;\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t// editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t} else {\r\n\t\t\t\tconst pluralizedMode = this._ganttMode + \"s\";\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + pluralizedMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"insertCallback\", function insertCallback(upd, id, parent, mode) { // tslint:disable-line\r\n\t\t\tconst data = upd.data || gantt.xml._xmlNodeToJSON(upd.firstChild);\r\n\t\t\tconst methods = {\r\n\t\t\t\tadd: gantt.addTask,\r\n\t\t\t\tisExist: gantt.isTaskExists\r\n\t\t\t};\r\n\t\t\tif (mode === \"links\") {\r\n\t\t\t\tmethods.add = gantt.addLink;\r\n\t\t\t\tmethods.isExist = gantt.isLinkExists;\r\n\t\t\t}\r\n\t\t\tif (methods.isExist.call(gantt, id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdata.id = id;\r\n\t\t\tmethods.add.call(gantt, data);\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"updateCallback\", function updateCallback(upd, id) {\r\n\t\t\tconst data = upd.data || gantt.xml._xmlNodeToJSON(upd.firstChild);\r\n\t\t\tif (!gantt.isTaskExists(id)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst objData = gantt.getTask(id);\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tlet property = data[key];\r\n\t\t\t\tswitch (key) {\r\n\t\t\t\t\tcase \"id\":\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tcase \"start_date\":\r\n\t\t\t\t\tcase \"end_date\":\r\n\t\t\t\t\t\tproperty = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date(property) : gantt.templates.parse_date(property);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"duration\":\r\n\t\t\t\t\t\tobjData.end_date = gantt.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tobjData[key] = property;\r\n\t\t\t}\r\n\t\t\tgantt.updateTask(id);\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\t\tdp.attachEvent(\"deleteCallback\", function deleteCallback(upd, id, parent, mode) { // tslint:disable-line\r\n\t\t\tconst methods = {\r\n\t\t\t\tdelete: gantt.deleteTask,\r\n\t\t\t\tisExist: gantt.isTaskExists\r\n\t\t\t};\r\n\t\t\tif (mode === \"links\") {\r\n\t\t\t\tmethods.delete = gantt.deleteLink;\r\n\t\t\t\tmethods.isExist = gantt.isLinkExists;\r\n\t\t\t} else if(mode === \"assignment\") {\r\n\t\t\t\tmethods.delete = function(val) {\r\n\t\t\t\t\tgantt.$data.assignmentsStore.remove(val);\r\n\t\t\t\t};\r\n\t\t\t\tmethods.isExist = function(val){\r\n\t\t\t\t\treturn gantt.$data.assignmentsStore.exists(val);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (methods.isExist.call(gantt, id)) {\r\n\t\t\t\tmethods.delete.call(gantt, id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.handleResourceCRUD(dp, gantt);\r\n\t\tthis.handleResourceAssignmentCRUD(dp, gantt);\r\n\t}\r\n\r\n\tclientSideDelete(id, dp, gantt){\r\n\t\tconst updated = dp.updatedRows.slice();\r\n\t\tlet clientOnly = false;\r\n\r\n\t\tif(gantt.getUserData(id, \"!nativeeditor_status\", dp._ganttMode) === \"true_deleted\"){\r\n\t\t\tclientOnly = true;\r\n\t\t\tdp.setUpdated(id,false);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < updated.length && !dp._in_progress[id]; i++) {\r\n\t\t\tif (updated[i] === id) {\r\n\t\t\t\tif (gantt.getUserData(id, \"!nativeeditor_status\", dp._ganttMode) === \"inserted\") {\r\n\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t}\r\n\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn clientOnly;\r\n\t}\r\n\r\n\thandleResourceAssignmentCRUD(dp, gantt){\r\n\t\tif(!gantt.config.resources || gantt.config.resources.dataprocessor_assignments !== true){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst assignmentsStore = gantt.getDatastore(gantt.config.resource_assignment_store);\r\n\t\tconst insertedTasks = {};\r\n\t\tconst pendingAssignments = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskAdd\", function(id, task){\r\n\t\t\tinsertedTasks[id] = true;\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tfunction putAssignmentToQueue(item){\r\n\t\t\tpendingAssignments[item.id] = item;\r\n\t\t\tinsertedTasks[item.task_id] = true;\r\n\t\t}\r\n\r\n\t\tfunction insertResourceAssignment(assignment){\r\n\t\t\tconst id = assignment.id;\r\n\t\t\tif (assignmentsStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"assignment\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t\tdelete pendingAssignments[id];\r\n\t\t}\r\n\r\n\t\tgantt.attachEvent(\"onTaskIdChange\", function(id, newId){\r\n\t\t\tdelete insertedTasks[id];\r\n\t\t});\r\n\r\n\t\tassignmentsStore.attachEvent(\"onAfterAdd\", (id, item) => {\r\n\t\t\tif(insertedTasks[item.task_id]){\r\n\t\t\t\t// inserting assignment of new task\r\n\t\t\t\t// task is not saved yet, need to wait till it gets permanent id and save assigmnents after that\r\n\t\t\t\tputAssignmentToQueue(item);\r\n\t\t\t}else{\r\n\t\t\t\tinsertResourceAssignment(item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tassignmentsStore.attachEvent(\"onAfterUpdate\", (id, item) => {\r\n\t\t\tif (assignmentsStore.exists(id)) {\r\n\t\t\t\tif(pendingAssignments[id]){\r\n\t\t\t\t\tinsertResourceAssignment(item);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdp.setGanttMode(\"assignment\");\r\n\t\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tassignmentsStore.attachEvent(\"onAfterDelete\", (id, item) => {\r\n\t\t\tdp.setGanttMode(\"assignment\");\r\n\r\n\t\t\tconst needDbDelete = !this.clientSideDelete(id, dp, gantt);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\thandleResourceCRUD(dp, gantt){\r\n\t\tif(!gantt.config.resources || gantt.config.resources.dataprocessor_resources !== true){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst resourcesStore = gantt.getDatastore(gantt.config.resource_store);\r\n\r\n\t\tfunction insertResource(resource){\r\n\t\t\tconst id = resource.id;\r\n\t\t\tif (resourcesStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"resource\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tresourcesStore.attachEvent(\"onAfterAdd\", (id, item) => {\r\n\t\t\tinsertResource(item);\r\n\t\t});\r\n\r\n\t\tresourcesStore.attachEvent(\"onAfterUpdate\", (id, item) => {\r\n\t\t\tif (resourcesStore.exists(id)) {\r\n\t\t\t\tdp.setGanttMode(\"resource\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tresourcesStore.attachEvent(\"onAfterDelete\", (id, item) => {\r\n\t\t\tdp.setGanttMode(\"resource\");\r\n\r\n\t\t\tconst needDbDelete = !this.clientSideDelete(id, dp, gantt);\r\n\t\t\tif (!needDbDelete) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdp.storeItem(item);\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\tdetach() {\r\n\t\thelpers.forEach(this._dataProcessorHandlers, (e) => {\r\n\t\t\tthis.$gantt.detachEvent(e);\r\n\t\t});\r\n\t\tthis._dataProcessorHandlers = [];\r\n\t}\r\n}\r\n","import * as eventable from \"../../utils/eventable\";\r\nimport * as helpers from \"../../utils/helpers\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport DataProcessorEvents from \"./data_processor_events\";\r\nimport extendGantt from \"./extend_gantt\";\r\nimport SimpleStorage from \"./simple_storage\";\r\n\r\nexport interface DataProcessor { // tslint:disable-line\r\n\t$gantt: any;\r\n\tdetachAllEvents: any;\r\n\tattachEvent: any;\r\n\tcallEvent: any;\r\n\r\n\tserverProcessor: string;\r\n\taction_param: string;\r\n\tupdatedRows: any[];\r\n\tautoUpdate: boolean;\r\n\tupdateMode: string;\r\n\tmessages: any[];\r\n\tstyles: object;\r\n\tdnd: any;\r\n\tdeleteAfterConfirmation?: any;\r\n}\r\n\r\nexport function createDataProcessor(config: any) {\r\n\tlet router;\r\n\tlet tMode;\r\n\tif (config instanceof Function) {\r\n\t\trouter = config;\r\n\t} else if (config.hasOwnProperty(\"router\")) {\r\n\t\trouter = config.router;\r\n\t} else if (config.hasOwnProperty(\"assignment\") || config.hasOwnProperty(\"link\") || config.hasOwnProperty(\"task\")) {\r\n\t\trouter = config;\r\n\t}\r\n\tif (router) {\r\n\t\ttMode = \"CUSTOM\";\r\n\t} else {\r\n\t\ttMode = config.mode || \"REST-JSON\";\r\n\t}\r\n\tconst gantt = this; // tslint:disable-line\r\n\tconst dp = new DataProcessor(config.url);\r\n\r\n\r\n\tdp.init(gantt);\r\n\tdp.setTransactionMode({\r\n\t\tmode: tMode,\r\n\t\trouter\r\n\t}, config.batchUpdate);\r\n\tif(config.deleteAfterConfirmation){\r\n\t\tdp.deleteAfterConfirmation = config.deleteAfterConfirmation;\r\n\t}\r\n\treturn dp;\r\n}\r\n\r\nexport class DataProcessor {\r\n\tpublic modes: object;\r\n\tpublic serverProcessor: string;\r\n\tpublic action_param: string; // tslint:disable-line\r\n\tpublic updatedRows: any[];\r\n\tpublic autoUpdate: boolean;\r\n\tpublic updateMode: string;\r\n\tpublic messages: any[];\r\n\tpublic styles: object;\r\n\tpublic dnd: any;\r\n\r\n\tprotected _tMode: string;\r\n\tprotected _headers: any;\r\n\tprotected _payload: any;\r\n\tprotected _postDelim: string;\r\n\tprotected _waitMode: number;\r\n\tprotected _in_progress: object; // tslint:disable-line\r\n\tprotected _invalid: object;\r\n\tprotected _storage: SimpleStorage;\r\n\tprotected _tSend: boolean;\r\n\tprotected _serializeAsJson: boolean;\r\n\tprotected _router: any;\r\n\tprotected _utf: boolean;\r\n\tprotected _methods: any[];\r\n\tprotected _user: any;\r\n\tprotected _uActions: object;\r\n\tprotected _needUpdate: boolean;\r\n\tprotected _ganttMode: \"task\"|\"link\";\r\n\tprotected _routerParametersFormat: \"parameters\"|\"object\";\r\n\r\n\tprotected _silent_mode: any; // tslint:disable-line\r\n\tprotected _updateBusy: any;\r\n\tprotected _serverProcessor: any;\r\n\tprotected _initialized: boolean;\r\n\r\n\tconstructor(serverProcessorURL?) {\r\n\t\tthis.serverProcessor = serverProcessorURL;\r\n\t\tthis.action_param = \"!nativeeditor_status\";\r\n\r\n\t\tthis.updatedRows = []; // ids of updated rows\r\n\r\n\t\tthis.autoUpdate = true;\r\n\t\tthis.updateMode = \"cell\";\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tthis._postDelim = \"_\";\r\n\t\tthis._routerParametersFormat = \"parameters\";\r\n\r\n\t\tthis._waitMode = 0;\r\n\t\tthis._in_progress = {}; // ?\r\n\t\tthis._storage = SimpleStorage.create();\r\n\t\tthis._invalid = {};\r\n\t\tthis.messages = [];\r\n\r\n\t\tthis.styles = {\r\n\t\t\tupdated: \"font-weight:bold;\",\r\n\t\t\tinserted: \"font-weight:bold;\",\r\n\t\t\tdeleted: \"text-decoration : line-through;\",\r\n\t\t\tinvalid: \"background-color:FFE0E0;\",\r\n\t\t\tinvalid_cell: \"border-bottom:2px solid red;\",\r\n\t\t\terror: \"color:red;\",\r\n\t\t\tclear: \"font-weight:normal;text-decoration:none;\"\r\n\t\t};\r\n\t\tthis.enableUTFencoding(true);\r\n\t\teventable(this);\r\n\t}\r\n\r\n\tsetTransactionMode(mode:any, total?:any) {\r\n\t\tif (typeof mode === \"object\") {\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif (utils.defined(mode.headers)) {\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif (utils.defined(mode.payload)) {\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\tthis._tSend = !!total;\r\n\t\t} else {\r\n\t\t\tthis._tMode = mode;\r\n\t\t\tthis._tSend = total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"REST\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"JSON\" || this._tMode === \"REST-JSON\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._serializeAsJson = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-Type\"] = \"application/json\";\r\n\t\t}else{\r\n\t\t\tif(this._headers && !this._headers[\"Content-Type\"]){\r\n\t\t\t\tthis._headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._router = mode.router;\r\n\t\t}\r\n\t}\r\n\r\n\tescape(data:any) {\r\n\t\tif (this._utf) {\r\n\t\t\treturn encodeURIComponent(data);\r\n\t\t} else {\r\n\t\t\treturn escape(data);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: allows to set escaping mode\r\n\t * @param: true - utf based escaping, simple - use current page encoding\r\n\t * @type: public\r\n\t */\r\n\tenableUTFencoding(mode:boolean) {\r\n\t\tthis._utf = !!mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: get state of updating\r\n\t * @returns:   true - all in sync with server, false - some items not updated yet.\r\n\t * @type: public\r\n\t */\r\n\tgetSyncState() {\r\n\t\treturn !this.updatedRows.length;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: set if rows should be send to server automatically\r\n\t * @param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t * @type: public\r\n\t */\r\n\tsetUpdateMode(mode: string, dnd: any) {\r\n\t\tthis.autoUpdate = (mode === \"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd = dnd;\r\n\t}\r\n\r\n\tignore(code: any, master: any) {\r\n\t\tthis._silent_mode = true;\r\n\t\tcode.call(master || window);\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: mark row as updated/normal. check mandatory fields, initiate autoupdate (if turned on)\r\n\t * @param: rowId - id of row to set update-status for\r\n\t * @param: state - true for \"updated\", false for \"not updated\"\r\n\t * @param: mode - update mode name\r\n\t * @type: public\r\n\t */\r\n\tsetUpdated(rowId:number|string, state: boolean, mode?: string) {\r\n\t\tif (this._silent_mode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst ind = this.findRow(rowId);\r\n\r\n\t\tmode = mode || \"updated\";\r\n\t\tconst existing = this.$gantt.getUserData(rowId, this.action_param, this._ganttMode);\r\n\t\tif (existing && mode === \"updated\") {\r\n\t\t\tmode = existing;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tthis.set_invalid(rowId, false); // clear previous error flag\r\n\t\t\tthis.updatedRows[ind] = rowId;\r\n\t\t\tthis.$gantt.setUserData(rowId, this.action_param, mode, this._ganttMode);\r\n\t\t\tif (this._in_progress[rowId]) {\r\n\t\t\t\tthis._in_progress[rowId] = \"wait\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!this.is_invalid(rowId)) {\r\n\t\t\t\tthis.updatedRows.splice(ind, 1);\r\n\t\t\t\tthis.$gantt.setUserData(rowId, this.action_param, \"\", this._ganttMode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.markRow(rowId, state, mode);\r\n\t\tif (state && this.autoUpdate) {\r\n\t\t\tthis.sendData(rowId);\r\n\t\t}\r\n\t}\r\n\r\n\tmarkRow(id: number | string, state: boolean, mode: string) {\r\n\t\tlet str = \"\";\r\n\t\tconst invalid = this.is_invalid(id);\r\n\t\tif (invalid) {\r\n\t\t\tstr = this.styles[invalid];\r\n\t\t\tstate = true;\r\n\t\t}\r\n\t\tif (this.callEvent(\"onRowMark\", [id, state, mode, invalid])) {\r\n\t\t\t// default logic\r\n\t\t\tstr = this.styles[state ? mode : \"clear\"] + \" \" + str;\r\n\r\n\t\t\tthis.$gantt[this._methods[0]](id, str);\r\n\r\n\t\t\tif (invalid && invalid.details) {\r\n\t\t\t\tstr += this.styles[invalid + \"_cell\"];\r\n\t\t\t\tfor (let i = 0; i < invalid.details.length; i++) {\r\n\t\t\t\t\tif (invalid.details[i]) {\r\n\t\t\t\t\t\tthis.$gantt[this._methods[1]](id, i, str);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetActionByState(state: string):string {\r\n\t\tif (state === \"inserted\") {\r\n\t\t\treturn \"create\";\r\n\t\t}\r\n\r\n\t\tif (state === \"updated\") {\r\n\t\t\treturn \"update\";\r\n\t\t}\r\n\r\n\t\tif (state === \"deleted\") {\r\n\t\t\treturn \"delete\";\r\n\t\t}\r\n\r\n\t\t// reorder\r\n\t\treturn \"update\";\r\n\t}\r\n\r\n\tgetState(id: number | string) {\r\n\t\treturn this.$gantt.getUserData(id, this.action_param, this._ganttMode);\r\n\t}\r\n\r\n\tis_invalid(id: number | string) {\r\n\t\treturn this._invalid[id];\r\n\t}\r\n\r\n\tset_invalid(id: number | string, mode: any, details?) {\r\n\t\tif (details) {\r\n\t\t\tmode = {\r\n\t\t\t\tvalue: mode,\r\n\t\t\t\tdetails,\r\n\t\t\t\ttoString: function() { // tslint:disable-line\r\n\t\t\t\t\treturn this.value.toString();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis._invalid[id] = mode;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: check mandatory fields and verify values of cells, initiate update (if specified). Can be redefined in order to provide custom validation\r\n\t * @param: rowId - id of row to set update-status for\r\n\t * @type: public\r\n\t */\r\n\t// tslint:disable-next-line\r\n\tcheckBeforeUpdate(rowId: number | string) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: send row(s) values to server\r\n\t * @param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t * @type: public\r\n\t */\r\n\tsendData(rowId?: any) {\r\n\t\tif (this.$gantt.editStop) {\r\n\t\t\tthis.$gantt.editStop();\r\n\t\t}\r\n\r\n\t\tif (typeof rowId === \"undefined\" || this._tSend) {\r\n\r\n\t\t\tconst pendingUpdateModes = [];\r\n\t\t\tif(this.modes){\r\n\t\t\t\tconst knownModes = [\"task\", \"link\", \"assignment\"];\r\n\t\t\t\tknownModes.forEach((mode) => {\r\n\t\t\t\t\tif(this.modes[mode] && this.modes[mode].updatedRows.length){\r\n\t\t\t\t\t\tpendingUpdateModes.push(mode);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (pendingUpdateModes.length){\r\n\t\t\t\tfor(let i = 0; i < pendingUpdateModes.length; i++){\r\n\t\t\t\t\tthis.setGanttMode(pendingUpdateModes[i]);\r\n\t\t\t\t\tthis.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.sendAllData();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._in_progress[rowId]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.messages = [];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\", [rowId, this.messages])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t}\r\n\r\n\tserialize(data: any, id: any) {\r\n\t\tif (this._serializeAsJson) {\r\n\t\t\treturn  this._serializeAsJSON(data);\r\n\t\t}\r\n\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\tif (typeof id !== \"undefined\") {\r\n\t\t\treturn this.serialize_one(data, \"\");\r\n\t\t} else {\r\n\t\t\tconst stack = [];\r\n\t\t\tconst keys = [];\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\t\tstack.push(this.serialize_one(data[key], key + this._postDelim));\r\n\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstack.push(\"ids=\" + this.escape(keys.join(\",\")));\r\n\t\t\tif (this.$gantt.security_key) {\r\n\t\t\t\tstack.push(\"dhx_security=\" + this.$gantt.security_key);\r\n\t\t\t}\r\n\t\t\treturn stack.join(\"&\");\r\n\t\t}\r\n\t}\r\n\r\n\tserialize_one(data: any, pref: string) {\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\tconst stack = [];\r\n\t\tlet serialized = \"\";\r\n\t\tfor (const key in data)\r\n\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\tif ((key === \"id\" ||\r\n\t\t\t\t\tkey == this.action_param) && // tslint:disable-line\r\n\t\t\t\t\tthis._tMode === \"REST\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof data[key] === \"string\" || typeof data[key] === \"number\") {\r\n\t\t\t\t\tserialized = data[key];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tserialized = JSON.stringify(data[key]);\r\n\t\t\t\t}\r\n\t\t\t\tstack.push(this.escape((pref || \"\") + key) + \"=\" + this.escape(serialized));\r\n\t\t\t}\r\n\t\treturn stack.join(\"&\");\r\n\t}\r\n\r\n\tsendAllData() {\r\n\t\tif (!this.updatedRows.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.messages = [];\r\n\t\tlet valid: any = true;\r\n\r\n\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\tvalid = valid && this.checkBeforeUpdate(rowId);\r\n\t\t});\r\n\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\", [\"\", this.messages])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this._tSend) {\r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\t} else {\r\n\t\t\t// this.updatedRows can be spliced from onBeforeUpdate via dp.setUpdated false\r\n\t\t\t// use an iterator instead of for(var i = 0; i < this.updatedRows; i++) then\r\n\t\t\tthis._forEachUpdatedRow(function(rowId) {\r\n\t\t\t\tif (!this._in_progress[rowId]) {\r\n\t\t\t\t\tif (this.is_invalid(rowId)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfindRow(pattern: any) {\r\n\t\tlet i = 0;\r\n\t\tfor (i = 0; i < this.updatedRows.length; i++) {\r\n\t\t\tif (pattern == this.updatedRows[i]) { // tslint:disable-line\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn i;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: define custom actions\r\n\t * @param: name - name of action, same as value of action attribute\r\n\t * @param: handler - custom function, which receives a XMl response content for action\r\n\t * @type: private\r\n\t */\r\n\tdefineAction(name: string, handler: any) {\r\n\t\tif (!this._uActions) {\r\n\t\t\tthis._uActions = {};\r\n\t\t}\r\n\t\tthis._uActions[name] = handler;\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n\t * @param: sid - id of item before update\r\n\t * @param: tid - id of item after up0ate\r\n\t * @param: action - action name\r\n\t * @type: public\r\n\t * @topic: 0\r\n\t */\r\n\tafterUpdateCallback(sid: number | string, tid: number | string, action: string, btag: any, ganttMode: string) {\r\n\t\tif(!this.$gantt){\r\n\t\t\t// destructor has been called before the callback\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setGanttMode(ganttMode);\r\n\r\n\t\tconst marker = sid;\r\n\t\tconst correct = (action !== \"error\" && action !== \"invalid\");\r\n\t\tif (!correct) {\r\n\t\t\tthis.set_invalid(sid, action);\r\n\t\t}\r\n\t\tif ((this._uActions) && (this._uActions[action]) && (!this._uActions[action](btag))) {\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tthis.setUpdated(sid, false);\r\n\t\t}\r\n\r\n\t\tconst originalSid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) { // tslint:disable-line\r\n\t\t\t\t\tthis.setUpdated(sid, false);\r\n\t\t\t\t\tthis.$gantt[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tif(!this.deleteAfterConfirmation || this._ganttMode !== \"task\"){\r\n\t\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"true_deleted\", this._ganttMode);\r\n\t\t\t\t\tthis.$gantt[this._methods[3]](sid);\r\n\t\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (this._ganttMode === \"task\" && this.$gantt.isTaskExists(sid)) {\r\n\t\t\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"true_deleted\", this._ganttMode);\r\n\t\t\t\t\t\tconst task = this.$gantt.getTask(sid);\r\n\t\t\t\t\t\tthis.$gantt.silent(() => {\r\n\t\t\t\t\t\t\tthis.$gantt.deleteTask(sid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$gantt.callEvent(\"onAfterTaskDelete\", [sid, task]);\r\n\t\t\t\t\t\tthis.$gantt.render();\r\n\t\t\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] !== \"wait\") {\r\n\t\t\tif (correct) {\r\n\t\t\t\tthis.$gantt.setUserData(sid, this.action_param, \"\", this._ganttMode);\r\n\t\t\t}\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid, true, this.$gantt.getUserData(sid, this.action_param, this._ganttMode));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [originalSid, action, tid, btag]);\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: response from server\r\n\t * @param: xml - XMLLoader object with response XML\r\n\t * @type: private\r\n\t */\r\n\tafterUpdate(that: any, xml: any, id?:any) {\r\n\t\tlet _xml;\r\n\t\tif (arguments.length === 3) {\r\n\t\t\t_xml = arguments[1];\r\n\t\t} else {\r\n\t\t\t// old dataprocessor\r\n\t\t\t_xml = arguments[4];\r\n\t\t}\r\n\t\tlet mode = this.getGanttMode();\r\n\t\tconst reqUrl = _xml.filePath || _xml.url;\r\n\r\n\t\tif (this._tMode !== \"REST\" && this._tMode !== \"REST-JSON\") {\r\n\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") !== -1) {\r\n\t\t\t\tmode = \"link\";\r\n\t\t\t} else if (reqUrl.indexOf(\"gantt_mode=assignments\") !== -1) {\r\n\t\t\t\tmode = \"assignment\";\r\n\t\t\t} else {\r\n\t\t\t\tmode = \"task\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (reqUrl.indexOf(\"/link\") >= 0) {\r\n\t\t\t\tmode = \"link\";\r\n\t\t\t} else if(reqUrl.indexOf(\"/assignment\") >= 0){\r\n\t\t\t\tmode = \"assignment\";\r\n\t\t\t} else {\r\n\t\t\t\tmode = \"task\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setGanttMode(mode);\r\n\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\t// try to use json first\r\n\t\tlet tag;\r\n\r\n\t\ttry {\r\n\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t} catch (e) {\r\n\r\n\t\t\t// empty response also can be processed by json handler\r\n\t\t\tif (!xml.xmlDoc.responseText.length) {\r\n\t\t\t\ttag = {};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst processCallback = (itemId: any) => {\r\n\t\t\tconst action = tag.action || this.getState(itemId) || \"updated\";\r\n\t\t\tconst sid = tag.sid || itemId[0];\r\n\t\t\tconst tid = tag.tid || itemId[0];\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, tag, mode);\r\n\t\t};\r\n\t\tif (tag) {\r\n\t\t\t// GS-753. When multiple tasks are updated, unhighlight all of them\r\n\t\t\tif (Array.isArray(id) && id.length > 1) {\r\n\t\t\t\tid.forEach((taskId) => processCallback(taskId));\r\n\t\t\t} else {\r\n\t\t\t\tprocessCallback(id);\r\n\t\t\t}\r\n\t\t\tthat.finalizeUpdate();\r\n\t\t\tthis.setGanttMode(mode);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// xml response\r\n\t\tconst top = ajax.xmltop(\"data\", xml.xmlDoc); // fix incorrect content type in IE\r\n\t\tif (!top) {\r\n\t\t\treturn this.cleanUpdate(id);\r\n\t\t}\r\n\t\tconst atag = ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) {\r\n\t\t\treturn this.cleanUpdate(id);\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < atag.length; i++) {\r\n\t\t\tconst btag = atag[i];\r\n\t\t\tconst action = btag.getAttribute(\"type\");\r\n\t\t\tconst sid = btag.getAttribute(\"sid\");\r\n\t\t\tconst tid = btag.getAttribute(\"tid\");\r\n\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, btag, mode);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t}\r\n\r\n\tcleanUpdate(id: any[]) {\r\n\t\tif (id) {\r\n\t\t\tfor (let i = 0; i < id.length; i++) {\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfinalizeUpdate() {\r\n\t\tif (this._waitMode) {\r\n\t\t\tthis._waitMode--;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\", []);\r\n\t\tif (!this.updatedRows.length) {\r\n\t\t\tthis.callEvent(\"onFullSync\", []);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @desc: initializes data-processor\r\n\t * @param: gantt - dhtmlxGantt object to attach this data-processor to\r\n\t * @type: public\r\n\t */\r\n\tinit(gantt: any) {\r\n\t\tif (this._initialized) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.$gantt = gantt;\r\n\t\tif (this.$gantt._dp_init) {\r\n\t\t\tthis.$gantt._dp_init(this);\r\n\t\t}\r\n\r\n\t\tthis._setDefaultTransactionMode();\r\n\r\n\t\tthis.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tdelete_confirmation:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tthis._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\t\textendGantt(this.$gantt, this);\r\n\t\tconst dataProcessorEvents = new DataProcessorEvents(this.$gantt, this);\r\n\t\tdataProcessorEvents.attach();\r\n\t\tthis.attachEvent(\"onDestroy\", function() {\r\n\t\t\tdelete this.setGanttMode;\r\n\t\t\tdelete this._getRowData;\r\n\r\n\t\t\tdelete this.$gantt._dp;\r\n\t\t\tdelete this.$gantt._change_id;\r\n\t\t\tdelete this.$gantt._row_style;\r\n\t\t\tdelete this.$gantt._delete_task;\r\n\t\t\tdelete this.$gantt._sendTaskOrder;\r\n\t\t\tdelete this.$gantt;\r\n\r\n\t\t\tdataProcessorEvents.detach();\r\n\t\t});\r\n\t\tthis.$gantt.callEvent(\"onDataProcessorReady\", [this]);\r\n\t\tthis._initialized = true;\r\n\t}\r\n\r\n\tsetOnAfterUpdate(handler) {\r\n\t\tthis.attachEvent(\"onAfterUpdate\", handler);\r\n\t}\r\n\r\n\tsetOnBeforeUpdateHandler(handler) {\r\n\t\tthis.attachEvent(\"onBeforeDataSending\", handler);\r\n\t}\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval time interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._needUpdate = false;\r\n\r\n\t\tthis._updateBusy = false;\r\n\r\n\t\tthis.attachEvent(\"onAfterUpdate\", this.afterAutoUpdate); // arguments sid, action, tid, xml_node;\r\n\r\n\t\tthis.attachEvent(\"onFullSync\", this.fullSync);\r\n\r\n\t\tsetInterval(() => {\r\n\t\t\tthis.loadUpdate();\r\n\t\t}, interval);\r\n\t}\r\n\r\n\t/* process updating request response\r\n\t\tif status == collision version is deprecated\r\n\t\tset flag for autoupdating immediately\r\n\t*/\r\n\tafterAutoUpdate(sid, action, tid, xml_node) { // tslint:disable-line\r\n\t\tif (action === \"collision\") {\r\n\t\t\tthis._needUpdate = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync() {\r\n\t\tif (this._needUpdate) {\r\n\t\t\tthis._needUpdate = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates(url, callback) {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tif (this._updateBusy) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tthis._updateBusy = true;\r\n\t\t}\r\n\r\n\t\tajax.get(url, callback);\r\n\r\n\t}\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate() {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tconst version = this.$gantt.getUserData(0, \"version\", this._ganttMode);\r\n\t\tlet url = this.serverProcessor + ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\", \"\");\r\n\t\tthis.getUpdates(url, (xml) => {\r\n\t\t\tconst vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tthis.$gantt.setUserData(0, \"version\", this._getXmlNodeValue(vers[0]), this._ganttMode);\r\n\r\n\t\t\tconst updates = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (updates.length) {\r\n\t\t\t\tthis._silent_mode = true;\r\n\r\n\t\t\t\tfor (let i = 0; i < updates.length; i++) {\r\n\t\t\t\t\tconst status = updates[i].getAttribute(\"status\");\r\n\t\t\t\t\tconst id = updates[i].getAttribute(\"id\");\r\n\t\t\t\t\tconst parent = updates[i].getAttribute(\"parent\");\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"insertCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"updated\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"updateCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\t\tthis.callEvent(\"deleteCallback\", [updates[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._silent_mode = false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._updateBusy = false;\r\n\t\t});\r\n\t}\r\n\r\n\tdestructor() {\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress = {}; // ?\r\n\t\tthis._invalid = {};\r\n\t\tthis._storage.clear();\r\n\t\tthis._storage = null;\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tdelete this._initialized;\r\n\t}\r\n\r\n\tsetGanttMode(mode) {\r\n\t\tif (mode === \"tasks\") {\r\n\t\t\tmode = \"task\";\r\n\t\t} else if (mode === \"links\") {\r\n\t\t\tmode = \"link\";\r\n\t\t}\r\n\r\n\t\tconst modes = this.modes || {};\r\n\t\tconst ganttMode = this.getGanttMode();\r\n\t\tif (ganttMode) {\r\n\t\t\tmodes[ganttMode] = {\r\n\t\t\t\t_in_progress : this._in_progress,\r\n\t\t\t\t_invalid: this._invalid,\r\n\t\t\t\t_storage: this._storage,\r\n\t\t\t\tupdatedRows : this.updatedRows\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tlet newState = modes[mode];\r\n\t\tif (!newState) {\r\n\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t_in_progress : {},\r\n\t\t\t\t_invalid : {},\r\n\t\t\t\t_storage : SimpleStorage.create(),\r\n\t\t\t\tupdatedRows : []\r\n\t\t\t};\r\n\t\t}\r\n\t\tthis._in_progress = newState._in_progress;\r\n\t\tthis._invalid = newState._invalid;\r\n\t\tthis._storage = newState._storage;\r\n\t\tthis.updatedRows = newState.updatedRows;\r\n\t\tthis.modes = modes;\r\n\t\tthis._ganttMode = mode;\r\n\t}\r\n\tgetGanttMode():string {\r\n\t\treturn this._ganttMode;\r\n\t}\r\n\r\n\tstoreItem(item) {\r\n\t\tthis._storage.storeItem(item);\r\n\t}\r\n\r\n\turl(url: string) {\r\n\t\tthis.serverProcessor = this._serverProcessor = url;\r\n\t}\r\n\r\n\tprotected _beforeSendData(data: any, rowId: any) {\r\n\t\tif (!this.callEvent(\"onBeforeUpdate\", [rowId, this.getState(rowId), data])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis._sendData(data, rowId);\r\n\t}\r\n\r\n\tprotected _serializeAsJSON(data: any) {\r\n\t\tif (typeof data === \"string\") {\r\n\t\t\treturn data;\r\n\t\t}\r\n\r\n\t\tconst copy = utils.copy(data);\r\n\t\tif (this._tMode === \"REST-JSON\") {\r\n\t\t\tdelete copy.id;\r\n\t\t\tdelete copy[this.action_param];\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(copy);\r\n\t}\r\n\r\n\tprotected _applyPayload(url: string) {\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\t\tif (this._payload) {\r\n\t\t\tfor (const key in this._payload) {\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\t// GET/POST/JSON modes of the dataProcessor didn't send the whole data items in 'delete' requests\r\n\t// clear extra info from the data in order not to change the request format\r\n\tprotected _cleanupArgumentsBeforeSend(dataToSend: any) {\r\n\t\tlet processedData;\r\n\t\tif(dataToSend[this.action_param] === undefined){// hash of updated items, and not an individual item\r\n\t\t\tprocessedData = {};\r\n\t\t\tfor(const i in dataToSend) {\r\n\t\t\t\tprocessedData[i] = this._cleanupArgumentsBeforeSend(dataToSend[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tprocessedData = this._cleanupItemBeforeSend(dataToSend);\r\n\t\t}\r\n\t\treturn processedData;\r\n\t}\r\n\tprotected _cleanupItemBeforeSend(updatedItem: any) {\r\n\t\tlet output = null;\r\n\t\tif(updatedItem){\r\n\t\t\tif(updatedItem[this.action_param] === \"deleted\"){\r\n\t\t\t\toutput = {};\r\n\t\t\t\toutput.id = updatedItem.id;\r\n\t\t\t\toutput[this.action_param] = updatedItem[this.action_param];\r\n\t\t\t}else{\r\n\t\t\t\toutput = updatedItem;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tprotected _sendData(dataToSend: any, rowId?: any) {\r\n\t\tif (!dataToSend) {\r\n\t\t\treturn; // nothing to send\r\n\t\t}\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\", rowId ? [rowId, this.getState(rowId), dataToSend] : [null, null, dataToSend])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (rowId) {\r\n\t\t\tthis._in_progress[rowId] = (new Date()).valueOf();\r\n\t\t}\r\n\r\n\t\tconst ajax = this.$gantt.ajax;\r\n\r\n\t\tif (this._tMode === \"CUSTOM\") {\r\n\t\t\tconst taskState = this.getState(rowId);\r\n\t\t\tconst taskAction = this.getActionByState(taskState);\r\n\t\t\tconst ganttMode = this.getGanttMode();\r\n\t\t\tconst _onResolvedCreateUpdate = (tag) => {\r\n\t\t\t\tlet action = taskState || \"updated\";\r\n\t\t\t\tlet sid = rowId;\r\n\t\t\t\tlet tid = rowId;\r\n\r\n\t\t\t\tif (tag) {\r\n\t\t\t\t\taction = tag.action || taskState;\r\n\t\t\t\t\tsid = tag.sid || sid;\r\n\t\t\t\t\ttid = tag.id || tag.tid || tid;\r\n\t\t\t\t}\r\n\t\t\t\tthis.afterUpdateCallback(sid, tid, action, tag, ganttMode);\r\n\t\t\t};\r\n\r\n\t\t\tlet actionPromise;\r\n\t\t\tif (this._router instanceof Function) {\r\n\t\t\t\tif(this._routerParametersFormat === \"object\"){\r\n\t\t\t\t\tconst obj = {\r\n\t\t\t\t\t\tentity: ganttMode,\r\n\t\t\t\t\t\taction: taskAction,\r\n\t\t\t\t\t\tdata: dataToSend,\r\n\t\t\t\t\t\tid: rowId\r\n\t\t\t\t\t};\r\n\t\t\t\t\tactionPromise = this._router(obj);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tactionPromise = this._router(ganttMode, taskAction, dataToSend, rowId);\r\n\t\t\t\t}\r\n\t\t\t} else if (this._router[ganttMode] instanceof Function) {\r\n\t\t\t\tactionPromise = this._router[ganttMode](taskAction, dataToSend, rowId);\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst errorMsgStart = \"Incorrect configuration of gantt.createDataProcessor\";\r\n\t\t\t\tconst errorMsgEnd = `\r\nYou need to either add missing properties to the dataProcessor router object or to use a router function.\r\nSee https://docs.dhtmlx.com/gantt/desktop__server_side.html#customrouting and https://docs.dhtmlx.com/gantt/api__gantt_createdataprocessor.html for details.`;\r\n\r\n\t\t\t\tif(!this._router[ganttMode]){\r\n\t\t\t\t\tthrow new Error(`${errorMsgStart}: router for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t}\r\n\t\t\t\tswitch (taskState) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tif(!this._router[ganttMode].create){\r\n\t\t\t\t\t\t\tthrow new Error(`${errorMsgStart}: **create** action for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].create(dataToSend);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tif(!this._router[ganttMode].delete){\r\n\t\t\t\t\t\t\tthrow new Error(`${errorMsgStart}: **delete** action for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].delete(rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(!this._router[ganttMode].update){\r\n\t\t\t\t\t\t\tthrow new Error(`${errorMsgStart}: **update**\" action for the **${ganttMode}** entity is not defined. ${errorMsgEnd}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tactionPromise = this._router[ganttMode].update(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(actionPromise){\r\n\t\t\t\t// neither promise nor {tid: newId} response object\r\n\t\t\t\tif(!actionPromise.then &&\r\n\t\t\t\t\t(actionPromise.id === undefined && actionPromise.tid === undefined && actionPromise.action === undefined)){\r\n\t\t\t\t\tthrow new Error(\"Incorrect router return value. A Promise or a response object is expected\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(actionPromise.then){\r\n\t\t\t\t\tactionPromise.then(_onResolvedCreateUpdate).catch((error) => {\r\n\t\t\t\t\t\tif(error && error.action){\r\n\t\t\t\t\t\t\t_onResolvedCreateUpdate(error);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_onResolvedCreateUpdate({ action: \"error\", value: error});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// custom method may return a response object in case of sync action\r\n\t\t\t\t\t_onResolvedCreateUpdate(actionPromise);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t_onResolvedCreateUpdate(null);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet queryParams: any;\r\n\t\tqueryParams = {\r\n\t\t\tcallback: (xml) => {\r\n\t\t\t\tconst ids = [];\r\n\r\n\t\t\t\tif (rowId) {\r\n\t\t\t\t\tids.push(rowId);\r\n\t\t\t\t} else if (dataToSend) {\r\n\t\t\t\t\tfor (const key in dataToSend) {\r\n\t\t\t\t\t\tids.push(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this.afterUpdate(this, xml, ids);\r\n\t\t\t},\r\n\t\t\theaders: this._headers\r\n\t\t};\r\n\r\n\t\tconst dhxVersion = \"dhx_version=\" + this.$gantt.getUserData(0, \"version\", this._ganttMode);\r\n\t\tconst urlParams = this.serverProcessor + (this._user ? (ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, dhxVersion].join(\"&\")) : \"\");\r\n\t\tlet url: any = this._applyPayload(urlParams);\r\n\t\tlet data;\r\n\r\n\t\tswitch (this._tMode) {\r\n\t\t\tcase \"GET\":\r\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\r\n\t\t\t\tqueryParams.url = url + ajax.urlSeparator(url) + this.serialize(data, rowId);\r\n\t\t\t\tqueryParams.method = \"GET\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"POST\":\r\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = this.serialize(data, rowId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"JSON\":\r\n\t\t\t\tdata = {};\r\n\t\t\t\tconst preprocessedData = this._cleanupItemBeforeSend(dataToSend);\r\n\t\t\t\tfor (const key in preprocessedData) {\r\n\t\t\t\t\tif (key === this.action_param || key === \"id\" || key === \"gr_id\") {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata[key] = preprocessedData[key];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tqueryParams.url = url;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: dataToSend[this.action_param],\r\n\t\t\t\t\tdata\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"REST\":\r\n\t\t\tcase \"REST-JSON\":\r\n\t\t\t\turl = urlParams.replace(/(&|\\?)editing=true/, \"\");\r\n\t\t\t\tdata = \"\";\r\n\r\n\t\t\t\tswitch (this.getState(rowId)) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tqueryParams.method = \"DELETE\";\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tqueryParams.method = \"PUT\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\r\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tqueryParams.url = this._applyPayload(url);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis._waitMode++;\r\n\t\treturn ajax.query(queryParams);\r\n\t}\r\n\r\n\tprotected _forEachUpdatedRow(code: any) {\r\n\t\tconst updatedRows = this.updatedRows.slice();\r\n\t\tfor (let i = 0; i < updatedRows.length; i++) {\r\n\t\t\tconst rowId = updatedRows[i];\r\n\t\t\tif (this.$gantt.getUserData(rowId, this.action_param, this._ganttMode)) {\r\n\t\t\t\tcode.call(this, rowId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _setDefaultTransactionMode() {\r\n\t\tif (this.serverProcessor) {\r\n\t\t\tthis.setTransactionMode(\"POST\", true);\r\n\t\t\tthis.serverProcessor += (this.serverProcessor.indexOf(\"?\") !== -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\t\tthis._serverProcessor = this.serverProcessor;\r\n\t\t}\r\n\t}\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\tprotected _getXmlNodeValue(node) {\r\n\t\tif (node.firstChild) {\r\n\t\t\treturn node.firstChild.nodeValue;\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tprotected _getAllData() {\r\n\t\tconst out = {};\r\n\t\tlet hasOne = false;\r\n\r\n\t\tthis._forEachUpdatedRow(function(id) {\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\", [id, this.getState(id), row])) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tout[id] = row;\r\n\t\t\thasOne = true;\r\n\t\t\tthis._in_progress[id] = (new Date()).valueOf();\r\n\t\t});\r\n\r\n\t\treturn hasOne ? out : null;\r\n\t}\r\n\r\n\tprotected _prepareDate(value: Date) : string {\r\n\t\treturn this.$gantt.defined(this.$gantt.templates.xml_format) ? this.$gantt.templates.xml_format(value) : this.$gantt.templates.format_date(value);\r\n\t}\r\n\r\n\tprotected _prepareArray(value: any[], traversedObjects: object[]) : any[] {\r\n\t\ttraversedObjects.push(value);\r\n\r\n\t\treturn value.map((item) => {\r\n\t\t\tif(helpers.isDate(item)){\r\n\t\t\t\treturn this._prepareDate(item);\r\n\t\t\t} else if (Array.isArray(item) && !helpers.arrayIncludes(traversedObjects, item)){\r\n\t\t\t\treturn this._prepareArray(item, traversedObjects);\r\n\t\t\t} else if (item && typeof item === \"object\" && !helpers.arrayIncludes(traversedObjects, item)) {\r\n\t\t\t\treturn this._prepareObject(item, traversedObjects);\r\n\t\t\t} else {\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprotected _prepareObject(rawItem: any, traversedObjects: object[]) : any {\r\n\t\tconst processedItem = {};\r\n\t\ttraversedObjects.push(rawItem);\r\n\r\n\t\tfor (const key in rawItem) {\r\n\t\t\tif (key.substr(0, 1) === \"$\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tconst value = rawItem[key];\r\n\t\t\tif (helpers.isDate(value)) {\r\n\t\t\t\tprocessedItem[key] = this._prepareDate(value);\r\n\t\t\t} else if(value === null) {\r\n\t\t\t\tprocessedItem[key] = \"\";\r\n\t\t\t} else if (Array.isArray(value) && !helpers.arrayIncludes(traversedObjects, value)){\r\n\t\t\t\tprocessedItem[key] = this._prepareArray(value, traversedObjects);\r\n\t\t\t} else if (value && typeof value === \"object\" && !helpers.arrayIncludes(traversedObjects, value)) {\r\n\t\t\t\tprocessedItem[key] = this._prepareObject(value, traversedObjects);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedItem[key] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn processedItem;\r\n\t}\r\n\r\n\tprotected _prepareDataItem(rawItem: any): any {\r\n\t\tconst processedItem = this._prepareObject(rawItem, []);\r\n\r\n\t\tprocessedItem[this.action_param] = this.$gantt.getUserData(rawItem.id, this.action_param, this._ganttMode);\r\n\t\treturn processedItem;\r\n\t}\r\n\r\n\tprotected getStoredItem(id){\r\n\t\treturn this._storage.getStoredItem(id);\r\n\t}\r\n\r\n\tprotected _getRowData(id) {\r\n\t\tlet dataItem;\r\n\t\tconst gantt = this.$gantt;\r\n\t\tif (this.getGanttMode() === \"task\") {\r\n\t\t\tif(gantt.isTaskExists(id)){\r\n\t\t\t\tdataItem =this.$gantt.getTask(id);\r\n\t\t\t}\r\n\t\t} else if (this.getGanttMode() === \"assignment\") {\r\n\t\t\tif(this.$gantt.$data.assignmentsStore.exists(id)){\r\n\t\t\t\tdataItem =this.$gantt.$data.assignmentsStore.getItem(id);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(gantt.isLinkExists(id)){\r\n\t\t\t\tdataItem =this.$gantt.getLink(id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!dataItem) {\r\n\t\t\tdataItem = this.getStoredItem(id);\r\n\t\t}\r\n\r\n\t\tif (!dataItem) {\r\n\t\t\tdataItem = { id };\r\n\t\t}\r\n\r\n\t\treturn this._prepareDataItem(dataItem);\r\n\t}\r\n}","var DataProcessor = require(\"./data_processor\");\n\nmodule.exports = {\n  DEPRECATED_api: function DEPRECATED_api(server) {\n    return new DataProcessor.DataProcessor(server);\n  },\n  createDataProcessor: DataProcessor.createDataProcessor,\n  getDataProcessorModes: DataProcessor.getAvailableModes\n};","var isHeadless = require(\"../../utils/is_headless\");\n\nvar storeRenderCreator = function storeRenderCreator(name, gantt) {\n  var store = gantt.getDatastore(name);\n  var itemRepainter = {\n    renderItem: function renderItem(id, renderer) {\n      var renders = renderer.getLayers();\n      var item = store.getItem(id);\n\n      if (item && store.isVisible(id)) {\n        for (var i = 0; i < renders.length; i++) {\n          renders[i].render_item(item);\n        }\n      }\n    },\n    renderItems: function renderItems(renderer) {\n      var renderers = renderer.getLayers();\n\n      for (var i = 0; i < renderers.length; i++) {\n        renderers[i].clear();\n      }\n\n      var allData = null;\n      var loadedRanges = {};\n\n      for (var _i = 0; _i < renderers.length; _i++) {\n        var layer = renderers[_i];\n        var layerData = void 0;\n\n        if (layer.get_visible_range) {\n          var range = layer.get_visible_range(store);\n\n          if (range.start !== undefined && range.end !== undefined) {\n            var key = range.start + \" - \" + range.end;\n\n            if (loadedRanges[key]) {\n              layerData = loadedRanges[key];\n            } else {\n              layerData = store.getIndexRange(range.start, range.end);\n              loadedRanges[key] = layerData;\n            }\n          } else if (range.ids !== undefined) {\n            layerData = range.ids.map(function (id) {\n              return store.getItem(id);\n            });\n          } else {\n            throw new Error(\"Invalid range returned from 'getVisibleRange' of the layer\");\n          }\n        } else {\n          if (!allData) {\n            allData = store.getVisibleItems();\n          }\n\n          layerData = allData;\n        }\n\n        if (layer.prepare_data) {\n          // GS-1605. Highlight timeline cells below tasks and in an empty chart\n          layer.prepare_data(layerData);\n        }\n\n        renderers[_i].render_items(layerData);\n      }\n    },\n    updateItems: function updateItems(layer) {\n      if (layer.update_items) {\n        var data;\n\n        if (layer.get_visible_range) {\n          var range = layer.get_visible_range(store);\n\n          if (range.start !== undefined && range.end !== undefined) {\n            data = store.getIndexRange(range.start, range.end);\n          } else if (range.ids !== undefined) {\n            data = range.ids.map(function (id) {\n              return store.getItem(id);\n            });\n          } else {\n            throw new Error(\"Invalid range returned from 'getVisibleRange' of the layer\");\n          }\n        } else {\n          data = store.getVisibleItems();\n        }\n\n        if (layer.prepare_data) {\n          // GS-1605. Highlight timeline cells below tasks and in an empty chart\n          layer.prepare_data(data, layer);\n        }\n\n        layer.update_items(data);\n      }\n    }\n  };\n  store.attachEvent(\"onStoreUpdated\", function (id, item, action) {\n    if (isHeadless(gantt)) {\n      return true;\n    }\n\n    var renderer = gantt.$services.getService(\"layers\").getDataRender(name);\n\n    if (renderer) {\n      renderer.onUpdateRequest = function (layer) {\n        itemRepainter.updateItems(layer);\n      };\n    }\n  });\n\n  function skipRepaint(gantt) {\n    var state = gantt.$services.getService(\"state\");\n\n    if (state.getState(\"batchUpdate\").batch_update) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  store.attachEvent(\"onStoreUpdated\", function (id, item, action) {\n    if (skipRepaint(gantt)) {\n      return;\n    }\n\n    if (!id || action == \"move\" || action == \"delete\") {\n      store.callEvent(\"onBeforeRefreshAll\", []);\n      store.callEvent(\"onAfterRefreshAll\", []);\n    } else {\n      store.callEvent(\"onBeforeRefreshItem\", [item.id]);\n      store.callEvent(\"onAfterRefreshItem\", [item.id]);\n    }\n  });\n  store.attachEvent(\"onAfterRefreshAll\", function () {\n    if (isHeadless(gantt)) {\n      return true;\n    }\n\n    var renderer = gantt.$services.getService(\"layers\").getDataRender(name);\n\n    if (renderer && !skipRepaint(gantt)) {\n      itemRepainter.renderItems(renderer);\n    }\n  });\n  store.attachEvent(\"onAfterRefreshItem\", function (id) {\n    if (isHeadless(gantt)) {\n      return true;\n    }\n\n    var renderer = gantt.$services.getService(\"layers\").getDataRender(name);\n\n    if (renderer) {\n      itemRepainter.renderItem(id, renderer);\n    }\n  }); // TODO: probably can be done more in a more efficient way\n\n  store.attachEvent(\"onItemOpen\", function () {\n    if (isHeadless(gantt)) {\n      return true;\n    }\n\n    gantt.render();\n  });\n  store.attachEvent(\"onItemClose\", function () {\n    if (isHeadless(gantt)) {\n      return true;\n    }\n\n    gantt.render();\n  });\n\n  function refreshId(renders, oldId, newId, item) {\n    for (var i = 0; i < renders.length; i++) {\n      renders[i].change_id(oldId, newId);\n    }\n  }\n\n  store.attachEvent(\"onIdChange\", function (oldId, newId) {\n    if (isHeadless(gantt)) {\n      return true;\n    } // in case of linked datastores (tasks <-> links), id change should recalculate something in linked datastore before any repaint\n    // use onBeforeIdChange for this hook.\n    // TODO: use something more reasonable instead\n\n\n    store.callEvent(\"onBeforeIdChange\", [oldId, newId]);\n\n    if (skipRepaint(gantt)) {\n      return;\n    }\n\n    if (!store.isSilent()) {\n      var renderer = gantt.$services.getService(\"layers\").getDataRender(name);\n\n      if (renderer) {\n        // missing check for renderer GS-1814\n        refreshId(renderer.getLayers(), oldId, newId, store.getItem(newId));\n        itemRepainter.renderItem(newId, renderer);\n      } else {\n        // GS-1814 repaint ui to apply new id when the datastore don't have own renderer\n        gantt.render();\n      }\n    }\n  });\n};\n\nmodule.exports = {\n  bindDataStore: storeRenderCreator\n};","function createDataStoreSelectMixin(store) {\n  var selectedId = null;\n  var deleteItem = store._removeItemInner;\n\n  function _unselect(id) {\n    selectedId = null;\n    this.callEvent(\"onAfterUnselect\", [id]);\n  }\n\n  store._removeItemInner = function (id) {\n    if (selectedId == id) {\n      _unselect.call(this, id);\n    }\n\n    if (selectedId && this.eachItem) {\n      this.eachItem(function (subItem) {\n        if (subItem.id == selectedId) {\n          _unselect.call(this, subItem.id);\n        }\n      }, id);\n    }\n\n    return deleteItem.apply(this, arguments);\n  };\n\n  store.attachEvent(\"onIdChange\", function (oldId, newId) {\n    if (store.getSelectedId() == oldId) {\n      store.silent(function () {\n        store.unselect(oldId);\n        store.select(newId);\n      });\n    }\n  });\n  return {\n    select: function select(id) {\n      if (id) {\n        if (selectedId == id) return selectedId;\n\n        if (!this._skip_refresh) {\n          if (!this.callEvent(\"onBeforeSelect\", [id])) {\n            return false;\n          }\n        }\n\n        this.unselect();\n        selectedId = id;\n\n        if (!this._skip_refresh) {\n          this.refresh(id);\n          this.callEvent(\"onAfterSelect\", [id]);\n        }\n      }\n\n      return selectedId;\n    },\n    getSelectedId: function getSelectedId() {\n      return selectedId;\n    },\n    isSelected: function isSelected(id) {\n      return id == selectedId;\n    },\n    unselect: function unselect(id) {\n      var id = id || selectedId;\n      if (!id) return;\n      selectedId = null;\n\n      if (!this._skip_refresh) {\n        this.refresh(id);\n\n        _unselect.call(this, id);\n      }\n    }\n  };\n}\n\nmodule.exports = createDataStoreSelectMixin;","var utils = require(\"../../utils/utils\");\n\nvar createLinksStoreFacade = function createLinksStoreFacade() {\n  return {\n    getLinkCount: function getLinkCount() {\n      return this.$data.linksStore.count();\n    },\n    getLink: function getLink(id) {\n      return this.$data.linksStore.getItem(id);\n    },\n    getLinks: function getLinks() {\n      return this.$data.linksStore.getItems();\n    },\n    isLinkExists: function isLinkExists(id) {\n      return this.$data.linksStore.exists(id);\n    },\n    addLink: function addLink(link) {\n      var newLink = this.$data.linksStore.addItem(link); // GS-1222. Update fullOrder otherwise the link won't appear after render\n\n      if (this.$data.linksStore.isSilent()) {\n        this.$data.linksStore.fullOrder.push(newLink);\n      }\n\n      return newLink;\n    },\n    updateLink: function updateLink(id, data) {\n      if (!utils.defined(data)) data = this.getLink(id);\n      this.$data.linksStore.updateItem(id, data);\n    },\n    deleteLink: function deleteLink(id) {\n      return this.$data.linksStore.removeItem(id);\n    },\n    changeLinkId: function changeLinkId(oldid, newid) {\n      return this.$data.linksStore.changeId(oldid, newid);\n    }\n  };\n};\n\nmodule.exports = createLinksStoreFacade;","var utils = require(\"../../utils/utils\");\n\nvar _require = require(\"../../utils/helpers\"),\n    replaceValidZeroId = _require.replaceValidZeroId;\n\nvar createTasksDatastoreFacade = function createTasksDatastoreFacade() {\n  return {\n    getTask: function getTask(id) {\n      id = replaceValidZeroId(id, this.config.root_id);\n      this.assert(id, \"Invalid argument for gantt.getTask\");\n      var task = this.$data.tasksStore.getItem(id);\n      this.assert(task, \"Task not found id=\" + id);\n      return task;\n    },\n    getTaskByTime: function getTaskByTime(from, to) {\n      var p = this.$data.tasksStore.getItems();\n      var res = [];\n\n      if (!(from || to)) {\n        res = p;\n      } else {\n        from = +from || -Infinity;\n        to = +to || Infinity;\n\n        for (var t = 0; t < p.length; t++) {\n          var task = p[t];\n          if (+task.start_date < to && +task.end_date > from) res.push(task);\n        }\n      }\n\n      return res;\n    },\n    isTaskExists: function isTaskExists(id) {\n      if (!this.$data || !this.$data.tasksStore) {\n        return false;\n      }\n\n      return this.$data.tasksStore.exists(id);\n    },\n    updateTask: function updateTask(id, item) {\n      if (!utils.defined(item)) item = this.getTask(id);\n      this.$data.tasksStore.updateItem(id, item);\n      if (this.isTaskExists(id)) this.refreshTask(id);\n    },\n    addTask: function addTask(item, parent, index) {\n      if (!utils.defined(item.id)) item.id = utils.uid(); //GS-761: assert unique ID\n\n      if (this.isTaskExists(item.id)) {\n        var task = this.getTask(item.id);\n\n        if (task.$index != item.$index) {\n          // Someone may try to mistakenly add a task with the same ID, and most likely\n          // use the string format for the dates. Gantt shouldn't break in this scenario\n          if (item.start_date && typeof item.start_date === \"string\") {\n            item.start_date = this.date.parseDate(item.start_date, \"parse_date\");\n          }\n\n          if (item.end_date && typeof item.end_date === \"string\") {\n            item.end_date = this.date.parseDate(item.end_date, \"parse_date\");\n          }\n\n          return this.$data.tasksStore.updateItem(item.id, item);\n        }\n      }\n\n      if (!utils.defined(parent)) parent = this.getParent(item) || 0;\n      if (!this.isTaskExists(parent)) parent = this.config.root_id;\n      this.setParent(item, parent);\n      return this.$data.tasksStore.addItem(item, index, parent);\n    },\n    deleteTask: function deleteTask(id) {\n      id = replaceValidZeroId(id, this.config.root_id);\n      return this.$data.tasksStore.removeItem(id);\n    },\n    getTaskCount: function getTaskCount() {\n      return this.$data.tasksStore.count();\n    },\n    getVisibleTaskCount: function getVisibleTaskCount() {\n      return this.$data.tasksStore.countVisible();\n    },\n    getTaskIndex: function getTaskIndex(id) {\n      return this.$data.tasksStore.getBranchIndex(id);\n    },\n    getGlobalTaskIndex: function getGlobalTaskIndex(id) {\n      id = replaceValidZeroId(id, this.config.root_id);\n      this.assert(id, \"Invalid argument\");\n      return this.$data.tasksStore.getIndexById(id);\n    },\n    eachTask: function eachTask(code, parent, master) {\n      return this.$data.tasksStore.eachItem(utils.bind(code, master || this), parent);\n    },\n    eachParent: function eachParent(callback, startTask, master) {\n      return this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\n    },\n    changeTaskId: function changeTaskId(oldid, newid) {\n      this.$data.tasksStore.changeId(oldid, newid);\n      var task = this.$data.tasksStore.getItem(newid);\n      var links = [];\n\n      if (task.$source) {\n        links = links.concat(task.$source);\n      }\n\n      if (task.$target) {\n        links = links.concat(task.$target);\n      }\n\n      for (var i = 0; i < links.length; i++) {\n        var link = this.getLink(links[i]);\n\n        if (link.source == oldid) {\n          link.source = newid;\n        }\n\n        if (link.target == oldid) {\n          link.target = newid;\n        }\n      }\n    },\n    calculateTaskLevel: function calculateTaskLevel(item) {\n      return this.$data.tasksStore.calculateItemLevel(item);\n    },\n    getNext: function getNext(id) {\n      return this.$data.tasksStore.getNext(id);\n    },\n    getPrev: function getPrev(id) {\n      return this.$data.tasksStore.getPrev(id);\n    },\n    getParent: function getParent(id) {\n      return this.$data.tasksStore.getParent(id);\n    },\n    setParent: function setParent(task, new_pid, silent) {\n      return this.$data.tasksStore.setParent(task, new_pid, silent);\n    },\n    getSiblings: function getSiblings(id) {\n      return this.$data.tasksStore.getSiblings(id).slice();\n    },\n    getNextSibling: function getNextSibling(id) {\n      return this.$data.tasksStore.getNextSibling(id);\n    },\n    getPrevSibling: function getPrevSibling(id) {\n      return this.$data.tasksStore.getPrevSibling(id);\n    },\n    getTaskByIndex: function getTaskByIndex(index) {\n      var id = this.$data.tasksStore.getIdByIndex(index);\n\n      if (this.isTaskExists(id)) {\n        return this.getTask(id);\n      } else {\n        return null;\n      }\n    },\n    getChildren: function getChildren(id) {\n      if (!this.hasChild(id)) {\n        return [];\n      } else {\n        return this.$data.tasksStore.getChildren(id).slice();\n      }\n    },\n    hasChild: function hasChild(id) {\n      return this.$data.tasksStore.hasChild(id);\n    },\n    open: function open(id) {\n      this.$data.tasksStore.open(id);\n    },\n    close: function close(id) {\n      this.$data.tasksStore.close(id);\n    },\n    moveTask: function moveTask(sid, tindex, parent) {\n      parent = replaceValidZeroId(parent, this.config.root_id);\n      return this.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\n    },\n    sort: function sort(field, desc, parent, silent) {\n      var render = !silent; //4th argument to cancel redraw after sorting\n\n      this.$data.tasksStore.sort(field, desc, parent);\n      this.callEvent(\"onAfterSort\", [field, desc, parent]);\n\n      if (render) {\n        this.render();\n      }\n    }\n  };\n};\n\nmodule.exports = createTasksDatastoreFacade;","var utils = require(\"../../utils/utils\");\n\nvar createTasksFacade = require(\"./datastore_tasks\"),\n    createLinksFacade = require(\"./datastore_links\"),\n    DataStore = require(\"../datastore/datastore\"),\n    TreeDataStore = require(\"../datastore/treedatastore\"),\n    createDatastoreSelect = require(\"../datastore/select\");\n\nvar datastoreRender = require(\"../datastore/datastore_render\");\n\nvar isHeadless = require(\"../../utils/is_headless\");\n\nvar _require = require(\"../../utils/helpers\"),\n    replaceValidZeroId = _require.replaceValidZeroId; // TODO: remove workaround for mixup with es5 and ts imports\n\n\nif (DataStore[\"default\"]) {\n  DataStore = DataStore[\"default\"];\n}\n\nfunction getDatastores() {\n  var storeNames = this.$services.getService(\"datastores\");\n  var res = [];\n\n  for (var i = 0; i < storeNames.length; i++) {\n    var store = this.getDatastore(storeNames[i]);\n\n    if (!store.$destroyed) {\n      res.push(store);\n    }\n  }\n\n  return res;\n}\n\nvar createDatastoreFacade = function createDatastoreFacade() {\n  return {\n    createDatastore: function createDatastore(config) {\n      var $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\n\n      if (config) {\n        var self = this;\n\n        config.openInitially = function () {\n          return self.config.open_tree_initially;\n        };\n\n        config.copyOnParse = function () {\n          return self.config.deepcopy_on_parse;\n        };\n      }\n\n      var store = new $StoreType(config);\n      this.mixin(store, createDatastoreSelect(store));\n\n      if (config.name) {\n        var servicePrefix = \"datastore:\";\n        var storeAccessName = servicePrefix + config.name;\n        store.attachEvent(\"onDestroy\", function () {\n          this.$services.dropService(storeAccessName);\n          var storeList = this.$services.getService(\"datastores\");\n\n          for (var i = 0; i < storeList.length; i++) {\n            if (storeList[i] === config.name) {\n              storeList.splice(i, 1);\n              break;\n            }\n          }\n        }.bind(this));\n        this.$services.dropService(storeAccessName);\n        this.$services.setService(storeAccessName, function () {\n          return store;\n        });\n        var storeList = this.$services.getService(\"datastores\");\n\n        if (!storeList) {\n          storeList = [];\n          this.$services.setService(\"datastores\", function () {\n            return storeList;\n          });\n          storeList.push(config.name);\n        } else if (storeList.indexOf(config.name) < 0) {\n          storeList.push(config.name);\n        }\n\n        datastoreRender.bindDataStore(config.name, this);\n      }\n\n      return store;\n    },\n    getDatastore: function getDatastore(name) {\n      return this.$services.getService(\"datastore:\" + name);\n    },\n    _getDatastores: getDatastores,\n    refreshData: function refreshData() {\n      var scrollState;\n\n      if (!isHeadless(this)) {\n        scrollState = this.getScrollState();\n      }\n\n      this.callEvent(\"onBeforeDataRender\", []);\n      var stores = getDatastores.call(this);\n\n      for (var i = 0; i < stores.length; i++) {\n        stores[i].refresh();\n      }\n\n      if (this.config.preserve_scroll && !isHeadless(this) && (scrollState.x || scrollState.y)) {\n        this.scrollTo(scrollState.x, scrollState.y);\n      }\n\n      this.callEvent(\"onDataRender\", []);\n    },\n    isChildOf: function isChildOf(childId, parentId) {\n      return this.$data.tasksStore.isChildOf(childId, parentId);\n    },\n    refreshTask: function refreshTask(taskId, refresh_links) {\n      var task = this.getTask(taskId);\n      var self = this;\n\n      function refreshLinks() {\n        if (refresh_links !== undefined && !refresh_links) return;\n\n        for (var i = 0; i < task.$source.length; i++) {\n          self.refreshLink(task.$source[i]);\n        }\n\n        for (var i = 0; i < task.$target.length; i++) {\n          self.refreshLink(task.$target[i]);\n        }\n      }\n\n      if (task && this.isTaskVisible(taskId)) {\n        this.$data.tasksStore.refresh(taskId, !!this.getState(\"tasksDnd\").drag_id || refresh_links === false); // do quick refresh during drag and drop\n\n        refreshLinks();\n      } else if (this.isTaskExists(taskId) && this.isTaskExists(this.getParent(taskId)) && !this._bulk_dnd) {\n        this.refreshTask(this.getParent(taskId));\n        var hasSplitParent = false;\n        this.eachParent(function (parent) {\n          if (hasSplitParent || this.isSplitTask(parent)) {\n            hasSplitParent = true;\n          }\n        }, taskId);\n\n        if (hasSplitParent) {\n          refreshLinks();\n        }\n      }\n    },\n    refreshLink: function refreshLink(linkId) {\n      this.$data.linksStore.refresh(linkId, !!this.getState(\"tasksDnd\").drag_id); // do quick refresh during drag and drop\n    },\n    silent: function silent(code) {\n      var gantt = this;\n      gantt.$data.tasksStore.silent(function () {\n        gantt.$data.linksStore.silent(function () {\n          code();\n        });\n      });\n    },\n    clearAll: function clearAll() {\n      var stores = getDatastores.call(this); // clear all stores without invoking clearAll event\n      // in order to prevent calling handlers when only some stores are cleared\n\n      for (var i = 0; i < stores.length; i++) {\n        stores[i].silent(function () {\n          stores[i].clearAll();\n        });\n      } // run clearAll again to invoke events\n\n\n      for (var i = 0; i < stores.length; i++) {\n        stores[i].clearAll();\n      }\n\n      this._update_flags();\n\n      this.userdata = {};\n      this.callEvent(\"onClear\", []);\n      this.render();\n    },\n    _clear_data: function _clear_data() {\n      this.$data.tasksStore.clearAll();\n      this.$data.linksStore.clearAll();\n\n      this._update_flags();\n\n      this.userdata = {};\n    },\n    selectTask: function selectTask(id) {\n      var store = this.$data.tasksStore;\n      if (!this.config.select_task) return false;\n      id = replaceValidZeroId(id, this.config.root_id);\n\n      if (id) {\n        var oldSelectId = this.getSelectedId(); // Don't repaint the resource panel as the data didn't change\n\n        store._skipResourceRepaint = true;\n        store.select(id);\n        store._skipResourceRepaint = false; // GS-730. Split task is not included in the tree, \n        // so the datastore renderer will think that the task is not visible\n\n        if (oldSelectId && store.pull[oldSelectId].$split_subtask && oldSelectId != id) {\n          this.refreshTask(oldSelectId);\n        }\n\n        if (store.pull[id].$split_subtask && oldSelectId != id) {\n          // GS-1850. Do not repaint split task after double click\n          this.refreshTask(id);\n        }\n      }\n\n      return store.getSelectedId();\n    },\n    unselectTask: function unselectTask(id) {\n      var store = this.$data.tasksStore;\n      store.unselect(id); // GS-730. Split task is not included in the tree, \n      // so the datastore renderer will think that the task is not visible\n\n      if (id && store.pull[id].$split_subtask) {\n        this.refreshTask(id);\n      }\n    },\n    isSelectedTask: function isSelectedTask(id) {\n      return this.$data.tasksStore.isSelected(id);\n    },\n    getSelectedId: function getSelectedId() {\n      return this.$data.tasksStore.getSelectedId();\n    }\n  };\n};\n\nfunction createFacade() {\n  var res = utils.mixin({}, createDatastoreFacade());\n  utils.mixin(res, createTasksFacade());\n  utils.mixin(res, createLinksFacade());\n  return res;\n}\n\nmodule.exports = {\n  create: createFacade\n};","var utils = require(\"../../utils/utils\");\n\nvar facadeFactory = require(\"./../facades/datastore\");\n\nvar calculateScaleRange = require(\"../gantt_data_range\");\n\nvar isPlaceholderTask = require(\"../../utils/placeholder_task\");\n\nfunction initDataStores(gantt) {\n  var facade = facadeFactory.create();\n  utils.mixin(gantt, facade);\n  var tasksStore = gantt.createDatastore({\n    name: \"task\",\n    type: \"treeDatastore\",\n    rootId: function rootId() {\n      return gantt.config.root_id;\n    },\n    initItem: utils.bind(_init_task, gantt),\n    getConfig: function getConfig() {\n      return gantt.config;\n    }\n  });\n  var linksStore = gantt.createDatastore({\n    name: \"link\",\n    initItem: utils.bind(_init_link, gantt)\n  });\n  gantt.attachEvent(\"onDestroy\", function () {\n    tasksStore.destructor();\n    linksStore.destructor();\n  });\n  gantt.attachEvent(\"onLinkValidation\", function (link) {\n    if (gantt.isLinkExists(link.id) || link.id === \"predecessor_generated\") {\n      // link was already added into gantt\n      return true;\n    }\n\n    var source = gantt.getTask(link.source);\n    var taskLinks = source.$source;\n\n    for (var i = 0; i < taskLinks.length; i++) {\n      var existingLink = gantt.getLink(taskLinks[i]);\n      var sourceMatch = link.source == existingLink.source;\n      var targetMatch = link.target == existingLink.target;\n      var typeMatch = link.type == existingLink.type; // prevent creating duplicated links from the UI\n\n      if (sourceMatch && targetMatch && typeMatch) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n  tasksStore.attachEvent(\"onBeforeRefreshAll\", function () {\n    // GS-2170 do not recalculate indexes and dates as the event will be called later in the onStoreUpdate event\n    if (tasksStore._skipTaskRecalculation) {\n      return;\n    }\n\n    var order = tasksStore.getVisibleItems();\n\n    for (var i = 0; i < order.length; i++) {\n      var item = order[i];\n      item.$index = i;\n      item.$local_index = gantt.getTaskIndex(item.id);\n      gantt.resetProjectDates(item);\n    }\n  });\n  tasksStore.attachEvent(\"onFilterItem\", function (id, task) {\n    if (gantt.config.show_tasks_outside_timescale) {\n      return true;\n    }\n\n    var min = null,\n        max = null;\n\n    if (gantt.config.start_date && gantt.config.end_date) {\n      if (gantt._isAllowedUnscheduledTask(task)) return true;\n      min = gantt.config.start_date.valueOf();\n      max = gantt.config.end_date.valueOf();\n      if (+task.start_date > max || +task.end_date < +min) return false;\n    }\n\n    return true;\n  });\n  tasksStore.attachEvent(\"onIdChange\", function (oldId, newId) {\n    gantt._update_flags(oldId, newId);\n\n    var changedTask = gantt.getTask(newId);\n\n    if (!tasksStore.isSilent()) {\n      if (changedTask.$split_subtask || changedTask.rollup) {\n        gantt.eachParent(function (parent) {\n          gantt.refreshTask(parent.id);\n        }, newId);\n      }\n    }\n  });\n  tasksStore.attachEvent(\"onAfterUpdate\", function (id) {\n    gantt._update_parents(id);\n\n    if (gantt.getState(\"batchUpdate\").batch_update) {\n      return true;\n    }\n\n    var task = tasksStore.getItem(id);\n    if (!task.$source) task.$source = [];\n\n    for (var i = 0; i < task.$source.length; i++) {\n      linksStore.refresh(task.$source[i]);\n    }\n\n    if (!task.$target) task.$target = [];\n\n    for (var i = 0; i < task.$target.length; i++) {\n      linksStore.refresh(task.$target[i]);\n    }\n  });\n  tasksStore.attachEvent(\"onBeforeItemMove\", function (sid, parent, tindex) {\n    // GS-125. Don't allow users to move the placeholder task\n    if (isPlaceholderTask(sid, gantt, tasksStore)) {\n      //eslint-disable-next-line\n      console.log(\"The placeholder task cannot be moved to another position.\");\n      return false;\n    }\n\n    return true;\n  });\n  tasksStore.attachEvent(\"onAfterItemMove\", function (sid, parent, tindex) {\n    var source = gantt.getTask(sid);\n\n    if (this.getNextSibling(sid) !== null) {\n      source.$drop_target = this.getNextSibling(sid);\n    } else if (this.getPrevSibling(sid) !== null) {\n      source.$drop_target = \"next:\" + this.getPrevSibling(sid);\n    } else {\n      source.$drop_target = \"next:null\";\n    }\n  });\n  tasksStore.attachEvent(\"onStoreUpdated\", function (id, item, action) {\n    if (action == \"delete\") {\n      gantt._update_flags(id, null);\n    }\n\n    var state = gantt.$services.getService(\"state\");\n\n    if (state.getState(\"batchUpdate\").batch_update) {\n      return;\n    }\n\n    if (gantt.config.fit_tasks && action !== \"paint\") {\n      var oldState = gantt.getState();\n      calculateScaleRange(gantt);\n      var newState = gantt.getState(); //this._init_tasks_range();\n\n      if (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\n        gantt.render();\n        gantt.callEvent(\"onScaleAdjusted\", []);\n        return true;\n      }\n    }\n\n    if (action == \"add\" || action == \"move\" || action == \"delete\") {\n      if (gantt.$layout) {\n        // GS-2170. Do not recalculate the indexes and dates of other tasks in the\n        // onBeforeResize layout event, but do it later. If lightbox is opened, it will\n        // trigger the refreshData, so the indexes and dates will be recalculated there\n        if (this.$config.name == \"task\" && (action == \"add\" || action == \"delete\")) {\n          if (this._skipTaskRecalculation != \"lightbox\") {\n            this._skipTaskRecalculation = true;\n          }\n        }\n\n        gantt.$layout.resize();\n      }\n    } else if (!id) {\n      linksStore.refresh();\n    }\n  });\n  linksStore.attachEvent(\"onAfterAdd\", function (id, link) {\n    sync_link(link);\n  });\n  linksStore.attachEvent(\"onAfterUpdate\", function (id, link) {\n    sync_links();\n  });\n  linksStore.attachEvent(\"onAfterDelete\", function (id, link) {\n    sync_link_delete(link);\n  });\n  linksStore.attachEvent(\"onBeforeIdChange\", function (oldId, newId) {\n    sync_link_delete(gantt.mixin({\n      id: oldId\n    }, gantt.$data.linksStore.getItem(newId)));\n    sync_link(gantt.$data.linksStore.getItem(newId));\n  });\n\n  function checkLinkedTaskVisibility(taskId) {\n    var isVisible = gantt.isTaskVisible(taskId);\n\n    if (!isVisible && gantt.isTaskExists(taskId)) {\n      var parent = gantt.getParent(taskId);\n\n      if (gantt.isTaskExists(parent) && gantt.isTaskVisible(parent)) {\n        parent = gantt.getTask(parent);\n\n        if (gantt.isSplitTask(parent)) {\n          isVisible = true;\n        }\n      }\n    }\n\n    return isVisible;\n  }\n\n  linksStore.attachEvent(\"onFilterItem\", function (id, link) {\n    if (!gantt.config.show_links) {\n      return false;\n    }\n\n    var sourceVisible = checkLinkedTaskVisibility(link.source);\n    var targetVisible = checkLinkedTaskVisibility(link.target);\n    if (!(sourceVisible && targetVisible) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target))) return false;\n    return gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\n  });\n\n  (function () {\n    // delete all connected links after task is deleted\n    var treeHelper = require(\"../../utils/task_tree_helpers\");\n\n    var deletedLinks = {};\n    gantt.attachEvent(\"onBeforeTaskDelete\", function (id, item) {\n      deletedLinks[id] = treeHelper.getSubtreeLinks(gantt, id);\n      return true;\n    });\n    gantt.attachEvent(\"onAfterTaskDelete\", function (id, item) {\n      if (deletedLinks[id]) {\n        gantt.$data.linksStore.silent(function () {\n          for (var i in deletedLinks[id]) {\n            if (gantt.isLinkExists(i)) {\n              gantt.$data.linksStore.removeItem(i);\n            }\n\n            sync_link_delete(deletedLinks[id][i]);\n          }\n\n          deletedLinks[id] = null;\n        });\n      }\n    });\n  })();\n\n  gantt.attachEvent(\"onAfterLinkDelete\", function (id, link) {\n    gantt.refreshTask(link.source);\n    gantt.refreshTask(link.target);\n  });\n  gantt.attachEvent(\"onParse\", sync_links);\n  mapEvents({\n    source: linksStore,\n    target: gantt,\n    events: {\n      \"onItemLoading\": \"onLinkLoading\",\n      \"onBeforeAdd\": \"onBeforeLinkAdd\",\n      \"onAfterAdd\": \"onAfterLinkAdd\",\n      \"onBeforeUpdate\": \"onBeforeLinkUpdate\",\n      \"onAfterUpdate\": \"onAfterLinkUpdate\",\n      \"onBeforeDelete\": \"onBeforeLinkDelete\",\n      \"onAfterDelete\": \"onAfterLinkDelete\",\n      \"onIdChange\": \"onLinkIdChange\"\n    }\n  });\n  mapEvents({\n    source: tasksStore,\n    target: gantt,\n    events: {\n      \"onItemLoading\": \"onTaskLoading\",\n      \"onBeforeAdd\": \"onBeforeTaskAdd\",\n      \"onAfterAdd\": \"onAfterTaskAdd\",\n      \"onBeforeUpdate\": \"onBeforeTaskUpdate\",\n      \"onAfterUpdate\": \"onAfterTaskUpdate\",\n      \"onBeforeDelete\": \"onBeforeTaskDelete\",\n      \"onAfterDelete\": \"onAfterTaskDelete\",\n      \"onIdChange\": \"onTaskIdChange\",\n      \"onBeforeItemMove\": \"onBeforeTaskMove\",\n      \"onAfterItemMove\": \"onAfterTaskMove\",\n      \"onFilterItem\": \"onBeforeTaskDisplay\",\n      \"onItemOpen\": \"onTaskOpened\",\n      \"onItemClose\": \"onTaskClosed\",\n      \"onBeforeSelect\": \"onBeforeTaskSelected\",\n      \"onAfterSelect\": \"onTaskSelected\",\n      \"onAfterUnselect\": \"onTaskUnselected\"\n    }\n  });\n  gantt.$data = {\n    tasksStore: tasksStore,\n    linksStore: linksStore\n  };\n\n  function sync_link(link) {\n    if (gantt.isTaskExists(link.source)) {\n      var sourceTask = gantt.getTask(link.source);\n      sourceTask.$source = sourceTask.$source || [];\n      sourceTask.$source.push(link.id);\n    }\n\n    if (gantt.isTaskExists(link.target)) {\n      var targetTask = gantt.getTask(link.target);\n      targetTask.$target = targetTask.$target || [];\n      targetTask.$target.push(link.id);\n    }\n  }\n\n  function sync_link_delete(link) {\n    if (gantt.isTaskExists(link.source)) {\n      var sourceTask = gantt.getTask(link.source);\n\n      for (var i = 0; i < sourceTask.$source.length; i++) {\n        if (sourceTask.$source[i] == link.id) {\n          sourceTask.$source.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    if (gantt.isTaskExists(link.target)) {\n      var targetTask = gantt.getTask(link.target);\n\n      for (var i = 0; i < targetTask.$target.length; i++) {\n        if (targetTask.$target[i] == link.id) {\n          targetTask.$target.splice(i, 1);\n          break;\n        }\n      }\n    }\n  }\n\n  function sync_links() {\n    var task = null;\n    var tasks = gantt.$data.tasksStore.getItems();\n\n    for (var i = 0, len = tasks.length; i < len; i++) {\n      task = tasks[i];\n      task.$source = [];\n      task.$target = [];\n    }\n\n    var links = gantt.$data.linksStore.getItems();\n\n    for (var i = 0, len = links.length; i < len; i++) {\n      var link = links[i];\n      sync_link(link);\n    }\n  }\n\n  function mapEvents(conf) {\n    var mapFrom = conf.source;\n    var mapTo = conf.target;\n\n    for (var i in conf.events) {\n      (function (sourceEvent, targetEvent) {\n        mapFrom.attachEvent(sourceEvent, function () {\n          return mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\n        }, targetEvent);\n      })(i, conf.events[i]);\n    }\n  }\n\n  function _init_task(task) {\n    if (!this.defined(task.id)) task.id = this.uid();\n    if (task.start_date) task.start_date = gantt.date.parseDate(task.start_date, \"parse_date\");\n    if (task.end_date) task.end_date = gantt.date.parseDate(task.end_date, \"parse_date\");\n    var duration = null;\n\n    if (task.duration || task.duration === 0) {\n      task.duration = duration = task.duration * 1;\n    }\n\n    if (duration) {\n      if (task.start_date && !task.end_date) {\n        task.end_date = this.calculateEndDate(task);\n      } else if (!task.start_date && task.end_date) {\n        task.start_date = this.calculateEndDate({\n          start_date: task.end_date,\n          duration: -task.duration,\n          task: task\n        });\n      } //task.$calculate_duration = false;\n\n    }\n\n    task.progress = Number(task.progress) || 0;\n\n    if (this._isAllowedUnscheduledTask(task)) {\n      this._set_default_task_timing(task);\n    }\n\n    this._init_task_timing(task);\n\n    if (task.start_date && task.end_date) this.correctTaskWorkTime(task);\n    task.$source = [];\n    task.$target = [];\n    var originalTask = this.$data.tasksStore.getItem(task.id);\n\n    if (originalTask && !utils.defined(task.open)) {\n      // if a task with the same id is already in the gantt and the new object doesn't specify the `open` state -\n      // restore the `open` state we already have in the chart\n      task.$open = originalTask.$open;\n    }\n\n    if (task.parent === undefined) {\n      task.parent = this.config.root_id;\n    }\n\n    return task;\n  }\n\n  function _init_link(link) {\n    if (!this.defined(link.id)) link.id = this.uid();\n    return link;\n  }\n}\n\nmodule.exports = initDataStores;","(function (global, undefined) {\n  \"use strict\";\n\n  if (global.setImmediate) {\n    return;\n  }\n\n  var nextHandle = 1; // Spec says greater than zero\n\n  var tasksByHandle = {};\n  var currentlyRunningATask = false;\n  var doc = global.document;\n  var registerImmediate;\n\n  function setImmediate(callback) {\n    // Callback can either be a function or a string\n    if (typeof callback !== \"function\") {\n      callback = new Function(\"\" + callback);\n    } // Copy function arguments\n\n\n    var args = new Array(arguments.length - 1);\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 1];\n    } // Store and register the task\n\n\n    var task = {\n      callback: callback,\n      args: args\n    };\n    tasksByHandle[nextHandle] = task;\n    registerImmediate(nextHandle);\n    return nextHandle++;\n  }\n\n  function clearImmediate(handle) {\n    delete tasksByHandle[handle];\n  }\n\n  function run(task) {\n    var callback = task.callback;\n    var args = task.args;\n\n    switch (args.length) {\n      case 0:\n        callback();\n        break;\n\n      case 1:\n        callback(args[0]);\n        break;\n\n      case 2:\n        callback(args[0], args[1]);\n        break;\n\n      case 3:\n        callback(args[0], args[1], args[2]);\n        break;\n\n      default:\n        callback.apply(undefined, args);\n        break;\n    }\n  }\n\n  function runIfPresent(handle) {\n    // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n    // So if we're currently running a task, we'll need to delay this invocation.\n    if (currentlyRunningATask) {\n      // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n      // \"too much recursion\" error.\n      setTimeout(runIfPresent, 0, handle);\n    } else {\n      var task = tasksByHandle[handle];\n\n      if (task) {\n        currentlyRunningATask = true;\n\n        try {\n          run(task);\n        } finally {\n          clearImmediate(handle);\n          currentlyRunningATask = false;\n        }\n      }\n    }\n  }\n\n  function installNextTickImplementation() {\n    registerImmediate = function registerImmediate(handle) {\n      process.nextTick(function () {\n        runIfPresent(handle);\n      });\n    };\n  }\n\n  function canUsePostMessage() {\n    // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n    // where `global.postMessage` means something completely different and can't be used for this purpose.\n    if (global.postMessage && !global.importScripts) {\n      var postMessageIsAsynchronous = true;\n      var oldOnMessage = global.onmessage;\n\n      global.onmessage = function () {\n        postMessageIsAsynchronous = false;\n      };\n\n      global.postMessage(\"\", \"*\");\n      global.onmessage = oldOnMessage;\n      return postMessageIsAsynchronous;\n    }\n  }\n\n  function installPostMessageImplementation() {\n    // Installs an event handler on `global` for the `message` event: see\n    // * https://developer.mozilla.org/en/DOM/window.postMessage\n    // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n    var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n\n    var onGlobalMessage = function onGlobalMessage(event) {\n      if (event.source === global && typeof event.data === \"string\" && event.data.indexOf(messagePrefix) === 0) {\n        runIfPresent(+event.data.slice(messagePrefix.length));\n      }\n    };\n\n    if (global.addEventListener) {\n      global.addEventListener(\"message\", onGlobalMessage, false);\n    } else {\n      global.attachEvent(\"onmessage\", onGlobalMessage);\n    }\n\n    registerImmediate = function registerImmediate(handle) {\n      global.postMessage(messagePrefix + handle, \"*\");\n    };\n  }\n\n  function installMessageChannelImplementation() {\n    var channel = new MessageChannel();\n\n    channel.port1.onmessage = function (event) {\n      var handle = event.data;\n      runIfPresent(handle);\n    };\n\n    registerImmediate = function registerImmediate(handle) {\n      channel.port2.postMessage(handle);\n    };\n  }\n\n  function installReadyStateChangeImplementation() {\n    var html = doc.documentElement;\n\n    registerImmediate = function registerImmediate(handle) {\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var script = doc.createElement(\"script\");\n\n      script.onreadystatechange = function () {\n        runIfPresent(handle);\n        script.onreadystatechange = null;\n        html.removeChild(script);\n        script = null;\n      };\n\n      html.appendChild(script);\n    };\n  }\n\n  function installSetTimeoutImplementation() {\n    registerImmediate = function registerImmediate(handle) {\n      setTimeout(runIfPresent, 0, handle);\n    };\n  } // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n\n\n  var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n  attachTo = attachTo && attachTo.setTimeout ? attachTo : global; // Don't get fooled by e.g. browserify environments.\n\n  if ({}.toString.call(global.process) === \"[object process]\") {\n    // For Node.js before 0.9\n    installNextTickImplementation();\n  } else if (canUsePostMessage()) {\n    // For non-IE10 modern browsers\n    installPostMessageImplementation();\n  } else if (global.MessageChannel) {\n    // For web workers, where supported\n    installMessageChannelImplementation();\n  } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n    // For IE 68\n    installReadyStateChangeImplementation();\n  } else {\n    // For older browsers\n    installSetTimeoutImplementation();\n  }\n\n  attachTo.setImmediate = setImmediate;\n  attachTo.clearImmediate = clearImmediate;\n})(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self);","var scope = typeof global !== \"undefined\" && global || typeof self !== \"undefined\" && self || window;\nvar apply = Function.prototype.apply; // DOM APIs, for completeness\n\nexports.setTimeout = function () {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\n\nexports.setInterval = function () {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\n\nexports.clearTimeout = exports.clearInterval = function (timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\n\nTimeout.prototype.unref = Timeout.prototype.ref = function () {};\n\nTimeout.prototype.close = function () {\n  this._clearFn.call(scope, this._id);\n}; // Does not start the time, just sets up the members needed.\n\n\nexports.enroll = function (item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function (item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function (item) {\n  clearTimeout(item._idleTimeoutId);\n  var msecs = item._idleTimeout;\n\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout) item._onTimeout();\n    }, msecs);\n  }\n}; // setimmediate attaches itself to the global object\n\n\nrequire(\"setimmediate\"); // On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\n\n\nexports.setImmediate = typeof self !== \"undefined\" && self.setImmediate || typeof global !== \"undefined\" && global.setImmediate || this && this.setImmediate;\nexports.clearImmediate = typeof self !== \"undefined\" && self.clearImmediate || typeof global !== \"undefined\" && global.clearImmediate || this && this.clearImmediate;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2018 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n\n/**\n * bluebird build version 3.5.4\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function (e) {\n  if (\"object\" == (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) && \"undefined\" != typeof module) module.exports = e();else if (\"function\" == typeof define && define.amd) define([], e);else {\n    var f;\n    \"undefined\" != typeof window ? f = window : \"undefined\" != typeof global ? f = global : \"undefined\" != typeof self && (f = self), f.Promise = e();\n  }\n}(function () {\n  var define, module, exports;\n  return function e(t, n, r) {\n    function s(o, u) {\n      if (!n[o]) {\n        if (!t[o]) {\n          var a = typeof _dereq_ == \"function\" && _dereq_;\n          if (!u && a) return a(o, !0);\n          if (i) return i(o, !0);\n          var f = new Error(\"Cannot find module '\" + o + \"'\");\n          throw f.code = \"MODULE_NOT_FOUND\", f;\n        }\n\n        var l = n[o] = {\n          exports: {}\n        };\n        t[o][0].call(l.exports, function (e) {\n          var n = t[o][1][e];\n          return s(n ? n : e);\n        }, l, l.exports, e, t, n, r);\n      }\n\n      return n[o].exports;\n    }\n\n    var i = typeof _dereq_ == \"function\" && _dereq_;\n\n    for (var o = 0; o < r.length; o++) {\n      s(r[o]);\n    }\n\n    return s;\n  }({\n    1: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise) {\n        var SomePromiseArray = Promise._SomePromiseArray;\n\n        function any(promises) {\n          var ret = new SomePromiseArray(promises);\n          var promise = ret.promise();\n          ret.setHowMany(1);\n          ret.setUnwrap();\n          ret.init();\n          return promise;\n        }\n\n        Promise.any = function (promises) {\n          return any(promises);\n        };\n\n        Promise.prototype.any = function () {\n          return any(this);\n        };\n      };\n    }, {}],\n    2: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var firstLineError;\n\n      try {\n        throw new Error();\n      } catch (e) {\n        firstLineError = e;\n      }\n\n      var schedule = _dereq_(\"./schedule\");\n\n      var Queue = _dereq_(\"./queue\");\n\n      var util = _dereq_(\"./util\");\n\n      function Async() {\n        this._customScheduler = false;\n        this._isTickUsed = false;\n        this._lateQueue = new Queue(16);\n        this._normalQueue = new Queue(16);\n        this._haveDrainedQueues = false;\n        this._trampolineEnabled = true;\n        var self = this;\n\n        this.drainQueues = function () {\n          self._drainQueues();\n        };\n\n        this._schedule = schedule;\n      }\n\n      Async.prototype.setScheduler = function (fn) {\n        var prev = this._schedule;\n        this._schedule = fn;\n        this._customScheduler = true;\n        return prev;\n      };\n\n      Async.prototype.hasCustomScheduler = function () {\n        return this._customScheduler;\n      };\n\n      Async.prototype.enableTrampoline = function () {\n        this._trampolineEnabled = true;\n      };\n\n      Async.prototype.disableTrampolineIfNecessary = function () {\n        if (util.hasDevTools) {\n          this._trampolineEnabled = false;\n        }\n      };\n\n      Async.prototype.haveItemsQueued = function () {\n        return this._isTickUsed || this._haveDrainedQueues;\n      };\n\n      Async.prototype.fatalError = function (e, isNode) {\n        if (isNode) {\n          process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) + \"\\n\");\n          process.exit(2);\n        } else {\n          this.throwLater(e);\n        }\n      };\n\n      Async.prototype.throwLater = function (fn, arg) {\n        if (arguments.length === 1) {\n          arg = fn;\n\n          fn = function fn() {\n            throw arg;\n          };\n        }\n\n        if (typeof setTimeout !== \"undefined\") {\n          setTimeout(function () {\n            fn(arg);\n          }, 0);\n        } else try {\n          this._schedule(function () {\n            fn(arg);\n          });\n        } catch (e) {\n          throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\");\n        }\n      };\n\n      function AsyncInvokeLater(fn, receiver, arg) {\n        this._lateQueue.push(fn, receiver, arg);\n\n        this._queueTick();\n      }\n\n      function AsyncInvoke(fn, receiver, arg) {\n        this._normalQueue.push(fn, receiver, arg);\n\n        this._queueTick();\n      }\n\n      function AsyncSettlePromises(promise) {\n        this._normalQueue._pushOne(promise);\n\n        this._queueTick();\n      }\n\n      if (!util.hasDevTools) {\n        Async.prototype.invokeLater = AsyncInvokeLater;\n        Async.prototype.invoke = AsyncInvoke;\n        Async.prototype.settlePromises = AsyncSettlePromises;\n      } else {\n        Async.prototype.invokeLater = function (fn, receiver, arg) {\n          if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n          } else {\n            this._schedule(function () {\n              setTimeout(function () {\n                fn.call(receiver, arg);\n              }, 100);\n            });\n          }\n        };\n\n        Async.prototype.invoke = function (fn, receiver, arg) {\n          if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n          } else {\n            this._schedule(function () {\n              fn.call(receiver, arg);\n            });\n          }\n        };\n\n        Async.prototype.settlePromises = function (promise) {\n          if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n          } else {\n            this._schedule(function () {\n              promise._settlePromises();\n            });\n          }\n        };\n      }\n\n      function _drainQueue(queue) {\n        while (queue.length() > 0) {\n          _drainQueueStep(queue);\n        }\n      }\n\n      function _drainQueueStep(queue) {\n        var fn = queue.shift();\n\n        if (typeof fn !== \"function\") {\n          fn._settlePromises();\n        } else {\n          var receiver = queue.shift();\n          var arg = queue.shift();\n          fn.call(receiver, arg);\n        }\n      }\n\n      Async.prototype._drainQueues = function () {\n        _drainQueue(this._normalQueue);\n\n        this._reset();\n\n        this._haveDrainedQueues = true;\n\n        _drainQueue(this._lateQueue);\n      };\n\n      Async.prototype._queueTick = function () {\n        if (!this._isTickUsed) {\n          this._isTickUsed = true;\n\n          this._schedule(this.drainQueues);\n        }\n      };\n\n      Async.prototype._reset = function () {\n        this._isTickUsed = false;\n      };\n\n      module.exports = Async;\n      module.exports.firstLineError = firstLineError;\n    }, {\n      \"./queue\": 26,\n      \"./schedule\": 29,\n      \"./util\": 36\n    }],\n    3: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, INTERNAL, tryConvertToPromise, debug) {\n        var calledBind = false;\n\n        var rejectThis = function rejectThis(_, e) {\n          this._reject(e);\n        };\n\n        var targetRejected = function targetRejected(e, context) {\n          context.promiseRejectionQueued = true;\n\n          context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n        };\n\n        var bindingResolved = function bindingResolved(thisArg, context) {\n          if ((this._bitField & 50397184) === 0) {\n            this._resolveCallback(context.target);\n          }\n        };\n\n        var bindingRejected = function bindingRejected(e, context) {\n          if (!context.promiseRejectionQueued) this._reject(e);\n        };\n\n        Promise.prototype.bind = function (thisArg) {\n          if (!calledBind) {\n            calledBind = true;\n            Promise.prototype._propagateFrom = debug.propagateFromFunction();\n            Promise.prototype._boundValue = debug.boundValueFunction();\n          }\n\n          var maybePromise = tryConvertToPromise(thisArg);\n          var ret = new Promise(INTERNAL);\n\n          ret._propagateFrom(this, 1);\n\n          var target = this._target();\n\n          ret._setBoundTo(maybePromise);\n\n          if (maybePromise instanceof Promise) {\n            var context = {\n              promiseRejectionQueued: false,\n              promise: ret,\n              target: target,\n              bindingPromise: maybePromise\n            };\n\n            target._then(INTERNAL, targetRejected, undefined, ret, context);\n\n            maybePromise._then(bindingResolved, bindingRejected, undefined, ret, context);\n\n            ret._setOnCancel(maybePromise);\n          } else {\n            ret._resolveCallback(target);\n          }\n\n          return ret;\n        };\n\n        Promise.prototype._setBoundTo = function (obj) {\n          if (obj !== undefined) {\n            this._bitField = this._bitField | 2097152;\n            this._boundTo = obj;\n          } else {\n            this._bitField = this._bitField & ~2097152;\n          }\n        };\n\n        Promise.prototype._isBound = function () {\n          return (this._bitField & 2097152) === 2097152;\n        };\n\n        Promise.bind = function (thisArg, value) {\n          return Promise.resolve(value).bind(thisArg);\n        };\n      };\n    }, {}],\n    4: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var old;\n      if (typeof Promise !== \"undefined\") old = Promise;\n\n      function noConflict() {\n        try {\n          if (Promise === bluebird) Promise = old;\n        } catch (e) {}\n\n        return bluebird;\n      }\n\n      var bluebird = _dereq_(\"./promise\")();\n\n      bluebird.noConflict = noConflict;\n      module.exports = bluebird;\n    }, {\n      \"./promise\": 22\n    }],\n    5: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var cr = Object.create;\n\n      if (cr) {\n        var callerCache = cr(null);\n        var getterCache = cr(null);\n        callerCache[\" size\"] = getterCache[\" size\"] = 0;\n      }\n\n      module.exports = function (Promise) {\n        var util = _dereq_(\"./util\");\n\n        var canEvaluate = util.canEvaluate;\n        var isIdentifier = util.isIdentifier;\n        var getMethodCaller;\n        var getGetter;\n\n        if (!true) {\n          var makeMethodCaller = function makeMethodCaller(methodName) {\n            return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n          };\n\n          var makeGetter = function makeGetter(propertyName) {\n            return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n          };\n\n          var getCompiled = function getCompiled(name, compiler, cache) {\n            var ret = cache[name];\n\n            if (typeof ret !== \"function\") {\n              if (!isIdentifier(name)) {\n                return null;\n              }\n\n              ret = compiler(name);\n              cache[name] = ret;\n              cache[\" size\"]++;\n\n              if (cache[\" size\"] > 512) {\n                var keys = Object.keys(cache);\n\n                for (var i = 0; i < 256; ++i) {\n                  delete cache[keys[i]];\n                }\n\n                cache[\" size\"] = keys.length - 256;\n              }\n            }\n\n            return ret;\n          };\n\n          getMethodCaller = function getMethodCaller(name) {\n            return getCompiled(name, makeMethodCaller, callerCache);\n          };\n\n          getGetter = function getGetter(name) {\n            return getCompiled(name, makeGetter, getterCache);\n          };\n        }\n\n        function ensureMethod(obj, methodName) {\n          var fn;\n          if (obj != null) fn = obj[methodName];\n\n          if (typeof fn !== \"function\") {\n            var message = \"Object \" + util.classString(obj) + \" has no method '\" + util.toString(methodName) + \"'\";\n            throw new Promise.TypeError(message);\n          }\n\n          return fn;\n        }\n\n        function caller(obj) {\n          var methodName = this.pop();\n          var fn = ensureMethod(obj, methodName);\n          return fn.apply(obj, this);\n        }\n\n        Promise.prototype.call = function (methodName) {\n          var args = [].slice.call(arguments, 1);\n          ;\n\n          if (!true) {\n            if (canEvaluate) {\n              var maybeCaller = getMethodCaller(methodName);\n\n              if (maybeCaller !== null) {\n                return this._then(maybeCaller, undefined, undefined, args, undefined);\n              }\n            }\n          }\n\n          args.push(methodName);\n          return this._then(caller, undefined, undefined, args, undefined);\n        };\n\n        function namedGetter(obj) {\n          return obj[this];\n        }\n\n        function indexedGetter(obj) {\n          var index = +this;\n          if (index < 0) index = Math.max(0, index + obj.length);\n          return obj[index];\n        }\n\n        Promise.prototype.get = function (propertyName) {\n          var isIndex = typeof propertyName === \"number\";\n          var getter;\n\n          if (!isIndex) {\n            if (canEvaluate) {\n              var maybeGetter = getGetter(propertyName);\n              getter = maybeGetter !== null ? maybeGetter : namedGetter;\n            } else {\n              getter = namedGetter;\n            }\n          } else {\n            getter = indexedGetter;\n          }\n\n          return this._then(getter, undefined, undefined, propertyName, undefined);\n        };\n      };\n    }, {\n      \"./util\": 36\n    }],\n    6: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, PromiseArray, apiRejection, debug) {\n        var util = _dereq_(\"./util\");\n\n        var tryCatch = util.tryCatch;\n        var errorObj = util.errorObj;\n        var async = Promise._async;\n\n        Promise.prototype[\"break\"] = Promise.prototype.cancel = function () {\n          if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n          var promise = this;\n          var child = promise;\n\n          while (promise._isCancellable()) {\n            if (!promise._cancelBy(child)) {\n              if (child._isFollowing()) {\n                child._followee().cancel();\n              } else {\n                child._cancelBranched();\n              }\n\n              break;\n            }\n\n            var parent = promise._cancellationParent;\n\n            if (parent == null || !parent._isCancellable()) {\n              if (promise._isFollowing()) {\n                promise._followee().cancel();\n              } else {\n                promise._cancelBranched();\n              }\n\n              break;\n            } else {\n              if (promise._isFollowing()) promise._followee().cancel();\n\n              promise._setWillBeCancelled();\n\n              child = promise;\n              promise = parent;\n            }\n          }\n        };\n\n        Promise.prototype._branchHasCancelled = function () {\n          this._branchesRemainingToCancel--;\n        };\n\n        Promise.prototype._enoughBranchesHaveCancelled = function () {\n          return this._branchesRemainingToCancel === undefined || this._branchesRemainingToCancel <= 0;\n        };\n\n        Promise.prototype._cancelBy = function (canceller) {\n          if (canceller === this) {\n            this._branchesRemainingToCancel = 0;\n\n            this._invokeOnCancel();\n\n            return true;\n          } else {\n            this._branchHasCancelled();\n\n            if (this._enoughBranchesHaveCancelled()) {\n              this._invokeOnCancel();\n\n              return true;\n            }\n          }\n\n          return false;\n        };\n\n        Promise.prototype._cancelBranched = function () {\n          if (this._enoughBranchesHaveCancelled()) {\n            this._cancel();\n          }\n        };\n\n        Promise.prototype._cancel = function () {\n          if (!this._isCancellable()) return;\n\n          this._setCancelled();\n\n          async.invoke(this._cancelPromises, this, undefined);\n        };\n\n        Promise.prototype._cancelPromises = function () {\n          if (this._length() > 0) this._settlePromises();\n        };\n\n        Promise.prototype._unsetOnCancel = function () {\n          this._onCancelField = undefined;\n        };\n\n        Promise.prototype._isCancellable = function () {\n          return this.isPending() && !this._isCancelled();\n        };\n\n        Promise.prototype.isCancellable = function () {\n          return this.isPending() && !this.isCancelled();\n        };\n\n        Promise.prototype._doInvokeOnCancel = function (onCancelCallback, internalOnly) {\n          if (util.isArray(onCancelCallback)) {\n            for (var i = 0; i < onCancelCallback.length; ++i) {\n              this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n            }\n          } else if (onCancelCallback !== undefined) {\n            if (typeof onCancelCallback === \"function\") {\n              if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n\n                if (e === errorObj) {\n                  this._attachExtraTrace(e.e);\n\n                  async.throwLater(e.e);\n                }\n              }\n            } else {\n              onCancelCallback._resultCancelled(this);\n            }\n          }\n        };\n\n        Promise.prototype._invokeOnCancel = function () {\n          var onCancelCallback = this._onCancel();\n\n          this._unsetOnCancel();\n\n          async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n        };\n\n        Promise.prototype._invokeInternalOnCancel = function () {\n          if (this._isCancellable()) {\n            this._doInvokeOnCancel(this._onCancel(), true);\n\n            this._unsetOnCancel();\n          }\n        };\n\n        Promise.prototype._resultCancelled = function () {\n          this.cancel();\n        };\n      };\n    }, {\n      \"./util\": 36\n    }],\n    7: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (NEXT_FILTER) {\n        var util = _dereq_(\"./util\");\n\n        var getKeys = _dereq_(\"./es5\").keys;\n\n        var tryCatch = util.tryCatch;\n        var errorObj = util.errorObj;\n\n        function catchFilter(instances, cb, promise) {\n          return function (e) {\n            var boundTo = promise._boundValue();\n\n            predicateLoop: for (var i = 0; i < instances.length; ++i) {\n              var item = instances[i];\n\n              if (item === Error || item != null && item.prototype instanceof Error) {\n                if (e instanceof item) {\n                  return tryCatch(cb).call(boundTo, e);\n                }\n              } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n\n                if (matchesPredicate === errorObj) {\n                  return matchesPredicate;\n                } else if (matchesPredicate) {\n                  return tryCatch(cb).call(boundTo, e);\n                }\n              } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n\n                for (var j = 0; j < keys.length; ++j) {\n                  var key = keys[j];\n\n                  if (item[key] != e[key]) {\n                    continue predicateLoop;\n                  }\n                }\n\n                return tryCatch(cb).call(boundTo, e);\n              }\n            }\n\n            return NEXT_FILTER;\n          };\n        }\n\n        return catchFilter;\n      };\n    }, {\n      \"./es5\": 13,\n      \"./util\": 36\n    }],\n    8: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise) {\n        var longStackTraces = false;\n        var contextStack = [];\n\n        Promise.prototype._promiseCreated = function () {};\n\n        Promise.prototype._pushContext = function () {};\n\n        Promise.prototype._popContext = function () {\n          return null;\n        };\n\n        Promise._peekContext = Promise.prototype._peekContext = function () {};\n\n        function Context() {\n          this._trace = new Context.CapturedTrace(peekContext());\n        }\n\n        Context.prototype._pushContext = function () {\n          if (this._trace !== undefined) {\n            this._trace._promiseCreated = null;\n            contextStack.push(this._trace);\n          }\n        };\n\n        Context.prototype._popContext = function () {\n          if (this._trace !== undefined) {\n            var trace = contextStack.pop();\n            var ret = trace._promiseCreated;\n            trace._promiseCreated = null;\n            return ret;\n          }\n\n          return null;\n        };\n\n        function createContext() {\n          if (longStackTraces) return new Context();\n        }\n\n        function peekContext() {\n          var lastIndex = contextStack.length - 1;\n\n          if (lastIndex >= 0) {\n            return contextStack[lastIndex];\n          }\n\n          return undefined;\n        }\n\n        Context.CapturedTrace = null;\n        Context.create = createContext;\n\n        Context.deactivateLongStackTraces = function () {};\n\n        Context.activateLongStackTraces = function () {\n          var Promise_pushContext = Promise.prototype._pushContext;\n          var Promise_popContext = Promise.prototype._popContext;\n          var Promise_PeekContext = Promise._peekContext;\n          var Promise_peekContext = Promise.prototype._peekContext;\n          var Promise_promiseCreated = Promise.prototype._promiseCreated;\n\n          Context.deactivateLongStackTraces = function () {\n            Promise.prototype._pushContext = Promise_pushContext;\n            Promise.prototype._popContext = Promise_popContext;\n            Promise._peekContext = Promise_PeekContext;\n            Promise.prototype._peekContext = Promise_peekContext;\n            Promise.prototype._promiseCreated = Promise_promiseCreated;\n            longStackTraces = false;\n          };\n\n          longStackTraces = true;\n          Promise.prototype._pushContext = Context.prototype._pushContext;\n          Promise.prototype._popContext = Context.prototype._popContext;\n          Promise._peekContext = Promise.prototype._peekContext = peekContext;\n\n          Promise.prototype._promiseCreated = function () {\n            var ctx = this._peekContext();\n\n            if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n          };\n        };\n\n        return Context;\n      };\n    }, {}],\n    9: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, Context) {\n        var getDomain = Promise._getDomain;\n        var async = Promise._async;\n\n        var Warning = _dereq_(\"./errors\").Warning;\n\n        var util = _dereq_(\"./util\");\n\n        var es5 = _dereq_(\"./es5\");\n\n        var canAttachTrace = util.canAttachTrace;\n        var unhandledRejectionHandled;\n        var possiblyUnhandledRejection;\n        var bluebirdFramePattern = /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\n        var nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\n        var parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\n        var stackFramePattern = null;\n        var formatStack = null;\n        var indentStackFrames = false;\n        var printWarning;\n        var debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 && (true || util.env(\"BLUEBIRD_DEBUG\") || util.env(\"NODE_ENV\") === \"development\"));\n        var warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 && (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n        var longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 && (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n        var wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 && (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\n        Promise.prototype.suppressUnhandledRejections = function () {\n          var target = this._target();\n\n          target._bitField = target._bitField & ~1048576 | 524288;\n        };\n\n        Promise.prototype._ensurePossibleRejectionHandled = function () {\n          if ((this._bitField & 524288) !== 0) return;\n\n          this._setRejectionIsUnhandled();\n\n          var self = this;\n          setTimeout(function () {\n            self._notifyUnhandledRejection();\n          }, 1);\n        };\n\n        Promise.prototype._notifyUnhandledRejectionIsHandled = function () {\n          fireRejectionEvent(\"rejectionHandled\", unhandledRejectionHandled, undefined, this);\n        };\n\n        Promise.prototype._setReturnedNonUndefined = function () {\n          this._bitField = this._bitField | 268435456;\n        };\n\n        Promise.prototype._returnedNonUndefined = function () {\n          return (this._bitField & 268435456) !== 0;\n        };\n\n        Promise.prototype._notifyUnhandledRejection = function () {\n          if (this._isRejectionUnhandled()) {\n            var reason = this._settledValue();\n\n            this._setUnhandledRejectionIsNotified();\n\n            fireRejectionEvent(\"unhandledRejection\", possiblyUnhandledRejection, reason, this);\n          }\n        };\n\n        Promise.prototype._setUnhandledRejectionIsNotified = function () {\n          this._bitField = this._bitField | 262144;\n        };\n\n        Promise.prototype._unsetUnhandledRejectionIsNotified = function () {\n          this._bitField = this._bitField & ~262144;\n        };\n\n        Promise.prototype._isUnhandledRejectionNotified = function () {\n          return (this._bitField & 262144) > 0;\n        };\n\n        Promise.prototype._setRejectionIsUnhandled = function () {\n          this._bitField = this._bitField | 1048576;\n        };\n\n        Promise.prototype._unsetRejectionIsUnhandled = function () {\n          this._bitField = this._bitField & ~1048576;\n\n          if (this._isUnhandledRejectionNotified()) {\n            this._unsetUnhandledRejectionIsNotified();\n\n            this._notifyUnhandledRejectionIsHandled();\n          }\n        };\n\n        Promise.prototype._isRejectionUnhandled = function () {\n          return (this._bitField & 1048576) > 0;\n        };\n\n        Promise.prototype._warn = function (message, shouldUseOwnTrace, promise) {\n          return warn(message, shouldUseOwnTrace, promise || this);\n        };\n\n        Promise.onPossiblyUnhandledRejection = function (fn) {\n          var domain = getDomain();\n          possiblyUnhandledRejection = typeof fn === \"function\" ? domain === null ? fn : util.domainBind(domain, fn) : undefined;\n        };\n\n        Promise.onUnhandledRejectionHandled = function (fn) {\n          var domain = getDomain();\n          unhandledRejectionHandled = typeof fn === \"function\" ? domain === null ? fn : util.domainBind(domain, fn) : undefined;\n        };\n\n        var disableLongStackTraces = function disableLongStackTraces() {};\n\n        Promise.longStackTraces = function () {\n          if (async.haveItemsQueued() && !config.longStackTraces) {\n            throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");\n          }\n\n          if (!config.longStackTraces && longStackTracesIsSupported()) {\n            var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n            var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n            var Promise_dereferenceTrace = Promise.prototype._dereferenceTrace;\n            config.longStackTraces = true;\n\n            disableLongStackTraces = function disableLongStackTraces() {\n              if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");\n              }\n\n              Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n              Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n              Promise.prototype._dereferenceTrace = Promise_dereferenceTrace;\n              Context.deactivateLongStackTraces();\n              async.enableTrampoline();\n              config.longStackTraces = false;\n            };\n\n            Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n            Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n            Promise.prototype._dereferenceTrace = longStackTracesDereferenceTrace;\n            Context.activateLongStackTraces();\n            async.disableTrampolineIfNecessary();\n          }\n        };\n\n        Promise.hasLongStackTraces = function () {\n          return config.longStackTraces && longStackTracesIsSupported();\n        };\n\n        var fireDomEvent = function () {\n          try {\n            if (typeof CustomEvent === \"function\") {\n              var event = new CustomEvent(\"CustomEvent\");\n              util.global.dispatchEvent(event);\n              return function (name, event) {\n                var eventData = {\n                  detail: event,\n                  cancelable: true\n                };\n                es5.defineProperty(eventData, \"promise\", {\n                  value: event.promise\n                });\n                es5.defineProperty(eventData, \"reason\", {\n                  value: event.reason\n                });\n                var domEvent = new CustomEvent(name.toLowerCase(), eventData);\n                return !util.global.dispatchEvent(domEvent);\n              };\n            } else if (typeof Event === \"function\") {\n              var event = new Event(\"CustomEvent\");\n              util.global.dispatchEvent(event);\n              return function (name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                  cancelable: true\n                });\n                domEvent.detail = event;\n                es5.defineProperty(domEvent, \"promise\", {\n                  value: event.promise\n                });\n                es5.defineProperty(domEvent, \"reason\", {\n                  value: event.reason\n                });\n                return !util.global.dispatchEvent(domEvent);\n              };\n            } else {\n              var event = document.createEvent(\"CustomEvent\");\n              event.initCustomEvent(\"testingtheevent\", false, true, {});\n              util.global.dispatchEvent(event);\n              return function (name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true, event);\n                return !util.global.dispatchEvent(domEvent);\n              };\n            }\n          } catch (e) {}\n\n          return function () {\n            return false;\n          };\n        }();\n\n        var fireGlobalEvent = function () {\n          if (util.isNode) {\n            return function () {\n              return process.emit.apply(process, arguments);\n            };\n          } else {\n            if (!util.global) {\n              return function () {\n                return false;\n              };\n            }\n\n            return function (name) {\n              var methodName = \"on\" + name.toLowerCase();\n              var method = util.global[methodName];\n              if (!method) return false;\n              method.apply(util.global, [].slice.call(arguments, 1));\n              return true;\n            };\n          }\n        }();\n\n        function generatePromiseLifecycleEventObject(name, promise) {\n          return {\n            promise: promise\n          };\n        }\n\n        var eventToObjectGenerator = {\n          promiseCreated: generatePromiseLifecycleEventObject,\n          promiseFulfilled: generatePromiseLifecycleEventObject,\n          promiseRejected: generatePromiseLifecycleEventObject,\n          promiseResolved: generatePromiseLifecycleEventObject,\n          promiseCancelled: generatePromiseLifecycleEventObject,\n          promiseChained: function promiseChained(name, promise, child) {\n            return {\n              promise: promise,\n              child: child\n            };\n          },\n          warning: function warning(name, _warning) {\n            return {\n              warning: _warning\n            };\n          },\n          unhandledRejection: function unhandledRejection(name, reason, promise) {\n            return {\n              reason: reason,\n              promise: promise\n            };\n          },\n          rejectionHandled: generatePromiseLifecycleEventObject\n        };\n\n        var activeFireEvent = function activeFireEvent(name) {\n          var globalEventFired = false;\n\n          try {\n            globalEventFired = fireGlobalEvent.apply(null, arguments);\n          } catch (e) {\n            async.throwLater(e);\n            globalEventFired = true;\n          }\n\n          var domEventFired = false;\n\n          try {\n            domEventFired = fireDomEvent(name, eventToObjectGenerator[name].apply(null, arguments));\n          } catch (e) {\n            async.throwLater(e);\n            domEventFired = true;\n          }\n\n          return domEventFired || globalEventFired;\n        };\n\n        Promise.config = function (opts) {\n          opts = Object(opts);\n\n          if (\"longStackTraces\" in opts) {\n            if (opts.longStackTraces) {\n              Promise.longStackTraces();\n            } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n              disableLongStackTraces();\n            }\n          }\n\n          if (\"warnings\" in opts) {\n            var warningsOption = opts.warnings;\n            config.warnings = !!warningsOption;\n            wForgottenReturn = config.warnings;\n\n            if (util.isObject(warningsOption)) {\n              if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n              }\n            }\n          }\n\n          if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n            if (async.haveItemsQueued()) {\n              throw new Error(\"cannot enable cancellation after promises are in use\");\n            }\n\n            Promise.prototype._clearCancellationData = cancellationClearCancellationData;\n            Promise.prototype._propagateFrom = cancellationPropagateFrom;\n            Promise.prototype._onCancel = cancellationOnCancel;\n            Promise.prototype._setOnCancel = cancellationSetOnCancel;\n            Promise.prototype._attachCancellationCallback = cancellationAttachCancellationCallback;\n            Promise.prototype._execute = cancellationExecute;\n            _propagateFromFunction = cancellationPropagateFrom;\n            config.cancellation = true;\n          }\n\n          if (\"monitoring\" in opts) {\n            if (opts.monitoring && !config.monitoring) {\n              config.monitoring = true;\n              Promise.prototype._fireEvent = activeFireEvent;\n            } else if (!opts.monitoring && config.monitoring) {\n              config.monitoring = false;\n              Promise.prototype._fireEvent = defaultFireEvent;\n            }\n          }\n\n          return Promise;\n        };\n\n        function defaultFireEvent() {\n          return false;\n        }\n\n        Promise.prototype._fireEvent = defaultFireEvent;\n\n        Promise.prototype._execute = function (executor, resolve, reject) {\n          try {\n            executor(resolve, reject);\n          } catch (e) {\n            return e;\n          }\n        };\n\n        Promise.prototype._onCancel = function () {};\n\n        Promise.prototype._setOnCancel = function (handler) {\n          ;\n        };\n\n        Promise.prototype._attachCancellationCallback = function (onCancel) {\n          ;\n        };\n\n        Promise.prototype._captureStackTrace = function () {};\n\n        Promise.prototype._attachExtraTrace = function () {};\n\n        Promise.prototype._dereferenceTrace = function () {};\n\n        Promise.prototype._clearCancellationData = function () {};\n\n        Promise.prototype._propagateFrom = function (parent, flags) {\n          ;\n          ;\n        };\n\n        function cancellationExecute(executor, resolve, reject) {\n          var promise = this;\n\n          try {\n            executor(resolve, reject, function (onCancel) {\n              if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" + util.toString(onCancel));\n              }\n\n              promise._attachCancellationCallback(onCancel);\n            });\n          } catch (e) {\n            return e;\n          }\n        }\n\n        function cancellationAttachCancellationCallback(onCancel) {\n          if (!this._isCancellable()) return this;\n\n          var previousOnCancel = this._onCancel();\n\n          if (previousOnCancel !== undefined) {\n            if (util.isArray(previousOnCancel)) {\n              previousOnCancel.push(onCancel);\n            } else {\n              this._setOnCancel([previousOnCancel, onCancel]);\n            }\n          } else {\n            this._setOnCancel(onCancel);\n          }\n        }\n\n        function cancellationOnCancel() {\n          return this._onCancelField;\n        }\n\n        function cancellationSetOnCancel(onCancel) {\n          this._onCancelField = onCancel;\n        }\n\n        function cancellationClearCancellationData() {\n          this._cancellationParent = undefined;\n          this._onCancelField = undefined;\n        }\n\n        function cancellationPropagateFrom(parent, flags) {\n          if ((flags & 1) !== 0) {\n            this._cancellationParent = parent;\n            var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n\n            if (branchesRemainingToCancel === undefined) {\n              branchesRemainingToCancel = 0;\n            }\n\n            parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n          }\n\n          if ((flags & 2) !== 0 && parent._isBound()) {\n            this._setBoundTo(parent._boundTo);\n          }\n        }\n\n        function bindingPropagateFrom(parent, flags) {\n          if ((flags & 2) !== 0 && parent._isBound()) {\n            this._setBoundTo(parent._boundTo);\n          }\n        }\n\n        var _propagateFromFunction = bindingPropagateFrom;\n\n        function _boundValueFunction() {\n          var ret = this._boundTo;\n\n          if (ret !== undefined) {\n            if (ret instanceof Promise) {\n              if (ret.isFulfilled()) {\n                return ret.value();\n              } else {\n                return undefined;\n              }\n            }\n          }\n\n          return ret;\n        }\n\n        function longStackTracesCaptureStackTrace() {\n          this._trace = new CapturedTrace(this._peekContext());\n        }\n\n        function longStackTracesAttachExtraTrace(error, ignoreSelf) {\n          if (canAttachTrace(error)) {\n            var trace = this._trace;\n\n            if (trace !== undefined) {\n              if (ignoreSelf) trace = trace._parent;\n            }\n\n            if (trace !== undefined) {\n              trace.attachExtraTrace(error);\n            } else if (!error.__stackCleaned__) {\n              var parsed = parseStackAndMessage(error);\n              util.notEnumerableProp(error, \"stack\", parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n              util.notEnumerableProp(error, \"__stackCleaned__\", true);\n            }\n          }\n        }\n\n        function longStackTracesDereferenceTrace() {\n          this._trace = undefined;\n        }\n\n        function checkForgottenReturns(returnValue, promiseCreated, name, promise, parent) {\n          if (returnValue === undefined && promiseCreated !== null && wForgottenReturn) {\n            if (parent !== undefined && parent._returnedNonUndefined()) return;\n            if ((promise._bitField & 65535) === 0) return;\n            if (name) name = name + \" \";\n            var handlerLine = \"\";\n            var creatorLine = \"\";\n\n            if (promiseCreated._trace) {\n              var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n\n              var stack = cleanStack(traceLines);\n\n              for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n\n                if (!nodeFramePattern.test(line)) {\n                  var lineMatches = line.match(parseLinePattern);\n\n                  if (lineMatches) {\n                    handlerLine = \"at \" + lineMatches[1] + \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                  }\n\n                  break;\n                }\n              }\n\n              if (stack.length > 0) {\n                var firstUserLine = stack[0];\n\n                for (var i = 0; i < traceLines.length; ++i) {\n                  if (traceLines[i] === firstUserLine) {\n                    if (i > 0) {\n                      creatorLine = \"\\n\" + traceLines[i - 1];\n                    }\n\n                    break;\n                  }\n                }\n              }\n            }\n\n            var msg = \"a promise was created in a \" + name + \"handler \" + handlerLine + \"but was not returned from it, \" + \"see http://goo.gl/rRqMUw\" + creatorLine;\n\n            promise._warn(msg, true, promiseCreated);\n          }\n        }\n\n        function deprecated(name, replacement) {\n          var message = name + \" is deprecated and will be removed in a future version.\";\n          if (replacement) message += \" Use \" + replacement + \" instead.\";\n          return warn(message);\n        }\n\n        function warn(message, shouldUseOwnTrace, promise) {\n          if (!config.warnings) return;\n          var warning = new Warning(message);\n          var ctx;\n\n          if (shouldUseOwnTrace) {\n            promise._attachExtraTrace(warning);\n          } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n            ctx.attachExtraTrace(warning);\n          } else {\n            var parsed = parseStackAndMessage(warning);\n            warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n          }\n\n          if (!activeFireEvent(\"warning\", warning)) {\n            formatAndLogError(warning, \"\", true);\n          }\n        }\n\n        function reconstructStack(message, stacks) {\n          for (var i = 0; i < stacks.length - 1; ++i) {\n            stacks[i].push(\"From previous event:\");\n            stacks[i] = stacks[i].join(\"\\n\");\n          }\n\n          if (i < stacks.length) {\n            stacks[i] = stacks[i].join(\"\\n\");\n          }\n\n          return message + \"\\n\" + stacks.join(\"\\n\");\n        }\n\n        function removeDuplicateOrEmptyJumps(stacks) {\n          for (var i = 0; i < stacks.length; ++i) {\n            if (stacks[i].length === 0 || i + 1 < stacks.length && stacks[i][0] === stacks[i + 1][0]) {\n              stacks.splice(i, 1);\n              i--;\n            }\n          }\n        }\n\n        function removeCommonRoots(stacks) {\n          var current = stacks[0];\n\n          for (var i = 1; i < stacks.length; ++i) {\n            var prev = stacks[i];\n            var currentLastIndex = current.length - 1;\n            var currentLastLine = current[currentLastIndex];\n            var commonRootMeetPoint = -1;\n\n            for (var j = prev.length - 1; j >= 0; --j) {\n              if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n              }\n            }\n\n            for (var j = commonRootMeetPoint; j >= 0; --j) {\n              var line = prev[j];\n\n              if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n              } else {\n                break;\n              }\n            }\n\n            current = prev;\n          }\n        }\n\n        function cleanStack(stack) {\n          var ret = [];\n\n          for (var i = 0; i < stack.length; ++i) {\n            var line = stack[i];\n            var isTraceLine = \"    (No stack trace)\" === line || stackFramePattern.test(line);\n            var isInternalFrame = isTraceLine && shouldIgnore(line);\n\n            if (isTraceLine && !isInternalFrame) {\n              if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n              }\n\n              ret.push(line);\n            }\n          }\n\n          return ret;\n        }\n\n        function stackFramesAsArray(error) {\n          var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n\n          for (var i = 0; i < stack.length; ++i) {\n            var line = stack[i];\n\n            if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n              break;\n            }\n          }\n\n          if (i > 0 && error.name != \"SyntaxError\") {\n            stack = stack.slice(i);\n          }\n\n          return stack;\n        }\n\n        function parseStackAndMessage(error) {\n          var stack = error.stack;\n          var message = error.toString();\n          stack = typeof stack === \"string\" && stack.length > 0 ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n          return {\n            message: message,\n            stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n          };\n        }\n\n        function formatAndLogError(error, title, isSoft) {\n          if (typeof console !== \"undefined\") {\n            var message;\n\n            if (util.isObject(error)) {\n              var stack = error.stack;\n              message = title + formatStack(stack, error);\n            } else {\n              message = title + String(error);\n            }\n\n            if (typeof printWarning === \"function\") {\n              printWarning(message, isSoft);\n            } else if (typeof console.log === \"function\" || _typeof(console.log) === \"object\") {\n              console.log(message);\n            }\n          }\n        }\n\n        function fireRejectionEvent(name, localHandler, reason, promise) {\n          var localEventFired = false;\n\n          try {\n            if (typeof localHandler === \"function\") {\n              localEventFired = true;\n\n              if (name === \"rejectionHandled\") {\n                localHandler(promise);\n              } else {\n                localHandler(reason, promise);\n              }\n            }\n          } catch (e) {\n            async.throwLater(e);\n          }\n\n          if (name === \"unhandledRejection\") {\n            if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n              formatAndLogError(reason, \"Unhandled rejection \");\n            }\n          } else {\n            activeFireEvent(name, promise);\n          }\n        }\n\n        function formatNonError(obj) {\n          var str;\n\n          if (typeof obj === \"function\") {\n            str = \"[function \" + (obj.name || \"anonymous\") + \"]\";\n          } else {\n            str = obj && typeof obj.toString === \"function\" ? obj.toString() : util.toString(obj);\n            var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n\n            if (ruselessToString.test(str)) {\n              try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n              } catch (e) {}\n            }\n\n            if (str.length === 0) {\n              str = \"(empty array)\";\n            }\n          }\n\n          return \"(<\" + snip(str) + \">, no stack trace)\";\n        }\n\n        function snip(str) {\n          var maxChars = 41;\n\n          if (str.length < maxChars) {\n            return str;\n          }\n\n          return str.substr(0, maxChars - 3) + \"...\";\n        }\n\n        function longStackTracesIsSupported() {\n          return typeof captureStackTrace === \"function\";\n        }\n\n        var shouldIgnore = function shouldIgnore() {\n          return false;\n        };\n\n        var parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\n\n        function parseLineInfo(line) {\n          var matches = line.match(parseLineInfoRegex);\n\n          if (matches) {\n            return {\n              fileName: matches[1],\n              line: parseInt(matches[2], 10)\n            };\n          }\n        }\n\n        function setBounds(firstLineError, lastLineError) {\n          if (!longStackTracesIsSupported()) return;\n          var firstStackLines = firstLineError.stack.split(\"\\n\");\n          var lastStackLines = lastLineError.stack.split(\"\\n\");\n          var firstIndex = -1;\n          var lastIndex = -1;\n          var firstFileName;\n          var lastFileName;\n\n          for (var i = 0; i < firstStackLines.length; ++i) {\n            var result = parseLineInfo(firstStackLines[i]);\n\n            if (result) {\n              firstFileName = result.fileName;\n              firstIndex = result.line;\n              break;\n            }\n          }\n\n          for (var i = 0; i < lastStackLines.length; ++i) {\n            var result = parseLineInfo(lastStackLines[i]);\n\n            if (result) {\n              lastFileName = result.fileName;\n              lastIndex = result.line;\n              break;\n            }\n          }\n\n          if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName || firstFileName !== lastFileName || firstIndex >= lastIndex) {\n            return;\n          }\n\n          shouldIgnore = function shouldIgnore(line) {\n            if (bluebirdFramePattern.test(line)) return true;\n            var info = parseLineInfo(line);\n\n            if (info) {\n              if (info.fileName === firstFileName && firstIndex <= info.line && info.line <= lastIndex) {\n                return true;\n              }\n            }\n\n            return false;\n          };\n        }\n\n        function CapturedTrace(parent) {\n          this._parent = parent;\n          this._promisesCreated = 0;\n          var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n          captureStackTrace(this, CapturedTrace);\n          if (length > 32) this.uncycle();\n        }\n\n        util.inherits(CapturedTrace, Error);\n        Context.CapturedTrace = CapturedTrace;\n\n        CapturedTrace.prototype.uncycle = function () {\n          var length = this._length;\n          if (length < 2) return;\n          var nodes = [];\n          var stackToIndex = {};\n\n          for (var i = 0, node = this; node !== undefined; ++i) {\n            nodes.push(node);\n            node = node._parent;\n          }\n\n          length = this._length = i;\n\n          for (var i = length - 1; i >= 0; --i) {\n            var stack = nodes[i].stack;\n\n            if (stackToIndex[stack] === undefined) {\n              stackToIndex[stack] = i;\n            }\n          }\n\n          for (var i = 0; i < length; ++i) {\n            var currentStack = nodes[i].stack;\n            var index = stackToIndex[currentStack];\n\n            if (index !== undefined && index !== i) {\n              if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n              }\n\n              nodes[i]._parent = undefined;\n              nodes[i]._length = 1;\n              var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n              if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n\n                cycleEdgeNode._parent.uncycle();\n\n                cycleEdgeNode._length = cycleEdgeNode._parent._length + 1;\n              } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n              }\n\n              var currentChildLength = cycleEdgeNode._length + 1;\n\n              for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n              }\n\n              return;\n            }\n          }\n        };\n\n        CapturedTrace.prototype.attachExtraTrace = function (error) {\n          if (error.__stackCleaned__) return;\n          this.uncycle();\n          var parsed = parseStackAndMessage(error);\n          var message = parsed.message;\n          var stacks = [parsed.stack];\n          var trace = this;\n\n          while (trace !== undefined) {\n            stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n            trace = trace._parent;\n          }\n\n          removeCommonRoots(stacks);\n          removeDuplicateOrEmptyJumps(stacks);\n          util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n          util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        };\n\n        var captureStackTrace = function stackDetection() {\n          var v8stackFramePattern = /^\\s*at\\s*/;\n\n          var v8stackFormatter = function v8stackFormatter(stack, error) {\n            if (typeof stack === \"string\") return stack;\n\n            if (error.name !== undefined && error.message !== undefined) {\n              return error.toString();\n            }\n\n            return formatNonError(error);\n          };\n\n          if (typeof Error.stackTraceLimit === \"number\" && typeof Error.captureStackTrace === \"function\") {\n            Error.stackTraceLimit += 6;\n            stackFramePattern = v8stackFramePattern;\n            formatStack = v8stackFormatter;\n            var captureStackTrace = Error.captureStackTrace;\n\n            shouldIgnore = function shouldIgnore(line) {\n              return bluebirdFramePattern.test(line);\n            };\n\n            return function (receiver, ignoreUntil) {\n              Error.stackTraceLimit += 6;\n              captureStackTrace(receiver, ignoreUntil);\n              Error.stackTraceLimit -= 6;\n            };\n          }\n\n          var err = new Error();\n\n          if (typeof err.stack === \"string\" && err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n            stackFramePattern = /@/;\n            formatStack = v8stackFormatter;\n            indentStackFrames = true;\n            return function captureStackTrace(o) {\n              o.stack = new Error().stack;\n            };\n          }\n\n          var hasStackAfterThrow;\n\n          try {\n            throw new Error();\n          } catch (e) {\n            hasStackAfterThrow = \"stack\" in e;\n          }\n\n          if (!(\"stack\" in err) && hasStackAfterThrow && typeof Error.stackTraceLimit === \"number\") {\n            stackFramePattern = v8stackFramePattern;\n            formatStack = v8stackFormatter;\n            return function captureStackTrace(o) {\n              Error.stackTraceLimit += 6;\n\n              try {\n                throw new Error();\n              } catch (e) {\n                o.stack = e.stack;\n              }\n\n              Error.stackTraceLimit -= 6;\n            };\n          }\n\n          formatStack = function formatStack(stack, error) {\n            if (typeof stack === \"string\") return stack;\n\n            if ((_typeof(error) === \"object\" || typeof error === \"function\") && error.name !== undefined && error.message !== undefined) {\n              return error.toString();\n            }\n\n            return formatNonError(error);\n          };\n\n          return null;\n        }([]);\n\n        if (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n          printWarning = function printWarning(message) {\n            console.warn(message);\n          };\n\n          if (util.isNode && process.stderr.isTTY) {\n            printWarning = function printWarning(message, isSoft) {\n              var color = isSoft ? \"\\x1B[33m\" : \"\\x1B[31m\";\n              console.warn(color + message + \"\\x1B[0m\\n\");\n            };\n          } else if (!util.isNode && typeof new Error().stack === \"string\") {\n            printWarning = function printWarning(message, isSoft) {\n              console.warn(\"%c\" + message, isSoft ? \"color: darkorange\" : \"color: red\");\n            };\n          }\n        }\n\n        var config = {\n          warnings: warnings,\n          longStackTraces: false,\n          cancellation: false,\n          monitoring: false\n        };\n        if (longStackTraces) Promise.longStackTraces();\n        return {\n          longStackTraces: function longStackTraces() {\n            return config.longStackTraces;\n          },\n          warnings: function warnings() {\n            return config.warnings;\n          },\n          cancellation: function cancellation() {\n            return config.cancellation;\n          },\n          monitoring: function monitoring() {\n            return config.monitoring;\n          },\n          propagateFromFunction: function propagateFromFunction() {\n            return _propagateFromFunction;\n          },\n          boundValueFunction: function boundValueFunction() {\n            return _boundValueFunction;\n          },\n          checkForgottenReturns: checkForgottenReturns,\n          setBounds: setBounds,\n          warn: warn,\n          deprecated: deprecated,\n          CapturedTrace: CapturedTrace,\n          fireDomEvent: fireDomEvent,\n          fireGlobalEvent: fireGlobalEvent\n        };\n      };\n    }, {\n      \"./errors\": 12,\n      \"./es5\": 13,\n      \"./util\": 36\n    }],\n    10: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise) {\n        function returner() {\n          return this.value;\n        }\n\n        function thrower() {\n          throw this.reason;\n        }\n\n        Promise.prototype[\"return\"] = Promise.prototype.thenReturn = function (value) {\n          if (value instanceof Promise) value.suppressUnhandledRejections();\n          return this._then(returner, undefined, undefined, {\n            value: value\n          }, undefined);\n        };\n\n        Promise.prototype[\"throw\"] = Promise.prototype.thenThrow = function (reason) {\n          return this._then(thrower, undefined, undefined, {\n            reason: reason\n          }, undefined);\n        };\n\n        Promise.prototype.catchThrow = function (reason) {\n          if (arguments.length <= 1) {\n            return this._then(undefined, thrower, undefined, {\n              reason: reason\n            }, undefined);\n          } else {\n            var _reason = arguments[1];\n\n            var handler = function handler() {\n              throw _reason;\n            };\n\n            return this.caught(reason, handler);\n          }\n        };\n\n        Promise.prototype.catchReturn = function (value) {\n          if (arguments.length <= 1) {\n            if (value instanceof Promise) value.suppressUnhandledRejections();\n            return this._then(undefined, returner, undefined, {\n              value: value\n            }, undefined);\n          } else {\n            var _value = arguments[1];\n            if (_value instanceof Promise) _value.suppressUnhandledRejections();\n\n            var handler = function handler() {\n              return _value;\n            };\n\n            return this.caught(value, handler);\n          }\n        };\n      };\n    }, {}],\n    11: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, INTERNAL) {\n        var PromiseReduce = Promise.reduce;\n        var PromiseAll = Promise.all;\n\n        function promiseAllThis() {\n          return PromiseAll(this);\n        }\n\n        function PromiseMapSeries(promises, fn) {\n          return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n        }\n\n        Promise.prototype.each = function (fn) {\n          return PromiseReduce(this, fn, INTERNAL, 0)._then(promiseAllThis, undefined, undefined, this, undefined);\n        };\n\n        Promise.prototype.mapSeries = function (fn) {\n          return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n        };\n\n        Promise.each = function (promises, fn) {\n          return PromiseReduce(promises, fn, INTERNAL, 0)._then(promiseAllThis, undefined, undefined, promises, undefined);\n        };\n\n        Promise.mapSeries = PromiseMapSeries;\n      };\n    }, {}],\n    12: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var es5 = _dereq_(\"./es5\");\n\n      var Objectfreeze = es5.freeze;\n\n      var util = _dereq_(\"./util\");\n\n      var inherits = util.inherits;\n      var notEnumerableProp = util.notEnumerableProp;\n\n      function subError(nameProperty, defaultMessage) {\n        function SubError(message) {\n          if (!(this instanceof SubError)) return new SubError(message);\n          notEnumerableProp(this, \"message\", typeof message === \"string\" ? message : defaultMessage);\n          notEnumerableProp(this, \"name\", nameProperty);\n\n          if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n          } else {\n            Error.call(this);\n          }\n        }\n\n        inherits(SubError, Error);\n        return SubError;\n      }\n\n      var _TypeError, _RangeError;\n\n      var Warning = subError(\"Warning\", \"warning\");\n      var CancellationError = subError(\"CancellationError\", \"cancellation error\");\n      var TimeoutError = subError(\"TimeoutError\", \"timeout error\");\n      var AggregateError = subError(\"AggregateError\", \"aggregate error\");\n\n      try {\n        _TypeError = TypeError;\n        _RangeError = RangeError;\n      } catch (e) {\n        _TypeError = subError(\"TypeError\", \"type error\");\n        _RangeError = subError(\"RangeError\", \"range error\");\n      }\n\n      var methods = (\"join pop push shift unshift slice filter forEach some \" + \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\n      for (var i = 0; i < methods.length; ++i) {\n        if (typeof Array.prototype[methods[i]] === \"function\") {\n          AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n        }\n      }\n\n      es5.defineProperty(AggregateError.prototype, \"length\", {\n        value: 0,\n        configurable: false,\n        writable: true,\n        enumerable: true\n      });\n      AggregateError.prototype[\"isOperational\"] = true;\n      var level = 0;\n\n      AggregateError.prototype.toString = function () {\n        var indent = Array(level * 4 + 1).join(\" \");\n        var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n        level++;\n        indent = Array(level * 4 + 1).join(\" \");\n\n        for (var i = 0; i < this.length; ++i) {\n          var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n          var lines = str.split(\"\\n\");\n\n          for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n          }\n\n          str = lines.join(\"\\n\");\n          ret += str + \"\\n\";\n        }\n\n        level--;\n        return ret;\n      };\n\n      function OperationalError(message) {\n        if (!(this instanceof OperationalError)) return new OperationalError(message);\n        notEnumerableProp(this, \"name\", \"OperationalError\");\n        notEnumerableProp(this, \"message\", message);\n        this.cause = message;\n        this[\"isOperational\"] = true;\n\n        if (message instanceof Error) {\n          notEnumerableProp(this, \"message\", message.message);\n          notEnumerableProp(this, \"stack\", message.stack);\n        } else if (Error.captureStackTrace) {\n          Error.captureStackTrace(this, this.constructor);\n        }\n      }\n\n      inherits(OperationalError, Error);\n      var errorTypes = Error[\"__BluebirdErrorTypes__\"];\n\n      if (!errorTypes) {\n        errorTypes = Objectfreeze({\n          CancellationError: CancellationError,\n          TimeoutError: TimeoutError,\n          OperationalError: OperationalError,\n          RejectionError: OperationalError,\n          AggregateError: AggregateError\n        });\n        es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n          value: errorTypes,\n          writable: false,\n          enumerable: false,\n          configurable: false\n        });\n      }\n\n      module.exports = {\n        Error: Error,\n        TypeError: _TypeError,\n        RangeError: _RangeError,\n        CancellationError: errorTypes.CancellationError,\n        OperationalError: errorTypes.OperationalError,\n        TimeoutError: errorTypes.TimeoutError,\n        AggregateError: errorTypes.AggregateError,\n        Warning: Warning\n      };\n    }, {\n      \"./es5\": 13,\n      \"./util\": 36\n    }],\n    13: [function (_dereq_, module, exports) {\n      var isES5 = function () {\n        \"use strict\";\n\n        return this === undefined;\n      }();\n\n      if (isES5) {\n        module.exports = {\n          freeze: Object.freeze,\n          defineProperty: Object.defineProperty,\n          getDescriptor: Object.getOwnPropertyDescriptor,\n          keys: Object.keys,\n          names: Object.getOwnPropertyNames,\n          getPrototypeOf: Object.getPrototypeOf,\n          isArray: Array.isArray,\n          isES5: isES5,\n          propertyIsWritable: function propertyIsWritable(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n          }\n        };\n      } else {\n        var has = {}.hasOwnProperty;\n        var str = {}.toString;\n        var proto = {}.constructor.prototype;\n\n        var ObjectKeys = function ObjectKeys(o) {\n          var ret = [];\n\n          for (var key in o) {\n            if (has.call(o, key)) {\n              ret.push(key);\n            }\n          }\n\n          return ret;\n        };\n\n        var ObjectGetDescriptor = function ObjectGetDescriptor(o, key) {\n          return {\n            value: o[key]\n          };\n        };\n\n        var ObjectDefineProperty = function ObjectDefineProperty(o, key, desc) {\n          o[key] = desc.value;\n          return o;\n        };\n\n        var ObjectFreeze = function ObjectFreeze(obj) {\n          return obj;\n        };\n\n        var ObjectGetPrototypeOf = function ObjectGetPrototypeOf(obj) {\n          try {\n            return Object(obj).constructor.prototype;\n          } catch (e) {\n            return proto;\n          }\n        };\n\n        var ArrayIsArray = function ArrayIsArray(obj) {\n          try {\n            return str.call(obj) === \"[object Array]\";\n          } catch (e) {\n            return false;\n          }\n        };\n\n        module.exports = {\n          isArray: ArrayIsArray,\n          keys: ObjectKeys,\n          names: ObjectKeys,\n          defineProperty: ObjectDefineProperty,\n          getDescriptor: ObjectGetDescriptor,\n          freeze: ObjectFreeze,\n          getPrototypeOf: ObjectGetPrototypeOf,\n          isES5: isES5,\n          propertyIsWritable: function propertyIsWritable() {\n            return true;\n          }\n        };\n      }\n    }, {}],\n    14: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, INTERNAL) {\n        var PromiseMap = Promise.map;\n\n        Promise.prototype.filter = function (fn, options) {\n          return PromiseMap(this, fn, options, INTERNAL);\n        };\n\n        Promise.filter = function (promises, fn, options) {\n          return PromiseMap(promises, fn, options, INTERNAL);\n        };\n      };\n    }, {}],\n    15: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, tryConvertToPromise, NEXT_FILTER) {\n        var util = _dereq_(\"./util\");\n\n        var CancellationError = Promise.CancellationError;\n        var errorObj = util.errorObj;\n\n        var catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\n        function PassThroughHandlerContext(promise, type, handler) {\n          this.promise = promise;\n          this.type = type;\n          this.handler = handler;\n          this.called = false;\n          this.cancelPromise = null;\n        }\n\n        PassThroughHandlerContext.prototype.isFinallyHandler = function () {\n          return this.type === 0;\n        };\n\n        function FinallyHandlerCancelReaction(finallyHandler) {\n          this.finallyHandler = finallyHandler;\n        }\n\n        FinallyHandlerCancelReaction.prototype._resultCancelled = function () {\n          checkCancel(this.finallyHandler);\n        };\n\n        function checkCancel(ctx, reason) {\n          if (ctx.cancelPromise != null) {\n            if (arguments.length > 1) {\n              ctx.cancelPromise._reject(reason);\n            } else {\n              ctx.cancelPromise._cancel();\n            }\n\n            ctx.cancelPromise = null;\n            return true;\n          }\n\n          return false;\n        }\n\n        function succeed() {\n          return finallyHandler.call(this, this.promise._target()._settledValue());\n        }\n\n        function fail(reason) {\n          if (checkCancel(this, reason)) return;\n          errorObj.e = reason;\n          return errorObj;\n        }\n\n        function finallyHandler(reasonOrValue) {\n          var promise = this.promise;\n          var handler = this.handler;\n\n          if (!this.called) {\n            this.called = true;\n            var ret = this.isFinallyHandler() ? handler.call(promise._boundValue()) : handler.call(promise._boundValue(), reasonOrValue);\n\n            if (ret === NEXT_FILTER) {\n              return ret;\n            } else if (ret !== undefined) {\n              promise._setReturnedNonUndefined();\n\n              var maybePromise = tryConvertToPromise(ret, promise);\n\n              if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                  if (maybePromise._isCancelled()) {\n                    var reason = new CancellationError(\"late cancellation observer\");\n\n                    promise._attachExtraTrace(reason);\n\n                    errorObj.e = reason;\n                    return errorObj;\n                  } else if (maybePromise.isPending()) {\n                    maybePromise._attachCancellationCallback(new FinallyHandlerCancelReaction(this));\n                  }\n                }\n\n                return maybePromise._then(succeed, fail, undefined, this, undefined);\n              }\n            }\n          }\n\n          if (promise.isRejected()) {\n            checkCancel(this);\n            errorObj.e = reasonOrValue;\n            return errorObj;\n          } else {\n            checkCancel(this);\n            return reasonOrValue;\n          }\n        }\n\n        Promise.prototype._passThrough = function (handler, type, success, fail) {\n          if (typeof handler !== \"function\") return this.then();\n          return this._then(success, fail, undefined, new PassThroughHandlerContext(this, type, handler), undefined);\n        };\n\n        Promise.prototype.lastly = Promise.prototype[\"finally\"] = function (handler) {\n          return this._passThrough(handler, 0, finallyHandler, finallyHandler);\n        };\n\n        Promise.prototype.tap = function (handler) {\n          return this._passThrough(handler, 1, finallyHandler);\n        };\n\n        Promise.prototype.tapCatch = function (handlerOrPredicate) {\n          var len = arguments.length;\n\n          if (len === 1) {\n            return this._passThrough(handlerOrPredicate, 1, undefined, finallyHandler);\n          } else {\n            var catchInstances = new Array(len - 1),\n                j = 0,\n                i;\n\n            for (i = 0; i < len - 1; ++i) {\n              var item = arguments[i];\n\n              if (util.isObject(item)) {\n                catchInstances[j++] = item;\n              } else {\n                return Promise.reject(new TypeError(\"tapCatch statement predicate: \" + \"expecting an object but got \" + util.classString(item)));\n              }\n            }\n\n            catchInstances.length = j;\n            var handler = arguments[i];\n            return this._passThrough(catchFilter(catchInstances, handler, this), 1, undefined, finallyHandler);\n          }\n        };\n\n        return PassThroughHandlerContext;\n      };\n    }, {\n      \"./catch_filter\": 7,\n      \"./util\": 36\n    }],\n    16: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug) {\n        var errors = _dereq_(\"./errors\");\n\n        var TypeError = errors.TypeError;\n\n        var util = _dereq_(\"./util\");\n\n        var errorObj = util.errorObj;\n        var tryCatch = util.tryCatch;\n        var yieldHandlers = [];\n\n        function promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n          for (var i = 0; i < yieldHandlers.length; ++i) {\n            traceParent._pushContext();\n\n            var result = tryCatch(yieldHandlers[i])(value);\n\n            traceParent._popContext();\n\n            if (result === errorObj) {\n              traceParent._pushContext();\n\n              var ret = Promise.reject(errorObj.e);\n\n              traceParent._popContext();\n\n              return ret;\n            }\n\n            var maybePromise = tryConvertToPromise(result, traceParent);\n            if (maybePromise instanceof Promise) return maybePromise;\n          }\n\n          return null;\n        }\n\n        function PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n          if (debug.cancellation()) {\n            var internal = new Promise(INTERNAL);\n\n            var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n\n            this._promise = internal.lastly(function () {\n              return _finallyPromise;\n            });\n\n            internal._captureStackTrace();\n\n            internal._setOnCancel(this);\n          } else {\n            var promise = this._promise = new Promise(INTERNAL);\n\n            promise._captureStackTrace();\n          }\n\n          this._stack = stack;\n          this._generatorFunction = generatorFunction;\n          this._receiver = receiver;\n          this._generator = undefined;\n          this._yieldHandlers = typeof yieldHandler === \"function\" ? [yieldHandler].concat(yieldHandlers) : yieldHandlers;\n          this._yieldedPromise = null;\n          this._cancellationPhase = false;\n        }\n\n        util.inherits(PromiseSpawn, Proxyable);\n\n        PromiseSpawn.prototype._isResolved = function () {\n          return this._promise === null;\n        };\n\n        PromiseSpawn.prototype._cleanup = function () {\n          this._promise = this._generator = null;\n\n          if (debug.cancellation() && this._finallyPromise !== null) {\n            this._finallyPromise._fulfill();\n\n            this._finallyPromise = null;\n          }\n        };\n\n        PromiseSpawn.prototype._promiseCancelled = function () {\n          if (this._isResolved()) return;\n          var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n          var result;\n\n          if (!implementsReturn) {\n            var reason = new Promise.CancellationError(\"generator .return() sentinel\");\n            Promise.coroutine.returnSentinel = reason;\n\n            this._promise._attachExtraTrace(reason);\n\n            this._promise._pushContext();\n\n            result = tryCatch(this._generator[\"throw\"]).call(this._generator, reason);\n\n            this._promise._popContext();\n          } else {\n            this._promise._pushContext();\n\n            result = tryCatch(this._generator[\"return\"]).call(this._generator, undefined);\n\n            this._promise._popContext();\n          }\n\n          this._cancellationPhase = true;\n          this._yieldedPromise = null;\n\n          this._continue(result);\n        };\n\n        PromiseSpawn.prototype._promiseFulfilled = function (value) {\n          this._yieldedPromise = null;\n\n          this._promise._pushContext();\n\n          var result = tryCatch(this._generator.next).call(this._generator, value);\n\n          this._promise._popContext();\n\n          this._continue(result);\n        };\n\n        PromiseSpawn.prototype._promiseRejected = function (reason) {\n          this._yieldedPromise = null;\n\n          this._promise._attachExtraTrace(reason);\n\n          this._promise._pushContext();\n\n          var result = tryCatch(this._generator[\"throw\"]).call(this._generator, reason);\n\n          this._promise._popContext();\n\n          this._continue(result);\n        };\n\n        PromiseSpawn.prototype._resultCancelled = function () {\n          if (this._yieldedPromise instanceof Promise) {\n            var promise = this._yieldedPromise;\n            this._yieldedPromise = null;\n            promise.cancel();\n          }\n        };\n\n        PromiseSpawn.prototype.promise = function () {\n          return this._promise;\n        };\n\n        PromiseSpawn.prototype._run = function () {\n          this._generator = this._generatorFunction.call(this._receiver);\n          this._receiver = this._generatorFunction = undefined;\n\n          this._promiseFulfilled(undefined);\n        };\n\n        PromiseSpawn.prototype._continue = function (result) {\n          var promise = this._promise;\n\n          if (result === errorObj) {\n            this._cleanup();\n\n            if (this._cancellationPhase) {\n              return promise.cancel();\n            } else {\n              return promise._rejectCallback(result.e, false);\n            }\n          }\n\n          var value = result.value;\n\n          if (result.done === true) {\n            this._cleanup();\n\n            if (this._cancellationPhase) {\n              return promise.cancel();\n            } else {\n              return promise._resolveCallback(value);\n            }\n          } else {\n            var maybePromise = tryConvertToPromise(value, this._promise);\n\n            if (!(maybePromise instanceof Promise)) {\n              maybePromise = promiseFromYieldHandler(maybePromise, this._yieldHandlers, this._promise);\n\n              if (maybePromise === null) {\n                this._promiseRejected(new TypeError(\"A value %s was yielded that could not be treated as a promise\\n\\n    See http://goo.gl/MqrFmX\\n\\n\".replace(\"%s\", String(value)) + \"From coroutine:\\n\" + this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")));\n\n                return;\n              }\n            }\n\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n\n            if ((bitField & 50397184) === 0) {\n              this._yieldedPromise = maybePromise;\n\n              maybePromise._proxy(this, null);\n            } else if ((bitField & 33554432) !== 0) {\n              Promise._async.invoke(this._promiseFulfilled, this, maybePromise._value());\n            } else if ((bitField & 16777216) !== 0) {\n              Promise._async.invoke(this._promiseRejected, this, maybePromise._reason());\n            } else {\n              this._promiseCancelled();\n            }\n          }\n        };\n\n        Promise.coroutine = function (generatorFunction, options) {\n          if (typeof generatorFunction !== \"function\") {\n            throw new TypeError(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n          }\n\n          var yieldHandler = Object(options).yieldHandler;\n          var PromiseSpawn$ = PromiseSpawn;\n          var stack = new Error().stack;\n          return function () {\n            var generator = generatorFunction.apply(this, arguments);\n            var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler, stack);\n            var ret = spawn.promise();\n            spawn._generator = generator;\n\n            spawn._promiseFulfilled(undefined);\n\n            return ret;\n          };\n        };\n\n        Promise.coroutine.addYieldHandler = function (fn) {\n          if (typeof fn !== \"function\") {\n            throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n          }\n\n          yieldHandlers.push(fn);\n        };\n\n        Promise.spawn = function (generatorFunction) {\n          debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n\n          if (typeof generatorFunction !== \"function\") {\n            return apiRejection(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n          }\n\n          var spawn = new PromiseSpawn(generatorFunction, this);\n          var ret = spawn.promise();\n\n          spawn._run(Promise.spawn);\n\n          return ret;\n        };\n      };\n    }, {\n      \"./errors\": 12,\n      \"./util\": 36\n    }],\n    17: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain) {\n        var util = _dereq_(\"./util\");\n\n        var canEvaluate = util.canEvaluate;\n        var tryCatch = util.tryCatch;\n        var errorObj = util.errorObj;\n        var reject;\n\n        if (!true) {\n          if (canEvaluate) {\n            var thenCallback = function thenCallback(i) {\n              return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n            };\n\n            var promiseSetter = function promiseSetter(i) {\n              return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n            };\n\n            var generateHolderClass = function generateHolderClass(total) {\n              var props = new Array(total);\n\n              for (var i = 0; i < props.length; ++i) {\n                props[i] = \"this.p\" + (i + 1);\n              }\n\n              var assignment = props.join(\" = \") + \" = null;\";\n              var cancellationCode = \"var promise;\\n\" + props.map(function (prop) {\n                return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n              }).join(\"\\n\");\n              var passedArguments = props.join(\", \");\n              var name = \"Holder$\" + total;\n              var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n              code = code.replace(/\\[TheName\\]/g, name).replace(/\\[TheTotal\\]/g, total).replace(/\\[ThePassedArguments\\]/g, passedArguments).replace(/\\[TheProperties\\]/g, assignment).replace(/\\[CancellationCode\\]/g, cancellationCode);\n              return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)(tryCatch, errorObj, Promise, async);\n            };\n\n            var holderClasses = [];\n            var thenCallbacks = [];\n            var promiseSetters = [];\n\n            for (var i = 0; i < 8; ++i) {\n              holderClasses.push(generateHolderClass(i + 1));\n              thenCallbacks.push(thenCallback(i + 1));\n              promiseSetters.push(promiseSetter(i + 1));\n            }\n\n            reject = function reject(reason) {\n              this._reject(reason);\n            };\n          }\n        }\n\n        Promise.join = function () {\n          var last = arguments.length - 1;\n          var fn;\n\n          if (last > 0 && typeof arguments[last] === \"function\") {\n            fn = arguments[last];\n\n            if (!true) {\n              if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n\n                ret._captureStackTrace();\n\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                  var maybePromise = tryConvertToPromise(arguments[i], ret);\n\n                  if (maybePromise instanceof Promise) {\n                    maybePromise = maybePromise._target();\n                    var bitField = maybePromise._bitField;\n                    ;\n\n                    if ((bitField & 50397184) === 0) {\n                      maybePromise._then(callbacks[i], reject, undefined, ret, holder);\n\n                      promiseSetters[i](maybePromise, holder);\n                      holder.asyncNeeded = false;\n                    } else if ((bitField & 33554432) !== 0) {\n                      callbacks[i].call(ret, maybePromise._value(), holder);\n                    } else if ((bitField & 16777216) !== 0) {\n                      ret._reject(maybePromise._reason());\n                    } else {\n                      ret._cancel();\n                    }\n                  } else {\n                    callbacks[i].call(ret, maybePromise, holder);\n                  }\n                }\n\n                if (!ret._isFateSealed()) {\n                  if (holder.asyncNeeded) {\n                    var domain = getDomain();\n\n                    if (domain !== null) {\n                      holder.fn = util.domainBind(domain, holder.fn);\n                    }\n                  }\n\n                  ret._setAsyncGuaranteed();\n\n                  ret._setOnCancel(holder);\n                }\n\n                return ret;\n              }\n            }\n          }\n\n          var args = [].slice.call(arguments);\n          ;\n          if (fn) args.pop();\n          var ret = new PromiseArray(args).promise();\n          return fn !== undefined ? ret.spread(fn) : ret;\n        };\n      };\n    }, {\n      \"./util\": 36\n    }],\n    18: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug) {\n        var getDomain = Promise._getDomain;\n\n        var util = _dereq_(\"./util\");\n\n        var tryCatch = util.tryCatch;\n        var errorObj = util.errorObj;\n        var async = Promise._async;\n\n        function MappingPromiseArray(promises, fn, limit, _filter) {\n          this.constructor$(promises);\n\n          this._promise._captureStackTrace();\n\n          var domain = getDomain();\n          this._callback = domain === null ? fn : util.domainBind(domain, fn);\n          this._preservedValues = _filter === INTERNAL ? new Array(this.length()) : null;\n          this._limit = limit;\n          this._inFlight = 0;\n          this._queue = [];\n          async.invoke(this._asyncInit, this, undefined);\n        }\n\n        util.inherits(MappingPromiseArray, PromiseArray);\n\n        MappingPromiseArray.prototype._asyncInit = function () {\n          this._init$(undefined, -2);\n        };\n\n        MappingPromiseArray.prototype._init = function () {};\n\n        MappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n          var values = this._values;\n          var length = this.length();\n          var preservedValues = this._preservedValues;\n          var limit = this._limit;\n\n          if (index < 0) {\n            index = index * -1 - 1;\n            values[index] = value;\n\n            if (limit >= 1) {\n              this._inFlight--;\n\n              this._drainQueue();\n\n              if (this._isResolved()) return true;\n            }\n          } else {\n            if (limit >= 1 && this._inFlight >= limit) {\n              values[index] = value;\n\n              this._queue.push(index);\n\n              return false;\n            }\n\n            if (preservedValues !== null) preservedValues[index] = value;\n            var promise = this._promise;\n            var callback = this._callback;\n\n            var receiver = promise._boundValue();\n\n            promise._pushContext();\n\n            var ret = tryCatch(callback).call(receiver, value, index, length);\n\n            var promiseCreated = promise._popContext();\n\n            debug.checkForgottenReturns(ret, promiseCreated, preservedValues !== null ? \"Promise.filter\" : \"Promise.map\", promise);\n\n            if (ret === errorObj) {\n              this._reject(ret.e);\n\n              return true;\n            }\n\n            var maybePromise = tryConvertToPromise(ret, this._promise);\n\n            if (maybePromise instanceof Promise) {\n              maybePromise = maybePromise._target();\n              var bitField = maybePromise._bitField;\n              ;\n\n              if ((bitField & 50397184) === 0) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n\n                maybePromise._proxy(this, (index + 1) * -1);\n\n                return false;\n              } else if ((bitField & 33554432) !== 0) {\n                ret = maybePromise._value();\n              } else if ((bitField & 16777216) !== 0) {\n                this._reject(maybePromise._reason());\n\n                return true;\n              } else {\n                this._cancel();\n\n                return true;\n              }\n            }\n\n            values[index] = ret;\n          }\n\n          var totalResolved = ++this._totalResolved;\n\n          if (totalResolved >= length) {\n            if (preservedValues !== null) {\n              this._filter(values, preservedValues);\n            } else {\n              this._resolve(values);\n            }\n\n            return true;\n          }\n\n          return false;\n        };\n\n        MappingPromiseArray.prototype._drainQueue = function () {\n          var queue = this._queue;\n          var limit = this._limit;\n          var values = this._values;\n\n          while (queue.length > 0 && this._inFlight < limit) {\n            if (this._isResolved()) return;\n            var index = queue.pop();\n\n            this._promiseFulfilled(values[index], index);\n          }\n        };\n\n        MappingPromiseArray.prototype._filter = function (booleans, values) {\n          var len = values.length;\n          var ret = new Array(len);\n          var j = 0;\n\n          for (var i = 0; i < len; ++i) {\n            if (booleans[i]) ret[j++] = values[i];\n          }\n\n          ret.length = j;\n\n          this._resolve(ret);\n        };\n\n        MappingPromiseArray.prototype.preservedValues = function () {\n          return this._preservedValues;\n        };\n\n        function map(promises, fn, options, _filter) {\n          if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n          }\n\n          var limit = 0;\n\n          if (options !== undefined) {\n            if (_typeof(options) === \"object\" && options !== null) {\n              if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(new TypeError(\"'concurrency' must be a number but it is \" + util.classString(options.concurrency)));\n              }\n\n              limit = options.concurrency;\n            } else {\n              return Promise.reject(new TypeError(\"options argument must be an object but it is \" + util.classString(options)));\n            }\n          }\n\n          limit = typeof limit === \"number\" && isFinite(limit) && limit >= 1 ? limit : 0;\n          return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n        }\n\n        Promise.prototype.map = function (fn, options) {\n          return map(this, fn, options, null);\n        };\n\n        Promise.map = function (promises, fn, options, _filter) {\n          return map(promises, fn, options, _filter);\n        };\n      };\n    }, {\n      \"./util\": 36\n    }],\n    19: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\n        var util = _dereq_(\"./util\");\n\n        var tryCatch = util.tryCatch;\n\n        Promise.method = function (fn) {\n          if (typeof fn !== \"function\") {\n            throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n          }\n\n          return function () {\n            var ret = new Promise(INTERNAL);\n\n            ret._captureStackTrace();\n\n            ret._pushContext();\n\n            var value = tryCatch(fn).apply(this, arguments);\n\n            var promiseCreated = ret._popContext();\n\n            debug.checkForgottenReturns(value, promiseCreated, \"Promise.method\", ret);\n\n            ret._resolveFromSyncValue(value);\n\n            return ret;\n          };\n        };\n\n        Promise.attempt = Promise[\"try\"] = function (fn) {\n          if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n          }\n\n          var ret = new Promise(INTERNAL);\n\n          ret._captureStackTrace();\n\n          ret._pushContext();\n\n          var value;\n\n          if (arguments.length > 1) {\n            debug.deprecated(\"calling Promise.try with more than 1 argument\");\n            var arg = arguments[1];\n            var ctx = arguments[2];\n            value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg) : tryCatch(fn).call(ctx, arg);\n          } else {\n            value = tryCatch(fn)();\n          }\n\n          var promiseCreated = ret._popContext();\n\n          debug.checkForgottenReturns(value, promiseCreated, \"Promise.try\", ret);\n\n          ret._resolveFromSyncValue(value);\n\n          return ret;\n        };\n\n        Promise.prototype._resolveFromSyncValue = function (value) {\n          if (value === util.errorObj) {\n            this._rejectCallback(value.e, false);\n          } else {\n            this._resolveCallback(value, true);\n          }\n        };\n      };\n    }, {\n      \"./util\": 36\n    }],\n    20: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"./util\");\n\n      var maybeWrapAsError = util.maybeWrapAsError;\n\n      var errors = _dereq_(\"./errors\");\n\n      var OperationalError = errors.OperationalError;\n\n      var es5 = _dereq_(\"./es5\");\n\n      function isUntypedError(obj) {\n        return obj instanceof Error && es5.getPrototypeOf(obj) === Error.prototype;\n      }\n\n      var rErrorKey = /^(?:name|message|stack|cause)$/;\n\n      function wrapAsOperationalError(obj) {\n        var ret;\n\n        if (isUntypedError(obj)) {\n          ret = new OperationalError(obj);\n          ret.name = obj.name;\n          ret.message = obj.message;\n          ret.stack = obj.stack;\n          var keys = es5.keys(obj);\n\n          for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n\n            if (!rErrorKey.test(key)) {\n              ret[key] = obj[key];\n            }\n          }\n\n          return ret;\n        }\n\n        util.markAsOriginatingFromRejection(obj);\n        return obj;\n      }\n\n      function nodebackForPromise(promise, multiArgs) {\n        return function (err, value) {\n          if (promise === null) return;\n\n          if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n\n            promise._attachExtraTrace(wrapped);\n\n            promise._reject(wrapped);\n          } else if (!multiArgs) {\n            promise._fulfill(value);\n          } else {\n            var args = [].slice.call(arguments, 1);\n            ;\n\n            promise._fulfill(args);\n          }\n\n          promise = null;\n        };\n      }\n\n      module.exports = nodebackForPromise;\n    }, {\n      \"./errors\": 12,\n      \"./es5\": 13,\n      \"./util\": 36\n    }],\n    21: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise) {\n        var util = _dereq_(\"./util\");\n\n        var async = Promise._async;\n        var tryCatch = util.tryCatch;\n        var errorObj = util.errorObj;\n\n        function spreadAdapter(val, nodeback) {\n          var promise = this;\n          if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n          var ret = tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n\n          if (ret === errorObj) {\n            async.throwLater(ret.e);\n          }\n        }\n\n        function successAdapter(val, nodeback) {\n          var promise = this;\n\n          var receiver = promise._boundValue();\n\n          var ret = val === undefined ? tryCatch(nodeback).call(receiver, null) : tryCatch(nodeback).call(receiver, null, val);\n\n          if (ret === errorObj) {\n            async.throwLater(ret.e);\n          }\n        }\n\n        function errorAdapter(reason, nodeback) {\n          var promise = this;\n\n          if (!reason) {\n            var newReason = new Error(reason + \"\");\n            newReason.cause = reason;\n            reason = newReason;\n          }\n\n          var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n\n          if (ret === errorObj) {\n            async.throwLater(ret.e);\n          }\n        }\n\n        Promise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback, options) {\n          if (typeof nodeback == \"function\") {\n            var adapter = successAdapter;\n\n            if (options !== undefined && Object(options).spread) {\n              adapter = spreadAdapter;\n            }\n\n            this._then(adapter, errorAdapter, undefined, this, nodeback);\n          }\n\n          return this;\n        };\n      };\n    }, {\n      \"./util\": 36\n    }],\n    22: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function () {\n        var makeSelfResolutionError = function makeSelfResolutionError() {\n          return new TypeError(\"circular promise resolution chain\\n\\n    See http://goo.gl/MqrFmX\\n\");\n        };\n\n        var reflectHandler = function reflectHandler() {\n          return new Promise.PromiseInspection(this._target());\n        };\n\n        var apiRejection = function apiRejection(msg) {\n          return Promise.reject(new TypeError(msg));\n        };\n\n        function Proxyable() {}\n\n        var UNDEFINED_BINDING = {};\n\n        var util = _dereq_(\"./util\");\n\n        var getDomain;\n\n        if (util.isNode) {\n          getDomain = function getDomain() {\n            var ret = process.domain;\n            if (ret === undefined) ret = null;\n            return ret;\n          };\n        } else {\n          getDomain = function getDomain() {\n            return null;\n          };\n        }\n\n        util.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\n        var es5 = _dereq_(\"./es5\");\n\n        var Async = _dereq_(\"./async\");\n\n        var async = new Async();\n        es5.defineProperty(Promise, \"_async\", {\n          value: async\n        });\n\n        var errors = _dereq_(\"./errors\");\n\n        var TypeError = Promise.TypeError = errors.TypeError;\n        Promise.RangeError = errors.RangeError;\n        var CancellationError = Promise.CancellationError = errors.CancellationError;\n        Promise.TimeoutError = errors.TimeoutError;\n        Promise.OperationalError = errors.OperationalError;\n        Promise.RejectionError = errors.OperationalError;\n        Promise.AggregateError = errors.AggregateError;\n\n        var INTERNAL = function INTERNAL() {};\n\n        var APPLY = {};\n        var NEXT_FILTER = {};\n\n        var tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\n\n        var PromiseArray = _dereq_(\"./promise_array\")(Promise, INTERNAL, tryConvertToPromise, apiRejection, Proxyable);\n\n        var Context = _dereq_(\"./context\")(Promise);\n        /*jshint unused:false*/\n\n\n        var createContext = Context.create;\n\n        var debug = _dereq_(\"./debuggability\")(Promise, Context);\n\n        var CapturedTrace = debug.CapturedTrace;\n\n        var PassThroughHandlerContext = _dereq_(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\n\n        var catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\n\n        var nodebackForPromise = _dereq_(\"./nodeback\");\n\n        var errorObj = util.errorObj;\n        var tryCatch = util.tryCatch;\n\n        function check(self, executor) {\n          if (self == null || self.constructor !== Promise) {\n            throw new TypeError(\"the promise constructor cannot be invoked directly\\n\\n    See http://goo.gl/MqrFmX\\n\");\n          }\n\n          if (typeof executor !== \"function\") {\n            throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n          }\n        }\n\n        function Promise(executor) {\n          if (executor !== INTERNAL) {\n            check(this, executor);\n          }\n\n          this._bitField = 0;\n          this._fulfillmentHandler0 = undefined;\n          this._rejectionHandler0 = undefined;\n          this._promise0 = undefined;\n          this._receiver0 = undefined;\n\n          this._resolveFromExecutor(executor);\n\n          this._promiseCreated();\n\n          this._fireEvent(\"promiseCreated\", this);\n        }\n\n        Promise.prototype.toString = function () {\n          return \"[object Promise]\";\n        };\n\n        Promise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n          var len = arguments.length;\n\n          if (len > 1) {\n            var catchInstances = new Array(len - 1),\n                j = 0,\n                i;\n\n            for (i = 0; i < len - 1; ++i) {\n              var item = arguments[i];\n\n              if (util.isObject(item)) {\n                catchInstances[j++] = item;\n              } else {\n                return apiRejection(\"Catch statement predicate: \" + \"expecting an object but got \" + util.classString(item));\n              }\n            }\n\n            catchInstances.length = j;\n            fn = arguments[i];\n            return this.then(undefined, catchFilter(catchInstances, fn, this));\n          }\n\n          return this.then(undefined, fn);\n        };\n\n        Promise.prototype.reflect = function () {\n          return this._then(reflectHandler, reflectHandler, undefined, this, undefined);\n        };\n\n        Promise.prototype.then = function (didFulfill, didReject) {\n          if (debug.warnings() && arguments.length > 0 && typeof didFulfill !== \"function\" && typeof didReject !== \"function\") {\n            var msg = \".then() only accepts functions but was passed: \" + util.classString(didFulfill);\n\n            if (arguments.length > 1) {\n              msg += \", \" + util.classString(didReject);\n            }\n\n            this._warn(msg);\n          }\n\n          return this._then(didFulfill, didReject, undefined, undefined, undefined);\n        };\n\n        Promise.prototype.done = function (didFulfill, didReject) {\n          var promise = this._then(didFulfill, didReject, undefined, undefined, undefined);\n\n          promise._setIsFinal();\n        };\n\n        Promise.prototype.spread = function (fn) {\n          if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n          }\n\n          return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n        };\n\n        Promise.prototype.toJSON = function () {\n          var ret = {\n            isFulfilled: false,\n            isRejected: false,\n            fulfillmentValue: undefined,\n            rejectionReason: undefined\n          };\n\n          if (this.isFulfilled()) {\n            ret.fulfillmentValue = this.value();\n            ret.isFulfilled = true;\n          } else if (this.isRejected()) {\n            ret.rejectionReason = this.reason();\n            ret.isRejected = true;\n          }\n\n          return ret;\n        };\n\n        Promise.prototype.all = function () {\n          if (arguments.length > 0) {\n            this._warn(\".all() was passed arguments but it does not take any\");\n          }\n\n          return new PromiseArray(this).promise();\n        };\n\n        Promise.prototype.error = function (fn) {\n          return this.caught(util.originatesFromRejection, fn);\n        };\n\n        Promise.getNewLibraryCopy = module.exports;\n\n        Promise.is = function (val) {\n          return val instanceof Promise;\n        };\n\n        Promise.fromNode = Promise.fromCallback = function (fn) {\n          var ret = new Promise(INTERNAL);\n\n          ret._captureStackTrace();\n\n          var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs : false;\n          var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n\n          if (result === errorObj) {\n            ret._rejectCallback(result.e, true);\n          }\n\n          if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n          return ret;\n        };\n\n        Promise.all = function (promises) {\n          return new PromiseArray(promises).promise();\n        };\n\n        Promise.cast = function (obj) {\n          var ret = tryConvertToPromise(obj);\n\n          if (!(ret instanceof Promise)) {\n            ret = new Promise(INTERNAL);\n\n            ret._captureStackTrace();\n\n            ret._setFulfilled();\n\n            ret._rejectionHandler0 = obj;\n          }\n\n          return ret;\n        };\n\n        Promise.resolve = Promise.fulfilled = Promise.cast;\n\n        Promise.reject = Promise.rejected = function (reason) {\n          var ret = new Promise(INTERNAL);\n\n          ret._captureStackTrace();\n\n          ret._rejectCallback(reason, true);\n\n          return ret;\n        };\n\n        Promise.setScheduler = function (fn) {\n          if (typeof fn !== \"function\") {\n            throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n          }\n\n          return async.setScheduler(fn);\n        };\n\n        Promise.prototype._then = function (didFulfill, didReject, _, receiver, internalData) {\n          var haveInternalData = internalData !== undefined;\n          var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n\n          var target = this._target();\n\n          var bitField = target._bitField;\n\n          if (!haveInternalData) {\n            promise._propagateFrom(this, 3);\n\n            promise._captureStackTrace();\n\n            if (receiver === undefined && (this._bitField & 2097152) !== 0) {\n              if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n              } else {\n                receiver = target === this ? undefined : this._boundTo;\n              }\n            }\n\n            this._fireEvent(\"promiseChained\", this, promise);\n          }\n\n          var domain = getDomain();\n\n          if (!((bitField & 50397184) === 0)) {\n            var handler,\n                value,\n                settler = target._settlePromiseCtx;\n\n            if ((bitField & 33554432) !== 0) {\n              value = target._rejectionHandler0;\n              handler = didFulfill;\n            } else if ((bitField & 16777216) !== 0) {\n              value = target._fulfillmentHandler0;\n              handler = didReject;\n\n              target._unsetRejectionIsUnhandled();\n            } else {\n              settler = target._settlePromiseLateCancellationObserver;\n              value = new CancellationError(\"late cancellation observer\");\n\n              target._attachExtraTrace(value);\n\n              handler = didReject;\n            }\n\n            async.invoke(settler, target, {\n              handler: domain === null ? handler : typeof handler === \"function\" && util.domainBind(domain, handler),\n              promise: promise,\n              receiver: receiver,\n              value: value\n            });\n          } else {\n            target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n          }\n\n          return promise;\n        };\n\n        Promise.prototype._length = function () {\n          return this._bitField & 65535;\n        };\n\n        Promise.prototype._isFateSealed = function () {\n          return (this._bitField & 117506048) !== 0;\n        };\n\n        Promise.prototype._isFollowing = function () {\n          return (this._bitField & 67108864) === 67108864;\n        };\n\n        Promise.prototype._setLength = function (len) {\n          this._bitField = this._bitField & -65536 | len & 65535;\n        };\n\n        Promise.prototype._setFulfilled = function () {\n          this._bitField = this._bitField | 33554432;\n\n          this._fireEvent(\"promiseFulfilled\", this);\n        };\n\n        Promise.prototype._setRejected = function () {\n          this._bitField = this._bitField | 16777216;\n\n          this._fireEvent(\"promiseRejected\", this);\n        };\n\n        Promise.prototype._setFollowing = function () {\n          this._bitField = this._bitField | 67108864;\n\n          this._fireEvent(\"promiseResolved\", this);\n        };\n\n        Promise.prototype._setIsFinal = function () {\n          this._bitField = this._bitField | 4194304;\n        };\n\n        Promise.prototype._isFinal = function () {\n          return (this._bitField & 4194304) > 0;\n        };\n\n        Promise.prototype._unsetCancelled = function () {\n          this._bitField = this._bitField & ~65536;\n        };\n\n        Promise.prototype._setCancelled = function () {\n          this._bitField = this._bitField | 65536;\n\n          this._fireEvent(\"promiseCancelled\", this);\n        };\n\n        Promise.prototype._setWillBeCancelled = function () {\n          this._bitField = this._bitField | 8388608;\n        };\n\n        Promise.prototype._setAsyncGuaranteed = function () {\n          if (async.hasCustomScheduler()) return;\n          this._bitField = this._bitField | 134217728;\n        };\n\n        Promise.prototype._receiverAt = function (index) {\n          var ret = index === 0 ? this._receiver0 : this[index * 4 - 4 + 3];\n\n          if (ret === UNDEFINED_BINDING) {\n            return undefined;\n          } else if (ret === undefined && this._isBound()) {\n            return this._boundValue();\n          }\n\n          return ret;\n        };\n\n        Promise.prototype._promiseAt = function (index) {\n          return this[index * 4 - 4 + 2];\n        };\n\n        Promise.prototype._fulfillmentHandlerAt = function (index) {\n          return this[index * 4 - 4 + 0];\n        };\n\n        Promise.prototype._rejectionHandlerAt = function (index) {\n          return this[index * 4 - 4 + 1];\n        };\n\n        Promise.prototype._boundValue = function () {};\n\n        Promise.prototype._migrateCallback0 = function (follower) {\n          var bitField = follower._bitField;\n          var fulfill = follower._fulfillmentHandler0;\n          var reject = follower._rejectionHandler0;\n          var promise = follower._promise0;\n\n          var receiver = follower._receiverAt(0);\n\n          if (receiver === undefined) receiver = UNDEFINED_BINDING;\n\n          this._addCallbacks(fulfill, reject, promise, receiver, null);\n        };\n\n        Promise.prototype._migrateCallbackAt = function (follower, index) {\n          var fulfill = follower._fulfillmentHandlerAt(index);\n\n          var reject = follower._rejectionHandlerAt(index);\n\n          var promise = follower._promiseAt(index);\n\n          var receiver = follower._receiverAt(index);\n\n          if (receiver === undefined) receiver = UNDEFINED_BINDING;\n\n          this._addCallbacks(fulfill, reject, promise, receiver, null);\n        };\n\n        Promise.prototype._addCallbacks = function (fulfill, reject, promise, receiver, domain) {\n          var index = this._length();\n\n          if (index >= 65535 - 4) {\n            index = 0;\n\n            this._setLength(0);\n          }\n\n          if (index === 0) {\n            this._promise0 = promise;\n            this._receiver0 = receiver;\n\n            if (typeof fulfill === \"function\") {\n              this._fulfillmentHandler0 = domain === null ? fulfill : util.domainBind(domain, fulfill);\n            }\n\n            if (typeof reject === \"function\") {\n              this._rejectionHandler0 = domain === null ? reject : util.domainBind(domain, reject);\n            }\n          } else {\n            var base = index * 4 - 4;\n            this[base + 2] = promise;\n            this[base + 3] = receiver;\n\n            if (typeof fulfill === \"function\") {\n              this[base + 0] = domain === null ? fulfill : util.domainBind(domain, fulfill);\n            }\n\n            if (typeof reject === \"function\") {\n              this[base + 1] = domain === null ? reject : util.domainBind(domain, reject);\n            }\n          }\n\n          this._setLength(index + 1);\n\n          return index;\n        };\n\n        Promise.prototype._proxy = function (proxyable, arg) {\n          this._addCallbacks(undefined, undefined, arg, proxyable, null);\n        };\n\n        Promise.prototype._resolveCallback = function (value, shouldBind) {\n          if ((this._bitField & 117506048) !== 0) return;\n          if (value === this) return this._rejectCallback(makeSelfResolutionError(), false);\n          var maybePromise = tryConvertToPromise(value, this);\n          if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n          if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n          var promise = maybePromise._target();\n\n          if (promise === this) {\n            this._reject(makeSelfResolutionError());\n\n            return;\n          }\n\n          var bitField = promise._bitField;\n\n          if ((bitField & 50397184) === 0) {\n            var len = this._length();\n\n            if (len > 0) promise._migrateCallback0(this);\n\n            for (var i = 1; i < len; ++i) {\n              promise._migrateCallbackAt(this, i);\n            }\n\n            this._setFollowing();\n\n            this._setLength(0);\n\n            this._setFollowee(promise);\n          } else if ((bitField & 33554432) !== 0) {\n            this._fulfill(promise._value());\n          } else if ((bitField & 16777216) !== 0) {\n            this._reject(promise._reason());\n          } else {\n            var reason = new CancellationError(\"late cancellation observer\");\n\n            promise._attachExtraTrace(reason);\n\n            this._reject(reason);\n          }\n        };\n\n        Promise.prototype._rejectCallback = function (reason, synchronous, ignoreNonErrorWarnings) {\n          var trace = util.ensureErrorObject(reason);\n          var hasStack = trace === reason;\n\n          if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n            var message = \"a promise was rejected with a non-error: \" + util.classString(reason);\n\n            this._warn(message, true);\n          }\n\n          this._attachExtraTrace(trace, synchronous ? hasStack : false);\n\n          this._reject(reason);\n        };\n\n        Promise.prototype._resolveFromExecutor = function (executor) {\n          if (executor === INTERNAL) return;\n          var promise = this;\n\n          this._captureStackTrace();\n\n          this._pushContext();\n\n          var synchronous = true;\n\n          var r = this._execute(executor, function (value) {\n            promise._resolveCallback(value);\n          }, function (reason) {\n            promise._rejectCallback(reason, synchronous);\n          });\n\n          synchronous = false;\n\n          this._popContext();\n\n          if (r !== undefined) {\n            promise._rejectCallback(r, true);\n          }\n        };\n\n        Promise.prototype._settlePromiseFromHandler = function (handler, receiver, value, promise) {\n          var bitField = promise._bitField;\n          if ((bitField & 65536) !== 0) return;\n\n          promise._pushContext();\n\n          var x;\n\n          if (receiver === APPLY) {\n            if (!value || typeof value.length !== \"number\") {\n              x = errorObj;\n              x.e = new TypeError(\"cannot .spread() a non-array: \" + util.classString(value));\n            } else {\n              x = tryCatch(handler).apply(this._boundValue(), value);\n            }\n          } else {\n            x = tryCatch(handler).call(receiver, value);\n          }\n\n          var promiseCreated = promise._popContext();\n\n          bitField = promise._bitField;\n          if ((bitField & 65536) !== 0) return;\n\n          if (x === NEXT_FILTER) {\n            promise._reject(value);\n          } else if (x === errorObj) {\n            promise._rejectCallback(x.e, false);\n          } else {\n            debug.checkForgottenReturns(x, promiseCreated, \"\", promise, this);\n\n            promise._resolveCallback(x);\n          }\n        };\n\n        Promise.prototype._target = function () {\n          var ret = this;\n\n          while (ret._isFollowing()) {\n            ret = ret._followee();\n          }\n\n          return ret;\n        };\n\n        Promise.prototype._followee = function () {\n          return this._rejectionHandler0;\n        };\n\n        Promise.prototype._setFollowee = function (promise) {\n          this._rejectionHandler0 = promise;\n        };\n\n        Promise.prototype._settlePromise = function (promise, handler, receiver, value) {\n          var isPromise = promise instanceof Promise;\n          var bitField = this._bitField;\n          var asyncGuaranteed = (bitField & 134217728) !== 0;\n\n          if ((bitField & 65536) !== 0) {\n            if (isPromise) promise._invokeInternalOnCancel();\n\n            if (receiver instanceof PassThroughHandlerContext && receiver.isFinallyHandler()) {\n              receiver.cancelPromise = promise;\n\n              if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n              }\n            } else if (handler === reflectHandler) {\n              promise._fulfill(reflectHandler.call(receiver));\n            } else if (receiver instanceof Proxyable) {\n              receiver._promiseCancelled(promise);\n            } else if (isPromise || promise instanceof PromiseArray) {\n              promise._cancel();\n            } else {\n              receiver.cancel();\n            }\n          } else if (typeof handler === \"function\") {\n            if (!isPromise) {\n              handler.call(receiver, value, promise);\n            } else {\n              if (asyncGuaranteed) promise._setAsyncGuaranteed();\n\n              this._settlePromiseFromHandler(handler, receiver, value, promise);\n            }\n          } else if (receiver instanceof Proxyable) {\n            if (!receiver._isResolved()) {\n              if ((bitField & 33554432) !== 0) {\n                receiver._promiseFulfilled(value, promise);\n              } else {\n                receiver._promiseRejected(value, promise);\n              }\n            }\n          } else if (isPromise) {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n\n            if ((bitField & 33554432) !== 0) {\n              promise._fulfill(value);\n            } else {\n              promise._reject(value);\n            }\n          }\n        };\n\n        Promise.prototype._settlePromiseLateCancellationObserver = function (ctx) {\n          var handler = ctx.handler;\n          var promise = ctx.promise;\n          var receiver = ctx.receiver;\n          var value = ctx.value;\n\n          if (typeof handler === \"function\") {\n            if (!(promise instanceof Promise)) {\n              handler.call(receiver, value, promise);\n            } else {\n              this._settlePromiseFromHandler(handler, receiver, value, promise);\n            }\n          } else if (promise instanceof Promise) {\n            promise._reject(value);\n          }\n        };\n\n        Promise.prototype._settlePromiseCtx = function (ctx) {\n          this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n        };\n\n        Promise.prototype._settlePromise0 = function (handler, value, bitField) {\n          var promise = this._promise0;\n\n          var receiver = this._receiverAt(0);\n\n          this._promise0 = undefined;\n          this._receiver0 = undefined;\n\n          this._settlePromise(promise, handler, receiver, value);\n        };\n\n        Promise.prototype._clearCallbackDataAtIndex = function (index) {\n          var base = index * 4 - 4;\n          this[base + 2] = this[base + 3] = this[base + 0] = this[base + 1] = undefined;\n        };\n\n        Promise.prototype._fulfill = function (value) {\n          var bitField = this._bitField;\n          if ((bitField & 117506048) >>> 16) return;\n\n          if (value === this) {\n            var err = makeSelfResolutionError();\n\n            this._attachExtraTrace(err);\n\n            return this._reject(err);\n          }\n\n          this._setFulfilled();\n\n          this._rejectionHandler0 = value;\n\n          if ((bitField & 65535) > 0) {\n            if ((bitField & 134217728) !== 0) {\n              this._settlePromises();\n            } else {\n              async.settlePromises(this);\n            }\n\n            this._dereferenceTrace();\n          }\n        };\n\n        Promise.prototype._reject = function (reason) {\n          var bitField = this._bitField;\n          if ((bitField & 117506048) >>> 16) return;\n\n          this._setRejected();\n\n          this._fulfillmentHandler0 = reason;\n\n          if (this._isFinal()) {\n            return async.fatalError(reason, util.isNode);\n          }\n\n          if ((bitField & 65535) > 0) {\n            async.settlePromises(this);\n          } else {\n            this._ensurePossibleRejectionHandled();\n          }\n        };\n\n        Promise.prototype._fulfillPromises = function (len, value) {\n          for (var i = 1; i < len; i++) {\n            var handler = this._fulfillmentHandlerAt(i);\n\n            var promise = this._promiseAt(i);\n\n            var receiver = this._receiverAt(i);\n\n            this._clearCallbackDataAtIndex(i);\n\n            this._settlePromise(promise, handler, receiver, value);\n          }\n        };\n\n        Promise.prototype._rejectPromises = function (len, reason) {\n          for (var i = 1; i < len; i++) {\n            var handler = this._rejectionHandlerAt(i);\n\n            var promise = this._promiseAt(i);\n\n            var receiver = this._receiverAt(i);\n\n            this._clearCallbackDataAtIndex(i);\n\n            this._settlePromise(promise, handler, receiver, reason);\n          }\n        };\n\n        Promise.prototype._settlePromises = function () {\n          var bitField = this._bitField;\n          var len = bitField & 65535;\n\n          if (len > 0) {\n            if ((bitField & 16842752) !== 0) {\n              var reason = this._fulfillmentHandler0;\n\n              this._settlePromise0(this._rejectionHandler0, reason, bitField);\n\n              this._rejectPromises(len, reason);\n            } else {\n              var value = this._rejectionHandler0;\n\n              this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n\n              this._fulfillPromises(len, value);\n            }\n\n            this._setLength(0);\n          }\n\n          this._clearCancellationData();\n        };\n\n        Promise.prototype._settledValue = function () {\n          var bitField = this._bitField;\n\n          if ((bitField & 33554432) !== 0) {\n            return this._rejectionHandler0;\n          } else if ((bitField & 16777216) !== 0) {\n            return this._fulfillmentHandler0;\n          }\n        };\n\n        function deferResolve(v) {\n          this.promise._resolveCallback(v);\n        }\n\n        function deferReject(v) {\n          this.promise._rejectCallback(v, false);\n        }\n\n        Promise.defer = Promise.pending = function () {\n          debug.deprecated(\"Promise.defer\", \"new Promise\");\n          var promise = new Promise(INTERNAL);\n          return {\n            promise: promise,\n            resolve: deferResolve,\n            reject: deferReject\n          };\n        };\n\n        util.notEnumerableProp(Promise, \"_makeSelfResolutionError\", makeSelfResolutionError);\n\n        _dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug);\n\n        _dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n\n        _dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n\n        _dereq_(\"./direct_resolve\")(Promise);\n\n        _dereq_(\"./synchronous_inspection\")(Promise);\n\n        _dereq_(\"./join\")(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\n\n        Promise.Promise = Promise;\n        Promise.version = \"3.5.4\";\n\n        _dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n\n        _dereq_('./call_get.js')(Promise);\n\n        _dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n\n        _dereq_('./timers.js')(Promise, INTERNAL, debug);\n\n        _dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n\n        _dereq_('./nodeify.js')(Promise);\n\n        _dereq_('./promisify.js')(Promise, INTERNAL);\n\n        _dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n\n        _dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n\n        _dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n\n        _dereq_('./settle.js')(Promise, PromiseArray, debug);\n\n        _dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n\n        _dereq_('./filter.js')(Promise, INTERNAL);\n\n        _dereq_('./each.js')(Promise, INTERNAL);\n\n        _dereq_('./any.js')(Promise);\n\n        util.toFastProperties(Promise);\n        util.toFastProperties(Promise.prototype);\n\n        function fillTypes(value) {\n          var p = new Promise(INTERNAL);\n          p._fulfillmentHandler0 = value;\n          p._rejectionHandler0 = value;\n          p._promise0 = value;\n          p._receiver0 = value;\n        } // Complete slack tracking, opt out of field-type tracking and           \n        // stabilize map                                                         \n\n\n        fillTypes({\n          a: 1\n        });\n        fillTypes({\n          b: 2\n        });\n        fillTypes({\n          c: 3\n        });\n        fillTypes(1);\n        fillTypes(function () {});\n        fillTypes(undefined);\n        fillTypes(false);\n        fillTypes(new Promise(INTERNAL));\n        debug.setBounds(Async.firstLineError, util.lastLineError);\n        return Promise;\n      };\n    }, {\n      \"./any.js\": 1,\n      \"./async\": 2,\n      \"./bind\": 3,\n      \"./call_get.js\": 5,\n      \"./cancel\": 6,\n      \"./catch_filter\": 7,\n      \"./context\": 8,\n      \"./debuggability\": 9,\n      \"./direct_resolve\": 10,\n      \"./each.js\": 11,\n      \"./errors\": 12,\n      \"./es5\": 13,\n      \"./filter.js\": 14,\n      \"./finally\": 15,\n      \"./generators.js\": 16,\n      \"./join\": 17,\n      \"./map.js\": 18,\n      \"./method\": 19,\n      \"./nodeback\": 20,\n      \"./nodeify.js\": 21,\n      \"./promise_array\": 23,\n      \"./promisify.js\": 24,\n      \"./props.js\": 25,\n      \"./race.js\": 27,\n      \"./reduce.js\": 28,\n      \"./settle.js\": 30,\n      \"./some.js\": 31,\n      \"./synchronous_inspection\": 32,\n      \"./thenables\": 33,\n      \"./timers.js\": 34,\n      \"./using.js\": 35,\n      \"./util\": 36\n    }],\n    23: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, INTERNAL, tryConvertToPromise, apiRejection, Proxyable) {\n        var util = _dereq_(\"./util\");\n\n        var isArray = util.isArray;\n\n        function toResolutionValue(val) {\n          switch (val) {\n            case -2:\n              return [];\n\n            case -3:\n              return {};\n\n            case -6:\n              return new Map();\n          }\n        }\n\n        function PromiseArray(values) {\n          var promise = this._promise = new Promise(INTERNAL);\n\n          if (values instanceof Promise) {\n            promise._propagateFrom(values, 3);\n          }\n\n          promise._setOnCancel(this);\n\n          this._values = values;\n          this._length = 0;\n          this._totalResolved = 0;\n\n          this._init(undefined, -2);\n        }\n\n        util.inherits(PromiseArray, Proxyable);\n\n        PromiseArray.prototype.length = function () {\n          return this._length;\n        };\n\n        PromiseArray.prototype.promise = function () {\n          return this._promise;\n        };\n\n        PromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n          var values = tryConvertToPromise(this._values, this._promise);\n\n          if (values instanceof Promise) {\n            values = values._target();\n            var bitField = values._bitField;\n            ;\n            this._values = values;\n\n            if ((bitField & 50397184) === 0) {\n              this._promise._setAsyncGuaranteed();\n\n              return values._then(init, this._reject, undefined, this, resolveValueIfEmpty);\n            } else if ((bitField & 33554432) !== 0) {\n              values = values._value();\n            } else if ((bitField & 16777216) !== 0) {\n              return this._reject(values._reason());\n            } else {\n              return this._cancel();\n            }\n          }\n\n          values = util.asArray(values);\n\n          if (values === null) {\n            var err = apiRejection(\"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n\n            this._promise._rejectCallback(err, false);\n\n            return;\n          }\n\n          if (values.length === 0) {\n            if (resolveValueIfEmpty === -5) {\n              this._resolveEmptyArray();\n            } else {\n              this._resolve(toResolutionValue(resolveValueIfEmpty));\n            }\n\n            return;\n          }\n\n          this._iterate(values);\n        };\n\n        PromiseArray.prototype._iterate = function (values) {\n          var len = this.getActualLength(values.length);\n          this._length = len;\n          this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n          var result = this._promise;\n          var isResolved = false;\n          var bitField = null;\n\n          for (var i = 0; i < len; ++i) {\n            var maybePromise = tryConvertToPromise(values[i], result);\n\n            if (maybePromise instanceof Promise) {\n              maybePromise = maybePromise._target();\n              bitField = maybePromise._bitField;\n            } else {\n              bitField = null;\n            }\n\n            if (isResolved) {\n              if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n              }\n            } else if (bitField !== null) {\n              if ((bitField & 50397184) === 0) {\n                maybePromise._proxy(this, i);\n\n                this._values[i] = maybePromise;\n              } else if ((bitField & 33554432) !== 0) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n              } else if ((bitField & 16777216) !== 0) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n              } else {\n                isResolved = this._promiseCancelled(i);\n              }\n            } else {\n              isResolved = this._promiseFulfilled(maybePromise, i);\n            }\n          }\n\n          if (!isResolved) result._setAsyncGuaranteed();\n        };\n\n        PromiseArray.prototype._isResolved = function () {\n          return this._values === null;\n        };\n\n        PromiseArray.prototype._resolve = function (value) {\n          this._values = null;\n\n          this._promise._fulfill(value);\n        };\n\n        PromiseArray.prototype._cancel = function () {\n          if (this._isResolved() || !this._promise._isCancellable()) return;\n          this._values = null;\n\n          this._promise._cancel();\n        };\n\n        PromiseArray.prototype._reject = function (reason) {\n          this._values = null;\n\n          this._promise._rejectCallback(reason, false);\n        };\n\n        PromiseArray.prototype._promiseFulfilled = function (value, index) {\n          this._values[index] = value;\n          var totalResolved = ++this._totalResolved;\n\n          if (totalResolved >= this._length) {\n            this._resolve(this._values);\n\n            return true;\n          }\n\n          return false;\n        };\n\n        PromiseArray.prototype._promiseCancelled = function () {\n          this._cancel();\n\n          return true;\n        };\n\n        PromiseArray.prototype._promiseRejected = function (reason) {\n          this._totalResolved++;\n\n          this._reject(reason);\n\n          return true;\n        };\n\n        PromiseArray.prototype._resultCancelled = function () {\n          if (this._isResolved()) return;\n          var values = this._values;\n\n          this._cancel();\n\n          if (values instanceof Promise) {\n            values.cancel();\n          } else {\n            for (var i = 0; i < values.length; ++i) {\n              if (values[i] instanceof Promise) {\n                values[i].cancel();\n              }\n            }\n          }\n        };\n\n        PromiseArray.prototype.shouldCopyValues = function () {\n          return true;\n        };\n\n        PromiseArray.prototype.getActualLength = function (len) {\n          return len;\n        };\n\n        return PromiseArray;\n      };\n    }, {\n      \"./util\": 36\n    }],\n    24: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, INTERNAL) {\n        var THIS = {};\n\n        var util = _dereq_(\"./util\");\n\n        var nodebackForPromise = _dereq_(\"./nodeback\");\n\n        var withAppended = util.withAppended;\n        var maybeWrapAsError = util.maybeWrapAsError;\n        var canEvaluate = util.canEvaluate;\n\n        var TypeError = _dereq_(\"./errors\").TypeError;\n\n        var defaultSuffix = \"Async\";\n        var defaultPromisified = {\n          __isPromisified__: true\n        };\n        var noCopyProps = [\"arity\", \"length\", \"name\", \"arguments\", \"caller\", \"callee\", \"prototype\", \"__isPromisified__\"];\n        var noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\n        var defaultFilter = function defaultFilter(name) {\n          return util.isIdentifier(name) && name.charAt(0) !== \"_\" && name !== \"constructor\";\n        };\n\n        function propsFilter(key) {\n          return !noCopyPropsPattern.test(key);\n        }\n\n        function isPromisified(fn) {\n          try {\n            return fn.__isPromisified__ === true;\n          } catch (e) {\n            return false;\n          }\n        }\n\n        function hasPromisified(obj, key, suffix) {\n          var val = util.getDataPropertyOrDefault(obj, key + suffix, defaultPromisified);\n          return val ? isPromisified(val) : false;\n        }\n\n        function checkValid(ret, suffix, suffixRegexp) {\n          for (var i = 0; i < ret.length; i += 2) {\n            var key = ret[i];\n\n            if (suffixRegexp.test(key)) {\n              var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n\n              for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                  throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\n\\n    See http://goo.gl/MqrFmX\\n\".replace(\"%s\", suffix));\n                }\n              }\n            }\n          }\n        }\n\n        function promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n          var keys = util.inheritedDataKeys(obj);\n          var ret = [];\n\n          for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            var value = obj[key];\n            var passesDefaultFilter = filter === defaultFilter ? true : defaultFilter(key, value, obj);\n\n            if (typeof value === \"function\" && !isPromisified(value) && !hasPromisified(obj, key, suffix) && filter(key, value, obj, passesDefaultFilter)) {\n              ret.push(key, value);\n            }\n          }\n\n          checkValid(ret, suffix, suffixRegexp);\n          return ret;\n        }\n\n        var escapeIdentRegex = function escapeIdentRegex(str) {\n          return str.replace(/([$])/, \"\\\\$\");\n        };\n\n        var makeNodePromisifiedEval;\n\n        if (!true) {\n          var switchCaseArgumentOrder = function switchCaseArgumentOrder(likelyArgumentCount) {\n            var ret = [likelyArgumentCount];\n            var min = Math.max(0, likelyArgumentCount - 1 - 3);\n\n            for (var i = likelyArgumentCount - 1; i >= min; --i) {\n              ret.push(i);\n            }\n\n            for (var i = likelyArgumentCount + 1; i <= 3; ++i) {\n              ret.push(i);\n            }\n\n            return ret;\n          };\n\n          var argumentSequence = function argumentSequence(argumentCount) {\n            return util.filledRange(argumentCount, \"_arg\", \"\");\n          };\n\n          var parameterDeclaration = function parameterDeclaration(parameterCount) {\n            return util.filledRange(Math.max(parameterCount, 3), \"_arg\", \"\");\n          };\n\n          var parameterCount = function parameterCount(fn) {\n            if (typeof fn.length === \"number\") {\n              return Math.max(Math.min(fn.length, 1023 + 1), 0);\n            }\n\n            return 0;\n          };\n\n          makeNodePromisifiedEval = function makeNodePromisifiedEval(callback, receiver, originalName, fn, _, multiArgs) {\n            var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n            var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n            var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n            function generateCallForArgumentCount(count) {\n              var args = argumentSequence(count).join(\", \");\n              var comma = count > 0 ? \", \" : \"\";\n              var ret;\n\n              if (shouldProxyThis) {\n                ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n              } else {\n                ret = receiver === undefined ? \"ret = callback({{args}}, nodeback); break;\\n\" : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n              }\n\n              return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n            }\n\n            function generateArgumentSwitchCase() {\n              var ret = \"\";\n\n              for (var i = 0; i < argumentOrder.length; ++i) {\n                ret += \"case \" + argumentOrder[i] + \":\" + generateCallForArgumentCount(argumentOrder[i]);\n              }\n\n              ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", shouldProxyThis ? \"ret = callback.apply(this, args);\\n\" : \"ret = callback.apply(receiver, args);\\n\");\n              return ret;\n            }\n\n            var getFunctionCode = typeof callback === \"string\" ? \"this != null ? this['\" + callback + \"'] : fn\" : \"fn\";\n            var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase()).replace(\"[GetFunctionCode]\", getFunctionCode);\n            body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n            return new Function(\"Promise\", \"fn\", \"receiver\", \"withAppended\", \"maybeWrapAsError\", \"nodebackForPromise\", \"tryCatch\", \"errorObj\", \"notEnumerableProp\", \"INTERNAL\", body)(Promise, fn, receiver, withAppended, maybeWrapAsError, nodebackForPromise, util.tryCatch, util.errorObj, util.notEnumerableProp, INTERNAL);\n          };\n        }\n\n        function makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n          var defaultThis = function () {\n            return this;\n          }();\n\n          var method = callback;\n\n          if (typeof method === \"string\") {\n            callback = fn;\n          }\n\n          function promisified() {\n            var _receiver = receiver;\n            if (receiver === THIS) _receiver = this;\n            var promise = new Promise(INTERNAL);\n\n            promise._captureStackTrace();\n\n            var cb = typeof method === \"string\" && this !== defaultThis ? this[method] : callback;\n            var fn = nodebackForPromise(promise, multiArgs);\n\n            try {\n              cb.apply(_receiver, withAppended(arguments, fn));\n            } catch (e) {\n              promise._rejectCallback(maybeWrapAsError(e), true, true);\n            }\n\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n            return promise;\n          }\n\n          util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n          return promisified;\n        }\n\n        var makeNodePromisified = canEvaluate ? makeNodePromisifiedEval : makeNodePromisifiedClosure;\n\n        function promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n          var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n          var methods = promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n          for (var i = 0, len = methods.length; i < len; i += 2) {\n            var key = methods[i];\n            var fn = methods[i + 1];\n            var promisifiedKey = key + suffix;\n\n            if (promisifier === makeNodePromisified) {\n              obj[promisifiedKey] = makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n            } else {\n              var promisified = promisifier(fn, function () {\n                return makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n              });\n              util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n              obj[promisifiedKey] = promisified;\n            }\n          }\n\n          util.toFastProperties(obj);\n          return obj;\n        }\n\n        function promisify(callback, receiver, multiArgs) {\n          return makeNodePromisified(callback, receiver, undefined, callback, null, multiArgs);\n        }\n\n        Promise.promisify = function (fn, options) {\n          if (typeof fn !== \"function\") {\n            throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n          }\n\n          if (isPromisified(fn)) {\n            return fn;\n          }\n\n          options = Object(options);\n          var receiver = options.context === undefined ? THIS : options.context;\n          var multiArgs = !!options.multiArgs;\n          var ret = promisify(fn, receiver, multiArgs);\n          util.copyDescriptors(fn, ret, propsFilter);\n          return ret;\n        };\n\n        Promise.promisifyAll = function (target, options) {\n          if (typeof target !== \"function\" && _typeof(target) !== \"object\") {\n            throw new TypeError(\"the target of promisifyAll must be an object or a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n          }\n\n          options = Object(options);\n          var multiArgs = !!options.multiArgs;\n          var suffix = options.suffix;\n          if (typeof suffix !== \"string\") suffix = defaultSuffix;\n          var filter = options.filter;\n          if (typeof filter !== \"function\") filter = defaultFilter;\n          var promisifier = options.promisifier;\n          if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n          if (!util.isIdentifier(suffix)) {\n            throw new RangeError(\"suffix must be a valid identifier\\n\\n    See http://goo.gl/MqrFmX\\n\");\n          }\n\n          var keys = util.inheritedDataKeys(target);\n\n          for (var i = 0; i < keys.length; ++i) {\n            var value = target[keys[i]];\n\n            if (keys[i] !== \"constructor\" && util.isClass(value)) {\n              promisifyAll(value.prototype, suffix, filter, promisifier, multiArgs);\n              promisifyAll(value, suffix, filter, promisifier, multiArgs);\n            }\n          }\n\n          return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n        };\n      };\n    }, {\n      \"./errors\": 12,\n      \"./nodeback\": 20,\n      \"./util\": 36\n    }],\n    25: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, PromiseArray, tryConvertToPromise, apiRejection) {\n        var util = _dereq_(\"./util\");\n\n        var isObject = util.isObject;\n\n        var es5 = _dereq_(\"./es5\");\n\n        var Es6Map;\n        if (typeof Map === \"function\") Es6Map = Map;\n\n        var mapToEntries = function () {\n          var index = 0;\n          var size = 0;\n\n          function extractEntry(value, key) {\n            this[index] = value;\n            this[index + size] = key;\n            index++;\n          }\n\n          return function mapToEntries(map) {\n            size = map.size;\n            index = 0;\n            var ret = new Array(map.size * 2);\n            map.forEach(extractEntry, ret);\n            return ret;\n          };\n        }();\n\n        var entriesToMap = function entriesToMap(entries) {\n          var ret = new Es6Map();\n          var length = entries.length / 2 | 0;\n\n          for (var i = 0; i < length; ++i) {\n            var key = entries[length + i];\n            var value = entries[i];\n            ret.set(key, value);\n          }\n\n          return ret;\n        };\n\n        function PropertiesPromiseArray(obj) {\n          var isMap = false;\n          var entries;\n\n          if (Es6Map !== undefined && obj instanceof Es6Map) {\n            entries = mapToEntries(obj);\n            isMap = true;\n          } else {\n            var keys = es5.keys(obj);\n            var len = keys.length;\n            entries = new Array(len * 2);\n\n            for (var i = 0; i < len; ++i) {\n              var key = keys[i];\n              entries[i] = obj[key];\n              entries[i + len] = key;\n            }\n          }\n\n          this.constructor$(entries);\n          this._isMap = isMap;\n\n          this._init$(undefined, isMap ? -6 : -3);\n        }\n\n        util.inherits(PropertiesPromiseArray, PromiseArray);\n\n        PropertiesPromiseArray.prototype._init = function () {};\n\n        PropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n          this._values[index] = value;\n          var totalResolved = ++this._totalResolved;\n\n          if (totalResolved >= this._length) {\n            var val;\n\n            if (this._isMap) {\n              val = entriesToMap(this._values);\n            } else {\n              val = {};\n              var keyOffset = this.length();\n\n              for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n              }\n            }\n\n            this._resolve(val);\n\n            return true;\n          }\n\n          return false;\n        };\n\n        PropertiesPromiseArray.prototype.shouldCopyValues = function () {\n          return false;\n        };\n\n        PropertiesPromiseArray.prototype.getActualLength = function (len) {\n          return len >> 1;\n        };\n\n        function props(promises) {\n          var ret;\n          var castValue = tryConvertToPromise(promises);\n\n          if (!isObject(castValue)) {\n            return apiRejection(\"cannot await properties of a non-object\\n\\n    See http://goo.gl/MqrFmX\\n\");\n          } else if (castValue instanceof Promise) {\n            ret = castValue._then(Promise.props, undefined, undefined, undefined, undefined);\n          } else {\n            ret = new PropertiesPromiseArray(castValue).promise();\n          }\n\n          if (castValue instanceof Promise) {\n            ret._propagateFrom(castValue, 2);\n          }\n\n          return ret;\n        }\n\n        Promise.prototype.props = function () {\n          return props(this);\n        };\n\n        Promise.props = function (promises) {\n          return props(promises);\n        };\n      };\n    }, {\n      \"./es5\": 13,\n      \"./util\": 36\n    }],\n    26: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function arrayMove(src, srcIndex, dst, dstIndex, len) {\n        for (var j = 0; j < len; ++j) {\n          dst[j + dstIndex] = src[j + srcIndex];\n          src[j + srcIndex] = void 0;\n        }\n      }\n\n      function Queue(capacity) {\n        this._capacity = capacity;\n        this._length = 0;\n        this._front = 0;\n      }\n\n      Queue.prototype._willBeOverCapacity = function (size) {\n        return this._capacity < size;\n      };\n\n      Queue.prototype._pushOne = function (arg) {\n        var length = this.length();\n\n        this._checkCapacity(length + 1);\n\n        var i = this._front + length & this._capacity - 1;\n        this[i] = arg;\n        this._length = length + 1;\n      };\n\n      Queue.prototype.push = function (fn, receiver, arg) {\n        var length = this.length() + 3;\n\n        if (this._willBeOverCapacity(length)) {\n          this._pushOne(fn);\n\n          this._pushOne(receiver);\n\n          this._pushOne(arg);\n\n          return;\n        }\n\n        var j = this._front + length - 3;\n\n        this._checkCapacity(length);\n\n        var wrapMask = this._capacity - 1;\n        this[j + 0 & wrapMask] = fn;\n        this[j + 1 & wrapMask] = receiver;\n        this[j + 2 & wrapMask] = arg;\n        this._length = length;\n      };\n\n      Queue.prototype.shift = function () {\n        var front = this._front,\n            ret = this[front];\n        this[front] = undefined;\n        this._front = front + 1 & this._capacity - 1;\n        this._length--;\n        return ret;\n      };\n\n      Queue.prototype.length = function () {\n        return this._length;\n      };\n\n      Queue.prototype._checkCapacity = function (size) {\n        if (this._capacity < size) {\n          this._resizeTo(this._capacity << 1);\n        }\n      };\n\n      Queue.prototype._resizeTo = function (capacity) {\n        var oldCapacity = this._capacity;\n        this._capacity = capacity;\n        var front = this._front;\n        var length = this._length;\n        var moveItemsCount = front + length & oldCapacity - 1;\n        arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n      };\n\n      module.exports = Queue;\n    }, {}],\n    27: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, INTERNAL, tryConvertToPromise, apiRejection) {\n        var util = _dereq_(\"./util\");\n\n        var raceLater = function raceLater(promise) {\n          return promise.then(function (array) {\n            return race(array, promise);\n          });\n        };\n\n        function race(promises, parent) {\n          var maybePromise = tryConvertToPromise(promises);\n\n          if (maybePromise instanceof Promise) {\n            return raceLater(maybePromise);\n          } else {\n            promises = util.asArray(promises);\n            if (promises === null) return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n          }\n\n          var ret = new Promise(INTERNAL);\n\n          if (parent !== undefined) {\n            ret._propagateFrom(parent, 3);\n          }\n\n          var fulfill = ret._fulfill;\n          var reject = ret._reject;\n\n          for (var i = 0, len = promises.length; i < len; ++i) {\n            var val = promises[i];\n\n            if (val === undefined && !(i in promises)) {\n              continue;\n            }\n\n            Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n          }\n\n          return ret;\n        }\n\n        Promise.race = function (promises) {\n          return race(promises, undefined);\n        };\n\n        Promise.prototype.race = function () {\n          return race(this, undefined);\n        };\n      };\n    }, {\n      \"./util\": 36\n    }],\n    28: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug) {\n        var getDomain = Promise._getDomain;\n\n        var util = _dereq_(\"./util\");\n\n        var tryCatch = util.tryCatch;\n\n        function ReductionPromiseArray(promises, fn, initialValue, _each) {\n          this.constructor$(promises);\n          var domain = getDomain();\n          this._fn = domain === null ? fn : util.domainBind(domain, fn);\n\n          if (initialValue !== undefined) {\n            initialValue = Promise.resolve(initialValue);\n\n            initialValue._attachCancellationCallback(this);\n          }\n\n          this._initialValue = initialValue;\n          this._currentCancellable = null;\n\n          if (_each === INTERNAL) {\n            this._eachValues = Array(this._length);\n          } else if (_each === 0) {\n            this._eachValues = null;\n          } else {\n            this._eachValues = undefined;\n          }\n\n          this._promise._captureStackTrace();\n\n          this._init$(undefined, -5);\n        }\n\n        util.inherits(ReductionPromiseArray, PromiseArray);\n\n        ReductionPromiseArray.prototype._gotAccum = function (accum) {\n          if (this._eachValues !== undefined && this._eachValues !== null && accum !== INTERNAL) {\n            this._eachValues.push(accum);\n          }\n        };\n\n        ReductionPromiseArray.prototype._eachComplete = function (value) {\n          if (this._eachValues !== null) {\n            this._eachValues.push(value);\n          }\n\n          return this._eachValues;\n        };\n\n        ReductionPromiseArray.prototype._init = function () {};\n\n        ReductionPromiseArray.prototype._resolveEmptyArray = function () {\n          this._resolve(this._eachValues !== undefined ? this._eachValues : this._initialValue);\n        };\n\n        ReductionPromiseArray.prototype.shouldCopyValues = function () {\n          return false;\n        };\n\n        ReductionPromiseArray.prototype._resolve = function (value) {\n          this._promise._resolveCallback(value);\n\n          this._values = null;\n        };\n\n        ReductionPromiseArray.prototype._resultCancelled = function (sender) {\n          if (sender === this._initialValue) return this._cancel();\n          if (this._isResolved()) return;\n\n          this._resultCancelled$();\n\n          if (this._currentCancellable instanceof Promise) {\n            this._currentCancellable.cancel();\n          }\n\n          if (this._initialValue instanceof Promise) {\n            this._initialValue.cancel();\n          }\n        };\n\n        ReductionPromiseArray.prototype._iterate = function (values) {\n          this._values = values;\n          var value;\n          var i;\n          var length = values.length;\n\n          if (this._initialValue !== undefined) {\n            value = this._initialValue;\n            i = 0;\n          } else {\n            value = Promise.resolve(values[0]);\n            i = 1;\n          }\n\n          this._currentCancellable = value;\n\n          if (!value.isRejected()) {\n            for (; i < length; ++i) {\n              var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n              };\n              value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n            }\n          }\n\n          if (this._eachValues !== undefined) {\n            value = value._then(this._eachComplete, undefined, undefined, this, undefined);\n          }\n\n          value._then(completed, completed, undefined, value, this);\n        };\n\n        Promise.prototype.reduce = function (fn, initialValue) {\n          return reduce(this, fn, initialValue, null);\n        };\n\n        Promise.reduce = function (promises, fn, initialValue, _each) {\n          return reduce(promises, fn, initialValue, _each);\n        };\n\n        function completed(valueOrReason, array) {\n          if (this.isFulfilled()) {\n            array._resolve(valueOrReason);\n          } else {\n            array._reject(valueOrReason);\n          }\n        }\n\n        function reduce(promises, fn, initialValue, _each) {\n          if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n          }\n\n          var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n          return array.promise();\n        }\n\n        function gotAccum(accum) {\n          this.accum = accum;\n\n          this.array._gotAccum(accum);\n\n          var value = tryConvertToPromise(this.value, this.array._promise);\n\n          if (value instanceof Promise) {\n            this.array._currentCancellable = value;\n            return value._then(gotValue, undefined, undefined, this, undefined);\n          } else {\n            return gotValue.call(this, value);\n          }\n        }\n\n        function gotValue(value) {\n          var array = this.array;\n          var promise = array._promise;\n          var fn = tryCatch(array._fn);\n\n          promise._pushContext();\n\n          var ret;\n\n          if (array._eachValues !== undefined) {\n            ret = fn.call(promise._boundValue(), value, this.index, this.length);\n          } else {\n            ret = fn.call(promise._boundValue(), this.accum, value, this.index, this.length);\n          }\n\n          if (ret instanceof Promise) {\n            array._currentCancellable = ret;\n          }\n\n          var promiseCreated = promise._popContext();\n\n          debug.checkForgottenReturns(ret, promiseCreated, array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\", promise);\n          return ret;\n        }\n      };\n    }, {\n      \"./util\": 36\n    }],\n    29: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"./util\");\n\n      var schedule;\n\n      var noAsyncScheduler = function noAsyncScheduler() {\n        throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\");\n      };\n\n      var NativePromise = util.getNativePromise();\n\n      if (util.isNode && typeof MutationObserver === \"undefined\") {\n        var GlobalSetImmediate = global.setImmediate;\n        var ProcessNextTick = process.nextTick;\n        schedule = util.isRecentNode ? function (fn) {\n          GlobalSetImmediate.call(global, fn);\n        } : function (fn) {\n          ProcessNextTick.call(process, fn);\n        };\n      } else if (typeof NativePromise === \"function\" && typeof NativePromise.resolve === \"function\") {\n        var nativePromise = NativePromise.resolve();\n\n        schedule = function schedule(fn) {\n          nativePromise.then(fn);\n        };\n      } else if (typeof MutationObserver !== \"undefined\" && !(typeof window !== \"undefined\" && window.navigator && (window.navigator.standalone || window.cordova))) {\n        schedule = function () {\n          var div = document.createElement(\"div\");\n          var opts = {\n            attributes: true\n          };\n          var toggleScheduled = false;\n          var div2 = document.createElement(\"div\");\n          var o2 = new MutationObserver(function () {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n          });\n          o2.observe(div2, opts);\n\n          var scheduleToggle = function scheduleToggle() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n          };\n\n          return function schedule(fn) {\n            var o = new MutationObserver(function () {\n              o.disconnect();\n              fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n          };\n        }();\n      } else if (typeof setImmediate !== \"undefined\") {\n        schedule = function schedule(fn) {\n          setImmediate(fn);\n        };\n      } else if (typeof setTimeout !== \"undefined\") {\n        schedule = function schedule(fn) {\n          setTimeout(fn, 0);\n        };\n      } else {\n        schedule = noAsyncScheduler;\n      }\n\n      module.exports = schedule;\n    }, {\n      \"./util\": 36\n    }],\n    30: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, PromiseArray, debug) {\n        var PromiseInspection = Promise.PromiseInspection;\n\n        var util = _dereq_(\"./util\");\n\n        function SettledPromiseArray(values) {\n          this.constructor$(values);\n        }\n\n        util.inherits(SettledPromiseArray, PromiseArray);\n\n        SettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n          this._values[index] = inspection;\n          var totalResolved = ++this._totalResolved;\n\n          if (totalResolved >= this._length) {\n            this._resolve(this._values);\n\n            return true;\n          }\n\n          return false;\n        };\n\n        SettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n          var ret = new PromiseInspection();\n          ret._bitField = 33554432;\n          ret._settledValueField = value;\n          return this._promiseResolved(index, ret);\n        };\n\n        SettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n          var ret = new PromiseInspection();\n          ret._bitField = 16777216;\n          ret._settledValueField = reason;\n          return this._promiseResolved(index, ret);\n        };\n\n        Promise.settle = function (promises) {\n          debug.deprecated(\".settle()\", \".reflect()\");\n          return new SettledPromiseArray(promises).promise();\n        };\n\n        Promise.prototype.settle = function () {\n          return Promise.settle(this);\n        };\n      };\n    }, {\n      \"./util\": 36\n    }],\n    31: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, PromiseArray, apiRejection) {\n        var util = _dereq_(\"./util\");\n\n        var RangeError = _dereq_(\"./errors\").RangeError;\n\n        var AggregateError = _dereq_(\"./errors\").AggregateError;\n\n        var isArray = util.isArray;\n        var CANCELLATION = {};\n\n        function SomePromiseArray(values) {\n          this.constructor$(values);\n          this._howMany = 0;\n          this._unwrap = false;\n          this._initialized = false;\n        }\n\n        util.inherits(SomePromiseArray, PromiseArray);\n\n        SomePromiseArray.prototype._init = function () {\n          if (!this._initialized) {\n            return;\n          }\n\n          if (this._howMany === 0) {\n            this._resolve([]);\n\n            return;\n          }\n\n          this._init$(undefined, -5);\n\n          var isArrayResolved = isArray(this._values);\n\n          if (!this._isResolved() && isArrayResolved && this._howMany > this._canPossiblyFulfill()) {\n            this._reject(this._getRangeError(this.length()));\n          }\n        };\n\n        SomePromiseArray.prototype.init = function () {\n          this._initialized = true;\n\n          this._init();\n        };\n\n        SomePromiseArray.prototype.setUnwrap = function () {\n          this._unwrap = true;\n        };\n\n        SomePromiseArray.prototype.howMany = function () {\n          return this._howMany;\n        };\n\n        SomePromiseArray.prototype.setHowMany = function (count) {\n          this._howMany = count;\n        };\n\n        SomePromiseArray.prototype._promiseFulfilled = function (value) {\n          this._addFulfilled(value);\n\n          if (this._fulfilled() === this.howMany()) {\n            this._values.length = this.howMany();\n\n            if (this.howMany() === 1 && this._unwrap) {\n              this._resolve(this._values[0]);\n            } else {\n              this._resolve(this._values);\n            }\n\n            return true;\n          }\n\n          return false;\n        };\n\n        SomePromiseArray.prototype._promiseRejected = function (reason) {\n          this._addRejected(reason);\n\n          return this._checkOutcome();\n        };\n\n        SomePromiseArray.prototype._promiseCancelled = function () {\n          if (this._values instanceof Promise || this._values == null) {\n            return this._cancel();\n          }\n\n          this._addRejected(CANCELLATION);\n\n          return this._checkOutcome();\n        };\n\n        SomePromiseArray.prototype._checkOutcome = function () {\n          if (this.howMany() > this._canPossiblyFulfill()) {\n            var e = new AggregateError();\n\n            for (var i = this.length(); i < this._values.length; ++i) {\n              if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n              }\n            }\n\n            if (e.length > 0) {\n              this._reject(e);\n            } else {\n              this._cancel();\n            }\n\n            return true;\n          }\n\n          return false;\n        };\n\n        SomePromiseArray.prototype._fulfilled = function () {\n          return this._totalResolved;\n        };\n\n        SomePromiseArray.prototype._rejected = function () {\n          return this._values.length - this.length();\n        };\n\n        SomePromiseArray.prototype._addRejected = function (reason) {\n          this._values.push(reason);\n        };\n\n        SomePromiseArray.prototype._addFulfilled = function (value) {\n          this._values[this._totalResolved++] = value;\n        };\n\n        SomePromiseArray.prototype._canPossiblyFulfill = function () {\n          return this.length() - this._rejected();\n        };\n\n        SomePromiseArray.prototype._getRangeError = function (count) {\n          var message = \"Input array must contain at least \" + this._howMany + \" items but contains only \" + count + \" items\";\n          return new RangeError(message);\n        };\n\n        SomePromiseArray.prototype._resolveEmptyArray = function () {\n          this._reject(this._getRangeError(0));\n        };\n\n        function some(promises, howMany) {\n          if ((howMany | 0) !== howMany || howMany < 0) {\n            return apiRejection(\"expecting a positive integer\\n\\n    See http://goo.gl/MqrFmX\\n\");\n          }\n\n          var ret = new SomePromiseArray(promises);\n          var promise = ret.promise();\n          ret.setHowMany(howMany);\n          ret.init();\n          return promise;\n        }\n\n        Promise.some = function (promises, howMany) {\n          return some(promises, howMany);\n        };\n\n        Promise.prototype.some = function (howMany) {\n          return some(this, howMany);\n        };\n\n        Promise._SomePromiseArray = SomePromiseArray;\n      };\n    }, {\n      \"./errors\": 12,\n      \"./util\": 36\n    }],\n    32: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise) {\n        function PromiseInspection(promise) {\n          if (promise !== undefined) {\n            promise = promise._target();\n            this._bitField = promise._bitField;\n            this._settledValueField = promise._isFateSealed() ? promise._settledValue() : undefined;\n          } else {\n            this._bitField = 0;\n            this._settledValueField = undefined;\n          }\n        }\n\n        PromiseInspection.prototype._settledValue = function () {\n          return this._settledValueField;\n        };\n\n        var value = PromiseInspection.prototype.value = function () {\n          if (!this.isFulfilled()) {\n            throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\n\\n    See http://goo.gl/MqrFmX\\n\");\n          }\n\n          return this._settledValue();\n        };\n\n        var reason = PromiseInspection.prototype.error = PromiseInspection.prototype.reason = function () {\n          if (!this.isRejected()) {\n            throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\n\\n    See http://goo.gl/MqrFmX\\n\");\n          }\n\n          return this._settledValue();\n        };\n\n        var isFulfilled = PromiseInspection.prototype.isFulfilled = function () {\n          return (this._bitField & 33554432) !== 0;\n        };\n\n        var isRejected = PromiseInspection.prototype.isRejected = function () {\n          return (this._bitField & 16777216) !== 0;\n        };\n\n        var isPending = PromiseInspection.prototype.isPending = function () {\n          return (this._bitField & 50397184) === 0;\n        };\n\n        var isResolved = PromiseInspection.prototype.isResolved = function () {\n          return (this._bitField & 50331648) !== 0;\n        };\n\n        PromiseInspection.prototype.isCancelled = function () {\n          return (this._bitField & 8454144) !== 0;\n        };\n\n        Promise.prototype.__isCancelled = function () {\n          return (this._bitField & 65536) === 65536;\n        };\n\n        Promise.prototype._isCancelled = function () {\n          return this._target().__isCancelled();\n        };\n\n        Promise.prototype.isCancelled = function () {\n          return (this._target()._bitField & 8454144) !== 0;\n        };\n\n        Promise.prototype.isPending = function () {\n          return isPending.call(this._target());\n        };\n\n        Promise.prototype.isRejected = function () {\n          return isRejected.call(this._target());\n        };\n\n        Promise.prototype.isFulfilled = function () {\n          return isFulfilled.call(this._target());\n        };\n\n        Promise.prototype.isResolved = function () {\n          return isResolved.call(this._target());\n        };\n\n        Promise.prototype.value = function () {\n          return value.call(this._target());\n        };\n\n        Promise.prototype.reason = function () {\n          var target = this._target();\n\n          target._unsetRejectionIsUnhandled();\n\n          return reason.call(target);\n        };\n\n        Promise.prototype._value = function () {\n          return this._settledValue();\n        };\n\n        Promise.prototype._reason = function () {\n          this._unsetRejectionIsUnhandled();\n\n          return this._settledValue();\n        };\n\n        Promise.PromiseInspection = PromiseInspection;\n      };\n    }, {}],\n    33: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, INTERNAL) {\n        var util = _dereq_(\"./util\");\n\n        var errorObj = util.errorObj;\n        var isObject = util.isObject;\n\n        function tryConvertToPromise(obj, context) {\n          if (isObject(obj)) {\n            if (obj instanceof Promise) return obj;\n            var then = getThen(obj);\n\n            if (then === errorObj) {\n              if (context) context._pushContext();\n              var ret = Promise.reject(then.e);\n              if (context) context._popContext();\n              return ret;\n            } else if (typeof then === \"function\") {\n              if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n\n                obj._then(ret._fulfill, ret._reject, undefined, ret, null);\n\n                return ret;\n              }\n\n              return doThenable(obj, then, context);\n            }\n          }\n\n          return obj;\n        }\n\n        function doGetThen(obj) {\n          return obj.then;\n        }\n\n        function getThen(obj) {\n          try {\n            return doGetThen(obj);\n          } catch (e) {\n            errorObj.e = e;\n            return errorObj;\n          }\n        }\n\n        var hasProp = {}.hasOwnProperty;\n\n        function isAnyBluebirdPromise(obj) {\n          try {\n            return hasProp.call(obj, \"_promise0\");\n          } catch (e) {\n            return false;\n          }\n        }\n\n        function doThenable(x, then, context) {\n          var promise = new Promise(INTERNAL);\n          var ret = promise;\n          if (context) context._pushContext();\n\n          promise._captureStackTrace();\n\n          if (context) context._popContext();\n          var synchronous = true;\n          var result = util.tryCatch(then).call(x, resolve, reject);\n          synchronous = false;\n\n          if (promise && result === errorObj) {\n            promise._rejectCallback(result.e, true, true);\n\n            promise = null;\n          }\n\n          function resolve(value) {\n            if (!promise) return;\n\n            promise._resolveCallback(value);\n\n            promise = null;\n          }\n\n          function reject(reason) {\n            if (!promise) return;\n\n            promise._rejectCallback(reason, synchronous, true);\n\n            promise = null;\n          }\n\n          return ret;\n        }\n\n        return tryConvertToPromise;\n      };\n    }, {\n      \"./util\": 36\n    }],\n    34: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, INTERNAL, debug) {\n        var util = _dereq_(\"./util\");\n\n        var TimeoutError = Promise.TimeoutError;\n\n        function HandleWrapper(handle) {\n          this.handle = handle;\n        }\n\n        HandleWrapper.prototype._resultCancelled = function () {\n          clearTimeout(this.handle);\n        };\n\n        var afterValue = function afterValue(value) {\n          return delay(+this).thenReturn(value);\n        };\n\n        var delay = Promise.delay = function (ms, value) {\n          var ret;\n          var handle;\n\n          if (value !== undefined) {\n            ret = Promise.resolve(value)._then(afterValue, null, null, ms, undefined);\n\n            if (debug.cancellation() && value instanceof Promise) {\n              ret._setOnCancel(value);\n            }\n          } else {\n            ret = new Promise(INTERNAL);\n            handle = setTimeout(function () {\n              ret._fulfill();\n            }, +ms);\n\n            if (debug.cancellation()) {\n              ret._setOnCancel(new HandleWrapper(handle));\n            }\n\n            ret._captureStackTrace();\n          }\n\n          ret._setAsyncGuaranteed();\n\n          return ret;\n        };\n\n        Promise.prototype.delay = function (ms) {\n          return delay(ms, this);\n        };\n\n        var afterTimeout = function afterTimeout(promise, message, parent) {\n          var err;\n\n          if (typeof message !== \"string\") {\n            if (message instanceof Error) {\n              err = message;\n            } else {\n              err = new TimeoutError(\"operation timed out\");\n            }\n          } else {\n            err = new TimeoutError(message);\n          }\n\n          util.markAsOriginatingFromRejection(err);\n\n          promise._attachExtraTrace(err);\n\n          promise._reject(err);\n\n          if (parent != null) {\n            parent.cancel();\n          }\n        };\n\n        function successClear(value) {\n          clearTimeout(this.handle);\n          return value;\n        }\n\n        function failureClear(reason) {\n          clearTimeout(this.handle);\n          throw reason;\n        }\n\n        Promise.prototype.timeout = function (ms, message) {\n          ms = +ms;\n          var ret, parent;\n          var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n            if (ret.isPending()) {\n              afterTimeout(ret, message, parent);\n            }\n          }, ms));\n\n          if (debug.cancellation()) {\n            parent = this.then();\n            ret = parent._then(successClear, failureClear, undefined, handleWrapper, undefined);\n\n            ret._setOnCancel(handleWrapper);\n          } else {\n            ret = this._then(successClear, failureClear, undefined, handleWrapper, undefined);\n          }\n\n          return ret;\n        };\n      };\n    }, {\n      \"./util\": 36\n    }],\n    35: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug) {\n        var util = _dereq_(\"./util\");\n\n        var TypeError = _dereq_(\"./errors\").TypeError;\n\n        var inherits = _dereq_(\"./util\").inherits;\n\n        var errorObj = util.errorObj;\n        var tryCatch = util.tryCatch;\n        var NULL = {};\n\n        function thrower(e) {\n          setTimeout(function () {\n            throw e;\n          }, 0);\n        }\n\n        function castPreservingDisposable(thenable) {\n          var maybePromise = tryConvertToPromise(thenable);\n\n          if (maybePromise !== thenable && typeof thenable._isDisposable === \"function\" && typeof thenable._getDisposer === \"function\" && thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n          }\n\n          return maybePromise;\n        }\n\n        function dispose(resources, inspection) {\n          var i = 0;\n          var len = resources.length;\n          var ret = new Promise(INTERNAL);\n\n          function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n\n            if (maybePromise instanceof Promise && maybePromise._isDisposable()) {\n              try {\n                maybePromise = tryConvertToPromise(maybePromise._getDisposer().tryDispose(inspection), resources.promise);\n              } catch (e) {\n                return thrower(e);\n              }\n\n              if (maybePromise instanceof Promise) {\n                return maybePromise._then(iterator, thrower, null, null, null);\n              }\n            }\n\n            iterator();\n          }\n\n          iterator();\n          return ret;\n        }\n\n        function Disposer(data, promise, context) {\n          this._data = data;\n          this._promise = promise;\n          this._context = context;\n        }\n\n        Disposer.prototype.data = function () {\n          return this._data;\n        };\n\n        Disposer.prototype.promise = function () {\n          return this._promise;\n        };\n\n        Disposer.prototype.resource = function () {\n          if (this.promise().isFulfilled()) {\n            return this.promise().value();\n          }\n\n          return NULL;\n        };\n\n        Disposer.prototype.tryDispose = function (inspection) {\n          var resource = this.resource();\n          var context = this._context;\n          if (context !== undefined) context._pushContext();\n          var ret = resource !== NULL ? this.doDispose(resource, inspection) : null;\n          if (context !== undefined) context._popContext();\n\n          this._promise._unsetDisposable();\n\n          this._data = null;\n          return ret;\n        };\n\n        Disposer.isDisposer = function (d) {\n          return d != null && typeof d.resource === \"function\" && typeof d.tryDispose === \"function\";\n        };\n\n        function FunctionDisposer(fn, promise, context) {\n          this.constructor$(fn, promise, context);\n        }\n\n        inherits(FunctionDisposer, Disposer);\n\n        FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n          var fn = this.data();\n          return fn.call(resource, resource, inspection);\n        };\n\n        function maybeUnwrapDisposer(value) {\n          if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n\n            return value.promise();\n          }\n\n          return value;\n        }\n\n        function ResourceList(length) {\n          this.length = length;\n          this.promise = null;\n          this[length - 1] = null;\n        }\n\n        ResourceList.prototype._resultCancelled = function () {\n          var len = this.length;\n\n          for (var i = 0; i < len; ++i) {\n            var item = this[i];\n\n            if (item instanceof Promise) {\n              item.cancel();\n            }\n          }\n        };\n\n        Promise.using = function () {\n          var len = arguments.length;\n          if (len < 2) return apiRejection(\"you must pass at least 2 arguments to Promise.using\");\n          var fn = arguments[len - 1];\n\n          if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n          }\n\n          var input;\n          var spreadArgs = true;\n\n          if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n          } else {\n            input = arguments;\n            len--;\n          }\n\n          var resources = new ResourceList(len);\n\n          for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n\n            if (Disposer.isDisposer(resource)) {\n              var disposer = resource;\n              resource = resource.promise();\n\n              resource._setDisposable(disposer);\n            } else {\n              var maybePromise = tryConvertToPromise(resource);\n\n              if (maybePromise instanceof Promise) {\n                resource = maybePromise._then(maybeUnwrapDisposer, null, null, {\n                  resources: resources,\n                  index: i\n                }, undefined);\n              }\n            }\n\n            resources[i] = resource;\n          }\n\n          var reflectedResources = new Array(resources.length);\n\n          for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n          }\n\n          var resultPromise = Promise.all(reflectedResources).then(function (inspections) {\n            for (var i = 0; i < inspections.length; ++i) {\n              var inspection = inspections[i];\n\n              if (inspection.isRejected()) {\n                errorObj.e = inspection.error();\n                return errorObj;\n              } else if (!inspection.isFulfilled()) {\n                resultPromise.cancel();\n                return;\n              }\n\n              inspections[i] = inspection.value();\n            }\n\n            promise._pushContext();\n\n            fn = tryCatch(fn);\n            var ret = spreadArgs ? fn.apply(undefined, inspections) : fn(inspections);\n\n            var promiseCreated = promise._popContext();\n\n            debug.checkForgottenReturns(ret, promiseCreated, \"Promise.using\", promise);\n            return ret;\n          });\n          var promise = resultPromise.lastly(function () {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n          });\n          resources.promise = promise;\n\n          promise._setOnCancel(resources);\n\n          return promise;\n        };\n\n        Promise.prototype._setDisposable = function (disposer) {\n          this._bitField = this._bitField | 131072;\n          this._disposer = disposer;\n        };\n\n        Promise.prototype._isDisposable = function () {\n          return (this._bitField & 131072) > 0;\n        };\n\n        Promise.prototype._getDisposer = function () {\n          return this._disposer;\n        };\n\n        Promise.prototype._unsetDisposable = function () {\n          this._bitField = this._bitField & ~131072;\n          this._disposer = undefined;\n        };\n\n        Promise.prototype.disposer = function (fn) {\n          if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n          }\n\n          throw new TypeError();\n        };\n      };\n    }, {\n      \"./errors\": 12,\n      \"./util\": 36\n    }],\n    36: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var es5 = _dereq_(\"./es5\");\n\n      var canEvaluate = typeof navigator == \"undefined\";\n      var errorObj = {\n        e: {}\n      };\n      var tryCatchTarget;\n      var globalObject = typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : this !== undefined ? this : null;\n\n      function tryCatcher() {\n        try {\n          var target = tryCatchTarget;\n          tryCatchTarget = null;\n          return target.apply(this, arguments);\n        } catch (e) {\n          errorObj.e = e;\n          return errorObj;\n        }\n      }\n\n      function tryCatch(fn) {\n        tryCatchTarget = fn;\n        return tryCatcher;\n      }\n\n      var inherits = function inherits(Child, Parent) {\n        var hasProp = {}.hasOwnProperty;\n\n        function T() {\n          this.constructor = Child;\n          this.constructor$ = Parent;\n\n          for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) && propertyName.charAt(propertyName.length - 1) !== \"$\") {\n              this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n          }\n        }\n\n        T.prototype = Parent.prototype;\n        Child.prototype = new T();\n        return Child.prototype;\n      };\n\n      function isPrimitive(val) {\n        return val == null || val === true || val === false || typeof val === \"string\" || typeof val === \"number\";\n      }\n\n      function isObject(value) {\n        return typeof value === \"function\" || _typeof(value) === \"object\" && value !== null;\n      }\n\n      function maybeWrapAsError(maybeError) {\n        if (!isPrimitive(maybeError)) return maybeError;\n        return new Error(safeToString(maybeError));\n      }\n\n      function withAppended(target, appendee) {\n        var len = target.length;\n        var ret = new Array(len + 1);\n        var i;\n\n        for (i = 0; i < len; ++i) {\n          ret[i] = target[i];\n        }\n\n        ret[i] = appendee;\n        return ret;\n      }\n\n      function getDataPropertyOrDefault(obj, key, defaultValue) {\n        if (es5.isES5) {\n          var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n          if (desc != null) {\n            return desc.get == null && desc.set == null ? desc.value : defaultValue;\n          }\n        } else {\n          return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n        }\n      }\n\n      function notEnumerableProp(obj, name, value) {\n        if (isPrimitive(obj)) return obj;\n        var descriptor = {\n          value: value,\n          configurable: true,\n          enumerable: false,\n          writable: true\n        };\n        es5.defineProperty(obj, name, descriptor);\n        return obj;\n      }\n\n      function thrower(r) {\n        throw r;\n      }\n\n      var inheritedDataKeys = function () {\n        var excludedPrototypes = [Array.prototype, Object.prototype, Function.prototype];\n\n        var isExcludedProto = function isExcludedProto(val) {\n          for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n              return true;\n            }\n          }\n\n          return false;\n        };\n\n        if (es5.isES5) {\n          var getKeys = Object.getOwnPropertyNames;\n          return function (obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n\n            while (obj != null && !isExcludedProto(obj)) {\n              var keys;\n\n              try {\n                keys = getKeys(obj);\n              } catch (e) {\n                return ret;\n              }\n\n              for (var i = 0; i < keys.length; ++i) {\n                var key = keys[i];\n                if (visitedKeys[key]) continue;\n                visitedKeys[key] = true;\n                var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n                if (desc != null && desc.get == null && desc.set == null) {\n                  ret.push(key);\n                }\n              }\n\n              obj = es5.getPrototypeOf(obj);\n            }\n\n            return ret;\n          };\n        } else {\n          var hasProp = {}.hasOwnProperty;\n          return function (obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n            /*jshint forin:false */\n\n            enumeration: for (var key in obj) {\n              if (hasProp.call(obj, key)) {\n                ret.push(key);\n              } else {\n                for (var i = 0; i < excludedPrototypes.length; ++i) {\n                  if (hasProp.call(excludedPrototypes[i], key)) {\n                    continue enumeration;\n                  }\n                }\n\n                ret.push(key);\n              }\n            }\n\n            return ret;\n          };\n        }\n      }();\n\n      var thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\n\n      function isClass(fn) {\n        try {\n          if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 && !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods = thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor || hasThisAssignmentAndStaticMethods) {\n              return true;\n            }\n          }\n\n          return false;\n        } catch (e) {\n          return false;\n        }\n      }\n\n      function toFastProperties(obj) {\n        /*jshint -W027,-W055,-W031*/\n        function FakeConstructor() {}\n\n        FakeConstructor.prototype = obj;\n        var receiver = new FakeConstructor();\n\n        function ic() {\n          return _typeof(receiver.foo);\n        }\n\n        ic();\n        ic();\n        return obj;\n        eval(obj);\n      }\n\n      var rident = /^[a-z$_][a-z$_0-9]*$/i;\n\n      function isIdentifier(str) {\n        return rident.test(str);\n      }\n\n      function filledRange(count, prefix, suffix) {\n        var ret = new Array(count);\n\n        for (var i = 0; i < count; ++i) {\n          ret[i] = prefix + i + suffix;\n        }\n\n        return ret;\n      }\n\n      function safeToString(obj) {\n        try {\n          return obj + \"\";\n        } catch (e) {\n          return \"[no string representation]\";\n        }\n      }\n\n      function isError(obj) {\n        return obj instanceof Error || obj !== null && _typeof(obj) === \"object\" && typeof obj.message === \"string\" && typeof obj.name === \"string\";\n      }\n\n      function markAsOriginatingFromRejection(e) {\n        try {\n          notEnumerableProp(e, \"isOperational\", true);\n        } catch (ignore) {}\n      }\n\n      function originatesFromRejection(e) {\n        if (e == null) return false;\n        return e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError || e[\"isOperational\"] === true;\n      }\n\n      function canAttachTrace(obj) {\n        return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n      }\n\n      var ensureErrorObject = function () {\n        if (!(\"stack\" in new Error())) {\n          return function (value) {\n            if (canAttachTrace(value)) return value;\n\n            try {\n              throw new Error(safeToString(value));\n            } catch (err) {\n              return err;\n            }\n          };\n        } else {\n          return function (value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n          };\n        }\n      }();\n\n      function classString(obj) {\n        return {}.toString.call(obj);\n      }\n\n      function copyDescriptors(from, to, filter) {\n        var keys = es5.names(from);\n\n        for (var i = 0; i < keys.length; ++i) {\n          var key = keys[i];\n\n          if (filter(key)) {\n            try {\n              es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n          }\n        }\n      }\n\n      var asArray = function asArray(v) {\n        if (es5.isArray(v)) {\n          return v;\n        }\n\n        return null;\n      };\n\n      if (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n        var ArrayFrom = typeof Array.from === \"function\" ? function (v) {\n          return Array.from(v);\n        } : function (v) {\n          var ret = [];\n          var it = v[Symbol.iterator]();\n          var itResult;\n\n          while (!(itResult = it.next()).done) {\n            ret.push(itResult.value);\n          }\n\n          return ret;\n        };\n\n        asArray = function asArray(v) {\n          if (es5.isArray(v)) {\n            return v;\n          } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n          }\n\n          return null;\n        };\n      }\n\n      var isNode = typeof process !== \"undefined\" && classString(process).toLowerCase() === \"[object process]\";\n      var hasEnvVariables = typeof process !== \"undefined\" && typeof process.env !== \"undefined\";\n\n      function env(key) {\n        return hasEnvVariables ? process.env[key] : undefined;\n      }\n\n      function getNativePromise() {\n        if (typeof Promise === \"function\") {\n          try {\n            var promise = new Promise(function () {});\n\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n              return Promise;\n            }\n          } catch (e) {}\n        }\n      }\n\n      function domainBind(self, cb) {\n        return self.bind(cb);\n      }\n\n      var ret = {\n        isClass: isClass,\n        isIdentifier: isIdentifier,\n        inheritedDataKeys: inheritedDataKeys,\n        getDataPropertyOrDefault: getDataPropertyOrDefault,\n        thrower: thrower,\n        isArray: es5.isArray,\n        asArray: asArray,\n        notEnumerableProp: notEnumerableProp,\n        isPrimitive: isPrimitive,\n        isObject: isObject,\n        isError: isError,\n        canEvaluate: canEvaluate,\n        errorObj: errorObj,\n        tryCatch: tryCatch,\n        inherits: inherits,\n        withAppended: withAppended,\n        maybeWrapAsError: maybeWrapAsError,\n        toFastProperties: toFastProperties,\n        filledRange: filledRange,\n        toString: safeToString,\n        canAttachTrace: canAttachTrace,\n        ensureErrorObject: ensureErrorObject,\n        originatesFromRejection: originatesFromRejection,\n        markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n        classString: classString,\n        copyDescriptors: copyDescriptors,\n        hasDevTools: typeof chrome !== \"undefined\" && chrome && typeof chrome.loadTimes === \"function\",\n        isNode: isNode,\n        hasEnvVariables: hasEnvVariables,\n        env: env,\n        global: globalObject,\n        getNativePromise: getNativePromise,\n        domainBind: domainBind\n      };\n\n      ret.isRecentNode = ret.isNode && function () {\n        var version;\n\n        if (process.versions && process.versions.node) {\n          version = process.versions.node.split(\".\").map(Number);\n        } else if (process.version) {\n          version = process.version.split(\".\").map(Number);\n        }\n\n        return version[0] === 0 && version[1] > 10 || version[0] > 0;\n      }();\n\n      if (ret.isNode) ret.toFastProperties(process);\n\n      try {\n        throw new Error();\n      } catch (e) {\n        ret.lastLineError = e;\n      }\n\n      module.exports = ret;\n    }, {\n      \"./es5\": 13\n    }]\n  }, {}, [4])(4);\n});\n;\n\nif (typeof window !== 'undefined' && window !== null) {\n  window.P = window.Promise;\n} else if (typeof self !== 'undefined' && self !== null) {\n  self.P = self.Promise;\n}","module.exports = require(\"bluebird\");","var utils = require(\"../../utils/utils\");\n\nvar StateService = function StateService() {\n  var stateProviders = {};\n\n  function getState(name) {\n    var provider = stateProviders[name];\n\n    if (provider) {\n      return stateProviders[name].method();\n    } else {\n      var res = {};\n\n      for (var i in stateProviders) {\n        if (!stateProviders[i].internal) utils.mixin(res, stateProviders[i].method(), true);\n      }\n\n      return res;\n    }\n  }\n\n  function registerProvider(name, provider, internal) {\n    stateProviders[name] = {\n      method: provider,\n      internal: internal\n    };\n  }\n\n  function unregisterProvider(name) {\n    delete stateProviders[name];\n  }\n\n  return {\n    getState: getState,\n    registerProvider: registerProvider,\n    unregisterProvider: unregisterProvider\n  };\n};\n\nmodule.exports = StateService;","module.exports = function (gantt) {\n  var regTemplates = {};\n\n  function initTemplate(name, initial, template_name) {\n    template_name = template_name || name;\n    var config = gantt.config,\n        templates = gantt.templates;\n\n    if (gantt.config[name] && regTemplates[template_name] != config[name]) {\n      if (!(initial && templates[template_name])) {\n        templates[template_name] = gantt.date.date_to_str(config[name]);\n        regTemplates[template_name] = config[name];\n      }\n    }\n  }\n\n  function initTemplates() {\n    var labels = gantt.locale.labels;\n    labels.gantt_save_btn = labels.icon_save;\n    labels.gantt_cancel_btn = labels.icon_cancel;\n    labels.gantt_delete_btn = labels.icon_delete;\n    var date = gantt.date; //build configuration based templates\n\n    var d = date.date_to_str;\n    var c = gantt.config;\n    var format_date = d(c.xml_date || c.date_format, c.server_utc);\n    var parse_date = date.str_to_date(c.xml_date || c.date_format, c.server_utc);\n    initTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\n    initTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\n    initTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\n    gantt.mixin(gantt.templates, {\n      xml_format: undefined,\n      // deprecated\n      format_date: format_date,\n      xml_date: undefined,\n      // deprecated\n      parse_date: parse_date,\n      progress_text: function progress_text(start, end, task) {\n        return \"\";\n      },\n      grid_header_class: function grid_header_class(column, config) {\n        return \"\";\n      },\n      task_text: function task_text(start, end, task) {\n        return task.text;\n      },\n      task_class: function task_class(start, end, task) {\n        return \"\";\n      },\n      task_end_date: function task_end_date(date) {\n        return gantt.templates.task_date(date);\n      },\n      grid_row_class: function grid_row_class(start, end, task) {\n        return \"\";\n      },\n      task_row_class: function task_row_class(start, end, task) {\n        return \"\";\n      },\n      timeline_cell_class: function timeline_cell_class(item, date) {\n        return \"\";\n      },\n      timeline_cell_content: function timeline_cell_content(item, date) {\n        return \"\";\n      },\n      scale_cell_class: function scale_cell_class(date) {\n        return \"\";\n      },\n      scale_row_class: function scale_row_class(date) {\n        return \"\";\n      },\n      grid_indent: function grid_indent(item) {\n        return \"<div class='gantt_tree_indent'></div>\";\n      },\n      grid_folder: function grid_folder(item) {\n        return \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\n      },\n      grid_file: function grid_file(item) {\n        return \"<div class='gantt_tree_icon gantt_file'></div>\";\n      },\n      grid_open: function grid_open(item) {\n        return \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\n      },\n      grid_blank: function grid_blank(item) {\n        return \"<div class='gantt_tree_icon gantt_blank'></div>\";\n      },\n      date_grid: function date_grid(date, item, column) {\n        if (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\n          return gantt.templates.task_unscheduled_time(item);\n        } else {\n          return gantt.templates.grid_date_format(date, column);\n        }\n      },\n      task_time: function task_time(start, end, ev) {\n        if (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\n          return gantt.templates.task_unscheduled_time(ev);\n        } else {\n          return gantt.templates.task_date(start) + \" - \" + gantt.templates.task_end_date(end);\n        }\n      },\n      task_unscheduled_time: function task_unscheduled_time(task) {\n        return \"\";\n      },\n      time_picker: d(c.time_picker),\n      link_class: function link_class(link) {\n        return \"\";\n      },\n      link_description: function link_description(link) {\n        var from = gantt.getTask(link.source),\n            to = gantt.getTask(link.target);\n        return \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\n      },\n      drag_link: function drag_link(from, from_start, to, to_start) {\n        from = gantt.getTask(from);\n        var labels = gantt.locale.labels;\n        var text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\n\n        if (to) {\n          to = gantt.getTask(to);\n          text += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\n        }\n\n        return text;\n      },\n      drag_link_class: function drag_link_class(from, from_start, to, to_start) {\n        var add = \"\";\n\n        if (from && to) {\n          var allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\n          add = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\n        }\n\n        return \"gantt_link_tooltip\" + add;\n      },\n\n      /* used for aria-labels of bar elements and for tooltip.js */\n      tooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\n      tooltip_text: function tooltip_text(start, end, event) {\n        return \"<b>Task:</b> \" + event.text + \"<br/><b>Start date:</b> \" + gantt.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + gantt.templates.tooltip_date_format(end);\n      }\n    });\n  }\n\n  return {\n    initTemplates: initTemplates,\n    initTemplate: initTemplate\n  };\n};","var eventable = require(\"../../utils/eventable\");\n\nvar utils = require(\"../../utils/utils\");\n\nvar timeout = require(\"../../utils/timeout\");\n\nvar global = require(\"../../utils/global\");\n\nvar domHelpers = require(\"../ui/utils/dom_helpers\");\n\nmodule.exports = function (gantt) {\n  function copyDomEvent(e) {\n    return {\n      target: e.target || e.srcElement,\n      pageX: e.pageX,\n      pageY: e.pageY,\n      clientX: e.clientX,\n      clientY: e.clientY,\n      metaKey: e.metaKey,\n      shiftKey: e.shiftKey,\n      ctrlKey: e.ctrlKey,\n      altKey: e.altKey\n    };\n  }\n\n  function DnD(obj, config) {\n    this._obj = obj;\n    this._settings = config || {};\n    eventable(this);\n    var inputMethods = this.getInputMethods();\n    this._drag_start_timer = null;\n    gantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\n      this.clearDragTimer();\n    }, this));\n    var lastDown = 0;\n    var eventParams = {\n      passive: false\n    };\n\n    for (var i = 0; i < inputMethods.length; i++) {\n      utils.bind(function (input) {\n        gantt.event(obj, input.down, utils.bind(function (e) {\n          if (!input.accessor(e)) {\n            return;\n          }\n\n          if (config.preventDefault && config.selector && domHelpers.closest(e.target, config.selector)) {\n            e.preventDefault();\n          }\n\n          if (gantt.config.touch && e.timeStamp && e.timeStamp - lastDown < 300) {\n            return;\n          }\n\n          this._settings.original_target = copyDomEvent(e);\n\n          if (gantt.config.touch) {\n            this.clearDragTimer();\n            this._drag_start_timer = setTimeout(utils.bind(function () {\n              if (gantt.getState().lightbox) {\n                return;\n              }\n\n              this.dragStart(obj, e, input);\n            }, this), gantt.config.touch_drag);\n          } else {\n            this.dragStart(obj, e, input);\n          }\n        }, this), eventParams);\n        var eventElement = document.body;\n        gantt.event(eventElement, input.up, utils.bind(function (e) {\n          if (!input.accessor(e)) {\n            return;\n          }\n\n          this.clearDragTimer();\n        }, this), eventParams);\n      }, this)(inputMethods[i]);\n    }\n  }\n\n  DnD.prototype = {\n    traceDragEvents: function traceDragEvents(domElement, inputMethod) {\n      var mousemove = utils.bind(function (e) {\n        return this.dragMove(domElement, e, inputMethod.accessor);\n      }, this);\n      utils.bind(function (e) {\n        return this.dragScroll(domElement, e);\n      }, this);\n      var limited_mousemove = utils.bind(function (e) {\n        if (this.config.started && utils.defined(this.config.updates_per_second)) {\n          if (!timeout(this, this.config.updates_per_second)) return;\n        }\n\n        var dndActive = mousemove(e);\n\n        if (dndActive) {\n          try {\n            if (e && e.preventDefault && e.cancelable) {\n              //e.cancelable condition - because navigator.vibrate is blocked by Chrome\n              e.preventDefault(); //Cancel default action on DND\n            } //Cancel default action on DND\n\n          } catch (e) {// just suppress the exception, nothing needed to be done here\n          } //e.cancelBubble = true;\n\n        }\n\n        return dndActive;\n      }, this);\n      var eventElement = domHelpers.getRootNode(gantt.$root);\n      var mousemoveContainer = this.config.mousemoveContainer || domHelpers.getRootNode(gantt.$root);\n      var eventParams = {\n        passive: false\n      };\n      var mouseup = utils.bind(function (e) {\n        gantt.eventRemove(mousemoveContainer, inputMethod.move, limited_mousemove);\n        gantt.eventRemove(eventElement, inputMethod.up, mouseup, eventParams);\n        return this.dragEnd(domElement);\n      }, this);\n      gantt.event(mousemoveContainer, inputMethod.move, limited_mousemove, eventParams);\n      gantt.event(eventElement, inputMethod.up, mouseup, eventParams);\n    },\n    checkPositionChange: function checkPositionChange(pos) {\n      var diff_x = pos.x - this.config.pos.x;\n      var diff_y = pos.y - this.config.pos.y;\n      var distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\n\n      if (distance > this.config.sensitivity) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    initDnDMarker: function initDnDMarker() {\n      // create dnd placeholder and put it in dom\n      var marker = this.config.marker = document.createElement(\"div\");\n      marker.className = \"gantt_drag_marker\"; // GS-1333: don't show any message when we resize grid columns\n\n      marker.innerHTML = \"\";\n      document.body.appendChild(marker);\n    },\n    backupEventTarget: function backupEventTarget(domEvent, getEvent) {\n      if (!gantt.config.touch) {\n        return;\n      } // keep original event target in DOM in order to keep dnd on touchmove event\n\n\n      var e = getEvent(domEvent);\n      var el = e.target || e.srcElement;\n      var copy = el.cloneNode(true); //this.config.target.target = copy;\n\n      this.config.original_target = copyDomEvent(e);\n      this.config.original_target.target = copy;\n      this.config.backup_element = el;\n      el.parentNode.appendChild(copy);\n      el.style.display = \"none\";\n      var mousemoveContainer = this.config.mousemoveContainer || document.body;\n      mousemoveContainer.appendChild(el);\n    },\n    getInputMethods: function getInputMethods() {\n      // bind actions to browser events\n      var inputMethods = [];\n      inputMethods.push({\n        \"move\": \"mousemove\",\n        \"down\": \"mousedown\",\n        \"up\": \"mouseup\",\n        \"accessor\": function accessor(e) {\n          return e;\n        }\n      });\n\n      if (gantt.config.touch) {\n        var touchEventsSupported = true;\n\n        try {\n          document.createEvent(\"TouchEvent\");\n        } catch (e) {\n          touchEventsSupported = false;\n        }\n\n        if (touchEventsSupported) {\n          inputMethods.push({\n            \"move\": \"touchmove\",\n            \"down\": \"touchstart\",\n            \"up\": \"touchend\",\n            \"accessor\": function accessor(ev) {\n              if (ev.touches && ev.touches.length > 1) return null;\n              if (ev.touches[0]) return {\n                target: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\n                pageX: ev.touches[0].pageX,\n                pageY: ev.touches[0].pageY,\n                clientX: ev.touches[0].clientX,\n                clientY: ev.touches[0].clientY\n              };else return ev;\n            }\n          });\n        } else if (global.navigator.pointerEnabled) {\n          inputMethods.push({\n            \"move\": \"pointermove\",\n            \"down\": \"pointerdown\",\n            \"up\": \"pointerup\",\n            \"accessor\": function accessor(ev) {\n              if (ev.pointerType == \"mouse\") return null;\n              return ev;\n            }\n          });\n        } else if (global.navigator.msPointerEnabled) {\n          inputMethods.push({\n            \"move\": \"MSPointerMove\",\n            \"down\": \"MSPointerDown\",\n            \"up\": \"MSPointerUp\",\n            \"accessor\": function accessor(ev) {\n              if (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\n              return ev;\n            }\n          });\n        }\n      }\n\n      return inputMethods;\n    },\n    clearDragTimer: function clearDragTimer() {\n      if (this._drag_start_timer) {\n        clearTimeout(this._drag_start_timer);\n        this._drag_start_timer = null;\n      }\n    },\n    dragStart: function dragStart(obj, e, inputMethod) {\n      if (this.config && this.config.started) {\n        return;\n      }\n\n      this.config = {\n        obj: obj,\n        marker: null,\n        started: false,\n        pos: this.getPosition(e),\n        sensitivity: 4\n      };\n      if (this._settings) utils.mixin(this.config, this._settings, true);\n      this.traceDragEvents(obj, inputMethod);\n      gantt._prevent_touch_scroll = true;\n      document.body.className += \" gantt_noselect\";\n\n      if (gantt.config.touch) {\n        this.dragMove(obj, e, inputMethod.accessor);\n      }\n    },\n    dragMove: function dragMove(obj, e, getEvent) {\n      var source = getEvent(e);\n      if (!source) return false;\n\n      if (!this.config.marker && !this.config.started) {\n        var pos = this.getPosition(source);\n\n        if (gantt.config.touch || this.checkPositionChange(pos)) {\n          // real drag starts here,\n          // when user moves mouse at first time after onmousedown\n          this.config.started = true;\n          this.config.ignore = false;\n\n          if (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\n            this.config.ignore = true;\n            return false;\n          }\n\n          this.backupEventTarget(e, getEvent);\n          this.initDnDMarker();\n\n          gantt._touch_feedback();\n\n          this.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\n        } else {\n          this.config.ignore = true;\n        }\n      }\n\n      if (!this.config.ignore) {\n        // GS-1279 Gantt crashes on Mobile Firefox after starting to create a link and moving finger outisde the page.\n        if (e.targetTouches && !source.target) return;\n        source.pos = this.getPosition(source);\n        this.config.marker.style.left = source.pos.x + \"px\";\n        this.config.marker.style.top = source.pos.y + \"px\";\n        this.callEvent(\"onDragMove\", [obj, source]);\n        return true;\n      }\n\n      return false;\n    },\n    dragEnd: function dragEnd(obj) {\n      var target = this.config.backup_element;\n\n      if (target && target.parentNode) {\n        target.parentNode.removeChild(target);\n      }\n\n      gantt._prevent_touch_scroll = false;\n\n      if (this.config.marker) {\n        this.config.marker.parentNode.removeChild(this.config.marker);\n        this.config.marker = null;\n        this.callEvent(\"onDragEnd\", []);\n      }\n\n      this.config.started = false;\n      document.body.className = document.body.className.replace(\" gantt_noselect\", \"\");\n    },\n    getPosition: function getPosition(e) {\n      var x = 0,\n          y = 0;\n\n      if (e.pageX || e.pageY) {\n        x = e.pageX;\n        y = e.pageY;\n      } else if (e.clientX || e.clientY) {\n        x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\n        y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\n      }\n\n      return {\n        x: x,\n        y: y\n      };\n    }\n  };\n  return DnD;\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar t = /*#__PURE__*/function () {\n  function t(_t) {\n    _classCallCheck(this, t);\n\n    var e = _t.url,\n        s = _t.token;\n    this._url = e, this._token = s, this._mode = 1, this._seed = 1, this._queue = [], this.data = {}, this.api = {}, this._events = {};\n  }\n\n  _createClass(t, [{\n    key: \"headers\",\n    value: function headers() {\n      return {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Remote-Token\": this._token\n      };\n    }\n  }, {\n    key: \"fetch\",\n    value: function (_fetch) {\n      function fetch(_x, _x2) {\n        return _fetch.apply(this, arguments);\n      }\n\n      fetch.toString = function () {\n        return _fetch.toString();\n      };\n\n      return fetch;\n    }(function (_t2, e) {\n      var s = {\n        credentials: \"include\",\n        headers: this.headers()\n      };\n      return e && (s.method = \"POST\", s.body = e), fetch(_t2, s).then(function (_t3) {\n        return _t3.json();\n      });\n    })\n  }, {\n    key: \"load\",\n    value: function load(_t4) {\n      var _this = this;\n\n      return _t4 && (this._url = _t4), this.fetch(this._url).then(function (_t5) {\n        return _this.parse(_t5);\n      });\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(_t6) {\n      var e = _t6.key,\n          s = _t6.websocket;\n      e && (this._token = _t6.key);\n\n      for (var _e in _t6.data) {\n        this.data[_e] = _t6.data[_e];\n      }\n\n      for (var _e2 in _t6.api) {\n        var _s = this.api[_e2] = {},\n            i = _t6.api[_e2];\n\n        for (var _t29 in i) {\n          _s[_t29] = this._wrapper(_e2 + \".\" + _t29);\n        }\n      }\n\n      return s && this.connect(), this;\n    }\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      var _this2 = this;\n\n      var _t8 = this._socket;\n      _t8 && (this._socket = null, _t8.onclose = function () {}, _t8.close()), this._mode = 2, this._socket = function (t, e, s, i) {\n        var n = e;\n        \"/\" === n[0] && (n = document.location.protocol + \"//\" + document.location.host + e);\n        n = n.replace(/^http(s|):/, \"ws$1:\");\n        var o = -1 != n.indexOf(\"?\") ? \"&\" : \"?\";\n        n = \"\".concat(n).concat(o, \"token=\").concat(s, \"&ws=1\");\n        var r = new WebSocket(n);\n        return r.onclose = function () {\n          return setTimeout(function () {\n            return t.connect();\n          }, 2e3);\n        }, r.onmessage = function (e) {\n          var s = JSON.parse(e.data);\n\n          switch (s.action) {\n            case \"result\":\n              t.result(s.body, []);\n              break;\n\n            case \"event\":\n              t.fire(s.body.name, s.body.value);\n              break;\n\n            case \"start\":\n              i();\n              break;\n\n            default:\n              t.onError(s.data);\n          }\n        }, r;\n      }(this, this._url, this._token, function () {\n        return _this2._mode = 3, _this2._send(), _this2._resubscribe(), _this2;\n      });\n    }\n  }, {\n    key: \"_wrapper\",\n    value: function _wrapper(_t9) {\n      return function () {\n        var _this3 = this;\n\n        var e = [].slice.call(arguments);\n        var s = null;\n        var i = new Promise(function (i, n) {\n          s = {\n            data: {\n              id: _this3._uid(),\n              name: _t9,\n              args: e\n            },\n            status: 1,\n            resolve: i,\n            reject: n\n          }, _this3._queue.push(s);\n        });\n        return this.onCall(s, i), 3 === this._mode ? this._send(s) : setTimeout(function () {\n          return _this3._send();\n        }, 1), i;\n      }.bind(this);\n    }\n  }, {\n    key: \"_uid\",\n    value: function _uid() {\n      return (this._seed++).toString();\n    }\n  }, {\n    key: \"_send\",\n    value: function _send(_t10) {\n      var _this4 = this;\n\n      if (2 == this._mode) return void setTimeout(function () {\n        return _this4._send();\n      }, 100);\n      var e = _t10 ? [_t10] : this._queue.filter(function (_t11) {\n        return 1 === _t11.status;\n      });\n      if (!e.length) return;\n      var s = e.map(function (_t12) {\n        return _t12.status = 2, _t12.data;\n      });\n      3 !== this._mode ? this.fetch(this._url, JSON.stringify(s))[\"catch\"](function (_t13) {\n        return _this4.onError(_t13);\n      }).then(function (_t14) {\n        return _this4.result(_t14, s);\n      }) : this._socket.send(JSON.stringify({\n        action: \"call\",\n        body: s\n      }));\n    }\n  }, {\n    key: \"result\",\n    value: function result(_t15, e) {\n      var s = {};\n      if (_t15) for (var _e3 = 0; _e3 < _t15.length; _e3++) {\n        s[_t15[_e3].id] = _t15[_e3];\n      } else for (var _t30 = 0; _t30 < e.length; _t30++) {\n        s[e[_t30].id] = {\n          id: e[_t30].id,\n          error: \"Network Error\",\n          data: null\n        };\n      }\n\n      for (var _t31 = this._queue.length - 1; _t31 >= 0; _t31--) {\n        var _e4 = this._queue[_t31],\n            i = s[_e4.data.id];\n        i && (this.onResponse(_e4, i), i.error ? _e4.reject(i.error) : _e4.resolve(i.data), this._queue.splice(_t31, 1));\n      }\n    }\n  }, {\n    key: \"on\",\n    value: function on(_t18, e) {\n      var s = this._uid();\n\n      var i = this._events[_t18];\n      var n = !!i;\n      return n || (i = this._events[_t18] = []), i.push({\n        id: s,\n        handler: e\n      }), n || 3 != this._mode || this._socket.send(JSON.stringify({\n        action: \"subscribe\",\n        name: _t18\n      })), {\n        name: _t18,\n        id: s\n      };\n    }\n  }, {\n    key: \"_resubscribe\",\n    value: function _resubscribe() {\n      if (3 == this._mode) for (var _t32 in this._events) {\n        this._socket.send(JSON.stringify({\n          action: \"subscribe\",\n          name: _t32\n        }));\n      }\n    }\n  }, {\n    key: \"detach\",\n    value: function detach(_t20) {\n      if (!_t20) {\n        if (3 == this._mode) for (var _t33 in this._events) {\n          this._socket.send(JSON.stringify({\n            action: \"unsubscribe\",\n            key: _t33\n          }));\n        }\n        return void (this._events = {});\n      }\n\n      var e = _t20.id,\n          s = _t20.name,\n          i = this._events[s];\n\n      if (i) {\n        var _t34 = i.filter(function (_t23) {\n          return _t23.id != e;\n        });\n\n        _t34.length ? this._events[s] = _t34 : (delete this._events[s], 3 == this._mode && this._socket.send(JSON.stringify({\n          action: \"unsubscribe\",\n          name: s\n        })));\n      }\n    }\n  }, {\n    key: \"fire\",\n    value: function fire(_t24, e) {\n      var s = this._events[_t24];\n      if (s) for (var _t35 = 0; _t35 < s.length; _t35++) {\n        s[_t35].handler(e);\n      }\n    }\n  }, {\n    key: \"onError\",\n    value: function onError(_t26) {\n      return null;\n    }\n  }, {\n    key: \"onCall\",\n    value: function onCall(_t27, e) {}\n  }, {\n    key: \"onResponse\",\n    value: function onResponse(_t28, e) {}\n  }]);\n\n  return t;\n}();\n\nexport { t as Client };","var remote_client = require(\"remote-client\");\n\nmodule.exports = {\n  remoteEvents: function remoteEvents(url, token) {\n    var _this = this;\n\n    var remote = new remote_client.Client({\n      url: url,\n      token: token\n    }); // temporary patch, as we do not want credentials\n\n    remote.fetch = function (url, body) {\n      var req = {\n        headers: this.headers()\n      };\n\n      if (body) {\n        req.method = \"POST\";\n        req.body = body;\n      }\n\n      return fetch(url, req).then(function (res) {\n        return res.json();\n      });\n    };\n\n    this._ready = remote.load().then(function (back) {\n      return _this._remote = back;\n    });\n\n    function ready() {\n      return this._ready;\n    }\n\n    function on(name, handler) {\n      this.ready().then(function (back) {\n        if (typeof name === \"string\") back.on(name, handler);else {\n          for (var key in name) {\n            back.on(key, name[key]);\n          }\n        }\n      });\n    }\n\n    this.ready = ready;\n    this.on = on;\n  }\n};","const dateToStr = (format: string, utc: boolean, gantt) => {\r\n\treturn (date) => {\r\n\t\treturn format.replace(/%[a-zA-Z]/g, (a) => {\r\n\t\t\tswitch (a) {\r\n\t\t\t\tcase \"%d\": return utc ? gantt.date.to_fixed(date.getUTCDate()) : gantt.date.to_fixed(date.getDate());\r\n\t\t\t\tcase \"%m\": return utc ? gantt.date.to_fixed((date.getUTCMonth() + 1)) : gantt.date.to_fixed((date.getMonth() + 1));\r\n\t\t\t\tcase \"%j\": return utc ? date.getUTCDate() : date.getDate();\r\n\t\t\t\tcase \"%n\": return utc ? (date.getUTCMonth() + 1) : (date.getMonth() + 1);\r\n\t\t\t\tcase \"%y\": return utc ? gantt.date.to_fixed(date.getUTCFullYear() % 100) : gantt.date.to_fixed(date.getFullYear() % 100);\r\n\t\t\t\tcase \"%Y\": return utc ? date.getUTCFullYear() : date.getFullYear();\r\n\t\t\t\tcase \"%D\": return utc ? gantt.locale.date.day_short[date.getUTCDay()] : gantt.locale.date.day_short[date.getDay()];\r\n\t\t\t\tcase \"%l\": return utc ? gantt.locale.date.day_full[date.getUTCDay()] : gantt.locale.date.day_full[date.getDay()];\r\n\t\t\t\tcase \"%M\": return utc ? gantt.locale.date.month_short[date.getUTCMonth()] : gantt.locale.date.month_short[date.getMonth()];\r\n\t\t\t\tcase \"%F\": return utc ? gantt.locale.date.month_full[date.getUTCMonth()] : gantt.locale.date.month_full[date.getMonth()];\r\n\t\t\t\tcase \"%h\": return utc ? gantt.date.to_fixed((date.getUTCHours() + 11) % 12 + 1) : gantt.date.to_fixed((date.getHours() + 11) % 12 + 1);\r\n\t\t\t\tcase \"%g\": return utc ? ((date.getUTCHours() + 11) % 12 + 1) : ((date.getHours() + 11) % 12 + 1);\r\n\t\t\t\tcase \"%G\": return utc ? date.getUTCHours() : date.getHours();\r\n\t\t\t\tcase \"%H\": return utc ? gantt.date.to_fixed(date.getUTCHours()) : gantt.date.to_fixed(date.getHours());\r\n\t\t\t\tcase \"%i\": return utc ? gantt.date.to_fixed(date.getUTCMinutes()) : gantt.date.to_fixed(date.getMinutes());\r\n\t\t\t\tcase \"%a\": return utc ? (date.getUTCHours() > 11 ? \"pm\" : \"am\") : (date.getHours() > 11 ? \"pm\" : \"am\");\r\n\t\t\t\tcase \"%A\": return utc ? (date.getUTCHours() > 11 ? \"PM\" : \"AM\") : (date.getHours() > 11 ? \"PM\" : \"AM\");\r\n\t\t\t\tcase \"%s\": return utc ? gantt.date.to_fixed(date.getUTCSeconds()) : gantt.date.to_fixed(date.getSeconds());\r\n\t\t\t\tcase \"%W\": return utc ? gantt.date.to_fixed(gantt.date.getUTCISOWeek(date)) : gantt.date.to_fixed(gantt.date.getISOWeek(date));\r\n\t\t\t\tdefault: return a;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n};\r\nconst strToDate = (format: string, utc: boolean, gantt:any) => {\r\n\treturn (date: string) => {\r\n\t\tconst set: Array<string|number> = [0, 0, 1, 0, 0, 0];\r\n\t\tconst temp = date.match(/[a-zA-Z]+|[0-9]+/g);\r\n\t\tconst mask = format.match(/%[a-zA-Z]/g);\r\n\r\n\t\tfor (let i = 0; i < mask.length; i++) {\r\n\t\t\tswitch (mask[i]) {\r\n\t\t\t\tcase \"%j\":\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tset[2] = temp[i] as unknown as number || 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%n\":\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tset[1] = (temp[i] as unknown as number || 1) - 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%y\":\r\n\t\t\t\t\tset[0] = temp[i] as unknown as number * 1 + ((temp[i] as unknown as number) > 50 ? 1900 : 2000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%g\":\r\n\t\t\t\tcase \"%G\":\r\n\t\t\t\tcase \"%h\":\r\n\t\t\t\tcase \"%H\":\r\n\t\t\t\t\tset[3] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%i\":\r\n\t\t\t\t\tset[4] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tset[0] = temp[i] as unknown as number || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%a\":\r\n\t\t\t\tcase \"%A\":\r\n\t\t\t\t\tset[3] = set[3] as number % 12 + ((temp[i] || \"\").toLowerCase() === \"am\" ? 0 : 12);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%s\":\r\n\t\t\t\t\tset[5] = temp[i] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%M\":\r\n\t\t\t\t\tset[1] = gantt.locale.date.month_short_hash[temp[i]] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%F\":\r\n\t\t\t\t\tset[1] = gantt.locale.date.month_full_hash[temp[i]] || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (utc) {\r\n\t\t\treturn new Date(Date.UTC(\r\n\t\t\t\tset[0] as number,\r\n\t\t\t\tset[1] as number,\r\n\t\t\t\tset[2] as number,\r\n\t\t\t\tset[3] as number,\r\n\t\t\t\tset[4] as number,\r\n\t\t\t\tset[5] as number\r\n\t\t\t));\r\n\t\t}\r\n\t\treturn new Date(\r\n\t\t\tset[0] as number,\r\n\t\t\tset[1] as number,\r\n\t\t\tset[2] as number,\r\n\t\t\tset[3] as number,\r\n\t\t\tset[4] as number,\r\n\t\t\tset[5] as number\r\n\t\t);\r\n\t};\r\n\r\n};\r\n\r\n\r\nconst cspVersion = {\r\n\tdate_to_str: dateToStr,\r\n\tstr_to_date: strToDate\r\n};\r\n\r\nexport default cspVersion;","const dateToStr = (format: string, utc: boolean, gantt) => {\r\n\tformat = format.replace(/%[a-zA-Z]/g, (a) => {\r\n\t\tswitch (a) {\r\n\t\t\tcase \"%d\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Date())+\"`;\r\n\t\t\tcase \"%m\":\r\n\t\t\t\treturn `\"+to_fixed((date.get${utc?\"UTC\":\"\"}Month()+1))+\"`;\r\n\t\t\tcase \"%j\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}Date()+\"`;\r\n\t\t\tcase \"%n\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Month()+1)+\"`;\r\n\t\t\tcase \"%y\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}FullYear()%100)+\"`;\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}FullYear()+\"`;\r\n\t\t\tcase \"%D\":\r\n\t\t\t\treturn `\"+locale.date.day_short[date.get${utc?\"UTC\":\"\"}Day()]+\"`;\r\n\t\t\tcase \"%l\":\r\n\t\t\t\treturn `\"+locale.date.day_full[date.get${utc?\"UTC\":\"\"}Day()]+\"`;\r\n\t\t\tcase \"%M\":\r\n\t\t\t\treturn `\"+locale.date.month_short[date.get${utc?\"UTC\":\"\"}Month()]+\"`;\r\n\t\t\tcase \"%F\":\r\n\t\t\t\treturn `\"+locale.date.month_full[date.get${utc?\"UTC\":\"\"}Month()]+\"`;\r\n\t\t\tcase \"%h\":\r\n\t\t\t\treturn `\"+to_fixed((date.get${utc?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;\r\n\t\t\tcase \"%g\":\r\n\t\t\t\treturn `\"+((date.get${utc?\"UTC\":\"\"}Hours()+11)%12+1)+\"`;\r\n\t\t\tcase \"%G\":\r\n\t\t\t\treturn `\"+date.get${utc?\"UTC\":\"\"}Hours()+\"`;\r\n\t\t\tcase \"%H\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Hours())+\"`;\r\n\t\t\tcase \"%i\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Minutes())+\"`;\r\n\t\t\tcase \"%a\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Hours()>11?\"pm\":\"am\")+\"`;\r\n\t\t\tcase \"%A\":\r\n\t\t\t\treturn `\"+(date.get${utc?\"UTC\":\"\"}Hours()>11?\"PM\":\"AM\")+\"`;\r\n\t\t\tcase \"%s\":\r\n\t\t\t\treturn `\"+to_fixed(date.get${utc?\"UTC\":\"\"}Seconds())+\"`;\r\n\t\t\tcase \"%W\":\r\n\t\t\t\treturn `\"+to_fixed(getISOWeek(date))+\"`;\r\n\t\t\tcase \"%w\":\r\n\t\t\t\treturn `\"+to_fixed(getWeek(date))+\"`;\r\n\t\t\tdefault:\r\n\t\t\t\treturn a;\r\n\t\t}\r\n\t});\r\n\r\n\t// tslint:disable-next-line: function-constructor\r\n\tconst dateToStrFn = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"getWeek\", `return \"${format}\";`);\r\n\r\n\treturn (date: Date) => {\r\n\t\treturn dateToStrFn(date, gantt.date.to_fixed, gantt.locale, gantt.date.getISOWeek, gantt.date.getWeek);\r\n\t};\r\n};\r\n\r\n\r\nconst strToDate = (format: string, utc: boolean, gantt:any) => {\r\n\tlet splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\tconst mask = format.match(/%[a-zA-Z]/g);\r\n\tfor (let i = 0; i < mask.length; i++) {\r\n\t\tswitch (mask[i]) {\r\n\t\t\tcase \"%j\":\r\n\t\t\tcase \"%d\":\r\n\t\t\t\tsplt += `set[2]=temp[${i}]||1;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%n\":\r\n\t\t\tcase \"%m\":\r\n\t\t\t\tsplt += `set[1]=(temp[${i}]||1)-1;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%y\":\r\n\t\t\t\tsplt += `set[0]=temp[${i}]*1+(temp[${i}]>50?1900:2000);`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%g\":\r\n\t\t\tcase \"%G\":\r\n\t\t\tcase \"%h\":\r\n\t\t\tcase \"%H\":\r\n\t\t\t\tsplt += `set[3]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%i\":\r\n\t\t\t\tsplt += `set[4]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%Y\":\r\n\t\t\t\tsplt += `set[0]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%a\":\r\n\t\t\tcase \"%A\":\r\n\t\t\t\tsplt += `set[3]=set[3]%12+((temp[${i}]||'').toLowerCase()=='am'?0:12);`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%s\":\r\n\t\t\t\tsplt += `set[5]=temp[${i}]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%M\":\r\n\t\t\t\tsplt += `set[1]=locale.date.month_short_hash[temp[${i}]]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"%F\":\r\n\t\t\t\tsplt += `set[1]=locale.date.month_full_hash[temp[${i}]]||0;`;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tlet code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\tif (utc) { code = ` Date.UTC(${code})`; }\r\n\t// tslint:disable-next-line: function-constructor\r\n\tconst strToDateFn = new Function(\"date\", \"locale\", `var set=[0,0,1,0,0,0]; ${splt} return new Date(${code});`);\r\n\r\n\treturn (dateString) => {\r\n\t\treturn strToDateFn(dateString, gantt.locale);\r\n\t};\r\n};\r\n\r\nconst fastVersion = {\r\n\tdate_to_str: dateToStr,\r\n\tstr_to_date: strToDate\r\n};\r\n\r\nexport default fastVersion;","/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 19009999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n*/\nvar fastVersion = require(\"./date_parsers/fast_version\")[\"default\"];\n\nvar cspCompliantVersion = require(\"./date_parsers/csp_compliant_version\")[\"default\"];\n\nmodule.exports = function (gantt) {\n  var canUseCsp = null;\n\n  function cspAutoCheck() {\n    try {\n      new Function(\"canUseCsp = false;\");\n    } catch (e) {\n      canUseCsp = true;\n    }\n  }\n\n  function useCsp() {\n    var result = false;\n\n    if (gantt.config.csp === \"auto\") {\n      if (canUseCsp === null) {\n        cspAutoCheck();\n      }\n\n      result = canUseCsp;\n    } else {\n      result = gantt.config.csp;\n    }\n\n    return result;\n  }\n\n  var dateHelper = {\n    init: function init() {\n      var locale = gantt.locale;\n      var s = locale.date.month_short;\n      var t = locale.date.month_short_hash = {};\n\n      for (var i = 0; i < s.length; i++) {\n        t[s[i]] = i;\n      }\n\n      var s = locale.date.month_full;\n      var t = locale.date.month_full_hash = {};\n\n      for (var i = 0; i < s.length; i++) {\n        t[s[i]] = i;\n      }\n    },\n    date_part: function date_part(date) {\n      var old = new Date(date);\n      date.setHours(0);\n      this.hour_start(date);\n      if (date.getHours() && ( //shift to yesterday on dst\n      date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear())) date.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\n      return date;\n    },\n    time_part: function time_part(date) {\n      return (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\n    },\n    week_start: function week_start(date) {\n      var shift = date.getDay();\n\n      if (gantt.config.start_on_monday) {\n        if (shift === 0) shift = 6;else shift--;\n      }\n\n      return this.date_part(this.add(date, -1 * shift, \"day\"));\n    },\n    month_start: function month_start(date) {\n      date.setDate(1);\n      return this.date_part(date);\n    },\n    quarter_start: function quarter_start(date) {\n      this.month_start(date);\n      var m = date.getMonth(),\n          res_month;\n\n      if (m >= 9) {\n        res_month = 9;\n      } else if (m >= 6) {\n        res_month = 6;\n      } else if (m >= 3) {\n        res_month = 3;\n      } else {\n        res_month = 0;\n      }\n\n      date.setMonth(res_month);\n      return date;\n    },\n    year_start: function year_start(date) {\n      date.setMonth(0);\n      return this.month_start(date);\n    },\n    day_start: function day_start(date) {\n      return this.date_part(date);\n    },\n    hour_start: function hour_start(date) {\n      if (date.getMinutes()) date.setMinutes(0);\n      this.minute_start(date);\n      return date;\n    },\n    minute_start: function minute_start(date) {\n      if (date.getSeconds()) date.setSeconds(0);\n      if (date.getMilliseconds()) date.setMilliseconds(0);\n      return date;\n    },\n    _add_days: function _add_days(modifiedDate, inc, originalDate) {\n      modifiedDate.setDate(modifiedDate.getDate() + inc);\n      var incCondition = inc >= 0;\n      var getHoursCondition = !originalDate.getHours() && modifiedDate.getHours(); //shift to yesterday on dst\n\n      var getDateCondition = modifiedDate.getDate() <= originalDate.getDate() || modifiedDate.getMonth() < originalDate.getMonth() || modifiedDate.getFullYear() < originalDate.getFullYear();\n\n      if (incCondition && getHoursCondition && getDateCondition) {\n        modifiedDate.setTime(modifiedDate.getTime() + 60 * 60 * 1000 * (24 - modifiedDate.getHours()));\n      }\n\n      var worktimeCalculation = inc > 1;\n\n      if (worktimeCalculation && getHoursCondition) {\n        // try to shift the modified Date to 00:00\n        modifiedDate.setHours(0);\n      }\n\n      return modifiedDate;\n    },\n    add: function add(date, inc, mode) {\n      /*jsl:ignore*/\n      var ndate = new Date(date.valueOf());\n\n      switch (mode) {\n        case \"day\":\n          ndate = this._add_days(ndate, inc, date);\n          break;\n\n        case \"week\":\n          ndate = this._add_days(ndate, inc * 7, date);\n          break;\n\n        case \"month\":\n          ndate.setMonth(ndate.getMonth() + inc);\n          break;\n\n        case \"year\":\n          ndate.setYear(ndate.getFullYear() + inc);\n          break;\n\n        case \"hour\":\n          /*\r\n          \tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n          \tadding one hour to the time before switch to a Daylight Saving time\r\n          \t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n          \tnew Date(2014, 02, 30, 1).setHours(2)\r\n          \t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n          \t\t\tsetTime seems working as expected\r\n           */\n          ndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\n          break;\n\n        case \"minute\":\n          ndate.setTime(ndate.getTime() + inc * 60 * 1000);\n          break;\n\n        default:\n          return this[\"add_\" + mode](date, inc, mode);\n      }\n\n      return ndate;\n      /*jsl:end*/\n    },\n    add_quarter: function add_quarter(date, inc) {\n      return this.add(date, inc * 3, \"month\");\n    },\n    to_fixed: function to_fixed(num) {\n      if (num < 10) return \"0\" + num;\n      return num;\n    },\n    copy: function copy(date) {\n      return new Date(date.valueOf());\n    },\n    date_to_str: function date_to_str(format, utc) {\n      var result = fastVersion;\n\n      if (useCsp()) {\n        result = cspCompliantVersion;\n      }\n\n      return result.date_to_str(format, utc, gantt);\n    },\n    str_to_date: function str_to_date(format, utc) {\n      var result = fastVersion;\n\n      if (useCsp()) {\n        result = cspCompliantVersion;\n      }\n\n      return result.str_to_date(format, utc, gantt);\n    },\n    getISOWeek: function getISOWeek(ndate) {\n      return gantt.date._getWeekNumber(ndate, true);\n    },\n    _getWeekNumber: function _getWeekNumber(ndate, isoWeek) {\n      if (!ndate) return false;\n      var nday = ndate.getDay();\n\n      if (isoWeek) {\n        if (nday === 0) {\n          nday = 7;\n        }\n      }\n\n      var first_thursday = new Date(ndate.valueOf());\n      first_thursday.setDate(ndate.getDate() + (4 - nday));\n      var year_number = first_thursday.getFullYear(); // year of the first Thursday\n\n      var ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\n\n      var week_number = 1 + Math.floor(ordinal_date / 7);\n      return week_number;\n    },\n    getWeek: function getWeek(ndate) {\n      return gantt.date._getWeekNumber(ndate, gantt.config.start_on_monday);\n    },\n    getUTCISOWeek: function getUTCISOWeek(ndate) {\n      return gantt.date.getISOWeek(ndate);\n    },\n    convert_to_utc: function convert_to_utc(date) {\n      return new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\n    },\n    parseDate: function parseDate(date, format) {\n      // raw date may be of type string, number (timestamp) or something else\n      // do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\n      if (date && !date.getFullYear) {\n        if (typeof format !== \"function\") {\n          if (typeof format === \"string\") {\n            if (format === \"parse_date\" || format === \"xml_date\") {\n              format = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date : gantt.templates.parse_date;\n            } else {\n              format = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\n            }\n          } else {\n            format = gantt.defined(gantt.templates.xml_date) ? gantt.templates.xml_date : gantt.templates.parse_date;\n          }\n        }\n\n        if (date) {\n          date = format(date);\n        } else {\n          date = null;\n        }\n      }\n\n      return date;\n    }\n  };\n  return dateHelper;\n};","export default function serialize(data: object | string) {\r\n\tif (typeof data === \"string\" || typeof data === \"number\") {\r\n\t\treturn data;\r\n\t}\r\n\r\n\tlet result = \"\";\r\n\r\n\tfor (const key in data) {\r\n\t\tlet serialized = \"\";\r\n\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\tif (typeof data[key] === \"string\") {\r\n\t\t\t\tserialized = encodeURIComponent(data[key]);\r\n\t\t\t} else if (typeof data[key] === \"number\") {\r\n\t\t\t\tserialized = data[key];\r\n\t\t\t} else {\r\n\t\t\t\tserialized = encodeURIComponent(JSON.stringify(data[key]));\r\n\t\t\t}\r\n\t\t\tserialized = key + \"=\" + serialized;\r\n\r\n\t\t\tif (result.length) {\r\n\t\t\t\tserialized = \"&\" + serialized;\r\n\t\t\t}\r\n\t\t\tresult += serialized;\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar env = require(\"../../utils/env\");\n\nvar global = require(\"../../utils/global\");\n\nvar serialize = require(\"./serialize\")[\"default\"];\n\nfunction createConfig(method, args) {\n  var result = {\n    method: method\n  };\n\n  if (args.length === 0) {\n    throw new Error(\"Arguments list of query is wrong.\");\n  }\n\n  if (args.length === 1) {\n    if (typeof args[0] === \"string\") {\n      result.url = args[0];\n      result.async = true;\n    } else {\n      result.url = args[0].url;\n      result.async = args[0].async || true;\n      result.callback = args[0].callback;\n      result.headers = args[0].headers;\n    }\n\n    if (method === \"POST\" || \"PUT\") {\n      if (args[0].data) {\n        if (typeof args[0].data !== \"string\") {\n          result.data = serialize(args[0].data);\n        } else {\n          result.data = args[0].data;\n        }\n      } else {\n        result.data = \"\";\n      }\n    }\n\n    return result;\n  }\n\n  result.url = args[0];\n\n  switch (method) {\n    case \"GET\":\n    case \"DELETE\":\n      result.callback = args[1];\n      result.headers = args[2];\n      break;\n\n    case \"POST\":\n    case \"PUT\":\n      if (args[1]) {\n        if (typeof args[1] !== \"string\") {\n          result.data = serialize(args[1]);\n        } else {\n          result.data = args[1];\n        }\n      } else {\n        result.data = \"\";\n      }\n\n      result.callback = args[2];\n      result.headers = args[3];\n      break;\n  }\n\n  return result;\n}\n\nmodule.exports = function (gantt) {\n  return {\n    // if false - dhxr param will added to prevent caching on client side (default),\n    // if true - do not add extra params\n    cache: true,\n    // default method for load/loadStruct, post/get allowed\n    // get - since 4.1.1, this should fix 412 error for macos safari\n    method: \"get\",\n    parse: function parse(data) {\n      if (typeof data !== \"string\") return data;\n      var obj;\n      data = data.replace(/^[\\s]+/, \"\");\n\n      if (typeof DOMParser !== \"undefined\" && !env.isIE) {\n        // ff,ie9\n        obj = new DOMParser().parseFromString(data, \"text/xml\");\n      } else if (typeof global.ActiveXObject !== \"undefined\") {\n        obj = new global.ActiveXObject(\"Microsoft.XMLDOM\");\n        obj.async = \"false\";\n        obj.loadXML(data);\n      }\n\n      return obj;\n    },\n    xmltop: function xmltop(tagname, xhr, obj) {\n      if (typeof xhr.status == \"undefined\" || xhr.status < 400) {\n        var xml = !xhr.responseXML ? this.parse(xhr.responseText || xhr) : xhr.responseXML || xhr;\n\n        if (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\n          return xml.getElementsByTagName(tagname)[0];\n        }\n      }\n\n      if (obj !== -1) gantt.callEvent(\"onLoadXMLError\", [\"Incorrect XML\", arguments[1], obj]);\n      return document.createElement(\"DIV\");\n    },\n    xpath: function xpath(xpathExp, docObj) {\n      if (!docObj.nodeName) docObj = docObj.responseXML || docObj;\n\n      if (env.isIE) {\n        return docObj.selectNodes(xpathExp) || [];\n      } else {\n        var rows = [];\n        var first;\n        var col = (docObj.ownerDocument || docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\n\n        while (true) {\n          first = col.iterateNext();\n\n          if (first) {\n            rows.push(first);\n          } else {\n            break;\n          }\n        }\n\n        return rows;\n      }\n    },\n    query: function query(config) {\n      return this._call(config.method || \"GET\", config.url, config.data || \"\", config.async || true, config.callback, config.headers);\n    },\n    get: function get(url, onLoad, headers) {\n      var config = createConfig(\"GET\", arguments);\n      return this.query(config);\n    },\n    getSync: function getSync(url, headers) {\n      var config = createConfig(\"GET\", arguments);\n      config.async = false;\n      return this.query(config);\n    },\n    put: function put(url, postData, onLoad, headers) {\n      var config = createConfig(\"PUT\", arguments);\n      return this.query(config);\n    },\n    del: function del(url, onLoad, headers) {\n      /**\r\n       * https://tools.ietf.org/html/rfc7231#section-4.3.5\r\n       * A payload within a DELETE request message has no defined semantics;\r\n       * sending a payload body on a DELETE request might cause some existing\r\n       * implementations to reject the request.\r\n       */\n      var config = createConfig(\"DELETE\", arguments);\n      return this.query(config);\n    },\n    post: function post(url, postData, onLoad, headers) {\n      if (arguments.length == 1) {\n        postData = \"\";\n      } else if (arguments.length == 2 && typeof postData == \"function\") {\n        onLoad = postData;\n        postData = \"\";\n      }\n\n      var config = createConfig(\"POST\", arguments);\n      return this.query(config);\n    },\n    postSync: function postSync(url, postData, headers) {\n      postData = postData === null ? \"\" : String(postData);\n      var config = createConfig(\"POST\", arguments);\n      config.async = false;\n      return this.query(config);\n    },\n    _call: function _call(method, url, postData, async, onLoad, headers) {\n      return new gantt.Promise(function (resolve, reject) {\n        var t = (typeof XMLHttpRequest === \"undefined\" ? \"undefined\" : _typeof(XMLHttpRequest)) !== undefined ? new XMLHttpRequest() : new global.ActiveXObject(\"Microsoft.XMLHTTP\");\n        var isQt = navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null;\n\n        if (!!async) {\n          t.onreadystatechange = function () {\n            if (t.readyState == 4 || isQt && t.readyState == 3) {\n              // what for long response and status 404?\n              if (t.status != 200 || t.responseText === \"\") if (!gantt.callEvent(\"onAjaxError\", [t])) return;\n              setTimeout(function () {\n                if (typeof onLoad == \"function\") {\n                  onLoad.apply(global, [{\n                    xmlDoc: t,\n                    filePath: url\n                  }]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\n                }\n\n                resolve(t);\n\n                if (typeof onLoad == \"function\") {\n                  onLoad = null;\n                  t = null;\n                }\n              }, 0);\n            }\n          };\n        }\n\n        var noCache = !this || !this.cache;\n\n        if (method == \"GET\" && noCache) {\n          url += (url.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + \"dhxr\" + new Date().getTime() + \"=1\";\n        }\n\n        t.open(method, url, async);\n\n        if (headers) {\n          for (var key in headers) {\n            t.setRequestHeader(key, headers[key]);\n          }\n        } else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\n          t.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n        } else if (method == \"GET\") {\n          postData = null;\n        }\n\n        t.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n        t.send(postData);\n        if (!async) return {\n          xmlDoc: t,\n          filePath: url\n        }; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\n      });\n    },\n    urlSeparator: function urlSeparator(str) {\n      if (str.indexOf(\"?\") != -1) return \"&\";else return \"?\";\n    }\n  };\n};","type DurationUnits = \"minute\" | \"hour\" | \"day\" | \"week\" | \"month\" | \"year\";\r\ntype Align = \"left\" | \"center\" | \"right\";\r\ntype SectionType = \"textarea\"\r\n\t\t\t\t\t| \"time\"\r\n\t\t\t\t\t| \"duration\"\r\n\t\t\t\t\t| \"select\"\r\n\t\t\t\t\t| \"typeselect\"\r\n\t\t\t\t\t| \"parent\"\r\n\t\t\t\t\t| \"template\"\r\n\t\t\t\t\t| \"checkbox\"\r\n\t\t\t\t\t| \"radio\"\r\n\t\t\t\t\t| \"resources\"\r\n\t\t\t\t\t| \"constraint\";\r\n\r\ntype LightboxSection = Array<ILightboxSection\r\n\t| ILightboxTimeAndDurationSection\r\n\t| ILightboxInputControl\r\n\t| ILightboxSelectControl\r\n\t| ILightboxParentControl\r\n\t| ILightboxTypeselectControl>;\r\n\r\ntype LayoutView = \"grid\"\r\n\t| \"timeline\"\r\n\t| \"resizer\"\r\n\t| \"scrollbar\"\r\n\t| \"resourceGrid\"\r\n\t| \"resourceTimeline\";\r\n\r\ninterface IColumnItem {\r\n\tname: string;\r\n\tlabel?: string;\r\n\ttree?: boolean;\r\n\talign?: Align;\r\n\thide?: boolean;\r\n\tmax_width?: number;\r\n\tmin_width?: number;\r\n\tresize?: boolean;\r\n\ttemplate?: (obj: any) => string;\r\n\twidth?: number | \"*\";\r\n}\r\n\r\nexport type TModifierKeys = \"metaKey\" | \"ctrlKey\" | \"altKey\" | \"shiftKey\" | false | undefined;\r\n\r\nexport interface IScale {\r\n\tcss?: () => string;\r\n\tdate?: string;\r\n\tstep: number;\r\n\ttemplate?: (date: Date) => string;\r\n\tunit: DurationUnits;\r\n}\r\n\r\ninterface ILightboxSection {\r\n\tname: string;\r\n\tmap_to: string;\r\n\ttype: SectionType;\r\n\theight?: number;\r\n\tfocus?: boolean;\r\n}\r\n\r\ninterface ILightboxTimeAndDurationSection extends ILightboxSection {\r\n\treadonly: boolean;\r\n\tyear_range: number[] | number;\r\n\tsingle_date: boolean;\r\n\ttime_format: string;\r\n}\r\n\r\ninterface ILightboxInputControl extends ILightboxSection {\r\n\tdefault_value?: any;\r\n\toptions?: Array<{key: string, label: string}>;\r\n}\r\n\r\ninterface ILightboxSelectControl extends ILightboxInputControl {\r\n\tonchange: () => boolean | undefined;\r\n}\r\n\r\ninterface ILightboxParentControl extends ILightboxSection {\r\n\tallow_root: boolean;\r\n\troot_label: string;\r\n\tsort?: (a: any, b: any) => -1 | 0 | 1;\r\n\tfilter?: (task: string | number | object) => boolean;\r\n\ttemplate?: (start: Date, end: Date, ev: object) => string;\r\n}\r\n\r\ninterface ILightboxTypeselectControl extends ILightboxSection {\r\n\tfilter?: (typeName: string) => boolean;\r\n}\r\n\r\n\r\ninterface ILayoutScrollbar {\r\n\tview: \"scrollbar\";\r\n\tscroll?: \"x\" | \"y\";\r\n\tid: string;\r\n\theight?: number;\r\n\twidth?: number;\r\n}\r\n\r\ninterface ILayoutView {\r\n\tview: LayoutView;\r\n\tid?: string;\r\n\tscrollX?: string;\r\n\tscrollY?: string;\r\n\tconfig?: object;\r\n}\r\n\r\ninterface ILayoutGrid extends ILayoutView {\r\n\tview: \"grid\";\r\n\tbind?: string;\r\n}\r\n\r\ninterface ILayoutTimeline extends ILayoutView {\r\n\tview: \"timeline\";\r\n\tbindLinks?: string;\r\n\tlayers?: any[];\r\n}\r\n\r\ninterface ILayoutResizer {\r\n\tview?: undefined;\r\n\tresizer: boolean;\r\n\twidth: number;\r\n}\r\n\r\ninterface ILayoutResourceGrid extends ILayoutView {\r\n\tview: \"resourceGrid\";\r\n\twidth: number;\r\n\tgroup: \"string\";\r\n}\r\n\r\ninterface ILayoutResourceTimeline extends ILayoutView {\r\n\tview: \"resourceTimeline\";\r\n\twidth: number;\r\n\tgroup: \"string\";\r\n}\r\n\r\ninterface ILayoutHtml {\r\n\thtml: string;\r\n\tcss: string;\r\n\twidth: number;\r\n}\r\n\r\ntype LayoutRow = ILayoutGrid\r\n\t| ILayoutTimeline\r\n\t| ILayoutResizer\r\n\t| ILayoutResourceGrid\r\n\t| ILayoutResourceTimeline\r\n\t| ILayoutHtml\r\n\t| ILayoutScrollbar\r\n\t| { cols: LayoutCol[] };\r\n\r\ntype LayoutCol = ILayoutGrid\r\n\t| ILayoutTimeline\r\n\t| ILayoutResizer\r\n\t| ILayoutResourceGrid\r\n\t| ILayoutResourceTimeline\r\n\t| ILayoutHtml\r\n\t| ILayoutScrollbar\r\n\t| { rows: LayoutRow[] };\r\n\r\ninterface ILayout {\r\n\tcss: string;\r\n\trows?: LayoutRow[];\r\n\tcols?: LayoutCol[];\r\n}\r\n\r\ntype TCsp = boolean | \"auto\";\r\n\r\ninterface IResourceConfig {\r\n\tdataprocessor_assignments?: boolean;\r\n\tdataprocessor_resources?: boolean;\r\n\teditable_resource_diagram?: boolean;\r\n\tresource_store?: {\r\n\t\ttype?: \"treeDataStore\"|\"dataStore\"|string;\r\n\t\tfetchTasks?: boolean;\r\n\t\tinitItem?: (item: any) => any;\r\n\t};\r\n\tlightbox_resources?: (resources: any[]) => any[];\r\n\r\n}\r\n\r\ninterface IGanttConfig {\r\n\tlayout: ILayout;\r\n\tlinks: {\r\n\t\tfinish_to_start: \"0\";\r\n\t\tstart_to_start: \"1\";\r\n\t\tfinish_to_finish: \"2\";\r\n\t\tstart_to_finish: \"3\";\r\n\t};\r\n\ttypes: {\r\n\t\ttask: string;\r\n\t\tproject: string;\r\n\t\tmilestone: string;\r\n\t};\r\n\tauto_types: boolean;\r\n\tduration_unit: DurationUnits;\r\n\twork_time: boolean;\r\n\tcorrect_work_time: boolean;\r\n\tskip_off_time: boolean;\r\n\tcascade_delete: boolean;\r\n\tautosize: boolean | string;\r\n\tautoscroll: boolean;\r\n\tshow_links: boolean;\r\n\tshow_task_cells: boolean;\r\n\tautosize_min_width: number;\r\n\tautoscroll_speed: number;\r\n\tdeepcopy_on_parse: boolean;\r\n\tstatic_background: boolean;\r\n\tstatic_background_cells: boolean;\r\n\tbranch_loading: boolean;\r\n\tbranch_loading_property: string;\r\n\tshow_loading: boolean;\r\n\tshow_chart: boolean;\r\n\tshow_grid: boolean;\r\n\tmin_duration: number;\r\n\tdate_format: string; // use instead xml_date\r\n\txml_date?: string; // deprecated\r\n\tstart_on_monday: boolean;\r\n\tserver_utc: boolean;\r\n\tshow_progress: boolean;\r\n\tfit_tasks: boolean;\r\n\tselect_task: boolean;\r\n\tscroll_on_click: boolean;\r\n\tsmart_rendering: boolean;\r\n\tpreserve_scroll: boolean;\r\n\treadonly: boolean;\r\n\tcontainer_resize_timeout: number;\r\n\r\n\t/*grid */\r\n\tdate_grid: string;\r\n\r\n\tdrag_links: boolean;\r\n\tdrag_progress: boolean;\r\n\tdrag_resize: boolean;\r\n\tdrag_project: boolean;\r\n\tdrag_move: boolean;\r\n\tdrag_mode: {\r\n\t\tresize: \"resize\",\r\n\t\tprogress: \"progress\",\r\n\t\tmove: \"move\",\r\n\t\tignore: \"ignore\"\r\n\t};\r\n\tround_dnd_dates: boolean;\r\n\tlink_wrapper_width: number;\r\n\troot_id: string | number;\r\n\r\n\tautofit: boolean;\r\n\tcolumns: IColumnItem[];\r\n\r\n\t/* scale*/\r\n\t/* it will be deprecated */\r\n\tdate_scale?: string;\r\n\tstep?: number;\r\n\tscale_unit?: DurationUnits;\r\n\tsubscales?: IScale[];\r\n\t/* it will be deprecated end */\r\n\r\n\tscales: IScale[];\r\n\r\n\tscale_offset_minimal: boolean;\r\n\r\n\tinherit_scale_class: boolean;\r\n\r\n\r\n\ttime_step: number;\r\n\tduration_step: number;\r\n\r\n\r\n\ttask_date: string;\r\n\ttime_picker: string;\r\n\ttask_attribute: string;\r\n\tlink_attribute: string;\r\n\tlayer_attribute: string;\r\n\tbuttons_left: string[];\r\n\t_migrate_buttons: {\r\n\t\tdhx_save_btn: \"gantt_save_btn\",\r\n\t\tdhx_cancel_btn: \"gantt_cancel_btn\",\r\n\t\tdhx_delete_btn: \"gantt_delete_btn\"\r\n\t};\r\n\r\n\tbuttons_right: string[];\r\n\r\n\r\n\tlightbox: {\r\n\t\tsections?: LightboxSection,\r\n\t\tproject_sections?: LightboxSection,\r\n\t\tmilestone_sections?: LightboxSection\r\n\t};\r\n\tdrag_lightbox: boolean;\r\n\tsort: boolean;\r\n\tdetails_on_create: boolean;\r\n\tdetails_on_dblclick: boolean;\r\n\tinitial_scroll: boolean;\r\n\ttask_scroll_offset: number;\r\n\r\n\torder_branch: boolean;\r\n\torder_branch_free: boolean;\r\n\r\n\t// task_height is deprecated, use 'bar_height` instead\r\n\ttask_height: number | \"full\";\r\n\tbar_height: number | \"full\";\r\n\tmin_column_width: number;\r\n\r\n\t// min width for grid column (when resizing)\r\n\tmin_grid_column_width: number;\r\n\t// name of the attribute with column index for resize element\r\n\tgrid_resizer_column_attribute: string;\r\n\t// name of the attribute with column index for resize element\r\n\t// grid_resizer_attribute: string; // usage of this parameter is not found\r\n\r\n\t// grid width can be increased after the column has been resized\r\n\tkeep_grid_width: boolean;\r\n\r\n\t// grid width can be adjusted\r\n\tgrid_resize: boolean;\r\n\tgrid_elastic_columns: boolean;\r\n\tshow_tasks_outside_timescale: boolean;\r\n\tshow_unscheduled: boolean;\r\n\treadonly_property: string;\r\n\teditable_property: string;\r\n\tcalendar_property: string;\r\n\tresource_calendars: object;\r\n\tdynamic_resource_calendars: boolean;\r\n\tinherit_calendar: boolean;\r\n\ttype_renderers: object;\r\n\r\n\tresize_rows: boolean;\r\n\t// name of the attribute with row index for resize element\r\n\ttask_grid_row_resizer_attribute: string;\r\n\t// min height for row (when resizing)\r\n\tmin_task_grid_row_height: number;\r\n\r\n\topen_tree_initially: boolean;\r\n\toptimize_render: boolean;\r\n\tprevent_default_scroll: boolean;\r\n\tshow_errors: boolean;\r\n\twai_aria_attributes: boolean;\r\n\tsmart_scales: boolean;\r\n\trtl: boolean;\r\n\tplaceholder_task: boolean | object;\r\n\thorizontal_scroll_key: TModifierKeys;\r\n\tdrag_timeline: {\r\n\t\tuseKey: TModifierKeys;\r\n\t\tignore: string;\r\n\t};\r\n\tdrag_multiple: boolean;\r\n\tcsp: TCsp;\r\n\r\n\tresources?: IResourceConfig;\r\n}\r\n\r\nmodule.exports = () => {\r\n\tconst result: IGanttConfig = {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\tfinish_to_start: \"0\",\r\n\t\t\tstart_to_start: \"1\",\r\n\t\t\tfinish_to_finish: \"2\",\r\n\t\t\tstart_to_finish: \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\ttask: \"task\",\r\n\t\t\tproject: \"project\",\r\n\t\t\tmilestone: \"milestone\"\r\n\t\t},\r\n\t\tauto_types: false,\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\t\tdeepcopy_on_parse: false,\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tstatic_background_cells: true,\r\n\t\tbranch_loading: false,\r\n\t\tbranch_loading_property: \"$has_child\",\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\tdate_format: \"%d-%m-%Y %H:%i\", // use instead xml_date\r\n\t\txml_date: undefined, // \"%d-%m-%Y %H:%i\", // deprecated\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tsmart_rendering: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\t\tcontainer_resize_timeout: 20,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_project: false,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\tresize: \"resize\",\r\n\t\t\tprogress: \"progress\",\r\n\t\t\tmove: \"move\",\r\n\t\t\tignore: \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: \"*\", resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: 44}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\r\n\t\tscale_offset_minimal: true,\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\tscales: [\r\n\t\t\t{\r\n\t\t\t\tunit: \"day\",\r\n\t\t\t\tstep: 1,\r\n\t\t\t\tdate: \"%d %M\"\r\n\t\t\t}\r\n\t\t],\r\n// \t\tdate_scale: \"%d %M\",\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"data-task-id\",\r\n\t\tlink_attribute: \"data-link-id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\tdhx_save_btn: \"gantt_save_btn\",\r\n\t\t\tdhx_cancel_btn: \"gantt_cancel_btn\",\r\n\t\t\tdhx_delete_btn: \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\t// task height is deprecated, use 'bar_height' instead\r\n\t\ttask_height: undefined,// number px of 'full' for row height\r\n\t\tbar_height: \"full\",\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"data-column-index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\t// grid_resizer_attribute: \"grid_resizer\", // - usage of this parameter is not found in code\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\t\tgrid_elastic_columns: false,\r\n\t\tshow_tasks_outside_timescale: false,\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\tresize_rows: false,\r\n\t\t// name of the attribute with row index for resize element\r\n\t\ttask_grid_row_resizer_attribute: \"data-row-index\",\r\n\t\t// min height for row (when resizing)\r\n\t\tmin_task_grid_row_height: 30,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\t\tdynamic_resource_calendars: false,\r\n\t\tinherit_calendar: false,\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true,\r\n\t\trtl:false,\r\n\t\tplaceholder_task: false,\r\n\t\thorizontal_scroll_key: \"shiftKey\",\r\n\t\tdrag_timeline: {\r\n\t\t\tuseKey: undefined,\r\n\t\t\tignore: \".gantt_task_line, .gantt_task_link\"\r\n\t\t},\r\n\t\tdrag_multiple: true,\r\n\t\tcsp: \"auto\"\r\n\t};\r\n\treturn result;\r\n};\r\n","module.exports = function () {\n  var services = {};\n\n  function register(name, getter) {\n    services[name] = getter;\n  }\n\n  function getService(name) {\n    if (!services[name]) {\n      return null;\n    }\n\n    return services[name]();\n  }\n\n  function dropService(name) {\n    if (services[name]) {\n      delete services[name];\n    }\n  }\n\n  var servicesEnum = {};\n  return {\n    services: servicesEnum,\n    setService: register,\n    getService: getService,\n    dropService: dropService,\n    destructor: function destructor() {\n      for (var i in services) {\n        if (services[i]) {\n          var service = services[i];\n\n          if (service && service.destructor) {\n            service.destructor();\n          }\n        }\n      }\n\n      services = null;\n    }\n  };\n};","export default class ExtensionsManager{\r\n\tprivate _extensions:{[key:string]: GanttPlugin };\r\n\r\n\tconstructor(config: {[key:string]: GanttPlugin }){\r\n\t\tthis._extensions = {};\r\n\t\tfor(const i in config){\r\n\t\t\tthis._extensions[i] = config[i];\r\n\t\t}\r\n\t}\r\n\r\n\taddExtension = (name: string, ext: GanttPlugin) => {\r\n\t\tthis._extensions[name] = ext;\r\n\t}\r\n\r\n\tgetExtension = (name: string): GanttPlugin => {\r\n\t\treturn this._extensions[name];\r\n\t}\r\n}","module.exports = {\n  KEY_CODES: {\n    UP: 38,\n    DOWN: 40,\n    LEFT: 37,\n    RIGHT: 39,\n    SPACE: 32,\n    ENTER: 13,\n    DELETE: 46,\n    ESC: 27,\n    TAB: 9\n  }\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction DHXGantt() {\n  this.constants = require(\"../constants\");\n  this.version = VERSION;\n  this.license = LICENSE;\n  this.templates = {};\n  this.ext = {};\n  this.keys = {\n    edit_save: this.constants.KEY_CODES.ENTER,\n    edit_cancel: this.constants.KEY_CODES.ESC\n  };\n}\n\nmodule.exports = function (supportedExtensions) {\n  // use a named constructor to make gantt instance discoverable in heap snapshots\n  var gantt = new DHXGantt();\n\n  var ExtensionManager = require(\"../ext/extension_manager\")[\"default\"];\n\n  var extensionManager = new ExtensionManager(supportedExtensions);\n  var activePlugins = {};\n\n  gantt.plugins = function (config) {\n    for (var i in config) {\n      if (config[i] && !activePlugins[i]) {\n        var plugin = extensionManager.getExtension(i);\n\n        if (plugin) {\n          plugin(gantt);\n          activePlugins[i] = true;\n        }\n      }\n    }\n\n    return activePlugins;\n  };\n\n  gantt.$services = require(\"../core/common/services\")();\n  gantt.config = require(\"../core/common/config\")();\n  gantt.ajax = require(\"../core/common/ajax\")(gantt);\n  gantt.date = require(\"../core/common/date\")(gantt);\n  gantt.RemoteEvents = require(\"../core/remote/remote_events\").remoteEvents;\n\n  var dnd = require(\"../core/common/dnd\")(gantt);\n\n  gantt.$services.setService(\"dnd\", function () {\n    return dnd;\n  });\n\n  var templatesLoader = require(\"../core/common/templates\")(gantt);\n\n  gantt.$services.setService(\"templateLoader\", function () {\n    return templatesLoader;\n  });\n\n  require(\"../utils/eventable\")(gantt);\n\n  var StateService = require(\"../core/common/state\");\n\n  var stateService = new StateService();\n  stateService.registerProvider(\"global\", function () {\n    var res = {\n      min_date: gantt._min_date,\n      max_date: gantt._max_date,\n      selected_task: null\n    }; // do not throw error if getState called from non-initialized gantt\n\n    if (gantt.$data && gantt.$data.tasksStore) {\n      res.selected_task = gantt.$data.tasksStore.getSelectedId();\n    }\n\n    return res;\n  });\n  gantt.getState = stateService.getState;\n  gantt.$services.setService(\"state\", function () {\n    return stateService;\n  });\n\n  var utils = require(\"../utils/utils\");\n\n  utils.mixin(gantt, utils);\n  gantt.Promise = require(\"../utils/promise\");\n  gantt.env = require(\"../utils/env\");\n\n  require(\"../core/datastore/datastore_hooks\")(gantt);\n\n  var DataProcessor = require(\"../core/dataprocessor\");\n\n  gantt.dataProcessor = DataProcessor.DEPRECATED_api;\n  gantt.createDataProcessor = DataProcessor.createDataProcessor;\n\n  require(\"../core/plugins\")(gantt);\n\n  require(\"../core/dynamic_loading\")(gantt);\n\n  require(\"../core/grid_column_api\")(gantt);\n\n  require(\"../core/tasks\")(gantt);\n\n  require(\"../core/load\")(gantt);\n\n  require(\"../core/worktime/work_time\")(gantt);\n\n  require(\"../core/data\")(gantt);\n\n  require(\"../publish_helpers/void_script_second\")[\"default\"](gantt);\n\n  require(\"../core/data_task_types\")(gantt);\n\n  require(\"../core/cached_functions\")(gantt);\n\n  require(\"../core/gantt_core\")(gantt);\n\n  require(\"../core/destructor\")(gantt);\n\n  require(\"../publish_helpers/void_script_third\")[\"default\"](gantt);\n\n  var i18n = require(\"../locale\")[\"default\"]();\n\n  gantt.i18n = {\n    addLocale: i18n.addLocale,\n    setLocale: function setLocale(locale) {\n      if (typeof locale === \"string\") {\n        var localeObject = i18n.getLocale(locale);\n\n        if (!localeObject) {\n          localeObject = i18n.getLocale(\"en\");\n        }\n\n        gantt.locale = localeObject;\n      } else if (locale) {\n        if (!gantt.locale) {\n          gantt.locale = locale;\n        } else {\n          for (var i in locale) {\n            if (locale[i] && _typeof(locale[i]) === \"object\") {\n              if (!gantt.locale[i]) {\n                gantt.locale[i] = {};\n              }\n\n              gantt.mixin(gantt.locale[i], locale[i], true);\n            } else {\n              gantt.locale[i] = locale[i];\n            }\n          }\n        }\n      }\n    },\n    getLocale: i18n.getLocale\n  };\n  gantt.i18n.setLocale(\"en\");\n  return gantt;\n};","require(\"css/skins/terrace.less\");\n\nvar factory = require(\"./make_instance_common\");\n\nmodule.exports = function (supportedExtensions) {\n  var gantt = factory(supportedExtensions);\n\n  if (!gantt.env.isNode) {\n    require(\"../core/ui_core\")(gantt);\n  }\n\n  return gantt;\n};","import { IUndo, IUndoCommand, IUndoCommands, IUndoPropAction, IUndoPropCommand, TActionType, TEntityType, TUndoStack, TUndoValue } from \"./types\";\r\n\r\nconst MAX_UNDO_STEPS = 10;\r\n\r\nexport class Undo implements IUndo {\r\n\r\n\tmaxSteps = MAX_UNDO_STEPS;\r\n\tundoEnabled = true;\r\n\tredoEnabled = true;\r\n\taction: IUndoPropAction = {\r\n\t\tcreate: (commands?: IUndoCommand[]): IUndoCommands => {\r\n\t\t\treturn { commands: (commands ? commands.slice() : []) };\r\n\t\t},\r\n\t\tinvert: (action: IUndoCommands): IUndoCommands => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst revert = gantt.copy(action);\r\n\t\t\tconst commands = this.command;\r\n\t\t\tfor (let i = 0; i < action.commands.length; i++) {\r\n\t\t\t\tconst command = revert.commands[i] = commands.invert(revert.commands[i]);\r\n\t\t\t\tif (command.type === commands.type.update || command.type === commands.type.move) {\r\n\t\t\t\t\t[command.value, command.oldValue] = [command.oldValue, command.value];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn revert as IUndoCommands;\r\n\t\t}\r\n\t};\r\n\tcommand: IUndoPropCommand = {\r\n\t\t// entities that require different processing for undoing-redoing changes (gantt.config.undo_types)\r\n\t\tentity: null,\r\n\r\n\t\t// types of traced actions (gantt.config.undo_actions)\r\n\t\ttype: null,\r\n\r\n\t\tcreate: (value: TUndoValue, oldValue: TUndoValue, type: TActionType, entity: TEntityType): IUndoCommand => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\treturn {\r\n\t\t\t\tentity,\r\n\t\t\t\ttype,\r\n\t\t\t\tvalue: gantt.copy(value),\r\n\t\t\t\toldValue: gantt.copy(oldValue || value)\r\n\t\t\t};\r\n\t\t},\r\n\t\tinvert: (command: IUndoCommand): IUndoCommand => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst revert = gantt.copy(command);\r\n\t\t\trevert.type = this.command.inverseCommands(command.type);\r\n\t\t\treturn revert;\r\n\t\t},\r\n\t\tinverseCommands: (command: TActionType): TActionType => {\r\n\t\t\tconst gantt = this._gantt;\r\n\t\t\tconst types = this.command.type;\r\n\t\t\tswitch (command) {\r\n\t\t\t\tcase types.update:\r\n\t\t\t\t\treturn types.update;\r\n\t\t\t\tcase types.remove:\r\n\t\t\t\t\treturn types.add;\r\n\t\t\t\tcase types.add:\r\n\t\t\t\t\treturn types.remove;\r\n\t\t\t\tcase types.move:\r\n\t\t\t\t\treturn types.move;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tgantt.assert(false, \"Invalid command \"+ command);\r\n\t\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tprivate _undoStack = [];\r\n\tprivate _redoStack = [];\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any){\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\tgetUndoStack() {\r\n\t\treturn this._undoStack;\r\n\t}\r\n\tsetUndoStack(stack: []) {\r\n\t\tthis._undoStack = stack;\r\n\t}\r\n\r\n\tgetRedoStack() {\r\n\t\treturn this._redoStack;\r\n\t}\r\n\tsetRedoStack(stack: []) {\r\n\t\tthis._redoStack = stack;\r\n\t}\r\n\r\n\tclearUndoStack() {\r\n\t\tthis._undoStack = [];\r\n\t}\r\n\r\n\tclearRedoStack() {\r\n\t\tthis._redoStack = [];\r\n\t}\r\n\r\n\tupdateConfigs() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.maxSteps = gantt.config.undo_steps || MAX_UNDO_STEPS;\r\n\t\tthis.command.entity = gantt.config.undo_types;\r\n\t\tthis.command.type = gantt.config.undo_actions;\r\n\t\tthis.undoEnabled = !!gantt.config.undo;\r\n\t\tthis.redoEnabled = !!gantt.config.redo; // GS-873, Redo should work even when the `gantt.config.undo` is disabled.\r\n\t}\r\n\r\n\tundo() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.updateConfigs();\r\n\t\tif (!this.undoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst action = this._pop(this._undoStack);\r\n\t\tif (action) {\r\n\t\t\tthis._reorderCommands(action);\r\n\t\t}\r\n\t\tif (gantt.callEvent(\"onBeforeUndo\", [action]) !== false) {\r\n\t\t\tif (action) {\r\n\t\t\t\tthis._applyAction(this.action.invert(action));\r\n\t\t\t\tthis._push(this._redoStack, gantt.copy(action));\r\n\t\t\t\tgantt.callEvent(\"onAfterUndo\", [action]);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterUndo\", [null]);\r\n\t}\r\n\r\n\tredo() {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.updateConfigs();\r\n\t\tif (!this.redoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst action = this._pop(this._redoStack);\r\n\t\tif (action) {\r\n\t\t\tthis._reorderCommands(action);\r\n\t\t}\r\n\r\n\t\tif (gantt.callEvent(\"onBeforeRedo\", [action]) !== false) {\r\n\t\t\tif (action) {\r\n\t\t\t\tthis._applyAction(action);\r\n\t\t\t\tthis._push(this._undoStack, gantt.copy(action));\r\n\t\t\t\tgantt.callEvent(\"onAfterRedo\", [action]);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterRedo\", [null]);\r\n\t}\r\n\r\n\t// storeUndo:\r\n\tlogAction(action: IUndoCommands) {\r\n\t\tthis._push(this._undoStack, action);\r\n\t\tthis._redoStack = [];\r\n\t}\r\n\r\n\tprivate _push(stack: TUndoStack, action: IUndoCommands): IUndoCommands {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (!action.commands.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst event = stack === this._undoStack ? \"onBeforeUndoStack\" : \"onBeforeRedoStack\";\r\n\t\tif (gantt.callEvent(event, [action]) === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// commands can be removed from event handler\r\n\t\tif (!action.commands.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tstack.push(action);\r\n\t\twhile (stack.length > this.maxSteps) {\r\n\t\t\tstack.shift();\r\n\t\t}\r\n\t\treturn action;\r\n\t}\r\n\r\n\tprivate _pop(stack: TUndoStack): IUndoCommands {\r\n\t\treturn stack.pop();\r\n\t}\r\n\r\n\tprivate _reorderCommands(action) {\r\n\t\t// firstly process tasks and only then links\r\n\t\t// in order to ensure links are added not earlier than their tasks\r\n\t\t// firstly to 'move' actions and only then updates\r\n\t\tconst weights = { any: 0, link:1, task:2 };\r\n\t\tconst actionWeights = { move: 1, any:0 };\r\n\t\taction.commands.sort(function(a, b) {\r\n\t\t\tif (a.entity === \"task\" && b.entity === \"task\") {\r\n\t\t\t\tif (a.type !== b.type) {\r\n\t\t\t\t\treturn (actionWeights[b.type] || 0) - (actionWeights[a.type] || 0);\r\n\t\t\t\t} else if (a.type === \"move\" && a.oldValue && b.oldValue && b.oldValue.parent === a.oldValue.parent) {\r\n\t\t\t\t\treturn a.oldValue.$index - b.oldValue.$index;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst weightA = weights[a.entity] || weights.any;\r\n\t\t\t\tconst weightB = weights[b.entity] || weights.any;\r\n\t\t\t\treturn weightB - weightA;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _applyAction(action: IUndoCommands) {\r\n\t\tlet command = null;\r\n\t\tconst entities = this.command.entity;\r\n\t\tconst actions = this.command.type;\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst methods = {};\r\n\t\tmethods[entities.task] = {\r\n\t\t\tadd: \"addTask\",\r\n\t\t\tget: \"getTask\",\r\n\t\t\tupdate: \"updateTask\",\r\n\t\t\tremove: \"deleteTask\",\r\n\t\t\tmove: \"moveTask\",\r\n\t\t\tisExists: \"isTaskExists\"\r\n\t\t};\r\n\t\tmethods[entities.link] = {\r\n\t\t\tadd: \"addLink\",\r\n\t\t\tget: \"getLink\",\r\n\t\t\tupdate: \"updateLink\",\r\n\t\t\tremove: \"deleteLink\",\r\n\t\t\tisExists: \"isLinkExists\"\r\n\t\t};\r\n\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\tfor (let i = 0; i < action.commands.length; i++) {\r\n\t\t\t\tcommand = action.commands[i];\r\n\t\t\t\tconst method = methods[command.entity][command.type];\r\n\t\t\t\tconst getMethod = methods[command.entity].get;\r\n\t\t\t\tconst check = methods[command.entity].isExists;\r\n\r\n\t\t\t\tif (command.type === actions.add) {\r\n\t\t\t\t\tgantt[method](command.oldValue, command.oldValue.parent, command.oldValue.$local_index);\r\n\t\t\t\t} else if (command.type === actions.remove) {\r\n\t\t\t\t\tif (gantt[check](command.value.id)) {\r\n\t\t\t\t\t\tgantt[method](command.value.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (command.type === actions.update) {\r\n\t\t\t\t\tconst item = gantt[getMethod](command.value.id);\r\n\t\t\t\t\tfor(const prop in command.value){\r\n\t\t\t\t\t\tif(!prop.startsWith(\"$\") && !prop.startsWith(\"_\")){\r\n\t\t\t\t\t\t\titem[prop] = command.value[prop];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt[method](command.value.id);\r\n\t\t\t\t} else if (command.type === actions.move) {\r\n\t\t\t\t\tgantt[method](command.value.id, command.value.$local_index, command.value.parent);\r\n\t\t\t\t\t// GS-680: We should send the changes to the server after we undo vertical reorder\r\n\t\t\t\t\tgantt.callEvent(\"onRowDragEnd\", [command.value.id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}","import { IInlineEditState, IMonitor, IUndo, IUndoCommand, TActionType, TEntityType, TUndoValue } from \"./types\";\r\n\r\nconst noTrack = {\r\n\tonBeforeUndo: \"onAfterUndo\",\r\n\tonBeforeRedo: \"onAfterRedo\"\r\n};\r\n\r\nconst batchActions = [\r\n\t\"onTaskDragStart\",\r\n\t\"onAfterTaskUpdate\",\r\n\t\"onAfterTaskDelete\",\r\n\t\"onBeforeBatchUpdate\"\r\n];\r\n\r\nexport class Monitor implements IMonitor {\r\n\tprivate _batchAction = null;\r\n\tprivate _batchMode = false;\r\n\tprivate _ignore = false;\r\n\tprivate _ignoreMoveEvents = false;\r\n\tprivate _initialTasks = {};\r\n\tprivate _initialLinks = {};\r\n\tprivate _nestedTasks =  {};\r\n\tprivate _nestedLinks = {};\r\n\tprivate _timeout;\r\n\tprivate _gantt: any;\r\n\tprivate _undo: IUndo;\r\n\r\n\tconstructor(undo: IUndo, gantt: any) {\r\n\t\tthis._undo = undo;\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._attachEvents();\r\n\t}\r\n\r\n\tstore(id: TaskID | LinkID, type: TEntityType, overwrite: boolean = false) {\r\n\t\tif (type === this._gantt.config.undo_types.task) {\r\n\t\t\treturn this._storeTask(id, overwrite);\r\n\t\t}\r\n\t\tif (type === this._gantt.config.undo_types.link) {\r\n\t\t\treturn this._storeLink(id, overwrite);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tisMoveEventsIgnored() {\r\n\t\treturn this._ignoreMoveEvents;\r\n\t}\r\n\ttoggleIgnoreMoveEvents(newValue?: boolean) {\r\n\t\tthis._ignoreMoveEvents = newValue || false;\r\n\t}\r\n\tstartIgnore() {\r\n\t\tthis._ignore = true;\r\n\t}\r\n\tstopIgnore() {\r\n\t\tthis._ignore = false;\r\n\t}\r\n\tstartBatchAction() {\r\n\t\t// try catching updates made from event handlers using timeout\r\n\t\tif (!this._timeout){\r\n\t\t\tthis._timeout = setTimeout(() => {\r\n\t\t\t\tthis.stopBatchAction();\r\n\t\t\t\tthis._timeout = null;\r\n\t\t\t}, 10);\r\n\t\t}\r\n\r\n\r\n\t\tif (this._ignore || this._batchMode) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._batchMode = true;\r\n\t\tthis._batchAction = this._undo.action.create();\r\n\t}\r\n\tstopBatchAction() {\r\n\t\tif (this._ignore) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst undo = this._undo;\r\n\t\tif (this._batchAction) {\r\n\t\t\tundo.logAction(this._batchAction);\r\n\t\t}\r\n\t\tthis._batchMode = false;\r\n\t\tthis._batchAction = null;\r\n\t}\r\n\tonTaskAdded(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.add);\r\n\t\t}\r\n\t}\r\n\tonTaskUpdated(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.update);\r\n\t\t}\r\n\t}\r\n\tonTaskMoved(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\t(task as any).$local_index = this._gantt.getTaskIndex(task.id);\r\n\t\t\tconst oldValue = this.getInitialTask(task.id);\r\n\t\t\tif((task as any).$local_index === oldValue.$local_index &&\r\n\t\t\t\tthis._gantt.getParent(task) === this._gantt.getParent(oldValue)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\tthis._storeEntityCommand(\r\n\t\t\t\ttask,\r\n\t\t\t\tthis.getInitialTask(task.id),\r\n\t\t\t\tthis._undo.command.type.move,\r\n\t\t\t\tthis._undo.command.entity.task\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tonTaskDeleted(task: ITask) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeTaskCommand(task, this._undo.command.type.remove);\r\n\t\t\tif (this._nestedTasks[task.id]) {\r\n\t\t\t\tconst children = this._nestedTasks[task.id];\r\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\t\tthis._storeTaskCommand(children[i], this._undo.command.type.remove);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._nestedLinks[task.id]) {\r\n\t\t\t\tconst childrenLinks = this._nestedLinks[task.id];\r\n\t\t\t\tfor (let i = 0; i < childrenLinks.length; i++) {\r\n\t\t\t\t\tthis._storeLinkCommand(childrenLinks[i], this._undo.command.type.remove);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonLinkAdded(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.add);\r\n\t\t}\r\n\t}\r\n\tonLinkUpdated(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.update);\r\n\t\t}\r\n\t}\r\n\tonLinkDeleted(link: ILink) {\r\n\t\tif (!this._ignore) {\r\n\t\t\tthis._storeLinkCommand(link, this._undo.command.type.remove);\r\n\t\t}\r\n\t}\r\n\tsetNestedTasks(id: TaskID, taskIds: TaskID[]) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet task = null;\r\n\t\tconst tasks = [];\r\n\t\tlet\tlinkIds = this._getLinks(gantt.getTask(id));\r\n\r\n\t\tfor (let i = 0; i < taskIds.length; i++) {\r\n\t\t\ttask = this.setInitialTask(taskIds[i]);\r\n\t\t\tlinkIds = linkIds.concat(this._getLinks(task));\r\n\t\t\ttasks.push(task);\r\n\t\t}\r\n\r\n\t\tconst uniqueLinks = {};\r\n\t\tfor (let i = 0; i < linkIds.length; i++) {\r\n\t\t\tuniqueLinks[linkIds[i]] = true;\r\n\t\t}\r\n\t\tconst links = [];\r\n\t\tfor (const i in uniqueLinks) {\r\n\t\t\tlinks.push(this.setInitialLink(i));\r\n\t\t}\r\n\t\tthis._nestedTasks[id] = tasks;\r\n\t\tthis._nestedLinks[id] = links;\r\n\t}\r\n\tsetInitialTask(id: TaskID, overwrite?: boolean) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (overwrite || (!this._initialTasks[id] || !this._batchMode)) {\r\n\t\t\tconst task = gantt.copy(gantt.getTask(id));\r\n\t\t\ttask.$index = gantt.getGlobalTaskIndex(id);\r\n\t\t\ttask.$local_index = gantt.getTaskIndex(id);\r\n\t\t\tthis.setInitialTaskObject(id, task);\r\n\t\t}\r\n\t\treturn this._initialTasks[id];\r\n\t}\r\n\tgetInitialTask(id: TaskID) {\r\n\t\treturn this._initialTasks[id];\r\n\t}\r\n\tclearInitialTasks() {\r\n\t\tthis._initialTasks = {};\r\n\t}\r\n\tsetInitialTaskObject(id: TaskID, object: ITask) {\r\n\t\tthis._initialTasks[id] = object;\r\n\t}\r\n\tsetInitialLink(id: LinkID, overwrite?: boolean) {\r\n\t\tif (!this._initialLinks[id] || !this._batchMode) {\r\n\t\t\tthis._initialLinks[id] = this._gantt.copy(this._gantt.getLink(id));\r\n\t\t}\r\n\t\treturn this._initialLinks[id];\r\n\t}\r\n\tgetInitialLink(id: LinkID) {\r\n\t\treturn this._initialLinks[id];\r\n\t}\r\n\tclearInitialLinks() {\r\n\t\tthis._initialLinks = {};\r\n\t}\r\n\tprivate _attachEvents() {\r\n\t\tlet deleteCacheCooldown = null;\r\n\t\tconst gantt = this._gantt;\r\n\r\n\t\tconst saveInitialAll = () => {\r\n\t\t\tif (!deleteCacheCooldown) {\r\n\t\t\t\tdeleteCacheCooldown = setTimeout(() => {\r\n\t\t\t\t\tdeleteCacheCooldown = null;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.clearInitialTasks();\r\n\t\t\t\tgantt.eachTask((task: ITask) => {\r\n\t\t\t\t\tthis.setInitialTask(task.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.clearInitialLinks();\r\n\t\t\t\tgantt.getLinks().forEach((link: ILink) => {\r\n\t\t\t\t\tthis.setInitialLink(link.id);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst getMoveObjectByTaskId = (id: TaskID) => {\r\n\t\t\treturn gantt.copy(gantt.getTask(id));\r\n\t\t};\r\n\r\n\t\tfor (const i in noTrack) {\r\n\t\t\tgantt.attachEvent(i, () => {\r\n\t\t\t\tthis.startIgnore();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tgantt.attachEvent(noTrack[i], () => {\r\n\t\t\t\tthis.stopIgnore();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfor (let i  = 0; i < batchActions.length; i++) {\r\n\t\t\tgantt.attachEvent(batchActions[i], () => {\r\n\t\t\t\tthis.startBatchAction();\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tgantt.attachEvent(\"onParse\", () => {\r\n\t\t\tthis._undo.clearUndoStack();\r\n\t\t\tthis._undo.clearRedoStack();\r\n\t\t\tsaveInitialAll();\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskAdd\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.setInitialTask(id, true);\r\n\t\t\tthis.onTaskAdded(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskUpdate\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.onTaskUpdated(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", (id: TaskID, task: ITask) => {\r\n\t\t\tthis.onTaskDeleted(task);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkAdd\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.setInitialLink(id, true);\r\n\t\t\tthis.onLinkAdded(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkUpdate\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.onLinkUpdated(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onAfterLinkDelete\", (id: LinkID, link: ILink) => {\r\n\t\t\tthis.onLinkDeleted(link);\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onRowDragEnd\", (id: TaskID, target: TaskID) => {\r\n\t\t\tthis.onTaskMoved(getMoveObjectByTaskId(id));\r\n\t\t\tthis.toggleIgnoreMoveEvents();\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", (id: TaskID) => {\r\n\t\t\tthis.store(id, gantt.config.undo_types.task);\r\n\t\t\tconst nested = [];\r\n\r\n\t\t\t// remember task indexes in case their being deleted in a loop, so they could be restored in the correct order\r\n\t\t\tsaveInitialAll();\r\n\r\n\t\t\tgantt.eachTask((task: ITask) => {\r\n\t\t\t\tnested.push(task.id);\r\n\t\t\t}, id);\r\n\t\t\tthis.setNestedTasks(id, nested);\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tconst datastore = gantt.getDatastore(\"task\");\r\n\r\n\t\tdatastore.attachEvent(\"onBeforeItemMove\", (id: TaskID, parent: TaskID, tindex: number) => {\r\n\t\t\tif (!this.isMoveEventsIgnored()) {\r\n\t\t\t\tsaveInitialAll();\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tdatastore.attachEvent(\"onAfterItemMove\", (id: TaskID, parent: TaskID, tindex: number) => {\r\n\t\t\tif (!this.isMoveEventsIgnored()) {\r\n\t\t\t\tthis.onTaskMoved(getMoveObjectByTaskId(id));\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onRowDragStart\", (id: TaskID, target: TaskID, e: Event) => {\r\n\t\t\tthis.toggleIgnoreMoveEvents(true);\r\n\t\t\tsaveInitialAll();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDrag\", (taskId: TaskID) => this.store(taskId, gantt.config.undo_types.task));\r\n\r\n\t\tgantt.attachEvent(\"onLightbox\", (taskId: TaskID) => this.store(taskId, gantt.config.undo_types.task));\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskAutoSchedule\", (task: ITask) => {\r\n\t\t\tthis.store(task.id, gantt.config.undo_types.task);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tif (gantt.ext.inlineEditors) {\r\n\t\t\tgantt.ext.inlineEditors.attachEvent(\"onEditStart\", (state: IInlineEditState) => {\r\n\t\t\t\tthis.store(state.id, gantt.config.undo_types.task);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n//!!!https://docs.dhtmlx.com/gantt/samples/?sample=%2708_api/09_export_store.html%27&filter=%27exp%27\r\n\tprivate _storeCommand(command: IUndoCommand) {\r\n\t\tconst undo = this._undo;\r\n\t\tundo.updateConfigs();\r\n\r\n\t\tif (!undo.undoEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._batchMode) {\r\n\t\t\tthis._batchAction.commands.push(command);\r\n\t\t} else {\r\n\t\t\tconst action = undo.action.create([command]);\r\n\t\t\tundo.logAction(action);\r\n\t\t}\r\n\t}\r\n\tprivate _storeEntityCommand(obj: TUndoValue, old: TUndoValue, actionType: TActionType, entityType: TEntityType) {\r\n\t\tconst undo = this._undo;\r\n\t\tconst command = undo.command.create(obj, old, actionType, entityType);\r\n\t\tthis._storeCommand(command);\r\n\t}\r\n\tprivate _storeTaskCommand(obj: ITask, type: TActionType) {\r\n\t\tif(this._gantt.isTaskExists(obj.id)){\r\n\t\t\t(obj as any).$local_index = this._gantt.getTaskIndex(obj.id);\r\n\t\t}\r\n\r\n\t\tthis._storeEntityCommand(obj, this.getInitialTask(obj.id), type, this._undo.command.entity.task);\r\n\t}\r\n\tprivate _storeLinkCommand(obj: ILink, type: TActionType) {\r\n\t\tthis._storeEntityCommand(obj, this.getInitialLink(obj.id), type, this._undo.command.entity.link);\r\n\t}\r\n\tprivate _getLinks(task: ITask) {\r\n\t\treturn task.$source.concat(task.$target);\r\n\t}\r\n\tprivate _storeTask(taskId: TaskID, overwrite: boolean = false) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis.setInitialTask(taskId, overwrite);\r\n\t\tgantt.eachTask((child: ITask) => {\r\n\t\t\tthis.setInitialTask(child.id);\r\n\t\t}, taskId);\r\n\t\treturn true;\r\n\t}\r\n\tprivate _storeLink(linkId: LinkID, overwrite: boolean = false) {\r\n\t\tthis.setInitialLink(linkId, overwrite);\r\n\t\treturn true;\r\n\t}\r\n}","import { Monitor } from \"./monitor\";\r\nimport { IMonitor, IUndoCommand, TEntityType, TUndoStack } from \"./types\";\r\nimport { Undo } from \"./undo\";\r\n\r\nexport default function(gantt: any){\r\n\r\nconst _undo = new Undo(gantt);\r\nconst monitor: IMonitor = new Monitor(_undo, gantt);\r\n\r\ngantt.config.undo = true;\r\ngantt.config.redo = true;\r\n\r\n/**\r\n * entities that require different processing for undoing-redoing changes\r\n * @type {{link: string, task: string}}\r\n */\r\ngantt.config.undo_types = {\r\n\tlink: \"link\",\r\n\ttask: \"task\"\r\n};\r\n\r\n/**\r\n * types of traced actions\r\n * @type {{update: string, remove: string, add: string}}\r\n */\r\ngantt.config.undo_actions = {\r\n\tupdate: \"update\",\r\n\tremove: \"remove\", // remove item from datastore\r\n\tadd: \"add\",\r\n\tmove: \"move\" // move task in grid\r\n};\r\n\r\nif (!gantt.ext) {\r\n\tgantt.ext = {};\r\n}\r\n\r\ngantt.ext.undo = {\r\n\tundo: () => _undo.undo(),\r\n\tredo: () => _undo.redo(),\r\n\tgetUndoStack: () => _undo.getUndoStack(),\r\n\tsetUndoStack: (stack:[]) => _undo.setUndoStack(stack),\r\n\tgetRedoStack: () => _undo.getRedoStack(),\r\n\tsetRedoStack: (stack:[]) => _undo.setRedoStack(stack),\r\n\tclearUndoStack: () => _undo.clearUndoStack(),\r\n\tclearRedoStack: () => _undo.clearRedoStack(),\r\n\tsaveState: (id: TaskID | LinkID, type: TEntityType) => monitor.store(id, type, true),\r\n\tgetInitialState: (id: TaskID | LinkID, type: TEntityType) => {\r\n\t\tif(type === gantt.config.undo_types.link){\r\n\t\t\treturn monitor.getInitialLink(id);\r\n\t\t}else{\r\n\t\t\treturn monitor.getInitialTask(id);\r\n\t\t}\r\n\t}\r\n};\r\n\r\ngantt.undo = gantt.ext.undo.undo;\r\ngantt.redo = gantt.ext.undo.redo;\r\ngantt.getUndoStack = gantt.ext.undo.getUndoStack;\r\ngantt.getRedoStack = gantt.ext.undo.getRedoStack;\r\ngantt.clearUndoStack = gantt.ext.undo.clearUndoStack;\r\ngantt.clearRedoStack = gantt.ext.undo.clearRedoStack;\r\n\r\nfunction updTask(task: ITask, oldId: TaskID, newId: TaskID) {\r\n\tif (!task) { return; }\r\n\r\n\tif (task.id === oldId) {\r\n\t\ttask.id = newId;\r\n\t}\r\n\r\n\tif (task.parent === oldId) {\r\n\t\ttask.parent = newId;\r\n\t}\r\n}\r\n\r\nfunction changeTaskCommandId(command: IUndoCommand, oldId: TaskID, newId: TaskID) {\r\n\tupdTask(command.value, oldId, newId);\r\n\tupdTask(command.oldValue, oldId, newId);\r\n}\r\n\r\nfunction updLink(link: ILink, oldTaskId: TaskID, newTaskId: TaskID) {\r\n\tif (!link) { return; }\r\n\tif (link.source === oldTaskId) {\r\n\t\tlink.source = newTaskId;\r\n\t}\r\n\tif (link.target === oldTaskId) {\r\n\t\tlink.target = newTaskId;\r\n\t}\r\n}\r\n\r\nfunction changeLinkCommandId(command: IUndoCommand, oldId: LinkID, newId: LinkID) {\r\n\tupdLink(command.value, oldId, newId);\r\n\tupdLink(command.oldValue, oldId, newId);\r\n}\r\n\r\nfunction updateTasksIds(log: TUndoStack, oldId: TaskID, newId: TaskID) {\r\n\tconst undo = _undo;\r\n\r\n\tfor (let i = 0; i < log.length; i++) {\r\n\t\tconst entry = log[i];\r\n\t\tfor (let j = 0; j < entry.commands.length; j++) {\r\n\t\t\tif (entry.commands[j].entity === undo.command.entity.task) {\r\n\t\t\t\tchangeTaskCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t} else if (entry.commands[j].entity === undo.command.entity.link) {\r\n\t\t\t\tchangeLinkCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction updateLinksIds(log: TUndoStack, oldId: LinkID, newId: LinkID) {\r\n\tconst undo = _undo;\r\n\r\n\tfor (let i = 0; i < log.length; i++) {\r\n\t\tconst entry = log[i];\r\n\t\tfor (let j = 0; j < entry.commands.length; j++) {\r\n\t\t\tconst command = entry.commands[j];\r\n\t\t\tif (command.entity === undo.command.entity.link) {\r\n\t\t\t\tif (command.value && command.value.id === oldId) {\r\n\t\t\t\t\tcommand.value.id = newId;\r\n\t\t\t\t}\r\n\t\t\t\tif (command.oldValue && command.oldValue.id === oldId) {\r\n\t\t\t\t\tcommand.oldValue.id = newId;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\ngantt.attachEvent(\"onTaskIdChange\", (oldId: TaskID, newId: TaskID) => {\r\n\tconst undo = _undo;\r\n\tupdateTasksIds(undo.getUndoStack(), oldId, newId);\r\n\tupdateTasksIds(undo.getRedoStack(), oldId, newId);\r\n});\r\n\r\ngantt.attachEvent(\"onLinkIdChange\", (oldId: LinkID, newId: LinkID) => {\r\n\tconst undo = _undo;\r\n\tupdateLinksIds(undo.getUndoStack(), oldId, newId);\r\n\tupdateLinksIds(undo.getRedoStack(), oldId, newId);\r\n});\r\n\r\ngantt.attachEvent(\"onGanttReady\", () => {\r\n\t_undo.updateConfigs();\r\n});\r\n\r\n}","import * as domHelpers from \"../../core/ui/utils/dom_helpers\";\r\n\r\ninterface IViewPosition{\r\n\ttop: number;\r\n\tleft: number;\r\n}\r\n\r\ninterface IViewBox extends IViewPosition{\r\n\twidth: number;\r\n\theight: number;\r\n\tbottom: number;\r\n\tright: number;\r\n}\r\n\r\nexport class Tooltip {\r\n\tprivate _root: HTMLElement;\r\n\tprivate _tooltipNode: HTMLElement;\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any){\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\tgetNode() : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif (!this._tooltipNode){\r\n\t\t\tthis._tooltipNode = document.createElement(\"div\");\r\n\t\t\tthis._tooltipNode.className = \"gantt_tooltip\";\r\n\t\t\tgantt._waiAria.tooltipAttr(this._tooltipNode);\r\n\t\t}\r\n\t\treturn this._tooltipNode;\r\n\t}\r\n\r\n\tsetViewport(node: HTMLElement):Tooltip{\r\n\t\tthis._root = node;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tshow(left: number, top: number): Tooltip;\r\n\tshow(event: MouseEvent): Tooltip;\r\n\tshow(left: number | MouseEvent, top?: number): Tooltip {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst container = document.body;\r\n\t\tconst node = this.getNode();\r\n\r\n\t\tif(!domHelpers.isChildOf(node, container)){\r\n\t\t\tthis.hide();\r\n\t\t\tcontainer.appendChild(node);\r\n\t\t}\r\n\r\n\t\tif (this._isLikeMouseEvent(left)) {\r\n\t\t\tconst position = this._calculateTooltipPosition(left as MouseEvent);\r\n\t\t\ttop = position.top;\r\n\t\t\tleft = position.left;\r\n\t\t}\r\n\r\n\t\tnode.style.top = top + \"px\";\r\n\t\tnode.style.left = left + \"px\";\r\n\r\n\t\tgantt._waiAria.tooltipVisibleAttr(node);\r\n\t\treturn this;\r\n\t}\r\n\thide() : Tooltip{\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst node = this.getNode();\r\n\t\tif(node && node.parentNode){\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t}\r\n\t\tgantt._waiAria.tooltipHiddenAttr(node);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetContent(html: string) : Tooltip{\r\n\t\tconst node = this.getNode();\r\n\t\tnode.innerHTML = html;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t// it is for salesforce, because it proxies event to it own events\r\n\tprivate _isLikeMouseEvent(event: any): boolean {\r\n\t\tif (!event || typeof event !== \"object\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn \"clientX\" in event && \"clientY\" in event;\r\n\t}\r\n\r\n\tprivate _getViewPort() : HTMLElement {\r\n\t\treturn this._root || document.body;\r\n\t}\r\n\r\n\r\n\tprivate _calculateTooltipPosition(event: MouseEvent): IViewPosition{\r\n\t\tconst gantt = this._gantt;\r\n\t\t// top/left coordinates inside the viewport by mouse position\r\n\t\tconst viewport =  this._getViewPortSize();\r\n\t\tconst tooltipNode = this.getNode();\r\n\t\tconst tooltip: IViewBox = {\r\n\t\t\ttop:0,\r\n\t\t\tleft: 0,\r\n\t\t\twidth: tooltipNode.offsetWidth,\r\n\t\t\theight: tooltipNode.offsetHeight,\r\n\t\t\tbottom: 0,\r\n\t\t\tright: 0\r\n\t\t};\r\n\r\n\t\tconst offsetX = gantt.config.tooltip_offset_x;\r\n\t\tconst offsetY = gantt.config.tooltip_offset_y;\r\n\r\n\t\tconst container = document.body;\r\n\t\tconst mouse = domHelpers.getRelativeEventPosition(event, container);\r\n\t\tconst containerPos = domHelpers.getNodePosition(container);\r\n\t\tmouse.y += containerPos.y; // to fix margin collapsing\r\n\r\n\t\ttooltip.top = mouse.y;\r\n\t\ttooltip.left = mouse.x;\r\n\t\ttooltip.top += offsetY;\r\n\t\ttooltip.left += offsetX;\r\n\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\ttooltip.right = tooltip.left + tooltip.width;\r\n\r\n\t\tconst scrollTop = window.scrollY + container.scrollTop; // to fix margin collapsing\r\n\t\t// edge cases when the tooltip element can be partially hidden by edges of the viewport\r\n\t\tif(tooltip.top < viewport.top - scrollTop){\r\n\t\t\ttooltip.top = viewport.top;\r\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\t}else if(tooltip.bottom > viewport.bottom){\r\n\t\t\ttooltip.bottom = viewport.bottom;\r\n\t\t\ttooltip.top = tooltip.bottom - tooltip.height;\r\n\t\t}\r\n\r\n\t\tif(tooltip.left < viewport.left){\r\n\t\t\ttooltip.left = viewport.left;\r\n\t\t\ttooltip.right = viewport.left + tooltip.width;\r\n\t\t}else if(tooltip.right > viewport.right){\r\n\t\t\ttooltip.right = viewport.right;\r\n\t\t\ttooltip.left = tooltip.right - tooltip.width;\r\n\t\t}\r\n\r\n\t\tif(mouse.x >= tooltip.left && mouse.x <= tooltip.right) {\r\n\t\t\ttooltip.left = mouse.x - tooltip.width - offsetX;\r\n\t\t\ttooltip.right = tooltip.left + tooltip.width;\r\n\t\t}\r\n\r\n\t\tif(mouse.y >= tooltip.top && mouse.y <= tooltip.bottom) {\r\n\t\t\ttooltip.top = mouse.y - tooltip.height - offsetY;\r\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\r\n\t\t}\r\n\r\n\t\treturn tooltip;\r\n\t}\r\n\r\n\tprivate _getViewPortSize() : IViewBox {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst container = this._getViewPort();\r\n\t\tlet viewport = container;\r\n\t\tlet scrollTop = window.scrollY + document.body.scrollTop;\r\n\t\tlet scrollLeft = window.scrollX + document.body.scrollLeft;\r\n\t\tlet pos;\r\n\t\t// support for the initial tooltip mode where the tooltip element was attached to the data area of gantt\r\n\t\tif(container === gantt.$task_data){\r\n\t\t\tviewport = gantt.$task;\r\n\t\t\tscrollTop = 0;\r\n\t\t\tscrollLeft = 0;\r\n\t\t\tpos = domHelpers.getNodePosition(gantt.$task);\r\n\t\t}else{\r\n\t\t\tpos = domHelpers.getNodePosition(viewport);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tleft:pos.x + scrollLeft,\r\n\t\t\ttop: pos.y + scrollTop,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height,\r\n\t\t\tbottom: pos.y + pos.height + scrollTop,\r\n\t\t\tright: pos.x + pos.width + scrollLeft\r\n\t\t};\r\n\t}\r\n}\r\n","import * as domEventsScope from \"../../core/ui/utils/dom_event_scope\";\r\nimport * as domHelpers from \"../../core/ui/utils/dom_helpers\";\r\nimport * as helpers from \"../../utils/helpers\";\r\nimport { Tooltip } from \"./tooltip\";\r\n\r\ninterface ITrackerTarget {\r\n\tselector: string;\r\n\tonmouseenter: (event: MouseEvent, node: HTMLElement) => void;\r\n\tonmousemove: (event: MouseEvent, node: HTMLElement) => void;\r\n\tonmouseleave: (event: MouseEvent, node: HTMLElement) => void;\r\n\tglobal: boolean;\r\n}\r\n\r\ninterface ITooltipConfig {\r\n\tselector: string;\r\n\thtml: (event: MouseEvent, node: HTMLElement) => string;\r\n\tglobal: boolean;\r\n}\r\n\r\nexport class TooltipManager{\r\n\ttooltip: Tooltip;\r\n\tprotected _domEvents: any;\r\n\tprivate _listeners: object = {};\r\n\tprivate _gantt: any;\r\n\tprivate delayShow: any;\r\n\tprivate delayHide: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis.tooltip = new Tooltip(gantt);\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = domEventsScope();\r\n\t\tthis._initDelayedFunctions();\r\n\t}\r\n\r\n\tdestructor(): void{\r\n\t\tthis.tooltip.hide();\r\n\t\tthis._domEvents.detachAll();\r\n\t}\r\n\thideTooltip(): void{\r\n\t\tthis.delayHide();\r\n\t}\r\n\tattach(config: ITrackerTarget): void {\r\n\t\tlet root = document.body;\r\n\t\tconst gantt = this._gantt;\r\n\t\tif(!config.global){\r\n\t\t\troot = gantt.$root;\r\n\t\t}\r\n\r\n\t\tlet watchableTarget = null;\r\n\t\tconst handler = (event) => {\r\n\t\t\tconst eventTarget = domHelpers.getTargetNode(event);\r\n\t\t\tconst targetNode = domHelpers.closest(eventTarget, config.selector);\r\n\t\t\tif(domHelpers.isChildOf(eventTarget, this.tooltip.getNode())){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst doOnMouseEnter = () => {\r\n\t\t\t\twatchableTarget = targetNode;\r\n\t\t\t\tconfig.onmouseenter(event, targetNode);\r\n\t\t\t};\r\n\r\n\t\t\tif(watchableTarget){\r\n\t\t\t\tif(targetNode && targetNode === watchableTarget){\r\n\t\t\t\t\tconfig.onmousemove(event, targetNode);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconfig.onmouseleave(event, watchableTarget);\r\n\t\t\t\t\twatchableTarget = null;\r\n\r\n\t\t\t\t\tif(targetNode && targetNode !== watchableTarget){\r\n\t\t\t\t\t\tdoOnMouseEnter();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(targetNode){\r\n\t\t\t\t\tdoOnMouseEnter();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.detach(config.selector);\r\n\t\tthis._domEvents.attach(root, \"mousemove\", handler);\r\n\t\tthis._listeners[config.selector] = {\r\n\t\t\tnode: root,\r\n\t\t\thandler\r\n\t\t};\r\n\t}\r\n\r\n\tdetach(selector: string): void {\r\n\t\tconst listener = this._listeners[selector];\r\n\t\tif(listener){\r\n\t\t\tthis._domEvents.detach(listener.node, \"mousemove\", listener.handler);\r\n\t\t}\r\n\t}\r\n\r\n\ttooltipFor(config: ITooltipConfig): void {\r\n\t\tconst cloneDomEvent = (event: MouseEvent) => {\r\n\t\t\tlet clone = event;\r\n\t\t\t// making events survive timeout in ie\r\n\t\t\t// tslint:disable-next-line no-string-literal\r\n\t\t\tif(document[\"createEventObject\"] && !document.createEvent){\r\n\t\t\t\t// tslint:disable-next-line no-string-literal\r\n\t\t\t\tclone = document[\"createEventObject\"](event);\r\n\t\t\t}\r\n\t\t\treturn clone;\r\n\t\t};\r\n\t\tthis._initDelayedFunctions();\r\n\t\tthis.attach({\r\n\t\t\tselector: config.selector,\r\n\t\t\tglobal: config.global,\r\n\t\t\tonmouseenter:(event: MouseEvent, node: HTMLElement) => {\r\n\t\t\t\tconst html = config.html(event, node);\r\n\t\t\t\tif(html){\r\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonmousemove:(event: MouseEvent, node: HTMLElement) => {\r\n\t\t\t\tconst html = config.html(event, node);\r\n\t\t\t\tif(html){\r\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\t\t\tthis.delayHide();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonmouseleave:() => {\r\n\t\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\t\tthis.delayHide();\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _initDelayedFunctions(){\r\n\t\tconst gantt = this._gantt;\r\n\t\t// reset delayed functions in order to apply current values of tooltip_timeout\r\n\t\tif(this.delayShow){\r\n\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t}\r\n\t\tif(this.delayHide){\r\n\t\t\tthis.delayHide.$cancelTimeout();\r\n\t\t}\r\n\t\tthis.tooltip.hide();\r\n\r\n\t\tthis.delayShow = helpers.delay((event: MouseEvent, html: string) => {\r\n\t\t\tif(gantt.callEvent(\"onBeforeTooltip\", [event]) === false) {\r\n\t\t\t\tthis.tooltip.hide();\r\n\t\t\t} else {\r\n\t\t\t\tthis.tooltip.setContent(html);\r\n\t\t\t\tthis.tooltip.show(event);\r\n\t\t\t}\r\n\t\t}, gantt.config.tooltip_timeout || 1);\r\n\r\n\t\tthis.delayHide = helpers.delay(() => {\r\n\t\t\tthis.delayShow.$cancelTimeout();\r\n\t\t\tthis.tooltip.hide();\r\n\t\t}, gantt.config.tooltip_hide_timeout || 1);\r\n\t}\r\n\r\n}","import {TooltipManager} from \"./tooltipManager\";\r\n\r\nexport default function(gantt: any){\r\n\r\ngantt.config.tooltip_timeout = 30;\r\ngantt.config.tooltip_offset_y = 20;\r\ngantt.config.tooltip_offset_x = 10;\r\ngantt.config.tooltip_hide_timeout = 30;\r\n\r\n\r\n\r\nconst tooltipManager = new TooltipManager(gantt);\r\n\r\ngantt.ext.tooltips = tooltipManager;\r\n\r\ngantt.attachEvent(\"onGanttReady\", function(){\r\n\r\n\ttooltipManager.tooltipFor({\r\n\t\tselector: \"[\"+gantt.config.task_attribute+\"]:not(.gantt_task_row)\",\r\n\t\thtml: (event: MouseEvent) => {\r\n\t\t\tif (gantt.config.touch && !gantt.config.touch_tooltip) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst targetTaskId = gantt.locate(event);\r\n\t\t\tif(gantt.isTaskExists(targetTaskId)){\r\n\t\t\t\tconst task = gantt.getTask(targetTaskId);\r\n\t\t\t\treturn gantt.templates.tooltip_text(task.start_date, task.end_date, task);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tglobal: false\r\n\t});\r\n});\r\n\r\ngantt.attachEvent(\"onDestroy\", function() {\r\n\ttooltipManager.destructor();\r\n});\r\n\r\ngantt.attachEvent(\"onLightbox\", function() {\r\n\ttooltipManager.hideTooltip();\r\n});\r\nconst isLinkCreate = () => {\r\n\tconst state = gantt.getState();\r\n\treturn !!state.link_source_id;\r\n};\r\ngantt.attachEvent(\"onBeforeTooltip\", function() {\r\n\tif (isLinkCreate()){\r\n\t\treturn false;\r\n\t}\r\n});\r\n\r\ngantt.attachEvent(\"onGanttScroll\", function(){\r\n\ttooltipManager.hideTooltip();\r\n});\r\n\r\n}","\r\ninterface IQuickInfoContainer{\r\n\tparent: HTMLElement;\r\n\txViewport: HTMLElement;\r\n\tyViewport: HTMLElement;\r\n}\r\n\r\nexport class QuickInfo {\r\n\tprivate _quickInfoTask: TaskID;\r\n\tprivate _quickInfoBoxId: number | string;\r\n\tprivate _quickInfoBox: HTMLElement;\r\n\tprivate _quickInfoReadonly: boolean | null;\r\n\tprivate _container: HTMLElement;\r\n\tprivate _gantt: any;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t}\r\n\r\n\t// show at coordinates:\r\n\t// show(x: number, y: number)\r\n\t// show for a task:\r\n\t// show(id: TaskID)\r\n\tshow : {\r\n\t\t(x: number, y: number) : void;\r\n\t\t(id: TaskID) : void;\r\n\t} = (id: TaskID | number, y? : number) : void => {\r\n\t\tif (y === undefined) {\r\n\t\t\tthis._showForTask(id);\r\n\t\t} else {\r\n\t\t\tthis._showAtCoordinates(id as number, y);\r\n\t\t}\r\n\t}\r\n\r\n\thide = (forced?: boolean) : any => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tthis._quickInfoBoxId = 0;\r\n\t\tconst taskId = this._quickInfoTask;\r\n\t\tthis._quickInfoTask = null;\r\n\r\n\t\tif (qi && qi.parentNode){\r\n\r\n\t\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\t\tgantt.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t\t\t\treturn qi.parentNode.removeChild(qi);\r\n\t\t\t}\r\n\r\n\t\t\tqi.className += \" gantt_qi_hidden\";\r\n\t\t\tif (qi.style.right === \"auto\"){\r\n\t\t\t\tqi.style.left = \"-350px\";\r\n\t\t\t} else {\r\n\t\t\t\tqi.style.right = \"-350px\";\r\n\t\t\t}\r\n\r\n\t\t\tif (forced) {\r\n\t\t\t\tqi.style.left = qi.style.right = \"\";\r\n\t\t\t\tqi.parentNode.removeChild(qi);\r\n\t\t\t}\r\n\t\t\tgantt.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t\t}\r\n\t}\r\n\r\n\tgetNode = (): HTMLElement => {\r\n\t\tif(this._quickInfoBox) {\r\n\t\t\treturn this._quickInfoBox;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tsetContainer = (container: string|HTMLElement): void => {\r\n\t\tif(container){\r\n\t\t\tthis._container = typeof container === \"string\" ? document.getElementById(container) : container;\r\n\t\t}\r\n\t}\r\n\r\n\tsetContent = (content?: IQuickInfoContent) => {\r\n\t\tconst gantt = this._gantt;\r\n\r\n\t\tconst defaultContent = {\r\n\t\t\ttaskId: null,\r\n\t\t\theader: {\r\n\t\t\t\ttitle: \"\",\r\n\t\t\t\tdate: \"\"\r\n\t\t\t},\r\n\t\t\tcontent: \"\",\r\n\t\t\tbuttons: gantt.config.quickinfo_buttons\r\n\t\t};\r\n\r\n\t\tif(!content){\r\n\t\t\tcontent = defaultContent;\r\n\t\t}\r\n\r\n\t\tif(!content.taskId){\r\n\t\t\tcontent.taskId = defaultContent.taskId;\r\n\t\t}\r\n\r\n\t\tif(!content.header){\r\n\t\t\tcontent.header = defaultContent.header;\r\n\t\t}\r\n\r\n\t\tif(!content.header.title){\r\n\t\t\tcontent.header.title = defaultContent.header.title;\r\n\t\t}\r\n\t\tif(!content.header.date){\r\n\t\t\tcontent.header.date = defaultContent.header.date;\r\n\t\t}\r\n\t\tif(!content.content){\r\n\t\t\tcontent.content = defaultContent.content;\r\n\t\t}\r\n\t\tif(!content.buttons){\r\n\t\t\tcontent.buttons = defaultContent.buttons;\r\n\t\t}\r\n\r\n\r\n\t\tlet qi = this.getNode();\r\n\t\tif(!qi){\r\n\t\t\tqi = this._createQuickInfoElement();\r\n\t\t}\r\n\r\n\t\tif(content.taskId){\r\n\t\t\tthis._quickInfoBoxId = content.taskId;\r\n\t\t}\r\n\r\n\t\tconst titleBox = qi.querySelector(\".gantt_cal_qi_title\") as HTMLElement;\r\n\t\tconst titleContent = titleBox.querySelector(\".gantt_cal_qi_tcontent\");\r\n\t\tconst titleDate = titleBox.querySelector(\".gantt_cal_qi_tdate\");\r\n\t\tconst main = qi.querySelector(\".gantt_cal_qi_content\");\r\n\t\tconst controls = qi.querySelector(\".gantt_cal_qi_controls\") as HTMLElement;\r\n\r\n\t\tgantt._waiAria.quickInfoHeader(qi, [content.header.title, content.header.date].join(\" \"));\r\n\r\n\t\ttitleContent.innerHTML = content.header.title;\r\n\t\ttitleDate.innerHTML = content.header.date;\r\n\r\n\t\tif(!content.header.title && !content.header.date){\r\n\t\t\ttitleBox.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\ttitleBox.style.display = \"\";\r\n\t\t}\r\n\t\tmain.innerHTML = content.content;\r\n\r\n\t\tconst buttons = content.buttons;\r\n\t\tif(!buttons.length){\r\n\t\t\tcontrols.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\tcontrols.style.display = \"\";\r\n\t\t}\r\n\t\tlet html = \"\";\r\n\t\tfor (let i = 0; i < buttons.length; i++){\r\n\r\n\t\t\tconst ariaAttr = gantt._waiAria.quickInfoButtonAttrString(gantt.locale.labels[buttons[i]]);\r\n\r\n\t\t\thtml += \"<div class=\\\"gantt_qi_big_icon \"+buttons[i]+\"\\\" title=\\\"\"\r\n\t\t\t\t+gantt.locale.labels[buttons[i]]+\"\\\" \" + ariaAttr +\"><div class='gantt_menu_icon \" + buttons[i]\r\n\t\t\t\t+ \"'></div><div>\"+gantt.locale.labels[buttons[i]]+\"</div></div>\";\r\n\t\t}\r\n\t\tcontrols.innerHTML = html;\r\n\r\n\t\tgantt.eventRemove(qi, \"click\", this._qiButtonClickHandler);\r\n\t\tgantt.eventRemove(qi, \"keypress\", this._qiKeyPressHandler);\r\n\r\n\t\tgantt.event(qi, \"click\", this._qiButtonClickHandler);\r\n\t\tgantt.event(qi, \"keypress\", this._qiKeyPressHandler);\r\n\t}\r\n\r\n\tprivate _qiButtonClickHandler = (ev) => {\r\n\t\tev = ev || event;\r\n\t\tthis._qi_button_click(ev.target || ev.srcElement);\r\n\t}\r\n\r\n\tprivate _qiKeyPressHandler = (e) => {\r\n\t\te = e || event;\r\n\t\t// @ts-ignore\r\n\t\tconst code = e.which||event.keyCode;\r\n\t\tif (code === 13 || code === 32){\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis._qi_button_click(e.target || e.srcElement);\r\n\t\t\t},1);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _showAtCoordinates(x: number, y: number) : void {\r\n\t\tthis.hide(true);\r\n\t\tthis._quickInfoBoxId = 0;\r\n\t\tthis._quickInfoTask = null;\r\n\t\tif(!this._quickInfoBox){\r\n\t\t\tthis._createQuickInfoElement();\r\n\t\t\tthis.setContent();\r\n\t\t}\r\n\r\n\t\tthis._appendAtCoordinates(x, y);\r\n\t\tthis._gantt.callEvent(\"onQuickInfo\", [null]);\r\n\t}\r\n\r\n\tprivate _showForTask(id: TaskID) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif ((\r\n\t\t\tid === this._quickInfoBoxId &&\r\n\t\t\tgantt.utils.dom.isChildOf(this._quickInfoBox, document.body)\r\n\t\t) || !gantt.config.show_quick_info) {\r\n\t\t\t// not show if the quick info is already displayed for this task, or if it shouldn't be displayed\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.hide(true);\r\n\t\tconst offset = 6; // offset TASK <> QI-BOX in 'px'\r\n\t\tconst container = this._getContainer();\r\n\t\tconst pos = this._get_event_counter_part(id, offset, container.xViewport, container.yViewport);\r\n\r\n\t\tif (pos){\r\n\t\t\tthis._quickInfoBox = this._init_quick_info(id);\r\n\t\t\tthis._quickInfoTask = id;\r\n\t\t\tthis._quickInfoBox.className = this._prepare_quick_info_classname(id);\r\n\r\n\t\t\tthis._fill_quick_data(id);\r\n\t\t\tthis._show_quick_info(pos, offset);\r\n\t\t\tgantt.callEvent(\"onQuickInfo\", [id]);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _get_event_counter_part(id: TaskID, offset: number, xViewport: HTMLElement, yViewport: HTMLElement) : any {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet domEv = gantt.getTaskNode(id);\r\n\t\tif (!domEv) {\r\n\t\t\tdomEv = gantt.getTaskRowNode(id);\r\n\t\t\tif (!domEv) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet left = 0;\r\n\t\tconst top = offset + domEv.offsetTop + domEv.offsetHeight;\r\n\r\n\t\tlet node = domEv;\r\n\r\n\t\tif (gantt.utils.dom.isChildOf(node, xViewport)) {\r\n\t\t\twhile (node && node !== xViewport){\r\n\t\t\t\tleft += node.offsetLeft;\r\n\t\t\t\tnode = node.offsetParent;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst scroll = gantt.getScrollState();\r\n\r\n\t\tif(node){\r\n\t\t\tconst dx = (left + domEv.offsetWidth/2) - scroll.x > (xViewport.offsetWidth/2) ? 1 : 0;\r\n\t\t\tconst dy = (top + domEv.offsetHeight/2) - scroll.y > (yViewport.offsetHeight/2) ? 1 : 0;\r\n\r\n\t\t\treturn { left, top, dx, dy, width:domEv.offsetWidth, height:domEv.offsetHeight };\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate _createQuickInfoElement() : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = document.createElement(\"div\");\r\n\t\tqi.className += \"gantt_cal_quick_info\";\r\n\t\tgantt._waiAria.quickInfoAttr(qi);\r\n\r\n\t\t// title\r\n\t\tconst ariaAttr = gantt._waiAria.quickInfoHeaderAttrString();\r\n\t\tlet html = \"<div class=\\\"gantt_cal_qi_title\\\" \"+ariaAttr+\">\" +\r\n\t\t\t\"<div class=\\\"gantt_cal_qi_tcontent\\\"></div><div  class=\\\"gantt_cal_qi_tdate\\\"></div>\" +\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"<div class=\\\"gantt_cal_qi_content\\\"></div>\";\r\n\r\n\t\t// buttons\r\n\t\thtml += \"<div class=\\\"gantt_cal_qi_controls\\\">\";\r\n\t\thtml += \"</div>\";\r\n\r\n\t\tqi.innerHTML = html;\r\n\r\n\r\n\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\tconst container = this._getContainer();\r\n\t\t\tgantt.event(container.parent, \"scroll\", () => { this.hide(); });\r\n\t\t}\r\n\r\n\t\tthis._quickInfoBox = qi;\r\n\t\treturn qi;\r\n\t}\r\n\r\n\tprivate _init_quick_info(id: TaskID) : HTMLElement {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst task = gantt.getTask(id);\r\n\t\tif(typeof this._quickInfoReadonly === \"boolean\"){\r\n\t\t\tif(gantt.isReadonly(task) !== this._quickInfoReadonly){\r\n\t\t\t\tthis.hide(true);\r\n\t\t\t\tthis._quickInfoBox = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._quickInfoReadonly = gantt.isReadonly(task);\r\n\r\n\t\tif (!this._quickInfoBox){\r\n\t\t\tthis._quickInfoBox = this._createQuickInfoElement();\r\n\t\t}\r\n\r\n\t\treturn this._quickInfoBox;\r\n\t}\r\n\r\n\tprivate _prepare_quick_info_classname(id: TaskID) : string {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst task = gantt.getTask(id);\r\n\r\n\t\tlet css = \"gantt_cal_quick_info\";\r\n\t\tconst template = gantt.templates.quick_info_class(task.start_date, task.end_date, task);\r\n\r\n\t\tif(template){\r\n\t\t\tcss += \" \" + template;\r\n\t\t}\r\n\t\treturn css;\r\n\t}\r\n\r\n\tprivate _fill_quick_data(id: TaskID) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst ev = gantt.getTask(id);\r\n\r\n\t\tthis._quickInfoBoxId = id;\r\n\r\n\t\tlet allowedButtons = [];\r\n\t\tif (this._quickInfoReadonly){\r\n\t\t\tconst buttons = gantt.config.quickinfo_buttons;\r\n\t\t\tconst isEditor = {icon_delete: true, icon_edit: true};\r\n\t\t\tfor (let i = 0; i < buttons.length; i++){\r\n\t\t\t\tif(this._quickInfoReadonly && isEditor[buttons[i]]){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tallowedButtons.push(buttons[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tallowedButtons = gantt.config.quickinfo_buttons;\r\n\t\t}\r\n\r\n\t\tthis.setContent({\r\n\t\t\theader: {\r\n\t\t\t\ttitle: gantt.templates.quick_info_title(ev.start_date, ev.end_date, ev),\r\n\t\t\t\tdate: gantt.templates.quick_info_date(ev.start_date, ev.end_date, ev)\r\n\t\t\t},\r\n\t\t\tcontent: gantt.templates.quick_info_content(ev.start_date, ev.end_date, ev),\r\n\t\t\tbuttons: allowedButtons\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _appendAtCoordinates(x: number, y: number): void {\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tconst container = this._getContainer();\r\n\t\tif (!qi.parentNode ||\r\n\t\t\tqi.parentNode.nodeName.toLowerCase() === \"#document-fragment\"){ // IE8\r\n\t\t\tcontainer.parent.appendChild(qi);\r\n\t\t}\r\n\r\n\t\tqi.style.left = x + \"px\";\r\n\t\tqi.style.top = y + \"px\";\r\n\t}\r\n\r\n\tprivate _show_quick_info(pos: any, offset: number) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst qi = this._quickInfoBox;\r\n\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\tconst container = this._getContainer();\r\n\t\t\tif (!qi.parentNode ||\r\n\t\t\t\tqi.parentNode.nodeName.toLowerCase() === \"#document-fragment\"){ // IE8\r\n\t\t\t\tcontainer.parent.appendChild(qi);\r\n\t\t\t}\r\n\t\t\tconst width = qi.offsetWidth;\r\n\t\t\tconst popupHeight = qi.offsetHeight;\r\n\r\n\t\t\tconst scrolls = gantt.getScrollState();\r\n\t\t\tconst xViewport = container.xViewport;\r\n\t\t\tconst yViewport = container.yViewport;\r\n\t\t\tconst screenWidth = xViewport.offsetWidth + scrolls.x - width;\r\n\r\n\t\t\tconst relativePopupTop = pos.top - scrolls.y;\r\n\t\t\tconst relativePopupBottom = relativePopupTop + popupHeight;\r\n\r\n\t\t\tlet top = pos.top;\r\n\t\t\tif(relativePopupBottom > yViewport.offsetHeight / 2){\r\n\t\t\t\ttop = pos.top - (popupHeight + pos.height + 2*offset);\r\n\t\t\t\tif(top < scrolls.y && relativePopupBottom <= yViewport.offsetHeight){\r\n\t\t\t\t\ttop = pos.top;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (top < scrolls.y) {\r\n\t\t\t\ttop = scrolls.y;\r\n\t\t\t}\r\n\r\n\t\t\tconst x = Math.min(Math.max(scrolls.x, pos.left - pos.dx*(width - pos.width)), screenWidth);\r\n\t\t\tconst y = top;\r\n\r\n\t\t\tthis._appendAtCoordinates(x, y);\r\n\t\t} else {\r\n\t\t\tqi.style.top = 20 + \"px\";\r\n\t\t\tif (pos.dx === 1){\r\n\t\t\t\tqi.style.right = \"auto\";\r\n\t\t\t\tqi.style.left = \"-300px\";\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tqi.style.left = \"10px\";\r\n\t\t\t\t},1);\r\n\t\t\t} else {\r\n\t\t\t\tqi.style.left = \"auto\";\r\n\t\t\t\tqi.style.right = \"-300px\";\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tqi.style.right = \"10px\";\r\n\t\t\t\t},1);\r\n\t\t\t}\r\n\t\t\tqi.className += \" gantt_qi_\"+(pos.dx === 1 ? \"left\" : \"right\");\r\n\t\t\tgantt.$root.appendChild(qi);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _qi_button_click(node: any) : void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst box = this._quickInfoBox;\r\n\t\tif (!node || node === box){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst mask = node.className;\r\n\t\tif (mask.indexOf(\"_icon\") !== -1){\r\n\t\t\tconst id = this._quickInfoBoxId;\r\n\t\t\tgantt.$click.buttons[mask.split(\" \")[1].replace(\"icon_\",\"\")](id);\r\n\t\t} else {\r\n\t\t\tthis._qi_button_click(node.parentNode);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _getContainer(): IQuickInfoContainer{\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet container = this._container ? this._container : gantt.$task_data;\r\n\t\tif (container && container.offsetHeight && container.offsetWidth) {\r\n\t\t\treturn {\r\n\t\t\t\tparent: container,\r\n\t\t\t\txViewport: gantt.$task,\r\n\t\t\t\tyViewport: gantt.$task_data\r\n\t\t\t};\r\n\t\t}\r\n\t\tcontainer = this._container ? this._container : gantt.$grid_data;\r\n\t\tif (container && container.offsetHeight && container.offsetWidth) {\r\n\t\t\treturn {\r\n\t\t\t\tparent: container,\r\n\t\t\t\txViewport: gantt.$grid,\r\n\t\t\t\tyViewport: gantt.$grid_data\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tparent: this._container ? this._container : gantt.$layout,\r\n\t\t\txViewport: gantt.$layout,\r\n\t\t\tyViewport: gantt.$layout\r\n\t\t};\r\n\t}\r\n}\r\n","import { QuickInfo } from \"./quickInfo\";\r\n\r\nexport default function(gantt: any){\r\n\r\nif (!gantt.ext) {\r\n\tgantt.ext = {};\r\n}\r\ngantt.ext.quickInfo = new QuickInfo(gantt);\r\n\r\ngantt.config.quickinfo_buttons = [\"icon_delete\",\"icon_edit\"];\r\ngantt.config.quick_info_detached = true;\r\ngantt.config.show_quick_info = true;\r\n\r\ngantt.templates.quick_info_title = function(start, end, ev){ return ev.text.substr(0,50); };\r\ngantt.templates.quick_info_content = function(start, end, ev){ return ev.details || ev.text; };\r\ngantt.templates.quick_info_date = function(start, end, ev){\r\n\treturn gantt.templates.task_time(start, end, ev);\r\n};\r\ngantt.templates.quick_info_class = function(start, end, task){ return \"\"; };\r\n\r\ngantt.attachEvent(\"onTaskClick\", function(id,e){\r\n\t// GS-1460 Don't show Quick Info when clicking on the \"+\" button\r\n\tif (!gantt.utils.dom.closest(e.target, \".gantt_add\")){\r\n\t\tsetTimeout(function() {\r\n\t\t\tgantt.ext.quickInfo.show(id);\r\n\t\t}, 0);\r\n\t}\r\n\r\n\treturn true;\r\n});\r\n\r\nconst events = [\"onViewChange\", \"onLightbox\", \"onBeforeTaskDelete\", \"onBeforeDrag\"];\r\nconst hidingFunction = function(){\r\n\tgantt.ext.quickInfo.hide();\r\n\treturn true;\r\n};\r\nfor (let i=0; i<events.length; i++){\r\n\tgantt.attachEvent(events[i], hidingFunction);\r\n}\r\n// GS-957: We don't want to hide QuickInfo when we click on it.\r\ngantt.attachEvent(\"onEmptyClick\", function(e){\r\n\tlet hideQuickInfo = true;\r\n\tconst parent = document.querySelector(\".gantt_cal_quick_info\");\r\n\tif (parent){\r\n\t\tconst quickInfoClick = gantt.utils.dom.isChildOf(e.target, parent);\r\n\t\tif (quickInfoClick){\r\n\t\t\thideQuickInfo = false;\r\n\t\t}\r\n\t}\r\n\tif (hideQuickInfo){\r\n\t\thidingFunction();\r\n\t}\r\n});\r\nfunction clearQuickInfo() {\r\n\tgantt.ext.quickInfo.hide();\r\n\tgantt.ext.quickInfo._quickInfoBox = null;\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onGanttReady\", clearQuickInfo);\r\ngantt.attachEvent(\"onDestroy\", clearQuickInfo);\r\n\r\ngantt.event(window, \"keydown\", function(e){\r\n\tif (e.keyCode === 27){\r\n\t\tgantt.ext.quickInfo.hide();\r\n\t}\r\n});\r\n\r\n}","var _require = require(\"../utils/helpers\"),\n    replaceValidZeroId = _require.replaceValidZeroId;\n\nmodule.exports = function (gantt) {\n  gantt.config.multiselect = true;\n  gantt.config.multiselect_one_level = false;\n  gantt._multiselect = {\n    _selected: {},\n    _one_level: false,\n    _active: true,\n    _first_selected_when_shift: null,\n    getDefaultSelected: function getDefaultSelected() {\n      var selected = this.getSelected();\n      return selected.length ? selected[selected.length - 1] : null;\n    },\n    setFirstSelected: function setFirstSelected(id) {\n      this._first_selected_when_shift = id;\n    },\n    getFirstSelected: function getFirstSelected() {\n      return this._first_selected_when_shift;\n    },\n    isActive: function isActive() {\n      this.updateState();\n      return this._active;\n    },\n    updateState: function updateState() {\n      this._one_level = gantt.config.multiselect_one_level;\n      var active = this._active;\n      this._active = gantt.config.select_task;\n\n      if (this._active != active) {\n        this.reset();\n      }\n    },\n    reset: function reset() {\n      this._selected = {};\n    },\n    setLastSelected: function setLastSelected(id) {\n      gantt.$data.tasksStore.silent(function () {\n        var store = gantt.$data.tasksStore;\n        if (id) store.select(id + \"\");else store.unselect(null);\n      });\n    },\n    getLastSelected: function getLastSelected() {\n      var last = gantt.$data.tasksStore.getSelectedId();\n      if (last && gantt.isTaskExists(last)) return last;\n      return null;\n    },\n    select: function select(id, e) {\n      if (id && gantt.callEvent(\"onBeforeTaskMultiSelect\", [id, true, e]) && gantt.callEvent(\"onBeforeTaskSelected\", [id])) {\n        this._selected[id] = true;\n        this.setLastSelected(id);\n        this.afterSelect(id);\n        gantt.callEvent(\"onTaskMultiSelect\", [id, true, e]);\n        gantt.callEvent(\"onTaskSelected\", [id]);\n        return true;\n      }\n\n      return false;\n    },\n    toggle: function toggle(id, e) {\n      if (this._selected[id]) {\n        this.unselect(id, e);\n      } else {\n        this.select(id, e);\n      }\n    },\n    unselect: function unselect(id, e) {\n      if (id && gantt.callEvent(\"onBeforeTaskMultiSelect\", [id, false, e])) {\n        this._selected[id] = false;\n        if (this.getLastSelected() == id) this.setLastSelected(this.getDefaultSelected());\n        this.afterSelect(id);\n        gantt.callEvent(\"onTaskMultiSelect\", [id, false, e]);\n        gantt.callEvent(\"onTaskUnselected\", [id]);\n      }\n    },\n    isSelected: function isSelected(id) {\n      return !!(gantt.isTaskExists(id) && this._selected[id]);\n    },\n    getSelected: function getSelected() {\n      var res = [];\n\n      for (var i in this._selected) {\n        if (this._selected[i] && gantt.isTaskExists(i)) {\n          res.push(i);\n        } else {\n          this._selected[i] = false;\n        }\n      }\n\n      res.sort(function (a, b) {\n        return gantt.getGlobalTaskIndex(a) > gantt.getGlobalTaskIndex(b) ? 1 : -1;\n      });\n      return res;\n    },\n    forSelected: function forSelected(callback) {\n      var selected = this.getSelected();\n\n      for (var i = 0; i < selected.length; i++) {\n        callback(selected[i]);\n      }\n    },\n    isSameLevel: function isSameLevel(id) {\n      if (!this._one_level) return true;\n      var last = this.getLastSelected();\n      if (!last) return true;\n      if (!(gantt.isTaskExists(last) && gantt.isTaskExists(id))) return true;\n      return !!(gantt.calculateTaskLevel(gantt.getTask(last)) == gantt.calculateTaskLevel(gantt.getTask(id)));\n    },\n    afterSelect: function afterSelect(id) {\n      if (gantt.isTaskExists(id)) {\n        // FIXME: quick workaround to prevent re-filtering inside refresh on multiselect\n        gantt._quickRefresh(function () {\n          gantt.refreshTask(id);\n        });\n      }\n    },\n    doSelection: function doSelection(e) {\n      if (!this.isActive()) return false; // deny selection when click on 'expand' or 'collapse' icons\n\n      if (gantt._is_icon_open_click(e)) return false;\n      var target_ev = gantt.locate(e);\n      if (!target_ev) return false;\n      if (!gantt.callEvent(\"onBeforeMultiSelect\", [e])) return false;\n      var selected = this.getSelected();\n      var defaultLast = this.getFirstSelected();\n      var isLast = false;\n      var last = this.getLastSelected();\n      var multiSelect = gantt.config.multiselect;\n\n      var singleSelection = function () {\n        // GS-719: If the multiselect extension is added we still need a way\n        // to open the inline editors after clicking on the cells in the grid\n        var controller = gantt.ext.inlineEditors;\n        var state = controller.getState();\n        var cell = controller.locateCell(e.target);\n\n        if (gantt.config.inline_editors_multiselect_open && cell && controller.getEditorConfig(cell.columnName)) {\n          if (controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName) {// do nothing if editor is already active in this cell\n          } else {\n            controller.startEdit(cell.id, cell.columnName);\n          }\n        }\n\n        this.setFirstSelected(target_ev);\n\n        if (!this.isSelected(target_ev)) {\n          this.select(target_ev, e);\n        }\n\n        selected = this.getSelected();\n\n        for (var i = 0; i < selected.length; i++) {\n          if (selected[i] !== target_ev) {\n            this.unselect(selected[i], e);\n          }\n        }\n      }.bind(this);\n\n      var blockSelection = function () {\n        if (!last) last = target_ev;else if (target_ev) {\n          var first_indx = gantt.getGlobalTaskIndex(this.getFirstSelected());\n          var target_indx = gantt.getGlobalTaskIndex(target_ev);\n          var last_indx = gantt.getGlobalTaskIndex(last); // clear prev selection\n\n          var tmp = last;\n\n          while (gantt.getGlobalTaskIndex(tmp) !== first_indx) {\n            this.unselect(tmp, e);\n            tmp = first_indx > last_indx ? gantt.getNext(tmp) : gantt.getPrev(tmp);\n          }\n\n          tmp = target_ev;\n\n          while (gantt.getGlobalTaskIndex(tmp) !== first_indx) {\n            if (this.select(tmp, e) && !isLast) {\n              isLast = true;\n              defaultLast = tmp;\n            }\n\n            tmp = first_indx > target_indx ? gantt.getNext(tmp) : gantt.getPrev(tmp);\n          }\n        }\n      }.bind(this);\n\n      if (multiSelect && (e.ctrlKey || e.metaKey)) {\n        if (!this.isSelected(target_ev)) this.setFirstSelected(target_ev);\n\n        if (target_ev) {\n          this.toggle(target_ev, e);\n        }\n      } else if (multiSelect && e.shiftKey) {\n        if (!gantt.isTaskExists(this.getFirstSelected()) || this.getFirstSelected() === null) {\n          this.setFirstSelected(target_ev);\n        }\n\n        if (selected.length) {\n          // select a group of tasks\n          blockSelection();\n        } else {\n          // select a task when no task is selected and Shift is pressed\n          singleSelection();\n        }\n      } else {\n        // no key press or no multiple selection on the mouse click\n        singleSelection();\n      }\n\n      if (this.isSelected(target_ev)) {\n        this.setLastSelected(target_ev);\n      } else if (defaultLast) {\n        if (target_ev == last) this.setLastSelected(e.shiftKey ? defaultLast : this.getDefaultSelected());\n      } else {\n        this.setLastSelected(null);\n      }\n\n      if (!this.getSelected().length) this.setLastSelected(null);\n      if (!this.getLastSelected() || !this.isSelected(this.getFirstSelected())) this.setFirstSelected(this.getLastSelected());\n      return true;\n    }\n  };\n\n  (function () {\n    var old_selectTask = gantt.selectTask;\n\n    gantt.selectTask = function (id) {\n      id = replaceValidZeroId(id, this.config.root_id);\n      if (!id) return false;\n      var multiselect = gantt._multiselect;\n      var res = id;\n\n      if (multiselect.isActive()) {\n        if (multiselect.select(id, null)) {\n          multiselect.setLastSelected(id);\n        }\n\n        multiselect.setFirstSelected(multiselect.getLastSelected());\n      } else {\n        res = old_selectTask.call(this, id);\n      }\n\n      return res;\n    };\n\n    var old_unselectTask = gantt.unselectTask;\n\n    gantt.unselectTask = function (id) {\n      var multiselect = gantt._multiselect;\n      var isActive = multiselect.isActive();\n      id = id || multiselect.getLastSelected();\n\n      if (id && isActive) {\n        multiselect.unselect(id, null);\n        if (id == multiselect.getLastSelected()) multiselect.setLastSelected(null);\n        gantt.refreshTask(id);\n        multiselect.setFirstSelected(multiselect.getLastSelected());\n      }\n\n      var res = id;\n      if (!isActive) res = old_unselectTask.call(this, id);\n      return res;\n    };\n\n    gantt.toggleTaskSelection = function (id) {\n      var multiselect = gantt._multiselect;\n\n      if (id && multiselect.isActive()) {\n        multiselect.toggle(id);\n        multiselect.setFirstSelected(multiselect.getLastSelected());\n      }\n    };\n\n    gantt.getSelectedTasks = function () {\n      var multiselect = gantt._multiselect;\n      multiselect.isActive();\n      return multiselect.getSelected();\n    };\n\n    gantt.eachSelectedTask = function (callback) {\n      return this._multiselect.forSelected(callback);\n    };\n\n    gantt.isSelectedTask = function (id) {\n      return this._multiselect.isSelected(id);\n    };\n\n    gantt.getLastSelectedTask = function () {\n      return this._multiselect.getLastSelected();\n    };\n\n    gantt.attachEvent(\"onGanttReady\", function () {\n      var old_isSelected = gantt.$data.tasksStore.isSelected;\n\n      gantt.$data.tasksStore.isSelected = function (id) {\n        if (gantt._multiselect.isActive()) {\n          return gantt._multiselect.isSelected(id);\n        }\n\n        return old_isSelected.call(this, id);\n      };\n    });\n  })();\n\n  gantt.attachEvent(\"onTaskIdChange\", function (id, new_id) {\n    var multiselect = gantt._multiselect;\n    if (!multiselect.isActive()) return true;\n\n    if (gantt.isSelectedTask(id)) {\n      multiselect.unselect(id, null);\n      multiselect.select(new_id, null);\n    }\n  });\n  gantt.attachEvent(\"onAfterTaskDelete\", function (id, item) {\n    var multiselect = gantt._multiselect;\n    if (!multiselect.isActive()) return true;\n\n    if (multiselect._selected[id]) {\n      multiselect.unselect(id, null);\n      multiselect._selected[id] = false;\n      multiselect.setLastSelected(multiselect.getDefaultSelected());\n    }\n\n    multiselect.forSelected(function (task_id) {\n      if (!gantt.isTaskExists(task_id)) multiselect.unselect(task_id, null);\n    });\n  });\n  gantt.attachEvent(\"onBeforeTaskMultiSelect\", function (id, state, e) {\n    var multiselect = gantt._multiselect;\n\n    if (state && multiselect.isActive()) {\n      if (multiselect._one_level) {\n        return multiselect.isSameLevel(id);\n      }\n    }\n\n    return true;\n  });\n  gantt.attachEvent(\"onTaskClick\", function (id, e) {\n    if (gantt._multiselect.doSelection(e)) gantt.callEvent(\"onMultiSelect\", [e]);\n    return true;\n  });\n};","module.exports = function (gantt) {\n  if (!gantt._markers) {\n    gantt._markers = gantt.createDatastore({\n      name: \"marker\",\n      initItem: function initItem(marker) {\n        marker.id = marker.id || gantt.uid();\n        return marker;\n      }\n    });\n  }\n\n  gantt.config.show_markers = true;\n\n  function render_marker(marker) {\n    if (!gantt.config.show_markers) return false;\n    if (!marker.start_date) return false;\n    var state = gantt.getState();\n    if (+marker.start_date > +state.max_date) return;\n    if ((!marker.end_date || +marker.end_date < +state.min_date) && +marker.start_date < +state.min_date) return;\n    var div = document.createElement(\"div\");\n    div.setAttribute(\"data-marker-id\", marker.id);\n    var css = \"gantt_marker\";\n    if (gantt.templates.marker_class) css += \" \" + gantt.templates.marker_class(marker);\n\n    if (marker.css) {\n      css += \" \" + marker.css;\n    }\n\n    if (marker.title) {\n      div.title = marker.title;\n    }\n\n    div.className = css;\n    var start = gantt.posFromDate(marker.start_date);\n    div.style.left = start + \"px\";\n    var markerHeight = Math.max(gantt.getRowTop(gantt.getVisibleTaskCount()), 0) + \"px\";\n\n    if (gantt.config.timeline_placeholder) {\n      markerHeight = gantt.$container.scrollHeight + \"px\";\n    }\n\n    div.style.height = markerHeight;\n\n    if (marker.end_date) {\n      var end = gantt.posFromDate(marker.end_date);\n      div.style.width = Math.max(end - start, 0) + \"px\";\n    }\n\n    if (marker.text) {\n      div.innerHTML = \"<div class='gantt_marker_content' >\" + marker.text + \"</div>\";\n    }\n\n    return div;\n  }\n\n  function initMarkerArea() {\n    if (!gantt.$task_data) return;\n    var markerArea = document.createElement(\"div\");\n    markerArea.className = \"gantt_marker_area\";\n    gantt.$task_data.appendChild(markerArea);\n    gantt.$marker_area = markerArea;\n  }\n\n  gantt.attachEvent(\"onBeforeGanttRender\", function () {\n    if (!gantt.$marker_area) initMarkerArea();\n  });\n  gantt.attachEvent(\"onDataRender\", function () {\n    if (!gantt.$marker_area) {\n      initMarkerArea();\n      gantt.renderMarkers();\n    }\n  });\n  gantt.attachEvent(\"onGanttLayoutReady\", function () {\n    // GS-1304 - markers should attach when layout is initialized, both on gantt.init and gantt.resetLayout\n    // wait for \"onBeforeGanttRender\", so all layout elements will be in DOM\n    gantt.attachEvent(\"onBeforeGanttRender\", function () {\n      initMarkerArea();\n      var layers = gantt.$services.getService(\"layers\");\n      var markerRenderer = layers.createDataRender({\n        name: \"marker\",\n        defaultContainer: function defaultContainer() {\n          return gantt.$marker_area;\n        }\n      });\n      markerRenderer.addLayer(render_marker);\n    }, {\n      once: true\n    });\n  });\n\n  gantt.getMarker = function (id) {\n    if (!this._markers) return null;\n    return this._markers.getItem(id);\n  };\n\n  gantt.addMarker = function (marker) {\n    return this._markers.addItem(marker);\n  };\n\n  gantt.deleteMarker = function (id) {\n    if (!this._markers.exists(id)) return false;\n\n    this._markers.removeItem(id);\n\n    return true;\n  };\n\n  gantt.updateMarker = function (id) {\n    this._markers.refresh(id);\n  };\n\n  gantt._getMarkers = function () {\n    return this._markers.getItems();\n  };\n\n  gantt.renderMarkers = function () {\n    this._markers.refresh();\n  };\n};","module.exports = function (gantt) {\n  gantt.$keyboardNavigation.dispatcher = {\n    isActive: false,\n    activeNode: null,\n    globalNode: new gantt.$keyboardNavigation.GanttNode(),\n    enable: function enable() {\n      this.isActive = true;\n      this.setActiveNode(this.getActiveNode());\n    },\n    disable: function disable() {\n      this.isActive = false;\n    },\n    isEnabled: function isEnabled() {\n      return !!this.isActive;\n    },\n    getDefaultNode: function getDefaultNode() {\n      var node;\n\n      if (gantt.config.keyboard_navigation_cells) {\n        node = new gantt.$keyboardNavigation.TaskCell();\n      } else {\n        node = new gantt.$keyboardNavigation.TaskRow();\n      }\n\n      if (!node.isValid()) {\n        node = node.fallback();\n      }\n\n      return node;\n    },\n    setDefaultNode: function setDefaultNode() {\n      this.setActiveNode(this.getDefaultNode());\n    },\n    getActiveNode: function getActiveNode() {\n      var node = this.activeNode;\n\n      if (node && !node.isValid()) {\n        node = node.fallback();\n      }\n\n      return node;\n    },\n    fromDomElement: function fromDomElement(e) {\n      var inputs = [gantt.$keyboardNavigation.TaskRow, gantt.$keyboardNavigation.TaskCell, gantt.$keyboardNavigation.HeaderCell];\n\n      for (var i = 0; i < inputs.length; i++) {\n        if (inputs[i].prototype.fromDomElement) {\n          var node = inputs[i].prototype.fromDomElement(e);\n          if (node) return node;\n        }\n      }\n\n      return null;\n    },\n    focusGlobalNode: function focusGlobalNode() {\n      this.blurNode(this.globalNode);\n      this.focusNode(this.globalNode);\n    },\n    setActiveNode: function setActiveNode(el) {\n      //console.trace()\n      var focusChanged = true;\n\n      if (this.activeNode) {\n        if (this.activeNode.compareTo(el)) {\n          focusChanged = false;\n        }\n      }\n\n      if (this.isEnabled()) {\n        if (focusChanged) this.blurNode(this.activeNode);\n        this.activeNode = el;\n        this.focusNode(this.activeNode, !focusChanged);\n      }\n    },\n    focusNode: function focusNode(el, keptFocus) {\n      if (el && el.focus) {\n        el.focus(keptFocus);\n      }\n    },\n    blurNode: function blurNode(el) {\n      if (el && el.blur) {\n        el.blur();\n      }\n    },\n    keyDownHandler: function keyDownHandler(e) {\n      if (gantt.$keyboardNavigation.isModal()) return;\n      if (!this.isEnabled()) return;\n\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      var ganttNode = this.globalNode;\n      var command = gantt.$keyboardNavigation.shortcuts.getCommandFromEvent(e);\n      var activeElement = this.getActiveNode();\n      var eventFacade = gantt.$keyboardNavigation.facade;\n\n      if (eventFacade.callEvent(\"onKeyDown\", [command, e]) === false) {\n        return;\n      }\n\n      if (!activeElement) {\n        this.setDefaultNode();\n      } else if (activeElement.findHandler(command)) {\n        activeElement.doAction(command, e);\n      } else if (ganttNode.findHandler(command)) {\n        ganttNode.doAction(command, e);\n      }\n    },\n    _timeout: null,\n    awaitsFocus: function awaitsFocus() {\n      return this._timeout !== null;\n    },\n    delay: function delay(callback, _delay) {\n      clearTimeout(this._timeout);\n      this._timeout = setTimeout(gantt.bind(function () {\n        this._timeout = null;\n        callback();\n      }, this), _delay || 1);\n    },\n    clearDelay: function clearDelay() {\n      clearTimeout(this._timeout);\n    }\n  };\n};","module.exports = function (gantt) {\n  (function () {\n    var modalsStack = [];\n\n    function isModal() {\n      return !!modalsStack.length;\n    }\n\n    function afterPopup(box) {\n      setTimeout(function () {\n        if (!isModal()) {\n          if (!gantt.$destroyed) {\n            gantt.focus();\n          }\n        }\n      }, 1);\n    }\n\n    function startModal(box) {\n      gantt.eventRemove(box, \"keydown\", trapFocus);\n      gantt.event(box, \"keydown\", trapFocus);\n      modalsStack.push(box); //gantt.$keyboardNavigation.dispatcher.disable();\n    }\n\n    function endModal() {\n      var box = modalsStack.pop();\n\n      if (box) {\n        gantt.eventRemove(box, \"keydown\", trapFocus);\n      }\n\n      afterPopup(box);\n    }\n\n    function isTopModal(box) {\n      return box == modalsStack[modalsStack.length - 1];\n    }\n\n    function trapFocus(event) {\n      var target = event.currentTarget;\n      if (!isTopModal(target)) return;\n      gantt.$keyboardNavigation.trapFocus(target, event);\n    }\n\n    function traceLightbox() {\n      startModal(gantt.getLightbox());\n    }\n\n    gantt.attachEvent(\"onLightbox\", traceLightbox);\n    gantt.attachEvent(\"onAfterLightbox\", endModal);\n    gantt.attachEvent(\"onLightboxChange\", function () {\n      endModal();\n      traceLightbox();\n    });\n    gantt.attachEvent(\"onAfterQuickInfo\", function () {\n      afterPopup();\n    });\n    gantt.attachEvent(\"onMessagePopup\", function (box) {\n      saveFocus();\n      startModal(box);\n    });\n    gantt.attachEvent(\"onAfterMessagePopup\", function () {\n      endModal();\n      restoreFocus();\n    });\n    var focusElement = null;\n\n    function saveFocus() {\n      focusElement = gantt.utils.dom.getActiveElement();\n    }\n\n    function restoreFocus() {\n      setTimeout(function () {\n        if (focusElement) {\n          focusElement.focus();\n          focusElement = null;\n        }\n      }, 1);\n    }\n\n    gantt.$keyboardNavigation.isModal = isModal;\n  })();\n};","module.exports = function (gantt) {\n  var domHelpers = require(\"../../../core/ui/utils/dom_helpers\");\n\n  var _require = require(\"../../../utils/helpers\"),\n      replaceValidZeroId = _require.replaceValidZeroId;\n\n  gantt.$keyboardNavigation.TaskCell = function (taskId, index) {\n    taskId = replaceValidZeroId(taskId, gantt.config.root_id);\n\n    if (!taskId) {\n      var rootLevel = gantt.getChildren(gantt.config.root_id);\n\n      if (rootLevel[0]) {\n        taskId = rootLevel[0];\n      }\n    }\n\n    this.taskId = taskId;\n    this.columnIndex = index || 0; // provided task may not exist, in this case node will be detectes as invalid\n\n    if (gantt.isTaskExists(this.taskId)) {\n      this.index = gantt.getTaskIndex(this.taskId);\n      this.globalIndex = gantt.getGlobalTaskIndex(this.taskId);\n    }\n  };\n\n  gantt.$keyboardNavigation.TaskCell.prototype = gantt._compose(gantt.$keyboardNavigation.TaskRow, {\n    _handlers: null,\n    isValid: function isValid() {\n      return gantt.$keyboardNavigation.TaskRow.prototype.isValid.call(this) && !!gantt.getGridColumns()[this.columnIndex];\n    },\n    fallback: function fallback() {\n      var node = gantt.$keyboardNavigation.TaskRow.prototype.fallback.call(this);\n      var result = node;\n\n      if (node instanceof gantt.$keyboardNavigation.TaskRow) {\n        var visibleColumns = gantt.getGridColumns();\n        var index = this.columnIndex;\n\n        while (index >= 0) {\n          if (visibleColumns[index]) break;\n          index--;\n        }\n\n        if (visibleColumns[index]) {\n          result = new gantt.$keyboardNavigation.TaskCell(node.taskId, index);\n        }\n      }\n\n      return result;\n    },\n    fromDomElement: function fromDomElement(el) {\n      if (!gantt.config.keyboard_navigation_cells) {\n        return null;\n      }\n\n      var taskId = gantt.locate(el);\n\n      if (gantt.isTaskExists(taskId)) {\n        var index = 0;\n        var cellElement = domHelpers.locateAttribute(el, \"data-column-index\");\n\n        if (cellElement) {\n          index = cellElement.getAttribute(\"data-column-index\") * 1;\n        }\n\n        return new gantt.$keyboardNavigation.TaskCell(taskId, index);\n      } else {\n        return null;\n      }\n    },\n    getNode: function getNode() {\n      if (gantt.isTaskExists(this.taskId) && gantt.isTaskVisible(this.taskId)) {\n        if (gantt.config.show_grid) {\n          var row = gantt.$grid.querySelector(\".gantt_row[\" + gantt.config.task_attribute + \"='\" + this.taskId + \"']\");\n          if (!row) return null;\n          return row.querySelector(\"[data-column-index='\" + this.columnIndex + \"']\");\n        } else {\n          return gantt.getTaskNode(this.taskId);\n        }\n      }\n    },\n    keys: {\n      \"up\": function up() {\n        var nextElement = null;\n        var prevTask = gantt.getPrev(this.taskId);\n\n        if (!gantt.isTaskExists(prevTask)) {\n          nextElement = new gantt.$keyboardNavigation.HeaderCell(this.columnIndex);\n        } else {\n          nextElement = new gantt.$keyboardNavigation.TaskCell(prevTask, this.columnIndex);\n        }\n\n        this.moveTo(nextElement);\n      },\n      \"down\": function down() {\n        var nextTask = gantt.getNext(this.taskId);\n\n        if (gantt.isTaskExists(nextTask)) {\n          this.moveTo(new gantt.$keyboardNavigation.TaskCell(nextTask, this.columnIndex));\n        }\n      },\n      \"left\": function left() {\n        if (this.columnIndex > 0) {\n          this.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, this.columnIndex - 1));\n        }\n      },\n      \"right\": function right() {\n        var columns = gantt.getGridColumns();\n\n        if (this.columnIndex < columns.length - 1) {\n          this.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, this.columnIndex + 1));\n        }\n      },\n      \"end\": function end() {\n        var columns = gantt.getGridColumns();\n        this.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, columns.length - 1));\n      },\n      \"home\": function home() {\n        this.moveTo(new gantt.$keyboardNavigation.TaskCell(this.taskId, 0));\n      },\n      \"pagedown\": function pagedown() {\n        if (gantt.getVisibleTaskCount()) {\n          this.moveTo(new gantt.$keyboardNavigation.TaskCell(gantt.getTaskByIndex(gantt.getVisibleTaskCount() - 1).id, this.columnIndex));\n        }\n      },\n      \"pageup\": function pageup() {\n        if (gantt.getVisibleTaskCount()) {\n          this.moveTo(new gantt.$keyboardNavigation.TaskCell(gantt.getTaskByIndex(0).id, this.columnIndex));\n        }\n      }\n    }\n  });\n  gantt.$keyboardNavigation.TaskCell.prototype.bindAll(gantt.$keyboardNavigation.TaskRow.prototype.keys);\n  gantt.$keyboardNavigation.TaskCell.prototype.bindAll(gantt.$keyboardNavigation.TaskCell.prototype.keys);\n};","module.exports = function (gantt) {\n  gantt.$keyboardNavigation.TaskRow = function (taskId) {\n    if (!taskId) {\n      var rootLevel = gantt.getChildren(gantt.config.root_id);\n\n      if (rootLevel[0]) {\n        taskId = rootLevel[0];\n      }\n    }\n\n    this.taskId = taskId;\n\n    if (gantt.isTaskExists(this.taskId)) {\n      this.index = gantt.getTaskIndex(this.taskId);\n      this.globalIndex = gantt.getGlobalTaskIndex(this.taskId);\n    }\n  };\n\n  gantt.$keyboardNavigation.TaskRow.prototype = gantt._compose(gantt.$keyboardNavigation.KeyNavNode, {\n    _handlers: null,\n    isValid: function isValid() {\n      return gantt.isTaskExists(this.taskId) && gantt.getTaskIndex(this.taskId) > -1;\n    },\n    fallback: function fallback() {\n      if (!gantt.getVisibleTaskCount()) {\n        var header = new gantt.$keyboardNavigation.HeaderCell();\n        if (!header.isValid()) return null;else return header;\n      } else {\n        var nextIndex = -1; // GS-1393. When Gantt tries to restore the focus, it should rely on the global index\n\n        if (gantt.getTaskByIndex(this.globalIndex - 1)) {\n          nextIndex = this.globalIndex - 1;\n        } else if (gantt.getTaskByIndex(this.globalIndex + 1)) {\n          nextIndex = this.globalIndex + 1;\n        } else {\n          var globalIndex = this.globalIndex;\n\n          while (globalIndex >= 0) {\n            if (gantt.getTaskByIndex(globalIndex)) {\n              nextIndex = globalIndex;\n              break;\n            }\n\n            globalIndex--;\n          }\n        }\n\n        if (nextIndex > -1) {\n          return new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(nextIndex).id);\n        }\n      }\n    },\n    fromDomElement: function fromDomElement(el) {\n      if (gantt.config.keyboard_navigation_cells) {\n        return null;\n      }\n\n      var taskId = gantt.locate(el);\n\n      if (gantt.isTaskExists(taskId)) {\n        return new gantt.$keyboardNavigation.TaskRow(taskId);\n      } else {\n        return null;\n      }\n    },\n    getNode: function getNode() {\n      if (gantt.isTaskExists(this.taskId) && gantt.isTaskVisible(this.taskId)) {\n        if (gantt.config.show_grid) {\n          return gantt.$grid.querySelector(\".gantt_row[\" + gantt.config.task_attribute + \"='\" + this.taskId + \"']\");\n        } else {\n          return gantt.getTaskNode(this.taskId);\n        }\n      }\n    },\n    focus: function focus(keptFocus) {\n      if (!keptFocus) {\n        var pos = gantt.getTaskPosition(gantt.getTask(this.taskId));\n        var height = gantt.getTaskHeight(this.taskId);\n        var scroll = gantt.getScrollState();\n        var viewWidth;\n\n        if (gantt.$task) {\n          viewWidth = gantt.$task.offsetWidth;\n        } else {\n          viewWidth = scroll.inner_width;\n        }\n\n        var viewHeight;\n\n        if (gantt.$grid_data || gantt.$task_data) {\n          viewHeight = (gantt.$grid_data || gantt.$task_data).offsetHeight;\n        } else {\n          viewHeight = scroll.inner_height;\n        }\n\n        if (pos.top < scroll.y || pos.top + height > scroll.y + viewHeight) {\n          gantt.scrollTo(null, pos.top - height * 5);\n        } else if (gantt.config.scroll_on_click && gantt.config.show_chart) {\n          // horizontal scroll activated\n          if (pos.left > scroll.x + viewWidth) {\n            // scroll forward to the start of the task\n            gantt.scrollTo(pos.left - gantt.config.task_scroll_offset);\n          } else if (pos.left + pos.width < scroll.x) {\n            // scroll back to the end of the task\n            gantt.scrollTo(pos.left + pos.width - gantt.config.task_scroll_offset);\n          }\n        }\n      }\n\n      gantt.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this, [keptFocus]); // GS-152 if there are scrollbars with custom names, change their scroll position\n\n      scrollGrid();\n\n      function scrollGrid() {\n        var grid = gantt.$ui.getView(\"grid\");\n        var scrollPositionX = parseInt(grid.$grid.scrollLeft);\n        var scrollPositionY = parseInt(grid.$grid_data.scrollTop);\n        var attachedScrollbarHorizontal = grid.$config.scrollX;\n\n        if (attachedScrollbarHorizontal && grid.$config.scrollable) {\n          var scrollbarHorizontal = gantt.$ui.getView(attachedScrollbarHorizontal);\n\n          if (scrollbarHorizontal) {\n            scrollbarHorizontal.scrollTo(scrollPositionX, scrollPositionY);\n          }\n        }\n\n        var attachedScrollbarVertical = grid.$config.scrollY;\n\n        if (attachedScrollbarVertical) {\n          var scrollbarVertical = gantt.$ui.getView(attachedScrollbarVertical);\n\n          if (scrollbarVertical) {\n            scrollbarVertical.scrollTo(scrollPositionX, scrollPositionY);\n          }\n        }\n      }\n    },\n    keys: {\n      \"pagedown\": function pagedown() {\n        if (gantt.getVisibleTaskCount()) {\n          this.moveTo(new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(gantt.getVisibleTaskCount() - 1).id));\n        }\n      },\n      \"pageup\": function pageup() {\n        if (gantt.getVisibleTaskCount()) {\n          this.moveTo(new gantt.$keyboardNavigation.TaskRow(gantt.getTaskByIndex(0).id));\n        }\n      },\n      \"up\": function up() {\n        var nextElement = null;\n        var prevTask = gantt.getPrev(this.taskId);\n\n        if (!gantt.isTaskExists(prevTask)) {\n          nextElement = new gantt.$keyboardNavigation.HeaderCell();\n        } else {\n          nextElement = new gantt.$keyboardNavigation.TaskRow(prevTask);\n        }\n\n        this.moveTo(nextElement);\n      },\n      \"down\": function down() {\n        var nextTask = gantt.getNext(this.taskId);\n\n        if (gantt.isTaskExists(nextTask)) {\n          this.moveTo(new gantt.$keyboardNavigation.TaskRow(nextTask));\n        }\n      },\n      \"shift+down\": function shiftDown() {\n        if (gantt.hasChild(this.taskId) && !gantt.getTask(this.taskId).$open) {\n          gantt.open(this.taskId);\n        }\n      },\n      \"shift+up\": function shiftUp() {\n        if (gantt.hasChild(this.taskId) && gantt.getTask(this.taskId).$open) {\n          gantt.close(this.taskId);\n        }\n      },\n      \"shift+right\": function shiftRight() {\n        if (gantt.isReadonly(this)) {\n          return;\n        }\n\n        var prevId = gantt.getPrevSibling(this.taskId);\n\n        if (gantt.isTaskExists(prevId) && !gantt.isChildOf(this.taskId, prevId)) {\n          var parent = gantt.getTask(prevId);\n          parent.$open = true;\n          var result = gantt.moveTask(this.taskId, -1, prevId);\n          if (result !== false) gantt.updateTask(this.taskId);\n        }\n      },\n      \"shift+left\": function shiftLeft() {\n        if (gantt.isReadonly(this)) {\n          return;\n        }\n\n        var parent = gantt.getParent(this.taskId);\n\n        if (gantt.isTaskExists(parent)) {\n          var result = gantt.moveTask(this.taskId, gantt.getTaskIndex(parent) + 1, gantt.getParent(parent));\n          if (result !== false) gantt.updateTask(this.taskId);\n        }\n      },\n      // select\n      \"space\": function space(e) {\n        if (!gantt.isSelectedTask(this.taskId)) {\n          gantt.selectTask(this.taskId);\n        } else {\n          gantt.unselectTask(this.taskId);\n        }\n      },\n      // collapse\n      \"ctrl+left\": function ctrlLeft(e) {\n        gantt.close(this.taskId);\n      },\n      // expand\n      \"ctrl+right\": function ctrlRight(e) {\n        gantt.open(this.taskId);\n      },\n      // delete task\n      \"delete\": function _delete(e) {\n        if (gantt.isReadonly(this)) {\n          return;\n        }\n\n        gantt.$click.buttons[\"delete\"](this.taskId);\n      },\n      // open lightbox\n      \"enter\": function enter() {\n        if (gantt.isReadonly(this)) {\n          return;\n        }\n\n        gantt.showLightbox(this.taskId);\n      },\n      // add subtask\n      \"ctrl+enter\": function ctrlEnter() {\n        if (gantt.isReadonly(this)) {\n          return;\n        }\n\n        gantt.createTask({}, this.taskId);\n      }\n    }\n  });\n  gantt.$keyboardNavigation.TaskRow.prototype.bindAll(gantt.$keyboardNavigation.TaskRow.prototype.keys);\n};","module.exports = function (gantt) {\n  var domHelpers = require(\"../../../core/ui/utils/dom_helpers\");\n\n  gantt.$keyboardNavigation.HeaderCell = function (index) {\n    this.index = index || 0;\n  };\n\n  gantt.$keyboardNavigation.HeaderCell.prototype = gantt._compose(gantt.$keyboardNavigation.KeyNavNode, {\n    _handlers: null,\n    isValid: function isValid() {\n      if (!gantt.config.show_grid) {\n        if (gantt.getVisibleTaskCount()) return false;\n      }\n\n      return !!gantt.getGridColumns()[this.index] || !gantt.getVisibleTaskCount();\n    },\n    fallback: function fallback() {\n      if (!gantt.config.show_grid) {\n        if (gantt.getVisibleTaskCount()) {\n          return new gantt.$keyboardNavigation.TaskRow();\n        }\n\n        return null;\n      }\n\n      var visibleColumns = gantt.getGridColumns();\n      var index = this.index;\n\n      while (index >= 0) {\n        if (visibleColumns[index]) break;\n        index--;\n      }\n\n      if (visibleColumns[index]) {\n        return new gantt.$keyboardNavigation.HeaderCell(index);\n      } else {\n        return null;\n      }\n    },\n    fromDomElement: function fromDomElement(el) {\n      var cellElement = domHelpers.locateClassName(el, \"gantt_grid_head_cell\");\n\n      if (cellElement) {\n        var index = 0;\n\n        while (cellElement && cellElement.previousSibling) {\n          cellElement = cellElement.previousSibling;\n          index += 1;\n        }\n\n        return new gantt.$keyboardNavigation.HeaderCell(index);\n      } else {\n        return null;\n      }\n    },\n    getNode: function getNode() {\n      var cells = gantt.$grid_scale.childNodes;\n      return cells[this.index];\n    },\n    keys: {\n      \"left\": function left() {\n        if (this.index > 0) {\n          this.moveTo(new gantt.$keyboardNavigation.HeaderCell(this.index - 1));\n        }\n      },\n      \"right\": function right() {\n        var columns = gantt.getGridColumns();\n\n        if (this.index < columns.length - 1) {\n          this.moveTo(new gantt.$keyboardNavigation.HeaderCell(this.index + 1));\n        }\n      },\n      \"down\": function down() {\n        var taskRow;\n        var rootLevel = gantt.getChildren(gantt.config.root_id);\n\n        if (gantt.isTaskExists(rootLevel[0])) {\n          taskRow = rootLevel[0];\n        }\n\n        if (taskRow) {\n          if (gantt.config.keyboard_navigation_cells) {\n            this.moveTo(new gantt.$keyboardNavigation.TaskCell(taskRow, this.index));\n          } else {\n            this.moveTo(new gantt.$keyboardNavigation.TaskRow(taskRow));\n          }\n        }\n      },\n      \"end\": function end() {\n        var columns = gantt.getGridColumns();\n        this.moveTo(new gantt.$keyboardNavigation.HeaderCell(columns.length - 1));\n      },\n      \"home\": function home() {\n        this.moveTo(new gantt.$keyboardNavigation.HeaderCell(0));\n      },\n      // press header button\n      \"enter, space\": function enterSpace() {\n        var node = domHelpers.getActiveElement();\n        node.click();\n      },\n      // add new task\n      \"ctrl+enter\": function ctrlEnter() {\n        if (gantt.isReadonly(this)) {\n          return;\n        }\n\n        gantt.createTask({}, this.taskId);\n      }\n    }\n  });\n  gantt.$keyboardNavigation.HeaderCell.prototype.bindAll(gantt.$keyboardNavigation.HeaderCell.prototype.keys);\n};","module.exports = function (gantt) {\n  gantt.$keyboardNavigation.KeyNavNode = function () {};\n\n  gantt.$keyboardNavigation.KeyNavNode.prototype = gantt._compose(gantt.$keyboardNavigation.EventHandler, {\n    isValid: function isValid() {\n      return true;\n    },\n    fallback: function fallback() {\n      return null;\n    },\n    moveTo: function moveTo(element) {\n      gantt.$keyboardNavigation.dispatcher.setActiveNode(element);\n    },\n    compareTo: function compareTo(b) {\n      // good enough comparison of two random objects\n      if (!b) return false;\n\n      for (var i in this) {\n        if (!!this[i] != !!b[i]) return false;\n        var canStringifyThis = !!(this[i] && this[i].toString);\n        var canStringifyThat = !!(b[i] && b[i].toString);\n        if (canStringifyThat != canStringifyThis) return false;\n\n        if (!(canStringifyThat && canStringifyThis)) {\n          if (b[i] != this[i]) return false;\n        } else {\n          if (b[i].toString() != this[i].toString()) return false;\n        }\n      }\n\n      return true;\n    },\n    getNode: function getNode() {},\n    focus: function focus() {\n      var node = this.getNode();\n      if (!node) return;\n      var eventFacade = gantt.$keyboardNavigation.facade;\n\n      if (eventFacade.callEvent(\"onBeforeFocus\", [node]) === false) {\n        return;\n      }\n\n      if (node) {\n        node.setAttribute(\"tabindex\", \"-1\");\n\n        if (!node.$eventAttached) {\n          node.$eventAttached = true;\n          gantt.event(node, \"focus\", function (e) {\n            e.preventDefault();\n            return false;\n          }, false);\n        } //node.className += \" gantt_focused\";\n\n\n        if (gantt.utils.dom.isChildOf(document.activeElement, node)) {\n          node = document.activeElement;\n        }\n\n        if (node.focus) node.focus();\n        eventFacade.callEvent(\"onFocus\", [this.getNode()]);\n      }\n    },\n    blur: function blur() {\n      var node = this.getNode();\n\n      if (node) {\n        var eventFacade = gantt.$keyboardNavigation.facade;\n        eventFacade.callEvent(\"onBlur\", [node]);\n        node.setAttribute(\"tabindex\", \"-1\"); //node.className = (node.className || \"\").replace(/ ?gantt_focused/g, \"\");\n      }\n    }\n  });\n};","module.exports = function (gantt) {\n  gantt.$keyboardNavigation.GanttNode = function () {};\n\n  gantt.$keyboardNavigation.GanttNode.prototype = gantt._compose(gantt.$keyboardNavigation.EventHandler, {\n    focus: function focus() {\n      gantt.focus();\n    },\n    blur: function blur() {},\n    isEnabled: function isEnabled() {\n      return gantt.$container.hasAttribute(\"tabindex\");\n    },\n    scrollHorizontal: function scrollHorizontal(dir) {\n      var date = gantt.dateFromPos(gantt.getScrollState().x);\n      var scale = gantt.getScale();\n      var step = dir < 0 ? -scale.step : scale.step;\n      date = gantt.date.add(date, step, scale.unit);\n      gantt.scrollTo(gantt.posFromDate(date));\n    },\n    scrollVertical: function scrollVertical(dir) {\n      var top = gantt.getScrollState().y;\n      var step = gantt.config.row_height;\n      gantt.scrollTo(null, top + (dir < 0 ? -1 : 1) * step);\n    },\n    keys: {\n      \"alt+left\": function altLeft(e) {\n        this.scrollHorizontal(-1);\n      },\n      \"alt+right\": function altRight(e) {\n        this.scrollHorizontal(1);\n      },\n      \"alt+up\": function altUp(e) {\n        this.scrollVertical(-1);\n      },\n      \"alt+down\": function altDown(e) {\n        this.scrollVertical(1);\n      },\n      // undo\n      \"ctrl+z\": function ctrlZ() {\n        if (gantt.undo) gantt.undo();\n      },\n      // redo\n      \"ctrl+r\": function ctrlR() {\n        if (gantt.redo) gantt.redo();\n      }\n    }\n  });\n  gantt.$keyboardNavigation.GanttNode.prototype.bindAll(gantt.$keyboardNavigation.GanttNode.prototype.keys);\n};","module.exports = function (gantt) {\n  (function () {\n    var domHelpers = require(\"../../../core/ui/utils/dom_helpers\");\n\n    gantt.$keyboardNavigation.getFocusableNodes = domHelpers.getFocusableNodes;\n\n    gantt.$keyboardNavigation.trapFocus = function trapFocus(root, e) {\n      if (e.keyCode != 9) return false;\n      var focusable = gantt.$keyboardNavigation.getFocusableNodes(root);\n      var currentFocus = domHelpers.getActiveElement();\n      var currentIndex = -1;\n\n      for (var i = 0; i < focusable.length; i++) {\n        if (focusable[i] == currentFocus) {\n          currentIndex = i;\n          break;\n        }\n      }\n\n      if (e.shiftKey) {\n        // back tab\n        if (currentIndex <= 0) {\n          // go to the last element if we focused on the first\n          var lastItem = focusable[focusable.length - 1];\n\n          if (lastItem) {\n            lastItem.focus();\n            e.preventDefault();\n            return true;\n          }\n        }\n      } else {\n        // forward tab\n        if (currentIndex >= focusable.length - 1) {\n          // forward tab from last element should go back to the first element\n          var firstItem = focusable[0];\n\n          if (firstItem) {\n            firstItem.focus();\n            e.preventDefault();\n            return true;\n          }\n        }\n      }\n\n      return false;\n    };\n  })();\n};","module.exports = function (gantt) {\n  gantt.$keyboardNavigation.EventHandler = {\n    _handlers: null,\n    findHandler: function findHandler(command) {\n      if (!this._handlers) this._handlers = {};\n      var shortcuts = gantt.$keyboardNavigation.shortcuts;\n      var hash = shortcuts.getHash(command);\n      return this._handlers[hash];\n    },\n    doAction: function doAction(command, e) {\n      var handler = this.findHandler(command);\n\n      if (handler) {\n        var eventFacade = gantt.$keyboardNavigation.facade;\n\n        if (eventFacade.callEvent(\"onBeforeAction\", [command, e]) === false) {\n          return;\n        }\n\n        handler.call(this, e);\n        if (e.preventDefault) e.preventDefault();else e.returnValue = false;\n      }\n    },\n    bind: function bind(shortcut, handler) {\n      if (!this._handlers) this._handlers = {};\n      var shortcuts = gantt.$keyboardNavigation.shortcuts;\n      var commands = shortcuts.parse(shortcut);\n\n      for (var i = 0; i < commands.length; i++) {\n        this._handlers[shortcuts.getHash(commands[i])] = handler;\n      }\n    },\n    unbind: function unbind(shortcut) {\n      var shortcuts = gantt.$keyboardNavigation.shortcuts;\n      var commands = shortcuts.parse(shortcut);\n\n      for (var i = 0; i < commands.length; i++) {\n        if (this._handlers[shortcuts.getHash(commands[i])]) {\n          delete this._handlers[shortcuts.getHash(commands[i])];\n        }\n      }\n    },\n    bindAll: function bindAll(map) {\n      for (var i in map) {\n        this.bind(i, map[i]);\n      }\n    },\n    initKeys: function initKeys() {\n      if (!this._handlers) this._handlers = {};\n\n      if (this.keys) {\n        this.bindAll(this.keys);\n      }\n    }\n  };\n};","module.exports = function (gantt) {\n  gantt.$keyboardNavigation.shortcuts = {\n    createCommand: function createCommand() {\n      return {\n        modifiers: {\n          \"shift\": false,\n          \"alt\": false,\n          \"ctrl\": false,\n          \"meta\": false\n        },\n        keyCode: null\n      };\n    },\n    parse: function parse(shortcut) {\n      var commands = [];\n      var expr = this.getExpressions(this.trim(shortcut));\n\n      for (var i = 0; i < expr.length; i++) {\n        var words = this.getWords(expr[i]);\n        var command = this.createCommand();\n\n        for (var j = 0; j < words.length; j++) {\n          if (this.commandKeys[words[j]]) {\n            command.modifiers[words[j]] = true;\n          } else if (this.specialKeys[words[j]]) {\n            command.keyCode = this.specialKeys[words[j]];\n          } else {\n            command.keyCode = words[j].charCodeAt(0);\n          }\n        }\n\n        commands.push(command);\n      }\n\n      return commands;\n    },\n    getCommandFromEvent: function getCommandFromEvent(domEvent) {\n      var command = this.createCommand();\n      command.modifiers.shift = !!domEvent.shiftKey;\n      command.modifiers.alt = !!domEvent.altKey;\n      command.modifiers.ctrl = !!domEvent.ctrlKey;\n      command.modifiers.meta = !!domEvent.metaKey;\n      command.keyCode = domEvent.which || domEvent.keyCode;\n\n      if (command.keyCode >= 96 && command.keyCode <= 105) {\n        // numpad keys 96-105 -> 48-57\n        command.keyCode -= 48; //convert numpad  number code to regular number code\n      }\n\n      var printableKey = String.fromCharCode(command.keyCode);\n\n      if (printableKey) {\n        command.keyCode = printableKey.toLowerCase().charCodeAt(0);\n      }\n\n      return command;\n    },\n    getHashFromEvent: function getHashFromEvent(domEvent) {\n      return this.getHash(this.getCommandFromEvent(domEvent));\n    },\n    getHash: function getHash(command) {\n      var parts = [];\n\n      for (var i in command.modifiers) {\n        if (command.modifiers[i]) {\n          parts.push(i);\n        }\n      }\n\n      parts.push(command.keyCode);\n      return parts.join(this.junctionChar);\n    },\n    getExpressions: function getExpressions(shortcut) {\n      return shortcut.split(this.junctionChar);\n    },\n    getWords: function getWords(term) {\n      return term.split(this.combinationChar);\n    },\n    trim: function trim(shortcut) {\n      return shortcut.replace(/\\s/g, \"\");\n    },\n    junctionChar: \",\",\n    combinationChar: \"+\",\n    commandKeys: {\n      \"shift\": 16,\n      \"alt\": 18,\n      \"ctrl\": 17,\n      \"meta\": true\n    },\n    specialKeys: {\n      \"backspace\": 8,\n      \"tab\": 9,\n      \"enter\": 13,\n      \"esc\": 27,\n      \"space\": 32,\n      \"up\": 38,\n      \"down\": 40,\n      \"left\": 37,\n      \"right\": 39,\n      \"home\": 36,\n      \"end\": 35,\n      \"pageup\": 33,\n      \"pagedown\": 34,\n      \"delete\": 46,\n      \"insert\": 45,\n      \"plus\": 107,\n      \"f1\": 112,\n      \"f2\": 113,\n      \"f3\": 114,\n      \"f4\": 115,\n      \"f5\": 116,\n      \"f6\": 117,\n      \"f7\": 118,\n      \"f8\": 119,\n      \"f9\": 120,\n      \"f10\": 121,\n      \"f11\": 122,\n      \"f12\": 123\n    }\n  };\n};","module.exports = function (gantt) {\n  var eventable = require(\"../utils/eventable\");\n\n  function setupKeyNav(gantt) {\n    gantt.config.keyboard_navigation = true;\n    gantt.config.keyboard_navigation_cells = false;\n    gantt.$keyboardNavigation = {};\n\n    gantt._compose = function () {\n      var parts = Array.prototype.slice.call(arguments, 0);\n      var res = {};\n\n      for (var i = 0; i < parts.length; i++) {\n        var obj = parts[i];\n\n        if (typeof obj == \"function\") {\n          obj = new obj();\n        }\n\n        for (var p in obj) {\n          res[p] = obj[p];\n        }\n      }\n\n      return res;\n    };\n\n    require(\"./keyboard_navigation/common/keyboard_shortcuts\")(gantt);\n\n    require(\"./keyboard_navigation/common/eventhandler\")(gantt);\n\n    require(\"./keyboard_navigation/common/trap_modal_focus\")(gantt);\n\n    require(\"./keyboard_navigation/elements/gantt_node\")(gantt);\n\n    require(\"./keyboard_navigation/elements/nav_node\")(gantt);\n\n    require(\"./keyboard_navigation/elements/header_cell\")(gantt);\n\n    require(\"./keyboard_navigation/elements/task_row\")(gantt);\n\n    require(\"./keyboard_navigation/elements/task_cell\")(gantt);\n\n    require(\"./keyboard_navigation/modals\")(gantt);\n\n    require(\"./keyboard_navigation/core\")(gantt);\n\n    var domHelpers = require(\"../core/ui/utils/dom_helpers\");\n\n    (function () {\n      var dispatcher = gantt.$keyboardNavigation.dispatcher;\n\n      dispatcher.isTaskFocused = function (id) {\n        var node = dispatcher.activeNode;\n\n        if (node instanceof gantt.$keyboardNavigation.TaskRow || node instanceof gantt.$keyboardNavigation.TaskCell) {\n          if (node.taskId == id) {\n            return true;\n          }\n        }\n\n        return false;\n      };\n\n      var keyDownHandler = function keyDownHandler(e) {\n        if (!gantt.config.keyboard_navigation) return; // GS-734 & GS-1078: we don't need keyboard navigation inside inline editors\n\n        if (!gantt.config.keyboard_navigation_cells && isInlineEditorCell(e)) return;\n\n        if (isNoKeyboardNavigationElement(e) || isLightboxElement(e)) {\n          return;\n        }\n\n        return dispatcher.keyDownHandler(e);\n      };\n\n      var focusHandler = function focusHandler(e) {\n        if (dispatcher.$preventDefault) {\n          e.preventDefault();\n          gantt.$container.blur();\n          return false; // do nothing if key-nav focus is already planned\n        } else if (!dispatcher.awaitsFocus()) {\n          // otherwise - re-focus key-nav element on gantt focus\n          dispatcher.focusGlobalNode();\n        }\n      };\n\n      var reFocusActiveNode = function reFocusActiveNode() {\n        if (!dispatcher.isEnabled()) return;\n        var outsideGantt = !domHelpers.isChildOf(document.activeElement, gantt.$container) && document.activeElement.localName != \"body\";\n        var activeNode = dispatcher.getActiveNode();\n        if (!activeNode || outsideGantt) return;\n        var domElement = activeNode.getNode();\n        var top, left;\n\n        if (domElement && domElement.parentNode) {\n          top = domElement.parentNode.scrollTop;\n          left = domElement.parentNode.scrollLeft;\n        }\n\n        activeNode.focus(true);\n\n        if (domElement && domElement.parentNode) {\n          domElement.parentNode.scrollTop = top;\n          domElement.parentNode.scrollLeft = left;\n        }\n      };\n\n      gantt.attachEvent(\"onDataRender\", function () {\n        if (!gantt.config.keyboard_navigation) return;\n        reFocusActiveNode();\n      });\n      gantt.attachEvent(\"onGanttRender\", function () {\n        gantt.eventRemove(gantt.$root, \"keydown\", keyDownHandler);\n        gantt.eventRemove(gantt.$container, \"focus\", focusHandler);\n        gantt.eventRemove(gantt.$container, \"mousedown\", mousedownHandler);\n\n        if (gantt.config.keyboard_navigation) {\n          gantt.event(gantt.$root, \"keydown\", keyDownHandler);\n          gantt.event(gantt.$container, \"focus\", focusHandler);\n          gantt.event(gantt.$container, \"mousedown\", mousedownHandler);\n          gantt.$container.setAttribute(\"tabindex\", \"0\");\n        } else {\n          gantt.$container.removeAttribute(\"tabindex\");\n        }\n      });\n\n      function getTaskNodeConstructor() {\n        if (gantt.config.keyboard_navigation_cells) {\n          return gantt.$keyboardNavigation.TaskCell;\n        } else {\n          return gantt.$keyboardNavigation.TaskRow;\n        }\n      }\n\n      function isInlineEditorCell(e) {\n        return !!domHelpers.closest(e.target, \".gantt_grid_editor_placeholder\");\n      } // GS-1445. Cancel keyboard navigation within custom elements\n\n\n      function isNoKeyboardNavigationElement(e) {\n        return !!domHelpers.closest(e.target, \".no_keyboard_navigation\");\n      }\n\n      function isLightboxElement(e) {\n        return !!domHelpers.closest(e.target, \".gantt_cal_light\");\n      }\n\n      function mousedownHandler(e) {\n        if (!gantt.config.keyboard_navigation) return true; // GS-734 & GS-1078: we don't need keyboard navigation inside inline editors\n\n        if (!gantt.config.keyboard_navigation_cells && isInlineEditorCell(e)) return true;\n\n        if (isNoKeyboardNavigationElement(e)) {\n          return;\n        }\n\n        var focusNode;\n        var locateTask = dispatcher.fromDomElement(e);\n\n        if (locateTask) {\n          //var node = getTaskNodeConstructor();\n          if (dispatcher.activeNode instanceof gantt.$keyboardNavigation.TaskCell && domHelpers.isChildOf(e.target, gantt.$task)) {\n            locateTask = new gantt.$keyboardNavigation.TaskCell(locateTask.taskId, dispatcher.activeNode.columnIndex);\n          }\n\n          focusNode = locateTask;\n        }\n\n        if (focusNode) {\n          if (!dispatcher.isEnabled()) {\n            dispatcher.activeNode = focusNode;\n          } else {\n            dispatcher.delay(function () {\n              dispatcher.setActiveNode(focusNode);\n            });\n          }\n        } else {\n          // empty click should drop focus from gantt, insert of reselecting default node\n          dispatcher.$preventDefault = true;\n          setTimeout(function () {\n            dispatcher.$preventDefault = false;\n          }, 300);\n        }\n      }\n\n      var onReady = gantt.attachEvent(\"onGanttReady\", function () {\n        // restore focus on repainted tasks\n        gantt.detachEvent(onReady);\n        gantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function (id) {\n          if (gantt.config.keyboard_navigation && dispatcher.isEnabled()) {\n            var currentNode = dispatcher.getActiveNode();\n\n            if (currentNode && currentNode.taskId == id) {\n              reFocusActiveNode();\n            }\n          }\n        });\n\n        if (gantt._smart_render) {\n          var updateRender = gantt._smart_render._redrawTasks;\n\n          gantt._smart_render._redrawTasks = function (renderers, items) {\n            if (gantt.config.keyboard_navigation && dispatcher.isEnabled()) {\n              var currentNode = dispatcher.getActiveNode();\n\n              if (currentNode && currentNode.taskId !== undefined) {\n                var focusedItemVisible = false;\n\n                for (var i = 0; i < items.length; i++) {\n                  if (items[i].id == currentNode.taskId && items[i].start_date) {\n                    focusedItemVisible = true;\n                    break;\n                  }\n                }\n\n                if (!focusedItemVisible) {\n                  items.push(gantt.getTask(currentNode.taskId));\n                }\n              }\n            }\n\n            var res = updateRender.apply(this, arguments);\n            return res;\n          };\n        }\n      });\n      var createdTaskId = null;\n      var keepFocusOnNewTask = false;\n      gantt.attachEvent(\"onTaskCreated\", function (task) {\n        createdTaskId = task.id;\n        return true;\n      });\n      gantt.attachEvent(\"onAfterTaskAdd\", function (id, item) {\n        if (!gantt.config.keyboard_navigation) return true;\n\n        if (dispatcher.isEnabled()) {\n          // GS-1394. After adding a new task, the focus shouldn't change to the placeholder task\n          if (id == createdTaskId) {\n            keepFocusOnNewTask = true;\n            setTimeout(function () {\n              keepFocusOnNewTask = false;\n              createdTaskId = null;\n            });\n          }\n\n          if (keepFocusOnNewTask && item.type == gantt.config.types.placeholder) {\n            return;\n          }\n\n          var columnIndex = 0;\n          var node = dispatcher.activeNode;\n\n          if (node instanceof gantt.$keyboardNavigation.TaskCell) {\n            columnIndex = node.columnIndex;\n          }\n\n          var nodeConstructor = getTaskNodeConstructor();\n\n          if (item.type == gantt.config.types.placeholder && gantt.config.placeholder_task.focusOnCreate === false) {// do not focus on the placeholder task\n          } else {\n            dispatcher.setActiveNode(new nodeConstructor(id, columnIndex));\n          }\n        }\n      });\n      gantt.attachEvent(\"onTaskIdChange\", function (oldId, newId) {\n        if (!gantt.config.keyboard_navigation) return true;\n        var node = dispatcher.activeNode;\n\n        if (dispatcher.isTaskFocused(oldId)) {\n          node.taskId = newId;\n        }\n\n        return true;\n      });\n      var interval = setInterval(function () {\n        if (!gantt.config.keyboard_navigation) return;\n\n        if (!dispatcher.isEnabled()) {\n          dispatcher.enable();\n        }\n\n        return;\n      }, 500);\n      gantt.attachEvent(\"onDestroy\", function () {\n        clearInterval(interval);\n      });\n\n      function getScopeName(obj) {\n        if (obj instanceof gantt.$keyboardNavigation.GanttNode) {\n          return \"gantt\";\n        } else if (obj instanceof gantt.$keyboardNavigation.HeaderCell) {\n          return \"headerCell\";\n        } else if (obj instanceof gantt.$keyboardNavigation.TaskRow) {\n          return \"taskRow\";\n        } else if (obj instanceof gantt.$keyboardNavigation.TaskCell) {\n          return \"taskCell\";\n        }\n\n        return null;\n      }\n\n      function getScope(mode) {\n        var scopes = {\n          \"gantt\": gantt.$keyboardNavigation.GanttNode,\n          \"headerCell\": gantt.$keyboardNavigation.HeaderCell,\n          \"taskRow\": gantt.$keyboardNavigation.TaskRow,\n          \"taskCell\": gantt.$keyboardNavigation.TaskCell\n        };\n        return scopes[mode] || scopes.gantt;\n      }\n\n      function findVisibleColumnIndex(columnName) {\n        var columns = gantt.getGridColumns();\n\n        for (var i = 0; i < columns.length; i++) {\n          if (columns[i].name == columnName) {\n            return i;\n          }\n        }\n\n        return 0;\n      }\n\n      var keyNavFacade = {};\n      eventable(keyNavFacade);\n      gantt.mixin(keyNavFacade, {\n        addShortcut: function addShortcut(shortcut, handler, scope) {\n          var scopeObject = getScope(scope);\n\n          if (scopeObject) {\n            scopeObject.prototype.bind(shortcut, handler);\n          }\n        },\n        getShortcutHandler: function getShortcutHandler(shortcut, scope) {\n          var commands = gantt.$keyboardNavigation.shortcuts.parse(shortcut);\n\n          if (commands.length) {\n            return keyNavFacade.getCommandHandler(commands[0], scope);\n          }\n        },\n        getCommandHandler: function getCommandHandler(command, scope) {\n          var scopeObject = getScope(scope);\n\n          if (scopeObject) {\n            if (command) {\n              return scopeObject.prototype.findHandler(command);\n            }\n          }\n        },\n        removeShortcut: function removeShortcut(shortcut, scope) {\n          var scopeObject = getScope(scope);\n\n          if (scopeObject) {\n            scopeObject.prototype.unbind(shortcut);\n          }\n        },\n        focus: function focus(config) {\n          var type = config ? config.type : null;\n          var constructor = getScope(type);\n          var node;\n\n          switch (type) {\n            case \"taskCell\":\n              node = new constructor(config.id, findVisibleColumnIndex(config.column));\n              break;\n\n            case \"taskRow\":\n              node = new constructor(config.id);\n              break;\n\n            case \"headerCell\":\n              node = new constructor(findVisibleColumnIndex(config.column));\n              break;\n\n            default:\n              break;\n          }\n\n          dispatcher.delay(function () {\n            if (node) {\n              dispatcher.setActiveNode(node);\n            } else {\n              dispatcher.enable();\n\n              if (!dispatcher.getActiveNode()) {\n                dispatcher.setDefaultNode();\n              } else {\n                if (!dispatcher.awaitsFocus()) {\n                  dispatcher.enable();\n                }\n              }\n            }\n          });\n        },\n        getActiveNode: function getActiveNode() {\n          if (dispatcher.isEnabled()) {\n            var node = dispatcher.getActiveNode();\n            var scope = getScopeName(node);\n            var columns = gantt.getGridColumns();\n\n            switch (scope) {\n              case \"taskCell\":\n                return {\n                  type: \"taskCell\",\n                  id: node.taskId,\n                  column: columns[node.columnIndex].name\n                };\n\n              case \"taskRow\":\n                return {\n                  type: \"taskRow\",\n                  id: node.taskId\n                };\n\n              case \"headerCell\":\n                return {\n                  type: \"headerCell\",\n                  column: columns[node.index].name\n                };\n            }\n          }\n\n          return null;\n        }\n      });\n      gantt.$keyboardNavigation.facade = keyNavFacade;\n      gantt.ext.keyboardNavigation = keyNavFacade;\n\n      gantt.focus = function () {\n        keyNavFacade.focus();\n      };\n\n      gantt.addShortcut = keyNavFacade.addShortcut;\n      gantt.getShortcutHandler = keyNavFacade.getShortcutHandler;\n      gantt.removeShortcut = keyNavFacade.removeShortcut;\n    })();\n  }\n\n  setupKeyNav(gantt);\n};","export default function(gantt: any){\r\n\r\ninterface IBody extends HTMLElement {\r\n\tmsRequestFullscreen?: () => void;\r\n\tmozRequestFullScreen?: () => void;\r\n\twebkitRequestFullscreen?: (ALLOW_KEYBOARD_INPUT: any) => void;\r\n}\r\n\r\n\r\ninterface IConsole extends Console {\r\n\twarning?: (str: string) => void;\r\n}\r\n\r\ninterface IDocument extends Document {\r\n\tfullscreenElement: Element;\r\n\tmozFullScreenElement?: Element;\r\n\twebkitFullscreenElement?: Element;\r\n\tmsFullscreenElement?: Element;\r\n\twebkitFullscreenEnabled?: boolean;\r\n\tmozFullScreenEnabled?: boolean;\r\n\tmsFullscreenEnabled?: boolean;\r\n\tmsExitFullscreen?: () => void;\r\n\tmozCancelFullScreen?: () => void;\r\n\twebkitExitFullscreen?: () => void;\r\n}\r\n\r\ninterface IElement extends Element {\r\n\tALLOW_KEYBOARD_INPUT?: boolean;\r\n}\r\n\r\ninterface IElementSizes extends ISizes {\r\n\tmodified: boolean;\r\n}\r\n\r\ninterface ISizes {\r\n\twidth: null | string;\r\n\theight: null | string;\r\n\ttop: null | string;\r\n\tleft: null | string;\r\n\tposition: null | string;\r\n\tzIndex: null | number;\r\n}\r\n\r\nfunction isExpanded() {\r\n\tconst element = ((document as IDocument).fullscreenElement ||\r\n\t\t(document as IDocument).mozFullScreenElement ||\r\n\t\t(document as IDocument).webkitFullscreenElement ||\r\n\t\t(document as IDocument).msFullscreenElement);\r\n\treturn !!(element && element === document.body);\r\n}\r\n\r\nfunction isFullscreenAvailable() {\r\n\ttry {\r\n\t\treturn (document as IDocument).fullscreenEnabled ||\r\n\t\t\t(document as IDocument).webkitFullscreenEnabled ||\r\n\t\t\t(document as IDocument).mozFullScreenEnabled ||\r\n\t\t\t(document as IDocument).msFullscreenEnabled;\r\n\t} catch (e) {\r\n\t\tconsole.error(\"Fullscreen is not available:\", e); // tslint:disable-line:no-console\r\n\t}\r\n}\r\n\r\nconst state = gantt.$services.getService(\"state\");\r\nstate.registerProvider(\"fullscreen\", () => {\r\n\tif (isFullscreenAvailable()){\r\n\t\treturn { fullscreen: isExpanded() };\r\n\t} else {\r\n\t\treturn undefined;\r\n\t}\r\n});\r\n\r\nlet backupBodyPadding = {\r\n\toverflow: null,\r\n\tpadding: null,\r\n\tpaddingTop: null,\r\n\tpaddingRight: null,\r\n\tpaddingBottom: null,\r\n\tpaddingLeft: null\r\n};\r\n\r\nconst backupElementSizes: IElementSizes = {\r\n\twidth: null,\r\n\theight: null,\r\n\ttop: null,\r\n\tleft: null,\r\n\tposition: null,\r\n\tzIndex: null,\r\n\tmodified: false\r\n};\r\n\r\nlet backupPositioning = null;\r\nfunction resetParentPositioning(root){\r\n\tlet parent = root.parentNode;\r\n\tconst positions = [];\r\n\twhile(parent && parent.style){\r\n\t\tpositions.push({\r\n\t\t\telement: parent,\r\n\t\t\toriginalPositioning: parent.style.position\r\n\t\t});\r\n\t\tparent.style.position = \"static\";\r\n\t\tparent = parent.parentNode;\r\n\t}\r\n\treturn positions;\r\n}\r\n\r\nfunction restoreParentPositioning(positions: any[]){\r\n\tpositions.forEach(record => {\r\n\t\trecord.element.style.position = record.originalPositioning;\r\n\t});\r\n}\r\n\r\n// expand gantt root element to fullscreen automatically\r\nfunction setFullScreenSizes() {\r\n\tconst root = gantt.ext.fullscreen.getFullscreenElement();\r\n\tconst body = document.body;\r\n\tupdateSizes(root.style, backupElementSizes);\r\n\tbackupBodyPadding = {\r\n\t\toverflow: body.style.overflow,\r\n\t\tpadding: body.style.padding ? body.style.padding : null,\r\n\t\tpaddingTop: body.style.paddingTop ? body.style.paddingTop : null,\r\n\t\tpaddingRight: body.style.paddingRight ? body.style.paddingRight : null,\r\n\t\tpaddingBottom: body.style.paddingBottom ? body.style.paddingBottom : null,\r\n\t\tpaddingLeft: body.style.paddingLeft ? body.style.paddingLeft : null\r\n\t};\r\n\r\n\tif (body.style.padding) {\r\n\t\tbody.style.padding = \"0\";\r\n\t}\r\n\tif (body.style.paddingTop) {\r\n\t\tbody.style.paddingTop = \"0\";\r\n\t}\r\n\tif (body.style.paddingRight) {\r\n\t\tbody.style.paddingRight = \"0\";\r\n\t}\r\n\tif (body.style.paddingBottom) {\r\n\t\tbody.style.paddingBottom = \"0\";\r\n\t}\r\n\tif (body.style.paddingLeft) {\r\n\t\tbody.style.paddingLeft = \"0\";\r\n\t}\r\n\r\n\tbody.style.overflow = \"hidden\";\r\n\r\n\troot.style.width = \"100vw\";\r\n\troot.style.height = \"100vh\";\r\n\troot.style.top = \"0px\";\r\n\troot.style.left = \"0px\";\r\n\troot.style.position = \"absolute\";\r\n\troot.style.zIndex = 1;\r\n\tbackupElementSizes.modified = true;\r\n\tbackupPositioning = resetParentPositioning(root);\r\n}\r\n\r\nfunction restoreSizes() {\r\n\tconst root = gantt.ext.fullscreen.getFullscreenElement();\r\n\tconst body = document.body;\r\n\tif (backupElementSizes.modified) {\r\n\t\tif (backupBodyPadding.padding) {\r\n\t\t\tbody.style.padding = backupBodyPadding.padding;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingTop) {\r\n\t\t\tbody.style.paddingTop = backupBodyPadding.paddingTop;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingRight) {\r\n\t\t\tbody.style.paddingRight = backupBodyPadding.paddingRight;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingBottom) {\r\n\t\t\tbody.style.paddingBottom = backupBodyPadding.paddingBottom;\r\n\t\t}\r\n\t\tif (backupBodyPadding.paddingLeft) {\r\n\t\t\tbody.style.paddingLeft = backupBodyPadding.paddingLeft;\r\n\t\t}\r\n\r\n\t\tbody.style.overflow = backupBodyPadding.overflow;\r\n\t\tbackupBodyPadding = {\r\n\t\t\toverflow: null,\r\n\t\t\tpadding: null,\r\n\t\t\tpaddingTop: null,\r\n\t\t\tpaddingRight: null,\r\n\t\t\tpaddingBottom: null,\r\n\t\t\tpaddingLeft: null\r\n\t\t};\r\n\t\tupdateSizes(backupElementSizes, root.style);\r\n\t\tbackupElementSizes.modified = false;\r\n\t}\r\n\trestoreParentPositioning(backupPositioning);\r\n\tbackupPositioning = null;\r\n}\r\n\r\nfunction updateSizes(source: ISizes, target: ISizes) {\r\n\ttarget.width = source.width;\r\n\ttarget.height = source.height;\r\n\ttarget.top = source.top;\r\n\ttarget.left = source.left;\r\n\ttarget.position = source.position;\r\n\ttarget.zIndex = source.zIndex;\r\n}\r\n\r\nfunction addDOMEvents() {\r\n\tgantt.event(document, \"webkitfullscreenchange\", onFullScreenChange);\r\n\tgantt.event(document, \"mozfullscreenchange\", onFullScreenChange);\r\n\tgantt.event(document, \"MSFullscreenChange\", onFullScreenChange);\r\n\t// For IE on Win 10\r\n\tgantt.event(document, \"fullscreenChange\", onFullScreenChange);\r\n\tgantt.event(document, \"fullscreenchange\", onFullScreenChange);\r\n}\r\n\r\nlet expandGantt = false;\r\nfunction onFullScreenChange() {\r\n\tif (!gantt.$container) {\r\n\t\t// do nothing if gantt is not yet initialized\r\n\t\treturn;\r\n\t}\r\n\tlet event: \"onExpand\" | \"onCollapse\";\r\n\tconst isBodyExpanded = isExpanded();\r\n\r\n\tif (isBodyExpanded) {\r\n\t\tif (expandGantt) {\r\n\t\t\tevent = \"onExpand\";\r\n\t\t\tsetFullScreenSizes();\r\n\t\t}\r\n\t} else if (expandGantt) {\r\n\t\texpandGantt = false;\r\n\t\tevent = \"onCollapse\";\r\n\t\trestoreSizes();\r\n\t}\r\n\tsetTimeout(() => {\r\n\t\tgantt.render();\r\n\t});\r\n\tsetTimeout(() => {\r\n\t\tgantt.callEvent(event, [gantt.ext.fullscreen.getFullscreenElement()]);\r\n\t});\r\n}\r\n\r\nfunction cantFullscreen() {\r\n\tif (!gantt.$container) { // check is gantt initialized or not\r\n\t\treturn true;\r\n\t}\r\n\tif (!gantt.ext.fullscreen.getFullscreenElement()) {\r\n\t\treturn true;\r\n\t}\r\n\tif (!isFullscreenAvailable()) {\r\n\t\t// tslint:disable-next-line: no-console\r\n\t\tconst method = (console as IConsole).warning || console.log;\r\n\t\tmethod(\"The `fullscreen` feature not being allowed, or full-screen mode not being supported\");\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\ngantt.ext.fullscreen = {\r\n\texpand(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (isExpanded()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeExpand\", [this.getFullscreenElement()])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\texpandGantt = true;\r\n\r\n\t\t// we switch body to fullscreen and then expand fullscreen element to viewport\r\n\t\t// we do it to correct display common elements: lightboxes, tooltip etc.\r\n\t\tconst element = document.body as IBody;\r\n\t\tconst requestArguments = element.webkitRequestFullscreen ?\r\n\t\t\t[(Element as unknown as IElement).ALLOW_KEYBOARD_INPUT] : [];\r\n\r\n\t\tconst requestFullscreen = element.msRequestFullscreen ||\r\n\t\t\telement.mozRequestFullScreen ||\r\n\t\t\telement.webkitRequestFullscreen ||\r\n\t\t\telement.requestFullscreen;\r\n\r\n\t\tif (requestFullscreen) {\r\n\t\t\trequestFullscreen.apply(element, requestArguments);\r\n\t\t}\r\n\t},\r\n\tcollapse(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!isExpanded()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!gantt.callEvent(\"onBeforeCollapse\", [this.getFullscreenElement()])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst requestExitFullscreen = (document as IDocument).msExitFullscreen ||\r\n\t\t\t(document as IDocument).mozCancelFullScreen ||\r\n\t\t\t(document as IDocument).webkitExitFullscreen ||\r\n\t\t\t(document as IDocument).exitFullscreen;\r\n\r\n\t\tif (requestExitFullscreen) {\r\n\t\t\trequestExitFullscreen.apply(document);\r\n\t\t}\r\n\t},\r\n\ttoggle(): void {\r\n\t\tif (cantFullscreen()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!isExpanded()) {\r\n\t\t\tthis.expand();\r\n\t\t} else {\r\n\t\t\tthis.collapse();\r\n\t\t}\r\n\r\n\t},\r\n\tgetFullscreenElement(): HTMLElement {\r\n\t\treturn gantt.$root;\r\n\t},\r\n};\r\n\r\ngantt.expand = function() {\r\n\tgantt.ext.fullscreen.expand();\r\n};\r\n\r\ngantt.collapse = function(){\r\n\tgantt.ext.fullscreen.collapse();\r\n};\r\n\r\ngantt.attachEvent(\"onGanttReady\", addDOMEvents);\r\n\r\n}","interface IPoint {\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\nexport class EventsManager {\r\n\tstatic create(gantt: any) {\r\n\t\treturn new EventsManager(gantt);\r\n\t}\r\n\tprivate _mouseDown: boolean = false;\r\n\tprivate _startPoint: IPoint;\r\n\tprivate _scrollState: IPoint;\r\n\tprivate _originAutoscroll: boolean;\r\n\tprivate _domEvents: any;\r\n\tprivate _timeline: any;\r\n\tprivate _gantt: any;\r\n\tprivate _trace: IPoint[];\r\n\tprivate _originalReadonly: boolean;\r\n\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\tthis._trace = [];\r\n\t}\r\n\r\n\tdestructor() {\r\n\t\tthis._domEvents.detachAll();\r\n\t}\r\n\r\n\tattach(timeline: any): void {\r\n\t\tthis._timeline = timeline;\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._domEvents.attach(timeline.$task, \"mousedown\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey,ignore, enabled } = gantt.config.drag_timeline;\r\n\t\t\tif(enabled === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet filterTargets = \".gantt_task_line, .gantt_task_link\";\r\n\t\t\tif(ignore !== undefined) {\r\n\t\t\t\tif(ignore instanceof Array){\r\n\t\t\t\t\tfilterTargets = ignore.join(\", \");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilterTargets = ignore;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (filterTargets) {\r\n\t\t\t\tif (gantt.utils.dom.closest(event.target, filterTargets)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\r\n\t\t\tthis._startDrag(event);\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(document, \"keydown\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] === true) {\r\n\t\t\t\tthis._applyDndReadyStyles();\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._domEvents.attach(document, \"keyup\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] === false) {\r\n\t\t\t\tthis._clearDndReadyStyles();\r\n\t\t\t\tthis._stopDrag(event);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(document, \"mouseup\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(gantt.$root, \"mouseup\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(document, \"mouseleave\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\t\tthis._domEvents.attach(gantt.$root, \"mouseleave\", (event) => {\r\n\t\t\tthis._stopDrag(event);\r\n\t\t});\r\n\r\n\t\tthis._domEvents.attach(gantt.$root, \"mousemove\", (event) => {\r\n\t\t\tif (!gantt.config.drag_timeline) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\t// GS-854. If we don't have useKey for the drag_timeline extension,\r\n\t\t\t// check the click_drag to not simultaneously use both extensions\r\n\t\t\tconst clickDrag = this._gantt.ext.clickDrag;\r\n\t\t\tconst clickDragUseKey = (this._gantt.config.click_drag || {}).useKey;\r\n\t\t\tif (clickDrag && clickDragUseKey) {\r\n\t\t\t\tif (!useKey && event[clickDragUseKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tthis._trace.push({ x: event.clientX, y: event.clientY });\r\n\t\t\t\tconst scrollPosition: IPoint = this._countNewScrollPosition({ x: event.clientX, y: event.clientY });\r\n\t\t\t\tthis._setScrollPosition(timeline, scrollPosition);\r\n\t\t\t\tthis._scrollState = scrollPosition;\r\n\t\t\t\tthis._startPoint = { x: event.clientX, y: event.clientY };\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _calculateDirectionVector = () => {\r\n\t\tconst traceSteps = 10;\r\n\t\tif(this._trace.length >= traceSteps) {\r\n\t\t\tconst dots = this._trace.slice(this._trace.length - traceSteps);\r\n\r\n\t\t\tconst vectors = [];\r\n\t\t\tfor(let i = 1; i < dots.length; i++) {\r\n\t\t\t\tvectors.push({\r\n\t\t\t\t\tx: dots[i].x - dots[i - 1].x,\r\n\t\t\t\t\ty: dots[i].y - dots[i - 1].y\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst resultVector = {x:0, y:0};\r\n\r\n\t\t\tvectors.forEach((vector) => {\r\n\t\t\t\tresultVector.x += vector.x;\r\n\t\t\t\tresultVector.y += vector.y;\r\n\t\t\t});\r\n\r\n\t\t\tconst magnitude = Math.sqrt(resultVector.x*resultVector.x + resultVector.y*resultVector.y);\r\n\t\t\tconst angleDegrees = Math.atan2(Math.abs(resultVector.y), Math.abs(resultVector.x)) * 180 / Math.PI;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tmagnitude,\r\n\t\t\t\tangleDegrees\r\n\t\t\t};\r\n\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate _applyDndReadyStyles = (): void => {\r\n\t\tthis._timeline.$task.classList.add(\"gantt_timeline_move_available\");\r\n\t}\r\n\r\n\tprivate _clearDndReadyStyles = (): void => {\r\n\t\tthis._timeline.$task.classList.remove(\"gantt_timeline_move_available\");\r\n\t}\r\n\r\n\tprivate _getScrollPosition = (timeline: any): IPoint => {\r\n\t\tconst gantt = this._gantt;\r\n\t\treturn {\r\n\t\t\tx: gantt.$ui.getView(timeline.$config.scrollX).getScrollState().position,\r\n\t\t\ty: gantt.$ui.getView(timeline.$config.scrollY).getScrollState().position\r\n\t\t};\r\n\t}\r\n\tprivate _countNewScrollPosition = (coords: IPoint): IPoint => {\r\n\t\tconst vector = this._calculateDirectionVector();\r\n\t\tlet shiftX = this._startPoint.x - coords.x;\r\n\t\tlet shiftY = this._startPoint.y - coords.y;\r\n\t\tif(vector){\r\n\t\t\tif(vector.angleDegrees < 15){\r\n\t\t\t\tshiftY = 0;\r\n\t\t\t} else if(vector.angleDegrees > 75){\r\n\t\t\t\tshiftX = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst result = {\r\n\t\t\tx: this._scrollState.x + shiftX,\r\n\t\t\ty: this._scrollState.y + shiftY\r\n\t\t};\r\n\t\treturn result;\r\n\t}\r\n\tprivate _setScrollPosition = (timeline: any, coords: IPoint): void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\tgantt.scrollLayoutCell(timeline.$id, coords.x, coords.y);\r\n\t\t});\r\n\t}\r\n\tprivate _stopDrag = (event: Event): void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._trace = [];\r\n\t\tgantt.$root.classList.remove(\"gantt_noselect\");\r\n\r\n\t\tif(this._originalReadonly !== undefined){\r\n\t\t\tgantt.config.readonly = this._originalReadonly;\r\n\t\t}\r\n\r\n\t\tif(this._originAutoscroll !== undefined){\r\n\t\t\tgantt.config.autoscroll = this._originAutoscroll;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.drag_timeline){\r\n\t\t\tconst { useKey } = gantt.config.drag_timeline;\r\n\t\t\tif (useKey && event[useKey] !== true) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._mouseDown = false;\r\n\t}\r\n\r\n\tprivate _startDrag = (event: any) : void => {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._originAutoscroll = gantt.config.autoscroll;\r\n\t\tgantt.config.autoscroll = false;\r\n\r\n\t\tgantt.$root.classList.add(\"gantt_noselect\");\r\n\t\tthis._originalReadonly = gantt.config.readonly;\r\n\t\tgantt.config.readonly = true;\r\n\r\n\t\tthis._trace = [];\r\n\t\tthis._mouseDown = true;\r\n\t\tconst { x, y } = this._getScrollPosition(this._timeline);\r\n\t\tthis._scrollState = { x, y };\r\n\t\tthis._startPoint = { x: event.clientX, y: event.clientY };\r\n\t\tthis._trace.push(this._startPoint);\r\n\t}\r\n}","import { EventsManager } from \"./eventsManager\";\r\nexport default function(gantt: any){\r\n\tif (!gantt.ext){\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tgantt.ext.dragTimeline = {\r\n\t\tcreate: () => EventsManager.create(gantt)\r\n\t};\r\n\r\n\tgantt.config.drag_timeline = {\r\n\t\tenabled: true\r\n\t};\r\n}","import * as eventable from \"../../utils/eventable\";\r\nimport { isEventable } from \"../../utils/helpers\";\r\n\r\nexport interface ISelectedRegionConfig {\r\n\tclassName?: string;\r\n\trender?: (startPoint: IPoint, endPoint: IPoint) => HTMLElement;\r\n\tviewPort?: HTMLElement;\r\n\tuseRequestAnimationFrame: boolean;\r\n\tcallback?: (startPoint: IPoint, endPoint: IPoint, startDate: Date, endDate: Date, tasksByDate: any[], tasksByIndex: any[]) => void;\r\n\tsingleRow: boolean;\r\n}\r\n\r\ninterface ICoordinates {\r\n\tleft: number;\r\n\ttop: number;\r\n}\r\n\r\nexport interface IPoint {\r\n\tabsolute: ICoordinates;\r\n\trelative: ICoordinates;\r\n}\r\n\r\nexport class SelectedRegion {\r\n\trender: () => void;\r\n\tprivate _viewPort: HTMLElement & eventable;\r\n\tprivate _el: HTMLElement = document.createElement(\"div\");\r\n\tprivate _callback: (startPoint: IPoint, endPoint: IPoint, startDate: Date, endDate: Date, tasksByDate: any[], tasksByIndex: any[]) => void;\r\n\tprivate _startPoint: IPoint;\r\n\tprivate _endPoint: IPoint;\r\n\tprivate _positionPoint: IPoint;\r\n\tprivate _useRequestAnimationFrame: boolean;\r\n\tprivate _startDate: Date;\r\n\tprivate _endDate: Date;\r\n\tprivate _singleRow: boolean;\r\n\tprivate _gantt: any;\r\n\tprivate _view: any;\r\n\r\n\tconstructor(config: ISelectedRegionConfig, gantt: any, view: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._view = view;\r\n\t\tthis._viewPort = config.viewPort;\r\n\t\tthis._el.classList.add(config.className);\r\n\t\tif (typeof config.callback === \"function\") {\r\n\t\t\tthis._callback = config.callback;\r\n\t\t}\r\n\r\n\t\tthis.render = () => {\r\n\t\t\tlet node;\r\n\t\t\tif(config.render){\r\n\t\t\t\tnode = config.render(this._startPoint, this._endPoint);\r\n\t\t\t}else{\r\n\t\t\t\tnode = this.defaultRender(this._startPoint, this._endPoint);\r\n\t\t\t}\r\n\r\n\t\t\tif(node !== this._el){\r\n\t\t\t\tif(this._el && this._el.parentNode){\r\n\t\t\t\t\tthis._el.parentNode.removeChild(this._el);\r\n\t\t\t\t}\r\n\t\t\t\tthis._el = node;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.className !== \"\") {\r\n\t\t\t\tthis._el.classList.add(config.className);\r\n\t\t\t}\r\n\t\t\tthis.draw();\r\n\t\t};\r\n\r\n\t\tif (!isEventable(this._viewPort)) {\r\n\t\t\teventable(this._viewPort);\r\n\t\t}\r\n\t\tthis._singleRow = config.singleRow;\r\n\t\tthis._useRequestAnimationFrame = config.useRequestAnimationFrame;\r\n\t}\r\n\r\n\tdefaultRender = (start: IPoint, end: IPoint) => {\r\n\t\tif(!this._el){\r\n\t\t\tthis._el = document.createElement(\"div\");\r\n\t\t}\r\n\t\tconst node = this._el;\r\n\t\t// const gantt = this._gantt;\r\n\r\n\t\tconst top = Math.min(start.relative.top, end.relative.top);\r\n\t\tconst bottom = Math.max(start.relative.top, end.relative.top);\r\n\t\tconst left = Math.min(start.relative.left, end.relative.left);\r\n\t\tconst right = Math.max(start.relative.left, end.relative.left);\r\n\r\n\t\tif (this._singleRow) {\r\n\t\t\tconst pos = this._getTaskPositionByTop(this._startPoint.relative.top);\r\n\t\t\tnode.style.height = pos.height + \"px\";\r\n\t\t\tnode.style.top = pos.top + \"px\";\r\n\t\t} else {\r\n\t\t\tnode.style.height = Math.abs(bottom - top) + \"px\";\r\n\t\t\tnode.style.top = top + \"px\";\r\n\t\t}\r\n\t\tnode.style.width = Math.abs(right - left) + \"px\";\r\n\t\tnode.style.left = left + \"px\";\r\n\t\treturn node;\r\n\t}\r\n\r\n\tdraw() {\r\n\t\tif (this._useRequestAnimationFrame) {\r\n\t\t\treturn requestAnimationFrame(() => {\r\n\t\t\t\tthis._viewPort.appendChild(this.getElement());\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._viewPort.appendChild(this.getElement());\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tif (this._useRequestAnimationFrame) {\r\n\t\t\treturn requestAnimationFrame(() => {\r\n\t\t\t\tif (!this._el.parentNode) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis._viewPort.removeChild(this._el);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (!this._el.parentNode) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._viewPort.removeChild(this._el);\r\n\t\t}\r\n\t}\r\n\r\n\tgetElement() {\r\n\t\treturn this._el;\r\n\t}\r\n\r\n\tgetViewPort() {\r\n\t\treturn this._viewPort;\r\n\t}\r\n\r\n\tsetStart(startPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._startPoint = startPoint;\r\n\t\tthis._startDate = gantt.dateFromPos(this._startPoint.relative.left);\r\n\t\tthis._viewPort.callEvent(\"onBeforeDrag\", [this._startPoint]);\r\n\t}\r\n\r\n\tsetEnd(endPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._endPoint = endPoint;\r\n\t\tif (this._singleRow) {\r\n\t\t\tconst pos = this._getTaskPositionByTop(this._startPoint.relative.top);\r\n\t\t\tthis._endPoint.relative.top = pos.top;\r\n\t\t}\r\n\t\tthis._endDate = gantt.dateFromPos(this._endPoint.relative.left);\r\n\t\tif (this._startPoint.relative.left > this._endPoint.relative.left) {\r\n\t\t\tthis._positionPoint = {\r\n\t\t\t\trelative: { left: this._endPoint.relative.left, top: this._positionPoint.relative.top },\r\n\t\t\t\tabsolute: { left: this._endPoint.absolute.left, top: this._positionPoint.absolute.top }\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (this._startPoint.relative.top > this._endPoint.relative.top) {\r\n\t\t\tthis._positionPoint = {\r\n\t\t\t\trelative: { left: this._positionPoint.relative.left, top: this._endPoint.relative.top },\r\n\t\t\t\tabsolute: { left: this._positionPoint.absolute.left, top: this._endPoint.absolute.top }\r\n\t\t\t};\r\n\t\t}\r\n\r\n\r\n\t\tthis._viewPort.callEvent(\"onDrag\", [this._startPoint, this._endPoint]);\r\n\t}\r\n\r\n\tsetPosition(positionPoint: IPoint) {\r\n\t\tthis._positionPoint = positionPoint;\r\n\t}\r\n\r\n\tdragEnd(endPoint: IPoint) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tif(endPoint.relative.left < 0){\r\n\t\t\tendPoint.relative.left = 0;\r\n\t\t}\r\n\t\tthis._viewPort.callEvent(\"onBeforeDragEnd\", [this._startPoint, endPoint]);\r\n\t\tthis.setEnd(endPoint);\r\n\t\t// GS-1422. The endDate can be null if we drag the mouse outside the Gantt container\r\n\t\tthis._endDate = this._endDate || gantt.getState().max_date;\r\n\r\n\t\tif (this._startDate.valueOf() > this._endDate.valueOf()) {\r\n\t\t\t[ this._startDate, this._endDate ] = [ this._endDate, this._startDate ];\r\n\t\t}\r\n\t\tthis.clear();\r\n\t\tconst tasksByTime = gantt.getTaskByTime(this._startDate, this._endDate);\r\n\t\tconst tasksByIndex = this._getTasksByTop(this._startPoint.relative.top, this._endPoint.relative.top);\r\n\r\n\t\tthis._viewPort.callEvent(\"onDragEnd\", [this._startPoint, this._endPoint]);\r\n\t\tif (this._callback) {\r\n\t\t\tthis._callback(this._startPoint, this._endPoint, this._startDate, this._endDate, tasksByTime, tasksByIndex);\r\n\t\t}\r\n\t}\r\n\r\n\tgetInBounds() {\r\n\t\treturn this._singleRow;\r\n\t}\r\n\r\n\tprivate _getTasksByTop(start: number, end:number) {\r\n\t\tconst gantt = this._gantt;\r\n\t\tlet startValue = start;\r\n\t\tlet endValue = end;\r\n\t\tif (start > end) {\r\n\t\t\tstartValue = end;\r\n\t\t\tendValue = start;\r\n\t\t}\r\n\t\tconst startIndex = this._getTaskPositionByTop(startValue).index;\r\n\t\tconst endIndex = this._getTaskPositionByTop(endValue).index;\r\n\t\tconst result = [];\r\n\t\tfor (let i = startIndex; i <= endIndex; i++) {\r\n\t\t\tconst task = gantt.getTaskByIndex(i);\r\n\t\t\tif (task) {\r\n\t\t\t\tresult.push(gantt.getTaskByIndex(i));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate _getTaskPositionByTop(top: number){\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst view = this._view;\r\n\t\tconst index = view.getItemIndexByTopPosition(top);\r\n\t\tconst task = gantt.getTaskByIndex(index);\r\n\t\tif(task){\r\n\t\t\tconst height = view.getItemHeight(task.id);\r\n\t\t\tconst itemTop = view.getItemTop(task.id);\r\n\t\t\treturn {\r\n\t\t\t\ttop: itemTop || 0,\r\n\t\t\t\theight: height || 0,\r\n\t\t\t\tindex,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tconst dataHeight = view.getTotalHeight();\r\n\t\t\treturn {\r\n\t\t\t\ttop: top > dataHeight ? dataHeight : 0,\r\n\t\t\t\theight: gantt.config.row_height,\r\n\t\t\t\tindex: top > dataHeight ? gantt.getTaskCount() : 0,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}","import * as domHelpers from \"../../core/ui/utils/dom_helpers\";\r\nimport { SelectedRegion } from \"./selectedRegion\";\r\n\r\nexport class EventsManager {\r\n\tprivate _mouseDown: boolean = false;\r\n\tprivate _domEvents: any;\r\n\tprivate _originPosition: string;\r\n\tprivate _gantt: any;\r\n\tprivate _restoreOriginPosition: () => void;\r\n\tconstructor(gantt: any) {\r\n\t\tthis._gantt = gantt;\r\n\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t}\r\n\r\n\tattach(selectedRegion: SelectedRegion, useKey?: \"shiftKey\" | \"ctrlKey\" | \"altKey\", ignore?: any): void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tconst _target = selectedRegion.getViewPort();\r\n\t\tthis._originPosition = window.getComputedStyle(_target).display;\r\n\t\tthis._restoreOriginPosition = () => {\r\n\t\t\t_target.style.position = this._originPosition;\r\n\t\t};\r\n\t\tif (this._originPosition === \"static\") {\r\n\t\t\t_target.style.position = \"relative\";\r\n\t\t}\r\n\t\tconst state = gantt.$services.getService(\"state\");\r\n\t\tstate.registerProvider(\"clickDrag\", () => {\r\n\t\t\tconst result = { autoscroll: false };\r\n\t\t\treturn result;\r\n\t\t});\r\n\r\n\r\n\t\tlet scheduledDndCoordinates = null;\r\n\t\tconst startDragAndDrop = () => {\r\n\t\t\tif (!scheduledDndCoordinates) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._mouseDown = true;\r\n\t\t\tselectedRegion.setStart(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tselectedRegion.setPosition(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tselectedRegion.setEnd(gantt.copy(scheduledDndCoordinates));\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t};\r\n\r\n\t\tthis._domEvents.attach(_target, \"mousedown\", (event) => {\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t\tlet filterTargets = \".gantt_task_line, .gantt_task_link\";\r\n\t\t\tif (ignore !== undefined) {\r\n\t\t\t\tif (ignore instanceof Array) {\r\n\t\t\t\t\tfilterTargets = ignore.join(\", \");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfilterTargets = ignore;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (filterTargets) {\r\n\t\t\t\tif (gantt.utils.dom.closest(event.target, filterTargets)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstate.registerProvider(\"clickDrag\", () => {\r\n\t\t\t\tconst result = { autoscroll: this._mouseDown };\r\n\t\t\t\treturn result;\r\n\t\t\t});\r\n\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\tscheduledDndCoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t});\r\n\t\tconst eventElement = domHelpers.getRootNode(gantt.$root) || document.body;\r\n\t\tthis._domEvents.attach(eventElement, \"mouseup\", (event) => {\r\n\t\t\tscheduledDndCoordinates = null;\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tthis._mouseDown = false;\r\n\t\t\t\tconst coordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tselectedRegion.dragEnd(coordinates);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._domEvents.attach(_target, \"mousemove\", (event) => {\r\n\t\t\tif (useKey && event[useKey] !== true) { return; }\r\n\t\t\t// GS-854. If we don't have useKey for the click_drag extension,\r\n\t\t\t// check the drag_timeline to not simultaneously use both extensions\r\n\t\t\tconst dragTimeline = this._gantt.ext.clickDrag;\r\n\t\t\tconst dragTimelineUseKey = (this._gantt.config.drag_timeline || {}).useKey;\r\n\t\t\tif (dragTimeline && dragTimelineUseKey) {\r\n\t\t\t\tif (!useKey && event[dragTimelineUseKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet coordinates = null;\r\n\t\t\tif(!this._mouseDown && scheduledDndCoordinates){\r\n\t\t\t\tcoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tif(Math.abs(scheduledDndCoordinates.relative.left - coordinates.relative.left) > 5){\r\n\t\t\t\t\t// add small threshold not to start dnd on simple click\r\n\t\t\t\t\tstartDragAndDrop();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._mouseDown === true) {\r\n\t\t\t\tcoordinates = this._getCoordinates(event, selectedRegion);\r\n\t\t\t\tselectedRegion.setEnd(coordinates);\r\n\t\t\t\tselectedRegion.render();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdetach(): void {\r\n\t\tconst gantt = this._gantt;\r\n\t\tthis._domEvents.detachAll();\r\n\t\tif(this._restoreOriginPosition){\r\n\t\t\tthis._restoreOriginPosition();\r\n\t\t}\r\n\r\n\t\tconst state = gantt.$services.getService(\"state\");\r\n\t\tstate.unregisterProvider(\"clickDrag\");\r\n\t}\r\n\r\n\tdestructor(): void {\r\n\t\tthis.detach();\r\n\t}\r\n\r\n\tprivate _getCoordinates(event: MouseEvent, selectedRegion: SelectedRegion) {\r\n\t\tconst viewPort = selectedRegion.getViewPort();\r\n\t\tconst viewPortBounds = viewPort.getBoundingClientRect();\r\n\t\tconst { clientX, clientY } = event;\r\n\t\tconst result = {\r\n\t\t\tabsolute: {\r\n\t\t\t\tleft: clientX,\r\n\t\t\t\ttop: clientY,\r\n\t\t\t},\r\n\t\t\trelative: {\r\n\t\t\t\tleft: clientX - viewPortBounds.left + viewPort.scrollLeft,\r\n\t\t\t\ttop: clientY - viewPortBounds.top + viewPort.scrollTop\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn result;\r\n\t}\r\n}","import { EventsManager } from \"./eventsManager\";\r\nimport { ISelectedRegionConfig, SelectedRegion } from \"./selectedRegion\";\r\n\r\nexport default function(gantt: any){\r\n\tif (!gantt.ext) {\r\n\t\tgantt.ext = {};\r\n\t}\r\n\r\n\tconst defaultConfig: ISelectedRegionConfig = {\r\n\t\tclassName: \"gantt_click_drag_rect\",\r\n\t\tuseRequestAnimationFrame: true,\r\n\t\tcallback: undefined,\r\n\t\tsingleRow: false\r\n\t};\r\n\r\n\tconst eventsManager = new EventsManager(gantt);\r\n\r\n\tgantt.ext.clickDrag = eventsManager;\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", () => {\r\n\t\tconst config: ISelectedRegionConfig = { viewPort: gantt.$task_data, ...defaultConfig };\r\n\t\tif (gantt.config.click_drag){\r\n\t\t\tconst clickDrag = gantt.config.click_drag;\r\n\t\t\tconfig.render = clickDrag.render || defaultConfig.render;\r\n\t\t\tconfig.className = clickDrag.className || defaultConfig.className;\r\n\t\t\tconfig.callback = clickDrag.callback || defaultConfig.callback;\r\n\t\t\tconfig.viewPort = clickDrag.viewPort || gantt.$task_data;\r\n\t\t\tconfig.useRequestAnimationFrame = clickDrag.useRequestAnimationFrame === undefined ?\r\n\t\t\t\tdefaultConfig.useRequestAnimationFrame : clickDrag.useRequestAnimationFrame;\r\n\r\n\t\t\tconfig.singleRow = clickDrag.singleRow === undefined ? defaultConfig.singleRow : clickDrag.singleRow;\r\n\t\t\tconst timeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\tconst selectedRegion = new SelectedRegion(config, gantt, timeline);\r\n\t\t\tgantt.ext.clickDrag.attach(selectedRegion, clickDrag.useKey, clickDrag.ignore);\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", () => {\r\n\t\teventsManager.destructor();\r\n\t});\r\n\r\n}","\r\nimport click_drag from \"./click_drag\";\r\nimport drag_timeline from \"./drag_timeline\";\r\nimport fullscreen from \"./fullscreen\";\r\nimport * as keyboard_navigation from \"./keyboard_navigation\";\r\nimport * as marker from \"./marker\";\r\nimport * as multiselect from \"./multiselect\";\r\nimport quick_info from \"./quick_info\";\r\nimport tooltip from \"./tooltip\";\r\nimport undo from \"./undo\";\r\n\r\nexport default {\r\n\tclick_drag,\r\n\tdrag_timeline,\r\n\tfullscreen,\r\n\tkeyboard_navigation,\r\n\tquick_info,\r\n\ttooltip,\r\n\tundo,\r\n\tmarker,\r\n\tmultiselect,\r\n};","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface Compat<T> {\n  _delegate: T;\n}\n\nexport function getModularInstance<ExpService>(\n  service: Compat<ExpService> | ExpService\n): ExpService {\n  if (service && (service as Compat<ExpService>)._delegate) {\n    return (service as Compat<ExpService>)._delegate;\n  } else {\n    return service as ExpService;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\n */\n\nexport const CONSTANTS = {\n  /**\n   * @define {boolean} Whether this is the client Node.js SDK.\n   */\n  NODE_CLIENT: false,\n  /**\n   * @define {boolean} Whether this is the Admin Node.js SDK.\n   */\n  NODE_ADMIN: false,\n\n  /**\n   * Firebase SDK Version\n   */\n  SDK_VERSION: '${JSCORE_VERSION}'\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Throws an error if the provided assertion is falsy\n */\nexport const assert = function (assertion: unknown, message: string): void {\n  if (!assertion) {\n    throw assertionError(message);\n  }\n};\n\n/**\n * Returns an Error object suitable for throwing.\n */\nexport const assertionError = function (message: string): Error {\n  return new Error(\n    'Firebase Database (' +\n      CONSTANTS.SDK_VERSION +\n      ') INTERNAL ASSERT FAILED: ' +\n      message\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst stringToByteArray = function (str: string): number[] {\n  // TODO(user): Use native implementations if/when available\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (\n      (c & 0xfc00) === 0xd800 &&\n      i + 1 < str.length &&\n      (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00\n    ) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Turns an array of numbers into the string given by the concatenation of the\n * characters to which the numbers correspond.\n * @param bytes Array of numbers representing characters.\n * @return Stringification of the array.\n */\nconst byteArrayToString = function (bytes: number[]): string {\n  // TODO(user): Use native implementations if/when available\n  const out: string[] = [];\n  let pos = 0,\n    c = 0;\n  while (pos < bytes.length) {\n    const c1 = bytes[pos++];\n    if (c1 < 128) {\n      out[c++] = String.fromCharCode(c1);\n    } else if (c1 > 191 && c1 < 224) {\n      const c2 = bytes[pos++];\n      out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n    } else if (c1 > 239 && c1 < 365) {\n      // Surrogate Pair\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      const c4 = bytes[pos++];\n      const u =\n        (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\n        0x10000;\n      out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n      out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n    } else {\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      out[c++] = String.fromCharCode(\n        ((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)\n      );\n    }\n  }\n  return out.join('');\n};\n\ninterface Base64 {\n  byteToCharMap_: { [key: number]: string } | null;\n  charToByteMap_: { [key: string]: number } | null;\n  byteToCharMapWebSafe_: { [key: number]: string } | null;\n  charToByteMapWebSafe_: { [key: string]: number } | null;\n  ENCODED_VALS_BASE: string;\n  readonly ENCODED_VALS: string;\n  readonly ENCODED_VALS_WEBSAFE: string;\n  HAS_NATIVE_SUPPORT: boolean;\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string;\n  encodeString(input: string, webSafe?: boolean): string;\n  decodeString(input: string, webSafe: boolean): string;\n  decodeStringToByteArray(input: string, webSafe: boolean): number[];\n  init_(): void;\n}\n\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\n// Static lookup maps, lazily populated by init_()\nexport const base64: Base64 = {\n  /**\n   * Maps bytes to characters.\n   */\n  byteToCharMap_: null,\n\n  /**\n   * Maps characters to bytes.\n   */\n  charToByteMap_: null,\n\n  /**\n   * Maps bytes to websafe characters.\n   * @private\n   */\n  byteToCharMapWebSafe_: null,\n\n  /**\n   * Maps websafe characters to bytes.\n   * @private\n   */\n  charToByteMapWebSafe_: null,\n\n  /**\n   * Our default alphabet, shared between\n   * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n   */\n  ENCODED_VALS_BASE:\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n\n  /**\n   * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n   */\n  get ENCODED_VALS() {\n    return this.ENCODED_VALS_BASE + '+/=';\n  },\n\n  /**\n   * Our websafe alphabet.\n   */\n  get ENCODED_VALS_WEBSAFE() {\n    return this.ENCODED_VALS_BASE + '-_.';\n  },\n\n  /**\n   * Whether this browser supports the atob and btoa functions. This extension\n   * started at Mozilla but is now implemented by many browsers. We use the\n   * ASSUME_* variables to avoid pulling in the full useragent detection library\n   * but still allowing the standard per-browser compilations.\n   *\n   */\n  HAS_NATIVE_SUPPORT: typeof atob === 'function',\n\n  /**\n   * Base64-encode an array of bytes.\n   *\n   * @param input An array of bytes (numbers with\n   *     value in [0, 255]) to encode.\n   * @param webSafe Boolean indicating we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string {\n    if (!Array.isArray(input)) {\n      throw Error('encodeByteArray takes an array as a parameter');\n    }\n\n    this.init_();\n\n    const byteToCharMap = webSafe\n      ? this.byteToCharMapWebSafe_!\n      : this.byteToCharMap_!;\n\n    const output = [];\n\n    for (let i = 0; i < input.length; i += 3) {\n      const byte1 = input[i];\n      const haveByte2 = i + 1 < input.length;\n      const byte2 = haveByte2 ? input[i + 1] : 0;\n      const haveByte3 = i + 2 < input.length;\n      const byte3 = haveByte3 ? input[i + 2] : 0;\n\n      const outByte1 = byte1 >> 2;\n      const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n      let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\n      let outByte4 = byte3 & 0x3f;\n\n      if (!haveByte3) {\n        outByte4 = 64;\n\n        if (!haveByte2) {\n          outByte3 = 64;\n        }\n      }\n\n      output.push(\n        byteToCharMap[outByte1],\n        byteToCharMap[outByte2],\n        byteToCharMap[outByte3],\n        byteToCharMap[outByte4]\n      );\n    }\n\n    return output.join('');\n  },\n\n  /**\n   * Base64-encode a string.\n   *\n   * @param input A string to encode.\n   * @param webSafe If true, we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeString(input: string, webSafe?: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return btoa(input);\n    }\n    return this.encodeByteArray(stringToByteArray(input), webSafe);\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * @param input to decode.\n   * @param webSafe True if we should use the\n   *     alternative alphabet.\n   * @return string representing the decoded value.\n   */\n  decodeString(input: string, webSafe: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return atob(input);\n    }\n    return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * In base-64 decoding, groups of four characters are converted into three\n   * bytes.  If the encoder did not apply padding, the input length may not\n   * be a multiple of 4.\n   *\n   * In this case, the last group will have fewer than 4 characters, and\n   * padding will be inferred.  If the group has one or two characters, it decodes\n   * to one byte.  If the group has three characters, it decodes to two bytes.\n   *\n   * @param input Input to decode.\n   * @param webSafe True if we should use the web-safe alphabet.\n   * @return bytes representing the decoded value.\n   */\n  decodeStringToByteArray(input: string, webSafe: boolean): number[] {\n    this.init_();\n\n    const charToByteMap = webSafe\n      ? this.charToByteMapWebSafe_!\n      : this.charToByteMap_!;\n\n    const output: number[] = [];\n\n    for (let i = 0; i < input.length; ) {\n      const byte1 = charToByteMap[input.charAt(i++)];\n\n      const haveByte2 = i < input.length;\n      const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n      ++i;\n\n      const haveByte3 = i < input.length;\n      const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      const haveByte4 = i < input.length;\n      const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n        throw new DecodeBase64StringError();\n      }\n\n      const outByte1 = (byte1 << 2) | (byte2 >> 4);\n      output.push(outByte1);\n\n      if (byte3 !== 64) {\n        const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\n        output.push(outByte2);\n\n        if (byte4 !== 64) {\n          const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\n          output.push(outByte3);\n        }\n      }\n    }\n\n    return output;\n  },\n\n  /**\n   * Lazy static initialization function. Called before\n   * accessing any of the static map variables.\n   * @private\n   */\n  init_() {\n    if (!this.byteToCharMap_) {\n      this.byteToCharMap_ = {};\n      this.charToByteMap_ = {};\n      this.byteToCharMapWebSafe_ = {};\n      this.charToByteMapWebSafe_ = {};\n\n      // We want quick mappings back and forth, so we precompute two maps.\n      for (let i = 0; i < this.ENCODED_VALS.length; i++) {\n        this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n        this.charToByteMap_[this.byteToCharMap_[i]] = i;\n        this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n        this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\n\n        // Be forgiving when decoding and correctly decode both encodings.\n        if (i >= this.ENCODED_VALS_BASE.length) {\n          this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n          this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n        }\n      }\n    }\n  }\n};\n\n/**\n * An error encountered while decoding base64 string.\n */\nexport class DecodeBase64StringError extends Error {\n  readonly name = 'DecodeBase64StringError';\n}\n\n/**\n * URL-safe base64 encoding\n */\nexport const base64Encode = function (str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  return base64.encodeByteArray(utf8Bytes, true);\n};\n\n/**\n * URL-safe base64 encoding (without \".\" padding in the end).\n * e.g. Used in JSON Web Token (JWT) parts.\n */\nexport const base64urlEncodeWithoutPadding = function (str: string): string {\n  // Use base64url encoding and remove padding in the end (dot characters).\n  return base64Encode(str).replace(/\\./g, '');\n};\n\n/**\n * URL-safe base64 decoding\n *\n * NOTE: DO NOT use the global atob() function - it does NOT support the\n * base64Url variant encoding.\n *\n * @param str To be decoded\n * @return Decoded result, if possible\n */\nexport const base64Decode = function (str: string): string | null {\n  try {\n    return base64.decodeString(str, true);\n  } catch (e) {\n    console.error('base64Decode failed: ', e);\n  }\n  return null;\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Do a deep-copy of basic JavaScript Objects or Arrays.\n */\nexport function deepCopy<T>(value: T): T {\n  return deepExtend(undefined, value) as T;\n}\n\n/**\n * Copy properties from source to target (recursively allows extension\n * of Objects and Arrays).  Scalar values in the target are over-written.\n * If target is undefined, an object of the appropriate type will be created\n * (and returned).\n *\n * We recursively copy all child properties of plain Objects in the source- so\n * that namespace- like dictionaries are merged.\n *\n * Note that the target can be a function, in which case the properties in\n * the source Object are copied onto it as static properties of the Function.\n *\n * Note: we don't merge __proto__ to prevent prototype pollution\n */\nexport function deepExtend(target: unknown, source: unknown): unknown {\n  if (!(source instanceof Object)) {\n    return source;\n  }\n\n  switch (source.constructor) {\n    case Date:\n      // Treat Dates like scalars; if the target date object had any child\n      // properties - they will be lost!\n      const dateValue = source as Date;\n      return new Date(dateValue.getTime());\n\n    case Object:\n      if (target === undefined) {\n        target = {};\n      }\n      break;\n    case Array:\n      // Always copy the array source and overwrite the target.\n      target = [];\n      break;\n\n    default:\n      // Not a plain Object - treat it as a scalar.\n      return source;\n  }\n\n  for (const prop in source) {\n    // use isValidKey to guard against prototype pollution. See https://snyk.io/vuln/SNYK-JS-LODASH-450202\n    if (!source.hasOwnProperty(prop) || !isValidKey(prop)) {\n      continue;\n    }\n    (target as Record<string, unknown>)[prop] = deepExtend(\n      (target as Record<string, unknown>)[prop],\n      (source as Record<string, unknown>)[prop]\n    );\n  }\n\n  return target;\n}\n\nfunction isValidKey(key: string): boolean {\n  return key !== '__proto__';\n}\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Polyfill for `globalThis` object.\n * @returns the `globalThis` object for the given environment.\n * @public\n */\nexport function getGlobal(): typeof globalThis {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('Unable to locate global object.');\n}\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { getGlobal } from './global';\n\n/**\n * Keys for experimental properties on the `FirebaseDefaults` object.\n * @public\n */\nexport type ExperimentalKey = 'authTokenSyncURL' | 'authIdTokenMaxAge';\n\n/**\n * An object that can be injected into the environment as __FIREBASE_DEFAULTS__,\n * either as a property of globalThis, a shell environment variable, or a\n * cookie.\n *\n * This object can be used to automatically configure and initialize\n * a Firebase app as well as any emulators.\n *\n * @public\n */\nexport interface FirebaseDefaults {\n  config?: Record<string, string>;\n  emulatorHosts?: Record<string, string>;\n  _authTokenSyncURL?: string;\n  _authIdTokenMaxAge?: number;\n  /**\n   * Override Firebase's runtime environment detection and\n   * force the SDK to act as if it were in the specified environment.\n   */\n  forceEnvironment?: 'browser' | 'node';\n  [key: string]: unknown;\n}\n\ndeclare global {\n  // Need `var` for this to work.\n  // eslint-disable-next-line no-var\n  var __FIREBASE_DEFAULTS__: FirebaseDefaults | undefined;\n}\n\nconst getDefaultsFromGlobal = (): FirebaseDefaults | undefined =>\n  getGlobal().__FIREBASE_DEFAULTS__;\n\n/**\n * Attempt to read defaults from a JSON string provided to\n * process(.)env(.)__FIREBASE_DEFAULTS__ or a JSON file whose path is in\n * process(.)env(.)__FIREBASE_DEFAULTS_PATH__\n * The dots are in parens because certain compilers (Vite?) cannot\n * handle seeing that variable in comments.\n * See https://github.com/firebase/firebase-js-sdk/issues/6838\n */\nconst getDefaultsFromEnvVariable = (): FirebaseDefaults | undefined => {\n  if (typeof process === 'undefined' || typeof process.env === 'undefined') {\n    return;\n  }\n  const defaultsJsonString = process.env.__FIREBASE_DEFAULTS__;\n  if (defaultsJsonString) {\n    return JSON.parse(defaultsJsonString);\n  }\n};\n\nconst getDefaultsFromCookie = (): FirebaseDefaults | undefined => {\n  if (typeof document === 'undefined') {\n    return;\n  }\n  let match;\n  try {\n    match = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);\n  } catch (e) {\n    // Some environments such as Angular Universal SSR have a\n    // `document` object but error on accessing `document.cookie`.\n    return;\n  }\n  const decoded = match && base64Decode(match[1]);\n  return decoded && JSON.parse(decoded);\n};\n\n/**\n * Get the __FIREBASE_DEFAULTS__ object. It checks in order:\n * (1) if such an object exists as a property of `globalThis`\n * (2) if such an object was provided on a shell environment variable\n * (3) if such an object exists in a cookie\n * @public\n */\nexport const getDefaults = (): FirebaseDefaults | undefined => {\n  try {\n    return (\n      getDefaultsFromGlobal() ||\n      getDefaultsFromEnvVariable() ||\n      getDefaultsFromCookie()\n    );\n  } catch (e) {\n    /**\n     * Catch-all for being unable to get __FIREBASE_DEFAULTS__ due\n     * to any environment case we have not accounted for. Log to\n     * info instead of swallowing so we can find these unknown cases\n     * and add paths for them if needed.\n     */\n    console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);\n    return;\n  }\n};\n\n/**\n * Returns emulator host stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a URL host formatted like `127.0.0.1:9999` or `[::1]:4000` if available\n * @public\n */\nexport const getDefaultEmulatorHost = (\n  productName: string\n): string | undefined => getDefaults()?.emulatorHosts?.[productName];\n\n/**\n * Returns emulator hostname and port stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a pair of hostname and port like `[\"::1\", 4000]` if available\n * @public\n */\nexport const getDefaultEmulatorHostnameAndPort = (\n  productName: string\n): [hostname: string, port: number] | undefined => {\n  const host = getDefaultEmulatorHost(productName);\n  if (!host) {\n    return undefined;\n  }\n  const separatorIndex = host.lastIndexOf(':'); // Finding the last since IPv6 addr also has colons.\n  if (separatorIndex <= 0 || separatorIndex + 1 === host.length) {\n    throw new Error(`Invalid host ${host} with no separate hostname and port!`);\n  }\n  // eslint-disable-next-line no-restricted-globals\n  const port = parseInt(host.substring(separatorIndex + 1), 10);\n  if (host[0] === '[') {\n    // Bracket-quoted `[ipv6addr]:port` => return \"ipv6addr\" (without brackets).\n    return [host.substring(1, separatorIndex - 1), port];\n  } else {\n    return [host.substring(0, separatorIndex), port];\n  }\n};\n\n/**\n * Returns Firebase app config stored in the __FIREBASE_DEFAULTS__ object.\n * @public\n */\nexport const getDefaultAppConfig = (): Record<string, string> | undefined =>\n  getDefaults()?.config;\n\n/**\n * Returns an experimental setting on the __FIREBASE_DEFAULTS__ object (properties\n * prefixed by \"_\")\n * @public\n */\nexport const getExperimentalSetting = <T extends ExperimentalKey>(\n  name: T\n): FirebaseDefaults[`_${T}`] =>\n  getDefaults()?.[`_${name}`] as FirebaseDefaults[`_${T}`];\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class Deferred<R> {\n  promise: Promise<R>;\n  reject: (value?: unknown) => void = () => {};\n  resolve: (value?: unknown) => void = () => {};\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve as (value?: unknown) => void;\n      this.reject = reject as (value?: unknown) => void;\n    });\n  }\n\n  /**\n   * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\n   * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\n   * and returns a node-style callback which will resolve or reject the Deferred's promise.\n   */\n  wrapCallback(\n    callback?: (error?: unknown, value?: unknown) => void\n  ): (error: unknown, value?: unknown) => void {\n    return (error, value?) => {\n      if (error) {\n        this.reject(error);\n      } else {\n        this.resolve(value);\n      }\n      if (typeof callback === 'function') {\n        // Attaching noop handler just in case developer wasn't expecting\n        // promises\n        this.promise.catch(() => {});\n\n        // Some of our callbacks don't expect a value and our own tests\n        // assert that the parameter length is 1\n        if (callback.length === 1) {\n          callback(error);\n        } else {\n          callback(error, value);\n        }\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64urlEncodeWithoutPadding } from './crypt';\n\n// Firebase Auth tokens contain snake_case claims following the JWT standard / convention.\n/* eslint-disable camelcase */\n\nexport type FirebaseSignInProvider =\n  | 'custom'\n  | 'email'\n  | 'password'\n  | 'phone'\n  | 'anonymous'\n  | 'google.com'\n  | 'facebook.com'\n  | 'github.com'\n  | 'twitter.com'\n  | 'microsoft.com'\n  | 'apple.com';\n\ninterface FirebaseIdToken {\n  // Always set to https://securetoken.google.com/PROJECT_ID\n  iss: string;\n\n  // Always set to PROJECT_ID\n  aud: string;\n\n  // The user's unique ID\n  sub: string;\n\n  // The token issue time, in seconds since epoch\n  iat: number;\n\n  // The token expiry time, normally 'iat' + 3600\n  exp: number;\n\n  // The user's unique ID. Must be equal to 'sub'\n  user_id: string;\n\n  // The time the user authenticated, normally 'iat'\n  auth_time: number;\n\n  // The sign in provider, only set when the provider is 'anonymous'\n  provider_id?: 'anonymous';\n\n  // The user's primary email\n  email?: string;\n\n  // The user's email verification status\n  email_verified?: boolean;\n\n  // The user's primary phone number\n  phone_number?: string;\n\n  // The user's display name\n  name?: string;\n\n  // The user's profile photo URL\n  picture?: string;\n\n  // Information on all identities linked to this user\n  firebase: {\n    // The primary sign-in provider\n    sign_in_provider: FirebaseSignInProvider;\n\n    // A map of providers to the user's list of unique identifiers from\n    // each provider\n    identities?: { [provider in FirebaseSignInProvider]?: string[] };\n  };\n\n  // Custom claims set by the developer\n  [claim: string]: unknown;\n\n  uid?: never; // Try to catch a common mistake of \"uid\" (should be \"sub\" instead).\n}\n\nexport type EmulatorMockTokenOptions = ({ user_id: string } | { sub: string }) &\n  Partial<FirebaseIdToken>;\n\nexport function createMockUserToken(\n  token: EmulatorMockTokenOptions,\n  projectId?: string\n): string {\n  if (token.uid) {\n    throw new Error(\n      'The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.'\n    );\n  }\n  // Unsecured JWTs use \"none\" as the algorithm.\n  const header = {\n    alg: 'none',\n    type: 'JWT'\n  };\n\n  const project = projectId || 'demo-project';\n  const iat = token.iat || 0;\n  const sub = token.sub || token.user_id;\n  if (!sub) {\n    throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\n  }\n\n  const payload: FirebaseIdToken = {\n    // Set all required fields to decent defaults\n    iss: `https://securetoken.google.com/${project}`,\n    aud: project,\n    iat,\n    exp: iat + 3600,\n    auth_time: iat,\n    sub,\n    user_id: sub,\n    firebase: {\n      sign_in_provider: 'custom',\n      identities: {}\n    },\n\n    // Override with user options\n    ...token\n  };\n\n  // Unsecured JWTs use the empty string as a signature.\n  const signature = '';\n  return [\n    base64urlEncodeWithoutPadding(JSON.stringify(header)),\n    base64urlEncodeWithoutPadding(JSON.stringify(payload)),\n    signature\n  ].join('.');\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\nimport { getDefaults } from './defaults';\n\n/**\n * Returns navigator.userAgent string or '' if it's not defined.\n * @return user agent string\n */\nexport function getUA(): string {\n  if (\n    typeof navigator !== 'undefined' &&\n    typeof navigator['userAgent'] === 'string'\n  ) {\n    return navigator['userAgent'];\n  } else {\n    return '';\n  }\n}\n\n/**\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\n *\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\n * wait for a callback.\n */\nexport function isMobileCordova(): boolean {\n  return (\n    typeof window !== 'undefined' &&\n    // @ts-ignore Setting up an broadly applicable index signature for Window\n    // just to deal with this case would probably be a bad idea.\n    !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\n    /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())\n  );\n}\n\n/**\n * Detect Node.js.\n *\n * @return true if Node.js environment is detected or specified.\n */\n// Node detection logic from: https://github.com/iliakan/detect-node/\nexport function isNode(): boolean {\n  const forceEnvironment = getDefaults()?.forceEnvironment;\n  if (forceEnvironment === 'node') {\n    return true;\n  } else if (forceEnvironment === 'browser') {\n    return false;\n  }\n\n  try {\n    return (\n      Object.prototype.toString.call(global.process) === '[object process]'\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Detect Browser Environment\n */\nexport function isBrowser(): boolean {\n  return typeof self === 'object' && self.self === self;\n}\n\n/**\n * Detect browser extensions (Chrome and Firefox at least).\n */\ninterface BrowserRuntime {\n  id?: unknown;\n}\ndeclare const chrome: { runtime?: BrowserRuntime };\ndeclare const browser: { runtime?: BrowserRuntime };\nexport function isBrowserExtension(): boolean {\n  const runtime =\n    typeof chrome === 'object'\n      ? chrome.runtime\n      : typeof browser === 'object'\n      ? browser.runtime\n      : undefined;\n  return typeof runtime === 'object' && runtime.id !== undefined;\n}\n\n/**\n * Detect React Native.\n *\n * @return true if ReactNative environment is detected.\n */\nexport function isReactNative(): boolean {\n  return (\n    typeof navigator === 'object' && navigator['product'] === 'ReactNative'\n  );\n}\n\n/** Detects Electron apps. */\nexport function isElectron(): boolean {\n  return getUA().indexOf('Electron/') >= 0;\n}\n\n/** Detects Internet Explorer. */\nexport function isIE(): boolean {\n  const ua = getUA();\n  return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\n}\n\n/** Detects Universal Windows Platform apps. */\nexport function isUWP(): boolean {\n  return getUA().indexOf('MSAppHost/') >= 0;\n}\n\n/**\n * Detect whether the current SDK build is the Node version.\n *\n * @return true if it's the Node SDK build.\n */\nexport function isNodeSdk(): boolean {\n  return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n}\n\n/** Returns true if we are running in Safari. */\nexport function isSafari(): boolean {\n  return (\n    !isNode() &&\n    navigator.userAgent.includes('Safari') &&\n    !navigator.userAgent.includes('Chrome')\n  );\n}\n\n/**\n * This method checks if indexedDB is supported by current browser/service worker context\n * @return true if indexedDB is supported by current browser/service worker context\n */\nexport function isIndexedDBAvailable(): boolean {\n  try {\n    return typeof indexedDB === 'object';\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\n * if errors occur during the database open operation.\n *\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\n * private browsing)\n */\nexport function validateIndexedDBOpenable(): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    try {\n      let preExist: boolean = true;\n      const DB_CHECK_NAME =\n        'validate-browser-context-for-indexeddb-analytics-module';\n      const request = self.indexedDB.open(DB_CHECK_NAME);\n      request.onsuccess = () => {\n        request.result.close();\n        // delete database only when it doesn't pre-exist\n        if (!preExist) {\n          self.indexedDB.deleteDatabase(DB_CHECK_NAME);\n        }\n        resolve(true);\n      };\n      request.onupgradeneeded = () => {\n        preExist = false;\n      };\n\n      request.onerror = () => {\n        reject(request.error?.message || '');\n      };\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n\n/**\n *\n * This method checks whether cookie is enabled within current browser\n * @return true if cookie is enabled within current browser\n */\nexport function areCookiesEnabled(): boolean {\n  if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\n    return false;\n  }\n  return true;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Standardized Firebase Error.\n *\n * Usage:\n *\n *   // Typescript string literals for type-safe codes\n *   type Err =\n *     'unknown' |\n *     'object-not-found'\n *     ;\n *\n *   // Closure enum for type-safe error codes\n *   // at-enum {string}\n *   var Err = {\n *     UNKNOWN: 'unknown',\n *     OBJECT_NOT_FOUND: 'object-not-found',\n *   }\n *\n *   let errors: Map<Err, string> = {\n *     'generic-error': \"Unknown error\",\n *     'file-not-found': \"Could not find file: {$file}\",\n *   };\n *\n *   // Type-safe function - must pass a valid error code as param.\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\n *\n *   ...\n *   throw error.create(Err.GENERIC);\n *   ...\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\n *   ...\n *   // Service: Could not file file: foo.txt (service/file-not-found).\n *\n *   catch (e) {\n *     assert(e.message === \"Could not find file: foo.txt.\");\n *     if ((e as FirebaseError)?.code === 'service/file-not-found') {\n *       console.log(\"Could not read file: \" + e['file']);\n *     }\n *   }\n */\n\nexport type ErrorMap<ErrorCode extends string> = {\n  readonly [K in ErrorCode]: string;\n};\n\nconst ERROR_NAME = 'FirebaseError';\n\nexport interface StringLike {\n  toString(): string;\n}\n\nexport interface ErrorData {\n  [key: string]: unknown;\n}\n\n// Based on code from:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\nexport class FirebaseError extends Error {\n  /** The custom name for all FirebaseErrors. */\n  readonly name: string = ERROR_NAME;\n\n  constructor(\n    /** The error code for this error. */\n    readonly code: string,\n    message: string,\n    /** Custom data for this error. */\n    public customData?: Record<string, unknown>\n  ) {\n    super(message);\n\n    // Fix For ES5\n    // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    Object.setPrototypeOf(this, FirebaseError.prototype);\n\n    // Maintains proper stack trace for where our error was thrown.\n    // Only available on V8.\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ErrorFactory.prototype.create);\n    }\n  }\n}\n\nexport class ErrorFactory<\n  ErrorCode extends string,\n  ErrorParams extends { readonly [K in ErrorCode]?: ErrorData } = {}\n> {\n  constructor(\n    private readonly service: string,\n    private readonly serviceName: string,\n    private readonly errors: ErrorMap<ErrorCode>\n  ) {}\n\n  create<K extends ErrorCode>(\n    code: K,\n    ...data: K extends keyof ErrorParams ? [ErrorParams[K]] : []\n  ): FirebaseError {\n    const customData = (data[0] as ErrorData) || {};\n    const fullCode = `${this.service}/${code}`;\n    const template = this.errors[code];\n\n    const message = template ? replaceTemplate(template, customData) : 'Error';\n    // Service Name: Error message (service/code).\n    const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\n\n    const error = new FirebaseError(fullCode, fullMessage, customData);\n\n    return error;\n  }\n}\n\nfunction replaceTemplate(template: string, data: ErrorData): string {\n  return template.replace(PATTERN, (_, key) => {\n    const value = data[key];\n    return value != null ? String(value) : `<${key}?>`;\n  });\n}\n\nconst PATTERN = /\\{\\$([^}]+)}/g;\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Evaluates a JSON string into a javascript object.\n *\n * @param {string} str A string containing JSON.\n * @return {*} The javascript object representing the specified JSON.\n */\nexport function jsonEval(str: string): unknown {\n  return JSON.parse(str);\n}\n\n/**\n * Returns JSON representing a javascript object.\n * @param {*} data Javascript object to be stringified.\n * @return {string} The JSON contents of the object.\n */\nexport function stringify(data: unknown): string {\n  return JSON.stringify(data);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { jsonEval } from './json';\n\ninterface Claims {\n  [key: string]: {};\n}\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token into constituent parts.\n *\n * Notes:\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const decode = function (token: string): DecodedToken {\n  let header = {},\n    claims: Claims = {},\n    data = {},\n    signature = '';\n\n  try {\n    const parts = token.split('.');\n    header = jsonEval(base64Decode(parts[0]) || '') as object;\n    claims = jsonEval(base64Decode(parts[1]) || '') as Claims;\n    signature = parts[2];\n    data = claims['d'] || {};\n    delete claims['d'];\n  } catch (e) {}\n\n  return {\n    header,\n    claims,\n    data,\n    signature\n  };\n};\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidTimestamp = function (token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  const now: number = Math.floor(new Date().getTime() / 1000);\n  let validSince: number = 0,\n    validUntil: number = 0;\n\n  if (typeof claims === 'object') {\n    if (claims.hasOwnProperty('nbf')) {\n      validSince = claims['nbf'] as number;\n    } else if (claims.hasOwnProperty('iat')) {\n      validSince = claims['iat'] as number;\n    }\n\n    if (claims.hasOwnProperty('exp')) {\n      validUntil = claims['exp'] as number;\n    } else {\n      // token will expire after 24h by default\n      validUntil = validSince + 86400;\n    }\n  }\n\n  return (\n    !!now &&\n    !!validSince &&\n    !!validUntil &&\n    now >= validSince &&\n    now <= validUntil\n  );\n};\n\n/**\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\n *\n * Notes:\n * - May return null if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const issuedAtTime = function (token: string): number | null {\n  const claims: Claims = decode(token).claims;\n  if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\n    return claims['iat'] as number;\n  }\n  return null;\n};\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidFormat = function (token: string): boolean {\n  const decoded = decode(token),\n    claims = decoded.claims;\n\n  return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\n};\n\n/**\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isAdmin = function (token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  return typeof claims === 'object' && claims['admin'] === true;\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function contains<T extends object>(obj: T, key: string): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function safeGet<T extends object, K extends keyof T>(\n  obj: T,\n  key: K\n): T[K] | undefined {\n  if (Object.prototype.hasOwnProperty.call(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\nexport function isEmpty(obj: object): obj is {} {\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function map<K extends string, V, U>(\n  obj: { [key in K]: V },\n  fn: (value: V, key: K, obj: { [key in K]: V }) => U,\n  contextObj?: unknown\n): { [key in K]: U } {\n  const res: Partial<{ [key in K]: U }> = {};\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      res[key] = fn.call(contextObj, obj[key], key, obj);\n    }\n  }\n  return res as { [key in K]: U };\n}\n\n/**\n * Deep equal two objects. Support Arrays and Objects.\n */\nexport function deepEqual(a: object, b: object): boolean {\n  if (a === b) {\n    return true;\n  }\n\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  for (const k of aKeys) {\n    if (!bKeys.includes(k)) {\n      return false;\n    }\n\n    const aProp = (a as Record<string, unknown>)[k];\n    const bProp = (b as Record<string, unknown>)[k];\n    if (isObject(aProp) && isObject(bProp)) {\n      if (!deepEqual(aProp, bProp)) {\n        return false;\n      }\n    } else if (aProp !== bProp) {\n      return false;\n    }\n  }\n\n  for (const k of bKeys) {\n    if (!aKeys.includes(k)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isObject(thing: unknown): thing is object {\n  return thing !== null && typeof thing === 'object';\n}\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Deferred } from './deferred';\n\n/**\n * Rejects if the given promise doesn't resolve in timeInMS milliseconds.\n * @internal\n */\nexport function promiseWithTimeout<T>(\n  promise: Promise<T>,\n  timeInMS = 2000\n): Promise<T> {\n  const deferredPromise = new Deferred<T>();\n  setTimeout(() => deferredPromise.reject('timeout!'), timeInMS);\n  promise.then(deferredPromise.resolve, deferredPromise.reject);\n  return deferredPromise.promise;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\n * params object (e.g. {arg: 'val', arg2: 'val2'})\n * Note: You must prepend it with ? when adding it to a URL.\n */\nexport function querystring(querystringParams: {\n  [key: string]: string | number;\n}): string {\n  const params = [];\n  for (const [key, value] of Object.entries(querystringParams)) {\n    if (Array.isArray(value)) {\n      value.forEach(arrayVal => {\n        params.push(\n          encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal)\n        );\n      });\n    } else {\n      params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    }\n  }\n  return params.length ? '&' + params.join('&') : '';\n}\n\n/**\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\n * (e.g. {arg: 'val', arg2: 'val2'})\n */\nexport function querystringDecode(querystring: string): Record<string, string> {\n  const obj: Record<string, string> = {};\n  const tokens = querystring.replace(/^\\?/, '').split('&');\n\n  tokens.forEach(token => {\n    if (token) {\n      const [key, value] = token.split('=');\n      obj[decodeURIComponent(key)] = decodeURIComponent(value);\n    }\n  });\n  return obj;\n}\n\n/**\n * Extract the query string part of a URL, including the leading question mark (if present).\n */\nexport function extractQuerystring(url: string): string {\n  const queryStart = url.indexOf('?');\n  if (!queryStart) {\n    return '';\n  }\n  const fragmentStart = url.indexOf('#', queryStart);\n  return url.substring(\n    queryStart,\n    fragmentStart > 0 ? fragmentStart : undefined\n  );\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview SHA-1 cryptographic hash.\n * Variable names follow the notation in FIPS PUB 180-3:\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\n *\n * Usage:\n *   var sha1 = new sha1();\n *   sha1.update(bytes);\n *   var hash = sha1.digest();\n *\n * Performance:\n *   Chrome 23:   ~400 Mbit/s\n *   Firefox 16:  ~250 Mbit/s\n *\n */\n\n/**\n * SHA-1 cryptographic hash constructor.\n *\n * The properties declared here are discussed in the above algorithm document.\n * @constructor\n * @final\n * @struct\n */\nexport class Sha1 {\n  /**\n   * Holds the previous values of accumulated variables a-e in the compress_\n   * function.\n   * @private\n   */\n  private chain_: number[] = [];\n\n  /**\n   * A buffer holding the partially computed hash result.\n   * @private\n   */\n  private buf_: number[] = [];\n\n  /**\n   * An array of 80 bytes, each a part of the message to be hashed.  Referred to\n   * as the message schedule in the docs.\n   * @private\n   */\n  private W_: number[] = [];\n\n  /**\n   * Contains data needed to pad messages less than 64 bytes.\n   * @private\n   */\n  private pad_: number[] = [];\n\n  /**\n   * @private {number}\n   */\n  private inbuf_: number = 0;\n\n  /**\n   * @private {number}\n   */\n  private total_: number = 0;\n\n  blockSize: number;\n\n  constructor() {\n    this.blockSize = 512 / 8;\n\n    this.pad_[0] = 128;\n    for (let i = 1; i < this.blockSize; ++i) {\n      this.pad_[i] = 0;\n    }\n\n    this.reset();\n  }\n\n  reset(): void {\n    this.chain_[0] = 0x67452301;\n    this.chain_[1] = 0xefcdab89;\n    this.chain_[2] = 0x98badcfe;\n    this.chain_[3] = 0x10325476;\n    this.chain_[4] = 0xc3d2e1f0;\n\n    this.inbuf_ = 0;\n    this.total_ = 0;\n  }\n\n  /**\n   * Internal compress helper function.\n   * @param buf Block to compress.\n   * @param offset Offset of the block in the buffer.\n   * @private\n   */\n  compress_(buf: number[] | Uint8Array | string, offset?: number): void {\n    if (!offset) {\n      offset = 0;\n    }\n\n    const W = this.W_;\n\n    // get 16 big endian words\n    if (typeof buf === 'string') {\n      for (let i = 0; i < 16; i++) {\n        // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\n        // have a bug that turns the post-increment ++ operator into pre-increment\n        // during JIT compilation.  We have code that depends heavily on SHA-1 for\n        // correctness and which is affected by this bug, so I've removed all uses\n        // of post-increment ++ in which the result value is used.  We can revert\n        // this change once the Safari bug\n        // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\n        // most clients have been updated.\n        W[i] =\n          (buf.charCodeAt(offset) << 24) |\n          (buf.charCodeAt(offset + 1) << 16) |\n          (buf.charCodeAt(offset + 2) << 8) |\n          buf.charCodeAt(offset + 3);\n        offset += 4;\n      }\n    } else {\n      for (let i = 0; i < 16; i++) {\n        W[i] =\n          (buf[offset] << 24) |\n          (buf[offset + 1] << 16) |\n          (buf[offset + 2] << 8) |\n          buf[offset + 3];\n        offset += 4;\n      }\n    }\n\n    // expand to 80 words\n    for (let i = 16; i < 80; i++) {\n      const t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n      W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\n    }\n\n    let a = this.chain_[0];\n    let b = this.chain_[1];\n    let c = this.chain_[2];\n    let d = this.chain_[3];\n    let e = this.chain_[4];\n    let f, k;\n\n    // TODO(user): Try to unroll this loop to speed up the computation.\n    for (let i = 0; i < 80; i++) {\n      if (i < 40) {\n        if (i < 20) {\n          f = d ^ (b & (c ^ d));\n          k = 0x5a827999;\n        } else {\n          f = b ^ c ^ d;\n          k = 0x6ed9eba1;\n        }\n      } else {\n        if (i < 60) {\n          f = (b & c) | (d & (b | c));\n          k = 0x8f1bbcdc;\n        } else {\n          f = b ^ c ^ d;\n          k = 0xca62c1d6;\n        }\n      }\n\n      const t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\n      e = d;\n      d = c;\n      c = ((b << 30) | (b >>> 2)) & 0xffffffff;\n      b = a;\n      a = t;\n    }\n\n    this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\n    this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\n    this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\n    this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\n    this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\n  }\n\n  update(bytes?: number[] | Uint8Array | string, length?: number): void {\n    // TODO(johnlenz): tighten the function signature and remove this check\n    if (bytes == null) {\n      return;\n    }\n\n    if (length === undefined) {\n      length = bytes.length;\n    }\n\n    const lengthMinusBlock = length - this.blockSize;\n    let n = 0;\n    // Using local instead of member variables gives ~5% speedup on Firefox 16.\n    const buf = this.buf_;\n    let inbuf = this.inbuf_;\n\n    // The outer while loop should execute at most twice.\n    while (n < length) {\n      // When we have no data in the block to top up, we can directly process the\n      // input buffer (assuming it contains sufficient data). This gives ~25%\n      // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\n      // the data is provided in large chunks (or in multiples of 64 bytes).\n      if (inbuf === 0) {\n        while (n <= lengthMinusBlock) {\n          this.compress_(bytes, n);\n          n += this.blockSize;\n        }\n      }\n\n      if (typeof bytes === 'string') {\n        while (n < length) {\n          buf[inbuf] = bytes.charCodeAt(n);\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      } else {\n        while (n < length) {\n          buf[inbuf] = bytes[n];\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      }\n    }\n\n    this.inbuf_ = inbuf;\n    this.total_ += length;\n  }\n\n  /** @override */\n  digest(): number[] {\n    const digest: number[] = [];\n    let totalBits = this.total_ * 8;\n\n    // Add pad 0x80 0x00*.\n    if (this.inbuf_ < 56) {\n      this.update(this.pad_, 56 - this.inbuf_);\n    } else {\n      this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\n    }\n\n    // Add # bits.\n    for (let i = this.blockSize - 1; i >= 56; i--) {\n      this.buf_[i] = totalBits & 255;\n      totalBits /= 256; // Don't use bit-shifting here!\n    }\n\n    this.compress_(this.buf_);\n\n    let n = 0;\n    for (let i = 0; i < 5; i++) {\n      for (let j = 24; j >= 0; j -= 8) {\n        digest[n] = (this.chain_[i] >> j) & 255;\n        ++n;\n      }\n    }\n    return digest;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport type NextFn<T> = (value: T) => void;\nexport type ErrorFn = (error: Error) => void;\nexport type CompleteFn = () => void;\n\nexport interface Observer<T> {\n  // Called once for each value in a stream of values.\n  next: NextFn<T>;\n\n  // A stream terminates by a single call to EITHER error() or complete().\n  error: ErrorFn;\n\n  // No events will be sent to next() once complete() is called.\n  complete: CompleteFn;\n}\n\nexport type PartialObserver<T> = Partial<Observer<T>>;\n\n// TODO: Support also Unsubscribe.unsubscribe?\nexport type Unsubscribe = () => void;\n\n/**\n * The Subscribe interface has two forms - passing the inline function\n * callbacks, or a object interface with callback properties.\n */\nexport interface Subscribe<T> {\n  (next?: NextFn<T>, error?: ErrorFn, complete?: CompleteFn): Unsubscribe;\n  (observer: PartialObserver<T>): Unsubscribe;\n}\n\nexport interface Observable<T> {\n  // Subscribe method\n  subscribe: Subscribe<T>;\n}\n\nexport type Executor<T> = (observer: Observer<T>) => void;\n\n/**\n * Helper to make a Subscribe function (just like Promise helps make a\n * Thenable).\n *\n * @param executor Function which can make calls to a single Observer\n *     as a proxy.\n * @param onNoObservers Callback when count of Observers goes to zero.\n */\nexport function createSubscribe<T>(\n  executor: Executor<T>,\n  onNoObservers?: Executor<T>\n): Subscribe<T> {\n  const proxy = new ObserverProxy<T>(executor, onNoObservers);\n  return proxy.subscribe.bind(proxy);\n}\n\n/**\n * Implement fan-out for any number of Observers attached via a subscribe\n * function.\n */\nclass ObserverProxy<T> implements Observer<T> {\n  private observers: Array<Observer<T>> | undefined = [];\n  private unsubscribes: Unsubscribe[] = [];\n  private onNoObservers: Executor<T> | undefined;\n  private observerCount = 0;\n  // Micro-task scheduling by calling task.then().\n  private task = Promise.resolve();\n  private finalized = false;\n  private finalError?: Error;\n\n  /**\n   * @param executor Function which can make calls to a single Observer\n   *     as a proxy.\n   * @param onNoObservers Callback when count of Observers goes to zero.\n   */\n  constructor(executor: Executor<T>, onNoObservers?: Executor<T>) {\n    this.onNoObservers = onNoObservers;\n    // Call the executor asynchronously so subscribers that are called\n    // synchronously after the creation of the subscribe function\n    // can still receive the very first value generated in the executor.\n    this.task\n      .then(() => {\n        executor(this);\n      })\n      .catch(e => {\n        this.error(e);\n      });\n  }\n\n  next(value: T): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.next(value);\n    });\n  }\n\n  error(error: Error): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.error(error);\n    });\n    this.close(error);\n  }\n\n  complete(): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.complete();\n    });\n    this.close();\n  }\n\n  /**\n   * Subscribe function that can be used to add an Observer to the fan-out list.\n   *\n   * - We require that no event is sent to a subscriber sychronously to their\n   *   call to subscribe().\n   */\n  subscribe(\n    nextOrObserver?: NextFn<T> | PartialObserver<T>,\n    error?: ErrorFn,\n    complete?: CompleteFn\n  ): Unsubscribe {\n    let observer: Observer<T>;\n\n    if (\n      nextOrObserver === undefined &&\n      error === undefined &&\n      complete === undefined\n    ) {\n      throw new Error('Missing Observer.');\n    }\n\n    // Assemble an Observer object when passed as callback functions.\n    if (\n      implementsAnyMethods(nextOrObserver as { [key: string]: unknown }, [\n        'next',\n        'error',\n        'complete'\n      ])\n    ) {\n      observer = nextOrObserver as Observer<T>;\n    } else {\n      observer = {\n        next: nextOrObserver as NextFn<T>,\n        error,\n        complete\n      } as Observer<T>;\n    }\n\n    if (observer.next === undefined) {\n      observer.next = noop as NextFn<T>;\n    }\n    if (observer.error === undefined) {\n      observer.error = noop as ErrorFn;\n    }\n    if (observer.complete === undefined) {\n      observer.complete = noop as CompleteFn;\n    }\n\n    const unsub = this.unsubscribeOne.bind(this, this.observers!.length);\n\n    // Attempt to subscribe to a terminated Observable - we\n    // just respond to the Observer with the final error or complete\n    // event.\n    if (this.finalized) {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      this.task.then(() => {\n        try {\n          if (this.finalError) {\n            observer.error(this.finalError);\n          } else {\n            observer.complete();\n          }\n        } catch (e) {\n          // nothing\n        }\n        return;\n      });\n    }\n\n    this.observers!.push(observer as Observer<T>);\n\n    return unsub;\n  }\n\n  // Unsubscribe is synchronous - we guarantee that no events are sent to\n  // any unsubscribed Observer.\n  private unsubscribeOne(i: number): void {\n    if (this.observers === undefined || this.observers[i] === undefined) {\n      return;\n    }\n\n    delete this.observers[i];\n\n    this.observerCount -= 1;\n    if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n      this.onNoObservers(this);\n    }\n  }\n\n  private forEachObserver(fn: (observer: Observer<T>) => void): void {\n    if (this.finalized) {\n      // Already closed by previous event....just eat the additional values.\n      return;\n    }\n\n    // Since sendOne calls asynchronously - there is no chance that\n    // this.observers will become undefined.\n    for (let i = 0; i < this.observers!.length; i++) {\n      this.sendOne(i, fn);\n    }\n  }\n\n  // Call the Observer via one of it's callback function. We are careful to\n  // confirm that the observe has not been unsubscribed since this asynchronous\n  // function had been queued.\n  private sendOne(i: number, fn: (observer: Observer<T>) => void): void {\n    // Execute the callback asynchronously\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      if (this.observers !== undefined && this.observers[i] !== undefined) {\n        try {\n          fn(this.observers[i]);\n        } catch (e) {\n          // Ignore exceptions raised in Observers or missing methods of an\n          // Observer.\n          // Log error to console. b/31404806\n          if (typeof console !== 'undefined' && console.error) {\n            console.error(e);\n          }\n        }\n      }\n    });\n  }\n\n  private close(err?: Error): void {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    if (err !== undefined) {\n      this.finalError = err;\n    }\n    // Proxy is no longer needed - garbage collect references\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      this.observers = undefined;\n      this.onNoObservers = undefined;\n    });\n  }\n}\n\n/** Turn synchronous function into one called asynchronously. */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function async(fn: Function, onError?: ErrorFn): Function {\n  return (...args: unknown[]) => {\n    Promise.resolve(true)\n      .then(() => {\n        fn(...args);\n      })\n      .catch((error: Error) => {\n        if (onError) {\n          onError(error);\n        }\n      });\n  };\n}\n\n/**\n * Return true if the object passed in implements any of the named methods.\n */\nfunction implementsAnyMethods(\n  obj: { [key: string]: unknown },\n  methods: string[]\n): boolean {\n  if (typeof obj !== 'object' || obj === null) {\n    return false;\n  }\n\n  for (const method of methods) {\n    if (method in obj && typeof obj[method] === 'function') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction noop(): void {\n  // do nothing\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Check to make sure the appropriate number of arguments are provided for a public function.\n * Throws an error if it fails.\n *\n * @param fnName The function name\n * @param minCount The minimum number of arguments to allow for the function call\n * @param maxCount The maximum number of argument to allow for the function call\n * @param argCount The actual number of arguments provided.\n */\nexport const validateArgCount = function (\n  fnName: string,\n  minCount: number,\n  maxCount: number,\n  argCount: number\n): void {\n  let argError;\n  if (argCount < minCount) {\n    argError = 'at least ' + minCount;\n  } else if (argCount > maxCount) {\n    argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\n  }\n  if (argError) {\n    const error =\n      fnName +\n      ' failed: Was called with ' +\n      argCount +\n      (argCount === 1 ? ' argument.' : ' arguments.') +\n      ' Expects ' +\n      argError +\n      '.';\n    throw new Error(error);\n  }\n};\n\n/**\n * Generates a string to prefix an error message about failed argument validation\n *\n * @param fnName The function name\n * @param argName The name of the argument\n * @return The prefix to add to the error thrown for validation.\n */\nexport function errorPrefix(fnName: string, argName: string): string {\n  return `${fnName} failed: ${argName} argument `;\n}\n\n/**\n * @param fnName\n * @param argumentNumber\n * @param namespace\n * @param optional\n */\nexport function validateNamespace(\n  fnName: string,\n  namespace: string,\n  optional: boolean\n): void {\n  if (optional && !namespace) {\n    return;\n  }\n  if (typeof namespace !== 'string') {\n    //TODO: I should do more validation here. We only allow certain chars in namespaces.\n    throw new Error(\n      errorPrefix(fnName, 'namespace') + 'must be a valid firebase namespace.'\n    );\n  }\n}\n\nexport function validateCallback(\n  fnName: string,\n  argumentName: string,\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  callback: Function,\n  optional: boolean\n): void {\n  if (optional && !callback) {\n    return;\n  }\n  if (typeof callback !== 'function') {\n    throw new Error(\n      errorPrefix(fnName, argumentName) + 'must be a valid function.'\n    );\n  }\n}\n\nexport function validateContextObject(\n  fnName: string,\n  argumentName: string,\n  context: unknown,\n  optional: boolean\n): void {\n  if (optional && !context) {\n    return;\n  }\n  if (typeof context !== 'object' || context === null) {\n    throw new Error(\n      errorPrefix(fnName, argumentName) + 'must be a valid context object.'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from './assert';\n\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\n// so it's been modified.\n\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\n// pair).\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\n\n/**\n * @param {string} str\n * @return {Array}\n */\nexport const stringToByteArray = function (str: string): number[] {\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n\n    // Is this the lead surrogate in a surrogate pair?\n    if (c >= 0xd800 && c <= 0xdbff) {\n      const high = c - 0xd800; // the high 10 bits.\n      i++;\n      assert(i < str.length, 'Surrogate pair missing trail surrogate.');\n      const low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\n      c = 0x10000 + (high << 10) + low;\n    }\n\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (c < 65536) {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Calculate length without actually converting; useful for doing cheaper validation.\n * @param {string} str\n * @return {number}\n */\nexport const stringLength = function (str: string): number {\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    const c = str.charCodeAt(i);\n    if (c < 128) {\n      p++;\n    } else if (c < 2048) {\n      p += 2;\n    } else if (c >= 0xd800 && c <= 0xdbff) {\n      // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\n      p += 4;\n      i++; // skip trail surrogate.\n    } else {\n      p += 3;\n    }\n  }\n  return p;\n};\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Copied from https://stackoverflow.com/a/2117523\n * Generates a new uuid.\n * @public\n */\nexport const uuidv4 = function (): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (Math.random() * 16) | 0,\n      v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The amount of milliseconds to exponentially increase.\n */\nconst DEFAULT_INTERVAL_MILLIS = 1000;\n\n/**\n * The factor to backoff by.\n * Should be a number greater than 1.\n */\nconst DEFAULT_BACKOFF_FACTOR = 2;\n\n/**\n * The maximum milliseconds to increase to.\n *\n * <p>Visible for testing\n */\nexport const MAX_VALUE_MILLIS = 4 * 60 * 60 * 1000; // Four hours, like iOS and Android.\n\n/**\n * The percentage of backoff time to randomize by.\n * See\n * http://go/safe-client-behavior#step-1-determine-the-appropriate-retry-interval-to-handle-spike-traffic\n * for context.\n *\n * <p>Visible for testing\n */\nexport const RANDOM_FACTOR = 0.5;\n\n/**\n * Based on the backoff method from\n * https://github.com/google/closure-library/blob/master/closure/goog/math/exponentialbackoff.js.\n * Extracted here so we don't need to pass metadata and a stateful ExponentialBackoff object around.\n */\nexport function calculateBackoffMillis(\n  backoffCount: number,\n  intervalMillis: number = DEFAULT_INTERVAL_MILLIS,\n  backoffFactor: number = DEFAULT_BACKOFF_FACTOR\n): number {\n  // Calculates an exponentially increasing value.\n  // Deviation: calculates value from count and a constant interval, so we only need to save value\n  // and count to restore state.\n  const currBaseValue = intervalMillis * Math.pow(backoffFactor, backoffCount);\n\n  // A random \"fuzz\" to avoid waves of retries.\n  // Deviation: randomFactor is required.\n  const randomWait = Math.round(\n    // A fraction of the backoff value to add/subtract.\n    // Deviation: changes multiplication order to improve readability.\n    RANDOM_FACTOR *\n      currBaseValue *\n      // A random float (rounded to int by Math.round above) in the range [-1, 1]. Determines\n      // if we add or subtract.\n      (Math.random() - 0.5) *\n      2\n  );\n\n  // Limits backoff to max to avoid effectively permanent backoff.\n  return Math.min(MAX_VALUE_MILLIS, currBaseValue + randomWait);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Provide English ordinal letters after a number\n */\nexport function ordinal(i: number): string {\n  if (!Number.isFinite(i)) {\n    return `${i}`;\n  }\n  return i + indicator(i);\n}\n\nfunction indicator(i: number): string {\n  i = Math.abs(i);\n  const cent = i % 100;\n  if (cent >= 10 && cent <= 20) {\n    return 'th';\n  }\n  const dec = i % 10;\n  if (dec === 1) {\n    return 'st';\n  }\n  if (dec === 2) {\n    return 'nd';\n  }\n  if (dec === 3) {\n    return 'rd';\n  }\n  return 'th';\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Provider } from './provider';\nimport { Component } from './component';\nimport { Name } from './types';\n\n/**\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\n */\nexport class ComponentContainer {\n  private readonly providers = new Map<string, Provider<Name>>();\n\n  constructor(private readonly name: string) {}\n\n  /**\n   *\n   * @param component Component being added\n   * @param overwrite When a component with the same name has already been registered,\n   * if overwrite is true: overwrite the existing component with the new component and create a new\n   * provider with the new component. It can be useful in tests where you want to use different mocks\n   * for different tests.\n   * if overwrite is false: throw an exception\n   */\n  addComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      throw new Error(\n        `Component ${component.name} has already been registered with ${this.name}`\n      );\n    }\n\n    provider.setComponent(component);\n  }\n\n  addOrOverwriteComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      // delete the existing provider from the container, so we can register the new component\n      this.providers.delete(component.name);\n    }\n\n    this.addComponent(component);\n  }\n\n  /**\n   * getProvider provides a type safe interface where it can only be called with a field name\n   * present in NameServiceMapping interface.\n   *\n   * Firebase SDKs providing services should extend NameServiceMapping interface to register\n   * themselves.\n   */\n  getProvider<T extends Name>(name: T): Provider<T> {\n    if (this.providers.has(name)) {\n      return this.providers.get(name) as unknown as Provider<T>;\n    }\n\n    // create a Provider for a service that hasn't registered with Firebase\n    const provider = new Provider<T>(name, this);\n    this.providers.set(name, provider as unknown as Provider<Name>);\n\n    return provider as Provider<T>;\n  }\n\n  getProviders(): Array<Provider<Name>> {\n    return Array.from(this.providers.values());\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  InstantiationMode,\n  InstanceFactory,\n  ComponentType,\n  Dictionary,\n  Name,\n  onInstanceCreatedCallback\n} from './types';\n\n/**\n * Component for service name T, e.g. `auth`, `auth-internal`\n */\nexport class Component<T extends Name = Name> {\n  multipleInstances = false;\n  /**\n   * Properties to be added to the service namespace\n   */\n  serviceProps: Dictionary = {};\n\n  instantiationMode = InstantiationMode.LAZY;\n\n  onInstanceCreated: onInstanceCreatedCallback<T> | null = null;\n\n  /**\n   *\n   * @param name The public service name, e.g. app, auth, firestore, database\n   * @param instanceFactory Service factory responsible for creating the public interface\n   * @param type whether the service provided by the component is public or private\n   */\n  constructor(\n    readonly name: T,\n    readonly instanceFactory: InstanceFactory<T>,\n    readonly type: ComponentType\n  ) {}\n\n  setInstantiationMode(mode: InstantiationMode): this {\n    this.instantiationMode = mode;\n    return this;\n  }\n\n  setMultipleInstances(multipleInstances: boolean): this {\n    this.multipleInstances = multipleInstances;\n    return this;\n  }\n\n  setServiceProps(props: Dictionary): this {\n    this.serviceProps = props;\n    return this;\n  }\n\n  setInstanceCreatedCallback(callback: onInstanceCreatedCallback<T>): this {\n    this.onInstanceCreated = callback;\n    return this;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Deferred } from '@firebase/util';\nimport { ComponentContainer } from './component_container';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport {\n  InitializeOptions,\n  InstantiationMode,\n  Name,\n  NameServiceMapping,\n  OnInitCallBack\n} from './types';\nimport { Component } from './component';\n\n/**\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\n * NameServiceMapping[T] is an alias for the type of the instance\n */\nexport class Provider<T extends Name> {\n  private component: Component<T> | null = null;\n  private readonly instances: Map<string, NameServiceMapping[T]> = new Map();\n  private readonly instancesDeferred: Map<\n    string,\n    Deferred<NameServiceMapping[T]>\n  > = new Map();\n  private readonly instancesOptions: Map<string, Record<string, unknown>> =\n    new Map();\n  private onInitCallbacks: Map<string, Set<OnInitCallBack<T>>> = new Map();\n\n  constructor(\n    private readonly name: T,\n    private readonly container: ComponentContainer\n  ) {}\n\n  /**\n   * @param identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   */\n  get(identifier?: string): Promise<NameServiceMapping[T]> {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n\n    if (!this.instancesDeferred.has(normalizedIdentifier)) {\n      const deferred = new Deferred<NameServiceMapping[T]>();\n      this.instancesDeferred.set(normalizedIdentifier, deferred);\n\n      if (\n        this.isInitialized(normalizedIdentifier) ||\n        this.shouldAutoInitialize()\n      ) {\n        // initialize the service if it can be auto-initialized\n        try {\n          const instance = this.getOrInitializeService({\n            instanceIdentifier: normalizedIdentifier\n          });\n          if (instance) {\n            deferred.resolve(instance);\n          }\n        } catch (e) {\n          // when the instance factory throws an exception during get(), it should not cause\n          // a fatal error. We just return the unresolved promise in this case.\n        }\n      }\n    }\n\n    return this.instancesDeferred.get(normalizedIdentifier)!.promise;\n  }\n\n  /**\n   *\n   * @param options.identifier A provider can provide mulitple instances of a service\n   * if this.component.multipleInstances is true.\n   * @param options.optional If optional is false or not provided, the method throws an error when\n   * the service is not immediately available.\n   * If optional is true, the method returns null if the service is not immediately available.\n   */\n  getImmediate(options: {\n    identifier?: string;\n    optional: true;\n  }): NameServiceMapping[T] | null;\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: false;\n  }): NameServiceMapping[T];\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: boolean;\n  }): NameServiceMapping[T] | null {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      options?.identifier\n    );\n    const optional = options?.optional ?? false;\n\n    if (\n      this.isInitialized(normalizedIdentifier) ||\n      this.shouldAutoInitialize()\n    ) {\n      try {\n        return this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        });\n      } catch (e) {\n        if (optional) {\n          return null;\n        } else {\n          throw e;\n        }\n      }\n    } else {\n      // In case a component is not initialized and should/can not be auto-initialized at the moment, return null if the optional flag is set, or throw\n      if (optional) {\n        return null;\n      } else {\n        throw Error(`Service ${this.name} is not available`);\n      }\n    }\n  }\n\n  getComponent(): Component<T> | null {\n    return this.component;\n  }\n\n  setComponent(component: Component<T>): void {\n    if (component.name !== this.name) {\n      throw Error(\n        `Mismatching Component ${component.name} for Provider ${this.name}.`\n      );\n    }\n\n    if (this.component) {\n      throw Error(`Component for ${this.name} has already been provided`);\n    }\n\n    this.component = component;\n\n    // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)\n    if (!this.shouldAutoInitialize()) {\n      return;\n    }\n\n    // if the service is eager, initialize the default instance\n    if (isComponentEager(component)) {\n      try {\n        this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME });\n      } catch (e) {\n        // when the instance factory for an eager Component throws an exception during the eager\n        // initialization, it should not cause a fatal error.\n        // TODO: Investigate if we need to make it configurable, because some component may want to cause\n        // a fatal error in this case?\n      }\n    }\n\n    // Create service instances for the pending promises and resolve them\n    // NOTE: if this.multipleInstances is false, only the default instance will be created\n    // and all promises with resolve with it regardless of the identifier.\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n\n      try {\n        // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\n        const instance = this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        })!;\n        instanceDeferred.resolve(instance);\n      } catch (e) {\n        // when the instance factory throws an exception, it should not cause\n        // a fatal error. We just leave the promise unresolved.\n      }\n    }\n  }\n\n  clearInstance(identifier: string = DEFAULT_ENTRY_NAME): void {\n    this.instancesDeferred.delete(identifier);\n    this.instancesOptions.delete(identifier);\n    this.instances.delete(identifier);\n  }\n\n  // app.delete() will call this method on every provider to delete the services\n  // TODO: should we mark the provider as deleted?\n  async delete(): Promise<void> {\n    const services = Array.from(this.instances.values());\n\n    await Promise.all([\n      ...services\n        .filter(service => 'INTERNAL' in service) // legacy services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any).INTERNAL!.delete()),\n      ...services\n        .filter(service => '_delete' in service) // modularized services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any)._delete())\n    ]);\n  }\n\n  isComponentSet(): boolean {\n    return this.component != null;\n  }\n\n  isInitialized(identifier: string = DEFAULT_ENTRY_NAME): boolean {\n    return this.instances.has(identifier);\n  }\n\n  getOptions(identifier: string = DEFAULT_ENTRY_NAME): Record<string, unknown> {\n    return this.instancesOptions.get(identifier) || {};\n  }\n\n  initialize(opts: InitializeOptions = {}): NameServiceMapping[T] {\n    const { options = {} } = opts;\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      opts.instanceIdentifier\n    );\n    if (this.isInitialized(normalizedIdentifier)) {\n      throw Error(\n        `${this.name}(${normalizedIdentifier}) has already been initialized`\n      );\n    }\n\n    if (!this.isComponentSet()) {\n      throw Error(`Component ${this.name} has not been registered yet`);\n    }\n\n    const instance = this.getOrInitializeService({\n      instanceIdentifier: normalizedIdentifier,\n      options\n    })!;\n\n    // resolve any pending promise waiting for the service instance\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedDeferredIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n      if (normalizedIdentifier === normalizedDeferredIdentifier) {\n        instanceDeferred.resolve(instance);\n      }\n    }\n\n    return instance;\n  }\n\n  /**\n   *\n   * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().\n   * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.\n   *\n   * @param identifier An optional instance identifier\n   * @returns a function to unregister the callback\n   */\n  onInit(callback: OnInitCallBack<T>, identifier?: string): () => void {\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n    const existingCallbacks =\n      this.onInitCallbacks.get(normalizedIdentifier) ??\n      new Set<OnInitCallBack<T>>();\n    existingCallbacks.add(callback);\n    this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);\n\n    const existingInstance = this.instances.get(normalizedIdentifier);\n    if (existingInstance) {\n      callback(existingInstance, normalizedIdentifier);\n    }\n\n    return () => {\n      existingCallbacks.delete(callback);\n    };\n  }\n\n  /**\n   * Invoke onInit callbacks synchronously\n   * @param instance the service instance`\n   */\n  private invokeOnInitCallbacks(\n    instance: NameServiceMapping[T],\n    identifier: string\n  ): void {\n    const callbacks = this.onInitCallbacks.get(identifier);\n    if (!callbacks) {\n      return;\n    }\n    for (const callback of callbacks) {\n      try {\n        callback(instance, identifier);\n      } catch {\n        // ignore errors in the onInit callback\n      }\n    }\n  }\n\n  private getOrInitializeService({\n    instanceIdentifier,\n    options = {}\n  }: {\n    instanceIdentifier: string;\n    options?: Record<string, unknown>;\n  }): NameServiceMapping[T] | null {\n    let instance = this.instances.get(instanceIdentifier);\n    if (!instance && this.component) {\n      instance = this.component.instanceFactory(this.container, {\n        instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),\n        options\n      });\n      this.instances.set(instanceIdentifier, instance);\n      this.instancesOptions.set(instanceIdentifier, options);\n\n      /**\n       * Invoke onInit listeners.\n       * Note this.component.onInstanceCreated is different, which is used by the component creator,\n       * while onInit listeners are registered by consumers of the provider.\n       */\n      this.invokeOnInitCallbacks(instance, instanceIdentifier);\n\n      /**\n       * Order is important\n       * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which\n       * makes `isInitialized()` return true.\n       */\n      if (this.component.onInstanceCreated) {\n        try {\n          this.component.onInstanceCreated(\n            this.container,\n            instanceIdentifier,\n            instance\n          );\n        } catch {\n          // ignore errors in the onInstanceCreatedCallback\n        }\n      }\n    }\n\n    return instance || null;\n  }\n\n  private normalizeInstanceIdentifier(\n    identifier: string = DEFAULT_ENTRY_NAME\n  ): string {\n    if (this.component) {\n      return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\n    } else {\n      return identifier; // assume multiple instances are supported before the component is provided.\n    }\n  }\n\n  private shouldAutoInitialize(): boolean {\n    return (\n      !!this.component &&\n      this.component.instantiationMode !== InstantiationMode.EXPLICIT\n    );\n  }\n}\n\n// undefined should be passed to the service factory for the default instance\nfunction normalizeIdentifierForFactory(identifier: string): string | undefined {\n  return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\n}\n\nfunction isComponentEager<T extends Name>(component: Component<T>): boolean {\n  return component.instantiationMode === InstantiationMode.EAGER;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type LogLevelString =\n  | 'debug'\n  | 'verbose'\n  | 'info'\n  | 'warn'\n  | 'error'\n  | 'silent';\n\nexport interface LogOptions {\n  level: LogLevelString;\n}\n\nexport type LogCallback = (callbackParams: LogCallbackParams) => void;\n\nexport interface LogCallbackParams {\n  level: LogLevelString;\n  message: string;\n  args: unknown[];\n  type: string;\n}\n\n/**\n * A container for all of the Logger instances\n */\nexport const instances: Logger[] = [];\n\n/**\n * The JS SDK supports 5 log levels and also allows a user the ability to\n * silence the logs altogether.\n *\n * The order is a follows:\n * DEBUG < VERBOSE < INFO < WARN < ERROR\n *\n * All of the log types above the current log level will be captured (i.e. if\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\n * `VERBOSE` logs will not)\n */\nexport enum LogLevel {\n  DEBUG,\n  VERBOSE,\n  INFO,\n  WARN,\n  ERROR,\n  SILENT\n}\n\nconst levelStringToEnum: { [key in LogLevelString]: LogLevel } = {\n  'debug': LogLevel.DEBUG,\n  'verbose': LogLevel.VERBOSE,\n  'info': LogLevel.INFO,\n  'warn': LogLevel.WARN,\n  'error': LogLevel.ERROR,\n  'silent': LogLevel.SILENT\n};\n\n/**\n * The default log level\n */\nconst defaultLogLevel: LogLevel = LogLevel.INFO;\n\n/**\n * We allow users the ability to pass their own log handler. We will pass the\n * type of log, the current log level, and any other arguments passed (i.e. the\n * messages that the user wants to log) to this function.\n */\nexport type LogHandler = (\n  loggerInstance: Logger,\n  logType: LogLevel,\n  ...args: unknown[]\n) => void;\n\n/**\n * By default, `console.debug` is not displayed in the developer console (in\n * chrome). To avoid forcing users to have to opt-in to these logs twice\n * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\n * logs to the `console.log` function.\n */\nconst ConsoleMethod = {\n  [LogLevel.DEBUG]: 'log',\n  [LogLevel.VERBOSE]: 'log',\n  [LogLevel.INFO]: 'info',\n  [LogLevel.WARN]: 'warn',\n  [LogLevel.ERROR]: 'error'\n};\n\n/**\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\n * messages on to their corresponding console counterparts (if the log method\n * is supported by the current log level)\n */\nconst defaultLogHandler: LogHandler = (instance, logType, ...args): void => {\n  if (logType < instance.logLevel) {\n    return;\n  }\n  const now = new Date().toISOString();\n  const method = ConsoleMethod[logType as keyof typeof ConsoleMethod];\n  if (method) {\n    console[method as 'log' | 'info' | 'warn' | 'error'](\n      `[${now}]  ${instance.name}:`,\n      ...args\n    );\n  } else {\n    throw new Error(\n      `Attempted to log a message with an invalid logType (value: ${logType})`\n    );\n  }\n};\n\nexport class Logger {\n  /**\n   * Gives you an instance of a Logger to capture messages according to\n   * Firebase's logging scheme.\n   *\n   * @param name The name that the logs will be associated with\n   */\n  constructor(public name: string) {\n    /**\n     * Capture the current instance for later use\n     */\n    instances.push(this);\n  }\n\n  /**\n   * The log level of the given Logger instance.\n   */\n  private _logLevel = defaultLogLevel;\n\n  get logLevel(): LogLevel {\n    return this._logLevel;\n  }\n\n  set logLevel(val: LogLevel) {\n    if (!(val in LogLevel)) {\n      throw new TypeError(`Invalid value \"${val}\" assigned to \\`logLevel\\``);\n    }\n    this._logLevel = val;\n  }\n\n  // Workaround for setter/getter having to be the same type.\n  setLogLevel(val: LogLevel | LogLevelString): void {\n    this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;\n  }\n\n  /**\n   * The main (internal) log handler for the Logger instance.\n   * Can be set to a new function in internal package code but not by user.\n   */\n  private _logHandler: LogHandler = defaultLogHandler;\n  get logHandler(): LogHandler {\n    return this._logHandler;\n  }\n  set logHandler(val: LogHandler) {\n    if (typeof val !== 'function') {\n      throw new TypeError('Value assigned to `logHandler` must be a function');\n    }\n    this._logHandler = val;\n  }\n\n  /**\n   * The optional, additional, user-defined log handler for the Logger instance.\n   */\n  private _userLogHandler: LogHandler | null = null;\n  get userLogHandler(): LogHandler | null {\n    return this._userLogHandler;\n  }\n  set userLogHandler(val: LogHandler | null) {\n    this._userLogHandler = val;\n  }\n\n  /**\n   * The functions below are all based on the `console` interface\n   */\n\n  debug(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);\n    this._logHandler(this, LogLevel.DEBUG, ...args);\n  }\n  log(...args: unknown[]): void {\n    this._userLogHandler &&\n      this._userLogHandler(this, LogLevel.VERBOSE, ...args);\n    this._logHandler(this, LogLevel.VERBOSE, ...args);\n  }\n  info(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);\n    this._logHandler(this, LogLevel.INFO, ...args);\n  }\n  warn(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);\n    this._logHandler(this, LogLevel.WARN, ...args);\n  }\n  error(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);\n    this._logHandler(this, LogLevel.ERROR, ...args);\n  }\n}\n\nexport function setLogLevel(level: LogLevelString | LogLevel): void {\n  instances.forEach(inst => {\n    inst.setLogLevel(level);\n  });\n}\n\nexport function setUserLogHandler(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  for (const instance of instances) {\n    let customLogLevel: LogLevel | null = null;\n    if (options && options.level) {\n      customLogLevel = levelStringToEnum[options.level];\n    }\n    if (logCallback === null) {\n      instance.userLogHandler = null;\n    } else {\n      instance.userLogHandler = (\n        instance: Logger,\n        level: LogLevel,\n        ...args: unknown[]\n      ) => {\n        const message = args\n          .map(arg => {\n            if (arg == null) {\n              return null;\n            } else if (typeof arg === 'string') {\n              return arg;\n            } else if (typeof arg === 'number' || typeof arg === 'boolean') {\n              return arg.toString();\n            } else if (arg instanceof Error) {\n              return arg.message;\n            } else {\n              try {\n                return JSON.stringify(arg);\n              } catch (ignored) {\n                return null;\n              }\n            }\n          })\n          .filter(arg => arg)\n          .join(' ');\n        if (level >= (customLogLevel ?? instance.logLevel)) {\n          logCallback({\n            level: LogLevel[level].toLowerCase() as LogLevelString,\n            message,\n            args,\n            type: instance.name\n          });\n        }\n      };\n    }\n  }\n}\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","/**\n * Firebase App\n *\n * @remarks This package coordinates the communication between the different Firebase components\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { registerCoreComponents } from './registerCoreComponents';\n\nexport * from './api';\nexport * from './internal';\nexport * from './public-types';\n\nregisterCoreComponents('__RUNTIME_ENV__');\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ComponentContainer,\n  ComponentType,\n  Provider,\n  Name\n} from '@firebase/component';\nimport { PlatformLoggerService, VersionService } from './types';\n\nexport class PlatformLoggerServiceImpl implements PlatformLoggerService {\n  constructor(private readonly container: ComponentContainer) {}\n  // In initial implementation, this will be called by installations on\n  // auth token refresh, and installations will send this string.\n  getPlatformInfoString(): string {\n    const providers = this.container.getProviders();\n    // Loop through providers and get library/version pairs from any that are\n    // version components.\n    return providers\n      .map(provider => {\n        if (isVersionServiceProvider(provider)) {\n          const service = provider.getImmediate() as VersionService;\n          return `${service.library}/${service.version}`;\n        } else {\n          return null;\n        }\n      })\n      .filter(logString => logString)\n      .join(' ');\n  }\n}\n/**\n *\n * @param provider check if this provider provides a VersionService\n *\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\n * provides VersionService. The provider is not necessarily a 'app-version'\n * provider.\n */\nfunction isVersionServiceProvider(provider: Provider<Name>): boolean {\n  const component = provider.getComponent();\n  return component?.type === ComponentType.VERSION;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp } from './public-types';\nimport { Component, Provider, Name } from '@firebase/component';\nimport { logger } from './logger';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { FirebaseAppImpl } from './firebaseApp';\n\n/**\n * @internal\n */\nexport const _apps = new Map<string, FirebaseApp>();\n\n/**\n * Registered components.\n *\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const _components = new Map<string, Component<any>>();\n\n/**\n * @param component - the component being added to this app's container\n *\n * @internal\n */\nexport function _addComponent<T extends Name>(\n  app: FirebaseApp,\n  component: Component<T>\n): void {\n  try {\n    (app as FirebaseAppImpl).container.addComponent(component);\n  } catch (e) {\n    logger.debug(\n      `Component ${component.name} failed to register with FirebaseApp ${app.name}`,\n      e\n    );\n  }\n}\n\n/**\n *\n * @internal\n */\nexport function _addOrOverwriteComponent(\n  app: FirebaseApp,\n  component: Component\n): void {\n  (app as FirebaseAppImpl).container.addOrOverwriteComponent(component);\n}\n\n/**\n *\n * @param component - the component to register\n * @returns whether or not the component is registered successfully\n *\n * @internal\n */\nexport function _registerComponent<T extends Name>(\n  component: Component<T>\n): boolean {\n  const componentName = component.name;\n  if (_components.has(componentName)) {\n    logger.debug(\n      `There were multiple attempts to register component ${componentName}.`\n    );\n\n    return false;\n  }\n\n  _components.set(componentName, component);\n\n  // add the component to existing app instances\n  for (const app of _apps.values()) {\n    _addComponent(app as FirebaseAppImpl, component);\n  }\n\n  return true;\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n *\n * @returns the provider for the service with the matching name\n *\n * @internal\n */\nexport function _getProvider<T extends Name>(\n  app: FirebaseApp,\n  name: T\n): Provider<T> {\n  const heartbeatController = (app as FirebaseAppImpl).container\n    .getProvider('heartbeat')\n    .getImmediate({ optional: true });\n  if (heartbeatController) {\n    void heartbeatController.triggerHeartbeat();\n  }\n  return (app as FirebaseAppImpl).container.getProvider(name);\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n * @param instanceIdentifier - service instance identifier in case the service supports multiple instances\n *\n * @internal\n */\nexport function _removeServiceInstance<T extends Name>(\n  app: FirebaseApp,\n  name: T,\n  instanceIdentifier: string = DEFAULT_ENTRY_NAME\n): void {\n  _getProvider(app, name).clearInstance(instanceIdentifier);\n}\n\n/**\n * Test only\n *\n * @internal\n */\nexport function _clearComponents(): void {\n  _components.clear();\n}\n\n/**\n * Exported in order to be used in app-compat package\n */\nexport { DEFAULT_ENTRY_NAME as _DEFAULT_ENTRY_NAME };\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nexport const enum AppError {\n  NO_APP = 'no-app',\n  BAD_APP_NAME = 'bad-app-name',\n  DUPLICATE_APP = 'duplicate-app',\n  APP_DELETED = 'app-deleted',\n  NO_OPTIONS = 'no-options',\n  INVALID_APP_ARGUMENT = 'invalid-app-argument',\n  INVALID_LOG_ARGUMENT = 'invalid-log-argument',\n  IDB_OPEN = 'idb-open',\n  IDB_GET = 'idb-get',\n  IDB_WRITE = 'idb-set',\n  IDB_DELETE = 'idb-delete'\n}\n\nconst ERRORS: ErrorMap<AppError> = {\n  [AppError.NO_APP]:\n    \"No Firebase App '{$appName}' has been created - \" +\n    'call initializeApp() first',\n  [AppError.BAD_APP_NAME]: \"Illegal App name: '{$appName}\",\n  [AppError.DUPLICATE_APP]:\n    \"Firebase App named '{$appName}' already exists with different options or config\",\n  [AppError.APP_DELETED]: \"Firebase App named '{$appName}' already deleted\",\n  [AppError.NO_OPTIONS]:\n    'Need to provide options, when not being deployed to hosting via source.',\n  [AppError.INVALID_APP_ARGUMENT]:\n    'firebase.{$appName}() takes either no argument or a ' +\n    'Firebase App instance.',\n  [AppError.INVALID_LOG_ARGUMENT]:\n    'First argument to `onLog` must be null or a function.',\n  [AppError.IDB_OPEN]:\n    'Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_GET]:\n    'Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_WRITE]:\n    'Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_DELETE]:\n    'Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.'\n};\n\ninterface ErrorParams {\n  [AppError.NO_APP]: { appName: string };\n  [AppError.BAD_APP_NAME]: { appName: string };\n  [AppError.DUPLICATE_APP]: { appName: string };\n  [AppError.APP_DELETED]: { appName: string };\n  [AppError.INVALID_APP_ARGUMENT]: { appName: string };\n  [AppError.IDB_OPEN]: { originalErrorMessage?: string };\n  [AppError.IDB_GET]: { originalErrorMessage?: string };\n  [AppError.IDB_WRITE]: { originalErrorMessage?: string };\n  [AppError.IDB_DELETE]: { originalErrorMessage?: string };\n}\n\nexport const ERROR_FACTORY = new ErrorFactory<AppError, ErrorParams>(\n  'app',\n  'Firebase',\n  ERRORS\n);\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppSettings\n} from './public-types';\nimport {\n  ComponentContainer,\n  Component,\n  ComponentType\n} from '@firebase/component';\nimport { ERROR_FACTORY, AppError } from './errors';\n\nexport class FirebaseAppImpl implements FirebaseApp {\n  private readonly _options: FirebaseOptions;\n  private readonly _name: string;\n  /**\n   * Original config values passed in as a constructor parameter.\n   * It is only used to compare with another config object to support idempotent initializeApp().\n   *\n   * Updating automaticDataCollectionEnabled on the App instance will not change its value in _config.\n   */\n  private readonly _config: Required<FirebaseAppSettings>;\n  private _automaticDataCollectionEnabled: boolean;\n  private _isDeleted = false;\n  private readonly _container: ComponentContainer;\n\n  constructor(\n    options: FirebaseOptions,\n    config: Required<FirebaseAppSettings>,\n    container: ComponentContainer\n  ) {\n    this._options = { ...options };\n    this._config = { ...config };\n    this._name = config.name;\n    this._automaticDataCollectionEnabled =\n      config.automaticDataCollectionEnabled;\n    this._container = container;\n    this.container.addComponent(\n      new Component('app', () => this, ComponentType.PUBLIC)\n    );\n  }\n\n  get automaticDataCollectionEnabled(): boolean {\n    this.checkDestroyed();\n    return this._automaticDataCollectionEnabled;\n  }\n\n  set automaticDataCollectionEnabled(val: boolean) {\n    this.checkDestroyed();\n    this._automaticDataCollectionEnabled = val;\n  }\n\n  get name(): string {\n    this.checkDestroyed();\n    return this._name;\n  }\n\n  get options(): FirebaseOptions {\n    this.checkDestroyed();\n    return this._options;\n  }\n\n  get config(): Required<FirebaseAppSettings> {\n    this.checkDestroyed();\n    return this._config;\n  }\n\n  get container(): ComponentContainer {\n    return this._container;\n  }\n\n  get isDeleted(): boolean {\n    return this._isDeleted;\n  }\n\n  set isDeleted(val: boolean) {\n    this._isDeleted = val;\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  private checkDestroyed(): void {\n    if (this.isDeleted) {\n      throw ERROR_FACTORY.create(AppError.APP_DELETED, { appName: this._name });\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppSettings\n} from './public-types';\nimport { DEFAULT_ENTRY_NAME, PLATFORM_LOG_STRING } from './constants';\nimport { ERROR_FACTORY, AppError } from './errors';\nimport {\n  ComponentContainer,\n  Component,\n  Name,\n  ComponentType\n} from '@firebase/component';\nimport { version } from '../../firebase/package.json';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { _apps, _components, _registerComponent } from './internal';\nimport { logger } from './logger';\nimport {\n  LogLevelString,\n  setLogLevel as setLogLevelImpl,\n  LogCallback,\n  LogOptions,\n  setUserLogHandler\n} from '@firebase/logger';\nimport { deepEqual, getDefaultAppConfig } from '@firebase/util';\n\nexport { FirebaseError } from '@firebase/util';\n\n/**\n * The current SDK version.\n *\n * @public\n */\nexport const SDK_VERSION = version;\n\n/**\n * Creates and initializes a {@link @firebase/app#FirebaseApp} instance.\n *\n * See\n * {@link\n *   https://firebase.google.com/docs/web/setup#add_firebase_to_your_app\n *   | Add Firebase to your app} and\n * {@link\n *   https://firebase.google.com/docs/web/setup#multiple-projects\n *   | Initialize multiple projects} for detailed documentation.\n *\n * @example\n * ```javascript\n *\n * // Initialize default app\n * // Retrieve your own options values by adding a web app on\n * // https://console.firebase.google.com\n * initializeApp({\n *   apiKey: \"AIza....\",                             // Auth / General Use\n *   authDomain: \"YOUR_APP.firebaseapp.com\",         // Auth with popup/redirect\n *   databaseURL: \"https://YOUR_APP.firebaseio.com\", // Realtime Database\n *   storageBucket: \"YOUR_APP.appspot.com\",          // Storage\n *   messagingSenderId: \"123456789\"                  // Cloud Messaging\n * });\n * ```\n *\n * @example\n * ```javascript\n *\n * // Initialize another app\n * const otherApp = initializeApp({\n *   databaseURL: \"https://<OTHER_DATABASE_NAME>.firebaseio.com\",\n *   storageBucket: \"<OTHER_STORAGE_BUCKET>.appspot.com\"\n * }, \"otherApp\");\n * ```\n *\n * @param options - Options to configure the app's services.\n * @param name - Optional name of the app to initialize. If no name\n *   is provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The initialized app.\n *\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  name?: string\n): FirebaseApp;\n/**\n * Creates and initializes a FirebaseApp instance.\n *\n * @param options - Options to configure the app's services.\n * @param config - FirebaseApp Configuration\n *\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  config?: FirebaseAppSettings\n): FirebaseApp;\n/**\n * Creates and initializes a FirebaseApp instance.\n *\n * @public\n */\nexport function initializeApp(): FirebaseApp;\nexport function initializeApp(\n  _options?: FirebaseOptions,\n  rawConfig = {}\n): FirebaseApp {\n  let options = _options;\n\n  if (typeof rawConfig !== 'object') {\n    const name = rawConfig;\n    rawConfig = { name };\n  }\n\n  const config: Required<FirebaseAppSettings> = {\n    name: DEFAULT_ENTRY_NAME,\n    automaticDataCollectionEnabled: false,\n    ...rawConfig\n  };\n  const name = config.name;\n\n  if (typeof name !== 'string' || !name) {\n    throw ERROR_FACTORY.create(AppError.BAD_APP_NAME, {\n      appName: String(name)\n    });\n  }\n\n  options ||= getDefaultAppConfig();\n\n  if (!options) {\n    throw ERROR_FACTORY.create(AppError.NO_OPTIONS);\n  }\n\n  const existingApp = _apps.get(name) as FirebaseAppImpl;\n  if (existingApp) {\n    // return the existing app if options and config deep equal the ones in the existing app.\n    if (\n      deepEqual(options, existingApp.options) &&\n      deepEqual(config, existingApp.config)\n    ) {\n      return existingApp;\n    } else {\n      throw ERROR_FACTORY.create(AppError.DUPLICATE_APP, { appName: name });\n    }\n  }\n\n  const container = new ComponentContainer(name);\n  for (const component of _components.values()) {\n    container.addComponent(component);\n  }\n\n  const newApp = new FirebaseAppImpl(options, config, container);\n\n  _apps.set(name, newApp);\n\n  return newApp;\n}\n\n/**\n * Retrieves a {@link @firebase/app#FirebaseApp} instance.\n *\n * When called with no arguments, the default app is returned. When an app name\n * is provided, the app corresponding to that name is returned.\n *\n * An exception is thrown if the app being retrieved has not yet been\n * initialized.\n *\n * @example\n * ```javascript\n * // Return the default app\n * const app = getApp();\n * ```\n *\n * @example\n * ```javascript\n * // Return a named app\n * const otherApp = getApp(\"otherApp\");\n * ```\n *\n * @param name - Optional name of the app to return. If no name is\n *   provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The app corresponding to the provided app name.\n *   If no app name is provided, the default app is returned.\n *\n * @public\n */\nexport function getApp(name: string = DEFAULT_ENTRY_NAME): FirebaseApp {\n  const app = _apps.get(name);\n  if (!app && name === DEFAULT_ENTRY_NAME && getDefaultAppConfig()) {\n    return initializeApp();\n  }\n  if (!app) {\n    throw ERROR_FACTORY.create(AppError.NO_APP, { appName: name });\n  }\n\n  return app;\n}\n\n/**\n * A (read-only) array of all initialized apps.\n * @public\n */\nexport function getApps(): FirebaseApp[] {\n  return Array.from(_apps.values());\n}\n\n/**\n * Renders this app unusable and frees the resources of all associated\n * services.\n *\n * @example\n * ```javascript\n * deleteApp(app)\n *   .then(function() {\n *     console.log(\"App deleted successfully\");\n *   })\n *   .catch(function(error) {\n *     console.log(\"Error deleting app:\", error);\n *   });\n * ```\n *\n * @public\n */\nexport async function deleteApp(app: FirebaseApp): Promise<void> {\n  const name = app.name;\n  if (_apps.has(name)) {\n    _apps.delete(name);\n    await Promise.all(\n      (app as FirebaseAppImpl).container\n        .getProviders()\n        .map(provider => provider.delete())\n    );\n    (app as FirebaseAppImpl).isDeleted = true;\n  }\n}\n\n/**\n * Registers a library's name and version for platform logging purposes.\n * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)\n * @param version - Current version of that library.\n * @param variant - Bundle variant, e.g., node, rn, etc.\n *\n * @public\n */\nexport function registerVersion(\n  libraryKeyOrName: string,\n  version: string,\n  variant?: string\n): void {\n  // TODO: We can use this check to whitelist strings when/if we set up\n  // a good whitelist system.\n  let library = PLATFORM_LOG_STRING[libraryKeyOrName] ?? libraryKeyOrName;\n  if (variant) {\n    library += `-${variant}`;\n  }\n  const libraryMismatch = library.match(/\\s|\\//);\n  const versionMismatch = version.match(/\\s|\\//);\n  if (libraryMismatch || versionMismatch) {\n    const warning = [\n      `Unable to register library \"${library}\" with version \"${version}\":`\n    ];\n    if (libraryMismatch) {\n      warning.push(\n        `library name \"${library}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    if (libraryMismatch && versionMismatch) {\n      warning.push('and');\n    }\n    if (versionMismatch) {\n      warning.push(\n        `version name \"${version}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    logger.warn(warning.join(' '));\n    return;\n  }\n  _registerComponent(\n    new Component(\n      `${library}-version` as Name,\n      () => ({ library, version }),\n      ComponentType.VERSION\n    )\n  );\n}\n\n/**\n * Sets log handler for all Firebase SDKs.\n * @param logCallback - An optional custom log handler that executes user code whenever\n * the Firebase SDK makes a logging call.\n *\n * @public\n */\nexport function onLog(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  if (logCallback !== null && typeof logCallback !== 'function') {\n    throw ERROR_FACTORY.create(AppError.INVALID_LOG_ARGUMENT);\n  }\n  setUserLogHandler(logCallback, options);\n}\n\n/**\n * Sets log level for all Firebase SDKs.\n *\n * All of the log types above the current log level are captured (i.e. if\n * you set the log level to `info`, errors are logged, but `debug` and\n * `verbose` logs are not).\n *\n * @public\n */\nexport function setLogLevel(logLevel: LogLevelString): void {\n  setLogLevelImpl(logLevel);\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\nimport { DBSchema, openDB, IDBPDatabase } from 'idb';\nimport { AppError, ERROR_FACTORY } from './errors';\nimport { FirebaseApp } from './public-types';\nimport { HeartbeatsInIndexedDB } from './types';\nimport { logger } from './logger';\n\nconst DB_NAME = 'firebase-heartbeat-database';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'firebase-heartbeat-store';\n\ninterface AppDB extends DBSchema {\n  'firebase-heartbeat-store': {\n    key: string;\n    value: HeartbeatsInIndexedDB;\n  };\n}\n\nlet dbPromise: Promise<IDBPDatabase<AppDB>> | null = null;\nfunction getDbPromise(): Promise<IDBPDatabase<AppDB>> {\n  if (!dbPromise) {\n    dbPromise = openDB<AppDB>(DB_NAME, DB_VERSION, {\n      upgrade: (db, oldVersion) => {\n        // We don't use 'break' in this switch statement, the fall-through\n        // behavior is what we want, because if there are multiple versions between\n        // the old version and the current version, we want ALL the migrations\n        // that correspond to those versions to run, not only the last one.\n        // eslint-disable-next-line default-case\n        switch (oldVersion) {\n          case 0:\n            db.createObjectStore(STORE_NAME);\n        }\n      }\n    }).catch(e => {\n      throw ERROR_FACTORY.create(AppError.IDB_OPEN, {\n        originalErrorMessage: e.message\n      });\n    });\n  }\n  return dbPromise;\n}\n\nexport async function readHeartbeatsFromIndexedDB(\n  app: FirebaseApp\n): Promise<HeartbeatsInIndexedDB | undefined> {\n  try {\n    const db = await getDbPromise();\n    const result = await db\n      .transaction(STORE_NAME)\n      .objectStore(STORE_NAME)\n      .get(computeKey(app));\n    return result;\n  } catch (e) {\n    if (e instanceof FirebaseError) {\n      logger.warn(e.message);\n    } else {\n      const idbGetError = ERROR_FACTORY.create(AppError.IDB_GET, {\n        originalErrorMessage: (e as Error)?.message\n      });\n      logger.warn(idbGetError.message);\n    }\n  }\n}\n\nexport async function writeHeartbeatsToIndexedDB(\n  app: FirebaseApp,\n  heartbeatObject: HeartbeatsInIndexedDB\n): Promise<void> {\n  try {\n    const db = await getDbPromise();\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const objectStore = tx.objectStore(STORE_NAME);\n    await objectStore.put(heartbeatObject, computeKey(app));\n    await tx.done;\n  } catch (e) {\n    if (e instanceof FirebaseError) {\n      logger.warn(e.message);\n    } else {\n      const idbGetError = ERROR_FACTORY.create(AppError.IDB_WRITE, {\n        originalErrorMessage: (e as Error)?.message\n      });\n      logger.warn(idbGetError.message);\n    }\n  }\n}\n\nfunction computeKey(app: FirebaseApp): string {\n  return `${app.name}!${app.options.appId}`;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ComponentContainer } from '@firebase/component';\nimport {\n  base64urlEncodeWithoutPadding,\n  isIndexedDBAvailable,\n  validateIndexedDBOpenable\n} from '@firebase/util';\nimport {\n  readHeartbeatsFromIndexedDB,\n  writeHeartbeatsToIndexedDB\n} from './indexeddb';\nimport { FirebaseApp } from './public-types';\nimport {\n  HeartbeatsByUserAgent,\n  HeartbeatService,\n  HeartbeatsInIndexedDB,\n  HeartbeatStorage,\n  SingleDateHeartbeat\n} from './types';\n\nconst MAX_HEADER_BYTES = 1024;\n// 30 days\nconst STORED_HEARTBEAT_RETENTION_MAX_MILLIS = 30 * 24 * 60 * 60 * 1000;\n\nexport class HeartbeatServiceImpl implements HeartbeatService {\n  /**\n   * The persistence layer for heartbeats\n   * Leave public for easier testing.\n   */\n  _storage: HeartbeatStorageImpl;\n\n  /**\n   * In-memory cache for heartbeats, used by getHeartbeatsHeader() to generate\n   * the header string.\n   * Stores one record per date. This will be consolidated into the standard\n   * format of one record per user agent string before being sent as a header.\n   * Populated from indexedDB when the controller is instantiated and should\n   * be kept in sync with indexedDB.\n   * Leave public for easier testing.\n   */\n  _heartbeatsCache: HeartbeatsInIndexedDB | null = null;\n\n  /**\n   * the initialization promise for populating heartbeatCache.\n   * If getHeartbeatsHeader() is called before the promise resolves\n   * (hearbeatsCache == null), it should wait for this promise\n   * Leave public for easier testing.\n   */\n  _heartbeatsCachePromise: Promise<HeartbeatsInIndexedDB>;\n  constructor(private readonly container: ComponentContainer) {\n    const app = this.container.getProvider('app').getImmediate();\n    this._storage = new HeartbeatStorageImpl(app);\n    this._heartbeatsCachePromise = this._storage.read().then(result => {\n      this._heartbeatsCache = result;\n      return result;\n    });\n  }\n\n  /**\n   * Called to report a heartbeat. The function will generate\n   * a HeartbeatsByUserAgent object, update heartbeatsCache, and persist it\n   * to IndexedDB.\n   * Note that we only store one heartbeat per day. So if a heartbeat for today is\n   * already logged, subsequent calls to this function in the same day will be ignored.\n   */\n  async triggerHeartbeat(): Promise<void> {\n    const platformLogger = this.container\n      .getProvider('platform-logger')\n      .getImmediate();\n\n    // This is the \"Firebase user agent\" string from the platform logger\n    // service, not the browser user agent.\n    const agent = platformLogger.getPlatformInfoString();\n    const date = getUTCDateString();\n    if (this._heartbeatsCache === null) {\n      this._heartbeatsCache = await this._heartbeatsCachePromise;\n    }\n    // Do not store a heartbeat if one is already stored for this day\n    // or if a header has already been sent today.\n    if (\n      this._heartbeatsCache.lastSentHeartbeatDate === date ||\n      this._heartbeatsCache.heartbeats.some(\n        singleDateHeartbeat => singleDateHeartbeat.date === date\n      )\n    ) {\n      return;\n    } else {\n      // There is no entry for this date. Create one.\n      this._heartbeatsCache.heartbeats.push({ date, agent });\n    }\n    // Remove entries older than 30 days.\n    this._heartbeatsCache.heartbeats = this._heartbeatsCache.heartbeats.filter(\n      singleDateHeartbeat => {\n        const hbTimestamp = new Date(singleDateHeartbeat.date).valueOf();\n        const now = Date.now();\n        return now - hbTimestamp <= STORED_HEARTBEAT_RETENTION_MAX_MILLIS;\n      }\n    );\n    return this._storage.overwrite(this._heartbeatsCache);\n  }\n\n  /**\n   * Returns a base64 encoded string which can be attached to the heartbeat-specific header directly.\n   * It also clears all heartbeats from memory as well as in IndexedDB.\n   *\n   * NOTE: Consuming product SDKs should not send the header if this method\n   * returns an empty string.\n   */\n  async getHeartbeatsHeader(): Promise<string> {\n    if (this._heartbeatsCache === null) {\n      await this._heartbeatsCachePromise;\n    }\n    // If it's still null or the array is empty, there is no data to send.\n    if (\n      this._heartbeatsCache === null ||\n      this._heartbeatsCache.heartbeats.length === 0\n    ) {\n      return '';\n    }\n    const date = getUTCDateString();\n    // Extract as many heartbeats from the cache as will fit under the size limit.\n    const { heartbeatsToSend, unsentEntries } = extractHeartbeatsForHeader(\n      this._heartbeatsCache.heartbeats\n    );\n    const headerString = base64urlEncodeWithoutPadding(\n      JSON.stringify({ version: 2, heartbeats: heartbeatsToSend })\n    );\n    // Store last sent date to prevent another being logged/sent for the same day.\n    this._heartbeatsCache.lastSentHeartbeatDate = date;\n    if (unsentEntries.length > 0) {\n      // Store any unsent entries if they exist.\n      this._heartbeatsCache.heartbeats = unsentEntries;\n      // This seems more likely than emptying the array (below) to lead to some odd state\n      // since the cache isn't empty and this will be called again on the next request,\n      // and is probably safest if we await it.\n      await this._storage.overwrite(this._heartbeatsCache);\n    } else {\n      this._heartbeatsCache.heartbeats = [];\n      // Do not wait for this, to reduce latency.\n      void this._storage.overwrite(this._heartbeatsCache);\n    }\n    return headerString;\n  }\n}\n\nfunction getUTCDateString(): string {\n  const today = new Date();\n  // Returns date format 'YYYY-MM-DD'\n  return today.toISOString().substring(0, 10);\n}\n\nexport function extractHeartbeatsForHeader(\n  heartbeatsCache: SingleDateHeartbeat[],\n  maxSize = MAX_HEADER_BYTES\n): {\n  heartbeatsToSend: HeartbeatsByUserAgent[];\n  unsentEntries: SingleDateHeartbeat[];\n} {\n  // Heartbeats grouped by user agent in the standard format to be sent in\n  // the header.\n  const heartbeatsToSend: HeartbeatsByUserAgent[] = [];\n  // Single date format heartbeats that are not sent.\n  let unsentEntries = heartbeatsCache.slice();\n  for (const singleDateHeartbeat of heartbeatsCache) {\n    // Look for an existing entry with the same user agent.\n    const heartbeatEntry = heartbeatsToSend.find(\n      hb => hb.agent === singleDateHeartbeat.agent\n    );\n    if (!heartbeatEntry) {\n      // If no entry for this user agent exists, create one.\n      heartbeatsToSend.push({\n        agent: singleDateHeartbeat.agent,\n        dates: [singleDateHeartbeat.date]\n      });\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        // If the header would exceed max size, remove the added heartbeat\n        // entry and stop adding to the header.\n        heartbeatsToSend.pop();\n        break;\n      }\n    } else {\n      heartbeatEntry.dates.push(singleDateHeartbeat.date);\n      // If the header would exceed max size, remove the added date\n      // and stop adding to the header.\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        heartbeatEntry.dates.pop();\n        break;\n      }\n    }\n    // Pop unsent entry from queue. (Skipped if adding the entry exceeded\n    // quota and the loop breaks early.)\n    unsentEntries = unsentEntries.slice(1);\n  }\n  return {\n    heartbeatsToSend,\n    unsentEntries\n  };\n}\n\nexport class HeartbeatStorageImpl implements HeartbeatStorage {\n  private _canUseIndexedDBPromise: Promise<boolean>;\n  constructor(public app: FirebaseApp) {\n    this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();\n  }\n  async runIndexedDBEnvironmentCheck(): Promise<boolean> {\n    if (!isIndexedDBAvailable()) {\n      return false;\n    } else {\n      return validateIndexedDBOpenable()\n        .then(() => true)\n        .catch(() => false);\n    }\n  }\n  /**\n   * Read all heartbeats.\n   */\n  async read(): Promise<HeartbeatsInIndexedDB> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return { heartbeats: [] };\n    } else {\n      const idbHeartbeatObject = await readHeartbeatsFromIndexedDB(this.app);\n      return idbHeartbeatObject || { heartbeats: [] };\n    }\n  }\n  // overwrite the storage with the provided heartbeats\n  async overwrite(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: heartbeatsObject.heartbeats\n      });\n    }\n  }\n  // add heartbeats\n  async add(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: [\n          ...existingHeartbeatsObject.heartbeats,\n          ...heartbeatsObject.heartbeats\n        ]\n      });\n    }\n  }\n}\n\n/**\n * Calculate bytes of a HeartbeatsByUserAgent array after being wrapped\n * in a platform logging header JSON object, stringified, and converted\n * to base 64.\n */\nexport function countBytes(heartbeatsCache: HeartbeatsByUserAgent[]): number {\n  // base64 has a restricted set of characters, all of which should be 1 byte.\n  return base64urlEncodeWithoutPadding(\n    // heartbeatsCache wrapper properties\n    JSON.stringify({ version: 2, heartbeats: heartbeatsCache })\n  ).length;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, ComponentType } from '@firebase/component';\nimport { PlatformLoggerServiceImpl } from './platformLoggerService';\nimport { name, version } from '../package.json';\nimport { _registerComponent } from './internal';\nimport { registerVersion } from './api';\nimport { HeartbeatServiceImpl } from './heartbeatService';\n\nexport function registerCoreComponents(variant?: string): void {\n  _registerComponent(\n    new Component(\n      'platform-logger',\n      container => new PlatformLoggerServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n  _registerComponent(\n    new Component(\n      'heartbeat',\n      container => new HeartbeatServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n\n  // Register `app` package.\n  registerVersion(name, version, variant);\n  // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n  registerVersion(name, version, '__BUILD_TARGET__');\n  // Register platform SDK identifier (no version).\n  registerVersion('fire-js', '');\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerVersion } from '@firebase/app';\nimport { name, version } from '../package.json';\n\nregisterVersion(name, version, 'app');\nexport * from '@firebase/app';\n","/**\n * Firebase Realtime Database\n *\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Database } from './api/Database';\nimport { registerDatabase } from './register';\n\nexport * from './api';\n\nregisterDatabase();\n\ndeclare module '@firebase/component' {\n  interface NameServiceMapping {\n    'database': Database;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** The semver (www.semver.org) version of the SDK. */\nexport let SDK_VERSION = '';\n\n/**\n * SDK_VERSION should be set before any database instance is created\n * @internal\n */\nexport function setSDKVersion(version: string): void {\n  SDK_VERSION = version;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { jsonEval, stringify } from '@firebase/util';\n\n/**\n * Wraps a DOM Storage object and:\n * - automatically encode objects as JSON strings before storing them to allow us to store arbitrary types.\n * - prefixes names with \"firebase:\" to avoid collisions with app data.\n *\n * We automatically (see storage.js) create two such wrappers, one for sessionStorage,\n * and one for localStorage.\n *\n */\nexport class DOMStorageWrapper {\n  // Use a prefix to avoid collisions with other stuff saved by the app.\n  private prefix_ = 'firebase:';\n\n  /**\n   * @param domStorage_ - The underlying storage object (e.g. localStorage or sessionStorage)\n   */\n  constructor(private domStorage_: Storage) {}\n\n  /**\n   * @param key - The key to save the value under\n   * @param value - The value being stored, or null to remove the key.\n   */\n  set(key: string, value: unknown | null) {\n    if (value == null) {\n      this.domStorage_.removeItem(this.prefixedName_(key));\n    } else {\n      this.domStorage_.setItem(this.prefixedName_(key), stringify(value));\n    }\n  }\n\n  /**\n   * @returns The value that was stored under this key, or null\n   */\n  get(key: string): unknown {\n    const storedVal = this.domStorage_.getItem(this.prefixedName_(key));\n    if (storedVal == null) {\n      return null;\n    } else {\n      return jsonEval(storedVal);\n    }\n  }\n\n  remove(key: string) {\n    this.domStorage_.removeItem(this.prefixedName_(key));\n  }\n\n  isInMemoryStorage: boolean;\n\n  prefixedName_(name: string): string {\n    return this.prefix_ + name;\n  }\n\n  toString(): string {\n    return this.domStorage_.toString();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { contains } from '@firebase/util';\n\n/**\n * An in-memory storage implementation that matches the API of DOMStorageWrapper\n * (TODO: create interface for both to implement).\n */\nexport class MemoryStorage {\n  private cache_: { [k: string]: unknown } = {};\n\n  set(key: string, value: unknown | null) {\n    if (value == null) {\n      delete this.cache_[key];\n    } else {\n      this.cache_[key] = value;\n    }\n  }\n\n  get(key: string): unknown {\n    if (contains(this.cache_, key)) {\n      return this.cache_[key];\n    }\n    return null;\n  }\n\n  remove(key: string) {\n    delete this.cache_[key];\n  }\n\n  isInMemoryStorage = true;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DOMStorageWrapper } from './DOMStorageWrapper';\nimport { MemoryStorage } from './MemoryStorage';\n\ndeclare const window: Window;\n\n/**\n * Helper to create a DOMStorageWrapper or else fall back to MemoryStorage.\n * TODO: Once MemoryStorage and DOMStorageWrapper have a shared interface this method annotation should change\n * to reflect this type\n *\n * @param domStorageName - Name of the underlying storage object\n *   (e.g. 'localStorage' or 'sessionStorage').\n * @returns Turning off type information until a common interface is defined.\n */\nconst createStoragefor = function (\n  domStorageName: string\n): DOMStorageWrapper | MemoryStorage {\n  try {\n    // NOTE: just accessing \"localStorage\" or \"window['localStorage']\" may throw a security exception,\n    // so it must be inside the try/catch.\n    if (\n      typeof window !== 'undefined' &&\n      typeof window[domStorageName] !== 'undefined'\n    ) {\n      // Need to test cache. Just because it's here doesn't mean it works\n      const domStorage = window[domStorageName];\n      domStorage.setItem('firebase:sentinel', 'cache');\n      domStorage.removeItem('firebase:sentinel');\n      return new DOMStorageWrapper(domStorage);\n    }\n  } catch (e) {}\n\n  // Failed to create wrapper.  Just return in-memory storage.\n  // TODO: log?\n  return new MemoryStorage();\n};\n\n/** A storage object that lasts across sessions */\nexport const PersistentStorage = createStoragefor('localStorage');\n\n/** A storage object that only lasts one session */\nexport const SessionStorage = createStoragefor('sessionStorage');\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Logger, LogLevel } from '@firebase/logger';\nimport {\n  assert,\n  base64,\n  Sha1,\n  stringToByteArray,\n  stringify,\n  isNodeSdk\n} from '@firebase/util';\n\nimport { SessionStorage } from '../storage/storage';\nimport { QueryContext } from '../view/EventRegistration';\n\ndeclare const window: Window;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndeclare const Windows: any;\n\nconst logClient = new Logger('@firebase/database');\n\n/**\n * Returns a locally-unique ID (generated by just incrementing up from 0 each time its called).\n */\nexport const LUIDGenerator: () => number = (function () {\n  let id = 1;\n  return function () {\n    return id++;\n  };\n})();\n\n/**\n * Sha1 hash of the input string\n * @param str - The string to hash\n * @returns {!string} The resulting hash\n */\nexport const sha1 = function (str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  const sha1 = new Sha1();\n  sha1.update(utf8Bytes);\n  const sha1Bytes = sha1.digest();\n  return base64.encodeByteArray(sha1Bytes);\n};\n\nconst buildLogMessage_ = function (...varArgs: unknown[]): string {\n  let message = '';\n  for (let i = 0; i < varArgs.length; i++) {\n    const arg = varArgs[i];\n    if (\n      Array.isArray(arg) ||\n      (arg &&\n        typeof arg === 'object' &&\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        typeof (arg as any).length === 'number')\n    ) {\n      message += buildLogMessage_.apply(null, arg);\n    } else if (typeof arg === 'object') {\n      message += stringify(arg);\n    } else {\n      message += arg;\n    }\n    message += ' ';\n  }\n\n  return message;\n};\n\n/**\n * Use this for all debug messages in Firebase.\n */\nexport let logger: ((a: string) => void) | null = null;\n\n/**\n * Flag to check for log availability on first log message\n */\nlet firstLog_ = true;\n\n/**\n * The implementation of Firebase.enableLogging (defined here to break dependencies)\n * @param logger_ - A flag to turn on logging, or a custom logger\n * @param persistent - Whether or not to persist logging settings across refreshes\n */\nexport const enableLogging = function (\n  logger_?: boolean | ((a: string) => void) | null,\n  persistent?: boolean\n) {\n  assert(\n    !persistent || logger_ === true || logger_ === false,\n    \"Can't turn on custom loggers persistently.\"\n  );\n  if (logger_ === true) {\n    logClient.logLevel = LogLevel.VERBOSE;\n    logger = logClient.log.bind(logClient);\n    if (persistent) {\n      SessionStorage.set('logging_enabled', true);\n    }\n  } else if (typeof logger_ === 'function') {\n    logger = logger_;\n  } else {\n    logger = null;\n    SessionStorage.remove('logging_enabled');\n  }\n};\n\nexport const log = function (...varArgs: unknown[]) {\n  if (firstLog_ === true) {\n    firstLog_ = false;\n    if (logger === null && SessionStorage.get('logging_enabled') === true) {\n      enableLogging(true);\n    }\n  }\n\n  if (logger) {\n    const message = buildLogMessage_.apply(null, varArgs);\n    logger(message);\n  }\n};\n\nexport const logWrapper = function (\n  prefix: string\n): (...varArgs: unknown[]) => void {\n  return function (...varArgs: unknown[]) {\n    log(prefix, ...varArgs);\n  };\n};\n\nexport const error = function (...varArgs: string[]) {\n  const message = 'FIREBASE INTERNAL ERROR: ' + buildLogMessage_(...varArgs);\n  logClient.error(message);\n};\n\nexport const fatal = function (...varArgs: string[]) {\n  const message = `FIREBASE FATAL ERROR: ${buildLogMessage_(...varArgs)}`;\n  logClient.error(message);\n  throw new Error(message);\n};\n\nexport const warn = function (...varArgs: unknown[]) {\n  const message = 'FIREBASE WARNING: ' + buildLogMessage_(...varArgs);\n  logClient.warn(message);\n};\n\n/**\n * Logs a warning if the containing page uses https. Called when a call to new Firebase\n * does not use https.\n */\nexport const warnIfPageIsSecure = function () {\n  // Be very careful accessing browser globals. Who knows what may or may not exist.\n  if (\n    typeof window !== 'undefined' &&\n    window.location &&\n    window.location.protocol &&\n    window.location.protocol.indexOf('https:') !== -1\n  ) {\n    warn(\n      'Insecure Firebase access from a secure page. ' +\n        'Please use https in calls to new Firebase().'\n    );\n  }\n};\n\nexport const warnAboutUnsupportedMethod = function (methodName: string) {\n  warn(\n    methodName +\n      ' is unsupported and will likely change soon.  ' +\n      'Please do not use.'\n  );\n};\n\n/**\n * Returns true if data is NaN, or +/- Infinity.\n */\nexport const isInvalidJSONNumber = function (data: unknown): boolean {\n  return (\n    typeof data === 'number' &&\n    (data !== data || // NaN\n      data === Number.POSITIVE_INFINITY ||\n      data === Number.NEGATIVE_INFINITY)\n  );\n};\n\nexport const executeWhenDOMReady = function (fn: () => void) {\n  if (isNodeSdk() || document.readyState === 'complete') {\n    fn();\n  } else {\n    // Modeled after jQuery. Try DOMContentLoaded and onreadystatechange (which\n    // fire before onload), but fall back to onload.\n\n    let called = false;\n    const wrappedFn = function () {\n      if (!document.body) {\n        setTimeout(wrappedFn, Math.floor(10));\n        return;\n      }\n\n      if (!called) {\n        called = true;\n        fn();\n      }\n    };\n\n    if (document.addEventListener) {\n      document.addEventListener('DOMContentLoaded', wrappedFn, false);\n      // fallback to onload.\n      window.addEventListener('load', wrappedFn, false);\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } else if ((document as any).attachEvent) {\n      // IE.\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (document as any).attachEvent('onreadystatechange', () => {\n        if (document.readyState === 'complete') {\n          wrappedFn();\n        }\n      });\n      // fallback to onload.\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (window as any).attachEvent('onload', wrappedFn);\n\n      // jQuery has an extra hack for IE that we could employ (based on\n      // http://javascript.nwbox.com/IEContentLoaded/) But it looks really old.\n      // I'm hoping we don't need it.\n    }\n  }\n};\n\n/**\n * Minimum key name. Invalid for actual data, used as a marker to sort before any valid names\n */\nexport const MIN_NAME = '[MIN_NAME]';\n\n/**\n * Maximum key name. Invalid for actual data, used as a marker to sort above any valid names\n */\nexport const MAX_NAME = '[MAX_NAME]';\n\n/**\n * Compares valid Firebase key names, plus min and max name\n */\nexport const nameCompare = function (a: string, b: string): number {\n  if (a === b) {\n    return 0;\n  } else if (a === MIN_NAME || b === MAX_NAME) {\n    return -1;\n  } else if (b === MIN_NAME || a === MAX_NAME) {\n    return 1;\n  } else {\n    const aAsInt = tryParseInt(a),\n      bAsInt = tryParseInt(b);\n\n    if (aAsInt !== null) {\n      if (bAsInt !== null) {\n        return aAsInt - bAsInt === 0 ? a.length - b.length : aAsInt - bAsInt;\n      } else {\n        return -1;\n      }\n    } else if (bAsInt !== null) {\n      return 1;\n    } else {\n      return a < b ? -1 : 1;\n    }\n  }\n};\n\n/**\n * @returns {!number} comparison result.\n */\nexport const stringCompare = function (a: string, b: string): number {\n  if (a === b) {\n    return 0;\n  } else if (a < b) {\n    return -1;\n  } else {\n    return 1;\n  }\n};\n\nexport const requireKey = function (\n  key: string,\n  obj: { [k: string]: unknown }\n): unknown {\n  if (obj && key in obj) {\n    return obj[key];\n  } else {\n    throw new Error(\n      'Missing required key (' + key + ') in object: ' + stringify(obj)\n    );\n  }\n};\n\nexport const ObjectToUniqueKey = function (obj: unknown): string {\n  if (typeof obj !== 'object' || obj === null) {\n    return stringify(obj);\n  }\n\n  const keys = [];\n  // eslint-disable-next-line guard-for-in\n  for (const k in obj) {\n    keys.push(k);\n  }\n\n  // Export as json, but with the keys sorted.\n  keys.sort();\n  let key = '{';\n  for (let i = 0; i < keys.length; i++) {\n    if (i !== 0) {\n      key += ',';\n    }\n    key += stringify(keys[i]);\n    key += ':';\n    key += ObjectToUniqueKey(obj[keys[i]]);\n  }\n\n  key += '}';\n  return key;\n};\n\n/**\n * Splits a string into a number of smaller segments of maximum size\n * @param str - The string\n * @param segsize - The maximum number of chars in the string.\n * @returns The string, split into appropriately-sized chunks\n */\nexport const splitStringBySize = function (\n  str: string,\n  segsize: number\n): string[] {\n  const len = str.length;\n\n  if (len <= segsize) {\n    return [str];\n  }\n\n  const dataSegs = [];\n  for (let c = 0; c < len; c += segsize) {\n    if (c + segsize > len) {\n      dataSegs.push(str.substring(c, len));\n    } else {\n      dataSegs.push(str.substring(c, c + segsize));\n    }\n  }\n  return dataSegs;\n};\n\n/**\n * Apply a function to each (key, value) pair in an object or\n * apply a function to each (index, value) pair in an array\n * @param obj - The object or array to iterate over\n * @param fn - The function to apply\n */\nexport function each(obj: object, fn: (k: string, v: unknown) => void) {\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      fn(key, obj[key]);\n    }\n  }\n}\n\n/**\n * Like goog.bind, but doesn't bother to create a closure if opt_context is null/undefined.\n * @param callback - Callback function.\n * @param context - Optional context to bind to.\n *\n */\nexport const bindCallback = function (\n  callback: (a: unknown) => void,\n  context?: object | null\n): (a: unknown) => void {\n  return context ? callback.bind(context) : callback;\n};\n\n/**\n * Borrowed from http://hg.secondlife.com/llsd/src/tip/js/typedarray.js (MIT License)\n * I made one modification at the end and removed the NaN / Infinity\n * handling (since it seemed broken [caused an overflow] and we don't need it).  See MJL comments.\n * @param v - A double\n *\n */\nexport const doubleToIEEE754String = function (v: number): string {\n  assert(!isInvalidJSONNumber(v), 'Invalid JSON number'); // MJL\n\n  const ebits = 11,\n    fbits = 52;\n  const bias = (1 << (ebits - 1)) - 1;\n  let s, e, f, ln, i;\n\n  // Compute sign, exponent, fraction\n  // Skip NaN / Infinity handling --MJL.\n  if (v === 0) {\n    e = 0;\n    f = 0;\n    s = 1 / v === -Infinity ? 1 : 0;\n  } else {\n    s = v < 0;\n    v = Math.abs(v);\n\n    if (v >= Math.pow(2, 1 - bias)) {\n      // Normalized\n      ln = Math.min(Math.floor(Math.log(v) / Math.LN2), bias);\n      e = ln + bias;\n      f = Math.round(v * Math.pow(2, fbits - ln) - Math.pow(2, fbits));\n    } else {\n      // Denormalized\n      e = 0;\n      f = Math.round(v / Math.pow(2, 1 - bias - fbits));\n    }\n  }\n\n  // Pack sign, exponent, fraction\n  const bits = [];\n  for (i = fbits; i; i -= 1) {\n    bits.push(f % 2 ? 1 : 0);\n    f = Math.floor(f / 2);\n  }\n  for (i = ebits; i; i -= 1) {\n    bits.push(e % 2 ? 1 : 0);\n    e = Math.floor(e / 2);\n  }\n  bits.push(s ? 1 : 0);\n  bits.reverse();\n  const str = bits.join('');\n\n  // Return the data as a hex string. --MJL\n  let hexByteString = '';\n  for (i = 0; i < 64; i += 8) {\n    let hexByte = parseInt(str.substr(i, 8), 2).toString(16);\n    if (hexByte.length === 1) {\n      hexByte = '0' + hexByte;\n    }\n    hexByteString = hexByteString + hexByte;\n  }\n  return hexByteString.toLowerCase();\n};\n\n/**\n * Used to detect if we're in a Chrome content script (which executes in an\n * isolated environment where long-polling doesn't work).\n */\nexport const isChromeExtensionContentScript = function (): boolean {\n  return !!(\n    typeof window === 'object' &&\n    window['chrome'] &&\n    window['chrome']['extension'] &&\n    !/^chrome/.test(window.location.href)\n  );\n};\n\n/**\n * Used to detect if we're in a Windows 8 Store app.\n */\nexport const isWindowsStoreApp = function (): boolean {\n  // Check for the presence of a couple WinRT globals\n  return typeof Windows === 'object' && typeof Windows.UI === 'object';\n};\n\n/**\n * Converts a server error code to a Javascript Error\n */\nexport function errorForServerCode(code: string, query: QueryContext): Error {\n  let reason = 'Unknown Error';\n  if (code === 'too_big') {\n    reason =\n      'The data requested exceeds the maximum size ' +\n      'that can be accessed with a single request.';\n  } else if (code === 'permission_denied') {\n    reason = \"Client doesn't have permission to access the desired data.\";\n  } else if (code === 'unavailable') {\n    reason = 'The service is unavailable';\n  }\n\n  const error = new Error(\n    code + ' at ' + query._path.toString() + ': ' + reason\n  );\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (error as any).code = code.toUpperCase();\n  return error;\n}\n\n/**\n * Used to test for integer-looking strings\n */\nexport const INTEGER_REGEXP_ = new RegExp('^-?(0*)\\\\d{1,10}$');\n\n/**\n * For use in keys, the minimum possible 32-bit integer.\n */\nexport const INTEGER_32_MIN = -2147483648;\n\n/**\n * For use in kyes, the maximum possible 32-bit integer.\n */\nexport const INTEGER_32_MAX = 2147483647;\n\n/**\n * If the string contains a 32-bit integer, return it.  Else return null.\n */\nexport const tryParseInt = function (str: string): number | null {\n  if (INTEGER_REGEXP_.test(str)) {\n    const intVal = Number(str);\n    if (intVal >= INTEGER_32_MIN && intVal <= INTEGER_32_MAX) {\n      return intVal;\n    }\n  }\n  return null;\n};\n\n/**\n * Helper to run some code but catch any exceptions and re-throw them later.\n * Useful for preventing user callbacks from breaking internal code.\n *\n * Re-throwing the exception from a setTimeout is a little evil, but it's very\n * convenient (we don't have to try to figure out when is a safe point to\n * re-throw it), and the behavior seems reasonable:\n *\n * * If you aren't pausing on exceptions, you get an error in the console with\n *   the correct stack trace.\n * * If you're pausing on all exceptions, the debugger will pause on your\n *   exception and then again when we rethrow it.\n * * If you're only pausing on uncaught exceptions, the debugger will only pause\n *   on us re-throwing it.\n *\n * @param fn - The code to guard.\n */\nexport const exceptionGuard = function (fn: () => void) {\n  try {\n    fn();\n  } catch (e) {\n    // Re-throw exception when it's safe.\n    setTimeout(() => {\n      // It used to be that \"throw e\" would result in a good console error with\n      // relevant context, but as of Chrome 39, you just get the firebase.js\n      // file/line number where we re-throw it, which is useless. So we log\n      // e.stack explicitly.\n      const stack = e.stack || '';\n      warn('Exception was thrown by user callback.', stack);\n      throw e;\n    }, Math.floor(0));\n  }\n};\n\n/**\n * Helper function to safely call opt_callback with the specified arguments.  It:\n * 1. Turns into a no-op if opt_callback is null or undefined.\n * 2. Wraps the call inside exceptionGuard to prevent exceptions from breaking our state.\n *\n * @param callback - Optional onComplete callback.\n * @param varArgs - Arbitrary args to be passed to opt_onComplete\n */\nexport const callUserCallback = function (\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  callback?: Function | null,\n  ...varArgs: unknown[]\n) {\n  if (typeof callback === 'function') {\n    exceptionGuard(() => {\n      callback(...varArgs);\n    });\n  }\n};\n\n/**\n * @returns {boolean} true if we think we're currently being crawled.\n */\nexport const beingCrawled = function (): boolean {\n  const userAgent =\n    (typeof window === 'object' &&\n      window['navigator'] &&\n      window['navigator']['userAgent']) ||\n    '';\n\n  // For now we whitelist the most popular crawlers.  We should refine this to be the set of crawlers we\n  // believe to support JavaScript/AJAX rendering.\n  // NOTE: Google Webmaster Tools doesn't really belong, but their \"This is how a visitor to your website\n  // would have seen the page\" is flaky if we don't treat it as a crawler.\n  return (\n    userAgent.search(\n      /googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i\n    ) >= 0\n  );\n};\n\n/**\n * Export a property of an object using a getter function.\n */\nexport const exportPropGetter = function (\n  object: object,\n  name: string,\n  fnGet: () => unknown\n) {\n  Object.defineProperty(object, name, { get: fnGet });\n};\n\n/**\n * Same as setTimeout() except on Node.JS it will /not/ prevent the process from exiting.\n *\n * It is removed with clearTimeout() as normal.\n *\n * @param fn - Function to run.\n * @param time - Milliseconds to wait before running.\n * @returns The setTimeout() return value.\n */\nexport const setTimeoutNonBlocking = function (\n  fn: () => void,\n  time: number\n): number | object {\n  const timeout: number | object = setTimeout(fn, time);\n  // Note: at the time of this comment, unrefTimer is under the unstable set of APIs. Run with --unstable to enable the API.\n  if (\n    typeof timeout === 'number' &&\n    // @ts-ignore Is only defined in Deno environments.\n    typeof Deno !== 'undefined' &&\n    // @ts-ignore Deno and unrefTimer are only defined in Deno environments.\n    Deno['unrefTimer']\n  ) {\n    // @ts-ignore Deno and unrefTimer are only defined in Deno environments.\n    Deno.unrefTimer(timeout);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  } else if (typeof timeout === 'object' && (timeout as any)['unref']) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (timeout as any)['unref']();\n  }\n\n  return timeout;\n};\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AppCheckInternalComponentName,\n  AppCheckTokenListener,\n  AppCheckTokenResult,\n  FirebaseAppCheckInternal\n} from '@firebase/app-check-interop-types';\nimport { Provider } from '@firebase/component';\n\nimport { warn } from './util/util';\n\n/**\n * Abstraction around AppCheck's token fetching capabilities.\n */\nexport class AppCheckTokenProvider {\n  private appCheck?: FirebaseAppCheckInternal;\n  constructor(\n    private appName_: string,\n    private appCheckProvider?: Provider<AppCheckInternalComponentName>\n  ) {\n    this.appCheck = appCheckProvider?.getImmediate({ optional: true });\n    if (!this.appCheck) {\n      appCheckProvider?.get().then(appCheck => (this.appCheck = appCheck));\n    }\n  }\n\n  getToken(forceRefresh?: boolean): Promise<AppCheckTokenResult> {\n    if (!this.appCheck) {\n      return new Promise<AppCheckTokenResult>((resolve, reject) => {\n        // Support delayed initialization of FirebaseAppCheck. This allows our\n        // customers to initialize the RTDB SDK before initializing Firebase\n        // AppCheck and ensures that all requests are authenticated if a token\n        // becomes available before the timoeout below expires.\n        setTimeout(() => {\n          if (this.appCheck) {\n            this.getToken(forceRefresh).then(resolve, reject);\n          } else {\n            resolve(null);\n          }\n        }, 0);\n      });\n    }\n    return this.appCheck.getToken(forceRefresh);\n  }\n\n  addTokenChangeListener(listener: AppCheckTokenListener) {\n    this.appCheckProvider\n      ?.get()\n      .then(appCheck => appCheck.addTokenListener(listener));\n  }\n\n  notifyForInvalidToken(): void {\n    warn(\n      `Provided AppCheck credentials for the app named \"${this.appName_}\" ` +\n        'are invalid. This usually indicates your app was not initialized correctly.'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseAuthTokenData } from '@firebase/app-types/private';\nimport {\n  FirebaseAuthInternal,\n  FirebaseAuthInternalName\n} from '@firebase/auth-interop-types';\nimport { Provider } from '@firebase/component';\n\nimport { log, warn } from './util/util';\n\nexport interface AuthTokenProvider {\n  getToken(forceRefresh: boolean): Promise<FirebaseAuthTokenData>;\n  addTokenChangeListener(listener: (token: string | null) => void): void;\n  removeTokenChangeListener(listener: (token: string | null) => void): void;\n  notifyForInvalidToken(): void;\n}\n\n/**\n * Abstraction around FirebaseApp's token fetching capabilities.\n */\nexport class FirebaseAuthTokenProvider implements AuthTokenProvider {\n  private auth_: FirebaseAuthInternal | null = null;\n\n  constructor(\n    private appName_: string,\n    private firebaseOptions_: object,\n    private authProvider_: Provider<FirebaseAuthInternalName>\n  ) {\n    this.auth_ = authProvider_.getImmediate({ optional: true });\n    if (!this.auth_) {\n      authProvider_.onInit(auth => (this.auth_ = auth));\n    }\n  }\n\n  getToken(forceRefresh: boolean): Promise<FirebaseAuthTokenData> {\n    if (!this.auth_) {\n      return new Promise<FirebaseAuthTokenData>((resolve, reject) => {\n        // Support delayed initialization of FirebaseAuth. This allows our\n        // customers to initialize the RTDB SDK before initializing Firebase\n        // Auth and ensures that all requests are authenticated if a token\n        // becomes available before the timoeout below expires.\n        setTimeout(() => {\n          if (this.auth_) {\n            this.getToken(forceRefresh).then(resolve, reject);\n          } else {\n            resolve(null);\n          }\n        }, 0);\n      });\n    }\n\n    return this.auth_.getToken(forceRefresh).catch(error => {\n      // TODO: Need to figure out all the cases this is raised and whether\n      // this makes sense.\n      if (error && error.code === 'auth/token-not-initialized') {\n        log('Got auth/token-not-initialized error.  Treating as null token.');\n        return null;\n      } else {\n        return Promise.reject(error);\n      }\n    });\n  }\n\n  addTokenChangeListener(listener: (token: string | null) => void): void {\n    // TODO: We might want to wrap the listener and call it with no args to\n    // avoid a leaky abstraction, but that makes removing the listener harder.\n    if (this.auth_) {\n      this.auth_.addAuthTokenListener(listener);\n    } else {\n      this.authProvider_\n        .get()\n        .then(auth => auth.addAuthTokenListener(listener));\n    }\n  }\n\n  removeTokenChangeListener(listener: (token: string | null) => void): void {\n    this.authProvider_\n      .get()\n      .then(auth => auth.removeAuthTokenListener(listener));\n  }\n\n  notifyForInvalidToken(): void {\n    let errorMessage =\n      'Provided authentication credentials for the app named \"' +\n      this.appName_ +\n      '\" are invalid. This usually indicates your app was not ' +\n      'initialized correctly. ';\n    if ('credential' in this.firebaseOptions_) {\n      errorMessage +=\n        'Make sure the \"credential\" property provided to initializeApp() ' +\n        'is authorized to access the specified \"databaseURL\" and is from the correct ' +\n        'project.';\n    } else if ('serviceAccount' in this.firebaseOptions_) {\n      errorMessage +=\n        'Make sure the \"serviceAccount\" property provided to initializeApp() ' +\n        'is authorized to access the specified \"databaseURL\" and is from the correct ' +\n        'project.';\n    } else {\n      errorMessage +=\n        'Make sure the \"apiKey\" and \"databaseURL\" properties provided to ' +\n        'initializeApp() match the values provided for your app at ' +\n        'https://console.firebase.google.com/.';\n    }\n    warn(errorMessage);\n  }\n}\n\n/* AuthTokenProvider that supplies a constant token. Used by Admin SDK or mockUserToken with emulators. */\nexport class EmulatorTokenProvider implements AuthTokenProvider {\n  /** A string that is treated as an admin access token by the RTDB emulator. Used by Admin SDK. */\n  static OWNER = 'owner';\n\n  constructor(private accessToken: string) {}\n\n  getToken(forceRefresh: boolean): Promise<FirebaseAuthTokenData> {\n    return Promise.resolve({\n      accessToken: this.accessToken\n    });\n  }\n\n  addTokenChangeListener(listener: (token: string | null) => void): void {\n    // Invoke the listener immediately to match the behavior in Firebase Auth\n    // (see packages/auth/src/auth.js#L1807)\n    listener(this.accessToken);\n  }\n\n  removeTokenChangeListener(listener: (token: string | null) => void): void {}\n\n  notifyForInvalidToken(): void {}\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const PROTOCOL_VERSION = '5';\n\nexport const VERSION_PARAM = 'v';\n\nexport const TRANSPORT_SESSION_PARAM = 's';\n\nexport const REFERER_PARAM = 'r';\n\nexport const FORGE_REF = 'f';\n\n// Matches console.firebase.google.com, firebase-console-*.corp.google.com and\n// firebase.corp.google.com\nexport const FORGE_DOMAIN_RE =\n  /(console\\.firebase|firebase-console-\\w+\\.corp|firebase\\.corp)\\.google\\.com/;\n\nexport const LAST_SESSION_PARAM = 'ls';\n\nexport const APPLICATION_ID_PARAM = 'p';\n\nexport const APP_CHECK_TOKEN_PARAM = 'ac';\n\nexport const WEBSOCKET = 'websocket';\n\nexport const LONG_POLLING = 'long_polling';\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { LONG_POLLING, WEBSOCKET } from '../realtime/Constants';\n\nimport { PersistentStorage } from './storage/storage';\nimport { each } from './util/util';\n\n/**\n * A class that holds metadata about a Repo object\n */\nexport class RepoInfo {\n  private _host: string;\n  private _domain: string;\n  internalHost: string;\n\n  /**\n   * @param host - Hostname portion of the url for the repo\n   * @param secure - Whether or not this repo is accessed over ssl\n   * @param namespace - The namespace represented by the repo\n   * @param webSocketOnly - Whether to prefer websockets over all other transports (used by Nest).\n   * @param nodeAdmin - Whether this instance uses Admin SDK credentials\n   * @param persistenceKey - Override the default session persistence storage key\n   */\n  constructor(\n    host: string,\n    public readonly secure: boolean,\n    public readonly namespace: string,\n    public readonly webSocketOnly: boolean,\n    public readonly nodeAdmin: boolean = false,\n    public readonly persistenceKey: string = '',\n    public readonly includeNamespaceInQueryParams: boolean = false,\n    public readonly isUsingEmulator: boolean = false\n  ) {\n    this._host = host.toLowerCase();\n    this._domain = this._host.substr(this._host.indexOf('.') + 1);\n    this.internalHost =\n      (PersistentStorage.get('host:' + host) as string) || this._host;\n  }\n\n  isCacheableHost(): boolean {\n    return this.internalHost.substr(0, 2) === 's-';\n  }\n\n  isCustomHost() {\n    return (\n      this._domain !== 'firebaseio.com' &&\n      this._domain !== 'firebaseio-demo.com'\n    );\n  }\n\n  get host() {\n    return this._host;\n  }\n\n  set host(newHost: string) {\n    if (newHost !== this.internalHost) {\n      this.internalHost = newHost;\n      if (this.isCacheableHost()) {\n        PersistentStorage.set('host:' + this._host, this.internalHost);\n      }\n    }\n  }\n\n  toString(): string {\n    let str = this.toURLString();\n    if (this.persistenceKey) {\n      str += '<' + this.persistenceKey + '>';\n    }\n    return str;\n  }\n\n  toURLString(): string {\n    const protocol = this.secure ? 'https://' : 'http://';\n    const query = this.includeNamespaceInQueryParams\n      ? `?ns=${this.namespace}`\n      : '';\n    return `${protocol}${this.host}/${query}`;\n  }\n}\n\nfunction repoInfoNeedsQueryParam(repoInfo: RepoInfo): boolean {\n  return (\n    repoInfo.host !== repoInfo.internalHost ||\n    repoInfo.isCustomHost() ||\n    repoInfo.includeNamespaceInQueryParams\n  );\n}\n\n/**\n * Returns the websocket URL for this repo\n * @param repoInfo - RepoInfo object\n * @param type - of connection\n * @param params - list\n * @returns The URL for this repo\n */\nexport function repoInfoConnectionURL(\n  repoInfo: RepoInfo,\n  type: string,\n  params: { [k: string]: string }\n): string {\n  assert(typeof type === 'string', 'typeof type must == string');\n  assert(typeof params === 'object', 'typeof params must == object');\n\n  let connURL: string;\n  if (type === WEBSOCKET) {\n    connURL =\n      (repoInfo.secure ? 'wss://' : 'ws://') + repoInfo.internalHost + '/.ws?';\n  } else if (type === LONG_POLLING) {\n    connURL =\n      (repoInfo.secure ? 'https://' : 'http://') +\n      repoInfo.internalHost +\n      '/.lp?';\n  } else {\n    throw new Error('Unknown connection type: ' + type);\n  }\n  if (repoInfoNeedsQueryParam(repoInfo)) {\n    params['ns'] = repoInfo.namespace;\n  }\n\n  const pairs: string[] = [];\n\n  each(params, (key: string, value: string) => {\n    pairs.push(key + '=' + value);\n  });\n\n  return connURL + pairs.join('&');\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { deepCopy, contains } from '@firebase/util';\n\n/**\n * Tracks a collection of stats.\n */\nexport class StatsCollection {\n  private counters_: { [k: string]: number } = {};\n\n  incrementCounter(name: string, amount: number = 1) {\n    if (!contains(this.counters_, name)) {\n      this.counters_[name] = 0;\n    }\n\n    this.counters_[name] += amount;\n  }\n\n  get() {\n    return deepCopy(this.counters_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RepoInfo } from '../RepoInfo';\n\nimport { StatsCollection } from './StatsCollection';\n\nconst collections: { [k: string]: StatsCollection } = {};\nconst reporters: { [k: string]: unknown } = {};\n\nexport function statsManagerGetCollection(repoInfo: RepoInfo): StatsCollection {\n  const hashString = repoInfo.toString();\n\n  if (!collections[hashString]) {\n    collections[hashString] = new StatsCollection();\n  }\n\n  return collections[hashString];\n}\n\nexport function statsManagerGetOrCreateReporter<T>(\n  repoInfo: RepoInfo,\n  creatorFunction: () => T\n): T {\n  const hashString = repoInfo.toString();\n\n  if (!reporters[hashString]) {\n    reporters[hashString] = creatorFunction();\n  }\n\n  return reporters[hashString] as T;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { exceptionGuard } from '../../core/util/util';\n\n/**\n * This class ensures the packets from the server arrive in order\n * This class takes data from the server and ensures it gets passed into the callbacks in order.\n */\nexport class PacketReceiver {\n  pendingResponses: unknown[] = [];\n  currentResponseNum = 0;\n  closeAfterResponse = -1;\n  onClose: (() => void) | null = null;\n\n  /**\n   * @param onMessage_\n   */\n  constructor(private onMessage_: (a: {}) => void) {}\n\n  closeAfter(responseNum: number, callback: () => void) {\n    this.closeAfterResponse = responseNum;\n    this.onClose = callback;\n    if (this.closeAfterResponse < this.currentResponseNum) {\n      this.onClose();\n      this.onClose = null;\n    }\n  }\n\n  /**\n   * Each message from the server comes with a response number, and an array of data. The responseNumber\n   * allows us to ensure that we process them in the right order, since we can't be guaranteed that all\n   * browsers will respond in the same order as the requests we sent\n   */\n  handleResponse(requestNum: number, data: unknown[]) {\n    this.pendingResponses[requestNum] = data;\n    while (this.pendingResponses[this.currentResponseNum]) {\n      const toProcess = this.pendingResponses[\n        this.currentResponseNum\n      ] as unknown[];\n      delete this.pendingResponses[this.currentResponseNum];\n      for (let i = 0; i < toProcess.length; ++i) {\n        if (toProcess[i]) {\n          exceptionGuard(() => {\n            this.onMessage_(toProcess[i]);\n          });\n        }\n      }\n      if (this.currentResponseNum === this.closeAfterResponse) {\n        if (this.onClose) {\n          this.onClose();\n          this.onClose = null;\n        }\n        break;\n      }\n      this.currentResponseNum++;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Encode, isNodeSdk, stringify } from '@firebase/util';\n\nimport { RepoInfo, repoInfoConnectionURL } from '../core/RepoInfo';\nimport { StatsCollection } from '../core/stats/StatsCollection';\nimport { statsManagerGetCollection } from '../core/stats/StatsManager';\nimport {\n  executeWhenDOMReady,\n  isChromeExtensionContentScript,\n  isWindowsStoreApp,\n  log,\n  logWrapper,\n  LUIDGenerator,\n  splitStringBySize\n} from '../core/util/util';\n\nimport {\n  APP_CHECK_TOKEN_PARAM,\n  APPLICATION_ID_PARAM,\n  FORGE_DOMAIN_RE,\n  FORGE_REF,\n  LAST_SESSION_PARAM,\n  LONG_POLLING,\n  PROTOCOL_VERSION,\n  REFERER_PARAM,\n  TRANSPORT_SESSION_PARAM,\n  VERSION_PARAM\n} from './Constants';\nimport { PacketReceiver } from './polling/PacketReceiver';\nimport { Transport } from './Transport';\n\n// URL query parameters associated with longpolling\nexport const FIREBASE_LONGPOLL_START_PARAM = 'start';\nexport const FIREBASE_LONGPOLL_CLOSE_COMMAND = 'close';\nexport const FIREBASE_LONGPOLL_COMMAND_CB_NAME = 'pLPCommand';\nexport const FIREBASE_LONGPOLL_DATA_CB_NAME = 'pRTLPCB';\nexport const FIREBASE_LONGPOLL_ID_PARAM = 'id';\nexport const FIREBASE_LONGPOLL_PW_PARAM = 'pw';\nexport const FIREBASE_LONGPOLL_SERIAL_PARAM = 'ser';\nexport const FIREBASE_LONGPOLL_CALLBACK_ID_PARAM = 'cb';\nexport const FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM = 'seg';\nexport const FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET = 'ts';\nexport const FIREBASE_LONGPOLL_DATA_PARAM = 'd';\nexport const FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM = 'disconn';\nexport const FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM = 'dframe';\n\n//Data size constants.\n//TODO: Perf: the maximum length actually differs from browser to browser.\n// We should check what browser we're on and set accordingly.\nconst MAX_URL_DATA_SIZE = 1870;\nconst SEG_HEADER_SIZE = 30; //ie: &seg=8299234&ts=982389123&d=\nconst MAX_PAYLOAD_SIZE = MAX_URL_DATA_SIZE - SEG_HEADER_SIZE;\n\n/**\n * Keepalive period\n * send a fresh request at minimum every 25 seconds. Opera has a maximum request\n * length of 30 seconds that we can't exceed.\n */\nconst KEEPALIVE_REQUEST_INTERVAL = 25000;\n\n/**\n * How long to wait before aborting a long-polling connection attempt.\n */\nconst LP_CONNECT_TIMEOUT = 30000;\n\n/**\n * This class manages a single long-polling connection.\n */\nexport class BrowserPollConnection implements Transport {\n  bytesSent = 0;\n  bytesReceived = 0;\n  urlFn: (params: object) => string;\n  scriptTagHolder: FirebaseIFrameScriptHolder;\n  myDisconnFrame: HTMLIFrameElement;\n  curSegmentNum: number;\n  myPacketOrderer: PacketReceiver;\n  id: string;\n  password: string;\n  private log_: (...a: unknown[]) => void;\n  private stats_: StatsCollection;\n  private everConnected_ = false;\n  private isClosed_: boolean;\n  private connectTimeoutTimer_: number | null;\n  private onDisconnect_: ((a?: boolean) => void) | null;\n\n  /**\n   * @param connId An identifier for this connection, used for logging\n   * @param repoInfo The info for the endpoint to send data to.\n   * @param applicationId The Firebase App ID for this project.\n   * @param appCheckToken The AppCheck token for this client.\n   * @param authToken The AuthToken to use for this connection.\n   * @param transportSessionId Optional transportSessionid if we are\n   * reconnecting for an existing transport session\n   * @param lastSessionId Optional lastSessionId if the PersistentConnection has\n   * already created a connection previously\n   */\n  constructor(\n    public connId: string,\n    public repoInfo: RepoInfo,\n    private applicationId?: string,\n    private appCheckToken?: string,\n    private authToken?: string,\n    public transportSessionId?: string,\n    public lastSessionId?: string\n  ) {\n    this.log_ = logWrapper(connId);\n    this.stats_ = statsManagerGetCollection(repoInfo);\n    this.urlFn = (params: { [k: string]: string }) => {\n      // Always add the token if we have one.\n      if (this.appCheckToken) {\n        params[APP_CHECK_TOKEN_PARAM] = this.appCheckToken;\n      }\n      return repoInfoConnectionURL(repoInfo, LONG_POLLING, params);\n    };\n  }\n\n  /**\n   * @param onMessage - Callback when messages arrive\n   * @param onDisconnect - Callback with connection lost.\n   */\n  open(onMessage: (msg: {}) => void, onDisconnect: (a?: boolean) => void) {\n    this.curSegmentNum = 0;\n    this.onDisconnect_ = onDisconnect;\n    this.myPacketOrderer = new PacketReceiver(onMessage);\n    this.isClosed_ = false;\n\n    this.connectTimeoutTimer_ = setTimeout(() => {\n      this.log_('Timed out trying to connect.');\n      // Make sure we clear the host cache\n      this.onClosed_();\n      this.connectTimeoutTimer_ = null;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    }, Math.floor(LP_CONNECT_TIMEOUT)) as any;\n\n    // Ensure we delay the creation of the iframe until the DOM is loaded.\n    executeWhenDOMReady(() => {\n      if (this.isClosed_) {\n        return;\n      }\n\n      //Set up a callback that gets triggered once a connection is set up.\n      this.scriptTagHolder = new FirebaseIFrameScriptHolder(\n        (...args) => {\n          const [command, arg1, arg2, arg3, arg4] = args;\n          this.incrementIncomingBytes_(args);\n          if (!this.scriptTagHolder) {\n            return; // we closed the connection.\n          }\n\n          if (this.connectTimeoutTimer_) {\n            clearTimeout(this.connectTimeoutTimer_);\n            this.connectTimeoutTimer_ = null;\n          }\n          this.everConnected_ = true;\n          if (command === FIREBASE_LONGPOLL_START_PARAM) {\n            this.id = arg1 as string;\n            this.password = arg2 as string;\n          } else if (command === FIREBASE_LONGPOLL_CLOSE_COMMAND) {\n            // Don't clear the host cache. We got a response from the server, so we know it's reachable\n            if (arg1) {\n              // We aren't expecting any more data (other than what the server's already in the process of sending us\n              // through our already open polls), so don't send any more.\n              this.scriptTagHolder.sendNewPolls = false;\n\n              // arg1 in this case is the last response number sent by the server. We should try to receive\n              // all of the responses up to this one before closing\n              this.myPacketOrderer.closeAfter(arg1 as number, () => {\n                this.onClosed_();\n              });\n            } else {\n              this.onClosed_();\n            }\n          } else {\n            throw new Error('Unrecognized command received: ' + command);\n          }\n        },\n        (...args) => {\n          const [pN, data] = args;\n          this.incrementIncomingBytes_(args);\n          this.myPacketOrderer.handleResponse(pN as number, data as unknown[]);\n        },\n        () => {\n          this.onClosed_();\n        },\n        this.urlFn\n      );\n\n      //Send the initial request to connect. The serial number is simply to keep the browser from pulling previous results\n      //from cache.\n      const urlParams: { [k: string]: string | number } = {};\n      urlParams[FIREBASE_LONGPOLL_START_PARAM] = 't';\n      urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = Math.floor(\n        Math.random() * 100000000\n      );\n      if (this.scriptTagHolder.uniqueCallbackIdentifier) {\n        urlParams[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM] =\n          this.scriptTagHolder.uniqueCallbackIdentifier;\n      }\n      urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\n      if (this.transportSessionId) {\n        urlParams[TRANSPORT_SESSION_PARAM] = this.transportSessionId;\n      }\n      if (this.lastSessionId) {\n        urlParams[LAST_SESSION_PARAM] = this.lastSessionId;\n      }\n      if (this.applicationId) {\n        urlParams[APPLICATION_ID_PARAM] = this.applicationId;\n      }\n      if (this.appCheckToken) {\n        urlParams[APP_CHECK_TOKEN_PARAM] = this.appCheckToken;\n      }\n      if (\n        typeof location !== 'undefined' &&\n        location.hostname &&\n        FORGE_DOMAIN_RE.test(location.hostname)\n      ) {\n        urlParams[REFERER_PARAM] = FORGE_REF;\n      }\n      const connectURL = this.urlFn(urlParams);\n      this.log_('Connecting via long-poll to ' + connectURL);\n      this.scriptTagHolder.addTag(connectURL, () => {\n        /* do nothing */\n      });\n    });\n  }\n\n  /**\n   * Call this when a handshake has completed successfully and we want to consider the connection established\n   */\n  start() {\n    this.scriptTagHolder.startLongPoll(this.id, this.password);\n    this.addDisconnectPingFrame(this.id, this.password);\n  }\n\n  static forceAllow_: boolean;\n\n  /**\n   * Forces long polling to be considered as a potential transport\n   */\n  static forceAllow() {\n    BrowserPollConnection.forceAllow_ = true;\n  }\n\n  static forceDisallow_: boolean;\n\n  /**\n   * Forces longpolling to not be considered as a potential transport\n   */\n  static forceDisallow() {\n    BrowserPollConnection.forceDisallow_ = true;\n  }\n\n  // Static method, use string literal so it can be accessed in a generic way\n  static isAvailable() {\n    if (isNodeSdk()) {\n      return false;\n    } else if (BrowserPollConnection.forceAllow_) {\n      return true;\n    } else {\n      // NOTE: In React-Native there's normally no 'document', but if you debug a React-Native app in\n      // the Chrome debugger, 'document' is defined, but document.createElement is null (2015/06/08).\n      return (\n        !BrowserPollConnection.forceDisallow_ &&\n        typeof document !== 'undefined' &&\n        document.createElement != null &&\n        !isChromeExtensionContentScript() &&\n        !isWindowsStoreApp()\n      );\n    }\n  }\n\n  /**\n   * No-op for polling\n   */\n  markConnectionHealthy() {}\n\n  /**\n   * Stops polling and cleans up the iframe\n   */\n  private shutdown_() {\n    this.isClosed_ = true;\n\n    if (this.scriptTagHolder) {\n      this.scriptTagHolder.close();\n      this.scriptTagHolder = null;\n    }\n\n    //remove the disconnect frame, which will trigger an XHR call to the server to tell it we're leaving.\n    if (this.myDisconnFrame) {\n      document.body.removeChild(this.myDisconnFrame);\n      this.myDisconnFrame = null;\n    }\n\n    if (this.connectTimeoutTimer_) {\n      clearTimeout(this.connectTimeoutTimer_);\n      this.connectTimeoutTimer_ = null;\n    }\n  }\n\n  /**\n   * Triggered when this transport is closed\n   */\n  private onClosed_() {\n    if (!this.isClosed_) {\n      this.log_('Longpoll is closing itself');\n      this.shutdown_();\n\n      if (this.onDisconnect_) {\n        this.onDisconnect_(this.everConnected_);\n        this.onDisconnect_ = null;\n      }\n    }\n  }\n\n  /**\n   * External-facing close handler. RealTime has requested we shut down. Kill our connection and tell the server\n   * that we've left.\n   */\n  close() {\n    if (!this.isClosed_) {\n      this.log_('Longpoll is being closed.');\n      this.shutdown_();\n    }\n  }\n\n  /**\n   * Send the JSON object down to the server. It will need to be stringified, base64 encoded, and then\n   * broken into chunks (since URLs have a small maximum length).\n   * @param data - The JSON data to transmit.\n   */\n  send(data: {}) {\n    const dataStr = stringify(data);\n    this.bytesSent += dataStr.length;\n    this.stats_.incrementCounter('bytes_sent', dataStr.length);\n\n    //first, lets get the base64-encoded data\n    const base64data = base64Encode(dataStr);\n\n    //We can only fit a certain amount in each URL, so we need to split this request\n    //up into multiple pieces if it doesn't fit in one request.\n    const dataSegs = splitStringBySize(base64data, MAX_PAYLOAD_SIZE);\n\n    //Enqueue each segment for transmission. We assign each chunk a sequential ID and a total number\n    //of segments so that we can reassemble the packet on the server.\n    for (let i = 0; i < dataSegs.length; i++) {\n      this.scriptTagHolder.enqueueSegment(\n        this.curSegmentNum,\n        dataSegs.length,\n        dataSegs[i]\n      );\n      this.curSegmentNum++;\n    }\n  }\n\n  /**\n   * This is how we notify the server that we're leaving.\n   * We aren't able to send requests with DHTML on a window close event, but we can\n   * trigger XHR requests in some browsers (everything but Opera basically).\n   */\n  addDisconnectPingFrame(id: string, pw: string) {\n    if (isNodeSdk()) {\n      return;\n    }\n    this.myDisconnFrame = document.createElement('iframe');\n    const urlParams: { [k: string]: string } = {};\n    urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM] = 't';\n    urlParams[FIREBASE_LONGPOLL_ID_PARAM] = id;\n    urlParams[FIREBASE_LONGPOLL_PW_PARAM] = pw;\n    this.myDisconnFrame.src = this.urlFn(urlParams);\n    this.myDisconnFrame.style.display = 'none';\n\n    document.body.appendChild(this.myDisconnFrame);\n  }\n\n  /**\n   * Used to track the bytes received by this client\n   */\n  private incrementIncomingBytes_(args: unknown) {\n    // TODO: This is an annoying perf hit just to track the number of incoming bytes.  Maybe it should be opt-in.\n    const bytesReceived = stringify(args).length;\n    this.bytesReceived += bytesReceived;\n    this.stats_.incrementCounter('bytes_received', bytesReceived);\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport interface IFrameElement extends HTMLIFrameElement {\n  doc: Document;\n}\n\n/*********************************************************************************************\n * A wrapper around an iframe that is used as a long-polling script holder.\n *********************************************************************************************/\nexport class FirebaseIFrameScriptHolder {\n  //We maintain a count of all of the outstanding requests, because if we have too many active at once it can cause\n  //problems in some browsers.\n  outstandingRequests = new Set<number>();\n\n  //A queue of the pending segments waiting for transmission to the server.\n  pendingSegs: Array<{ seg: number; ts: number; d: unknown }> = [];\n\n  //A serial number. We use this for two things:\n  // 1) A way to ensure the browser doesn't cache responses to polls\n  // 2) A way to make the server aware when long-polls arrive in a different order than we started them. The\n  //    server needs to release both polls in this case or it will cause problems in Opera since Opera can only execute\n  //    JSONP code in the order it was added to the iframe.\n  currentSerial = Math.floor(Math.random() * 100000000);\n\n  // This gets set to false when we're \"closing down\" the connection (e.g. we're switching transports but there's still\n  // incoming data from the server that we're waiting for).\n  sendNewPolls = true;\n\n  uniqueCallbackIdentifier: number;\n  myIFrame: IFrameElement;\n  alive: boolean;\n  myID: string;\n  myPW: string;\n  commandCB: (command: string, ...args: unknown[]) => void;\n  onMessageCB: (...args: unknown[]) => void;\n\n  /**\n   * @param commandCB - The callback to be called when control commands are recevied from the server.\n   * @param onMessageCB - The callback to be triggered when responses arrive from the server.\n   * @param onDisconnect - The callback to be triggered when this tag holder is closed\n   * @param urlFn - A function that provides the URL of the endpoint to send data to.\n   */\n  constructor(\n    commandCB: (command: string, ...args: unknown[]) => void,\n    onMessageCB: (...args: unknown[]) => void,\n    public onDisconnect: () => void,\n    public urlFn: (a: object) => string\n  ) {\n    if (!isNodeSdk()) {\n      //Each script holder registers a couple of uniquely named callbacks with the window. These are called from the\n      //iframes where we put the long-polling script tags. We have two callbacks:\n      //   1) Command Callback - Triggered for control issues, like starting a connection.\n      //   2) Message Callback - Triggered when new data arrives.\n      this.uniqueCallbackIdentifier = LUIDGenerator();\n      window[\n        FIREBASE_LONGPOLL_COMMAND_CB_NAME + this.uniqueCallbackIdentifier\n      ] = commandCB;\n      window[FIREBASE_LONGPOLL_DATA_CB_NAME + this.uniqueCallbackIdentifier] =\n        onMessageCB;\n\n      //Create an iframe for us to add script tags to.\n      this.myIFrame = FirebaseIFrameScriptHolder.createIFrame_();\n\n      // Set the iframe's contents.\n      let script = '';\n      // if we set a javascript url, it's IE and we need to set the document domain. The javascript url is sufficient\n      // for ie9, but ie8 needs to do it again in the document itself.\n      if (\n        this.myIFrame.src &&\n        this.myIFrame.src.substr(0, 'javascript:'.length) === 'javascript:'\n      ) {\n        const currentDomain = document.domain;\n        script = '<script>document.domain=\"' + currentDomain + '\";</script>';\n      }\n      const iframeContents = '<html><body>' + script + '</body></html>';\n      try {\n        this.myIFrame.doc.open();\n        this.myIFrame.doc.write(iframeContents);\n        this.myIFrame.doc.close();\n      } catch (e) {\n        log('frame writing exception');\n        if (e.stack) {\n          log(e.stack);\n        }\n        log(e);\n      }\n    } else {\n      this.commandCB = commandCB;\n      this.onMessageCB = onMessageCB;\n    }\n  }\n\n  /**\n   * Each browser has its own funny way to handle iframes. Here we mush them all together into one object that I can\n   * actually use.\n   */\n  private static createIFrame_(): IFrameElement {\n    const iframe = document.createElement('iframe') as IFrameElement;\n    iframe.style.display = 'none';\n\n    // This is necessary in order to initialize the document inside the iframe\n    if (document.body) {\n      document.body.appendChild(iframe);\n      try {\n        // If document.domain has been modified in IE, this will throw an error, and we need to set the\n        // domain of the iframe's document manually. We can do this via a javascript: url as the src attribute\n        // Also note that we must do this *after* the iframe has been appended to the page. Otherwise it doesn't work.\n        const a = iframe.contentWindow.document;\n        if (!a) {\n          // Apologies for the log-spam, I need to do something to keep closure from optimizing out the assignment above.\n          log('No IE domain setting required');\n        }\n      } catch (e) {\n        const domain = document.domain;\n        iframe.src =\n          \"javascript:void((function(){document.open();document.domain='\" +\n          domain +\n          \"';document.close();})())\";\n      }\n    } else {\n      // LongPollConnection attempts to delay initialization until the document is ready, so hopefully this\n      // never gets hit.\n      throw 'Document body has not initialized. Wait to initialize Firebase until after the document is ready.';\n    }\n\n    // Get the document of the iframe in a browser-specific way.\n    if (iframe.contentDocument) {\n      iframe.doc = iframe.contentDocument; // Firefox, Opera, Safari\n    } else if (iframe.contentWindow) {\n      iframe.doc = iframe.contentWindow.document; // Internet Explorer\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } else if ((iframe as any).document) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      iframe.doc = (iframe as any).document; //others?\n    }\n\n    return iframe;\n  }\n\n  /**\n   * Cancel all outstanding queries and remove the frame.\n   */\n  close() {\n    //Mark this iframe as dead, so no new requests are sent.\n    this.alive = false;\n\n    if (this.myIFrame) {\n      //We have to actually remove all of the html inside this iframe before removing it from the\n      //window, or IE will continue loading and executing the script tags we've already added, which\n      //can lead to some errors being thrown. Setting textContent seems to be the safest way to do this.\n      this.myIFrame.doc.body.textContent = '';\n      setTimeout(() => {\n        if (this.myIFrame !== null) {\n          document.body.removeChild(this.myIFrame);\n          this.myIFrame = null;\n        }\n      }, Math.floor(0));\n    }\n\n    // Protect from being called recursively.\n    const onDisconnect = this.onDisconnect;\n    if (onDisconnect) {\n      this.onDisconnect = null;\n      onDisconnect();\n    }\n  }\n\n  /**\n   * Actually start the long-polling session by adding the first script tag(s) to the iframe.\n   * @param id - The ID of this connection\n   * @param pw - The password for this connection\n   */\n  startLongPoll(id: string, pw: string) {\n    this.myID = id;\n    this.myPW = pw;\n    this.alive = true;\n\n    //send the initial request. If there are requests queued, make sure that we transmit as many as we are currently able to.\n    while (this.newRequest_()) {}\n  }\n\n  /**\n   * This is called any time someone might want a script tag to be added. It adds a script tag when there aren't\n   * too many outstanding requests and we are still alive.\n   *\n   * If there are outstanding packet segments to send, it sends one. If there aren't, it sends a long-poll anyways if\n   * needed.\n   */\n  private newRequest_() {\n    // We keep one outstanding request open all the time to receive data, but if we need to send data\n    // (pendingSegs.length > 0) then we create a new request to send the data.  The server will automatically\n    // close the old request.\n    if (\n      this.alive &&\n      this.sendNewPolls &&\n      this.outstandingRequests.size < (this.pendingSegs.length > 0 ? 2 : 1)\n    ) {\n      //construct our url\n      this.currentSerial++;\n      const urlParams: { [k: string]: string | number } = {};\n      urlParams[FIREBASE_LONGPOLL_ID_PARAM] = this.myID;\n      urlParams[FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;\n      urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = this.currentSerial;\n      let theURL = this.urlFn(urlParams);\n      //Now add as much data as we can.\n      let curDataString = '';\n      let i = 0;\n\n      while (this.pendingSegs.length > 0) {\n        //first, lets see if the next segment will fit.\n        const nextSeg = this.pendingSegs[0];\n        if (\n          (nextSeg.d as unknown[]).length +\n            SEG_HEADER_SIZE +\n            curDataString.length <=\n          MAX_URL_DATA_SIZE\n        ) {\n          //great, the segment will fit. Lets append it.\n          const theSeg = this.pendingSegs.shift();\n          curDataString =\n            curDataString +\n            '&' +\n            FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM +\n            i +\n            '=' +\n            theSeg.seg +\n            '&' +\n            FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET +\n            i +\n            '=' +\n            theSeg.ts +\n            '&' +\n            FIREBASE_LONGPOLL_DATA_PARAM +\n            i +\n            '=' +\n            theSeg.d;\n          i++;\n        } else {\n          break;\n        }\n      }\n\n      theURL = theURL + curDataString;\n      this.addLongPollTag_(theURL, this.currentSerial);\n\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Queue a packet for transmission to the server.\n   * @param segnum - A sequential id for this packet segment used for reassembly\n   * @param totalsegs - The total number of segments in this packet\n   * @param data - The data for this segment.\n   */\n  enqueueSegment(segnum: number, totalsegs: number, data: unknown) {\n    //add this to the queue of segments to send.\n    this.pendingSegs.push({ seg: segnum, ts: totalsegs, d: data });\n\n    //send the data immediately if there isn't already data being transmitted, unless\n    //startLongPoll hasn't been called yet.\n    if (this.alive) {\n      this.newRequest_();\n    }\n  }\n\n  /**\n   * Add a script tag for a regular long-poll request.\n   * @param url - The URL of the script tag.\n   * @param serial - The serial number of the request.\n   */\n  private addLongPollTag_(url: string, serial: number) {\n    //remember that we sent this request.\n    this.outstandingRequests.add(serial);\n\n    const doNewRequest = () => {\n      this.outstandingRequests.delete(serial);\n      this.newRequest_();\n    };\n\n    // If this request doesn't return on its own accord (by the server sending us some data), we'll\n    // create a new one after the KEEPALIVE interval to make sure we always keep a fresh request open.\n    const keepaliveTimeout = setTimeout(\n      doNewRequest,\n      Math.floor(KEEPALIVE_REQUEST_INTERVAL)\n    );\n\n    const readyStateCB = () => {\n      // Request completed.  Cancel the keepalive.\n      clearTimeout(keepaliveTimeout);\n\n      // Trigger a new request so we can continue receiving data.\n      doNewRequest();\n    };\n\n    this.addTag(url, readyStateCB);\n  }\n\n  /**\n   * Add an arbitrary script tag to the iframe.\n   * @param url - The URL for the script tag source.\n   * @param loadCB - A callback to be triggered once the script has loaded.\n   */\n  addTag(url: string, loadCB: () => void) {\n    if (isNodeSdk()) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (this as any).doNodeLongPoll(url, loadCB);\n    } else {\n      setTimeout(() => {\n        try {\n          // if we're already closed, don't add this poll\n          if (!this.sendNewPolls) {\n            return;\n          }\n          const newScript = this.myIFrame.doc.createElement('script');\n          newScript.type = 'text/javascript';\n          newScript.async = true;\n          newScript.src = url;\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          newScript.onload = (newScript as any).onreadystatechange =\n            function () {\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              const rstate = (newScript as any).readyState;\n              if (!rstate || rstate === 'loaded' || rstate === 'complete') {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                newScript.onload = (newScript as any).onreadystatechange = null;\n                if (newScript.parentNode) {\n                  newScript.parentNode.removeChild(newScript);\n                }\n                loadCB();\n              }\n            };\n          newScript.onerror = () => {\n            log('Long-poll script failed to load: ' + url);\n            this.sendNewPolls = false;\n            this.close();\n          };\n          this.myIFrame.doc.body.appendChild(newScript);\n        } catch (e) {\n          // TODO: we should make this error visible somehow\n        }\n      }, Math.floor(1));\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, isNodeSdk, jsonEval, stringify } from '@firebase/util';\n\nimport { RepoInfo, repoInfoConnectionURL } from '../core/RepoInfo';\nimport { StatsCollection } from '../core/stats/StatsCollection';\nimport { statsManagerGetCollection } from '../core/stats/StatsManager';\nimport { PersistentStorage } from '../core/storage/storage';\nimport { logWrapper, splitStringBySize } from '../core/util/util';\nimport { SDK_VERSION } from '../core/version';\n\nimport {\n  APPLICATION_ID_PARAM,\n  APP_CHECK_TOKEN_PARAM,\n  FORGE_DOMAIN_RE,\n  FORGE_REF,\n  LAST_SESSION_PARAM,\n  PROTOCOL_VERSION,\n  REFERER_PARAM,\n  TRANSPORT_SESSION_PARAM,\n  VERSION_PARAM,\n  WEBSOCKET\n} from './Constants';\nimport { Transport } from './Transport';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndeclare const MozWebSocket: any;\n\nconst WEBSOCKET_MAX_FRAME_SIZE = 16384;\nconst WEBSOCKET_KEEPALIVE_INTERVAL = 45000;\n\nlet WebSocketImpl = null;\nif (typeof MozWebSocket !== 'undefined') {\n  WebSocketImpl = MozWebSocket;\n} else if (typeof WebSocket !== 'undefined') {\n  WebSocketImpl = WebSocket;\n}\n\nexport function setWebSocketImpl(impl) {\n  WebSocketImpl = impl;\n}\n\n/**\n * Create a new websocket connection with the given callbacks.\n */\nexport class WebSocketConnection implements Transport {\n  keepaliveTimer: number | null = null;\n  frames: string[] | null = null;\n  totalFrames = 0;\n  bytesSent = 0;\n  bytesReceived = 0;\n  connURL: string;\n  onDisconnect: (a?: boolean) => void;\n  onMessage: (msg: {}) => void;\n  mySock: WebSocket | null;\n  private log_: (...a: unknown[]) => void;\n  private stats_: StatsCollection;\n  private everConnected_: boolean;\n  private isClosed_: boolean;\n  private nodeAdmin: boolean;\n\n  /**\n   * @param connId identifier for this transport\n   * @param repoInfo The info for the websocket endpoint.\n   * @param applicationId The Firebase App ID for this project.\n   * @param appCheckToken The App Check Token for this client.\n   * @param authToken The Auth Token for this client.\n   * @param transportSessionId Optional transportSessionId if this is connecting\n   * to an existing transport session\n   * @param lastSessionId Optional lastSessionId if there was a previous\n   * connection\n   */\n  constructor(\n    public connId: string,\n    repoInfo: RepoInfo,\n    private applicationId?: string,\n    private appCheckToken?: string,\n    private authToken?: string,\n    transportSessionId?: string,\n    lastSessionId?: string\n  ) {\n    this.log_ = logWrapper(this.connId);\n    this.stats_ = statsManagerGetCollection(repoInfo);\n    this.connURL = WebSocketConnection.connectionURL_(\n      repoInfo,\n      transportSessionId,\n      lastSessionId,\n      appCheckToken,\n      applicationId\n    );\n    this.nodeAdmin = repoInfo.nodeAdmin;\n  }\n\n  /**\n   * @param repoInfo - The info for the websocket endpoint.\n   * @param transportSessionId - Optional transportSessionId if this is connecting to an existing transport\n   *                                         session\n   * @param lastSessionId - Optional lastSessionId if there was a previous connection\n   * @returns connection url\n   */\n  private static connectionURL_(\n    repoInfo: RepoInfo,\n    transportSessionId?: string,\n    lastSessionId?: string,\n    appCheckToken?: string,\n    applicationId?: string\n  ): string {\n    const urlParams: { [k: string]: string } = {};\n    urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\n\n    if (\n      !isNodeSdk() &&\n      typeof location !== 'undefined' &&\n      location.hostname &&\n      FORGE_DOMAIN_RE.test(location.hostname)\n    ) {\n      urlParams[REFERER_PARAM] = FORGE_REF;\n    }\n    if (transportSessionId) {\n      urlParams[TRANSPORT_SESSION_PARAM] = transportSessionId;\n    }\n    if (lastSessionId) {\n      urlParams[LAST_SESSION_PARAM] = lastSessionId;\n    }\n    if (appCheckToken) {\n      urlParams[APP_CHECK_TOKEN_PARAM] = appCheckToken;\n    }\n    if (applicationId) {\n      urlParams[APPLICATION_ID_PARAM] = applicationId;\n    }\n\n    return repoInfoConnectionURL(repoInfo, WEBSOCKET, urlParams);\n  }\n\n  /**\n   * @param onMessage - Callback when messages arrive\n   * @param onDisconnect - Callback with connection lost.\n   */\n  open(onMessage: (msg: {}) => void, onDisconnect: (a?: boolean) => void) {\n    this.onDisconnect = onDisconnect;\n    this.onMessage = onMessage;\n\n    this.log_('Websocket connecting to ' + this.connURL);\n\n    this.everConnected_ = false;\n    // Assume failure until proven otherwise.\n    PersistentStorage.set('previous_websocket_failure', true);\n\n    try {\n      let options: { [k: string]: object };\n      if (isNodeSdk()) {\n        const device = this.nodeAdmin ? 'AdminNode' : 'Node';\n        // UA Format: Firebase/<wire_protocol>/<sdk_version>/<platform>/<device>\n        options = {\n          headers: {\n            'User-Agent': `Firebase/${PROTOCOL_VERSION}/${SDK_VERSION}/${process.platform}/${device}`,\n            'X-Firebase-GMPID': this.applicationId || ''\n          }\n        };\n\n        // If using Node with admin creds, AppCheck-related checks are unnecessary.\n        // Note that we send the credentials here even if they aren't admin credentials, which is\n        // not a problem.\n        // Note that this header is just used to bypass appcheck, and the token should still be sent\n        // through the websocket connection once it is established.\n        if (this.authToken) {\n          options.headers['Authorization'] = `Bearer ${this.authToken}`;\n        }\n        if (this.appCheckToken) {\n          options.headers['X-Firebase-AppCheck'] = this.appCheckToken;\n        }\n\n        // Plumb appropriate http_proxy environment variable into faye-websocket if it exists.\n        const env = process['env'];\n        const proxy =\n          this.connURL.indexOf('wss://') === 0\n            ? env['HTTPS_PROXY'] || env['https_proxy']\n            : env['HTTP_PROXY'] || env['http_proxy'];\n\n        if (proxy) {\n          options['proxy'] = { origin: proxy };\n        }\n      }\n      this.mySock = new WebSocketImpl(this.connURL, [], options);\n    } catch (e) {\n      this.log_('Error instantiating WebSocket.');\n      const error = e.message || e.data;\n      if (error) {\n        this.log_(error);\n      }\n      this.onClosed_();\n      return;\n    }\n\n    this.mySock.onopen = () => {\n      this.log_('Websocket connected.');\n      this.everConnected_ = true;\n    };\n\n    this.mySock.onclose = () => {\n      this.log_('Websocket connection was disconnected.');\n      this.mySock = null;\n      this.onClosed_();\n    };\n\n    this.mySock.onmessage = m => {\n      this.handleIncomingFrame(m as {});\n    };\n\n    this.mySock.onerror = e => {\n      this.log_('WebSocket error.  Closing connection.');\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const error = (e as any).message || (e as any).data;\n      if (error) {\n        this.log_(error);\n      }\n      this.onClosed_();\n    };\n  }\n\n  /**\n   * No-op for websockets, we don't need to do anything once the connection is confirmed as open\n   */\n  start() {}\n\n  static forceDisallow_: boolean;\n\n  static forceDisallow() {\n    WebSocketConnection.forceDisallow_ = true;\n  }\n\n  static isAvailable(): boolean {\n    let isOldAndroid = false;\n    if (typeof navigator !== 'undefined' && navigator.userAgent) {\n      const oldAndroidRegex = /Android ([0-9]{0,}\\.[0-9]{0,})/;\n      const oldAndroidMatch = navigator.userAgent.match(oldAndroidRegex);\n      if (oldAndroidMatch && oldAndroidMatch.length > 1) {\n        if (parseFloat(oldAndroidMatch[1]) < 4.4) {\n          isOldAndroid = true;\n        }\n      }\n    }\n\n    return (\n      !isOldAndroid &&\n      WebSocketImpl !== null &&\n      !WebSocketConnection.forceDisallow_\n    );\n  }\n\n  /**\n   * Number of response before we consider the connection \"healthy.\"\n   */\n  static responsesRequiredToBeHealthy = 2;\n\n  /**\n   * Time to wait for the connection te become healthy before giving up.\n   */\n  static healthyTimeout = 30000;\n\n  /**\n   * Returns true if we previously failed to connect with this transport.\n   */\n  static previouslyFailed(): boolean {\n    // If our persistent storage is actually only in-memory storage,\n    // we default to assuming that it previously failed to be safe.\n    return (\n      PersistentStorage.isInMemoryStorage ||\n      PersistentStorage.get('previous_websocket_failure') === true\n    );\n  }\n\n  markConnectionHealthy() {\n    PersistentStorage.remove('previous_websocket_failure');\n  }\n\n  private appendFrame_(data: string) {\n    this.frames.push(data);\n    if (this.frames.length === this.totalFrames) {\n      const fullMess = this.frames.join('');\n      this.frames = null;\n      const jsonMess = jsonEval(fullMess) as object;\n\n      //handle the message\n      this.onMessage(jsonMess);\n    }\n  }\n\n  /**\n   * @param frameCount - The number of frames we are expecting from the server\n   */\n  private handleNewFrameCount_(frameCount: number) {\n    this.totalFrames = frameCount;\n    this.frames = [];\n  }\n\n  /**\n   * Attempts to parse a frame count out of some text. If it can't, assumes a value of 1\n   * @returns Any remaining data to be process, or null if there is none\n   */\n  private extractFrameCount_(data: string): string | null {\n    assert(this.frames === null, 'We already have a frame buffer');\n    // TODO: The server is only supposed to send up to 9999 frames (i.e. length <= 4), but that isn't being enforced\n    // currently.  So allowing larger frame counts (length <= 6).  See https://app.asana.com/0/search/8688598998380/8237608042508\n    if (data.length <= 6) {\n      const frameCount = Number(data);\n      if (!isNaN(frameCount)) {\n        this.handleNewFrameCount_(frameCount);\n        return null;\n      }\n    }\n    this.handleNewFrameCount_(1);\n    return data;\n  }\n\n  /**\n   * Process a websocket frame that has arrived from the server.\n   * @param mess - The frame data\n   */\n  handleIncomingFrame(mess: { [k: string]: unknown }) {\n    if (this.mySock === null) {\n      return; // Chrome apparently delivers incoming packets even after we .close() the connection sometimes.\n    }\n    const data = mess['data'] as string;\n    this.bytesReceived += data.length;\n    this.stats_.incrementCounter('bytes_received', data.length);\n\n    this.resetKeepAlive();\n\n    if (this.frames !== null) {\n      // we're buffering\n      this.appendFrame_(data);\n    } else {\n      // try to parse out a frame count, otherwise, assume 1 and process it\n      const remainingData = this.extractFrameCount_(data);\n      if (remainingData !== null) {\n        this.appendFrame_(remainingData);\n      }\n    }\n  }\n\n  /**\n   * Send a message to the server\n   * @param data - The JSON object to transmit\n   */\n  send(data: {}) {\n    this.resetKeepAlive();\n\n    const dataStr = stringify(data);\n    this.bytesSent += dataStr.length;\n    this.stats_.incrementCounter('bytes_sent', dataStr.length);\n\n    //We can only fit a certain amount in each websocket frame, so we need to split this request\n    //up into multiple pieces if it doesn't fit in one request.\n\n    const dataSegs = splitStringBySize(dataStr, WEBSOCKET_MAX_FRAME_SIZE);\n\n    //Send the length header\n    if (dataSegs.length > 1) {\n      this.sendString_(String(dataSegs.length));\n    }\n\n    //Send the actual data in segments.\n    for (let i = 0; i < dataSegs.length; i++) {\n      this.sendString_(dataSegs[i]);\n    }\n  }\n\n  private shutdown_() {\n    this.isClosed_ = true;\n    if (this.keepaliveTimer) {\n      clearInterval(this.keepaliveTimer);\n      this.keepaliveTimer = null;\n    }\n\n    if (this.mySock) {\n      this.mySock.close();\n      this.mySock = null;\n    }\n  }\n\n  private onClosed_() {\n    if (!this.isClosed_) {\n      this.log_('WebSocket is closing itself');\n      this.shutdown_();\n\n      // since this is an internal close, trigger the close listener\n      if (this.onDisconnect) {\n        this.onDisconnect(this.everConnected_);\n        this.onDisconnect = null;\n      }\n    }\n  }\n\n  /**\n   * External-facing close handler.\n   * Close the websocket and kill the connection.\n   */\n  close() {\n    if (!this.isClosed_) {\n      this.log_('WebSocket is being closed');\n      this.shutdown_();\n    }\n  }\n\n  /**\n   * Kill the current keepalive timer and start a new one, to ensure that it always fires N seconds after\n   * the last activity.\n   */\n  resetKeepAlive() {\n    clearInterval(this.keepaliveTimer);\n    this.keepaliveTimer = setInterval(() => {\n      //If there has been no websocket activity for a while, send a no-op\n      if (this.mySock) {\n        this.sendString_('0');\n      }\n      this.resetKeepAlive();\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    }, Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL)) as any;\n  }\n\n  /**\n   * Send a string over the websocket.\n   *\n   * @param str - String to send.\n   */\n  private sendString_(str: string) {\n    // Firefox seems to sometimes throw exceptions (NS_ERROR_UNEXPECTED) from websocket .send()\n    // calls for some unknown reason.  We treat these as an error and disconnect.\n    // See https://app.asana.com/0/58926111402292/68021340250410\n    try {\n      this.mySock.send(str);\n    } catch (e) {\n      this.log_(\n        'Exception thrown from WebSocket.send():',\n        e.message || e.data,\n        'Closing connection.'\n      );\n      setTimeout(this.onClosed_.bind(this), 0);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RepoInfo } from '../core/RepoInfo';\nimport { warn } from '../core/util/util';\n\nimport { BrowserPollConnection } from './BrowserPollConnection';\nimport { TransportConstructor } from './Transport';\nimport { WebSocketConnection } from './WebSocketConnection';\n\n/**\n * Currently simplistic, this class manages what transport a Connection should use at various stages of its\n * lifecycle.\n *\n * It starts with longpolling in a browser, and httppolling on node. It then upgrades to websockets if\n * they are available.\n */\nexport class TransportManager {\n  private transports_: TransportConstructor[];\n\n  // Keeps track of whether the TransportManager has already chosen a transport to use\n  static globalTransportInitialized_ = false;\n\n  static get ALL_TRANSPORTS() {\n    return [BrowserPollConnection, WebSocketConnection];\n  }\n\n  /**\n   * Returns whether transport has been selected to ensure WebSocketConnection or BrowserPollConnection are not called after\n   * TransportManager has already set up transports_\n   */\n  static get IS_TRANSPORT_INITIALIZED() {\n    return this.globalTransportInitialized_;\n  }\n\n  /**\n   * @param repoInfo - Metadata around the namespace we're connecting to\n   */\n  constructor(repoInfo: RepoInfo) {\n    this.initTransports_(repoInfo);\n  }\n\n  private initTransports_(repoInfo: RepoInfo) {\n    const isWebSocketsAvailable: boolean =\n      WebSocketConnection && WebSocketConnection['isAvailable']();\n    let isSkipPollConnection =\n      isWebSocketsAvailable && !WebSocketConnection.previouslyFailed();\n\n    if (repoInfo.webSocketOnly) {\n      if (!isWebSocketsAvailable) {\n        warn(\n          \"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\"\n        );\n      }\n\n      isSkipPollConnection = true;\n    }\n\n    if (isSkipPollConnection) {\n      this.transports_ = [WebSocketConnection];\n    } else {\n      const transports = (this.transports_ = [] as TransportConstructor[]);\n      for (const transport of TransportManager.ALL_TRANSPORTS) {\n        if (transport && transport['isAvailable']()) {\n          transports.push(transport);\n        }\n      }\n      TransportManager.globalTransportInitialized_ = true;\n    }\n  }\n\n  /**\n   * @returns The constructor for the initial transport to use\n   */\n  initialTransport(): TransportConstructor {\n    if (this.transports_.length > 0) {\n      return this.transports_[0];\n    } else {\n      throw new Error('No transports available');\n    }\n  }\n\n  /**\n   * @returns The constructor for the next transport, or null\n   */\n  upgradeTransport(): TransportConstructor | null {\n    if (this.transports_.length > 1) {\n      return this.transports_[1];\n    } else {\n      return null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RepoInfo } from '../core/RepoInfo';\nimport { PersistentStorage } from '../core/storage/storage';\nimport { Indexable } from '../core/util/misc';\nimport {\n  error,\n  logWrapper,\n  requireKey,\n  setTimeoutNonBlocking,\n  warn\n} from '../core/util/util';\n\nimport { PROTOCOL_VERSION } from './Constants';\nimport { Transport, TransportConstructor } from './Transport';\nimport { TransportManager } from './TransportManager';\n\n// Abort upgrade attempt if it takes longer than 60s.\nconst UPGRADE_TIMEOUT = 60000;\n\n// For some transports (WebSockets), we need to \"validate\" the transport by exchanging a few requests and responses.\n// If we haven't sent enough requests within 5s, we'll start sending noop ping requests.\nconst DELAY_BEFORE_SENDING_EXTRA_REQUESTS = 5000;\n\n// If the initial data sent triggers a lot of bandwidth (i.e. it's a large put or a listen for a large amount of data)\n// then we may not be able to exchange our ping/pong requests within the healthy timeout.  So if we reach the timeout\n// but we've sent/received enough bytes, we don't cancel the connection.\nconst BYTES_SENT_HEALTHY_OVERRIDE = 10 * 1024;\nconst BYTES_RECEIVED_HEALTHY_OVERRIDE = 100 * 1024;\n\nconst enum RealtimeState {\n  CONNECTING,\n  CONNECTED,\n  DISCONNECTED\n}\n\nconst MESSAGE_TYPE = 't';\nconst MESSAGE_DATA = 'd';\nconst CONTROL_SHUTDOWN = 's';\nconst CONTROL_RESET = 'r';\nconst CONTROL_ERROR = 'e';\nconst CONTROL_PONG = 'o';\nconst SWITCH_ACK = 'a';\nconst END_TRANSMISSION = 'n';\nconst PING = 'p';\n\nconst SERVER_HELLO = 'h';\n\n/**\n * Creates a new real-time connection to the server using whichever method works\n * best in the current browser.\n */\nexport class Connection {\n  connectionCount = 0;\n  pendingDataMessages: unknown[] = [];\n  sessionId: string;\n\n  private conn_: Transport;\n  private healthyTimeout_: number;\n  private isHealthy_: boolean;\n  private log_: (...args: unknown[]) => void;\n  private primaryResponsesRequired_: number;\n  private rx_: Transport;\n  private secondaryConn_: Transport;\n  private secondaryResponsesRequired_: number;\n  private state_ = RealtimeState.CONNECTING;\n  private transportManager_: TransportManager;\n  private tx_: Transport;\n\n  /**\n   * @param id - an id for this connection\n   * @param repoInfo_ - the info for the endpoint to connect to\n   * @param applicationId_ - the Firebase App ID for this project\n   * @param appCheckToken_ - The App Check Token for this device.\n   * @param authToken_ - The auth token for this session.\n   * @param onMessage_ - the callback to be triggered when a server-push message arrives\n   * @param onReady_ - the callback to be triggered when this connection is ready to send messages.\n   * @param onDisconnect_ - the callback to be triggered when a connection was lost\n   * @param onKill_ - the callback to be triggered when this connection has permanently shut down.\n   * @param lastSessionId - last session id in persistent connection. is used to clean up old session in real-time server\n   */\n  constructor(\n    public id: string,\n    private repoInfo_: RepoInfo,\n    private applicationId_: string | undefined,\n    private appCheckToken_: string | undefined,\n    private authToken_: string | undefined,\n    private onMessage_: (a: {}) => void,\n    private onReady_: (a: number, b: string) => void,\n    private onDisconnect_: () => void,\n    private onKill_: (a: string) => void,\n    public lastSessionId?: string\n  ) {\n    this.log_ = logWrapper('c:' + this.id + ':');\n    this.transportManager_ = new TransportManager(repoInfo_);\n    this.log_('Connection created');\n    this.start_();\n  }\n\n  /**\n   * Starts a connection attempt\n   */\n  private start_(): void {\n    const conn = this.transportManager_.initialTransport();\n    this.conn_ = new conn(\n      this.nextTransportId_(),\n      this.repoInfo_,\n      this.applicationId_,\n      this.appCheckToken_,\n      this.authToken_,\n      null,\n      this.lastSessionId\n    );\n\n    // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\n    // can consider the transport healthy.\n    this.primaryResponsesRequired_ = conn['responsesRequiredToBeHealthy'] || 0;\n\n    const onMessageReceived = this.connReceiver_(this.conn_);\n    const onConnectionLost = this.disconnReceiver_(this.conn_);\n    this.tx_ = this.conn_;\n    this.rx_ = this.conn_;\n    this.secondaryConn_ = null;\n    this.isHealthy_ = false;\n\n    /*\n     * Firefox doesn't like when code from one iframe tries to create another iframe by way of the parent frame.\n     * This can occur in the case of a redirect, i.e. we guessed wrong on what server to connect to and received a reset.\n     * Somehow, setTimeout seems to make this ok. That doesn't make sense from a security perspective, since you should\n     * still have the context of your originating frame.\n     */\n    setTimeout(() => {\n      // this.conn_ gets set to null in some of the tests. Check to make sure it still exists before using it\n      this.conn_ && this.conn_.open(onMessageReceived, onConnectionLost);\n    }, Math.floor(0));\n\n    const healthyTimeoutMS = conn['healthyTimeout'] || 0;\n    if (healthyTimeoutMS > 0) {\n      this.healthyTimeout_ = setTimeoutNonBlocking(() => {\n        this.healthyTimeout_ = null;\n        if (!this.isHealthy_) {\n          if (\n            this.conn_ &&\n            this.conn_.bytesReceived > BYTES_RECEIVED_HEALTHY_OVERRIDE\n          ) {\n            this.log_(\n              'Connection exceeded healthy timeout but has received ' +\n                this.conn_.bytesReceived +\n                ' bytes.  Marking connection healthy.'\n            );\n            this.isHealthy_ = true;\n            this.conn_.markConnectionHealthy();\n          } else if (\n            this.conn_ &&\n            this.conn_.bytesSent > BYTES_SENT_HEALTHY_OVERRIDE\n          ) {\n            this.log_(\n              'Connection exceeded healthy timeout but has sent ' +\n                this.conn_.bytesSent +\n                ' bytes.  Leaving connection alive.'\n            );\n            // NOTE: We don't want to mark it healthy, since we have no guarantee that the bytes have made it to\n            // the server.\n          } else {\n            this.log_('Closing unhealthy connection after timeout.');\n            this.close();\n          }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      }, Math.floor(healthyTimeoutMS)) as any;\n    }\n  }\n\n  private nextTransportId_(): string {\n    return 'c:' + this.id + ':' + this.connectionCount++;\n  }\n\n  private disconnReceiver_(conn) {\n    return everConnected => {\n      if (conn === this.conn_) {\n        this.onConnectionLost_(everConnected);\n      } else if (conn === this.secondaryConn_) {\n        this.log_('Secondary connection lost.');\n        this.onSecondaryConnectionLost_();\n      } else {\n        this.log_('closing an old connection');\n      }\n    };\n  }\n\n  private connReceiver_(conn: Transport) {\n    return (message: Indexable) => {\n      if (this.state_ !== RealtimeState.DISCONNECTED) {\n        if (conn === this.rx_) {\n          this.onPrimaryMessageReceived_(message);\n        } else if (conn === this.secondaryConn_) {\n          this.onSecondaryMessageReceived_(message);\n        } else {\n          this.log_('message on old connection');\n        }\n      }\n    };\n  }\n\n  /**\n   * @param dataMsg - An arbitrary data message to be sent to the server\n   */\n  sendRequest(dataMsg: object) {\n    // wrap in a data message envelope and send it on\n    const msg = { t: 'd', d: dataMsg };\n    this.sendData_(msg);\n  }\n\n  tryCleanupConnection() {\n    if (this.tx_ === this.secondaryConn_ && this.rx_ === this.secondaryConn_) {\n      this.log_(\n        'cleaning up and promoting a connection: ' + this.secondaryConn_.connId\n      );\n      this.conn_ = this.secondaryConn_;\n      this.secondaryConn_ = null;\n      // the server will shutdown the old connection\n    }\n  }\n\n  private onSecondaryControl_(controlData: { [k: string]: unknown }) {\n    if (MESSAGE_TYPE in controlData) {\n      const cmd = controlData[MESSAGE_TYPE] as string;\n      if (cmd === SWITCH_ACK) {\n        this.upgradeIfSecondaryHealthy_();\n      } else if (cmd === CONTROL_RESET) {\n        // Most likely the session wasn't valid. Abandon the switch attempt\n        this.log_('Got a reset on secondary, closing it');\n        this.secondaryConn_.close();\n        // If we were already using this connection for something, than we need to fully close\n        if (\n          this.tx_ === this.secondaryConn_ ||\n          this.rx_ === this.secondaryConn_\n        ) {\n          this.close();\n        }\n      } else if (cmd === CONTROL_PONG) {\n        this.log_('got pong on secondary.');\n        this.secondaryResponsesRequired_--;\n        this.upgradeIfSecondaryHealthy_();\n      }\n    }\n  }\n\n  private onSecondaryMessageReceived_(parsedData: Indexable) {\n    const layer: string = requireKey('t', parsedData) as string;\n    const data: unknown = requireKey('d', parsedData);\n    if (layer === 'c') {\n      this.onSecondaryControl_(data as Indexable);\n    } else if (layer === 'd') {\n      // got a data message, but we're still second connection. Need to buffer it up\n      this.pendingDataMessages.push(data);\n    } else {\n      throw new Error('Unknown protocol layer: ' + layer);\n    }\n  }\n\n  private upgradeIfSecondaryHealthy_() {\n    if (this.secondaryResponsesRequired_ <= 0) {\n      this.log_('Secondary connection is healthy.');\n      this.isHealthy_ = true;\n      this.secondaryConn_.markConnectionHealthy();\n      this.proceedWithUpgrade_();\n    } else {\n      // Send a ping to make sure the connection is healthy.\n      this.log_('sending ping on secondary.');\n      this.secondaryConn_.send({ t: 'c', d: { t: PING, d: {} } });\n    }\n  }\n\n  private proceedWithUpgrade_() {\n    // tell this connection to consider itself open\n    this.secondaryConn_.start();\n    // send ack\n    this.log_('sending client ack on secondary');\n    this.secondaryConn_.send({ t: 'c', d: { t: SWITCH_ACK, d: {} } });\n\n    // send end packet on primary transport, switch to sending on this one\n    // can receive on this one, buffer responses until end received on primary transport\n    this.log_('Ending transmission on primary');\n    this.conn_.send({ t: 'c', d: { t: END_TRANSMISSION, d: {} } });\n    this.tx_ = this.secondaryConn_;\n\n    this.tryCleanupConnection();\n  }\n\n  private onPrimaryMessageReceived_(parsedData: { [k: string]: unknown }) {\n    // Must refer to parsedData properties in quotes, so closure doesn't touch them.\n    const layer: string = requireKey('t', parsedData) as string;\n    const data: unknown = requireKey('d', parsedData);\n    if (layer === 'c') {\n      this.onControl_(data as { [k: string]: unknown });\n    } else if (layer === 'd') {\n      this.onDataMessage_(data);\n    }\n  }\n\n  private onDataMessage_(message: unknown) {\n    this.onPrimaryResponse_();\n\n    // We don't do anything with data messages, just kick them up a level\n    this.onMessage_(message);\n  }\n\n  private onPrimaryResponse_() {\n    if (!this.isHealthy_) {\n      this.primaryResponsesRequired_--;\n      if (this.primaryResponsesRequired_ <= 0) {\n        this.log_('Primary connection is healthy.');\n        this.isHealthy_ = true;\n        this.conn_.markConnectionHealthy();\n      }\n    }\n  }\n\n  private onControl_(controlData: { [k: string]: unknown }) {\n    const cmd: string = requireKey(MESSAGE_TYPE, controlData) as string;\n    if (MESSAGE_DATA in controlData) {\n      const payload = controlData[MESSAGE_DATA];\n      if (cmd === SERVER_HELLO) {\n        const handshakePayload = {\n          ...(payload as {\n            ts: number;\n            v: string;\n            h: string;\n            s: string;\n          })\n        };\n        if (this.repoInfo_.isUsingEmulator) {\n          // Upon connecting, the emulator will pass the hostname that it's aware of, but we prefer the user's set hostname via `connectDatabaseEmulator` over what the emulator passes.\n          handshakePayload.h = this.repoInfo_.host;\n        }\n        this.onHandshake_(handshakePayload);\n      } else if (cmd === END_TRANSMISSION) {\n        this.log_('recvd end transmission on primary');\n        this.rx_ = this.secondaryConn_;\n        for (let i = 0; i < this.pendingDataMessages.length; ++i) {\n          this.onDataMessage_(this.pendingDataMessages[i]);\n        }\n        this.pendingDataMessages = [];\n        this.tryCleanupConnection();\n      } else if (cmd === CONTROL_SHUTDOWN) {\n        // This was previously the 'onKill' callback passed to the lower-level connection\n        // payload in this case is the reason for the shutdown. Generally a human-readable error\n        this.onConnectionShutdown_(payload as string);\n      } else if (cmd === CONTROL_RESET) {\n        // payload in this case is the host we should contact\n        this.onReset_(payload as string);\n      } else if (cmd === CONTROL_ERROR) {\n        error('Server Error: ' + payload);\n      } else if (cmd === CONTROL_PONG) {\n        this.log_('got pong on primary.');\n        this.onPrimaryResponse_();\n        this.sendPingOnPrimaryIfNecessary_();\n      } else {\n        error('Unknown control packet command: ' + cmd);\n      }\n    }\n  }\n\n  /**\n   * @param handshake - The handshake data returned from the server\n   */\n  private onHandshake_(handshake: {\n    ts: number;\n    v: string;\n    h: string;\n    s: string;\n  }): void {\n    const timestamp = handshake.ts;\n    const version = handshake.v;\n    const host = handshake.h;\n    this.sessionId = handshake.s;\n    this.repoInfo_.host = host;\n    // if we've already closed the connection, then don't bother trying to progress further\n    if (this.state_ === RealtimeState.CONNECTING) {\n      this.conn_.start();\n      this.onConnectionEstablished_(this.conn_, timestamp);\n      if (PROTOCOL_VERSION !== version) {\n        warn('Protocol version mismatch detected');\n      }\n      // TODO: do we want to upgrade? when? maybe a delay?\n      this.tryStartUpgrade_();\n    }\n  }\n\n  private tryStartUpgrade_() {\n    const conn = this.transportManager_.upgradeTransport();\n    if (conn) {\n      this.startUpgrade_(conn);\n    }\n  }\n\n  private startUpgrade_(conn: TransportConstructor) {\n    this.secondaryConn_ = new conn(\n      this.nextTransportId_(),\n      this.repoInfo_,\n      this.applicationId_,\n      this.appCheckToken_,\n      this.authToken_,\n      this.sessionId\n    );\n    // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\n    // can consider the transport healthy.\n    this.secondaryResponsesRequired_ =\n      conn['responsesRequiredToBeHealthy'] || 0;\n\n    const onMessage = this.connReceiver_(this.secondaryConn_);\n    const onDisconnect = this.disconnReceiver_(this.secondaryConn_);\n    this.secondaryConn_.open(onMessage, onDisconnect);\n\n    // If we haven't successfully upgraded after UPGRADE_TIMEOUT, give up and kill the secondary.\n    setTimeoutNonBlocking(() => {\n      if (this.secondaryConn_) {\n        this.log_('Timed out trying to upgrade.');\n        this.secondaryConn_.close();\n      }\n    }, Math.floor(UPGRADE_TIMEOUT));\n  }\n\n  private onReset_(host: string) {\n    this.log_('Reset packet received.  New host: ' + host);\n    this.repoInfo_.host = host;\n    // TODO: if we're already \"connected\", we need to trigger a disconnect at the next layer up.\n    // We don't currently support resets after the connection has already been established\n    if (this.state_ === RealtimeState.CONNECTED) {\n      this.close();\n    } else {\n      // Close whatever connections we have open and start again.\n      this.closeConnections_();\n      this.start_();\n    }\n  }\n\n  private onConnectionEstablished_(conn: Transport, timestamp: number) {\n    this.log_('Realtime connection established.');\n    this.conn_ = conn;\n    this.state_ = RealtimeState.CONNECTED;\n\n    if (this.onReady_) {\n      this.onReady_(timestamp, this.sessionId);\n      this.onReady_ = null;\n    }\n\n    // If after 5 seconds we haven't sent enough requests to the server to get the connection healthy,\n    // send some pings.\n    if (this.primaryResponsesRequired_ === 0) {\n      this.log_('Primary connection is healthy.');\n      this.isHealthy_ = true;\n    } else {\n      setTimeoutNonBlocking(() => {\n        this.sendPingOnPrimaryIfNecessary_();\n      }, Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS));\n    }\n  }\n\n  private sendPingOnPrimaryIfNecessary_() {\n    // If the connection isn't considered healthy yet, we'll send a noop ping packet request.\n    if (!this.isHealthy_ && this.state_ === RealtimeState.CONNECTED) {\n      this.log_('sending ping on primary.');\n      this.sendData_({ t: 'c', d: { t: PING, d: {} } });\n    }\n  }\n\n  private onSecondaryConnectionLost_() {\n    const conn = this.secondaryConn_;\n    this.secondaryConn_ = null;\n    if (this.tx_ === conn || this.rx_ === conn) {\n      // we are relying on this connection already in some capacity. Therefore, a failure is real\n      this.close();\n    }\n  }\n\n  /**\n   * @param everConnected - Whether or not the connection ever reached a server. Used to determine if\n   * we should flush the host cache\n   */\n  private onConnectionLost_(everConnected: boolean) {\n    this.conn_ = null;\n\n    // NOTE: IF you're seeing a Firefox error for this line, I think it might be because it's getting\n    // called on window close and RealtimeState.CONNECTING is no longer defined.  Just a guess.\n    if (!everConnected && this.state_ === RealtimeState.CONNECTING) {\n      this.log_('Realtime connection failed.');\n      // Since we failed to connect at all, clear any cached entry for this namespace in case the machine went away\n      if (this.repoInfo_.isCacheableHost()) {\n        PersistentStorage.remove('host:' + this.repoInfo_.host);\n        // reset the internal host to what we would show the user, i.e. <ns>.firebaseio.com\n        this.repoInfo_.internalHost = this.repoInfo_.host;\n      }\n    } else if (this.state_ === RealtimeState.CONNECTED) {\n      this.log_('Realtime connection lost.');\n    }\n\n    this.close();\n  }\n\n  private onConnectionShutdown_(reason: string) {\n    this.log_('Connection shutdown command received. Shutting down...');\n\n    if (this.onKill_) {\n      this.onKill_(reason);\n      this.onKill_ = null;\n    }\n\n    // We intentionally don't want to fire onDisconnect (kill is a different case),\n    // so clear the callback.\n    this.onDisconnect_ = null;\n\n    this.close();\n  }\n\n  private sendData_(data: object) {\n    if (this.state_ !== RealtimeState.CONNECTED) {\n      throw 'Connection is not connected';\n    } else {\n      this.tx_.send(data);\n    }\n  }\n\n  /**\n   * Cleans up this connection, calling the appropriate callbacks\n   */\n  close() {\n    if (this.state_ !== RealtimeState.DISCONNECTED) {\n      this.log_('Closing realtime connection.');\n      this.state_ = RealtimeState.DISCONNECTED;\n\n      this.closeConnections_();\n\n      if (this.onDisconnect_) {\n        this.onDisconnect_();\n        this.onDisconnect_ = null;\n      }\n    }\n  }\n\n  private closeConnections_() {\n    this.log_('Shutting down all connections');\n    if (this.conn_) {\n      this.conn_.close();\n      this.conn_ = null;\n    }\n\n    if (this.secondaryConn_) {\n      this.secondaryConn_.close();\n      this.secondaryConn_ = null;\n    }\n\n    if (this.healthyTimeout_) {\n      clearTimeout(this.healthyTimeout_);\n      this.healthyTimeout_ = null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { QueryContext } from './view/EventRegistration';\n\n/**\n * Interface defining the set of actions that can be performed against the Firebase server\n * (basically corresponds to our wire protocol).\n *\n * @interface\n */\nexport abstract class ServerActions {\n  abstract listen(\n    query: QueryContext,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: unknown) => void\n  ): void;\n\n  /**\n   * Remove a listen.\n   */\n  abstract unlisten(query: QueryContext, tag: number | null): void;\n\n  /**\n   * Get the server value satisfying this query.\n   */\n  abstract get(query: QueryContext): Promise<string>;\n\n  put(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void,\n    hash?: string\n  ) {}\n\n  merge(\n    pathString: string,\n    data: unknown,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {}\n\n  /**\n   * Refreshes the auth token for the current connection.\n   * @param token - The authentication token\n   */\n  refreshAuthToken(token: string) {}\n\n  /**\n   * Refreshes the app check token for the current connection.\n   * @param token The app check token\n   */\n  refreshAppCheckToken(token: string) {}\n\n  onDisconnectPut(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  onDisconnectMerge(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  onDisconnectCancel(\n    pathString: string,\n    onComplete?: (a: string, b: string) => void\n  ) {}\n\n  reportStats(stats: { [k: string]: unknown }) {}\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\n/**\n * Base class to be used if you want to emit events. Call the constructor with\n * the set of allowed event names.\n */\nexport abstract class EventEmitter {\n  private listeners_: {\n    [eventType: string]: Array<{\n      callback(...args: unknown[]): void;\n      context: unknown;\n    }>;\n  } = {};\n\n  constructor(private allowedEvents_: string[]) {\n    assert(\n      Array.isArray(allowedEvents_) && allowedEvents_.length > 0,\n      'Requires a non-empty array'\n    );\n  }\n\n  /**\n   * To be overridden by derived classes in order to fire an initial event when\n   * somebody subscribes for data.\n   *\n   * @returns {Array.<*>} Array of parameters to trigger initial event with.\n   */\n  abstract getInitialEvent(eventType: string): unknown[];\n\n  /**\n   * To be called by derived classes to trigger events.\n   */\n  protected trigger(eventType: string, ...varArgs: unknown[]) {\n    if (Array.isArray(this.listeners_[eventType])) {\n      // Clone the list, since callbacks could add/remove listeners.\n      const listeners = [...this.listeners_[eventType]];\n\n      for (let i = 0; i < listeners.length; i++) {\n        listeners[i].callback.apply(listeners[i].context, varArgs);\n      }\n    }\n  }\n\n  on(eventType: string, callback: (a: unknown) => void, context: unknown) {\n    this.validateEventType_(eventType);\n    this.listeners_[eventType] = this.listeners_[eventType] || [];\n    this.listeners_[eventType].push({ callback, context });\n\n    const eventData = this.getInitialEvent(eventType);\n    if (eventData) {\n      callback.apply(context, eventData);\n    }\n  }\n\n  off(eventType: string, callback: (a: unknown) => void, context: unknown) {\n    this.validateEventType_(eventType);\n    const listeners = this.listeners_[eventType] || [];\n    for (let i = 0; i < listeners.length; i++) {\n      if (\n        listeners[i].callback === callback &&\n        (!context || context === listeners[i].context)\n      ) {\n        listeners.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  private validateEventType_(eventType: string) {\n    assert(\n      this.allowedEvents_.find(et => {\n        return et === eventType;\n      }),\n      'Unknown event: ' + eventType\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, isMobileCordova } from '@firebase/util';\n\nimport { EventEmitter } from './EventEmitter';\n\n/**\n * Monitors online state (as reported by window.online/offline events).\n *\n * The expectation is that this could have many false positives (thinks we are online\n * when we're not), but no false negatives.  So we can safely use it to determine when\n * we definitely cannot reach the internet.\n */\nexport class OnlineMonitor extends EventEmitter {\n  private online_ = true;\n\n  static getInstance() {\n    return new OnlineMonitor();\n  }\n\n  constructor() {\n    super(['online']);\n\n    // We've had repeated complaints that Cordova apps can get stuck \"offline\", e.g.\n    // https://forum.ionicframework.com/t/firebase-connection-is-lost-and-never-come-back/43810\n    // It would seem that the 'online' event does not always fire consistently. So we disable it\n    // for Cordova.\n    if (\n      typeof window !== 'undefined' &&\n      typeof window.addEventListener !== 'undefined' &&\n      !isMobileCordova()\n    ) {\n      window.addEventListener(\n        'online',\n        () => {\n          if (!this.online_) {\n            this.online_ = true;\n            this.trigger('online', true);\n          }\n        },\n        false\n      );\n\n      window.addEventListener(\n        'offline',\n        () => {\n          if (this.online_) {\n            this.online_ = false;\n            this.trigger('online', false);\n          }\n        },\n        false\n      );\n    }\n  }\n\n  getInitialEvent(eventType: string): boolean[] {\n    assert(eventType === 'online', 'Unknown event type: ' + eventType);\n    return [this.online_];\n  }\n\n  currentlyOnline(): boolean {\n    return this.online_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringLength } from '@firebase/util';\n\nimport { nameCompare } from './util';\n\n/** Maximum key depth. */\nconst MAX_PATH_DEPTH = 32;\n\n/** Maximum number of (UTF8) bytes in a Firebase path. */\nconst MAX_PATH_LENGTH_BYTES = 768;\n\n/**\n * An immutable object representing a parsed path.  It's immutable so that you\n * can pass them around to other functions without worrying about them changing\n * it.\n */\n\nexport class Path {\n  pieces_: string[];\n  pieceNum_: number;\n\n  /**\n   * @param pathOrString - Path string to parse, or another path, or the raw\n   * tokens array\n   */\n  constructor(pathOrString: string | string[], pieceNum?: number) {\n    if (pieceNum === void 0) {\n      this.pieces_ = (pathOrString as string).split('/');\n\n      // Remove empty pieces.\n      let copyTo = 0;\n      for (let i = 0; i < this.pieces_.length; i++) {\n        if (this.pieces_[i].length > 0) {\n          this.pieces_[copyTo] = this.pieces_[i];\n          copyTo++;\n        }\n      }\n      this.pieces_.length = copyTo;\n\n      this.pieceNum_ = 0;\n    } else {\n      this.pieces_ = pathOrString as string[];\n      this.pieceNum_ = pieceNum;\n    }\n  }\n\n  toString(): string {\n    let pathString = '';\n    for (let i = this.pieceNum_; i < this.pieces_.length; i++) {\n      if (this.pieces_[i] !== '') {\n        pathString += '/' + this.pieces_[i];\n      }\n    }\n\n    return pathString || '/';\n  }\n}\n\nexport function newEmptyPath(): Path {\n  return new Path('');\n}\n\nexport function pathGetFront(path: Path): string | null {\n  if (path.pieceNum_ >= path.pieces_.length) {\n    return null;\n  }\n\n  return path.pieces_[path.pieceNum_];\n}\n\n/**\n * @returns The number of segments in this path\n */\nexport function pathGetLength(path: Path): number {\n  return path.pieces_.length - path.pieceNum_;\n}\n\nexport function pathPopFront(path: Path): Path {\n  let pieceNum = path.pieceNum_;\n  if (pieceNum < path.pieces_.length) {\n    pieceNum++;\n  }\n  return new Path(path.pieces_, pieceNum);\n}\n\nexport function pathGetBack(path: Path): string | null {\n  if (path.pieceNum_ < path.pieces_.length) {\n    return path.pieces_[path.pieces_.length - 1];\n  }\n\n  return null;\n}\n\nexport function pathToUrlEncodedString(path: Path): string {\n  let pathString = '';\n  for (let i = path.pieceNum_; i < path.pieces_.length; i++) {\n    if (path.pieces_[i] !== '') {\n      pathString += '/' + encodeURIComponent(String(path.pieces_[i]));\n    }\n  }\n\n  return pathString || '/';\n}\n\n/**\n * Shallow copy of the parts of the path.\n *\n */\nexport function pathSlice(path: Path, begin: number = 0): string[] {\n  return path.pieces_.slice(path.pieceNum_ + begin);\n}\n\nexport function pathParent(path: Path): Path | null {\n  if (path.pieceNum_ >= path.pieces_.length) {\n    return null;\n  }\n\n  const pieces = [];\n  for (let i = path.pieceNum_; i < path.pieces_.length - 1; i++) {\n    pieces.push(path.pieces_[i]);\n  }\n\n  return new Path(pieces, 0);\n}\n\nexport function pathChild(path: Path, childPathObj: string | Path): Path {\n  const pieces = [];\n  for (let i = path.pieceNum_; i < path.pieces_.length; i++) {\n    pieces.push(path.pieces_[i]);\n  }\n\n  if (childPathObj instanceof Path) {\n    for (let i = childPathObj.pieceNum_; i < childPathObj.pieces_.length; i++) {\n      pieces.push(childPathObj.pieces_[i]);\n    }\n  } else {\n    const childPieces = childPathObj.split('/');\n    for (let i = 0; i < childPieces.length; i++) {\n      if (childPieces[i].length > 0) {\n        pieces.push(childPieces[i]);\n      }\n    }\n  }\n\n  return new Path(pieces, 0);\n}\n\n/**\n * @returns True if there are no segments in this path\n */\nexport function pathIsEmpty(path: Path): boolean {\n  return path.pieceNum_ >= path.pieces_.length;\n}\n\n/**\n * @returns The path from outerPath to innerPath\n */\nexport function newRelativePath(outerPath: Path, innerPath: Path): Path {\n  const outer = pathGetFront(outerPath),\n    inner = pathGetFront(innerPath);\n  if (outer === null) {\n    return innerPath;\n  } else if (outer === inner) {\n    return newRelativePath(pathPopFront(outerPath), pathPopFront(innerPath));\n  } else {\n    throw new Error(\n      'INTERNAL ERROR: innerPath (' +\n        innerPath +\n        ') is not within ' +\n        'outerPath (' +\n        outerPath +\n        ')'\n    );\n  }\n}\n\n/**\n * @returns -1, 0, 1 if left is less, equal, or greater than the right.\n */\nexport function pathCompare(left: Path, right: Path): number {\n  const leftKeys = pathSlice(left, 0);\n  const rightKeys = pathSlice(right, 0);\n  for (let i = 0; i < leftKeys.length && i < rightKeys.length; i++) {\n    const cmp = nameCompare(leftKeys[i], rightKeys[i]);\n    if (cmp !== 0) {\n      return cmp;\n    }\n  }\n  if (leftKeys.length === rightKeys.length) {\n    return 0;\n  }\n  return leftKeys.length < rightKeys.length ? -1 : 1;\n}\n\n/**\n * @returns true if paths are the same.\n */\nexport function pathEquals(path: Path, other: Path): boolean {\n  if (pathGetLength(path) !== pathGetLength(other)) {\n    return false;\n  }\n\n  for (\n    let i = path.pieceNum_, j = other.pieceNum_;\n    i <= path.pieces_.length;\n    i++, j++\n  ) {\n    if (path.pieces_[i] !== other.pieces_[j]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * @returns True if this path is a parent of (or the same as) other\n */\nexport function pathContains(path: Path, other: Path): boolean {\n  let i = path.pieceNum_;\n  let j = other.pieceNum_;\n  if (pathGetLength(path) > pathGetLength(other)) {\n    return false;\n  }\n  while (i < path.pieces_.length) {\n    if (path.pieces_[i] !== other.pieces_[j]) {\n      return false;\n    }\n    ++i;\n    ++j;\n  }\n  return true;\n}\n\n/**\n * Dynamic (mutable) path used to count path lengths.\n *\n * This class is used to efficiently check paths for valid\n * length (in UTF8 bytes) and depth (used in path validation).\n *\n * Throws Error exception if path is ever invalid.\n *\n * The definition of a path always begins with '/'.\n */\nexport class ValidationPath {\n  parts_: string[];\n  /** Initialize to number of '/' chars needed in path. */\n  byteLength_: number;\n\n  /**\n   * @param path - Initial Path.\n   * @param errorPrefix_ - Prefix for any error messages.\n   */\n  constructor(path: Path, public errorPrefix_: string) {\n    this.parts_ = pathSlice(path, 0);\n    /** Initialize to number of '/' chars needed in path. */\n    this.byteLength_ = Math.max(1, this.parts_.length);\n\n    for (let i = 0; i < this.parts_.length; i++) {\n      this.byteLength_ += stringLength(this.parts_[i]);\n    }\n    validationPathCheckValid(this);\n  }\n}\n\nexport function validationPathPush(\n  validationPath: ValidationPath,\n  child: string\n): void {\n  // Count the needed '/'\n  if (validationPath.parts_.length > 0) {\n    validationPath.byteLength_ += 1;\n  }\n  validationPath.parts_.push(child);\n  validationPath.byteLength_ += stringLength(child);\n  validationPathCheckValid(validationPath);\n}\n\nexport function validationPathPop(validationPath: ValidationPath): void {\n  const last = validationPath.parts_.pop();\n  validationPath.byteLength_ -= stringLength(last);\n  // Un-count the previous '/'\n  if (validationPath.parts_.length > 0) {\n    validationPath.byteLength_ -= 1;\n  }\n}\n\nfunction validationPathCheckValid(validationPath: ValidationPath): void {\n  if (validationPath.byteLength_ > MAX_PATH_LENGTH_BYTES) {\n    throw new Error(\n      validationPath.errorPrefix_ +\n        'has a key path longer than ' +\n        MAX_PATH_LENGTH_BYTES +\n        ' bytes (' +\n        validationPath.byteLength_ +\n        ').'\n    );\n  }\n  if (validationPath.parts_.length > MAX_PATH_DEPTH) {\n    throw new Error(\n      validationPath.errorPrefix_ +\n        'path specified exceeds the maximum depth that can be written (' +\n        MAX_PATH_DEPTH +\n        ') or object contains a cycle ' +\n        validationPathToErrorString(validationPath)\n    );\n  }\n}\n\n/**\n * String for use in error messages - uses '.' notation for path.\n */\nexport function validationPathToErrorString(\n  validationPath: ValidationPath\n): string {\n  if (validationPath.parts_.length === 0) {\n    return '';\n  }\n  return \"in property '\" + validationPath.parts_.join('.') + \"'\";\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { EventEmitter } from './EventEmitter';\n\ndeclare const document: Document;\n\nexport class VisibilityMonitor extends EventEmitter {\n  private visible_: boolean;\n\n  static getInstance() {\n    return new VisibilityMonitor();\n  }\n\n  constructor() {\n    super(['visible']);\n    let hidden: string;\n    let visibilityChange: string;\n    if (\n      typeof document !== 'undefined' &&\n      typeof document.addEventListener !== 'undefined'\n    ) {\n      if (typeof document['hidden'] !== 'undefined') {\n        // Opera 12.10 and Firefox 18 and later support\n        visibilityChange = 'visibilitychange';\n        hidden = 'hidden';\n      } else if (typeof document['mozHidden'] !== 'undefined') {\n        visibilityChange = 'mozvisibilitychange';\n        hidden = 'mozHidden';\n      } else if (typeof document['msHidden'] !== 'undefined') {\n        visibilityChange = 'msvisibilitychange';\n        hidden = 'msHidden';\n      } else if (typeof document['webkitHidden'] !== 'undefined') {\n        visibilityChange = 'webkitvisibilitychange';\n        hidden = 'webkitHidden';\n      }\n    }\n\n    // Initially, we always assume we are visible. This ensures that in browsers\n    // without page visibility support or in cases where we are never visible\n    // (e.g. chrome extension), we act as if we are visible, i.e. don't delay\n    // reconnects\n    this.visible_ = true;\n\n    if (visibilityChange) {\n      document.addEventListener(\n        visibilityChange,\n        () => {\n          const visible = !document[hidden];\n          if (visible !== this.visible_) {\n            this.visible_ = visible;\n            this.trigger('visible', visible);\n          }\n        },\n        false\n      );\n    }\n  }\n\n  getInitialEvent(eventType: string): boolean[] {\n    assert(eventType === 'visible', 'Unknown event type: ' + eventType);\n    return [this.visible_];\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  contains,\n  Deferred,\n  isEmpty,\n  isMobileCordova,\n  isNodeSdk,\n  isReactNative,\n  isValidFormat,\n  safeGet,\n  stringify,\n  isAdmin\n} from '@firebase/util';\n\nimport { Connection } from '../realtime/Connection';\n\nimport { AppCheckTokenProvider } from './AppCheckTokenProvider';\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { RepoInfo } from './RepoInfo';\nimport { ServerActions } from './ServerActions';\nimport { OnlineMonitor } from './util/OnlineMonitor';\nimport { Path } from './util/Path';\nimport { error, log, logWrapper, warn, ObjectToUniqueKey } from './util/util';\nimport { VisibilityMonitor } from './util/VisibilityMonitor';\nimport { SDK_VERSION } from './version';\nimport { QueryContext } from './view/EventRegistration';\n\nconst RECONNECT_MIN_DELAY = 1000;\nconst RECONNECT_MAX_DELAY_DEFAULT = 60 * 5 * 1000; // 5 minutes in milliseconds (Case: 1858)\nconst RECONNECT_MAX_DELAY_FOR_ADMINS = 30 * 1000; // 30 seconds for admin clients (likely to be a backend server)\nconst RECONNECT_DELAY_MULTIPLIER = 1.3;\nconst RECONNECT_DELAY_RESET_TIMEOUT = 30000; // Reset delay back to MIN_DELAY after being connected for 30sec.\nconst SERVER_KILL_INTERRUPT_REASON = 'server_kill';\n\n// If auth fails repeatedly, we'll assume something is wrong and log a warning / back off.\nconst INVALID_TOKEN_THRESHOLD = 3;\n\ninterface ListenSpec {\n  onComplete(s: string, p?: unknown): void;\n\n  hashFn(): string;\n\n  query: QueryContext;\n  tag: number | null;\n}\n\ninterface OnDisconnectRequest {\n  pathString: string;\n  action: string;\n  data: unknown;\n  onComplete?: (a: string, b: string) => void;\n}\n\ninterface OutstandingPut {\n  action: string;\n  request: object;\n  queued?: boolean;\n  onComplete: (a: string, b?: string) => void;\n}\n\ninterface OutstandingGet {\n  request: object;\n  onComplete: (response: { [k: string]: unknown }) => void;\n}\n\n/**\n * Firebase connection.  Abstracts wire protocol and handles reconnecting.\n *\n * NOTE: All JSON objects sent to the realtime connection must have property names enclosed\n * in quotes to make sure the closure compiler does not minify them.\n */\nexport class PersistentConnection extends ServerActions {\n  // Used for diagnostic logging.\n  id = PersistentConnection.nextPersistentConnectionId_++;\n  private log_ = logWrapper('p:' + this.id + ':');\n\n  private interruptReasons_: { [reason: string]: boolean } = {};\n  private readonly listens: Map<\n    /* path */ string,\n    Map</* queryId */ string, ListenSpec>\n  > = new Map();\n  private outstandingPuts_: OutstandingPut[] = [];\n  private outstandingGets_: OutstandingGet[] = [];\n  private outstandingPutCount_ = 0;\n  private outstandingGetCount_ = 0;\n  private onDisconnectRequestQueue_: OnDisconnectRequest[] = [];\n  private connected_ = false;\n  private reconnectDelay_ = RECONNECT_MIN_DELAY;\n  private maxReconnectDelay_ = RECONNECT_MAX_DELAY_DEFAULT;\n  private securityDebugCallback_: ((a: object) => void) | null = null;\n  lastSessionId: string | null = null;\n\n  private establishConnectionTimer_: number | null = null;\n\n  private visible_: boolean = false;\n\n  // Before we get connected, we keep a queue of pending messages to send.\n  private requestCBHash_: { [k: number]: (a: unknown) => void } = {};\n  private requestNumber_ = 0;\n\n  private realtime_: {\n    sendRequest(a: object): void;\n    close(): void;\n  } | null = null;\n\n  private authToken_: string | null = null;\n  private appCheckToken_: string | null = null;\n  private forceTokenRefresh_ = false;\n  private invalidAuthTokenCount_ = 0;\n  private invalidAppCheckTokenCount_ = 0;\n\n  private firstConnection_ = true;\n  private lastConnectionAttemptTime_: number | null = null;\n  private lastConnectionEstablishedTime_: number | null = null;\n\n  private static nextPersistentConnectionId_ = 0;\n\n  /**\n   * Counter for number of connections created. Mainly used for tagging in the logs\n   */\n  private static nextConnectionId_ = 0;\n\n  /**\n   * @param repoInfo_ - Data about the namespace we are connecting to\n   * @param applicationId_ - The Firebase App ID for this project\n   * @param onDataUpdate_ - A callback for new data from the server\n   */\n  constructor(\n    private repoInfo_: RepoInfo,\n    private applicationId_: string,\n    private onDataUpdate_: (\n      a: string,\n      b: unknown,\n      c: boolean,\n      d: number | null\n    ) => void,\n    private onConnectStatus_: (a: boolean) => void,\n    private onServerInfoUpdate_: (a: unknown) => void,\n    private authTokenProvider_: AuthTokenProvider,\n    private appCheckTokenProvider_: AppCheckTokenProvider,\n    private authOverride_?: object | null\n  ) {\n    super();\n\n    if (authOverride_ && !isNodeSdk()) {\n      throw new Error(\n        'Auth override specified in options, but not supported on non Node.js platforms'\n      );\n    }\n\n    VisibilityMonitor.getInstance().on('visible', this.onVisible_, this);\n\n    if (repoInfo_.host.indexOf('fblocal') === -1) {\n      OnlineMonitor.getInstance().on('online', this.onOnline_, this);\n    }\n  }\n\n  protected sendRequest(\n    action: string,\n    body: unknown,\n    onResponse?: (a: unknown) => void\n  ) {\n    const curReqNum = ++this.requestNumber_;\n\n    const msg = { r: curReqNum, a: action, b: body };\n    this.log_(stringify(msg));\n    assert(\n      this.connected_,\n      \"sendRequest call when we're not connected not allowed.\"\n    );\n    this.realtime_.sendRequest(msg);\n    if (onResponse) {\n      this.requestCBHash_[curReqNum] = onResponse;\n    }\n  }\n\n  get(query: QueryContext): Promise<string> {\n    this.initConnection_();\n\n    const deferred = new Deferred<string>();\n    const request = {\n      p: query._path.toString(),\n      q: query._queryObject\n    };\n    const outstandingGet = {\n      action: 'g',\n      request,\n      onComplete: (message: { [k: string]: unknown }) => {\n        const payload = message['d'] as string;\n        if (message['s'] === 'ok') {\n          deferred.resolve(payload);\n        } else {\n          deferred.reject(payload);\n        }\n      }\n    };\n    this.outstandingGets_.push(outstandingGet);\n    this.outstandingGetCount_++;\n    const index = this.outstandingGets_.length - 1;\n\n    if (this.connected_) {\n      this.sendGet_(index);\n    }\n\n    return deferred.promise;\n  }\n\n  listen(\n    query: QueryContext,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: unknown) => void\n  ) {\n    this.initConnection_();\n\n    const queryId = query._queryIdentifier;\n    const pathString = query._path.toString();\n    this.log_('Listen called for ' + pathString + ' ' + queryId);\n    if (!this.listens.has(pathString)) {\n      this.listens.set(pathString, new Map());\n    }\n    assert(\n      query._queryParams.isDefault() || !query._queryParams.loadsAllData(),\n      'listen() called for non-default but complete query'\n    );\n    assert(\n      !this.listens.get(pathString)!.has(queryId),\n      `listen() called twice for same path/queryId.`\n    );\n    const listenSpec: ListenSpec = {\n      onComplete,\n      hashFn: currentHashFn,\n      query,\n      tag\n    };\n    this.listens.get(pathString)!.set(queryId, listenSpec);\n\n    if (this.connected_) {\n      this.sendListen_(listenSpec);\n    }\n  }\n\n  private sendGet_(index: number) {\n    const get = this.outstandingGets_[index];\n    this.sendRequest('g', get.request, (message: { [k: string]: unknown }) => {\n      delete this.outstandingGets_[index];\n      this.outstandingGetCount_--;\n      if (this.outstandingGetCount_ === 0) {\n        this.outstandingGets_ = [];\n      }\n      if (get.onComplete) {\n        get.onComplete(message);\n      }\n    });\n  }\n\n  private sendListen_(listenSpec: ListenSpec) {\n    const query = listenSpec.query;\n    const pathString = query._path.toString();\n    const queryId = query._queryIdentifier;\n    this.log_('Listen on ' + pathString + ' for ' + queryId);\n    const req: { [k: string]: unknown } = { /*path*/ p: pathString };\n\n    const action = 'q';\n\n    // Only bother to send query if it's non-default.\n    if (listenSpec.tag) {\n      req['q'] = query._queryObject;\n      req['t'] = listenSpec.tag;\n    }\n\n    req[/*hash*/ 'h'] = listenSpec.hashFn();\n\n    this.sendRequest(action, req, (message: { [k: string]: unknown }) => {\n      const payload: unknown = message[/*data*/ 'd'];\n      const status = message[/*status*/ 's'] as string;\n\n      // print warnings in any case...\n      PersistentConnection.warnOnListenWarnings_(payload, query);\n\n      const currentListenSpec =\n        this.listens.get(pathString) &&\n        this.listens.get(pathString)!.get(queryId);\n      // only trigger actions if the listen hasn't been removed and readded\n      if (currentListenSpec === listenSpec) {\n        this.log_('listen response', message);\n\n        if (status !== 'ok') {\n          this.removeListen_(pathString, queryId);\n        }\n\n        if (listenSpec.onComplete) {\n          listenSpec.onComplete(status, payload);\n        }\n      }\n    });\n  }\n\n  private static warnOnListenWarnings_(payload: unknown, query: QueryContext) {\n    if (payload && typeof payload === 'object' && contains(payload, 'w')) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const warnings = safeGet(payload as any, 'w');\n      if (Array.isArray(warnings) && ~warnings.indexOf('no_index')) {\n        const indexSpec =\n          '\".indexOn\": \"' + query._queryParams.getIndex().toString() + '\"';\n        const indexPath = query._path.toString();\n        warn(\n          `Using an unspecified index. Your data will be downloaded and ` +\n            `filtered on the client. Consider adding ${indexSpec} at ` +\n            `${indexPath} to your security rules for better performance.`\n        );\n      }\n    }\n  }\n\n  refreshAuthToken(token: string) {\n    this.authToken_ = token;\n    this.log_('Auth token refreshed');\n    if (this.authToken_) {\n      this.tryAuth();\n    } else {\n      //If we're connected we want to let the server know to unauthenticate us. If we're not connected, simply delete\n      //the credential so we dont become authenticated next time we connect.\n      if (this.connected_) {\n        this.sendRequest('unauth', {}, () => {});\n      }\n    }\n\n    this.reduceReconnectDelayIfAdminCredential_(token);\n  }\n\n  private reduceReconnectDelayIfAdminCredential_(credential: string) {\n    // NOTE: This isn't intended to be bulletproof (a malicious developer can always just modify the client).\n    // Additionally, we don't bother resetting the max delay back to the default if auth fails / expires.\n    const isFirebaseSecret = credential && credential.length === 40;\n    if (isFirebaseSecret || isAdmin(credential)) {\n      this.log_(\n        'Admin auth credential detected.  Reducing max reconnect time.'\n      );\n      this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\n    }\n  }\n\n  refreshAppCheckToken(token: string | null) {\n    this.appCheckToken_ = token;\n    this.log_('App check token refreshed');\n    if (this.appCheckToken_) {\n      this.tryAppCheck();\n    } else {\n      //If we're connected we want to let the server know to unauthenticate us.\n      //If we're not connected, simply delete the credential so we dont become\n      // authenticated next time we connect.\n      if (this.connected_) {\n        this.sendRequest('unappeck', {}, () => {});\n      }\n    }\n  }\n\n  /**\n   * Attempts to authenticate with the given credentials. If the authentication attempt fails, it's triggered like\n   * a auth revoked (the connection is closed).\n   */\n  tryAuth() {\n    if (this.connected_ && this.authToken_) {\n      const token = this.authToken_;\n      const authMethod = isValidFormat(token) ? 'auth' : 'gauth';\n      const requestData: { [k: string]: unknown } = { cred: token };\n      if (this.authOverride_ === null) {\n        requestData['noauth'] = true;\n      } else if (typeof this.authOverride_ === 'object') {\n        requestData['authvar'] = this.authOverride_;\n      }\n      this.sendRequest(\n        authMethod,\n        requestData,\n        (res: { [k: string]: unknown }) => {\n          const status = res[/*status*/ 's'] as string;\n          const data = (res[/*data*/ 'd'] as string) || 'error';\n\n          if (this.authToken_ === token) {\n            if (status === 'ok') {\n              this.invalidAuthTokenCount_ = 0;\n            } else {\n              // Triggers reconnect and force refresh for auth token\n              this.onAuthRevoked_(status, data);\n            }\n          }\n        }\n      );\n    }\n  }\n\n  /**\n   * Attempts to authenticate with the given token. If the authentication\n   * attempt fails, it's triggered like the token was revoked (the connection is\n   * closed).\n   */\n  tryAppCheck() {\n    if (this.connected_ && this.appCheckToken_) {\n      this.sendRequest(\n        'appcheck',\n        { 'token': this.appCheckToken_ },\n        (res: { [k: string]: unknown }) => {\n          const status = res[/*status*/ 's'] as string;\n          const data = (res[/*data*/ 'd'] as string) || 'error';\n          if (status === 'ok') {\n            this.invalidAppCheckTokenCount_ = 0;\n          } else {\n            this.onAppCheckRevoked_(status, data);\n          }\n        }\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  unlisten(query: QueryContext, tag: number | null) {\n    const pathString = query._path.toString();\n    const queryId = query._queryIdentifier;\n\n    this.log_('Unlisten called for ' + pathString + ' ' + queryId);\n\n    assert(\n      query._queryParams.isDefault() || !query._queryParams.loadsAllData(),\n      'unlisten() called for non-default but complete query'\n    );\n    const listen = this.removeListen_(pathString, queryId);\n    if (listen && this.connected_) {\n      this.sendUnlisten_(pathString, queryId, query._queryObject, tag);\n    }\n  }\n\n  private sendUnlisten_(\n    pathString: string,\n    queryId: string,\n    queryObj: object,\n    tag: number | null\n  ) {\n    this.log_('Unlisten on ' + pathString + ' for ' + queryId);\n\n    const req: { [k: string]: unknown } = { /*path*/ p: pathString };\n    const action = 'n';\n    // Only bother sending queryId if it's non-default.\n    if (tag) {\n      req['q'] = queryObj;\n      req['t'] = tag;\n    }\n\n    this.sendRequest(action, req);\n  }\n\n  onDisconnectPut(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    this.initConnection_();\n\n    if (this.connected_) {\n      this.sendOnDisconnect_('o', pathString, data, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'o',\n        data,\n        onComplete\n      });\n    }\n  }\n\n  onDisconnectMerge(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    this.initConnection_();\n\n    if (this.connected_) {\n      this.sendOnDisconnect_('om', pathString, data, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'om',\n        data,\n        onComplete\n      });\n    }\n  }\n\n  onDisconnectCancel(\n    pathString: string,\n    onComplete?: (a: string, b: string) => void\n  ) {\n    this.initConnection_();\n\n    if (this.connected_) {\n      this.sendOnDisconnect_('oc', pathString, null, onComplete);\n    } else {\n      this.onDisconnectRequestQueue_.push({\n        pathString,\n        action: 'oc',\n        data: null,\n        onComplete\n      });\n    }\n  }\n\n  private sendOnDisconnect_(\n    action: string,\n    pathString: string,\n    data: unknown,\n    onComplete: (a: string, b: string) => void\n  ) {\n    const request = { /*path*/ p: pathString, /*data*/ d: data };\n    this.log_('onDisconnect ' + action, request);\n    this.sendRequest(action, request, (response: { [k: string]: unknown }) => {\n      if (onComplete) {\n        setTimeout(() => {\n          onComplete(\n            response[/*status*/ 's'] as string,\n            response[/* data */ 'd'] as string\n          );\n        }, Math.floor(0));\n      }\n    });\n  }\n\n  put(\n    pathString: string,\n    data: unknown,\n    onComplete?: (a: string, b: string) => void,\n    hash?: string\n  ) {\n    this.putInternal('p', pathString, data, onComplete, hash);\n  }\n\n  merge(\n    pathString: string,\n    data: unknown,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {\n    this.putInternal('m', pathString, data, onComplete, hash);\n  }\n\n  putInternal(\n    action: string,\n    pathString: string,\n    data: unknown,\n    onComplete: (a: string, b: string | null) => void,\n    hash?: string\n  ) {\n    this.initConnection_();\n\n    const request: { [k: string]: unknown } = {\n      /*path*/ p: pathString,\n      /*data*/ d: data\n    };\n\n    if (hash !== undefined) {\n      request[/*hash*/ 'h'] = hash;\n    }\n\n    // TODO: Only keep track of the most recent put for a given path?\n    this.outstandingPuts_.push({\n      action,\n      request,\n      onComplete\n    });\n\n    this.outstandingPutCount_++;\n    const index = this.outstandingPuts_.length - 1;\n\n    if (this.connected_) {\n      this.sendPut_(index);\n    } else {\n      this.log_('Buffering put: ' + pathString);\n    }\n  }\n\n  private sendPut_(index: number) {\n    const action = this.outstandingPuts_[index].action;\n    const request = this.outstandingPuts_[index].request;\n    const onComplete = this.outstandingPuts_[index].onComplete;\n    this.outstandingPuts_[index].queued = this.connected_;\n\n    this.sendRequest(action, request, (message: { [k: string]: unknown }) => {\n      this.log_(action + ' response', message);\n\n      delete this.outstandingPuts_[index];\n      this.outstandingPutCount_--;\n\n      // Clean up array occasionally.\n      if (this.outstandingPutCount_ === 0) {\n        this.outstandingPuts_ = [];\n      }\n\n      if (onComplete) {\n        onComplete(\n          message[/*status*/ 's'] as string,\n          message[/* data */ 'd'] as string\n        );\n      }\n    });\n  }\n\n  reportStats(stats: { [k: string]: unknown }) {\n    // If we're not connected, we just drop the stats.\n    if (this.connected_) {\n      const request = { /*counters*/ c: stats };\n      this.log_('reportStats', request);\n\n      this.sendRequest(/*stats*/ 's', request, result => {\n        const status = result[/*status*/ 's'];\n        if (status !== 'ok') {\n          const errorReason = result[/* data */ 'd'];\n          this.log_('reportStats', 'Error sending stats: ' + errorReason);\n        }\n      });\n    }\n  }\n\n  private onDataMessage_(message: { [k: string]: unknown }) {\n    if ('r' in message) {\n      // this is a response\n      this.log_('from server: ' + stringify(message));\n      const reqNum = message['r'] as string;\n      const onResponse = this.requestCBHash_[reqNum];\n      if (onResponse) {\n        delete this.requestCBHash_[reqNum];\n        onResponse(message[/*body*/ 'b']);\n      }\n    } else if ('error' in message) {\n      throw 'A server-side error has occurred: ' + message['error'];\n    } else if ('a' in message) {\n      // a and b are action and body, respectively\n      this.onDataPush_(message['a'] as string, message['b'] as {});\n    }\n  }\n\n  private onDataPush_(action: string, body: { [k: string]: unknown }) {\n    this.log_('handleServerMessage', action, body);\n    if (action === 'd') {\n      this.onDataUpdate_(\n        body[/*path*/ 'p'] as string,\n        body[/*data*/ 'd'],\n        /*isMerge*/ false,\n        body['t'] as number\n      );\n    } else if (action === 'm') {\n      this.onDataUpdate_(\n        body[/*path*/ 'p'] as string,\n        body[/*data*/ 'd'],\n        /*isMerge=*/ true,\n        body['t'] as number\n      );\n    } else if (action === 'c') {\n      this.onListenRevoked_(\n        body[/*path*/ 'p'] as string,\n        body[/*query*/ 'q'] as unknown[]\n      );\n    } else if (action === 'ac') {\n      this.onAuthRevoked_(\n        body[/*status code*/ 's'] as string,\n        body[/* explanation */ 'd'] as string\n      );\n    } else if (action === 'apc') {\n      this.onAppCheckRevoked_(\n        body[/*status code*/ 's'] as string,\n        body[/* explanation */ 'd'] as string\n      );\n    } else if (action === 'sd') {\n      this.onSecurityDebugPacket_(body);\n    } else {\n      error(\n        'Unrecognized action received from server: ' +\n          stringify(action) +\n          '\\nAre you using the latest client?'\n      );\n    }\n  }\n\n  private onReady_(timestamp: number, sessionId: string) {\n    this.log_('connection ready');\n    this.connected_ = true;\n    this.lastConnectionEstablishedTime_ = new Date().getTime();\n    this.handleTimestamp_(timestamp);\n    this.lastSessionId = sessionId;\n    if (this.firstConnection_) {\n      this.sendConnectStats_();\n    }\n    this.restoreState_();\n    this.firstConnection_ = false;\n    this.onConnectStatus_(true);\n  }\n\n  private scheduleConnect_(timeout: number) {\n    assert(\n      !this.realtime_,\n      \"Scheduling a connect when we're already connected/ing?\"\n    );\n\n    if (this.establishConnectionTimer_) {\n      clearTimeout(this.establishConnectionTimer_);\n    }\n\n    // NOTE: Even when timeout is 0, it's important to do a setTimeout to work around an infuriating \"Security Error\" in\n    // Firefox when trying to write to our long-polling iframe in some scenarios (e.g. Forge or our unit tests).\n\n    this.establishConnectionTimer_ = setTimeout(() => {\n      this.establishConnectionTimer_ = null;\n      this.establishConnection_();\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    }, Math.floor(timeout)) as any;\n  }\n\n  private initConnection_() {\n    if (!this.realtime_ && this.firstConnection_) {\n      this.scheduleConnect_(0);\n    }\n  }\n\n  private onVisible_(visible: boolean) {\n    // NOTE: Tabbing away and back to a window will defeat our reconnect backoff, but I think that's fine.\n    if (\n      visible &&\n      !this.visible_ &&\n      this.reconnectDelay_ === this.maxReconnectDelay_\n    ) {\n      this.log_('Window became visible.  Reducing delay.');\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    }\n    this.visible_ = visible;\n  }\n\n  private onOnline_(online: boolean) {\n    if (online) {\n      this.log_('Browser went online.');\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    } else {\n      this.log_('Browser went offline.  Killing connection.');\n      if (this.realtime_) {\n        this.realtime_.close();\n      }\n    }\n  }\n\n  private onRealtimeDisconnect_() {\n    this.log_('data client disconnected');\n    this.connected_ = false;\n    this.realtime_ = null;\n\n    // Since we don't know if our sent transactions succeeded or not, we need to cancel them.\n    this.cancelSentTransactions_();\n\n    // Clear out the pending requests.\n    this.requestCBHash_ = {};\n\n    if (this.shouldReconnect_()) {\n      if (!this.visible_) {\n        this.log_(\"Window isn't visible.  Delaying reconnect.\");\n        this.reconnectDelay_ = this.maxReconnectDelay_;\n        this.lastConnectionAttemptTime_ = new Date().getTime();\n      } else if (this.lastConnectionEstablishedTime_) {\n        // If we've been connected long enough, reset reconnect delay to minimum.\n        const timeSinceLastConnectSucceeded =\n          new Date().getTime() - this.lastConnectionEstablishedTime_;\n        if (timeSinceLastConnectSucceeded > RECONNECT_DELAY_RESET_TIMEOUT) {\n          this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n        }\n        this.lastConnectionEstablishedTime_ = null;\n      }\n\n      const timeSinceLastConnectAttempt =\n        new Date().getTime() - this.lastConnectionAttemptTime_;\n      let reconnectDelay = Math.max(\n        0,\n        this.reconnectDelay_ - timeSinceLastConnectAttempt\n      );\n      reconnectDelay = Math.random() * reconnectDelay;\n\n      this.log_('Trying to reconnect in ' + reconnectDelay + 'ms');\n      this.scheduleConnect_(reconnectDelay);\n\n      // Adjust reconnect delay for next time.\n      this.reconnectDelay_ = Math.min(\n        this.maxReconnectDelay_,\n        this.reconnectDelay_ * RECONNECT_DELAY_MULTIPLIER\n      );\n    }\n    this.onConnectStatus_(false);\n  }\n\n  private async establishConnection_() {\n    if (this.shouldReconnect_()) {\n      this.log_('Making a connection attempt');\n      this.lastConnectionAttemptTime_ = new Date().getTime();\n      this.lastConnectionEstablishedTime_ = null;\n      const onDataMessage = this.onDataMessage_.bind(this);\n      const onReady = this.onReady_.bind(this);\n      const onDisconnect = this.onRealtimeDisconnect_.bind(this);\n      const connId = this.id + ':' + PersistentConnection.nextConnectionId_++;\n      const lastSessionId = this.lastSessionId;\n      let canceled = false;\n      let connection: Connection | null = null;\n      const closeFn = function () {\n        if (connection) {\n          connection.close();\n        } else {\n          canceled = true;\n          onDisconnect();\n        }\n      };\n      const sendRequestFn = function (msg: object) {\n        assert(\n          connection,\n          \"sendRequest call when we're not connected not allowed.\"\n        );\n        connection.sendRequest(msg);\n      };\n\n      this.realtime_ = {\n        close: closeFn,\n        sendRequest: sendRequestFn\n      };\n\n      const forceRefresh = this.forceTokenRefresh_;\n      this.forceTokenRefresh_ = false;\n\n      try {\n        // First fetch auth and app check token, and establish connection after\n        // fetching the token was successful\n        const [authToken, appCheckToken] = await Promise.all([\n          this.authTokenProvider_.getToken(forceRefresh),\n          this.appCheckTokenProvider_.getToken(forceRefresh)\n        ]);\n\n        if (!canceled) {\n          log('getToken() completed. Creating connection.');\n          this.authToken_ = authToken && authToken.accessToken;\n          this.appCheckToken_ = appCheckToken && appCheckToken.token;\n          connection = new Connection(\n            connId,\n            this.repoInfo_,\n            this.applicationId_,\n            this.appCheckToken_,\n            this.authToken_,\n            onDataMessage,\n            onReady,\n            onDisconnect,\n            /* onKill= */ reason => {\n              warn(reason + ' (' + this.repoInfo_.toString() + ')');\n              this.interrupt(SERVER_KILL_INTERRUPT_REASON);\n            },\n            lastSessionId\n          );\n        } else {\n          log('getToken() completed but was canceled');\n        }\n      } catch (error) {\n        this.log_('Failed to get token: ' + error);\n        if (!canceled) {\n          if (this.repoInfo_.nodeAdmin) {\n            // This may be a critical error for the Admin Node.js SDK, so log a warning.\n            // But getToken() may also just have temporarily failed, so we still want to\n            // continue retrying.\n            warn(error);\n          }\n          closeFn();\n        }\n      }\n    }\n  }\n\n  interrupt(reason: string) {\n    log('Interrupting connection for reason: ' + reason);\n    this.interruptReasons_[reason] = true;\n    if (this.realtime_) {\n      this.realtime_.close();\n    } else {\n      if (this.establishConnectionTimer_) {\n        clearTimeout(this.establishConnectionTimer_);\n        this.establishConnectionTimer_ = null;\n      }\n      if (this.connected_) {\n        this.onRealtimeDisconnect_();\n      }\n    }\n  }\n\n  resume(reason: string) {\n    log('Resuming connection for reason: ' + reason);\n    delete this.interruptReasons_[reason];\n    if (isEmpty(this.interruptReasons_)) {\n      this.reconnectDelay_ = RECONNECT_MIN_DELAY;\n      if (!this.realtime_) {\n        this.scheduleConnect_(0);\n      }\n    }\n  }\n\n  private handleTimestamp_(timestamp: number) {\n    const delta = timestamp - new Date().getTime();\n    this.onServerInfoUpdate_({ serverTimeOffset: delta });\n  }\n\n  private cancelSentTransactions_() {\n    for (let i = 0; i < this.outstandingPuts_.length; i++) {\n      const put = this.outstandingPuts_[i];\n      if (put && /*hash*/ 'h' in put.request && put.queued) {\n        if (put.onComplete) {\n          put.onComplete('disconnect');\n        }\n\n        delete this.outstandingPuts_[i];\n        this.outstandingPutCount_--;\n      }\n    }\n\n    // Clean up array occasionally.\n    if (this.outstandingPutCount_ === 0) {\n      this.outstandingPuts_ = [];\n    }\n  }\n\n  private onListenRevoked_(pathString: string, query?: unknown[]) {\n    // Remove the listen and manufacture a \"permission_denied\" error for the failed listen.\n    let queryId;\n    if (!query) {\n      queryId = 'default';\n    } else {\n      queryId = query.map(q => ObjectToUniqueKey(q)).join('$');\n    }\n    const listen = this.removeListen_(pathString, queryId);\n    if (listen && listen.onComplete) {\n      listen.onComplete('permission_denied');\n    }\n  }\n\n  private removeListen_(pathString: string, queryId: string): ListenSpec {\n    const normalizedPathString = new Path(pathString).toString(); // normalize path.\n    let listen;\n    if (this.listens.has(normalizedPathString)) {\n      const map = this.listens.get(normalizedPathString)!;\n      listen = map.get(queryId);\n      map.delete(queryId);\n      if (map.size === 0) {\n        this.listens.delete(normalizedPathString);\n      }\n    } else {\n      // all listens for this path has already been removed\n      listen = undefined;\n    }\n    return listen;\n  }\n\n  private onAuthRevoked_(statusCode: string, explanation: string) {\n    log('Auth token revoked: ' + statusCode + '/' + explanation);\n    this.authToken_ = null;\n    this.forceTokenRefresh_ = true;\n    this.realtime_.close();\n    if (statusCode === 'invalid_token' || statusCode === 'permission_denied') {\n      // We'll wait a couple times before logging the warning / increasing the\n      // retry period since oauth tokens will report as \"invalid\" if they're\n      // just expired. Plus there may be transient issues that resolve themselves.\n      this.invalidAuthTokenCount_++;\n      if (this.invalidAuthTokenCount_ >= INVALID_TOKEN_THRESHOLD) {\n        // Set a long reconnect delay because recovery is unlikely\n        this.reconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\n\n        // Notify the auth token provider that the token is invalid, which will log\n        // a warning\n        this.authTokenProvider_.notifyForInvalidToken();\n      }\n    }\n  }\n\n  private onAppCheckRevoked_(statusCode: string, explanation: string) {\n    log('App check token revoked: ' + statusCode + '/' + explanation);\n    this.appCheckToken_ = null;\n    this.forceTokenRefresh_ = true;\n    // Note: We don't close the connection as the developer may not have\n    // enforcement enabled. The backend closes connections with enforcements.\n    if (statusCode === 'invalid_token' || statusCode === 'permission_denied') {\n      // We'll wait a couple times before logging the warning / increasing the\n      // retry period since oauth tokens will report as \"invalid\" if they're\n      // just expired. Plus there may be transient issues that resolve themselves.\n      this.invalidAppCheckTokenCount_++;\n      if (this.invalidAppCheckTokenCount_ >= INVALID_TOKEN_THRESHOLD) {\n        this.appCheckTokenProvider_.notifyForInvalidToken();\n      }\n    }\n  }\n\n  private onSecurityDebugPacket_(body: { [k: string]: unknown }) {\n    if (this.securityDebugCallback_) {\n      this.securityDebugCallback_(body);\n    } else {\n      if ('msg' in body) {\n        console.log(\n          'FIREBASE: ' + (body['msg'] as string).replace('\\n', '\\nFIREBASE: ')\n        );\n      }\n    }\n  }\n\n  private restoreState_() {\n    //Re-authenticate ourselves if we have a credential stored.\n    this.tryAuth();\n    this.tryAppCheck();\n\n    // Puts depend on having received the corresponding data update from the server before they complete, so we must\n    // make sure to send listens before puts.\n    for (const queries of this.listens.values()) {\n      for (const listenSpec of queries.values()) {\n        this.sendListen_(listenSpec);\n      }\n    }\n\n    for (let i = 0; i < this.outstandingPuts_.length; i++) {\n      if (this.outstandingPuts_[i]) {\n        this.sendPut_(i);\n      }\n    }\n\n    while (this.onDisconnectRequestQueue_.length) {\n      const request = this.onDisconnectRequestQueue_.shift();\n      this.sendOnDisconnect_(\n        request.action,\n        request.pathString,\n        request.data,\n        request.onComplete\n      );\n    }\n\n    for (let i = 0; i < this.outstandingGets_.length; i++) {\n      if (this.outstandingGets_[i]) {\n        this.sendGet_(i);\n      }\n    }\n  }\n\n  /**\n   * Sends client stats for first connection\n   */\n  private sendConnectStats_() {\n    const stats: { [k: string]: number } = {};\n\n    let clientName = 'js';\n    if (isNodeSdk()) {\n      if (this.repoInfo_.nodeAdmin) {\n        clientName = 'admin_node';\n      } else {\n        clientName = 'node';\n      }\n    }\n\n    stats['sdk.' + clientName + '.' + SDK_VERSION.replace(/\\./g, '-')] = 1;\n\n    if (isMobileCordova()) {\n      stats['framework.cordova'] = 1;\n    } else if (isReactNative()) {\n      stats['framework.reactnative'] = 1;\n    }\n    this.reportStats(stats);\n  }\n\n  private shouldReconnect_(): boolean {\n    const online = OnlineMonitor.getInstance().currentlyOnline();\n    return isEmpty(this.interruptReasons_) && online;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../util/Path';\n\nimport { Index } from './indexes/Index';\n\n/**\n * Node is an interface defining the common functionality for nodes in\n * a DataSnapshot.\n *\n * @interface\n */\nexport interface Node {\n  /**\n   * Whether this node is a leaf node.\n   * @returns Whether this is a leaf node.\n   */\n  isLeafNode(): boolean;\n\n  /**\n   * Gets the priority of the node.\n   * @returns The priority of the node.\n   */\n  getPriority(): Node;\n\n  /**\n   * Returns a duplicate node with the new priority.\n   * @param newPriorityNode - New priority to set for the node.\n   * @returns Node with new priority.\n   */\n  updatePriority(newPriorityNode: Node): Node;\n\n  /**\n   * Returns the specified immediate child, or null if it doesn't exist.\n   * @param childName - The name of the child to retrieve.\n   * @returns The retrieved child, or an empty node.\n   */\n  getImmediateChild(childName: string): Node;\n\n  /**\n   * Returns a child by path, or null if it doesn't exist.\n   * @param path - The path of the child to retrieve.\n   * @returns The retrieved child or an empty node.\n   */\n  getChild(path: Path): Node;\n\n  /**\n   * Returns the name of the child immediately prior to the specified childNode, or null.\n   * @param childName - The name of the child to find the predecessor of.\n   * @param childNode - The node to find the predecessor of.\n   * @param index - The index to use to determine the predecessor\n   * @returns The name of the predecessor child, or null if childNode is the first child.\n   */\n  getPredecessorChildName(\n    childName: string,\n    childNode: Node,\n    index: Index\n  ): string | null;\n\n  /**\n   * Returns a duplicate node, with the specified immediate child updated.\n   * Any value in the node will be removed.\n   * @param childName - The name of the child to update.\n   * @param newChildNode - The new child node\n   * @returns The updated node.\n   */\n  updateImmediateChild(childName: string, newChildNode: Node): Node;\n\n  /**\n   * Returns a duplicate node, with the specified child updated.  Any value will\n   * be removed.\n   * @param path - The path of the child to update.\n   * @param newChildNode - The new child node, which may be an empty node\n   * @returns The updated node.\n   */\n  updateChild(path: Path, newChildNode: Node): Node;\n\n  /**\n   * True if the immediate child specified exists\n   */\n  hasChild(childName: string): boolean;\n\n  /**\n   * @returns True if this node has no value or children.\n   */\n  isEmpty(): boolean;\n\n  /**\n   * @returns The number of children of this node.\n   */\n  numChildren(): number;\n\n  /**\n   * Calls action for each child.\n   * @param action - Action to be called for\n   * each child.  It's passed the child name and the child node.\n   * @returns The first truthy value return by action, or the last falsey one\n   */\n  forEachChild(index: Index, action: (a: string, b: Node) => void): unknown;\n\n  /**\n   * @param exportFormat - True for export format (also wire protocol format).\n   * @returns Value of this node as JSON.\n   */\n  val(exportFormat?: boolean): unknown;\n\n  /**\n   * @returns hash representing the node contents.\n   */\n  hash(): string;\n\n  /**\n   * @param other - Another node\n   * @returns -1 for less than, 0 for equal, 1 for greater than other\n   */\n  compareTo(other: Node): number;\n\n  /**\n   * @returns Whether or not this snapshot equals other\n   */\n  equals(other: Node): boolean;\n\n  /**\n   * @returns This node, with the specified index now available\n   */\n  withIndex(indexDefinition: Index): Node;\n\n  isIndexed(indexDefinition: Index): boolean;\n}\n\nexport class NamedNode {\n  constructor(public name: string, public node: Node) {}\n\n  static Wrap(name: string, node: Node) {\n    return new NamedNode(name, node);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Comparator } from '../../util/SortedMap';\nimport { MIN_NAME } from '../../util/util';\nimport { Node, NamedNode } from '../Node';\n\nexport abstract class Index {\n  abstract compare(a: NamedNode, b: NamedNode): number;\n\n  abstract isDefinedOn(node: Node): boolean;\n\n  /**\n   * @returns A standalone comparison function for\n   * this index\n   */\n  getCompare(): Comparator<NamedNode> {\n    return this.compare.bind(this);\n  }\n\n  /**\n   * Given a before and after value for a node, determine if the indexed value has changed. Even if they are different,\n   * it's possible that the changes are isolated to parts of the snapshot that are not indexed.\n   *\n   *\n   * @returns True if the portion of the snapshot being indexed changed between oldNode and newNode\n   */\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    const oldWrapped = new NamedNode(MIN_NAME, oldNode);\n    const newWrapped = new NamedNode(MIN_NAME, newNode);\n    return this.compare(oldWrapped, newWrapped) !== 0;\n  }\n\n  /**\n   * @returns a node wrapper that will sort equal to or less than\n   * any other node wrapper, using this index\n   */\n  minPost(): NamedNode {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (NamedNode as any).MIN;\n  }\n\n  /**\n   * @returns a node wrapper that will sort greater than or equal to\n   * any other node wrapper, using this index\n   */\n  abstract maxPost(): NamedNode;\n\n  abstract makePost(indexValue: unknown, name: string): NamedNode;\n\n  /**\n   * @returns String representation for inclusion in a query spec\n   */\n  abstract toString(): string;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, assertionError } from '@firebase/util';\n\nimport { nameCompare, MAX_NAME } from '../../util/util';\nimport { ChildrenNode } from '../ChildrenNode';\nimport { Node, NamedNode } from '../Node';\n\nimport { Index } from './Index';\n\nlet __EMPTY_NODE: ChildrenNode;\n\nexport class KeyIndex extends Index {\n  static get __EMPTY_NODE() {\n    return __EMPTY_NODE;\n  }\n\n  static set __EMPTY_NODE(val) {\n    __EMPTY_NODE = val;\n  }\n  compare(a: NamedNode, b: NamedNode): number {\n    return nameCompare(a.name, b.name);\n  }\n  isDefinedOn(node: Node): boolean {\n    // We could probably return true here (since every node has a key), but it's never called\n    // so just leaving unimplemented for now.\n    throw assertionError('KeyIndex.isDefinedOn not expected to be called.');\n  }\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return false; // The key for a node never changes.\n  }\n  minPost() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (NamedNode as any).MIN;\n  }\n  maxPost(): NamedNode {\n    // TODO: This should really be created once and cached in a static property, but\n    // NamedNode isn't defined yet, so I can't use it in a static.  Bleh.\n    return new NamedNode(MAX_NAME, __EMPTY_NODE);\n  }\n\n  makePost(indexValue: string, name: string): NamedNode {\n    assert(\n      typeof indexValue === 'string',\n      'KeyIndex indexValue must always be a string.'\n    );\n    // We just use empty node, but it'll never be compared, since our comparator only looks at name.\n    return new NamedNode(indexValue, __EMPTY_NODE);\n  }\n\n  /**\n   * @returns String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.key';\n  }\n}\n\nexport const KEY_INDEX = new KeyIndex();\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Implementation of an immutable SortedMap using a Left-leaning\n * Red-Black Tree, adapted from the implementation in Mugs\n * (http://mads379.github.com/mugs/) by Mads Hartmann Jensen\n * (mads379\\@gmail.com).\n *\n * Original paper on Left-leaning Red-Black Trees:\n *   http://www.cs.princeton.edu/~rs/talks/LLRB/LLRB.pdf\n *\n * Invariant 1: No red node has a red child\n * Invariant 2: Every leaf path has the same number of black nodes\n * Invariant 3: Only the left child can be red (left leaning)\n */\n\n// TODO: There are some improvements I'd like to make to improve memory / perf:\n//  * Create two prototypes, LLRedNode and LLBlackNode, instead of storing a\n//    color property in every node.\n// TODO: It would also be good (and possibly necessary) to create a base\n// interface for LLRBNode and LLRBEmptyNode.\n\nexport type Comparator<K> = (key1: K, key2: K) => number;\n\n/**\n * An iterator over an LLRBNode.\n */\nexport class SortedMapIterator<K, V, T> {\n  private nodeStack_: Array<LLRBNode<K, V> | LLRBEmptyNode<K, V>> = [];\n\n  /**\n   * @param node - Node to iterate.\n   * @param isReverse_ - Whether or not to iterate in reverse\n   */\n  constructor(\n    node: LLRBNode<K, V> | LLRBEmptyNode<K, V>,\n    startKey: K | null,\n    comparator: Comparator<K>,\n    private isReverse_: boolean,\n    private resultGenerator_: ((k: K, v: V) => T) | null = null\n  ) {\n    let cmp = 1;\n    while (!node.isEmpty()) {\n      node = node as LLRBNode<K, V>;\n      cmp = startKey ? comparator(node.key, startKey) : 1;\n      // flip the comparison if we're going in reverse\n      if (isReverse_) {\n        cmp *= -1;\n      }\n\n      if (cmp < 0) {\n        // This node is less than our start key. ignore it\n        if (this.isReverse_) {\n          node = node.left;\n        } else {\n          node = node.right;\n        }\n      } else if (cmp === 0) {\n        // This node is exactly equal to our start key. Push it on the stack, but stop iterating;\n        this.nodeStack_.push(node);\n        break;\n      } else {\n        // This node is greater than our start key, add it to the stack and move to the next one\n        this.nodeStack_.push(node);\n        if (this.isReverse_) {\n          node = node.right;\n        } else {\n          node = node.left;\n        }\n      }\n    }\n  }\n\n  getNext(): T {\n    if (this.nodeStack_.length === 0) {\n      return null;\n    }\n\n    let node = this.nodeStack_.pop();\n    let result: T;\n    if (this.resultGenerator_) {\n      result = this.resultGenerator_(node.key, node.value);\n    } else {\n      result = { key: node.key, value: node.value } as unknown as T;\n    }\n\n    if (this.isReverse_) {\n      node = node.left;\n      while (!node.isEmpty()) {\n        this.nodeStack_.push(node);\n        node = node.right;\n      }\n    } else {\n      node = node.right;\n      while (!node.isEmpty()) {\n        this.nodeStack_.push(node);\n        node = node.left;\n      }\n    }\n\n    return result;\n  }\n\n  hasNext(): boolean {\n    return this.nodeStack_.length > 0;\n  }\n\n  peek(): T {\n    if (this.nodeStack_.length === 0) {\n      return null;\n    }\n\n    const node = this.nodeStack_[this.nodeStack_.length - 1];\n    if (this.resultGenerator_) {\n      return this.resultGenerator_(node.key, node.value);\n    } else {\n      return { key: node.key, value: node.value } as unknown as T;\n    }\n  }\n}\n\n/**\n * Represents a node in a Left-leaning Red-Black tree.\n */\nexport class LLRBNode<K, V> {\n  color: boolean;\n  left: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  right: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n\n  /**\n   * @param key - Key associated with this node.\n   * @param value - Value associated with this node.\n   * @param color - Whether this node is red.\n   * @param left - Left child.\n   * @param right - Right child.\n   */\n  constructor(\n    public key: K,\n    public value: V,\n    color: boolean | null,\n    left?: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right?: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ) {\n    this.color = color != null ? color : LLRBNode.RED;\n    this.left =\n      left != null ? left : (SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>);\n    this.right =\n      right != null ? right : (SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>);\n  }\n\n  static RED = true;\n  static BLACK = false;\n\n  /**\n   * Returns a copy of the current node, optionally replacing pieces of it.\n   *\n   * @param key - New key for the node, or null.\n   * @param value - New value for the node, or null.\n   * @param color - New color for the node, or null.\n   * @param left - New left child for the node, or null.\n   * @param right - New right child for the node, or null.\n   * @returns The node copy.\n   */\n  copy(\n    key: K | null,\n    value: V | null,\n    color: boolean | null,\n    left: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ): LLRBNode<K, V> {\n    return new LLRBNode(\n      key != null ? key : this.key,\n      value != null ? value : this.value,\n      color != null ? color : this.color,\n      left != null ? left : this.left,\n      right != null ? right : this.right\n    );\n  }\n\n  /**\n   * @returns The total number of nodes in the tree.\n   */\n  count(): number {\n    return this.left.count() + 1 + this.right.count();\n  }\n\n  /**\n   * @returns True if the tree is empty.\n   */\n  isEmpty(): boolean {\n    return false;\n  }\n\n  /**\n   * Traverses the tree in key order and calls the specified action function\n   * for each node.\n   *\n   * @param action - Callback function to be called for each\n   *   node.  If it returns true, traversal is aborted.\n   * @returns The first truthy value returned by action, or the last falsey\n   *   value returned by action\n   */\n  inorderTraversal(action: (k: K, v: V) => unknown): boolean {\n    return (\n      this.left.inorderTraversal(action) ||\n      !!action(this.key, this.value) ||\n      this.right.inorderTraversal(action)\n    );\n  }\n\n  /**\n   * Traverses the tree in reverse key order and calls the specified action function\n   * for each node.\n   *\n   * @param action - Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @returns True if traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return (\n      this.right.reverseTraversal(action) ||\n      action(this.key, this.value) ||\n      this.left.reverseTraversal(action)\n    );\n  }\n\n  /**\n   * @returns The minimum node in the tree.\n   */\n  private min_(): LLRBNode<K, V> {\n    if (this.left.isEmpty()) {\n      return this;\n    } else {\n      return (this.left as LLRBNode<K, V>).min_();\n    }\n  }\n\n  /**\n   * @returns The maximum key in the tree.\n   */\n  minKey(): K {\n    return this.min_().key;\n  }\n\n  /**\n   * @returns The maximum key in the tree.\n   */\n  maxKey(): K {\n    if (this.right.isEmpty()) {\n      return this.key;\n    } else {\n      return this.right.maxKey();\n    }\n  }\n\n  /**\n   * @param key - Key to insert.\n   * @param value - Value to insert.\n   * @param comparator - Comparator.\n   * @returns New tree, with the key/value added.\n   */\n  insert(key: K, value: V, comparator: Comparator<K>): LLRBNode<K, V> {\n    let n: LLRBNode<K, V> = this;\n    const cmp = comparator(key, n.key);\n    if (cmp < 0) {\n      n = n.copy(null, null, null, n.left.insert(key, value, comparator), null);\n    } else if (cmp === 0) {\n      n = n.copy(null, value, null, null, null);\n    } else {\n      n = n.copy(\n        null,\n        null,\n        null,\n        null,\n        n.right.insert(key, value, comparator)\n      );\n    }\n    return n.fixUp_();\n  }\n\n  /**\n   * @returns New tree, with the minimum key removed.\n   */\n  private removeMin_(): LLRBNode<K, V> | LLRBEmptyNode<K, V> {\n    if (this.left.isEmpty()) {\n      return SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>;\n    }\n    let n: LLRBNode<K, V> = this;\n    if (!n.left.isRed_() && !n.left.left.isRed_()) {\n      n = n.moveRedLeft_();\n    }\n    n = n.copy(null, null, null, (n.left as LLRBNode<K, V>).removeMin_(), null);\n    return n.fixUp_();\n  }\n\n  /**\n   * @param key - The key of the item to remove.\n   * @param comparator - Comparator.\n   * @returns New tree, with the specified item removed.\n   */\n  remove(\n    key: K,\n    comparator: Comparator<K>\n  ): LLRBNode<K, V> | LLRBEmptyNode<K, V> {\n    let n, smallest;\n    n = this;\n    if (comparator(key, n.key) < 0) {\n      if (!n.left.isEmpty() && !n.left.isRed_() && !n.left.left.isRed_()) {\n        n = n.moveRedLeft_();\n      }\n      n = n.copy(null, null, null, n.left.remove(key, comparator), null);\n    } else {\n      if (n.left.isRed_()) {\n        n = n.rotateRight_();\n      }\n      if (!n.right.isEmpty() && !n.right.isRed_() && !n.right.left.isRed_()) {\n        n = n.moveRedRight_();\n      }\n      if (comparator(key, n.key) === 0) {\n        if (n.right.isEmpty()) {\n          return SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>;\n        } else {\n          smallest = (n.right as LLRBNode<K, V>).min_();\n          n = n.copy(\n            smallest.key,\n            smallest.value,\n            null,\n            null,\n            (n.right as LLRBNode<K, V>).removeMin_()\n          );\n        }\n      }\n      n = n.copy(null, null, null, null, n.right.remove(key, comparator));\n    }\n    return n.fixUp_();\n  }\n\n  /**\n   * @returns Whether this is a RED node.\n   */\n  isRed_(): boolean {\n    return this.color;\n  }\n\n  /**\n   * @returns New tree after performing any needed rotations.\n   */\n  private fixUp_(): LLRBNode<K, V> {\n    let n: LLRBNode<K, V> = this;\n    if (n.right.isRed_() && !n.left.isRed_()) {\n      n = n.rotateLeft_();\n    }\n    if (n.left.isRed_() && n.left.left.isRed_()) {\n      n = n.rotateRight_();\n    }\n    if (n.left.isRed_() && n.right.isRed_()) {\n      n = n.colorFlip_();\n    }\n    return n;\n  }\n\n  /**\n   * @returns New tree, after moveRedLeft.\n   */\n  private moveRedLeft_(): LLRBNode<K, V> {\n    let n = this.colorFlip_();\n    if (n.right.left.isRed_()) {\n      n = n.copy(\n        null,\n        null,\n        null,\n        null,\n        (n.right as LLRBNode<K, V>).rotateRight_()\n      );\n      n = n.rotateLeft_();\n      n = n.colorFlip_();\n    }\n    return n;\n  }\n\n  /**\n   * @returns New tree, after moveRedRight.\n   */\n  private moveRedRight_(): LLRBNode<K, V> {\n    let n = this.colorFlip_();\n    if (n.left.left.isRed_()) {\n      n = n.rotateRight_();\n      n = n.colorFlip_();\n    }\n    return n;\n  }\n\n  /**\n   * @returns New tree, after rotateLeft.\n   */\n  private rotateLeft_(): LLRBNode<K, V> {\n    const nl = this.copy(null, null, LLRBNode.RED, null, this.right.left);\n    return this.right.copy(null, null, this.color, nl, null) as LLRBNode<K, V>;\n  }\n\n  /**\n   * @returns New tree, after rotateRight.\n   */\n  private rotateRight_(): LLRBNode<K, V> {\n    const nr = this.copy(null, null, LLRBNode.RED, this.left.right, null);\n    return this.left.copy(null, null, this.color, null, nr) as LLRBNode<K, V>;\n  }\n\n  /**\n   * @returns Newt ree, after colorFlip.\n   */\n  private colorFlip_(): LLRBNode<K, V> {\n    const left = this.left.copy(null, null, !this.left.color, null, null);\n    const right = this.right.copy(null, null, !this.right.color, null, null);\n    return this.copy(null, null, !this.color, left, right);\n  }\n\n  /**\n   * For testing.\n   *\n   * @returns True if all is well.\n   */\n  private checkMaxDepth_(): boolean {\n    const blackDepth = this.check_();\n    return Math.pow(2.0, blackDepth) <= this.count() + 1;\n  }\n\n  check_(): number {\n    if (this.isRed_() && this.left.isRed_()) {\n      throw new Error(\n        'Red node has red child(' + this.key + ',' + this.value + ')'\n      );\n    }\n    if (this.right.isRed_()) {\n      throw new Error(\n        'Right child of (' + this.key + ',' + this.value + ') is red'\n      );\n    }\n    const blackDepth = this.left.check_();\n    if (blackDepth !== this.right.check_()) {\n      throw new Error('Black depths differ');\n    } else {\n      return blackDepth + (this.isRed_() ? 0 : 1);\n    }\n  }\n}\n\n/**\n * Represents an empty node (a leaf node in the Red-Black Tree).\n */\nexport class LLRBEmptyNode<K, V> {\n  key: K;\n  value: V;\n  left: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  right: LLRBNode<K, V> | LLRBEmptyNode<K, V>;\n  color: boolean;\n\n  /**\n   * Returns a copy of the current node.\n   *\n   * @returns The node copy.\n   */\n  copy(\n    key: K | null,\n    value: V | null,\n    color: boolean | null,\n    left: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null,\n    right: LLRBNode<K, V> | LLRBEmptyNode<K, V> | null\n  ): LLRBEmptyNode<K, V> {\n    return this;\n  }\n\n  /**\n   * Returns a copy of the tree, with the specified key/value added.\n   *\n   * @param key - Key to be added.\n   * @param value - Value to be added.\n   * @param comparator - Comparator.\n   * @returns New tree, with item added.\n   */\n  insert(key: K, value: V, comparator: Comparator<K>): LLRBNode<K, V> {\n    return new LLRBNode(key, value, null);\n  }\n\n  /**\n   * Returns a copy of the tree, with the specified key removed.\n   *\n   * @param key - The key to remove.\n   * @param comparator - Comparator.\n   * @returns New tree, with item removed.\n   */\n  remove(key: K, comparator: Comparator<K>): LLRBEmptyNode<K, V> {\n    return this;\n  }\n\n  /**\n   * @returns The total number of nodes in the tree.\n   */\n  count(): number {\n    return 0;\n  }\n\n  /**\n   * @returns True if the tree is empty.\n   */\n  isEmpty(): boolean {\n    return true;\n  }\n\n  /**\n   * Traverses the tree in key order and calls the specified action function\n   * for each node.\n   *\n   * @param action - Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @returns True if traversal was aborted.\n   */\n  inorderTraversal(action: (k: K, v: V) => unknown): boolean {\n    return false;\n  }\n\n  /**\n   * Traverses the tree in reverse key order and calls the specified action function\n   * for each node.\n   *\n   * @param action - Callback function to be called for each\n   * node.  If it returns true, traversal is aborted.\n   * @returns True if traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return false;\n  }\n\n  minKey(): null {\n    return null;\n  }\n\n  maxKey(): null {\n    return null;\n  }\n\n  check_(): number {\n    return 0;\n  }\n\n  /**\n   * @returns Whether this node is red.\n   */\n  isRed_() {\n    return false;\n  }\n}\n\n/**\n * An immutable sorted map implementation, based on a Left-leaning Red-Black\n * tree.\n */\nexport class SortedMap<K, V> {\n  /**\n   * Always use the same empty node, to reduce memory.\n   */\n  static EMPTY_NODE = new LLRBEmptyNode();\n\n  /**\n   * @param comparator_ - Key comparator.\n   * @param root_ - Optional root node for the map.\n   */\n  constructor(\n    private comparator_: Comparator<K>,\n    private root_:\n      | LLRBNode<K, V>\n      | LLRBEmptyNode<K, V> = SortedMap.EMPTY_NODE as LLRBEmptyNode<K, V>\n  ) {}\n\n  /**\n   * Returns a copy of the map, with the specified key/value added or replaced.\n   * (TODO: We should perhaps rename this method to 'put')\n   *\n   * @param key - Key to be added.\n   * @param value - Value to be added.\n   * @returns New map, with item added.\n   */\n  insert(key: K, value: V): SortedMap<K, V> {\n    return new SortedMap(\n      this.comparator_,\n      this.root_\n        .insert(key, value, this.comparator_)\n        .copy(null, null, LLRBNode.BLACK, null, null)\n    );\n  }\n\n  /**\n   * Returns a copy of the map, with the specified key removed.\n   *\n   * @param key - The key to remove.\n   * @returns New map, with item removed.\n   */\n  remove(key: K): SortedMap<K, V> {\n    return new SortedMap(\n      this.comparator_,\n      this.root_\n        .remove(key, this.comparator_)\n        .copy(null, null, LLRBNode.BLACK, null, null)\n    );\n  }\n\n  /**\n   * Returns the value of the node with the given key, or null.\n   *\n   * @param key - The key to look up.\n   * @returns The value of the node with the given key, or null if the\n   * key doesn't exist.\n   */\n  get(key: K): V | null {\n    let cmp;\n    let node = this.root_;\n    while (!node.isEmpty()) {\n      cmp = this.comparator_(key, node.key);\n      if (cmp === 0) {\n        return node.value;\n      } else if (cmp < 0) {\n        node = node.left;\n      } else if (cmp > 0) {\n        node = node.right;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns the key of the item *before* the specified key, or null if key is the first item.\n   * @param key - The key to find the predecessor of\n   * @returns The predecessor key.\n   */\n  getPredecessorKey(key: K): K | null {\n    let cmp,\n      node = this.root_,\n      rightParent = null;\n    while (!node.isEmpty()) {\n      cmp = this.comparator_(key, node.key);\n      if (cmp === 0) {\n        if (!node.left.isEmpty()) {\n          node = node.left;\n          while (!node.right.isEmpty()) {\n            node = node.right;\n          }\n          return node.key;\n        } else if (rightParent) {\n          return rightParent.key;\n        } else {\n          return null; // first item.\n        }\n      } else if (cmp < 0) {\n        node = node.left;\n      } else if (cmp > 0) {\n        rightParent = node;\n        node = node.right;\n      }\n    }\n\n    throw new Error(\n      'Attempted to find predecessor key for a nonexistent key.  What gives?'\n    );\n  }\n\n  /**\n   * @returns True if the map is empty.\n   */\n  isEmpty(): boolean {\n    return this.root_.isEmpty();\n  }\n\n  /**\n   * @returns The total number of nodes in the map.\n   */\n  count(): number {\n    return this.root_.count();\n  }\n\n  /**\n   * @returns The minimum key in the map.\n   */\n  minKey(): K | null {\n    return this.root_.minKey();\n  }\n\n  /**\n   * @returns The maximum key in the map.\n   */\n  maxKey(): K | null {\n    return this.root_.maxKey();\n  }\n\n  /**\n   * Traverses the map in key order and calls the specified action function\n   * for each key/value pair.\n   *\n   * @param action - Callback function to be called\n   * for each key/value pair.  If action returns true, traversal is aborted.\n   * @returns The first truthy value returned by action, or the last falsey\n   *   value returned by action\n   */\n  inorderTraversal(action: (k: K, v: V) => unknown): boolean {\n    return this.root_.inorderTraversal(action);\n  }\n\n  /**\n   * Traverses the map in reverse key order and calls the specified action function\n   * for each key/value pair.\n   *\n   * @param action - Callback function to be called\n   * for each key/value pair.  If action returns true, traversal is aborted.\n   * @returns True if the traversal was aborted.\n   */\n  reverseTraversal(action: (k: K, v: V) => void): boolean {\n    return this.root_.reverseTraversal(action);\n  }\n\n  /**\n   * Returns an iterator over the SortedMap.\n   * @returns The iterator.\n   */\n  getIterator<T>(\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      null,\n      this.comparator_,\n      false,\n      resultGenerator\n    );\n  }\n\n  getIteratorFrom<T>(\n    key: K,\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      key,\n      this.comparator_,\n      false,\n      resultGenerator\n    );\n  }\n\n  getReverseIteratorFrom<T>(\n    key: K,\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      key,\n      this.comparator_,\n      true,\n      resultGenerator\n    );\n  }\n\n  getReverseIterator<T>(\n    resultGenerator?: (k: K, v: V) => T\n  ): SortedMapIterator<K, V, T> {\n    return new SortedMapIterator(\n      this.root_,\n      null,\n      this.comparator_,\n      true,\n      resultGenerator\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nameCompare } from '../util/util';\n\nimport { NamedNode } from './Node';\n\nexport function NAME_ONLY_COMPARATOR(left: NamedNode, right: NamedNode) {\n  return nameCompare(left.name, right.name);\n}\n\nexport function NAME_COMPARATOR(left: string, right: string) {\n  return nameCompare(left, right);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, contains } from '@firebase/util';\n\nimport { Indexable } from '../util/misc';\nimport { doubleToIEEE754String } from '../util/util';\n\nimport { Node } from './Node';\n\nlet MAX_NODE: Node;\n\nexport function setMaxNode(val: Node) {\n  MAX_NODE = val;\n}\n\nexport const priorityHashText = function (priority: string | number): string {\n  if (typeof priority === 'number') {\n    return 'number:' + doubleToIEEE754String(priority);\n  } else {\n    return 'string:' + priority;\n  }\n};\n\n/**\n * Validates that a priority snapshot Node is valid.\n */\nexport const validatePriorityNode = function (priorityNode: Node) {\n  if (priorityNode.isLeafNode()) {\n    const val = priorityNode.val();\n    assert(\n      typeof val === 'string' ||\n        typeof val === 'number' ||\n        (typeof val === 'object' && contains(val as Indexable, '.sv')),\n      'Priority must be a string or number.'\n    );\n  } else {\n    assert(\n      priorityNode === MAX_NODE || priorityNode.isEmpty(),\n      'priority of unexpected type.'\n    );\n  }\n  // Don't call getPriority() on MAX_NODE to avoid hitting assertion.\n  assert(\n    priorityNode === MAX_NODE || priorityNode.getPriority().isEmpty(),\n    \"Priority nodes can't have a priority of their own.\"\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { Indexable } from '../util/misc';\nimport {\n  Path,\n  pathGetFront,\n  pathGetLength,\n  pathIsEmpty,\n  pathPopFront\n} from '../util/Path';\nimport { doubleToIEEE754String, sha1 } from '../util/util';\n\nimport { ChildrenNodeConstructor } from './ChildrenNode';\nimport { Index } from './indexes/Index';\nimport { Node } from './Node';\nimport { priorityHashText, validatePriorityNode } from './snap';\n\nlet __childrenNodeConstructor: ChildrenNodeConstructor;\n\n/**\n * LeafNode is a class for storing leaf nodes in a DataSnapshot.  It\n * implements Node and stores the value of the node (a string,\n * number, or boolean) accessible via getValue().\n */\nexport class LeafNode implements Node {\n  static set __childrenNodeConstructor(val: ChildrenNodeConstructor) {\n    __childrenNodeConstructor = val;\n  }\n\n  static get __childrenNodeConstructor() {\n    return __childrenNodeConstructor;\n  }\n\n  /**\n   * The sort order for comparing leaf nodes of different types. If two leaf nodes have\n   * the same type, the comparison falls back to their value\n   */\n  static VALUE_TYPE_ORDER = ['object', 'boolean', 'number', 'string'];\n\n  private lazyHash_: string | null = null;\n\n  /**\n   * @param value_ - The value to store in this leaf node. The object type is\n   * possible in the event of a deferred value\n   * @param priorityNode_ - The priority of this node.\n   */\n  constructor(\n    private readonly value_: string | number | boolean | Indexable,\n    private priorityNode_: Node = LeafNode.__childrenNodeConstructor.EMPTY_NODE\n  ) {\n    assert(\n      this.value_ !== undefined && this.value_ !== null,\n      \"LeafNode shouldn't be created with null/undefined value.\"\n    );\n\n    validatePriorityNode(this.priorityNode_);\n  }\n\n  /** @inheritDoc */\n  isLeafNode(): boolean {\n    return true;\n  }\n\n  /** @inheritDoc */\n  getPriority(): Node {\n    return this.priorityNode_;\n  }\n\n  /** @inheritDoc */\n  updatePriority(newPriorityNode: Node): Node {\n    return new LeafNode(this.value_, newPriorityNode);\n  }\n\n  /** @inheritDoc */\n  getImmediateChild(childName: string): Node {\n    // Hack to treat priority as a regular child\n    if (childName === '.priority') {\n      return this.priorityNode_;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\n    }\n  }\n\n  /** @inheritDoc */\n  getChild(path: Path): Node {\n    if (pathIsEmpty(path)) {\n      return this;\n    } else if (pathGetFront(path) === '.priority') {\n      return this.priorityNode_;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\n    }\n  }\n  hasChild(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  getPredecessorChildName(childName: string, childNode: Node): null {\n    return null;\n  }\n\n  /** @inheritDoc */\n  updateImmediateChild(childName: string, newChildNode: Node): Node {\n    if (childName === '.priority') {\n      return this.updatePriority(newChildNode);\n    } else if (newChildNode.isEmpty() && childName !== '.priority') {\n      return this;\n    } else {\n      return LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(\n        childName,\n        newChildNode\n      ).updatePriority(this.priorityNode_);\n    }\n  }\n\n  /** @inheritDoc */\n  updateChild(path: Path, newChildNode: Node): Node {\n    const front = pathGetFront(path);\n    if (front === null) {\n      return newChildNode;\n    } else if (newChildNode.isEmpty() && front !== '.priority') {\n      return this;\n    } else {\n      assert(\n        front !== '.priority' || pathGetLength(path) === 1,\n        '.priority must be the last token in a path'\n      );\n\n      return this.updateImmediateChild(\n        front,\n        LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(\n          pathPopFront(path),\n          newChildNode\n        )\n      );\n    }\n  }\n\n  /** @inheritDoc */\n  isEmpty(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  numChildren(): number {\n    return 0;\n  }\n\n  /** @inheritDoc */\n  forEachChild(index: Index, action: (s: string, n: Node) => void): boolean {\n    return false;\n  }\n  val(exportFormat?: boolean): {} {\n    if (exportFormat && !this.getPriority().isEmpty()) {\n      return {\n        '.value': this.getValue(),\n        '.priority': this.getPriority().val()\n      };\n    } else {\n      return this.getValue();\n    }\n  }\n\n  /** @inheritDoc */\n  hash(): string {\n    if (this.lazyHash_ === null) {\n      let toHash = '';\n      if (!this.priorityNode_.isEmpty()) {\n        toHash +=\n          'priority:' +\n          priorityHashText(this.priorityNode_.val() as number | string) +\n          ':';\n      }\n\n      const type = typeof this.value_;\n      toHash += type + ':';\n      if (type === 'number') {\n        toHash += doubleToIEEE754String(this.value_ as number);\n      } else {\n        toHash += this.value_;\n      }\n      this.lazyHash_ = sha1(toHash);\n    }\n    return this.lazyHash_;\n  }\n\n  /**\n   * Returns the value of the leaf node.\n   * @returns The value of the node.\n   */\n  getValue(): Indexable | string | number | boolean {\n    return this.value_;\n  }\n  compareTo(other: Node): number {\n    if (other === LeafNode.__childrenNodeConstructor.EMPTY_NODE) {\n      return 1;\n    } else if (other instanceof LeafNode.__childrenNodeConstructor) {\n      return -1;\n    } else {\n      assert(other.isLeafNode(), 'Unknown node type');\n      return this.compareToLeafNode_(other as LeafNode);\n    }\n  }\n\n  /**\n   * Comparison specifically for two leaf nodes\n   */\n  private compareToLeafNode_(otherLeaf: LeafNode): number {\n    const otherLeafType = typeof otherLeaf.value_;\n    const thisLeafType = typeof this.value_;\n    const otherIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(otherLeafType);\n    const thisIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(thisLeafType);\n    assert(otherIndex >= 0, 'Unknown leaf type: ' + otherLeafType);\n    assert(thisIndex >= 0, 'Unknown leaf type: ' + thisLeafType);\n    if (otherIndex === thisIndex) {\n      // Same type, compare values\n      if (thisLeafType === 'object') {\n        // Deferred value nodes are all equal, but we should also never get to this point...\n        return 0;\n      } else {\n        // Note that this works because true > false, all others are number or string comparisons\n        if (this.value_ < otherLeaf.value_) {\n          return -1;\n        } else if (this.value_ === otherLeaf.value_) {\n          return 0;\n        } else {\n          return 1;\n        }\n      }\n    } else {\n      return thisIndex - otherIndex;\n    }\n  }\n  withIndex(): Node {\n    return this;\n  }\n  isIndexed(): boolean {\n    return true;\n  }\n  equals(other: Node): boolean {\n    if (other === this) {\n      return true;\n    } else if (other.isLeafNode()) {\n      const otherLeaf = other as LeafNode;\n      return (\n        this.value_ === otherLeaf.value_ &&\n        this.priorityNode_.equals(otherLeaf.priorityNode_)\n      );\n    } else {\n      return false;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nameCompare, MAX_NAME } from '../../util/util';\nimport { LeafNode } from '../LeafNode';\nimport { NamedNode, Node } from '../Node';\n\nimport { Index } from './Index';\n\nlet nodeFromJSON: (a: unknown) => Node;\nlet MAX_NODE: Node;\n\nexport function setNodeFromJSON(val: (a: unknown) => Node) {\n  nodeFromJSON = val;\n}\n\nexport function setMaxNode(val: Node) {\n  MAX_NODE = val;\n}\n\nexport class PriorityIndex extends Index {\n  compare(a: NamedNode, b: NamedNode): number {\n    const aPriority = a.node.getPriority();\n    const bPriority = b.node.getPriority();\n    const indexCmp = aPriority.compareTo(bPriority);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n  isDefinedOn(node: Node): boolean {\n    return !node.getPriority().isEmpty();\n  }\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return !oldNode.getPriority().equals(newNode.getPriority());\n  }\n  minPost(): NamedNode {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (NamedNode as any).MIN;\n  }\n  maxPost(): NamedNode {\n    return new NamedNode(MAX_NAME, new LeafNode('[PRIORITY-POST]', MAX_NODE));\n  }\n\n  makePost(indexValue: unknown, name: string): NamedNode {\n    const priorityNode = nodeFromJSON(indexValue);\n    return new NamedNode(name, new LeafNode('[PRIORITY-POST]', priorityNode));\n  }\n\n  /**\n   * @returns String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.priority';\n  }\n}\n\nexport const PRIORITY_INDEX = new PriorityIndex();\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LLRBNode, SortedMap } from '../util/SortedMap';\n\nimport { NamedNode } from './Node';\n\nconst LOG_2 = Math.log(2);\n\nclass Base12Num {\n  count: number;\n  private current_: number;\n  private bits_: number;\n\n  constructor(length: number) {\n    const logBase2 = (num: number) =>\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      parseInt((Math.log(num) / LOG_2) as any, 10);\n    const bitMask = (bits: number) => parseInt(Array(bits + 1).join('1'), 2);\n    this.count = logBase2(length + 1);\n    this.current_ = this.count - 1;\n    const mask = bitMask(this.count);\n    this.bits_ = (length + 1) & mask;\n  }\n\n  nextBitIsOne(): boolean {\n    //noinspection JSBitwiseOperatorUsage\n    const result = !(this.bits_ & (0x1 << this.current_));\n    this.current_--;\n    return result;\n  }\n}\n\n/**\n * Takes a list of child nodes and constructs a SortedSet using the given comparison\n * function\n *\n * Uses the algorithm described in the paper linked here:\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.1458\n *\n * @param childList - Unsorted list of children\n * @param cmp - The comparison method to be used\n * @param keyFn - An optional function to extract K from a node wrapper, if K's\n * type is not NamedNode\n * @param mapSortFn - An optional override for comparator used by the generated sorted map\n */\nexport const buildChildSet = function <K, V>(\n  childList: NamedNode[],\n  cmp: (a: NamedNode, b: NamedNode) => number,\n  keyFn?: (a: NamedNode) => K,\n  mapSortFn?: (a: K, b: K) => number\n): SortedMap<K, V> {\n  childList.sort(cmp);\n\n  const buildBalancedTree = function (\n    low: number,\n    high: number\n  ): LLRBNode<K, V> | null {\n    const length = high - low;\n    let namedNode: NamedNode;\n    let key: K;\n    if (length === 0) {\n      return null;\n    } else if (length === 1) {\n      namedNode = childList[low];\n      key = keyFn ? keyFn(namedNode) : (namedNode as unknown as K);\n      return new LLRBNode(\n        key,\n        namedNode.node as unknown as V,\n        LLRBNode.BLACK,\n        null,\n        null\n      );\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const middle = parseInt((length / 2) as any, 10) + low;\n      const left = buildBalancedTree(low, middle);\n      const right = buildBalancedTree(middle + 1, high);\n      namedNode = childList[middle];\n      key = keyFn ? keyFn(namedNode) : (namedNode as unknown as K);\n      return new LLRBNode(\n        key,\n        namedNode.node as unknown as V,\n        LLRBNode.BLACK,\n        left,\n        right\n      );\n    }\n  };\n\n  const buildFrom12Array = function (base12: Base12Num): LLRBNode<K, V> {\n    let node: LLRBNode<K, V> = null;\n    let root = null;\n    let index = childList.length;\n\n    const buildPennant = function (chunkSize: number, color: boolean) {\n      const low = index - chunkSize;\n      const high = index;\n      index -= chunkSize;\n      const childTree = buildBalancedTree(low + 1, high);\n      const namedNode = childList[low];\n      const key: K = keyFn ? keyFn(namedNode) : (namedNode as unknown as K);\n      attachPennant(\n        new LLRBNode(\n          key,\n          namedNode.node as unknown as V,\n          color,\n          null,\n          childTree\n        )\n      );\n    };\n\n    const attachPennant = function (pennant: LLRBNode<K, V>) {\n      if (node) {\n        node.left = pennant;\n        node = pennant;\n      } else {\n        root = pennant;\n        node = pennant;\n      }\n    };\n\n    for (let i = 0; i < base12.count; ++i) {\n      const isOne = base12.nextBitIsOne();\n      // The number of nodes taken in each slice is 2^(arr.length - (i + 1))\n      const chunkSize = Math.pow(2, base12.count - (i + 1));\n      if (isOne) {\n        buildPennant(chunkSize, LLRBNode.BLACK);\n      } else {\n        // current == 2\n        buildPennant(chunkSize, LLRBNode.BLACK);\n        buildPennant(chunkSize, LLRBNode.RED);\n      }\n    }\n    return root;\n  };\n\n  const base12 = new Base12Num(childList.length);\n  const root = buildFrom12Array(base12);\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return new SortedMap<K, V>(mapSortFn || (cmp as any), root);\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, contains, map, safeGet } from '@firebase/util';\n\nimport { SortedMap } from '../util/SortedMap';\n\nimport { buildChildSet } from './childSet';\nimport { Index } from './indexes/Index';\nimport { KEY_INDEX } from './indexes/KeyIndex';\nimport { PRIORITY_INDEX } from './indexes/PriorityIndex';\nimport { NamedNode, Node } from './Node';\n\nlet _defaultIndexMap: IndexMap;\n\nconst fallbackObject = {};\n\nexport class IndexMap {\n  /**\n   * The default IndexMap for nodes without a priority\n   */\n  static get Default(): IndexMap {\n    assert(\n      fallbackObject && PRIORITY_INDEX,\n      'ChildrenNode.ts has not been loaded'\n    );\n    _defaultIndexMap =\n      _defaultIndexMap ||\n      new IndexMap(\n        { '.priority': fallbackObject },\n        { '.priority': PRIORITY_INDEX }\n      );\n    return _defaultIndexMap;\n  }\n\n  constructor(\n    private indexes_: {\n      [k: string]: SortedMap<NamedNode, Node> | /*FallbackType*/ object;\n    },\n    private indexSet_: { [k: string]: Index }\n  ) {}\n\n  get(indexKey: string): SortedMap<NamedNode, Node> | null {\n    const sortedMap = safeGet(this.indexes_, indexKey);\n    if (!sortedMap) {\n      throw new Error('No index defined for ' + indexKey);\n    }\n\n    if (sortedMap instanceof SortedMap) {\n      return sortedMap;\n    } else {\n      // The index exists, but it falls back to just name comparison. Return null so that the calling code uses the\n      // regular child map\n      return null;\n    }\n  }\n\n  hasIndex(indexDefinition: Index): boolean {\n    return contains(this.indexSet_, indexDefinition.toString());\n  }\n\n  addIndex(\n    indexDefinition: Index,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    assert(\n      indexDefinition !== KEY_INDEX,\n      \"KeyIndex always exists and isn't meant to be added to the IndexMap.\"\n    );\n    const childList = [];\n    let sawIndexedValue = false;\n    const iter = existingChildren.getIterator(NamedNode.Wrap);\n    let next = iter.getNext();\n    while (next) {\n      sawIndexedValue =\n        sawIndexedValue || indexDefinition.isDefinedOn(next.node);\n      childList.push(next);\n      next = iter.getNext();\n    }\n    let newIndex;\n    if (sawIndexedValue) {\n      newIndex = buildChildSet(childList, indexDefinition.getCompare());\n    } else {\n      newIndex = fallbackObject;\n    }\n    const indexName = indexDefinition.toString();\n    const newIndexSet = { ...this.indexSet_ };\n    newIndexSet[indexName] = indexDefinition;\n    const newIndexes = { ...this.indexes_ };\n    newIndexes[indexName] = newIndex;\n    return new IndexMap(newIndexes, newIndexSet);\n  }\n\n  /**\n   * Ensure that this node is properly tracked in any indexes that we're maintaining\n   */\n  addToIndexes(\n    namedNode: NamedNode,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    const newIndexes = map(\n      this.indexes_,\n      (indexedChildren: SortedMap<NamedNode, Node>, indexName: string) => {\n        const index = safeGet(this.indexSet_, indexName);\n        assert(index, 'Missing index implementation for ' + indexName);\n        if (indexedChildren === fallbackObject) {\n          // Check to see if we need to index everything\n          if (index.isDefinedOn(namedNode.node)) {\n            // We need to build this index\n            const childList = [];\n            const iter = existingChildren.getIterator(NamedNode.Wrap);\n            let next = iter.getNext();\n            while (next) {\n              if (next.name !== namedNode.name) {\n                childList.push(next);\n              }\n              next = iter.getNext();\n            }\n            childList.push(namedNode);\n            return buildChildSet(childList, index.getCompare());\n          } else {\n            // No change, this remains a fallback\n            return fallbackObject;\n          }\n        } else {\n          const existingSnap = existingChildren.get(namedNode.name);\n          let newChildren = indexedChildren;\n          if (existingSnap) {\n            newChildren = newChildren.remove(\n              new NamedNode(namedNode.name, existingSnap)\n            );\n          }\n          return newChildren.insert(namedNode, namedNode.node);\n        }\n      }\n    );\n    return new IndexMap(newIndexes, this.indexSet_);\n  }\n\n  /**\n   * Create a new IndexMap instance with the given value removed\n   */\n  removeFromIndexes(\n    namedNode: NamedNode,\n    existingChildren: SortedMap<string, Node>\n  ): IndexMap {\n    const newIndexes = map(\n      this.indexes_,\n      (indexedChildren: SortedMap<NamedNode, Node>) => {\n        if (indexedChildren === fallbackObject) {\n          // This is the fallback. Just return it, nothing to do in this case\n          return indexedChildren;\n        } else {\n          const existingSnap = existingChildren.get(namedNode.name);\n          if (existingSnap) {\n            return indexedChildren.remove(\n              new NamedNode(namedNode.name, existingSnap)\n            );\n          } else {\n            // No record of this child\n            return indexedChildren;\n          }\n        }\n      }\n    );\n    return new IndexMap(newIndexes, this.indexSet_);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { Path, pathGetFront, pathGetLength, pathPopFront } from '../util/Path';\nimport { SortedMap, SortedMapIterator } from '../util/SortedMap';\nimport { MAX_NAME, MIN_NAME, sha1 } from '../util/util';\n\nimport { NAME_COMPARATOR } from './comparators';\nimport { Index } from './indexes/Index';\nimport { KEY_INDEX, KeyIndex } from './indexes/KeyIndex';\nimport {\n  PRIORITY_INDEX,\n  setMaxNode as setPriorityMaxNode\n} from './indexes/PriorityIndex';\nimport { IndexMap } from './IndexMap';\nimport { LeafNode } from './LeafNode';\nimport { NamedNode, Node } from './Node';\nimport { priorityHashText, setMaxNode, validatePriorityNode } from './snap';\n\nexport interface ChildrenNodeConstructor {\n  new (\n    children_: SortedMap<string, Node>,\n    priorityNode_: Node | null,\n    indexMap_: IndexMap\n  ): ChildrenNode;\n  EMPTY_NODE: ChildrenNode;\n}\n\n// TODO: For memory savings, don't store priorityNode_ if it's empty.\n\nlet EMPTY_NODE: ChildrenNode;\n\n/**\n * ChildrenNode is a class for storing internal nodes in a DataSnapshot\n * (i.e. nodes with children).  It implements Node and stores the\n * list of children in the children property, sorted by child name.\n */\nexport class ChildrenNode implements Node {\n  private lazyHash_: string | null = null;\n\n  static get EMPTY_NODE(): ChildrenNode {\n    return (\n      EMPTY_NODE ||\n      (EMPTY_NODE = new ChildrenNode(\n        new SortedMap<string, Node>(NAME_COMPARATOR),\n        null,\n        IndexMap.Default\n      ))\n    );\n  }\n\n  /**\n   * @param children_ - List of children of this node..\n   * @param priorityNode_ - The priority of this node (as a snapshot node).\n   */\n  constructor(\n    private readonly children_: SortedMap<string, Node>,\n    private readonly priorityNode_: Node | null,\n    private indexMap_: IndexMap\n  ) {\n    /**\n     * Note: The only reason we allow null priority is for EMPTY_NODE, since we can't use\n     * EMPTY_NODE as the priority of EMPTY_NODE.  We might want to consider making EMPTY_NODE its own\n     * class instead of an empty ChildrenNode.\n     */\n    if (this.priorityNode_) {\n      validatePriorityNode(this.priorityNode_);\n    }\n\n    if (this.children_.isEmpty()) {\n      assert(\n        !this.priorityNode_ || this.priorityNode_.isEmpty(),\n        'An empty node cannot have a priority'\n      );\n    }\n  }\n\n  /** @inheritDoc */\n  isLeafNode(): boolean {\n    return false;\n  }\n\n  /** @inheritDoc */\n  getPriority(): Node {\n    return this.priorityNode_ || EMPTY_NODE;\n  }\n\n  /** @inheritDoc */\n  updatePriority(newPriorityNode: Node): Node {\n    if (this.children_.isEmpty()) {\n      // Don't allow priorities on empty nodes\n      return this;\n    } else {\n      return new ChildrenNode(this.children_, newPriorityNode, this.indexMap_);\n    }\n  }\n\n  /** @inheritDoc */\n  getImmediateChild(childName: string): Node {\n    // Hack to treat priority as a regular child\n    if (childName === '.priority') {\n      return this.getPriority();\n    } else {\n      const child = this.children_.get(childName);\n      return child === null ? EMPTY_NODE : child;\n    }\n  }\n\n  /** @inheritDoc */\n  getChild(path: Path): Node {\n    const front = pathGetFront(path);\n    if (front === null) {\n      return this;\n    }\n\n    return this.getImmediateChild(front).getChild(pathPopFront(path));\n  }\n\n  /** @inheritDoc */\n  hasChild(childName: string): boolean {\n    return this.children_.get(childName) !== null;\n  }\n\n  /** @inheritDoc */\n  updateImmediateChild(childName: string, newChildNode: Node): Node {\n    assert(newChildNode, 'We should always be passing snapshot nodes');\n    if (childName === '.priority') {\n      return this.updatePriority(newChildNode);\n    } else {\n      const namedNode = new NamedNode(childName, newChildNode);\n      let newChildren, newIndexMap;\n      if (newChildNode.isEmpty()) {\n        newChildren = this.children_.remove(childName);\n        newIndexMap = this.indexMap_.removeFromIndexes(\n          namedNode,\n          this.children_\n        );\n      } else {\n        newChildren = this.children_.insert(childName, newChildNode);\n        newIndexMap = this.indexMap_.addToIndexes(namedNode, this.children_);\n      }\n\n      const newPriority = newChildren.isEmpty()\n        ? EMPTY_NODE\n        : this.priorityNode_;\n      return new ChildrenNode(newChildren, newPriority, newIndexMap);\n    }\n  }\n\n  /** @inheritDoc */\n  updateChild(path: Path, newChildNode: Node): Node {\n    const front = pathGetFront(path);\n    if (front === null) {\n      return newChildNode;\n    } else {\n      assert(\n        pathGetFront(path) !== '.priority' || pathGetLength(path) === 1,\n        '.priority must be the last token in a path'\n      );\n      const newImmediateChild = this.getImmediateChild(front).updateChild(\n        pathPopFront(path),\n        newChildNode\n      );\n      return this.updateImmediateChild(front, newImmediateChild);\n    }\n  }\n\n  /** @inheritDoc */\n  isEmpty(): boolean {\n    return this.children_.isEmpty();\n  }\n\n  /** @inheritDoc */\n  numChildren(): number {\n    return this.children_.count();\n  }\n\n  private static INTEGER_REGEXP_ = /^(0|[1-9]\\d*)$/;\n\n  /** @inheritDoc */\n  val(exportFormat?: boolean): object {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const obj: { [k: string]: unknown } = {};\n    let numKeys = 0,\n      maxKey = 0,\n      allIntegerKeys = true;\n    this.forEachChild(PRIORITY_INDEX, (key: string, childNode: Node) => {\n      obj[key] = childNode.val(exportFormat);\n\n      numKeys++;\n      if (allIntegerKeys && ChildrenNode.INTEGER_REGEXP_.test(key)) {\n        maxKey = Math.max(maxKey, Number(key));\n      } else {\n        allIntegerKeys = false;\n      }\n    });\n\n    if (!exportFormat && allIntegerKeys && maxKey < 2 * numKeys) {\n      // convert to array.\n      const array: unknown[] = [];\n      // eslint-disable-next-line guard-for-in\n      for (const key in obj) {\n        array[key as unknown as number] = obj[key];\n      }\n\n      return array;\n    } else {\n      if (exportFormat && !this.getPriority().isEmpty()) {\n        obj['.priority'] = this.getPriority().val();\n      }\n      return obj;\n    }\n  }\n\n  /** @inheritDoc */\n  hash(): string {\n    if (this.lazyHash_ === null) {\n      let toHash = '';\n      if (!this.getPriority().isEmpty()) {\n        toHash +=\n          'priority:' +\n          priorityHashText(this.getPriority().val() as string | number) +\n          ':';\n      }\n\n      this.forEachChild(PRIORITY_INDEX, (key, childNode) => {\n        const childHash = childNode.hash();\n        if (childHash !== '') {\n          toHash += ':' + key + ':' + childHash;\n        }\n      });\n\n      this.lazyHash_ = toHash === '' ? '' : sha1(toHash);\n    }\n    return this.lazyHash_;\n  }\n\n  /** @inheritDoc */\n  getPredecessorChildName(\n    childName: string,\n    childNode: Node,\n    index: Index\n  ): string {\n    const idx = this.resolveIndex_(index);\n    if (idx) {\n      const predecessor = idx.getPredecessorKey(\n        new NamedNode(childName, childNode)\n      );\n      return predecessor ? predecessor.name : null;\n    } else {\n      return this.children_.getPredecessorKey(childName);\n    }\n  }\n\n  getFirstChildName(indexDefinition: Index): string | null {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      const minKey = idx.minKey();\n      return minKey && minKey.name;\n    } else {\n      return this.children_.minKey();\n    }\n  }\n\n  getFirstChild(indexDefinition: Index): NamedNode | null {\n    const minKey = this.getFirstChildName(indexDefinition);\n    if (minKey) {\n      return new NamedNode(minKey, this.children_.get(minKey));\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Given an index, return the key name of the largest value we have, according to that index\n   */\n  getLastChildName(indexDefinition: Index): string | null {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      const maxKey = idx.maxKey();\n      return maxKey && maxKey.name;\n    } else {\n      return this.children_.maxKey();\n    }\n  }\n\n  getLastChild(indexDefinition: Index): NamedNode | null {\n    const maxKey = this.getLastChildName(indexDefinition);\n    if (maxKey) {\n      return new NamedNode(maxKey, this.children_.get(maxKey));\n    } else {\n      return null;\n    }\n  }\n  forEachChild(\n    index: Index,\n    action: (key: string, node: Node) => boolean | void\n  ): boolean {\n    const idx = this.resolveIndex_(index);\n    if (idx) {\n      return idx.inorderTraversal(wrappedNode => {\n        return action(wrappedNode.name, wrappedNode.node);\n      });\n    } else {\n      return this.children_.inorderTraversal(action);\n    }\n  }\n\n  getIterator(\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    return this.getIteratorFrom(indexDefinition.minPost(), indexDefinition);\n  }\n\n  getIteratorFrom(\n    startPost: NamedNode,\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      return idx.getIteratorFrom(startPost, key => key);\n    } else {\n      const iterator = this.children_.getIteratorFrom(\n        startPost.name,\n        NamedNode.Wrap\n      );\n      let next = iterator.peek();\n      while (next != null && indexDefinition.compare(next, startPost) < 0) {\n        iterator.getNext();\n        next = iterator.peek();\n      }\n      return iterator;\n    }\n  }\n\n  getReverseIterator(\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    return this.getReverseIteratorFrom(\n      indexDefinition.maxPost(),\n      indexDefinition\n    );\n  }\n\n  getReverseIteratorFrom(\n    endPost: NamedNode,\n    indexDefinition: Index\n  ): SortedMapIterator<string | NamedNode, Node, NamedNode> {\n    const idx = this.resolveIndex_(indexDefinition);\n    if (idx) {\n      return idx.getReverseIteratorFrom(endPost, key => {\n        return key;\n      });\n    } else {\n      const iterator = this.children_.getReverseIteratorFrom(\n        endPost.name,\n        NamedNode.Wrap\n      );\n      let next = iterator.peek();\n      while (next != null && indexDefinition.compare(next, endPost) > 0) {\n        iterator.getNext();\n        next = iterator.peek();\n      }\n      return iterator;\n    }\n  }\n  compareTo(other: ChildrenNode): number {\n    if (this.isEmpty()) {\n      if (other.isEmpty()) {\n        return 0;\n      } else {\n        return -1;\n      }\n    } else if (other.isLeafNode() || other.isEmpty()) {\n      return 1;\n    } else if (other === MAX_NODE) {\n      return -1;\n    } else {\n      // Must be another node with children.\n      return 0;\n    }\n  }\n  withIndex(indexDefinition: Index): Node {\n    if (\n      indexDefinition === KEY_INDEX ||\n      this.indexMap_.hasIndex(indexDefinition)\n    ) {\n      return this;\n    } else {\n      const newIndexMap = this.indexMap_.addIndex(\n        indexDefinition,\n        this.children_\n      );\n      return new ChildrenNode(this.children_, this.priorityNode_, newIndexMap);\n    }\n  }\n  isIndexed(index: Index): boolean {\n    return index === KEY_INDEX || this.indexMap_.hasIndex(index);\n  }\n  equals(other: Node): boolean {\n    if (other === this) {\n      return true;\n    } else if (other.isLeafNode()) {\n      return false;\n    } else {\n      const otherChildrenNode = other as ChildrenNode;\n      if (!this.getPriority().equals(otherChildrenNode.getPriority())) {\n        return false;\n      } else if (\n        this.children_.count() === otherChildrenNode.children_.count()\n      ) {\n        const thisIter = this.getIterator(PRIORITY_INDEX);\n        const otherIter = otherChildrenNode.getIterator(PRIORITY_INDEX);\n        let thisCurrent = thisIter.getNext();\n        let otherCurrent = otherIter.getNext();\n        while (thisCurrent && otherCurrent) {\n          if (\n            thisCurrent.name !== otherCurrent.name ||\n            !thisCurrent.node.equals(otherCurrent.node)\n          ) {\n            return false;\n          }\n          thisCurrent = thisIter.getNext();\n          otherCurrent = otherIter.getNext();\n        }\n        return thisCurrent === null && otherCurrent === null;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  /**\n   * Returns a SortedMap ordered by index, or null if the default (by-key) ordering can be used\n   * instead.\n   *\n   */\n  private resolveIndex_(\n    indexDefinition: Index\n  ): SortedMap<NamedNode, Node> | null {\n    if (indexDefinition === KEY_INDEX) {\n      return null;\n    } else {\n      return this.indexMap_.get(indexDefinition.toString());\n    }\n  }\n}\n\nexport class MaxNode extends ChildrenNode {\n  constructor() {\n    super(\n      new SortedMap<string, Node>(NAME_COMPARATOR),\n      ChildrenNode.EMPTY_NODE,\n      IndexMap.Default\n    );\n  }\n\n  compareTo(other: Node): number {\n    if (other === this) {\n      return 0;\n    } else {\n      return 1;\n    }\n  }\n\n  equals(other: Node): boolean {\n    // Not that we every compare it, but MAX_NODE is only ever equal to itself\n    return other === this;\n  }\n\n  getPriority(): MaxNode {\n    return this;\n  }\n\n  getImmediateChild(childName: string): ChildrenNode {\n    return ChildrenNode.EMPTY_NODE;\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n}\n\n/**\n * Marker that will sort higher than any other snapshot.\n */\nexport const MAX_NODE = new MaxNode();\n\n/**\n * Document NamedNode extensions\n */\ndeclare module './Node' {\n  interface NamedNode {\n    MIN: NamedNode;\n    MAX: NamedNode;\n  }\n}\n\nObject.defineProperties(NamedNode, {\n  MIN: {\n    value: new NamedNode(MIN_NAME, ChildrenNode.EMPTY_NODE)\n  },\n  MAX: {\n    value: new NamedNode(MAX_NAME, MAX_NODE)\n  }\n});\n\n/**\n * Reference Extensions\n */\nKeyIndex.__EMPTY_NODE = ChildrenNode.EMPTY_NODE;\nLeafNode.__childrenNodeConstructor = ChildrenNode;\nsetMaxNode(MAX_NODE);\nsetPriorityMaxNode(MAX_NODE);\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { contains, assert } from '@firebase/util';\n\nimport { Indexable } from '../util/misc';\nimport { SortedMap } from '../util/SortedMap';\nimport { each } from '../util/util';\n\nimport { ChildrenNode } from './ChildrenNode';\nimport { buildChildSet } from './childSet';\nimport { NAME_COMPARATOR, NAME_ONLY_COMPARATOR } from './comparators';\nimport { PRIORITY_INDEX, setNodeFromJSON } from './indexes/PriorityIndex';\nimport { IndexMap } from './IndexMap';\nimport { LeafNode } from './LeafNode';\nimport { NamedNode, Node } from './Node';\n\nconst USE_HINZE = true;\n\n/**\n * Constructs a snapshot node representing the passed JSON and returns it.\n * @param json - JSON to create a node for.\n * @param priority - Optional priority to use.  This will be ignored if the\n * passed JSON contains a .priority property.\n */\nexport function nodeFromJSON(\n  json: unknown | null,\n  priority: unknown = null\n): Node {\n  if (json === null) {\n    return ChildrenNode.EMPTY_NODE;\n  }\n\n  if (typeof json === 'object' && '.priority' in json) {\n    priority = json['.priority'];\n  }\n\n  assert(\n    priority === null ||\n      typeof priority === 'string' ||\n      typeof priority === 'number' ||\n      (typeof priority === 'object' && '.sv' in (priority as object)),\n    'Invalid priority type found: ' + typeof priority\n  );\n\n  if (typeof json === 'object' && '.value' in json && json['.value'] !== null) {\n    json = json['.value'];\n  }\n\n  // Valid leaf nodes include non-objects or server-value wrapper objects\n  if (typeof json !== 'object' || '.sv' in json) {\n    const jsonLeaf = json as string | number | boolean | Indexable;\n    return new LeafNode(jsonLeaf, nodeFromJSON(priority));\n  }\n\n  if (!(json instanceof Array) && USE_HINZE) {\n    const children: NamedNode[] = [];\n    let childrenHavePriority = false;\n    const hinzeJsonObj = json;\n    each(hinzeJsonObj, (key, child) => {\n      if (key.substring(0, 1) !== '.') {\n        // Ignore metadata nodes\n        const childNode = nodeFromJSON(child);\n        if (!childNode.isEmpty()) {\n          childrenHavePriority =\n            childrenHavePriority || !childNode.getPriority().isEmpty();\n          children.push(new NamedNode(key, childNode));\n        }\n      }\n    });\n\n    if (children.length === 0) {\n      return ChildrenNode.EMPTY_NODE;\n    }\n\n    const childSet = buildChildSet(\n      children,\n      NAME_ONLY_COMPARATOR,\n      namedNode => namedNode.name,\n      NAME_COMPARATOR\n    ) as SortedMap<string, Node>;\n    if (childrenHavePriority) {\n      const sortedChildSet = buildChildSet(\n        children,\n        PRIORITY_INDEX.getCompare()\n      );\n      return new ChildrenNode(\n        childSet,\n        nodeFromJSON(priority),\n        new IndexMap(\n          { '.priority': sortedChildSet },\n          { '.priority': PRIORITY_INDEX }\n        )\n      );\n    } else {\n      return new ChildrenNode(\n        childSet,\n        nodeFromJSON(priority),\n        IndexMap.Default\n      );\n    }\n  } else {\n    let node: Node = ChildrenNode.EMPTY_NODE;\n    each(json, (key: string, childData: unknown) => {\n      if (contains(json as object, key)) {\n        if (key.substring(0, 1) !== '.') {\n          // ignore metadata nodes.\n          const childNode = nodeFromJSON(childData);\n          if (childNode.isLeafNode() || !childNode.isEmpty()) {\n            node = node.updateImmediateChild(key, childNode);\n          }\n        }\n      }\n    });\n\n    return node.updatePriority(nodeFromJSON(priority));\n  }\n}\n\nsetNodeFromJSON(nodeFromJSON);\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { Path, pathGetFront, pathIsEmpty, pathSlice } from '../../util/Path';\nimport { MAX_NAME, nameCompare } from '../../util/util';\nimport { ChildrenNode, MAX_NODE } from '../ChildrenNode';\nimport { NamedNode, Node } from '../Node';\nimport { nodeFromJSON } from '../nodeFromJSON';\n\nimport { Index } from './Index';\n\nexport class PathIndex extends Index {\n  constructor(private indexPath_: Path) {\n    super();\n\n    assert(\n      !pathIsEmpty(indexPath_) && pathGetFront(indexPath_) !== '.priority',\n      \"Can't create PathIndex with empty path or .priority key\"\n    );\n  }\n\n  protected extractChild(snap: Node): Node {\n    return snap.getChild(this.indexPath_);\n  }\n  isDefinedOn(node: Node): boolean {\n    return !node.getChild(this.indexPath_).isEmpty();\n  }\n  compare(a: NamedNode, b: NamedNode): number {\n    const aChild = this.extractChild(a.node);\n    const bChild = this.extractChild(b.node);\n    const indexCmp = aChild.compareTo(bChild);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n  makePost(indexValue: object, name: string): NamedNode {\n    const valueNode = nodeFromJSON(indexValue);\n    const node = ChildrenNode.EMPTY_NODE.updateChild(\n      this.indexPath_,\n      valueNode\n    );\n    return new NamedNode(name, node);\n  }\n  maxPost(): NamedNode {\n    const node = ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, MAX_NODE);\n    return new NamedNode(MAX_NAME, node);\n  }\n  toString(): string {\n    return pathSlice(this.indexPath_, 0).join('/');\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nameCompare } from '../../util/util';\nimport { NamedNode, Node } from '../Node';\nimport { nodeFromJSON } from '../nodeFromJSON';\n\nimport { Index } from './Index';\n\nexport class ValueIndex extends Index {\n  compare(a: NamedNode, b: NamedNode): number {\n    const indexCmp = a.node.compareTo(b.node);\n    if (indexCmp === 0) {\n      return nameCompare(a.name, b.name);\n    } else {\n      return indexCmp;\n    }\n  }\n  isDefinedOn(node: Node): boolean {\n    return true;\n  }\n  indexedValueChanged(oldNode: Node, newNode: Node): boolean {\n    return !oldNode.equals(newNode);\n  }\n  minPost(): NamedNode {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (NamedNode as any).MIN;\n  }\n  maxPost(): NamedNode {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (NamedNode as any).MAX;\n  }\n\n  makePost(indexValue: object, name: string): NamedNode {\n    const valueNode = nodeFromJSON(indexValue);\n    return new NamedNode(name, valueNode);\n  }\n\n  /**\n   * @returns String representation for inclusion in a query spec\n   */\n  toString(): string {\n    return '.value';\n  }\n}\n\nexport const VALUE_INDEX = new ValueIndex();\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node } from '../snap/Node';\n\nexport const enum ChangeType {\n  /** Event type for a child added */\n  CHILD_ADDED = 'child_added',\n  /** Event type for a child removed */\n  CHILD_REMOVED = 'child_removed',\n  /** Event type for a child changed */\n  CHILD_CHANGED = 'child_changed',\n  /** Event type for a child moved */\n  CHILD_MOVED = 'child_moved',\n  /** Event type for a value change */\n  VALUE = 'value'\n}\n\nexport interface Change {\n  /** @param type - The event type */\n  type: ChangeType;\n  /** @param snapshotNode - The data */\n  snapshotNode: Node;\n  /** @param childName - The name for this child, if it's a child even */\n  childName?: string;\n  /** @param oldSnap - Used for intermediate processing of child changed events */\n  oldSnap?: Node;\n  /**  * @param prevName - The name for the previous child, if applicable */\n  prevName?: string | null;\n}\n\nexport function changeValue(snapshotNode: Node): Change {\n  return { type: ChangeType.VALUE, snapshotNode };\n}\n\nexport function changeChildAdded(\n  childName: string,\n  snapshotNode: Node\n): Change {\n  return { type: ChangeType.CHILD_ADDED, snapshotNode, childName };\n}\n\nexport function changeChildRemoved(\n  childName: string,\n  snapshotNode: Node\n): Change {\n  return { type: ChangeType.CHILD_REMOVED, snapshotNode, childName };\n}\n\nexport function changeChildChanged(\n  childName: string,\n  snapshotNode: Node,\n  oldSnap: Node\n): Change {\n  return {\n    type: ChangeType.CHILD_CHANGED,\n    snapshotNode,\n    childName,\n    oldSnap\n  };\n}\n\nexport function changeChildMoved(\n  childName: string,\n  snapshotNode: Node\n): Change {\n  return { type: ChangeType.CHILD_MOVED, snapshotNode, childName };\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { Index } from '../../snap/indexes/Index';\nimport { PRIORITY_INDEX } from '../../snap/indexes/PriorityIndex';\nimport { Node } from '../../snap/Node';\nimport { Path } from '../../util/Path';\nimport {\n  changeChildAdded,\n  changeChildChanged,\n  changeChildRemoved\n} from '../Change';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\nimport { CompleteChildSource } from '../CompleteChildSource';\n\nimport { NodeFilter } from './NodeFilter';\n\n/**\n * Doesn't really filter nodes but applies an index to the node and keeps track of any changes\n */\nexport class IndexedFilter implements NodeFilter {\n  constructor(private readonly index_: Index) {}\n\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    assert(\n      snap.isIndexed(this.index_),\n      'A node must be indexed if only a child is updated'\n    );\n    const oldChild = snap.getImmediateChild(key);\n    // Check if anything actually changed.\n    if (\n      oldChild.getChild(affectedPath).equals(newChild.getChild(affectedPath))\n    ) {\n      // There's an edge case where a child can enter or leave the view because affectedPath was set to null.\n      // In this case, affectedPath will appear null in both the old and new snapshots.  So we need\n      // to avoid treating these cases as \"nothing changed.\"\n      if (oldChild.isEmpty() === newChild.isEmpty()) {\n        // Nothing changed.\n\n        // This assert should be valid, but it's expensive (can dominate perf testing) so don't actually do it.\n        //assert(oldChild.equals(newChild), 'Old and new snapshots should be equal.');\n        return snap;\n      }\n    }\n\n    if (optChangeAccumulator != null) {\n      if (newChild.isEmpty()) {\n        if (snap.hasChild(key)) {\n          optChangeAccumulator.trackChildChange(\n            changeChildRemoved(key, oldChild)\n          );\n        } else {\n          assert(\n            snap.isLeafNode(),\n            'A child remove without an old child only makes sense on a leaf node'\n          );\n        }\n      } else if (oldChild.isEmpty()) {\n        optChangeAccumulator.trackChildChange(changeChildAdded(key, newChild));\n      } else {\n        optChangeAccumulator.trackChildChange(\n          changeChildChanged(key, newChild, oldChild)\n        );\n      }\n    }\n    if (snap.isLeafNode() && newChild.isEmpty()) {\n      return snap;\n    } else {\n      // Make sure the node is indexed\n      return snap.updateImmediateChild(key, newChild).withIndex(this.index_);\n    }\n  }\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (optChangeAccumulator != null) {\n      if (!oldSnap.isLeafNode()) {\n        oldSnap.forEachChild(PRIORITY_INDEX, (key, childNode) => {\n          if (!newSnap.hasChild(key)) {\n            optChangeAccumulator.trackChildChange(\n              changeChildRemoved(key, childNode)\n            );\n          }\n        });\n      }\n      if (!newSnap.isLeafNode()) {\n        newSnap.forEachChild(PRIORITY_INDEX, (key, childNode) => {\n          if (oldSnap.hasChild(key)) {\n            const oldChild = oldSnap.getImmediateChild(key);\n            if (!oldChild.equals(childNode)) {\n              optChangeAccumulator.trackChildChange(\n                changeChildChanged(key, childNode, oldChild)\n              );\n            }\n          } else {\n            optChangeAccumulator.trackChildChange(\n              changeChildAdded(key, childNode)\n            );\n          }\n        });\n      }\n    }\n    return newSnap.withIndex(this.index_);\n  }\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    if (oldSnap.isEmpty()) {\n      return ChildrenNode.EMPTY_NODE;\n    } else {\n      return oldSnap.updatePriority(newPriority);\n    }\n  }\n  filtersNodes(): boolean {\n    return false;\n  }\n  getIndexedFilter(): IndexedFilter {\n    return this;\n  }\n  getIndex(): Index {\n    return this.index_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NamedNode, Node } from '../../../core/snap/Node';\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { Index } from '../../snap/indexes/Index';\nimport { PRIORITY_INDEX } from '../../snap/indexes/PriorityIndex';\nimport { Path } from '../../util/Path';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\nimport { CompleteChildSource } from '../CompleteChildSource';\nimport { QueryParams } from '../QueryParams';\n\nimport { IndexedFilter } from './IndexedFilter';\nimport { NodeFilter } from './NodeFilter';\n\n/**\n * Filters nodes by range and uses an IndexFilter to track any changes after filtering the node\n */\nexport class RangedFilter implements NodeFilter {\n  private indexedFilter_: IndexedFilter;\n\n  private index_: Index;\n\n  private startPost_: NamedNode;\n\n  private endPost_: NamedNode;\n\n  private startIsInclusive_: boolean;\n\n  private endIsInclusive_: boolean;\n\n  constructor(params: QueryParams) {\n    this.indexedFilter_ = new IndexedFilter(params.getIndex());\n    this.index_ = params.getIndex();\n    this.startPost_ = RangedFilter.getStartPost_(params);\n    this.endPost_ = RangedFilter.getEndPost_(params);\n    this.startIsInclusive_ = !params.startAfterSet_;\n    this.endIsInclusive_ = !params.endBeforeSet_;\n  }\n\n  getStartPost(): NamedNode {\n    return this.startPost_;\n  }\n\n  getEndPost(): NamedNode {\n    return this.endPost_;\n  }\n\n  matches(node: NamedNode): boolean {\n    const isWithinStart = this.startIsInclusive_\n      ? this.index_.compare(this.getStartPost(), node) <= 0\n      : this.index_.compare(this.getStartPost(), node) < 0;\n    const isWithinEnd = this.endIsInclusive_\n      ? this.index_.compare(node, this.getEndPost()) <= 0\n      : this.index_.compare(node, this.getEndPost()) < 0;\n    return isWithinStart && isWithinEnd;\n  }\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (!this.matches(new NamedNode(key, newChild))) {\n      newChild = ChildrenNode.EMPTY_NODE;\n    }\n    return this.indexedFilter_.updateChild(\n      snap,\n      key,\n      newChild,\n      affectedPath,\n      source,\n      optChangeAccumulator\n    );\n  }\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (newSnap.isLeafNode()) {\n      // Make sure we have a children node with the correct index, not a leaf node;\n      newSnap = ChildrenNode.EMPTY_NODE;\n    }\n    let filtered = newSnap.withIndex(this.index_);\n    // Don't support priorities on queries\n    filtered = filtered.updatePriority(ChildrenNode.EMPTY_NODE);\n    const self = this;\n    newSnap.forEachChild(PRIORITY_INDEX, (key, childNode) => {\n      if (!self.matches(new NamedNode(key, childNode))) {\n        filtered = filtered.updateImmediateChild(key, ChildrenNode.EMPTY_NODE);\n      }\n    });\n    return this.indexedFilter_.updateFullNode(\n      oldSnap,\n      filtered,\n      optChangeAccumulator\n    );\n  }\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    // Don't support priorities on queries\n    return oldSnap;\n  }\n  filtersNodes(): boolean {\n    return true;\n  }\n  getIndexedFilter(): IndexedFilter {\n    return this.indexedFilter_;\n  }\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  private static getStartPost_(params: QueryParams): NamedNode {\n    if (params.hasStart()) {\n      const startName = params.getIndexStartName();\n      return params.getIndex().makePost(params.getIndexStartValue(), startName);\n    } else {\n      return params.getIndex().minPost();\n    }\n  }\n\n  private static getEndPost_(params: QueryParams): NamedNode {\n    if (params.hasEnd()) {\n      const endName = params.getIndexEndName();\n      return params.getIndex().makePost(params.getIndexEndValue(), endName);\n    } else {\n      return params.getIndex().maxPost();\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { ChildrenNode } from '../../snap/ChildrenNode';\nimport { Index } from '../../snap/indexes/Index';\nimport { NamedNode, Node } from '../../snap/Node';\nimport { Path } from '../../util/Path';\nimport {\n  changeChildAdded,\n  changeChildChanged,\n  changeChildRemoved\n} from '../Change';\nimport { ChildChangeAccumulator } from '../ChildChangeAccumulator';\nimport { CompleteChildSource } from '../CompleteChildSource';\nimport { QueryParams } from '../QueryParams';\n\nimport { IndexedFilter } from './IndexedFilter';\nimport { NodeFilter } from './NodeFilter';\nimport { RangedFilter } from './RangedFilter';\n\n/**\n * Applies a limit and a range to a node and uses RangedFilter to do the heavy lifting where possible\n */\nexport class LimitedFilter implements NodeFilter {\n  private readonly rangedFilter_: RangedFilter;\n\n  private readonly index_: Index;\n\n  private readonly limit_: number;\n\n  private readonly reverse_: boolean;\n\n  private readonly startIsInclusive_: boolean;\n\n  private readonly endIsInclusive_: boolean;\n\n  constructor(params: QueryParams) {\n    this.rangedFilter_ = new RangedFilter(params);\n    this.index_ = params.getIndex();\n    this.limit_ = params.getLimit();\n    this.reverse_ = !params.isViewFromLeft();\n    this.startIsInclusive_ = !params.startAfterSet_;\n    this.endIsInclusive_ = !params.endBeforeSet_;\n  }\n  updateChild(\n    snap: Node,\n    key: string,\n    newChild: Node,\n    affectedPath: Path,\n    source: CompleteChildSource,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    if (!this.rangedFilter_.matches(new NamedNode(key, newChild))) {\n      newChild = ChildrenNode.EMPTY_NODE;\n    }\n    if (snap.getImmediateChild(key).equals(newChild)) {\n      // No change\n      return snap;\n    } else if (snap.numChildren() < this.limit_) {\n      return this.rangedFilter_\n        .getIndexedFilter()\n        .updateChild(\n          snap,\n          key,\n          newChild,\n          affectedPath,\n          source,\n          optChangeAccumulator\n        );\n    } else {\n      return this.fullLimitUpdateChild_(\n        snap,\n        key,\n        newChild,\n        source,\n        optChangeAccumulator\n      );\n    }\n  }\n  updateFullNode(\n    oldSnap: Node,\n    newSnap: Node,\n    optChangeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    let filtered;\n    if (newSnap.isLeafNode() || newSnap.isEmpty()) {\n      // Make sure we have a children node with the correct index, not a leaf node;\n      filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\n    } else {\n      if (\n        this.limit_ * 2 < newSnap.numChildren() &&\n        newSnap.isIndexed(this.index_)\n      ) {\n        // Easier to build up a snapshot, since what we're given has more than twice the elements we want\n        filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\n        // anchor to the startPost, endPost, or last element as appropriate\n        let iterator;\n        if (this.reverse_) {\n          iterator = (newSnap as ChildrenNode).getReverseIteratorFrom(\n            this.rangedFilter_.getEndPost(),\n            this.index_\n          );\n        } else {\n          iterator = (newSnap as ChildrenNode).getIteratorFrom(\n            this.rangedFilter_.getStartPost(),\n            this.index_\n          );\n        }\n        let count = 0;\n        while (iterator.hasNext() && count < this.limit_) {\n          const next = iterator.getNext();\n          if (!this.withinDirectionalStart(next)) {\n            // if we have not reached the start, skip to the next element\n            continue;\n          } else if (!this.withinDirectionalEnd(next)) {\n            // if we have reached the end, stop adding elements\n            break;\n          } else {\n            filtered = filtered.updateImmediateChild(next.name, next.node);\n            count++;\n          }\n        }\n      } else {\n        // The snap contains less than twice the limit. Faster to delete from the snap than build up a new one\n        filtered = newSnap.withIndex(this.index_);\n        // Don't support priorities on queries\n        filtered = filtered.updatePriority(\n          ChildrenNode.EMPTY_NODE\n        ) as ChildrenNode;\n\n        let iterator;\n        if (this.reverse_) {\n          iterator = filtered.getReverseIterator(this.index_);\n        } else {\n          iterator = filtered.getIterator(this.index_);\n        }\n\n        let count = 0;\n        while (iterator.hasNext()) {\n          const next = iterator.getNext();\n          const inRange =\n            count < this.limit_ &&\n            this.withinDirectionalStart(next) &&\n            this.withinDirectionalEnd(next);\n          if (inRange) {\n            count++;\n          } else {\n            filtered = filtered.updateImmediateChild(\n              next.name,\n              ChildrenNode.EMPTY_NODE\n            );\n          }\n        }\n      }\n    }\n    return this.rangedFilter_\n      .getIndexedFilter()\n      .updateFullNode(oldSnap, filtered, optChangeAccumulator);\n  }\n  updatePriority(oldSnap: Node, newPriority: Node): Node {\n    // Don't support priorities on queries\n    return oldSnap;\n  }\n  filtersNodes(): boolean {\n    return true;\n  }\n  getIndexedFilter(): IndexedFilter {\n    return this.rangedFilter_.getIndexedFilter();\n  }\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  private fullLimitUpdateChild_(\n    snap: Node,\n    childKey: string,\n    childSnap: Node,\n    source: CompleteChildSource,\n    changeAccumulator: ChildChangeAccumulator | null\n  ): Node {\n    // TODO: rename all cache stuff etc to general snap terminology\n    let cmp;\n    if (this.reverse_) {\n      const indexCmp = this.index_.getCompare();\n      cmp = (a: NamedNode, b: NamedNode) => indexCmp(b, a);\n    } else {\n      cmp = this.index_.getCompare();\n    }\n    const oldEventCache = snap as ChildrenNode;\n    assert(oldEventCache.numChildren() === this.limit_, '');\n    const newChildNamedNode = new NamedNode(childKey, childSnap);\n    const windowBoundary = this.reverse_\n      ? oldEventCache.getFirstChild(this.index_)\n      : (oldEventCache.getLastChild(this.index_) as NamedNode);\n    const inRange = this.rangedFilter_.matches(newChildNamedNode);\n    if (oldEventCache.hasChild(childKey)) {\n      const oldChildSnap = oldEventCache.getImmediateChild(childKey);\n      let nextChild = source.getChildAfterChild(\n        this.index_,\n        windowBoundary,\n        this.reverse_\n      );\n      while (\n        nextChild != null &&\n        (nextChild.name === childKey || oldEventCache.hasChild(nextChild.name))\n      ) {\n        // There is a weird edge case where a node is updated as part of a merge in the write tree, but hasn't\n        // been applied to the limited filter yet. Ignore this next child which will be updated later in\n        // the limited filter...\n        nextChild = source.getChildAfterChild(\n          this.index_,\n          nextChild,\n          this.reverse_\n        );\n      }\n      const compareNext =\n        nextChild == null ? 1 : cmp(nextChild, newChildNamedNode);\n      const remainsInWindow =\n        inRange && !childSnap.isEmpty() && compareNext >= 0;\n      if (remainsInWindow) {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            changeChildChanged(childKey, childSnap, oldChildSnap)\n          );\n        }\n        return oldEventCache.updateImmediateChild(childKey, childSnap);\n      } else {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            changeChildRemoved(childKey, oldChildSnap)\n          );\n        }\n        const newEventCache = oldEventCache.updateImmediateChild(\n          childKey,\n          ChildrenNode.EMPTY_NODE\n        );\n        const nextChildInRange =\n          nextChild != null && this.rangedFilter_.matches(nextChild);\n        if (nextChildInRange) {\n          if (changeAccumulator != null) {\n            changeAccumulator.trackChildChange(\n              changeChildAdded(nextChild.name, nextChild.node)\n            );\n          }\n          return newEventCache.updateImmediateChild(\n            nextChild.name,\n            nextChild.node\n          );\n        } else {\n          return newEventCache;\n        }\n      }\n    } else if (childSnap.isEmpty()) {\n      // we're deleting a node, but it was not in the window, so ignore it\n      return snap;\n    } else if (inRange) {\n      if (cmp(windowBoundary, newChildNamedNode) >= 0) {\n        if (changeAccumulator != null) {\n          changeAccumulator.trackChildChange(\n            changeChildRemoved(windowBoundary.name, windowBoundary.node)\n          );\n          changeAccumulator.trackChildChange(\n            changeChildAdded(childKey, childSnap)\n          );\n        }\n        return oldEventCache\n          .updateImmediateChild(childKey, childSnap)\n          .updateImmediateChild(windowBoundary.name, ChildrenNode.EMPTY_NODE);\n      } else {\n        return snap;\n      }\n    } else {\n      return snap;\n    }\n  }\n\n  private withinDirectionalStart = (node: NamedNode) =>\n    this.reverse_ ? this.withinEndPost(node) : this.withinStartPost(node);\n\n  private withinDirectionalEnd = (node: NamedNode) =>\n    this.reverse_ ? this.withinStartPost(node) : this.withinEndPost(node);\n\n  private withinStartPost = (node: NamedNode) => {\n    const compareRes = this.index_.compare(\n      this.rangedFilter_.getStartPost(),\n      node\n    );\n    return this.startIsInclusive_ ? compareRes <= 0 : compareRes < 0;\n  };\n\n  private withinEndPost = (node: NamedNode) => {\n    const compareRes = this.index_.compare(\n      node,\n      this.rangedFilter_.getEndPost()\n    );\n    return this.endIsInclusive_ ? compareRes <= 0 : compareRes < 0;\n  };\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, stringify } from '@firebase/util';\n\nimport { Index } from '../snap/indexes/Index';\nimport { KEY_INDEX } from '../snap/indexes/KeyIndex';\nimport { PathIndex } from '../snap/indexes/PathIndex';\nimport { PRIORITY_INDEX, PriorityIndex } from '../snap/indexes/PriorityIndex';\nimport { VALUE_INDEX } from '../snap/indexes/ValueIndex';\nimport { MAX_NAME, MIN_NAME } from '../util/util';\n\nimport { IndexedFilter } from './filter/IndexedFilter';\nimport { LimitedFilter } from './filter/LimitedFilter';\nimport { NodeFilter } from './filter/NodeFilter';\nimport { RangedFilter } from './filter/RangedFilter';\n\n/**\n * Wire Protocol Constants\n */\nconst enum WIRE_PROTOCOL_CONSTANTS {\n  INDEX_START_VALUE = 'sp',\n  INDEX_START_NAME = 'sn',\n  INDEX_START_IS_INCLUSIVE = 'sin',\n  INDEX_END_VALUE = 'ep',\n  INDEX_END_NAME = 'en',\n  INDEX_END_IS_INCLUSIVE = 'ein',\n  LIMIT = 'l',\n  VIEW_FROM = 'vf',\n  VIEW_FROM_LEFT = 'l',\n  VIEW_FROM_RIGHT = 'r',\n  INDEX = 'i'\n}\n\n/**\n * REST Query Constants\n */\nconst enum REST_QUERY_CONSTANTS {\n  ORDER_BY = 'orderBy',\n  PRIORITY_INDEX = '$priority',\n  VALUE_INDEX = '$value',\n  KEY_INDEX = '$key',\n  START_AFTER = 'startAfter',\n  START_AT = 'startAt',\n  END_AT = 'endAt',\n  END_BEFORE = 'endBefore',\n  LIMIT_TO_FIRST = 'limitToFirst',\n  LIMIT_TO_LAST = 'limitToLast'\n}\n\n/**\n * This class is an immutable-from-the-public-api struct containing a set of query parameters defining a\n * range to be returned for a particular location. It is assumed that validation of parameters is done at the\n * user-facing API level, so it is not done here.\n *\n * @internal\n */\nexport class QueryParams {\n  limitSet_ = false;\n  startSet_ = false;\n  startNameSet_ = false;\n  startAfterSet_ = false; // can only be true if startSet_ is true\n  endSet_ = false;\n  endNameSet_ = false;\n  endBeforeSet_ = false; // can only be true if endSet_ is true\n  limit_ = 0;\n  viewFrom_ = '';\n  indexStartValue_: unknown | null = null;\n  indexStartName_ = '';\n  indexEndValue_: unknown | null = null;\n  indexEndName_ = '';\n  index_: PriorityIndex = PRIORITY_INDEX;\n\n  hasStart(): boolean {\n    return this.startSet_;\n  }\n\n  /**\n   * @returns True if it would return from left.\n   */\n  isViewFromLeft(): boolean {\n    if (this.viewFrom_ === '') {\n      // limit(), rather than limitToFirst or limitToLast was called.\n      // This means that only one of startSet_ and endSet_ is true. Use them\n      // to calculate which side of the view to anchor to. If neither is set,\n      // anchor to the end.\n      return this.startSet_;\n    } else {\n      return this.viewFrom_ === WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_LEFT;\n    }\n  }\n\n  /**\n   * Only valid to call if hasStart() returns true\n   */\n  getIndexStartValue(): unknown {\n    assert(this.startSet_, 'Only valid if start has been set');\n    return this.indexStartValue_;\n  }\n\n  /**\n   * Only valid to call if hasStart() returns true.\n   * Returns the starting key name for the range defined by these query parameters\n   */\n  getIndexStartName(): string {\n    assert(this.startSet_, 'Only valid if start has been set');\n    if (this.startNameSet_) {\n      return this.indexStartName_;\n    } else {\n      return MIN_NAME;\n    }\n  }\n\n  hasEnd(): boolean {\n    return this.endSet_;\n  }\n\n  /**\n   * Only valid to call if hasEnd() returns true.\n   */\n  getIndexEndValue(): unknown {\n    assert(this.endSet_, 'Only valid if end has been set');\n    return this.indexEndValue_;\n  }\n\n  /**\n   * Only valid to call if hasEnd() returns true.\n   * Returns the end key name for the range defined by these query parameters\n   */\n  getIndexEndName(): string {\n    assert(this.endSet_, 'Only valid if end has been set');\n    if (this.endNameSet_) {\n      return this.indexEndName_;\n    } else {\n      return MAX_NAME;\n    }\n  }\n\n  hasLimit(): boolean {\n    return this.limitSet_;\n  }\n\n  /**\n   * @returns True if a limit has been set and it has been explicitly anchored\n   */\n  hasAnchoredLimit(): boolean {\n    return this.limitSet_ && this.viewFrom_ !== '';\n  }\n\n  /**\n   * Only valid to call if hasLimit() returns true\n   */\n  getLimit(): number {\n    assert(this.limitSet_, 'Only valid if limit has been set');\n    return this.limit_;\n  }\n\n  getIndex(): Index {\n    return this.index_;\n  }\n\n  loadsAllData(): boolean {\n    return !(this.startSet_ || this.endSet_ || this.limitSet_);\n  }\n\n  isDefault(): boolean {\n    return this.loadsAllData() && this.index_ === PRIORITY_INDEX;\n  }\n\n  copy(): QueryParams {\n    const copy = new QueryParams();\n    copy.limitSet_ = this.limitSet_;\n    copy.limit_ = this.limit_;\n    copy.startSet_ = this.startSet_;\n    copy.startAfterSet_ = this.startAfterSet_;\n    copy.indexStartValue_ = this.indexStartValue_;\n    copy.startNameSet_ = this.startNameSet_;\n    copy.indexStartName_ = this.indexStartName_;\n    copy.endSet_ = this.endSet_;\n    copy.endBeforeSet_ = this.endBeforeSet_;\n    copy.indexEndValue_ = this.indexEndValue_;\n    copy.endNameSet_ = this.endNameSet_;\n    copy.indexEndName_ = this.indexEndName_;\n    copy.index_ = this.index_;\n    copy.viewFrom_ = this.viewFrom_;\n    return copy;\n  }\n}\n\nexport function queryParamsGetNodeFilter(queryParams: QueryParams): NodeFilter {\n  if (queryParams.loadsAllData()) {\n    return new IndexedFilter(queryParams.getIndex());\n  } else if (queryParams.hasLimit()) {\n    return new LimitedFilter(queryParams);\n  } else {\n    return new RangedFilter(queryParams);\n  }\n}\n\nexport function queryParamsLimit(\n  queryParams: QueryParams,\n  newLimit: number\n): QueryParams {\n  const newParams = queryParams.copy();\n  newParams.limitSet_ = true;\n  newParams.limit_ = newLimit;\n  newParams.viewFrom_ = '';\n  return newParams;\n}\n\nexport function queryParamsLimitToFirst(\n  queryParams: QueryParams,\n  newLimit: number\n): QueryParams {\n  const newParams = queryParams.copy();\n  newParams.limitSet_ = true;\n  newParams.limit_ = newLimit;\n  newParams.viewFrom_ = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_LEFT;\n  return newParams;\n}\n\nexport function queryParamsLimitToLast(\n  queryParams: QueryParams,\n  newLimit: number\n): QueryParams {\n  const newParams = queryParams.copy();\n  newParams.limitSet_ = true;\n  newParams.limit_ = newLimit;\n  newParams.viewFrom_ = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_RIGHT;\n  return newParams;\n}\n\nexport function queryParamsStartAt(\n  queryParams: QueryParams,\n  indexValue: unknown,\n  key?: string | null\n): QueryParams {\n  const newParams = queryParams.copy();\n  newParams.startSet_ = true;\n  if (indexValue === undefined) {\n    indexValue = null;\n  }\n  newParams.indexStartValue_ = indexValue;\n  if (key != null) {\n    newParams.startNameSet_ = true;\n    newParams.indexStartName_ = key;\n  } else {\n    newParams.startNameSet_ = false;\n    newParams.indexStartName_ = '';\n  }\n  return newParams;\n}\n\nexport function queryParamsStartAfter(\n  queryParams: QueryParams,\n  indexValue: unknown,\n  key?: string | null\n): QueryParams {\n  let params: QueryParams;\n  if (queryParams.index_ === KEY_INDEX || !!key) {\n    params = queryParamsStartAt(queryParams, indexValue, key);\n  } else {\n    params = queryParamsStartAt(queryParams, indexValue, MAX_NAME);\n  }\n  params.startAfterSet_ = true;\n  return params;\n}\n\nexport function queryParamsEndAt(\n  queryParams: QueryParams,\n  indexValue: unknown,\n  key?: string | null\n): QueryParams {\n  const newParams = queryParams.copy();\n  newParams.endSet_ = true;\n  if (indexValue === undefined) {\n    indexValue = null;\n  }\n  newParams.indexEndValue_ = indexValue;\n  if (key !== undefined) {\n    newParams.endNameSet_ = true;\n    newParams.indexEndName_ = key;\n  } else {\n    newParams.endNameSet_ = false;\n    newParams.indexEndName_ = '';\n  }\n  return newParams;\n}\n\nexport function queryParamsEndBefore(\n  queryParams: QueryParams,\n  indexValue: unknown,\n  key?: string | null\n): QueryParams {\n  let params: QueryParams;\n  if (queryParams.index_ === KEY_INDEX || !!key) {\n    params = queryParamsEndAt(queryParams, indexValue, key);\n  } else {\n    params = queryParamsEndAt(queryParams, indexValue, MIN_NAME);\n  }\n  params.endBeforeSet_ = true;\n  return params;\n}\n\nexport function queryParamsOrderBy(\n  queryParams: QueryParams,\n  index: Index\n): QueryParams {\n  const newParams = queryParams.copy();\n  newParams.index_ = index;\n  return newParams;\n}\n\n/**\n * Returns a set of REST query string parameters representing this query.\n *\n * @returns query string parameters\n */\nexport function queryParamsToRestQueryStringParameters(\n  queryParams: QueryParams\n): Record<string, string | number> {\n  const qs: Record<string, string | number> = {};\n\n  if (queryParams.isDefault()) {\n    return qs;\n  }\n\n  let orderBy;\n  if (queryParams.index_ === PRIORITY_INDEX) {\n    orderBy = REST_QUERY_CONSTANTS.PRIORITY_INDEX;\n  } else if (queryParams.index_ === VALUE_INDEX) {\n    orderBy = REST_QUERY_CONSTANTS.VALUE_INDEX;\n  } else if (queryParams.index_ === KEY_INDEX) {\n    orderBy = REST_QUERY_CONSTANTS.KEY_INDEX;\n  } else {\n    assert(queryParams.index_ instanceof PathIndex, 'Unrecognized index type!');\n    orderBy = queryParams.index_.toString();\n  }\n  qs[REST_QUERY_CONSTANTS.ORDER_BY] = stringify(orderBy);\n\n  if (queryParams.startSet_) {\n    const startParam = queryParams.startAfterSet_\n      ? REST_QUERY_CONSTANTS.START_AFTER\n      : REST_QUERY_CONSTANTS.START_AT;\n    qs[startParam] = stringify(queryParams.indexStartValue_);\n    if (queryParams.startNameSet_) {\n      qs[startParam] += ',' + stringify(queryParams.indexStartName_);\n    }\n  }\n\n  if (queryParams.endSet_) {\n    const endParam = queryParams.endBeforeSet_\n      ? REST_QUERY_CONSTANTS.END_BEFORE\n      : REST_QUERY_CONSTANTS.END_AT;\n    qs[endParam] = stringify(queryParams.indexEndValue_);\n    if (queryParams.endNameSet_) {\n      qs[endParam] += ',' + stringify(queryParams.indexEndName_);\n    }\n  }\n\n  if (queryParams.limitSet_) {\n    if (queryParams.isViewFromLeft()) {\n      qs[REST_QUERY_CONSTANTS.LIMIT_TO_FIRST] = queryParams.limit_;\n    } else {\n      qs[REST_QUERY_CONSTANTS.LIMIT_TO_LAST] = queryParams.limit_;\n    }\n  }\n\n  return qs;\n}\n\nexport function queryParamsGetQueryObject(\n  queryParams: QueryParams\n): Record<string, unknown> {\n  const obj: Record<string, unknown> = {};\n  if (queryParams.startSet_) {\n    obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_VALUE] =\n      queryParams.indexStartValue_;\n    if (queryParams.startNameSet_) {\n      obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_NAME] =\n        queryParams.indexStartName_;\n    }\n    obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_IS_INCLUSIVE] =\n      !queryParams.startAfterSet_;\n  }\n  if (queryParams.endSet_) {\n    obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_VALUE] = queryParams.indexEndValue_;\n    if (queryParams.endNameSet_) {\n      obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_NAME] = queryParams.indexEndName_;\n    }\n    obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_IS_INCLUSIVE] =\n      !queryParams.endBeforeSet_;\n  }\n  if (queryParams.limitSet_) {\n    obj[WIRE_PROTOCOL_CONSTANTS.LIMIT] = queryParams.limit_;\n    let viewFrom = queryParams.viewFrom_;\n    if (viewFrom === '') {\n      if (queryParams.isViewFromLeft()) {\n        viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_LEFT;\n      } else {\n        viewFrom = WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_RIGHT;\n      }\n    }\n    obj[WIRE_PROTOCOL_CONSTANTS.VIEW_FROM] = viewFrom;\n  }\n  // For now, priority index is the default, so we only specify if it's some other index\n  if (queryParams.index_ !== PRIORITY_INDEX) {\n    obj[WIRE_PROTOCOL_CONSTANTS.INDEX] = queryParams.index_.toString();\n  }\n  return obj;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  jsonEval,\n  safeGet,\n  querystring,\n  Deferred\n} from '@firebase/util';\n\nimport { AppCheckTokenProvider } from './AppCheckTokenProvider';\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { RepoInfo } from './RepoInfo';\nimport { ServerActions } from './ServerActions';\nimport { logWrapper, warn } from './util/util';\nimport { QueryContext } from './view/EventRegistration';\nimport { queryParamsToRestQueryStringParameters } from './view/QueryParams';\n\n/**\n * An implementation of ServerActions that communicates with the server via REST requests.\n * This is mostly useful for compatibility with crawlers, where we don't want to spin up a full\n * persistent connection (using WebSockets or long-polling)\n */\nexport class ReadonlyRestClient extends ServerActions {\n  reportStats(stats: { [k: string]: unknown }): void {\n    throw new Error('Method not implemented.');\n  }\n\n  /** @private {function(...[*])} */\n  private log_: (...args: unknown[]) => void = logWrapper('p:rest:');\n\n  /**\n   * We don't actually need to track listens, except to prevent us calling an onComplete for a listen\n   * that's been removed. :-/\n   */\n  private listens_: { [k: string]: object } = {};\n\n  static getListenId_(query: QueryContext, tag?: number | null): string {\n    if (tag !== undefined) {\n      return 'tag$' + tag;\n    } else {\n      assert(\n        query._queryParams.isDefault(),\n        \"should have a tag if it's not a default query.\"\n      );\n      return query._path.toString();\n    }\n  }\n\n  /**\n   * @param repoInfo_ - Data about the namespace we are connecting to\n   * @param onDataUpdate_ - A callback for new data from the server\n   */\n  constructor(\n    private repoInfo_: RepoInfo,\n    private onDataUpdate_: (\n      a: string,\n      b: unknown,\n      c: boolean,\n      d: number | null\n    ) => void,\n    private authTokenProvider_: AuthTokenProvider,\n    private appCheckTokenProvider_: AppCheckTokenProvider\n  ) {\n    super();\n  }\n\n  /** @inheritDoc */\n  listen(\n    query: QueryContext,\n    currentHashFn: () => string,\n    tag: number | null,\n    onComplete: (a: string, b: unknown) => void\n  ) {\n    const pathString = query._path.toString();\n    this.log_('Listen called for ' + pathString + ' ' + query._queryIdentifier);\n\n    // Mark this listener so we can tell if it's removed.\n    const listenId = ReadonlyRestClient.getListenId_(query, tag);\n    const thisListen = {};\n    this.listens_[listenId] = thisListen;\n\n    const queryStringParameters = queryParamsToRestQueryStringParameters(\n      query._queryParams\n    );\n\n    this.restRequest_(\n      pathString + '.json',\n      queryStringParameters,\n      (error, result) => {\n        let data = result;\n\n        if (error === 404) {\n          data = null;\n          error = null;\n        }\n\n        if (error === null) {\n          this.onDataUpdate_(pathString, data, /*isMerge=*/ false, tag);\n        }\n\n        if (safeGet(this.listens_, listenId) === thisListen) {\n          let status;\n          if (!error) {\n            status = 'ok';\n          } else if (error === 401) {\n            status = 'permission_denied';\n          } else {\n            status = 'rest_error:' + error;\n          }\n\n          onComplete(status, null);\n        }\n      }\n    );\n  }\n\n  /** @inheritDoc */\n  unlisten(query: QueryContext, tag: number | null) {\n    const listenId = ReadonlyRestClient.getListenId_(query, tag);\n    delete this.listens_[listenId];\n  }\n\n  get(query: QueryContext): Promise<string> {\n    const queryStringParameters = queryParamsToRestQueryStringParameters(\n      query._queryParams\n    );\n\n    const pathString = query._path.toString();\n\n    const deferred = new Deferred<string>();\n\n    this.restRequest_(\n      pathString + '.json',\n      queryStringParameters,\n      (error, result) => {\n        let data = result;\n\n        if (error === 404) {\n          data = null;\n          error = null;\n        }\n\n        if (error === null) {\n          this.onDataUpdate_(\n            pathString,\n            data,\n            /*isMerge=*/ false,\n            /*tag=*/ null\n          );\n          deferred.resolve(data as string);\n        } else {\n          deferred.reject(new Error(data as string));\n        }\n      }\n    );\n    return deferred.promise;\n  }\n\n  /** @inheritDoc */\n  refreshAuthToken(token: string) {\n    // no-op since we just always call getToken.\n  }\n\n  /**\n   * Performs a REST request to the given path, with the provided query string parameters,\n   * and any auth credentials we have.\n   */\n  private restRequest_(\n    pathString: string,\n    queryStringParameters: { [k: string]: string | number } = {},\n    callback: ((a: number | null, b?: unknown) => void) | null\n  ) {\n    queryStringParameters['format'] = 'export';\n\n    return Promise.all([\n      this.authTokenProvider_.getToken(/*forceRefresh=*/ false),\n      this.appCheckTokenProvider_.getToken(/*forceRefresh=*/ false)\n    ]).then(([authToken, appCheckToken]) => {\n      if (authToken && authToken.accessToken) {\n        queryStringParameters['auth'] = authToken.accessToken;\n      }\n      if (appCheckToken && appCheckToken.token) {\n        queryStringParameters['ac'] = appCheckToken.token;\n      }\n\n      const url =\n        (this.repoInfo_.secure ? 'https://' : 'http://') +\n        this.repoInfo_.host +\n        pathString +\n        '?' +\n        'ns=' +\n        this.repoInfo_.namespace +\n        querystring(queryStringParameters);\n\n      this.log_('Sending REST request for ' + url);\n      const xhr = new XMLHttpRequest();\n      xhr.onreadystatechange = () => {\n        if (callback && xhr.readyState === 4) {\n          this.log_(\n            'REST Response for ' + url + ' received. status:',\n            xhr.status,\n            'response:',\n            xhr.responseText\n          );\n          let res = null;\n          if (xhr.status >= 200 && xhr.status < 300) {\n            try {\n              res = jsonEval(xhr.responseText);\n            } catch (e) {\n              warn(\n                'Failed to parse JSON response for ' +\n                  url +\n                  ': ' +\n                  xhr.responseText\n              );\n            }\n            callback(null, res);\n          } else {\n            // 401 and 404 are expected.\n            if (xhr.status !== 401 && xhr.status !== 404) {\n              warn(\n                'Got unsuccessful REST response for ' +\n                  url +\n                  ' Status: ' +\n                  xhr.status\n              );\n            }\n            callback(xhr.status);\n          }\n          callback = null;\n        }\n      };\n\n      xhr.open('GET', url, /*asynchronous=*/ true);\n      xhr.send();\n    });\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Node } from './snap/Node';\nimport { Path } from './util/Path';\n\n/**\n * Mutable object which basically just stores a reference to the \"latest\" immutable snapshot.\n */\nexport class SnapshotHolder {\n  private rootNode_: Node = ChildrenNode.EMPTY_NODE;\n\n  getNode(path: Path): Node {\n    return this.rootNode_.getChild(path);\n  }\n\n  updateSnapshot(path: Path, newSnapshotNode: Node) {\n    this.rootNode_ = this.rootNode_.updateChild(path, newSnapshotNode);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { Node } from './snap/Node';\nimport { Path, pathGetFront, pathIsEmpty, pathPopFront } from './util/Path';\n\n/**\n * Helper class to store a sparse set of snapshots.\n */\nexport interface SparseSnapshotTree {\n  value: Node | null;\n  readonly children: Map<string, SparseSnapshotTree>;\n}\n\nexport function newSparseSnapshotTree(): SparseSnapshotTree {\n  return {\n    value: null,\n    children: new Map()\n  };\n}\n\n/**\n * Gets the node stored at the given path if one exists.\n * Only seems to be used in tests.\n *\n * @param path - Path to look up snapshot for.\n * @returns The retrieved node, or null.\n */\nexport function sparseSnapshotTreeFind(\n  sparseSnapshotTree: SparseSnapshotTree,\n  path: Path\n): Node | null {\n  if (sparseSnapshotTree.value != null) {\n    return sparseSnapshotTree.value.getChild(path);\n  } else if (!pathIsEmpty(path) && sparseSnapshotTree.children.size > 0) {\n    const childKey = pathGetFront(path);\n    path = pathPopFront(path);\n    if (sparseSnapshotTree.children.has(childKey)) {\n      const childTree = sparseSnapshotTree.children.get(childKey);\n      return sparseSnapshotTreeFind(childTree, path);\n    } else {\n      return null;\n    }\n  } else {\n    return null;\n  }\n}\n\n/**\n * Stores the given node at the specified path. If there is already a node\n * at a shallower path, it merges the new data into that snapshot node.\n *\n * @param path - Path to look up snapshot for.\n * @param data - The new data, or null.\n */\nexport function sparseSnapshotTreeRemember(\n  sparseSnapshotTree: SparseSnapshotTree,\n  path: Path,\n  data: Node\n): void {\n  if (pathIsEmpty(path)) {\n    sparseSnapshotTree.value = data;\n    sparseSnapshotTree.children.clear();\n  } else if (sparseSnapshotTree.value !== null) {\n    sparseSnapshotTree.value = sparseSnapshotTree.value.updateChild(path, data);\n  } else {\n    const childKey = pathGetFront(path);\n    if (!sparseSnapshotTree.children.has(childKey)) {\n      sparseSnapshotTree.children.set(childKey, newSparseSnapshotTree());\n    }\n\n    const child = sparseSnapshotTree.children.get(childKey);\n    path = pathPopFront(path);\n    sparseSnapshotTreeRemember(child, path, data);\n  }\n}\n\n/**\n * Purge the data at path from the cache.\n *\n * @param path - Path to look up snapshot for.\n * @returns True if this node should now be removed.\n */\nexport function sparseSnapshotTreeForget(\n  sparseSnapshotTree: SparseSnapshotTree,\n  path: Path\n): boolean {\n  if (pathIsEmpty(path)) {\n    sparseSnapshotTree.value = null;\n    sparseSnapshotTree.children.clear();\n    return true;\n  } else {\n    if (sparseSnapshotTree.value !== null) {\n      if (sparseSnapshotTree.value.isLeafNode()) {\n        // We're trying to forget a node that doesn't exist\n        return false;\n      } else {\n        const value = sparseSnapshotTree.value;\n        sparseSnapshotTree.value = null;\n\n        value.forEachChild(PRIORITY_INDEX, (key, tree) => {\n          sparseSnapshotTreeRemember(sparseSnapshotTree, new Path(key), tree);\n        });\n\n        return sparseSnapshotTreeForget(sparseSnapshotTree, path);\n      }\n    } else if (sparseSnapshotTree.children.size > 0) {\n      const childKey = pathGetFront(path);\n      path = pathPopFront(path);\n      if (sparseSnapshotTree.children.has(childKey)) {\n        const safeToRemove = sparseSnapshotTreeForget(\n          sparseSnapshotTree.children.get(childKey),\n          path\n        );\n        if (safeToRemove) {\n          sparseSnapshotTree.children.delete(childKey);\n        }\n      }\n\n      return sparseSnapshotTree.children.size === 0;\n    } else {\n      return true;\n    }\n  }\n}\n\n/**\n * Recursively iterates through all of the stored tree and calls the\n * callback on each one.\n *\n * @param prefixPath - Path to look up node for.\n * @param func - The function to invoke for each tree.\n */\nexport function sparseSnapshotTreeForEachTree(\n  sparseSnapshotTree: SparseSnapshotTree,\n  prefixPath: Path,\n  func: (a: Path, b: Node) => unknown\n): void {\n  if (sparseSnapshotTree.value !== null) {\n    func(prefixPath, sparseSnapshotTree.value);\n  } else {\n    sparseSnapshotTreeForEachChild(sparseSnapshotTree, (key, tree) => {\n      const path = new Path(prefixPath.toString() + '/' + key);\n      sparseSnapshotTreeForEachTree(tree, path, func);\n    });\n  }\n}\n\n/**\n * Iterates through each immediate child and triggers the callback.\n * Only seems to be used in tests.\n *\n * @param func - The function to invoke for each child.\n */\nexport function sparseSnapshotTreeForEachChild(\n  sparseSnapshotTree: SparseSnapshotTree,\n  func: (a: string, b: SparseSnapshotTree) => void\n): void {\n  sparseSnapshotTree.children.forEach((tree, key) => {\n    func(key, tree);\n  });\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { each } from '../util/util';\n\nimport { StatsCollection } from './StatsCollection';\n\n/**\n * Returns the delta from the previous call to get stats.\n *\n * @param collection_ - The collection to \"listen\" to.\n */\nexport class StatsListener {\n  private last_: { [k: string]: number } | null = null;\n\n  constructor(private collection_: StatsCollection) {}\n\n  get(): { [k: string]: number } {\n    const newStats = this.collection_.get();\n\n    const delta = { ...newStats };\n    if (this.last_) {\n      each(this.last_, (stat: string, value: number) => {\n        delta[stat] = delta[stat] - value;\n      });\n    }\n    this.last_ = newStats;\n\n    return delta;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { contains } from '@firebase/util';\n\nimport { ServerActions } from '../ServerActions';\nimport { setTimeoutNonBlocking, each } from '../util/util';\n\nimport { StatsCollection } from './StatsCollection';\nimport { StatsListener } from './StatsListener';\n\n// Assuming some apps may have a short amount of time on page, and a bulk of firebase operations probably\n// happen on page load, we try to report our first set of stats pretty quickly, but we wait at least 10\n// seconds to try to ensure the Firebase connection is established / settled.\nconst FIRST_STATS_MIN_TIME = 10 * 1000;\nconst FIRST_STATS_MAX_TIME = 30 * 1000;\n\n// We'll continue to report stats on average every 5 minutes.\nconst REPORT_STATS_INTERVAL = 5 * 60 * 1000;\n\nexport class StatsReporter {\n  private statsListener_: StatsListener;\n  statsToReport_: { [k: string]: boolean } = {};\n\n  constructor(collection: StatsCollection, private server_: ServerActions) {\n    this.statsListener_ = new StatsListener(collection);\n\n    const timeout =\n      FIRST_STATS_MIN_TIME +\n      (FIRST_STATS_MAX_TIME - FIRST_STATS_MIN_TIME) * Math.random();\n    setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(timeout));\n  }\n\n  private reportStats_() {\n    const stats = this.statsListener_.get();\n    const reportedStats: typeof stats = {};\n    let haveStatsToReport = false;\n\n    each(stats, (stat: string, value: number) => {\n      if (value > 0 && contains(this.statsToReport_, stat)) {\n        reportedStats[stat] = value;\n        haveStatsToReport = true;\n      }\n    });\n\n    if (haveStatsToReport) {\n      this.server_.reportStats(reportedStats);\n    }\n\n    // queue our next run.\n    setTimeoutNonBlocking(\n      this.reportStats_.bind(this),\n      Math.floor(Math.random() * 2 * REPORT_STATS_INTERVAL)\n    );\n  }\n}\n\nexport function statsReporterIncludeStat(\n  reporter: StatsReporter,\n  stat: string\n) {\n  reporter.statsToReport_[stat] = true;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path } from '../util/Path';\n\n/**\n *\n * @enum\n */\nexport enum OperationType {\n  OVERWRITE,\n  MERGE,\n  ACK_USER_WRITE,\n  LISTEN_COMPLETE\n}\n\n/**\n * @interface\n */\nexport interface Operation {\n  source: OperationSource;\n\n  type: OperationType;\n\n  path: Path;\n\n  operationForChild(childName: string): Operation | null;\n}\n\nexport interface OperationSource {\n  fromUser: boolean;\n  fromServer: boolean;\n  queryId: string | null;\n  tagged: boolean;\n}\n\nexport function newOperationSourceUser(): OperationSource {\n  return {\n    fromUser: true,\n    fromServer: false,\n    queryId: null,\n    tagged: false\n  };\n}\n\nexport function newOperationSourceServer(): OperationSource {\n  return {\n    fromUser: false,\n    fromServer: true,\n    queryId: null,\n    tagged: false\n  };\n}\n\nexport function newOperationSourceServerTaggedQuery(\n  queryId: string\n): OperationSource {\n  return {\n    fromUser: false,\n    fromServer: true,\n    queryId,\n    tagged: true\n  };\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { ImmutableTree } from '../util/ImmutableTree';\nimport {\n  newEmptyPath,\n  Path,\n  pathGetFront,\n  pathIsEmpty,\n  pathPopFront\n} from '../util/Path';\n\nimport { newOperationSourceUser, Operation, OperationType } from './Operation';\n\nexport class AckUserWrite implements Operation {\n  /** @inheritDoc */\n  type = OperationType.ACK_USER_WRITE;\n\n  /** @inheritDoc */\n  source = newOperationSourceUser();\n\n  /**\n   * @param affectedTree - A tree containing true for each affected path. Affected paths can't overlap.\n   */\n  constructor(\n    /** @inheritDoc */ public path: Path,\n    /** @inheritDoc */ public affectedTree: ImmutableTree<boolean>,\n    /** @inheritDoc */ public revert: boolean\n  ) {}\n  operationForChild(childName: string): AckUserWrite {\n    if (!pathIsEmpty(this.path)) {\n      assert(\n        pathGetFront(this.path) === childName,\n        'operationForChild called for unrelated child.'\n      );\n      return new AckUserWrite(\n        pathPopFront(this.path),\n        this.affectedTree,\n        this.revert\n      );\n    } else if (this.affectedTree.value != null) {\n      assert(\n        this.affectedTree.children.isEmpty(),\n        'affectedTree should not have overlapping affected paths.'\n      );\n      // All child locations are affected as well; just return same operation.\n      return this;\n    } else {\n      const childTree = this.affectedTree.subtree(new Path(childName));\n      return new AckUserWrite(newEmptyPath(), childTree, this.revert);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { newEmptyPath, Path, pathIsEmpty, pathPopFront } from '../util/Path';\n\nimport { Operation, OperationSource, OperationType } from './Operation';\n\nexport class ListenComplete implements Operation {\n  /** @inheritDoc */\n  type = OperationType.LISTEN_COMPLETE;\n\n  constructor(public source: OperationSource, public path: Path) {}\n\n  operationForChild(childName: string): ListenComplete {\n    if (pathIsEmpty(this.path)) {\n      return new ListenComplete(this.source, newEmptyPath());\n    } else {\n      return new ListenComplete(this.source, pathPopFront(this.path));\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node } from '../snap/Node';\nimport { newEmptyPath, Path, pathIsEmpty, pathPopFront } from '../util/Path';\n\nimport { Operation, OperationSource, OperationType } from './Operation';\n\nexport class Overwrite implements Operation {\n  /** @inheritDoc */\n  type = OperationType.OVERWRITE;\n\n  constructor(\n    public source: OperationSource,\n    public path: Path,\n    public snap: Node\n  ) {}\n\n  operationForChild(childName: string): Overwrite {\n    if (pathIsEmpty(this.path)) {\n      return new Overwrite(\n        this.source,\n        newEmptyPath(),\n        this.snap.getImmediateChild(childName)\n      );\n    } else {\n      return new Overwrite(this.source, pathPopFront(this.path), this.snap);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { Node } from '../snap/Node';\nimport { ImmutableTree } from '../util/ImmutableTree';\nimport {\n  newEmptyPath,\n  Path,\n  pathGetFront,\n  pathIsEmpty,\n  pathPopFront\n} from '../util/Path';\n\nimport { Operation, OperationSource, OperationType } from './Operation';\nimport { Overwrite } from './Overwrite';\n\nexport class Merge implements Operation {\n  /** @inheritDoc */\n  type = OperationType.MERGE;\n\n  constructor(\n    /** @inheritDoc */ public source: OperationSource,\n    /** @inheritDoc */ public path: Path,\n    /** @inheritDoc */ public children: ImmutableTree<Node>\n  ) {}\n  operationForChild(childName: string): Operation {\n    if (pathIsEmpty(this.path)) {\n      const childTree = this.children.subtree(new Path(childName));\n      if (childTree.isEmpty()) {\n        // This child is unaffected\n        return null;\n      } else if (childTree.value) {\n        // We have a snapshot for the child in question.  This becomes an overwrite of the child.\n        return new Overwrite(this.source, newEmptyPath(), childTree.value);\n      } else {\n        // This is a merge at a deeper level\n        return new Merge(this.source, newEmptyPath(), childTree);\n      }\n    } else {\n      assert(\n        pathGetFront(this.path) === childName,\n        \"Can't get a merge for a child not on the path of the operation\"\n      );\n      return new Merge(this.source, pathPopFront(this.path), this.children);\n    }\n  }\n  toString(): string {\n    return (\n      'Operation(' +\n      this.path +\n      ': ' +\n      this.source.toString() +\n      ' merge: ' +\n      this.children.toString() +\n      ')'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node } from '../snap/Node';\nimport { Path, pathGetFront, pathIsEmpty } from '../util/Path';\n\n/**\n * A cache node only stores complete children. Additionally it holds a flag whether the node can be considered fully\n * initialized in the sense that we know at one point in time this represented a valid state of the world, e.g.\n * initialized with data from the server, or a complete overwrite by the client. The filtered flag also tracks\n * whether a node potentially had children removed due to a filter.\n */\nexport class CacheNode {\n  constructor(\n    private node_: Node,\n    private fullyInitialized_: boolean,\n    private filtered_: boolean\n  ) {}\n\n  /**\n   * Returns whether this node was fully initialized with either server data or a complete overwrite by the client\n   */\n  isFullyInitialized(): boolean {\n    return this.fullyInitialized_;\n  }\n\n  /**\n   * Returns whether this node is potentially missing children due to a filter applied to the node\n   */\n  isFiltered(): boolean {\n    return this.filtered_;\n  }\n\n  isCompleteForPath(path: Path): boolean {\n    if (pathIsEmpty(path)) {\n      return this.isFullyInitialized() && !this.filtered_;\n    }\n\n    const childKey = pathGetFront(path);\n    return this.isCompleteForChild(childKey);\n  }\n\n  isCompleteForChild(key: string): boolean {\n    return (\n      (this.isFullyInitialized() && !this.filtered_) || this.node_.hasChild(key)\n    );\n  }\n\n  getNode(): Node {\n    return this.node_;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assertionError } from '@firebase/util';\n\nimport { Index } from '../snap/indexes/Index';\nimport { NamedNode, Node } from '../snap/Node';\n\nimport { Change, ChangeType, changeChildMoved } from './Change';\nimport { Event } from './Event';\nimport { EventRegistration, QueryContext } from './EventRegistration';\n\n/**\n * An EventGenerator is used to convert \"raw\" changes (Change) as computed by the\n * CacheDiffer into actual events (Event) that can be raised.  See generateEventsForChanges()\n * for details.\n *\n */\nexport class EventGenerator {\n  index_: Index;\n\n  constructor(public query_: QueryContext) {\n    this.index_ = this.query_._queryParams.getIndex();\n  }\n}\n\n/**\n * Given a set of raw changes (no moved events and prevName not specified yet), and a set of\n * EventRegistrations that should be notified of these changes, generate the actual events to be raised.\n *\n * Notes:\n *  - child_moved events will be synthesized at this time for any child_changed events that affect\n *    our index.\n *  - prevName will be calculated based on the index ordering.\n */\nexport function eventGeneratorGenerateEventsForChanges(\n  eventGenerator: EventGenerator,\n  changes: Change[],\n  eventCache: Node,\n  eventRegistrations: EventRegistration[]\n): Event[] {\n  const events: Event[] = [];\n  const moves: Change[] = [];\n\n  changes.forEach(change => {\n    if (\n      change.type === ChangeType.CHILD_CHANGED &&\n      eventGenerator.index_.indexedValueChanged(\n        change.oldSnap as Node,\n        change.snapshotNode\n      )\n    ) {\n      moves.push(changeChildMoved(change.childName, change.snapshotNode));\n    }\n  });\n\n  eventGeneratorGenerateEventsForType(\n    eventGenerator,\n    events,\n    ChangeType.CHILD_REMOVED,\n    changes,\n    eventRegistrations,\n    eventCache\n  );\n  eventGeneratorGenerateEventsForType(\n    eventGenerator,\n    events,\n    ChangeType.CHILD_ADDED,\n    changes,\n    eventRegistrations,\n    eventCache\n  );\n  eventGeneratorGenerateEventsForType(\n    eventGenerator,\n    events,\n    ChangeType.CHILD_MOVED,\n    moves,\n    eventRegistrations,\n    eventCache\n  );\n  eventGeneratorGenerateEventsForType(\n    eventGenerator,\n    events,\n    ChangeType.CHILD_CHANGED,\n    changes,\n    eventRegistrations,\n    eventCache\n  );\n  eventGeneratorGenerateEventsForType(\n    eventGenerator,\n    events,\n    ChangeType.VALUE,\n    changes,\n    eventRegistrations,\n    eventCache\n  );\n\n  return events;\n}\n\n/**\n * Given changes of a single change type, generate the corresponding events.\n */\nfunction eventGeneratorGenerateEventsForType(\n  eventGenerator: EventGenerator,\n  events: Event[],\n  eventType: string,\n  changes: Change[],\n  registrations: EventRegistration[],\n  eventCache: Node\n) {\n  const filteredChanges = changes.filter(change => change.type === eventType);\n\n  filteredChanges.sort((a, b) =>\n    eventGeneratorCompareChanges(eventGenerator, a, b)\n  );\n  filteredChanges.forEach(change => {\n    const materializedChange = eventGeneratorMaterializeSingleChange(\n      eventGenerator,\n      change,\n      eventCache\n    );\n    registrations.forEach(registration => {\n      if (registration.respondsTo(change.type)) {\n        events.push(\n          registration.createEvent(materializedChange, eventGenerator.query_)\n        );\n      }\n    });\n  });\n}\n\nfunction eventGeneratorMaterializeSingleChange(\n  eventGenerator: EventGenerator,\n  change: Change,\n  eventCache: Node\n): Change {\n  if (change.type === 'value' || change.type === 'child_removed') {\n    return change;\n  } else {\n    change.prevName = eventCache.getPredecessorChildName(\n      change.childName,\n      change.snapshotNode,\n      eventGenerator.index_\n    );\n    return change;\n  }\n}\n\nfunction eventGeneratorCompareChanges(\n  eventGenerator: EventGenerator,\n  a: Change,\n  b: Change\n) {\n  if (a.childName == null || b.childName == null) {\n    throw assertionError('Should only compare child_ events.');\n  }\n  const aWrapped = new NamedNode(a.childName, a.snapshotNode);\n  const bWrapped = new NamedNode(b.childName, b.snapshotNode);\n  return eventGenerator.index_.compare(aWrapped, bWrapped);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Node } from '../snap/Node';\n\nimport { CacheNode } from './CacheNode';\n\n/**\n * Stores the data we have cached for a view.\n *\n * serverSnap is the cached server data, eventSnap is the cached event data (server data plus any local writes).\n */\nexport interface ViewCache {\n  readonly eventCache: CacheNode;\n  readonly serverCache: CacheNode;\n}\n\nexport function newViewCache(\n  eventCache: CacheNode,\n  serverCache: CacheNode\n): ViewCache {\n  return { eventCache, serverCache };\n}\n\nexport function viewCacheUpdateEventSnap(\n  viewCache: ViewCache,\n  eventSnap: Node,\n  complete: boolean,\n  filtered: boolean\n): ViewCache {\n  return newViewCache(\n    new CacheNode(eventSnap, complete, filtered),\n    viewCache.serverCache\n  );\n}\n\nexport function viewCacheUpdateServerSnap(\n  viewCache: ViewCache,\n  serverSnap: Node,\n  complete: boolean,\n  filtered: boolean\n): ViewCache {\n  return newViewCache(\n    viewCache.eventCache,\n    new CacheNode(serverSnap, complete, filtered)\n  );\n}\n\nexport function viewCacheGetCompleteEventSnap(\n  viewCache: ViewCache\n): Node | null {\n  return viewCache.eventCache.isFullyInitialized()\n    ? viewCache.eventCache.getNode()\n    : null;\n}\n\nexport function viewCacheGetCompleteServerSnap(\n  viewCache: ViewCache\n): Node | null {\n  return viewCache.serverCache.isFullyInitialized()\n    ? viewCache.serverCache.getNode()\n    : null;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  newEmptyPath,\n  Path,\n  pathChild,\n  pathGetFront,\n  pathIsEmpty,\n  pathPopFront\n} from './Path';\nimport { SortedMap } from './SortedMap';\nimport { each, stringCompare } from './util';\n\nlet emptyChildrenSingleton: SortedMap<string, ImmutableTree<null>>;\n\n/**\n * Singleton empty children collection.\n *\n */\nconst EmptyChildren = (): SortedMap<string, ImmutableTree<null>> => {\n  if (!emptyChildrenSingleton) {\n    emptyChildrenSingleton = new SortedMap<string, ImmutableTree<null>>(\n      stringCompare\n    );\n  }\n  return emptyChildrenSingleton;\n};\n\n/**\n * A tree with immutable elements.\n */\nexport class ImmutableTree<T> {\n  static fromObject<T>(obj: { [k: string]: T }): ImmutableTree<T> {\n    let tree: ImmutableTree<T> = new ImmutableTree<T>(null);\n    each(obj, (childPath: string, childSnap: T) => {\n      tree = tree.set(new Path(childPath), childSnap);\n    });\n    return tree;\n  }\n\n  constructor(\n    public readonly value: T | null,\n    public readonly children: SortedMap<\n      string,\n      ImmutableTree<T>\n    > = EmptyChildren()\n  ) {}\n\n  /**\n   * True if the value is empty and there are no children\n   */\n  isEmpty(): boolean {\n    return this.value === null && this.children.isEmpty();\n  }\n\n  /**\n   * Given a path and predicate, return the first node and the path to that node\n   * where the predicate returns true.\n   *\n   * TODO Do a perf test -- If we're creating a bunch of `{path: value:}`\n   * objects on the way back out, it may be better to pass down a pathSoFar obj.\n   *\n   * @param relativePath - The remainder of the path\n   * @param predicate - The predicate to satisfy to return a node\n   */\n  findRootMostMatchingPathAndValue(\n    relativePath: Path,\n    predicate: (a: T) => boolean\n  ): { path: Path; value: T } | null {\n    if (this.value != null && predicate(this.value)) {\n      return { path: newEmptyPath(), value: this.value };\n    } else {\n      if (pathIsEmpty(relativePath)) {\n        return null;\n      } else {\n        const front = pathGetFront(relativePath);\n        const child = this.children.get(front);\n        if (child !== null) {\n          const childExistingPathAndValue =\n            child.findRootMostMatchingPathAndValue(\n              pathPopFront(relativePath),\n              predicate\n            );\n          if (childExistingPathAndValue != null) {\n            const fullPath = pathChild(\n              new Path(front),\n              childExistingPathAndValue.path\n            );\n            return { path: fullPath, value: childExistingPathAndValue.value };\n          } else {\n            return null;\n          }\n        } else {\n          return null;\n        }\n      }\n    }\n  }\n\n  /**\n   * Find, if it exists, the shortest subpath of the given path that points a defined\n   * value in the tree\n   */\n  findRootMostValueAndPath(\n    relativePath: Path\n  ): { path: Path; value: T } | null {\n    return this.findRootMostMatchingPathAndValue(relativePath, () => true);\n  }\n\n  /**\n   * @returns The subtree at the given path\n   */\n  subtree(relativePath: Path): ImmutableTree<T> {\n    if (pathIsEmpty(relativePath)) {\n      return this;\n    } else {\n      const front = pathGetFront(relativePath);\n      const childTree = this.children.get(front);\n      if (childTree !== null) {\n        return childTree.subtree(pathPopFront(relativePath));\n      } else {\n        return new ImmutableTree<T>(null);\n      }\n    }\n  }\n\n  /**\n   * Sets a value at the specified path.\n   *\n   * @param relativePath - Path to set value at.\n   * @param toSet - Value to set.\n   * @returns Resulting tree.\n   */\n  set(relativePath: Path, toSet: T | null): ImmutableTree<T> {\n    if (pathIsEmpty(relativePath)) {\n      return new ImmutableTree(toSet, this.children);\n    } else {\n      const front = pathGetFront(relativePath);\n      const child = this.children.get(front) || new ImmutableTree<T>(null);\n      const newChild = child.set(pathPopFront(relativePath), toSet);\n      const newChildren = this.children.insert(front, newChild);\n      return new ImmutableTree(this.value, newChildren);\n    }\n  }\n\n  /**\n   * Removes the value at the specified path.\n   *\n   * @param relativePath - Path to value to remove.\n   * @returns Resulting tree.\n   */\n  remove(relativePath: Path): ImmutableTree<T> {\n    if (pathIsEmpty(relativePath)) {\n      if (this.children.isEmpty()) {\n        return new ImmutableTree<T>(null);\n      } else {\n        return new ImmutableTree(null, this.children);\n      }\n    } else {\n      const front = pathGetFront(relativePath);\n      const child = this.children.get(front);\n      if (child) {\n        const newChild = child.remove(pathPopFront(relativePath));\n        let newChildren;\n        if (newChild.isEmpty()) {\n          newChildren = this.children.remove(front);\n        } else {\n          newChildren = this.children.insert(front, newChild);\n        }\n        if (this.value === null && newChildren.isEmpty()) {\n          return new ImmutableTree<T>(null);\n        } else {\n          return new ImmutableTree(this.value, newChildren);\n        }\n      } else {\n        return this;\n      }\n    }\n  }\n\n  /**\n   * Gets a value from the tree.\n   *\n   * @param relativePath - Path to get value for.\n   * @returns Value at path, or null.\n   */\n  get(relativePath: Path): T | null {\n    if (pathIsEmpty(relativePath)) {\n      return this.value;\n    } else {\n      const front = pathGetFront(relativePath);\n      const child = this.children.get(front);\n      if (child) {\n        return child.get(pathPopFront(relativePath));\n      } else {\n        return null;\n      }\n    }\n  }\n\n  /**\n   * Replace the subtree at the specified path with the given new tree.\n   *\n   * @param relativePath - Path to replace subtree for.\n   * @param newTree - New tree.\n   * @returns Resulting tree.\n   */\n  setTree(relativePath: Path, newTree: ImmutableTree<T>): ImmutableTree<T> {\n    if (pathIsEmpty(relativePath)) {\n      return newTree;\n    } else {\n      const front = pathGetFront(relativePath);\n      const child = this.children.get(front) || new ImmutableTree<T>(null);\n      const newChild = child.setTree(pathPopFront(relativePath), newTree);\n      let newChildren;\n      if (newChild.isEmpty()) {\n        newChildren = this.children.remove(front);\n      } else {\n        newChildren = this.children.insert(front, newChild);\n      }\n      return new ImmutableTree(this.value, newChildren);\n    }\n  }\n\n  /**\n   * Performs a depth first fold on this tree. Transforms a tree into a single\n   * value, given a function that operates on the path to a node, an optional\n   * current value, and a map of child names to folded subtrees\n   */\n  fold<V>(fn: (path: Path, value: T, children: { [k: string]: V }) => V): V {\n    return this.fold_(newEmptyPath(), fn);\n  }\n\n  /**\n   * Recursive helper for public-facing fold() method\n   */\n  private fold_<V>(\n    pathSoFar: Path,\n    fn: (path: Path, value: T | null, children: { [k: string]: V }) => V\n  ): V {\n    const accum: { [k: string]: V } = {};\n    this.children.inorderTraversal(\n      (childKey: string, childTree: ImmutableTree<T>) => {\n        accum[childKey] = childTree.fold_(pathChild(pathSoFar, childKey), fn);\n      }\n    );\n    return fn(pathSoFar, this.value, accum);\n  }\n\n  /**\n   * Find the first matching value on the given path. Return the result of applying f to it.\n   */\n  findOnPath<V>(path: Path, f: (path: Path, value: T) => V | null): V | null {\n    return this.findOnPath_(path, newEmptyPath(), f);\n  }\n\n  private findOnPath_<V>(\n    pathToFollow: Path,\n    pathSoFar: Path,\n    f: (path: Path, value: T) => V | null\n  ): V | null {\n    const result = this.value ? f(pathSoFar, this.value) : false;\n    if (result) {\n      return result;\n    } else {\n      if (pathIsEmpty(pathToFollow)) {\n        return null;\n      } else {\n        const front = pathGetFront(pathToFollow)!;\n        const nextChild = this.children.get(front);\n        if (nextChild) {\n          return nextChild.findOnPath_(\n            pathPopFront(pathToFollow),\n            pathChild(pathSoFar, front),\n            f\n          );\n        } else {\n          return null;\n        }\n      }\n    }\n  }\n\n  foreachOnPath(\n    path: Path,\n    f: (path: Path, value: T) => void\n  ): ImmutableTree<T> {\n    return this.foreachOnPath_(path, newEmptyPath(), f);\n  }\n\n  private foreachOnPath_(\n    pathToFollow: Path,\n    currentRelativePath: Path,\n    f: (path: Path, value: T) => void\n  ): ImmutableTree<T> {\n    if (pathIsEmpty(pathToFollow)) {\n      return this;\n    } else {\n      if (this.value) {\n        f(currentRelativePath, this.value);\n      }\n      const front = pathGetFront(pathToFollow);\n      const nextChild = this.children.get(front);\n      if (nextChild) {\n        return nextChild.foreachOnPath_(\n          pathPopFront(pathToFollow),\n          pathChild(currentRelativePath, front),\n          f\n        );\n      } else {\n        return new ImmutableTree<T>(null);\n      }\n    }\n  }\n\n  /**\n   * Calls the given function for each node in the tree that has a value.\n   *\n   * @param f - A function to be called with the path from the root of the tree to\n   * a node, and the value at that node. Called in depth-first order.\n   */\n  foreach(f: (path: Path, value: T) => void) {\n    this.foreach_(newEmptyPath(), f);\n  }\n\n  private foreach_(\n    currentRelativePath: Path,\n    f: (path: Path, value: T) => void\n  ) {\n    this.children.inorderTraversal((childName, childTree) => {\n      childTree.foreach_(pathChild(currentRelativePath, childName), f);\n    });\n    if (this.value) {\n      f(currentRelativePath, this.value);\n    }\n  }\n\n  foreachChild(f: (name: string, value: T) => void) {\n    this.children.inorderTraversal(\n      (childName: string, childTree: ImmutableTree<T>) => {\n        if (childTree.value) {\n          f(childName, childTree.value);\n        }\n      }\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { NamedNode, Node } from './snap/Node';\nimport { ImmutableTree } from './util/ImmutableTree';\nimport {\n  newEmptyPath,\n  newRelativePath,\n  Path,\n  pathChild,\n  pathIsEmpty\n} from './util/Path';\nimport { each } from './util/util';\n\n/**\n * This class holds a collection of writes that can be applied to nodes in unison. It abstracts away the logic with\n * dealing with priority writes and multiple nested writes. At any given path there is only allowed to be one write\n * modifying that path. Any write to an existing path or shadowing an existing path will modify that existing write\n * to reflect the write added.\n */\nexport class CompoundWrite {\n  constructor(public writeTree_: ImmutableTree<Node>) {}\n\n  static empty(): CompoundWrite {\n    return new CompoundWrite(new ImmutableTree(null));\n  }\n}\n\nexport function compoundWriteAddWrite(\n  compoundWrite: CompoundWrite,\n  path: Path,\n  node: Node\n): CompoundWrite {\n  if (pathIsEmpty(path)) {\n    return new CompoundWrite(new ImmutableTree(node));\n  } else {\n    const rootmost = compoundWrite.writeTree_.findRootMostValueAndPath(path);\n    if (rootmost != null) {\n      const rootMostPath = rootmost.path;\n      let value = rootmost.value;\n      const relativePath = newRelativePath(rootMostPath, path);\n      value = value.updateChild(relativePath, node);\n      return new CompoundWrite(\n        compoundWrite.writeTree_.set(rootMostPath, value)\n      );\n    } else {\n      const subtree = new ImmutableTree(node);\n      const newWriteTree = compoundWrite.writeTree_.setTree(path, subtree);\n      return new CompoundWrite(newWriteTree);\n    }\n  }\n}\n\nexport function compoundWriteAddWrites(\n  compoundWrite: CompoundWrite,\n  path: Path,\n  updates: { [name: string]: Node }\n): CompoundWrite {\n  let newWrite = compoundWrite;\n  each(updates, (childKey: string, node: Node) => {\n    newWrite = compoundWriteAddWrite(newWrite, pathChild(path, childKey), node);\n  });\n  return newWrite;\n}\n\n/**\n * Will remove a write at the given path and deeper paths. This will <em>not</em> modify a write at a higher\n * location, which must be removed by calling this method with that path.\n *\n * @param compoundWrite - The CompoundWrite to remove.\n * @param path - The path at which a write and all deeper writes should be removed\n * @returns The new CompoundWrite with the removed path\n */\nexport function compoundWriteRemoveWrite(\n  compoundWrite: CompoundWrite,\n  path: Path\n): CompoundWrite {\n  if (pathIsEmpty(path)) {\n    return CompoundWrite.empty();\n  } else {\n    const newWriteTree = compoundWrite.writeTree_.setTree(\n      path,\n      new ImmutableTree<Node>(null)\n    );\n    return new CompoundWrite(newWriteTree);\n  }\n}\n\n/**\n * Returns whether this CompoundWrite will fully overwrite a node at a given location and can therefore be\n * considered \"complete\".\n *\n * @param compoundWrite - The CompoundWrite to check.\n * @param path - The path to check for\n * @returns Whether there is a complete write at that path\n */\nexport function compoundWriteHasCompleteWrite(\n  compoundWrite: CompoundWrite,\n  path: Path\n): boolean {\n  return compoundWriteGetCompleteNode(compoundWrite, path) != null;\n}\n\n/**\n * Returns a node for a path if and only if the node is a \"complete\" overwrite at that path. This will not aggregate\n * writes from deeper paths, but will return child nodes from a more shallow path.\n *\n * @param compoundWrite - The CompoundWrite to get the node from.\n * @param path - The path to get a complete write\n * @returns The node if complete at that path, or null otherwise.\n */\nexport function compoundWriteGetCompleteNode(\n  compoundWrite: CompoundWrite,\n  path: Path\n): Node | null {\n  const rootmost = compoundWrite.writeTree_.findRootMostValueAndPath(path);\n  if (rootmost != null) {\n    return compoundWrite.writeTree_\n      .get(rootmost.path)\n      .getChild(newRelativePath(rootmost.path, path));\n  } else {\n    return null;\n  }\n}\n\n/**\n * Returns all children that are guaranteed to be a complete overwrite.\n *\n * @param compoundWrite - The CompoundWrite to get children from.\n * @returns A list of all complete children.\n */\nexport function compoundWriteGetCompleteChildren(\n  compoundWrite: CompoundWrite\n): NamedNode[] {\n  const children: NamedNode[] = [];\n  const node = compoundWrite.writeTree_.value;\n  if (node != null) {\n    // If it's a leaf node, it has no children; so nothing to do.\n    if (!node.isLeafNode()) {\n      (node as ChildrenNode).forEachChild(\n        PRIORITY_INDEX,\n        (childName, childNode) => {\n          children.push(new NamedNode(childName, childNode));\n        }\n      );\n    }\n  } else {\n    compoundWrite.writeTree_.children.inorderTraversal(\n      (childName, childTree) => {\n        if (childTree.value != null) {\n          children.push(new NamedNode(childName, childTree.value));\n        }\n      }\n    );\n  }\n  return children;\n}\n\nexport function compoundWriteChildCompoundWrite(\n  compoundWrite: CompoundWrite,\n  path: Path\n): CompoundWrite {\n  if (pathIsEmpty(path)) {\n    return compoundWrite;\n  } else {\n    const shadowingNode = compoundWriteGetCompleteNode(compoundWrite, path);\n    if (shadowingNode != null) {\n      return new CompoundWrite(new ImmutableTree(shadowingNode));\n    } else {\n      return new CompoundWrite(compoundWrite.writeTree_.subtree(path));\n    }\n  }\n}\n\n/**\n * Returns true if this CompoundWrite is empty and therefore does not modify any nodes.\n * @returns Whether this CompoundWrite is empty\n */\nexport function compoundWriteIsEmpty(compoundWrite: CompoundWrite): boolean {\n  return compoundWrite.writeTree_.isEmpty();\n}\n\n/**\n * Applies this CompoundWrite to a node. The node is returned with all writes from this CompoundWrite applied to the\n * node\n * @param node - The node to apply this CompoundWrite to\n * @returns The node with all writes applied\n */\nexport function compoundWriteApply(\n  compoundWrite: CompoundWrite,\n  node: Node\n): Node {\n  return applySubtreeWrite(newEmptyPath(), compoundWrite.writeTree_, node);\n}\n\nfunction applySubtreeWrite(\n  relativePath: Path,\n  writeTree: ImmutableTree<Node>,\n  node: Node\n): Node {\n  if (writeTree.value != null) {\n    // Since there a write is always a leaf, we're done here\n    return node.updateChild(relativePath, writeTree.value);\n  } else {\n    let priorityWrite = null;\n    writeTree.children.inorderTraversal((childKey, childTree) => {\n      if (childKey === '.priority') {\n        // Apply priorities at the end so we don't update priorities for either empty nodes or forget\n        // to apply priorities to empty nodes that are later filled\n        assert(\n          childTree.value !== null,\n          'Priority writes must always be leaf nodes'\n        );\n        priorityWrite = childTree.value;\n      } else {\n        node = applySubtreeWrite(\n          pathChild(relativePath, childKey),\n          childTree,\n          node\n        );\n      }\n    });\n    // If there was a priority write, we only apply it if the node is not empty\n    if (!node.getChild(relativePath).isEmpty() && priorityWrite !== null) {\n      node = node.updateChild(\n        pathChild(relativePath, '.priority'),\n        priorityWrite\n      );\n    }\n    return node;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, assertionError, safeGet } from '@firebase/util';\n\nimport {\n  CompoundWrite,\n  compoundWriteAddWrite,\n  compoundWriteAddWrites,\n  compoundWriteApply,\n  compoundWriteChildCompoundWrite,\n  compoundWriteGetCompleteChildren,\n  compoundWriteGetCompleteNode,\n  compoundWriteHasCompleteWrite,\n  compoundWriteIsEmpty,\n  compoundWriteRemoveWrite\n} from './CompoundWrite';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Index } from './snap/indexes/Index';\nimport { PRIORITY_INDEX } from './snap/indexes/PriorityIndex';\nimport { NamedNode, Node } from './snap/Node';\nimport {\n  newEmptyPath,\n  newRelativePath,\n  Path,\n  pathChild,\n  pathContains,\n  pathGetFront,\n  pathIsEmpty,\n  pathPopFront\n} from './util/Path';\nimport { each } from './util/util';\nimport { CacheNode } from './view/CacheNode';\n\n/**\n * Defines a single user-initiated write operation. May be the result of a set(), transaction(), or update() call. In\n * the case of a set() or transaction, snap wil be non-null.  In the case of an update(), children will be non-null.\n */\nexport interface WriteRecord {\n  writeId: number;\n  path: Path;\n  snap?: Node | null;\n  children?: { [k: string]: Node } | null;\n  visible: boolean;\n}\n\n/**\n * Create a new WriteTreeRef for the given path. For use with a new sync point at the given path.\n *\n */\nexport function writeTreeChildWrites(\n  writeTree: WriteTree,\n  path: Path\n): WriteTreeRef {\n  return newWriteTreeRef(path, writeTree);\n}\n\n/**\n * Record a new overwrite from user code.\n *\n * @param visible - This is set to false by some transactions. It should be excluded from event caches\n */\nexport function writeTreeAddOverwrite(\n  writeTree: WriteTree,\n  path: Path,\n  snap: Node,\n  writeId: number,\n  visible?: boolean\n) {\n  assert(\n    writeId > writeTree.lastWriteId,\n    'Stacking an older write on top of newer ones'\n  );\n  if (visible === undefined) {\n    visible = true;\n  }\n  writeTree.allWrites.push({\n    path,\n    snap,\n    writeId,\n    visible\n  });\n\n  if (visible) {\n    writeTree.visibleWrites = compoundWriteAddWrite(\n      writeTree.visibleWrites,\n      path,\n      snap\n    );\n  }\n  writeTree.lastWriteId = writeId;\n}\n\n/**\n * Record a new merge from user code.\n */\nexport function writeTreeAddMerge(\n  writeTree: WriteTree,\n  path: Path,\n  changedChildren: { [k: string]: Node },\n  writeId: number\n) {\n  assert(\n    writeId > writeTree.lastWriteId,\n    'Stacking an older merge on top of newer ones'\n  );\n  writeTree.allWrites.push({\n    path,\n    children: changedChildren,\n    writeId,\n    visible: true\n  });\n\n  writeTree.visibleWrites = compoundWriteAddWrites(\n    writeTree.visibleWrites,\n    path,\n    changedChildren\n  );\n  writeTree.lastWriteId = writeId;\n}\n\nexport function writeTreeGetWrite(\n  writeTree: WriteTree,\n  writeId: number\n): WriteRecord | null {\n  for (let i = 0; i < writeTree.allWrites.length; i++) {\n    const record = writeTree.allWrites[i];\n    if (record.writeId === writeId) {\n      return record;\n    }\n  }\n  return null;\n}\n\n/**\n * Remove a write (either an overwrite or merge) that has been successfully acknowledge by the server. Recalculates\n * the tree if necessary.  We return true if it may have been visible, meaning views need to reevaluate.\n *\n * @returns true if the write may have been visible (meaning we'll need to reevaluate / raise\n * events as a result).\n */\nexport function writeTreeRemoveWrite(\n  writeTree: WriteTree,\n  writeId: number\n): boolean {\n  // Note: disabling this check. It could be a transaction that preempted another transaction, and thus was applied\n  // out of order.\n  //const validClear = revert || this.allWrites_.length === 0 || writeId <= this.allWrites_[0].writeId;\n  //assert(validClear, \"Either we don't have this write, or it's the first one in the queue\");\n\n  const idx = writeTree.allWrites.findIndex(s => {\n    return s.writeId === writeId;\n  });\n  assert(idx >= 0, 'removeWrite called with nonexistent writeId.');\n  const writeToRemove = writeTree.allWrites[idx];\n  writeTree.allWrites.splice(idx, 1);\n\n  let removedWriteWasVisible = writeToRemove.visible;\n  let removedWriteOverlapsWithOtherWrites = false;\n\n  let i = writeTree.allWrites.length - 1;\n\n  while (removedWriteWasVisible && i >= 0) {\n    const currentWrite = writeTree.allWrites[i];\n    if (currentWrite.visible) {\n      if (\n        i >= idx &&\n        writeTreeRecordContainsPath_(currentWrite, writeToRemove.path)\n      ) {\n        // The removed write was completely shadowed by a subsequent write.\n        removedWriteWasVisible = false;\n      } else if (pathContains(writeToRemove.path, currentWrite.path)) {\n        // Either we're covering some writes or they're covering part of us (depending on which came first).\n        removedWriteOverlapsWithOtherWrites = true;\n      }\n    }\n    i--;\n  }\n\n  if (!removedWriteWasVisible) {\n    return false;\n  } else if (removedWriteOverlapsWithOtherWrites) {\n    // There's some shadowing going on. Just rebuild the visible writes from scratch.\n    writeTreeResetTree_(writeTree);\n    return true;\n  } else {\n    // There's no shadowing.  We can safely just remove the write(s) from visibleWrites.\n    if (writeToRemove.snap) {\n      writeTree.visibleWrites = compoundWriteRemoveWrite(\n        writeTree.visibleWrites,\n        writeToRemove.path\n      );\n    } else {\n      const children = writeToRemove.children;\n      each(children, (childName: string) => {\n        writeTree.visibleWrites = compoundWriteRemoveWrite(\n          writeTree.visibleWrites,\n          pathChild(writeToRemove.path, childName)\n        );\n      });\n    }\n    return true;\n  }\n}\n\nfunction writeTreeRecordContainsPath_(\n  writeRecord: WriteRecord,\n  path: Path\n): boolean {\n  if (writeRecord.snap) {\n    return pathContains(writeRecord.path, path);\n  } else {\n    for (const childName in writeRecord.children) {\n      if (\n        writeRecord.children.hasOwnProperty(childName) &&\n        pathContains(pathChild(writeRecord.path, childName), path)\n      ) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\n/**\n * Re-layer the writes and merges into a tree so we can efficiently calculate event snapshots\n */\nfunction writeTreeResetTree_(writeTree: WriteTree) {\n  writeTree.visibleWrites = writeTreeLayerTree_(\n    writeTree.allWrites,\n    writeTreeDefaultFilter_,\n    newEmptyPath()\n  );\n  if (writeTree.allWrites.length > 0) {\n    writeTree.lastWriteId =\n      writeTree.allWrites[writeTree.allWrites.length - 1].writeId;\n  } else {\n    writeTree.lastWriteId = -1;\n  }\n}\n\n/**\n * The default filter used when constructing the tree. Keep everything that's visible.\n */\nfunction writeTreeDefaultFilter_(write: WriteRecord) {\n  return write.visible;\n}\n\n/**\n * Static method. Given an array of WriteRecords, a filter for which ones to include, and a path, construct the tree of\n * event data at that path.\n */\nfunction writeTreeLayerTree_(\n  writes: WriteRecord[],\n  filter: (w: WriteRecord) => boolean,\n  treeRoot: Path\n): CompoundWrite {\n  let compoundWrite = CompoundWrite.empty();\n  for (let i = 0; i < writes.length; ++i) {\n    const write = writes[i];\n    // Theory, a later set will either:\n    // a) abort a relevant transaction, so no need to worry about excluding it from calculating that transaction\n    // b) not be relevant to a transaction (separate branch), so again will not affect the data for that transaction\n    if (filter(write)) {\n      const writePath = write.path;\n      let relativePath: Path;\n      if (write.snap) {\n        if (pathContains(treeRoot, writePath)) {\n          relativePath = newRelativePath(treeRoot, writePath);\n          compoundWrite = compoundWriteAddWrite(\n            compoundWrite,\n            relativePath,\n            write.snap\n          );\n        } else if (pathContains(writePath, treeRoot)) {\n          relativePath = newRelativePath(writePath, treeRoot);\n          compoundWrite = compoundWriteAddWrite(\n            compoundWrite,\n            newEmptyPath(),\n            write.snap.getChild(relativePath)\n          );\n        } else {\n          // There is no overlap between root path and write path, ignore write\n        }\n      } else if (write.children) {\n        if (pathContains(treeRoot, writePath)) {\n          relativePath = newRelativePath(treeRoot, writePath);\n          compoundWrite = compoundWriteAddWrites(\n            compoundWrite,\n            relativePath,\n            write.children\n          );\n        } else if (pathContains(writePath, treeRoot)) {\n          relativePath = newRelativePath(writePath, treeRoot);\n          if (pathIsEmpty(relativePath)) {\n            compoundWrite = compoundWriteAddWrites(\n              compoundWrite,\n              newEmptyPath(),\n              write.children\n            );\n          } else {\n            const child = safeGet(write.children, pathGetFront(relativePath));\n            if (child) {\n              // There exists a child in this node that matches the root path\n              const deepNode = child.getChild(pathPopFront(relativePath));\n              compoundWrite = compoundWriteAddWrite(\n                compoundWrite,\n                newEmptyPath(),\n                deepNode\n              );\n            }\n          }\n        } else {\n          // There is no overlap between root path and write path, ignore write\n        }\n      } else {\n        throw assertionError('WriteRecord should have .snap or .children');\n      }\n    }\n  }\n  return compoundWrite;\n}\n\n/**\n * Return a complete snapshot for the given path if there's visible write data at that path, else null.\n * No server data is considered.\n *\n */\nexport function writeTreeGetCompleteWriteData(\n  writeTree: WriteTree,\n  path: Path\n): Node | null {\n  return compoundWriteGetCompleteNode(writeTree.visibleWrites, path);\n}\n\n/**\n * Given optional, underlying server data, and an optional set of constraints (exclude some sets, include hidden\n * writes), attempt to calculate a complete snapshot for the given path\n *\n * @param writeIdsToExclude - An optional set to be excluded\n * @param includeHiddenWrites - Defaults to false, whether or not to layer on writes with visible set to false\n */\nexport function writeTreeCalcCompleteEventCache(\n  writeTree: WriteTree,\n  treePath: Path,\n  completeServerCache: Node | null,\n  writeIdsToExclude?: number[],\n  includeHiddenWrites?: boolean\n): Node | null {\n  if (!writeIdsToExclude && !includeHiddenWrites) {\n    const shadowingNode = compoundWriteGetCompleteNode(\n      writeTree.visibleWrites,\n      treePath\n    );\n    if (shadowingNode != null) {\n      return shadowingNode;\n    } else {\n      const subMerge = compoundWriteChildCompoundWrite(\n        writeTree.visibleWrites,\n        treePath\n      );\n      if (compoundWriteIsEmpty(subMerge)) {\n        return completeServerCache;\n      } else if (\n        completeServerCache == null &&\n        !compoundWriteHasCompleteWrite(subMerge, newEmptyPath())\n      ) {\n        // We wouldn't have a complete snapshot, since there's no underlying data and no complete shadow\n        return null;\n      } else {\n        const layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\n        return compoundWriteApply(subMerge, layeredCache);\n      }\n    }\n  } else {\n    const merge = compoundWriteChildCompoundWrite(\n      writeTree.visibleWrites,\n      treePath\n    );\n    if (!includeHiddenWrites && compoundWriteIsEmpty(merge)) {\n      return completeServerCache;\n    } else {\n      // If the server cache is null, and we don't have a complete cache, we need to return null\n      if (\n        !includeHiddenWrites &&\n        completeServerCache == null &&\n        !compoundWriteHasCompleteWrite(merge, newEmptyPath())\n      ) {\n        return null;\n      } else {\n        const filter = function (write: WriteRecord) {\n          return (\n            (write.visible || includeHiddenWrites) &&\n            (!writeIdsToExclude ||\n              !~writeIdsToExclude.indexOf(write.writeId)) &&\n            (pathContains(write.path, treePath) ||\n              pathContains(treePath, write.path))\n          );\n        };\n        const mergeAtPath = writeTreeLayerTree_(\n          writeTree.allWrites,\n          filter,\n          treePath\n        );\n        const layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\n        return compoundWriteApply(mergeAtPath, layeredCache);\n      }\n    }\n  }\n}\n\n/**\n * With optional, underlying server data, attempt to return a children node of children that we have complete data for.\n * Used when creating new views, to pre-fill their complete event children snapshot.\n */\nexport function writeTreeCalcCompleteEventChildren(\n  writeTree: WriteTree,\n  treePath: Path,\n  completeServerChildren: ChildrenNode | null\n) {\n  let completeChildren = ChildrenNode.EMPTY_NODE as Node;\n  const topLevelSet = compoundWriteGetCompleteNode(\n    writeTree.visibleWrites,\n    treePath\n  );\n  if (topLevelSet) {\n    if (!topLevelSet.isLeafNode()) {\n      // we're shadowing everything. Return the children.\n      topLevelSet.forEachChild(PRIORITY_INDEX, (childName, childSnap) => {\n        completeChildren = completeChildren.updateImmediateChild(\n          childName,\n          childSnap\n        );\n      });\n    }\n    return completeChildren;\n  } else if (completeServerChildren) {\n    // Layer any children we have on top of this\n    // We know we don't have a top-level set, so just enumerate existing children\n    const merge = compoundWriteChildCompoundWrite(\n      writeTree.visibleWrites,\n      treePath\n    );\n    completeServerChildren.forEachChild(\n      PRIORITY_INDEX,\n      (childName, childNode) => {\n        const node = compoundWriteApply(\n          compoundWriteChildCompoundWrite(merge, new Path(childName)),\n          childNode\n        );\n        completeChildren = completeChildren.updateImmediateChild(\n          childName,\n          node\n        );\n      }\n    );\n    // Add any complete children we have from the set\n    compoundWriteGetCompleteChildren(merge).forEach(namedNode => {\n      completeChildren = completeChildren.updateImmediateChild(\n        namedNode.name,\n        namedNode.node\n      );\n    });\n    return completeChildren;\n  } else {\n    // We don't have anything to layer on top of. Layer on any children we have\n    // Note that we can return an empty snap if we have a defined delete\n    const merge = compoundWriteChildCompoundWrite(\n      writeTree.visibleWrites,\n      treePath\n    );\n    compoundWriteGetCompleteChildren(merge).forEach(namedNode => {\n      completeChildren = completeChildren.updateImmediateChild(\n        namedNode.name,\n        namedNode.node\n      );\n    });\n    return completeChildren;\n  }\n}\n\n/**\n * Given that the underlying server data has updated, determine what, if anything, needs to be\n * applied to the event cache.\n *\n * Possibilities:\n *\n * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\n *\n * 2. Some write is completely shadowing. No events to be raised\n *\n * 3. Is partially shadowed. Events\n *\n * Either existingEventSnap or existingServerSnap must exist\n */\nexport function writeTreeCalcEventCacheAfterServerOverwrite(\n  writeTree: WriteTree,\n  treePath: Path,\n  childPath: Path,\n  existingEventSnap: Node | null,\n  existingServerSnap: Node | null\n): Node | null {\n  assert(\n    existingEventSnap || existingServerSnap,\n    'Either existingEventSnap or existingServerSnap must exist'\n  );\n  const path = pathChild(treePath, childPath);\n  if (compoundWriteHasCompleteWrite(writeTree.visibleWrites, path)) {\n    // At this point we can probably guarantee that we're in case 2, meaning no events\n    // May need to check visibility while doing the findRootMostValueAndPath call\n    return null;\n  } else {\n    // No complete shadowing. We're either partially shadowing or not shadowing at all.\n    const childMerge = compoundWriteChildCompoundWrite(\n      writeTree.visibleWrites,\n      path\n    );\n    if (compoundWriteIsEmpty(childMerge)) {\n      // We're not shadowing at all. Case 1\n      return existingServerSnap.getChild(childPath);\n    } else {\n      // This could be more efficient if the serverNode + updates doesn't change the eventSnap\n      // However this is tricky to find out, since user updates don't necessary change the server\n      // snap, e.g. priority updates on empty nodes, or deep deletes. Another special case is if the server\n      // adds nodes, but doesn't change any existing writes. It is therefore not enough to\n      // only check if the updates change the serverNode.\n      // Maybe check if the merge tree contains these special cases and only do a full overwrite in that case?\n      return compoundWriteApply(\n        childMerge,\n        existingServerSnap.getChild(childPath)\n      );\n    }\n  }\n}\n\n/**\n * Returns a complete child for a given server snap after applying all user writes or null if there is no\n * complete child for this ChildKey.\n */\nexport function writeTreeCalcCompleteChild(\n  writeTree: WriteTree,\n  treePath: Path,\n  childKey: string,\n  existingServerSnap: CacheNode\n): Node | null {\n  const path = pathChild(treePath, childKey);\n  const shadowingNode = compoundWriteGetCompleteNode(\n    writeTree.visibleWrites,\n    path\n  );\n  if (shadowingNode != null) {\n    return shadowingNode;\n  } else {\n    if (existingServerSnap.isCompleteForChild(childKey)) {\n      const childMerge = compoundWriteChildCompoundWrite(\n        writeTree.visibleWrites,\n        path\n      );\n      return compoundWriteApply(\n        childMerge,\n        existingServerSnap.getNode().getImmediateChild(childKey)\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\n/**\n * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\n * a higher path, this will return the child of that write relative to the write and this path.\n * Returns null if there is no write at this path.\n */\nexport function writeTreeShadowingWrite(\n  writeTree: WriteTree,\n  path: Path\n): Node | null {\n  return compoundWriteGetCompleteNode(writeTree.visibleWrites, path);\n}\n\n/**\n * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\n * the window, but may now be in the window.\n */\nexport function writeTreeCalcIndexedSlice(\n  writeTree: WriteTree,\n  treePath: Path,\n  completeServerData: Node | null,\n  startPost: NamedNode,\n  count: number,\n  reverse: boolean,\n  index: Index\n): NamedNode[] {\n  let toIterate: Node;\n  const merge = compoundWriteChildCompoundWrite(\n    writeTree.visibleWrites,\n    treePath\n  );\n  const shadowingNode = compoundWriteGetCompleteNode(merge, newEmptyPath());\n  if (shadowingNode != null) {\n    toIterate = shadowingNode;\n  } else if (completeServerData != null) {\n    toIterate = compoundWriteApply(merge, completeServerData);\n  } else {\n    // no children to iterate on\n    return [];\n  }\n  toIterate = toIterate.withIndex(index);\n  if (!toIterate.isEmpty() && !toIterate.isLeafNode()) {\n    const nodes = [];\n    const cmp = index.getCompare();\n    const iter = reverse\n      ? (toIterate as ChildrenNode).getReverseIteratorFrom(startPost, index)\n      : (toIterate as ChildrenNode).getIteratorFrom(startPost, index);\n    let next = iter.getNext();\n    while (next && nodes.length < count) {\n      if (cmp(next, startPost) !== 0) {\n        nodes.push(next);\n      }\n      next = iter.getNext();\n    }\n    return nodes;\n  } else {\n    return [];\n  }\n}\n\nexport function newWriteTree(): WriteTree {\n  return {\n    visibleWrites: CompoundWrite.empty(),\n    allWrites: [],\n    lastWriteId: -1\n  };\n}\n\n/**\n * WriteTree tracks all pending user-initiated writes and has methods to calculate the result of merging them\n * with underlying server data (to create \"event cache\" data).  Pending writes are added with addOverwrite()\n * and addMerge(), and removed with removeWrite().\n */\nexport interface WriteTree {\n  /**\n   * A tree tracking the result of applying all visible writes.  This does not include transactions with\n   * applyLocally=false or writes that are completely shadowed by other writes.\n   */\n  visibleWrites: CompoundWrite;\n\n  /**\n   * A list of all pending writes, regardless of visibility and shadowed-ness.  Used to calculate arbitrary\n   * sets of the changed data, such as hidden writes (from transactions) or changes with certain writes excluded (also\n   * used by transactions).\n   */\n  allWrites: WriteRecord[];\n\n  lastWriteId: number;\n}\n\n/**\n * If possible, returns a complete event cache, using the underlying server data if possible. In addition, can be used\n * to get a cache that includes hidden writes, and excludes arbitrary writes. Note that customizing the returned node\n * can lead to a more expensive calculation.\n *\n * @param writeIdsToExclude - Optional writes to exclude.\n * @param includeHiddenWrites - Defaults to false, whether or not to layer on writes with visible set to false\n */\nexport function writeTreeRefCalcCompleteEventCache(\n  writeTreeRef: WriteTreeRef,\n  completeServerCache: Node | null,\n  writeIdsToExclude?: number[],\n  includeHiddenWrites?: boolean\n): Node | null {\n  return writeTreeCalcCompleteEventCache(\n    writeTreeRef.writeTree,\n    writeTreeRef.treePath,\n    completeServerCache,\n    writeIdsToExclude,\n    includeHiddenWrites\n  );\n}\n\n/**\n * If possible, returns a children node containing all of the complete children we have data for. The returned data is a\n * mix of the given server data and write data.\n *\n */\nexport function writeTreeRefCalcCompleteEventChildren(\n  writeTreeRef: WriteTreeRef,\n  completeServerChildren: ChildrenNode | null\n): ChildrenNode {\n  return writeTreeCalcCompleteEventChildren(\n    writeTreeRef.writeTree,\n    writeTreeRef.treePath,\n    completeServerChildren\n  ) as ChildrenNode;\n}\n\n/**\n * Given that either the underlying server data has updated or the outstanding writes have updated, determine what,\n * if anything, needs to be applied to the event cache.\n *\n * Possibilities:\n *\n * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\n *\n * 2. Some write is completely shadowing. No events to be raised\n *\n * 3. Is partially shadowed. Events should be raised\n *\n * Either existingEventSnap or existingServerSnap must exist, this is validated via an assert\n *\n *\n */\nexport function writeTreeRefCalcEventCacheAfterServerOverwrite(\n  writeTreeRef: WriteTreeRef,\n  path: Path,\n  existingEventSnap: Node | null,\n  existingServerSnap: Node | null\n): Node | null {\n  return writeTreeCalcEventCacheAfterServerOverwrite(\n    writeTreeRef.writeTree,\n    writeTreeRef.treePath,\n    path,\n    existingEventSnap,\n    existingServerSnap\n  );\n}\n\n/**\n * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\n * a higher path, this will return the child of that write relative to the write and this path.\n * Returns null if there is no write at this path.\n *\n */\nexport function writeTreeRefShadowingWrite(\n  writeTreeRef: WriteTreeRef,\n  path: Path\n): Node | null {\n  return writeTreeShadowingWrite(\n    writeTreeRef.writeTree,\n    pathChild(writeTreeRef.treePath, path)\n  );\n}\n\n/**\n * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\n * the window, but may now be in the window\n */\nexport function writeTreeRefCalcIndexedSlice(\n  writeTreeRef: WriteTreeRef,\n  completeServerData: Node | null,\n  startPost: NamedNode,\n  count: number,\n  reverse: boolean,\n  index: Index\n): NamedNode[] {\n  return writeTreeCalcIndexedSlice(\n    writeTreeRef.writeTree,\n    writeTreeRef.treePath,\n    completeServerData,\n    startPost,\n    count,\n    reverse,\n    index\n  );\n}\n\n/**\n * Returns a complete child for a given server snap after applying all user writes or null if there is no\n * complete child for this ChildKey.\n */\nexport function writeTreeRefCalcCompleteChild(\n  writeTreeRef: WriteTreeRef,\n  childKey: string,\n  existingServerCache: CacheNode\n): Node | null {\n  return writeTreeCalcCompleteChild(\n    writeTreeRef.writeTree,\n    writeTreeRef.treePath,\n    childKey,\n    existingServerCache\n  );\n}\n\n/**\n * Return a WriteTreeRef for a child.\n */\nexport function writeTreeRefChild(\n  writeTreeRef: WriteTreeRef,\n  childName: string\n): WriteTreeRef {\n  return newWriteTreeRef(\n    pathChild(writeTreeRef.treePath, childName),\n    writeTreeRef.writeTree\n  );\n}\n\nexport function newWriteTreeRef(\n  path: Path,\n  writeTree: WriteTree\n): WriteTreeRef {\n  return {\n    treePath: path,\n    writeTree\n  };\n}\n\n/**\n * A WriteTreeRef wraps a WriteTree and a path, for convenient access to a particular subtree.  All of the methods\n * just proxy to the underlying WriteTree.\n *\n */\nexport interface WriteTreeRef {\n  /**\n   * The path to this particular write tree ref. Used for calling methods on writeTree_ while exposing a simpler\n   * interface to callers.\n   */\n  readonly treePath: Path;\n\n  /**\n   * * A reference to the actual tree of write data. All methods are pass-through to the tree, but with the appropriate\n   * path prefixed.\n   *\n   * This lets us make cheap references to points in the tree for sync points without having to copy and maintain all of\n   * the data.\n   */\n  readonly writeTree: WriteTree;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, assertionError } from '@firebase/util';\n\nimport {\n  Change,\n  ChangeType,\n  changeChildAdded,\n  changeChildChanged,\n  changeChildRemoved\n} from './Change';\n\nexport class ChildChangeAccumulator {\n  private readonly changeMap: Map<string, Change> = new Map();\n\n  trackChildChange(change: Change) {\n    const type = change.type;\n    const childKey = change.childName!;\n    assert(\n      type === ChangeType.CHILD_ADDED ||\n        type === ChangeType.CHILD_CHANGED ||\n        type === ChangeType.CHILD_REMOVED,\n      'Only child changes supported for tracking'\n    );\n    assert(\n      childKey !== '.priority',\n      'Only non-priority child changes can be tracked.'\n    );\n    const oldChange = this.changeMap.get(childKey);\n    if (oldChange) {\n      const oldType = oldChange.type;\n      if (\n        type === ChangeType.CHILD_ADDED &&\n        oldType === ChangeType.CHILD_REMOVED\n      ) {\n        this.changeMap.set(\n          childKey,\n          changeChildChanged(\n            childKey,\n            change.snapshotNode,\n            oldChange.snapshotNode\n          )\n        );\n      } else if (\n        type === ChangeType.CHILD_REMOVED &&\n        oldType === ChangeType.CHILD_ADDED\n      ) {\n        this.changeMap.delete(childKey);\n      } else if (\n        type === ChangeType.CHILD_REMOVED &&\n        oldType === ChangeType.CHILD_CHANGED\n      ) {\n        this.changeMap.set(\n          childKey,\n          changeChildRemoved(childKey, oldChange.oldSnap)\n        );\n      } else if (\n        type === ChangeType.CHILD_CHANGED &&\n        oldType === ChangeType.CHILD_ADDED\n      ) {\n        this.changeMap.set(\n          childKey,\n          changeChildAdded(childKey, change.snapshotNode)\n        );\n      } else if (\n        type === ChangeType.CHILD_CHANGED &&\n        oldType === ChangeType.CHILD_CHANGED\n      ) {\n        this.changeMap.set(\n          childKey,\n          changeChildChanged(childKey, change.snapshotNode, oldChange.oldSnap)\n        );\n      } else {\n        throw assertionError(\n          'Illegal combination of changes: ' +\n            change +\n            ' occurred after ' +\n            oldChange\n        );\n      }\n    } else {\n      this.changeMap.set(childKey, change);\n    }\n  }\n\n  getChanges(): Change[] {\n    return Array.from(this.changeMap.values());\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Index } from '../snap/indexes/Index';\nimport { NamedNode, Node } from '../snap/Node';\nimport {\n  WriteTreeRef,\n  writeTreeRefCalcCompleteChild,\n  writeTreeRefCalcIndexedSlice\n} from '../WriteTree';\n\nimport { CacheNode } from './CacheNode';\nimport { ViewCache, viewCacheGetCompleteServerSnap } from './ViewCache';\n\n/**\n * Since updates to filtered nodes might require nodes to be pulled in from \"outside\" the node, this interface\n * can help to get complete children that can be pulled in.\n * A class implementing this interface takes potentially multiple sources (e.g. user writes, server data from\n * other views etc.) to try it's best to get a complete child that might be useful in pulling into the view.\n *\n * @interface\n */\nexport interface CompleteChildSource {\n  getCompleteChild(childKey: string): Node | null;\n\n  getChildAfterChild(\n    index: Index,\n    child: NamedNode,\n    reverse: boolean\n  ): NamedNode | null;\n}\n\n/**\n * An implementation of CompleteChildSource that never returns any additional children\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport class NoCompleteChildSource_ implements CompleteChildSource {\n  getCompleteChild(childKey?: string): Node | null {\n    return null;\n  }\n  getChildAfterChild(\n    index?: Index,\n    child?: NamedNode,\n    reverse?: boolean\n  ): NamedNode | null {\n    return null;\n  }\n}\n\n/**\n * Singleton instance.\n */\nexport const NO_COMPLETE_CHILD_SOURCE = new NoCompleteChildSource_();\n\n/**\n * An implementation of CompleteChildSource that uses a WriteTree in addition to any other server data or\n * old event caches available to calculate complete children.\n */\nexport class WriteTreeCompleteChildSource implements CompleteChildSource {\n  constructor(\n    private writes_: WriteTreeRef,\n    private viewCache_: ViewCache,\n    private optCompleteServerCache_: Node | null = null\n  ) {}\n  getCompleteChild(childKey: string): Node | null {\n    const node = this.viewCache_.eventCache;\n    if (node.isCompleteForChild(childKey)) {\n      return node.getNode().getImmediateChild(childKey);\n    } else {\n      const serverNode =\n        this.optCompleteServerCache_ != null\n          ? new CacheNode(this.optCompleteServerCache_, true, false)\n          : this.viewCache_.serverCache;\n      return writeTreeRefCalcCompleteChild(this.writes_, childKey, serverNode);\n    }\n  }\n  getChildAfterChild(\n    index: Index,\n    child: NamedNode,\n    reverse: boolean\n  ): NamedNode | null {\n    const completeServerData =\n      this.optCompleteServerCache_ != null\n        ? this.optCompleteServerCache_\n        : viewCacheGetCompleteServerSnap(this.viewCache_);\n    const nodes = writeTreeRefCalcIndexedSlice(\n      this.writes_,\n      completeServerData,\n      child,\n      1,\n      reverse,\n      index\n    );\n    if (nodes.length === 0) {\n      return null;\n    } else {\n      return nodes[0];\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, assertionError } from '@firebase/util';\n\nimport { AckUserWrite } from '../operation/AckUserWrite';\nimport { Merge } from '../operation/Merge';\nimport { Operation, OperationType } from '../operation/Operation';\nimport { Overwrite } from '../operation/Overwrite';\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { KEY_INDEX } from '../snap/indexes/KeyIndex';\nimport { Node } from '../snap/Node';\nimport { ImmutableTree } from '../util/ImmutableTree';\nimport {\n  newEmptyPath,\n  Path,\n  pathChild,\n  pathGetBack,\n  pathGetFront,\n  pathGetLength,\n  pathIsEmpty,\n  pathParent,\n  pathPopFront\n} from '../util/Path';\nimport {\n  WriteTreeRef,\n  writeTreeRefCalcCompleteChild,\n  writeTreeRefCalcCompleteEventCache,\n  writeTreeRefCalcCompleteEventChildren,\n  writeTreeRefCalcEventCacheAfterServerOverwrite,\n  writeTreeRefShadowingWrite\n} from '../WriteTree';\n\nimport { Change, changeValue } from './Change';\nimport { ChildChangeAccumulator } from './ChildChangeAccumulator';\nimport {\n  CompleteChildSource,\n  NO_COMPLETE_CHILD_SOURCE,\n  WriteTreeCompleteChildSource\n} from './CompleteChildSource';\nimport { NodeFilter } from './filter/NodeFilter';\nimport {\n  ViewCache,\n  viewCacheGetCompleteEventSnap,\n  viewCacheGetCompleteServerSnap,\n  viewCacheUpdateEventSnap,\n  viewCacheUpdateServerSnap\n} from './ViewCache';\n\nexport interface ProcessorResult {\n  readonly viewCache: ViewCache;\n  readonly changes: Change[];\n}\n\nexport interface ViewProcessor {\n  readonly filter: NodeFilter;\n}\n\nexport function newViewProcessor(filter: NodeFilter): ViewProcessor {\n  return { filter };\n}\n\nexport function viewProcessorAssertIndexed(\n  viewProcessor: ViewProcessor,\n  viewCache: ViewCache\n): void {\n  assert(\n    viewCache.eventCache.getNode().isIndexed(viewProcessor.filter.getIndex()),\n    'Event snap not indexed'\n  );\n  assert(\n    viewCache.serverCache.getNode().isIndexed(viewProcessor.filter.getIndex()),\n    'Server snap not indexed'\n  );\n}\n\nexport function viewProcessorApplyOperation(\n  viewProcessor: ViewProcessor,\n  oldViewCache: ViewCache,\n  operation: Operation,\n  writesCache: WriteTreeRef,\n  completeCache: Node | null\n): ProcessorResult {\n  const accumulator = new ChildChangeAccumulator();\n  let newViewCache, filterServerNode;\n  if (operation.type === OperationType.OVERWRITE) {\n    const overwrite = operation as Overwrite;\n    if (overwrite.source.fromUser) {\n      newViewCache = viewProcessorApplyUserOverwrite(\n        viewProcessor,\n        oldViewCache,\n        overwrite.path,\n        overwrite.snap,\n        writesCache,\n        completeCache,\n        accumulator\n      );\n    } else {\n      assert(overwrite.source.fromServer, 'Unknown source.');\n      // We filter the node if it's a tagged update or the node has been previously filtered  and the\n      // update is not at the root in which case it is ok (and necessary) to mark the node unfiltered\n      // again\n      filterServerNode =\n        overwrite.source.tagged ||\n        (oldViewCache.serverCache.isFiltered() && !pathIsEmpty(overwrite.path));\n      newViewCache = viewProcessorApplyServerOverwrite(\n        viewProcessor,\n        oldViewCache,\n        overwrite.path,\n        overwrite.snap,\n        writesCache,\n        completeCache,\n        filterServerNode,\n        accumulator\n      );\n    }\n  } else if (operation.type === OperationType.MERGE) {\n    const merge = operation as Merge;\n    if (merge.source.fromUser) {\n      newViewCache = viewProcessorApplyUserMerge(\n        viewProcessor,\n        oldViewCache,\n        merge.path,\n        merge.children,\n        writesCache,\n        completeCache,\n        accumulator\n      );\n    } else {\n      assert(merge.source.fromServer, 'Unknown source.');\n      // We filter the node if it's a tagged update or the node has been previously filtered\n      filterServerNode =\n        merge.source.tagged || oldViewCache.serverCache.isFiltered();\n      newViewCache = viewProcessorApplyServerMerge(\n        viewProcessor,\n        oldViewCache,\n        merge.path,\n        merge.children,\n        writesCache,\n        completeCache,\n        filterServerNode,\n        accumulator\n      );\n    }\n  } else if (operation.type === OperationType.ACK_USER_WRITE) {\n    const ackUserWrite = operation as AckUserWrite;\n    if (!ackUserWrite.revert) {\n      newViewCache = viewProcessorAckUserWrite(\n        viewProcessor,\n        oldViewCache,\n        ackUserWrite.path,\n        ackUserWrite.affectedTree,\n        writesCache,\n        completeCache,\n        accumulator\n      );\n    } else {\n      newViewCache = viewProcessorRevertUserWrite(\n        viewProcessor,\n        oldViewCache,\n        ackUserWrite.path,\n        writesCache,\n        completeCache,\n        accumulator\n      );\n    }\n  } else if (operation.type === OperationType.LISTEN_COMPLETE) {\n    newViewCache = viewProcessorListenComplete(\n      viewProcessor,\n      oldViewCache,\n      operation.path,\n      writesCache,\n      accumulator\n    );\n  } else {\n    throw assertionError('Unknown operation type: ' + operation.type);\n  }\n  const changes = accumulator.getChanges();\n  viewProcessorMaybeAddValueEvent(oldViewCache, newViewCache, changes);\n  return { viewCache: newViewCache, changes };\n}\n\nfunction viewProcessorMaybeAddValueEvent(\n  oldViewCache: ViewCache,\n  newViewCache: ViewCache,\n  accumulator: Change[]\n): void {\n  const eventSnap = newViewCache.eventCache;\n  if (eventSnap.isFullyInitialized()) {\n    const isLeafOrEmpty =\n      eventSnap.getNode().isLeafNode() || eventSnap.getNode().isEmpty();\n    const oldCompleteSnap = viewCacheGetCompleteEventSnap(oldViewCache);\n    if (\n      accumulator.length > 0 ||\n      !oldViewCache.eventCache.isFullyInitialized() ||\n      (isLeafOrEmpty && !eventSnap.getNode().equals(oldCompleteSnap)) ||\n      !eventSnap.getNode().getPriority().equals(oldCompleteSnap.getPriority())\n    ) {\n      accumulator.push(\n        changeValue(viewCacheGetCompleteEventSnap(newViewCache))\n      );\n    }\n  }\n}\n\nfunction viewProcessorGenerateEventCacheAfterServerEvent(\n  viewProcessor: ViewProcessor,\n  viewCache: ViewCache,\n  changePath: Path,\n  writesCache: WriteTreeRef,\n  source: CompleteChildSource,\n  accumulator: ChildChangeAccumulator\n): ViewCache {\n  const oldEventSnap = viewCache.eventCache;\n  if (writeTreeRefShadowingWrite(writesCache, changePath) != null) {\n    // we have a shadowing write, ignore changes\n    return viewCache;\n  } else {\n    let newEventCache, serverNode;\n    if (pathIsEmpty(changePath)) {\n      // TODO: figure out how this plays with \"sliding ack windows\"\n      assert(\n        viewCache.serverCache.isFullyInitialized(),\n        'If change path is empty, we must have complete server data'\n      );\n      if (viewCache.serverCache.isFiltered()) {\n        // We need to special case this, because we need to only apply writes to complete children, or\n        // we might end up raising events for incomplete children. If the server data is filtered deep\n        // writes cannot be guaranteed to be complete\n        const serverCache = viewCacheGetCompleteServerSnap(viewCache);\n        const completeChildren =\n          serverCache instanceof ChildrenNode\n            ? serverCache\n            : ChildrenNode.EMPTY_NODE;\n        const completeEventChildren = writeTreeRefCalcCompleteEventChildren(\n          writesCache,\n          completeChildren\n        );\n        newEventCache = viewProcessor.filter.updateFullNode(\n          viewCache.eventCache.getNode(),\n          completeEventChildren,\n          accumulator\n        );\n      } else {\n        const completeNode = writeTreeRefCalcCompleteEventCache(\n          writesCache,\n          viewCacheGetCompleteServerSnap(viewCache)\n        );\n        newEventCache = viewProcessor.filter.updateFullNode(\n          viewCache.eventCache.getNode(),\n          completeNode,\n          accumulator\n        );\n      }\n    } else {\n      const childKey = pathGetFront(changePath);\n      if (childKey === '.priority') {\n        assert(\n          pathGetLength(changePath) === 1,\n          \"Can't have a priority with additional path components\"\n        );\n        const oldEventNode = oldEventSnap.getNode();\n        serverNode = viewCache.serverCache.getNode();\n        // we might have overwrites for this priority\n        const updatedPriority = writeTreeRefCalcEventCacheAfterServerOverwrite(\n          writesCache,\n          changePath,\n          oldEventNode,\n          serverNode\n        );\n        if (updatedPriority != null) {\n          newEventCache = viewProcessor.filter.updatePriority(\n            oldEventNode,\n            updatedPriority\n          );\n        } else {\n          // priority didn't change, keep old node\n          newEventCache = oldEventSnap.getNode();\n        }\n      } else {\n        const childChangePath = pathPopFront(changePath);\n        // update child\n        let newEventChild;\n        if (oldEventSnap.isCompleteForChild(childKey)) {\n          serverNode = viewCache.serverCache.getNode();\n          const eventChildUpdate =\n            writeTreeRefCalcEventCacheAfterServerOverwrite(\n              writesCache,\n              changePath,\n              oldEventSnap.getNode(),\n              serverNode\n            );\n          if (eventChildUpdate != null) {\n            newEventChild = oldEventSnap\n              .getNode()\n              .getImmediateChild(childKey)\n              .updateChild(childChangePath, eventChildUpdate);\n          } else {\n            // Nothing changed, just keep the old child\n            newEventChild = oldEventSnap.getNode().getImmediateChild(childKey);\n          }\n        } else {\n          newEventChild = writeTreeRefCalcCompleteChild(\n            writesCache,\n            childKey,\n            viewCache.serverCache\n          );\n        }\n        if (newEventChild != null) {\n          newEventCache = viewProcessor.filter.updateChild(\n            oldEventSnap.getNode(),\n            childKey,\n            newEventChild,\n            childChangePath,\n            source,\n            accumulator\n          );\n        } else {\n          // no complete child available or no change\n          newEventCache = oldEventSnap.getNode();\n        }\n      }\n    }\n    return viewCacheUpdateEventSnap(\n      viewCache,\n      newEventCache,\n      oldEventSnap.isFullyInitialized() || pathIsEmpty(changePath),\n      viewProcessor.filter.filtersNodes()\n    );\n  }\n}\n\nfunction viewProcessorApplyServerOverwrite(\n  viewProcessor: ViewProcessor,\n  oldViewCache: ViewCache,\n  changePath: Path,\n  changedSnap: Node,\n  writesCache: WriteTreeRef,\n  completeCache: Node | null,\n  filterServerNode: boolean,\n  accumulator: ChildChangeAccumulator\n): ViewCache {\n  const oldServerSnap = oldViewCache.serverCache;\n  let newServerCache;\n  const serverFilter = filterServerNode\n    ? viewProcessor.filter\n    : viewProcessor.filter.getIndexedFilter();\n  if (pathIsEmpty(changePath)) {\n    newServerCache = serverFilter.updateFullNode(\n      oldServerSnap.getNode(),\n      changedSnap,\n      null\n    );\n  } else if (serverFilter.filtersNodes() && !oldServerSnap.isFiltered()) {\n    // we want to filter the server node, but we didn't filter the server node yet, so simulate a full update\n    const newServerNode = oldServerSnap\n      .getNode()\n      .updateChild(changePath, changedSnap);\n    newServerCache = serverFilter.updateFullNode(\n      oldServerSnap.getNode(),\n      newServerNode,\n      null\n    );\n  } else {\n    const childKey = pathGetFront(changePath);\n    if (\n      !oldServerSnap.isCompleteForPath(changePath) &&\n      pathGetLength(changePath) > 1\n    ) {\n      // We don't update incomplete nodes with updates intended for other listeners\n      return oldViewCache;\n    }\n    const childChangePath = pathPopFront(changePath);\n    const childNode = oldServerSnap.getNode().getImmediateChild(childKey);\n    const newChildNode = childNode.updateChild(childChangePath, changedSnap);\n    if (childKey === '.priority') {\n      newServerCache = serverFilter.updatePriority(\n        oldServerSnap.getNode(),\n        newChildNode\n      );\n    } else {\n      newServerCache = serverFilter.updateChild(\n        oldServerSnap.getNode(),\n        childKey,\n        newChildNode,\n        childChangePath,\n        NO_COMPLETE_CHILD_SOURCE,\n        null\n      );\n    }\n  }\n  const newViewCache = viewCacheUpdateServerSnap(\n    oldViewCache,\n    newServerCache,\n    oldServerSnap.isFullyInitialized() || pathIsEmpty(changePath),\n    serverFilter.filtersNodes()\n  );\n  const source = new WriteTreeCompleteChildSource(\n    writesCache,\n    newViewCache,\n    completeCache\n  );\n  return viewProcessorGenerateEventCacheAfterServerEvent(\n    viewProcessor,\n    newViewCache,\n    changePath,\n    writesCache,\n    source,\n    accumulator\n  );\n}\n\nfunction viewProcessorApplyUserOverwrite(\n  viewProcessor: ViewProcessor,\n  oldViewCache: ViewCache,\n  changePath: Path,\n  changedSnap: Node,\n  writesCache: WriteTreeRef,\n  completeCache: Node | null,\n  accumulator: ChildChangeAccumulator\n): ViewCache {\n  const oldEventSnap = oldViewCache.eventCache;\n  let newViewCache, newEventCache;\n  const source = new WriteTreeCompleteChildSource(\n    writesCache,\n    oldViewCache,\n    completeCache\n  );\n  if (pathIsEmpty(changePath)) {\n    newEventCache = viewProcessor.filter.updateFullNode(\n      oldViewCache.eventCache.getNode(),\n      changedSnap,\n      accumulator\n    );\n    newViewCache = viewCacheUpdateEventSnap(\n      oldViewCache,\n      newEventCache,\n      true,\n      viewProcessor.filter.filtersNodes()\n    );\n  } else {\n    const childKey = pathGetFront(changePath);\n    if (childKey === '.priority') {\n      newEventCache = viewProcessor.filter.updatePriority(\n        oldViewCache.eventCache.getNode(),\n        changedSnap\n      );\n      newViewCache = viewCacheUpdateEventSnap(\n        oldViewCache,\n        newEventCache,\n        oldEventSnap.isFullyInitialized(),\n        oldEventSnap.isFiltered()\n      );\n    } else {\n      const childChangePath = pathPopFront(changePath);\n      const oldChild = oldEventSnap.getNode().getImmediateChild(childKey);\n      let newChild;\n      if (pathIsEmpty(childChangePath)) {\n        // Child overwrite, we can replace the child\n        newChild = changedSnap;\n      } else {\n        const childNode = source.getCompleteChild(childKey);\n        if (childNode != null) {\n          if (\n            pathGetBack(childChangePath) === '.priority' &&\n            childNode.getChild(pathParent(childChangePath)).isEmpty()\n          ) {\n            // This is a priority update on an empty node. If this node exists on the server, the\n            // server will send down the priority in the update, so ignore for now\n            newChild = childNode;\n          } else {\n            newChild = childNode.updateChild(childChangePath, changedSnap);\n          }\n        } else {\n          // There is no complete child node available\n          newChild = ChildrenNode.EMPTY_NODE;\n        }\n      }\n      if (!oldChild.equals(newChild)) {\n        const newEventSnap = viewProcessor.filter.updateChild(\n          oldEventSnap.getNode(),\n          childKey,\n          newChild,\n          childChangePath,\n          source,\n          accumulator\n        );\n        newViewCache = viewCacheUpdateEventSnap(\n          oldViewCache,\n          newEventSnap,\n          oldEventSnap.isFullyInitialized(),\n          viewProcessor.filter.filtersNodes()\n        );\n      } else {\n        newViewCache = oldViewCache;\n      }\n    }\n  }\n  return newViewCache;\n}\n\nfunction viewProcessorCacheHasChild(\n  viewCache: ViewCache,\n  childKey: string\n): boolean {\n  return viewCache.eventCache.isCompleteForChild(childKey);\n}\n\nfunction viewProcessorApplyUserMerge(\n  viewProcessor: ViewProcessor,\n  viewCache: ViewCache,\n  path: Path,\n  changedChildren: ImmutableTree<Node>,\n  writesCache: WriteTreeRef,\n  serverCache: Node | null,\n  accumulator: ChildChangeAccumulator\n): ViewCache {\n  // HACK: In the case of a limit query, there may be some changes that bump things out of the\n  // window leaving room for new items.  It's important we process these changes first, so we\n  // iterate the changes twice, first processing any that affect items currently in view.\n  // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\n  // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\n  // not the other.\n  let curViewCache = viewCache;\n  changedChildren.foreach((relativePath, childNode) => {\n    const writePath = pathChild(path, relativePath);\n    if (viewProcessorCacheHasChild(viewCache, pathGetFront(writePath))) {\n      curViewCache = viewProcessorApplyUserOverwrite(\n        viewProcessor,\n        curViewCache,\n        writePath,\n        childNode,\n        writesCache,\n        serverCache,\n        accumulator\n      );\n    }\n  });\n\n  changedChildren.foreach((relativePath, childNode) => {\n    const writePath = pathChild(path, relativePath);\n    if (!viewProcessorCacheHasChild(viewCache, pathGetFront(writePath))) {\n      curViewCache = viewProcessorApplyUserOverwrite(\n        viewProcessor,\n        curViewCache,\n        writePath,\n        childNode,\n        writesCache,\n        serverCache,\n        accumulator\n      );\n    }\n  });\n\n  return curViewCache;\n}\n\nfunction viewProcessorApplyMerge(\n  viewProcessor: ViewProcessor,\n  node: Node,\n  merge: ImmutableTree<Node>\n): Node {\n  merge.foreach((relativePath, childNode) => {\n    node = node.updateChild(relativePath, childNode);\n  });\n  return node;\n}\n\nfunction viewProcessorApplyServerMerge(\n  viewProcessor: ViewProcessor,\n  viewCache: ViewCache,\n  path: Path,\n  changedChildren: ImmutableTree<Node>,\n  writesCache: WriteTreeRef,\n  serverCache: Node | null,\n  filterServerNode: boolean,\n  accumulator: ChildChangeAccumulator\n): ViewCache {\n  // If we don't have a cache yet, this merge was intended for a previously listen in the same location. Ignore it and\n  // wait for the complete data update coming soon.\n  if (\n    viewCache.serverCache.getNode().isEmpty() &&\n    !viewCache.serverCache.isFullyInitialized()\n  ) {\n    return viewCache;\n  }\n\n  // HACK: In the case of a limit query, there may be some changes that bump things out of the\n  // window leaving room for new items.  It's important we process these changes first, so we\n  // iterate the changes twice, first processing any that affect items currently in view.\n  // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\n  // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\n  // not the other.\n  let curViewCache = viewCache;\n  let viewMergeTree: ImmutableTree<Node>;\n  if (pathIsEmpty(path)) {\n    viewMergeTree = changedChildren;\n  } else {\n    viewMergeTree = new ImmutableTree<Node>(null).setTree(\n      path,\n      changedChildren\n    );\n  }\n  const serverNode = viewCache.serverCache.getNode();\n  viewMergeTree.children.inorderTraversal((childKey, childTree) => {\n    if (serverNode.hasChild(childKey)) {\n      const serverChild = viewCache.serverCache\n        .getNode()\n        .getImmediateChild(childKey);\n      const newChild = viewProcessorApplyMerge(\n        viewProcessor,\n        serverChild,\n        childTree\n      );\n      curViewCache = viewProcessorApplyServerOverwrite(\n        viewProcessor,\n        curViewCache,\n        new Path(childKey),\n        newChild,\n        writesCache,\n        serverCache,\n        filterServerNode,\n        accumulator\n      );\n    }\n  });\n  viewMergeTree.children.inorderTraversal((childKey, childMergeTree) => {\n    const isUnknownDeepMerge =\n      !viewCache.serverCache.isCompleteForChild(childKey) &&\n      childMergeTree.value === null;\n    if (!serverNode.hasChild(childKey) && !isUnknownDeepMerge) {\n      const serverChild = viewCache.serverCache\n        .getNode()\n        .getImmediateChild(childKey);\n      const newChild = viewProcessorApplyMerge(\n        viewProcessor,\n        serverChild,\n        childMergeTree\n      );\n      curViewCache = viewProcessorApplyServerOverwrite(\n        viewProcessor,\n        curViewCache,\n        new Path(childKey),\n        newChild,\n        writesCache,\n        serverCache,\n        filterServerNode,\n        accumulator\n      );\n    }\n  });\n\n  return curViewCache;\n}\n\nfunction viewProcessorAckUserWrite(\n  viewProcessor: ViewProcessor,\n  viewCache: ViewCache,\n  ackPath: Path,\n  affectedTree: ImmutableTree<boolean>,\n  writesCache: WriteTreeRef,\n  completeCache: Node | null,\n  accumulator: ChildChangeAccumulator\n): ViewCache {\n  if (writeTreeRefShadowingWrite(writesCache, ackPath) != null) {\n    return viewCache;\n  }\n\n  // Only filter server node if it is currently filtered\n  const filterServerNode = viewCache.serverCache.isFiltered();\n\n  // Essentially we'll just get our existing server cache for the affected paths and re-apply it as a server update\n  // now that it won't be shadowed.\n  const serverCache = viewCache.serverCache;\n  if (affectedTree.value != null) {\n    // This is an overwrite.\n    if (\n      (pathIsEmpty(ackPath) && serverCache.isFullyInitialized()) ||\n      serverCache.isCompleteForPath(ackPath)\n    ) {\n      return viewProcessorApplyServerOverwrite(\n        viewProcessor,\n        viewCache,\n        ackPath,\n        serverCache.getNode().getChild(ackPath),\n        writesCache,\n        completeCache,\n        filterServerNode,\n        accumulator\n      );\n    } else if (pathIsEmpty(ackPath)) {\n      // This is a goofy edge case where we are acking data at this location but don't have full data.  We\n      // should just re-apply whatever we have in our cache as a merge.\n      let changedChildren = new ImmutableTree<Node>(null);\n      serverCache.getNode().forEachChild(KEY_INDEX, (name, node) => {\n        changedChildren = changedChildren.set(new Path(name), node);\n      });\n      return viewProcessorApplyServerMerge(\n        viewProcessor,\n        viewCache,\n        ackPath,\n        changedChildren,\n        writesCache,\n        completeCache,\n        filterServerNode,\n        accumulator\n      );\n    } else {\n      return viewCache;\n    }\n  } else {\n    // This is a merge.\n    let changedChildren = new ImmutableTree<Node>(null);\n    affectedTree.foreach((mergePath, value) => {\n      const serverCachePath = pathChild(ackPath, mergePath);\n      if (serverCache.isCompleteForPath(serverCachePath)) {\n        changedChildren = changedChildren.set(\n          mergePath,\n          serverCache.getNode().getChild(serverCachePath)\n        );\n      }\n    });\n    return viewProcessorApplyServerMerge(\n      viewProcessor,\n      viewCache,\n      ackPath,\n      changedChildren,\n      writesCache,\n      completeCache,\n      filterServerNode,\n      accumulator\n    );\n  }\n}\n\nfunction viewProcessorListenComplete(\n  viewProcessor: ViewProcessor,\n  viewCache: ViewCache,\n  path: Path,\n  writesCache: WriteTreeRef,\n  accumulator: ChildChangeAccumulator\n): ViewCache {\n  const oldServerNode = viewCache.serverCache;\n  const newViewCache = viewCacheUpdateServerSnap(\n    viewCache,\n    oldServerNode.getNode(),\n    oldServerNode.isFullyInitialized() || pathIsEmpty(path),\n    oldServerNode.isFiltered()\n  );\n  return viewProcessorGenerateEventCacheAfterServerEvent(\n    viewProcessor,\n    newViewCache,\n    path,\n    writesCache,\n    NO_COMPLETE_CHILD_SOURCE,\n    accumulator\n  );\n}\n\nfunction viewProcessorRevertUserWrite(\n  viewProcessor: ViewProcessor,\n  viewCache: ViewCache,\n  path: Path,\n  writesCache: WriteTreeRef,\n  completeServerCache: Node | null,\n  accumulator: ChildChangeAccumulator\n): ViewCache {\n  let complete;\n  if (writeTreeRefShadowingWrite(writesCache, path) != null) {\n    return viewCache;\n  } else {\n    const source = new WriteTreeCompleteChildSource(\n      writesCache,\n      viewCache,\n      completeServerCache\n    );\n    const oldEventCache = viewCache.eventCache.getNode();\n    let newEventCache;\n    if (pathIsEmpty(path) || pathGetFront(path) === '.priority') {\n      let newNode;\n      if (viewCache.serverCache.isFullyInitialized()) {\n        newNode = writeTreeRefCalcCompleteEventCache(\n          writesCache,\n          viewCacheGetCompleteServerSnap(viewCache)\n        );\n      } else {\n        const serverChildren = viewCache.serverCache.getNode();\n        assert(\n          serverChildren instanceof ChildrenNode,\n          'serverChildren would be complete if leaf node'\n        );\n        newNode = writeTreeRefCalcCompleteEventChildren(\n          writesCache,\n          serverChildren as ChildrenNode\n        );\n      }\n      newNode = newNode as Node;\n      newEventCache = viewProcessor.filter.updateFullNode(\n        oldEventCache,\n        newNode,\n        accumulator\n      );\n    } else {\n      const childKey = pathGetFront(path);\n      let newChild = writeTreeRefCalcCompleteChild(\n        writesCache,\n        childKey,\n        viewCache.serverCache\n      );\n      if (\n        newChild == null &&\n        viewCache.serverCache.isCompleteForChild(childKey)\n      ) {\n        newChild = oldEventCache.getImmediateChild(childKey);\n      }\n      if (newChild != null) {\n        newEventCache = viewProcessor.filter.updateChild(\n          oldEventCache,\n          childKey,\n          newChild,\n          pathPopFront(path),\n          source,\n          accumulator\n        );\n      } else if (viewCache.eventCache.getNode().hasChild(childKey)) {\n        // No complete child available, delete the existing one, if any\n        newEventCache = viewProcessor.filter.updateChild(\n          oldEventCache,\n          childKey,\n          ChildrenNode.EMPTY_NODE,\n          pathPopFront(path),\n          source,\n          accumulator\n        );\n      } else {\n        newEventCache = oldEventCache;\n      }\n      if (\n        newEventCache.isEmpty() &&\n        viewCache.serverCache.isFullyInitialized()\n      ) {\n        // We might have reverted all child writes. Maybe the old event was a leaf node\n        complete = writeTreeRefCalcCompleteEventCache(\n          writesCache,\n          viewCacheGetCompleteServerSnap(viewCache)\n        );\n        if (complete.isLeafNode()) {\n          newEventCache = viewProcessor.filter.updateFullNode(\n            newEventCache,\n            complete,\n            accumulator\n          );\n        }\n      }\n    }\n    complete =\n      viewCache.serverCache.isFullyInitialized() ||\n      writeTreeRefShadowingWrite(writesCache, newEmptyPath()) != null;\n    return viewCacheUpdateEventSnap(\n      viewCache,\n      newEventCache,\n      complete,\n      viewProcessor.filter.filtersNodes()\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { Operation, OperationType } from '../operation/Operation';\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { PRIORITY_INDEX } from '../snap/indexes/PriorityIndex';\nimport { Node } from '../snap/Node';\nimport { Path, pathGetFront, pathIsEmpty } from '../util/Path';\nimport { WriteTreeRef } from '../WriteTree';\n\nimport { CacheNode } from './CacheNode';\nimport { Change, changeChildAdded, changeValue } from './Change';\nimport { CancelEvent, Event } from './Event';\nimport {\n  EventGenerator,\n  eventGeneratorGenerateEventsForChanges\n} from './EventGenerator';\nimport { EventRegistration, QueryContext } from './EventRegistration';\nimport { IndexedFilter } from './filter/IndexedFilter';\nimport { queryParamsGetNodeFilter } from './QueryParams';\nimport {\n  newViewCache,\n  ViewCache,\n  viewCacheGetCompleteEventSnap,\n  viewCacheGetCompleteServerSnap\n} from './ViewCache';\nimport {\n  newViewProcessor,\n  ViewProcessor,\n  viewProcessorApplyOperation,\n  viewProcessorAssertIndexed\n} from './ViewProcessor';\n\n/**\n * A view represents a specific location and query that has 1 or more event registrations.\n *\n * It does several things:\n *  - Maintains the list of event registrations for this location/query.\n *  - Maintains a cache of the data visible for this location/query.\n *  - Applies new operations (via applyOperation), updates the cache, and based on the event\n *    registrations returns the set of events to be raised.\n */\nexport class View {\n  processor_: ViewProcessor;\n  viewCache_: ViewCache;\n  eventRegistrations_: EventRegistration[] = [];\n  eventGenerator_: EventGenerator;\n\n  constructor(private query_: QueryContext, initialViewCache: ViewCache) {\n    const params = this.query_._queryParams;\n\n    const indexFilter = new IndexedFilter(params.getIndex());\n    const filter = queryParamsGetNodeFilter(params);\n\n    this.processor_ = newViewProcessor(filter);\n\n    const initialServerCache = initialViewCache.serverCache;\n    const initialEventCache = initialViewCache.eventCache;\n\n    // Don't filter server node with other filter than index, wait for tagged listen\n    const serverSnap = indexFilter.updateFullNode(\n      ChildrenNode.EMPTY_NODE,\n      initialServerCache.getNode(),\n      null\n    );\n    const eventSnap = filter.updateFullNode(\n      ChildrenNode.EMPTY_NODE,\n      initialEventCache.getNode(),\n      null\n    );\n    const newServerCache = new CacheNode(\n      serverSnap,\n      initialServerCache.isFullyInitialized(),\n      indexFilter.filtersNodes()\n    );\n    const newEventCache = new CacheNode(\n      eventSnap,\n      initialEventCache.isFullyInitialized(),\n      filter.filtersNodes()\n    );\n\n    this.viewCache_ = newViewCache(newEventCache, newServerCache);\n    this.eventGenerator_ = new EventGenerator(this.query_);\n  }\n\n  get query(): QueryContext {\n    return this.query_;\n  }\n}\n\nexport function viewGetServerCache(view: View): Node | null {\n  return view.viewCache_.serverCache.getNode();\n}\n\nexport function viewGetCompleteNode(view: View): Node | null {\n  return viewCacheGetCompleteEventSnap(view.viewCache_);\n}\n\nexport function viewGetCompleteServerCache(\n  view: View,\n  path: Path\n): Node | null {\n  const cache = viewCacheGetCompleteServerSnap(view.viewCache_);\n  if (cache) {\n    // If this isn't a \"loadsAllData\" view, then cache isn't actually a complete cache and\n    // we need to see if it contains the child we're interested in.\n    if (\n      view.query._queryParams.loadsAllData() ||\n      (!pathIsEmpty(path) &&\n        !cache.getImmediateChild(pathGetFront(path)).isEmpty())\n    ) {\n      return cache.getChild(path);\n    }\n  }\n  return null;\n}\n\nexport function viewIsEmpty(view: View): boolean {\n  return view.eventRegistrations_.length === 0;\n}\n\nexport function viewAddEventRegistration(\n  view: View,\n  eventRegistration: EventRegistration\n) {\n  view.eventRegistrations_.push(eventRegistration);\n}\n\n/**\n * @param eventRegistration - If null, remove all callbacks.\n * @param cancelError - If a cancelError is provided, appropriate cancel events will be returned.\n * @returns Cancel events, if cancelError was provided.\n */\nexport function viewRemoveEventRegistration(\n  view: View,\n  eventRegistration: EventRegistration | null,\n  cancelError?: Error\n): Event[] {\n  const cancelEvents: CancelEvent[] = [];\n  if (cancelError) {\n    assert(\n      eventRegistration == null,\n      'A cancel should cancel all event registrations.'\n    );\n    const path = view.query._path;\n    view.eventRegistrations_.forEach(registration => {\n      const maybeEvent = registration.createCancelEvent(cancelError, path);\n      if (maybeEvent) {\n        cancelEvents.push(maybeEvent);\n      }\n    });\n  }\n\n  if (eventRegistration) {\n    let remaining = [];\n    for (let i = 0; i < view.eventRegistrations_.length; ++i) {\n      const existing = view.eventRegistrations_[i];\n      if (!existing.matches(eventRegistration)) {\n        remaining.push(existing);\n      } else if (eventRegistration.hasAnyCallback()) {\n        // We're removing just this one\n        remaining = remaining.concat(view.eventRegistrations_.slice(i + 1));\n        break;\n      }\n    }\n    view.eventRegistrations_ = remaining;\n  } else {\n    view.eventRegistrations_ = [];\n  }\n  return cancelEvents;\n}\n\n/**\n * Applies the given Operation, updates our cache, and returns the appropriate events.\n */\nexport function viewApplyOperation(\n  view: View,\n  operation: Operation,\n  writesCache: WriteTreeRef,\n  completeServerCache: Node | null\n): Event[] {\n  if (\n    operation.type === OperationType.MERGE &&\n    operation.source.queryId !== null\n  ) {\n    assert(\n      viewCacheGetCompleteServerSnap(view.viewCache_),\n      'We should always have a full cache before handling merges'\n    );\n    assert(\n      viewCacheGetCompleteEventSnap(view.viewCache_),\n      'Missing event cache, even though we have a server cache'\n    );\n  }\n\n  const oldViewCache = view.viewCache_;\n  const result = viewProcessorApplyOperation(\n    view.processor_,\n    oldViewCache,\n    operation,\n    writesCache,\n    completeServerCache\n  );\n  viewProcessorAssertIndexed(view.processor_, result.viewCache);\n\n  assert(\n    result.viewCache.serverCache.isFullyInitialized() ||\n      !oldViewCache.serverCache.isFullyInitialized(),\n    'Once a server snap is complete, it should never go back'\n  );\n\n  view.viewCache_ = result.viewCache;\n\n  return viewGenerateEventsForChanges_(\n    view,\n    result.changes,\n    result.viewCache.eventCache.getNode(),\n    null\n  );\n}\n\nexport function viewGetInitialEvents(\n  view: View,\n  registration: EventRegistration\n): Event[] {\n  const eventSnap = view.viewCache_.eventCache;\n  const initialChanges: Change[] = [];\n  if (!eventSnap.getNode().isLeafNode()) {\n    const eventNode = eventSnap.getNode() as ChildrenNode;\n    eventNode.forEachChild(PRIORITY_INDEX, (key, childNode) => {\n      initialChanges.push(changeChildAdded(key, childNode));\n    });\n  }\n  if (eventSnap.isFullyInitialized()) {\n    initialChanges.push(changeValue(eventSnap.getNode()));\n  }\n  return viewGenerateEventsForChanges_(\n    view,\n    initialChanges,\n    eventSnap.getNode(),\n    registration\n  );\n}\n\nfunction viewGenerateEventsForChanges_(\n  view: View,\n  changes: Change[],\n  eventCache: Node,\n  eventRegistration?: EventRegistration\n): Event[] {\n  const registrations = eventRegistration\n    ? [eventRegistration]\n    : view.eventRegistrations_;\n  return eventGeneratorGenerateEventsForChanges(\n    view.eventGenerator_,\n    changes,\n    eventCache,\n    registrations\n  );\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { ReferenceConstructor } from '../api/Reference';\n\nimport { Operation } from './operation/Operation';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Node } from './snap/Node';\nimport { Path } from './util/Path';\nimport { CacheNode } from './view/CacheNode';\nimport { Event } from './view/Event';\nimport { EventRegistration, QueryContext } from './view/EventRegistration';\nimport {\n  View,\n  viewAddEventRegistration,\n  viewApplyOperation,\n  viewGetCompleteServerCache,\n  viewGetInitialEvents,\n  viewIsEmpty,\n  viewRemoveEventRegistration\n} from './view/View';\nimport { newViewCache } from './view/ViewCache';\nimport {\n  WriteTreeRef,\n  writeTreeRefCalcCompleteEventCache,\n  writeTreeRefCalcCompleteEventChildren\n} from './WriteTree';\n\nlet referenceConstructor: ReferenceConstructor;\n\n/**\n * SyncPoint represents a single location in a SyncTree with 1 or more event registrations, meaning we need to\n * maintain 1 or more Views at this location to cache server data and raise appropriate events for server changes\n * and user writes (set, transaction, update).\n *\n * It's responsible for:\n *  - Maintaining the set of 1 or more views necessary at this location (a SyncPoint with 0 views should be removed).\n *  - Proxying user / server operations to the views as appropriate (i.e. applyServerOverwrite,\n *    applyUserOverwrite, etc.)\n */\nexport class SyncPoint {\n  /**\n   * The Views being tracked at this location in the tree, stored as a map where the key is a\n   * queryId and the value is the View for that query.\n   *\n   * NOTE: This list will be quite small (usually 1, but perhaps 2 or 3; any more is an odd use case).\n   */\n  readonly views: Map<string, View> = new Map();\n}\n\nexport function syncPointSetReferenceConstructor(\n  val: ReferenceConstructor\n): void {\n  assert(\n    !referenceConstructor,\n    '__referenceConstructor has already been defined'\n  );\n  referenceConstructor = val;\n}\n\nfunction syncPointGetReferenceConstructor(): ReferenceConstructor {\n  assert(referenceConstructor, 'Reference.ts has not been loaded');\n  return referenceConstructor;\n}\n\nexport function syncPointIsEmpty(syncPoint: SyncPoint): boolean {\n  return syncPoint.views.size === 0;\n}\n\nexport function syncPointApplyOperation(\n  syncPoint: SyncPoint,\n  operation: Operation,\n  writesCache: WriteTreeRef,\n  optCompleteServerCache: Node | null\n): Event[] {\n  const queryId = operation.source.queryId;\n  if (queryId !== null) {\n    const view = syncPoint.views.get(queryId);\n    assert(view != null, 'SyncTree gave us an op for an invalid query.');\n    return viewApplyOperation(\n      view,\n      operation,\n      writesCache,\n      optCompleteServerCache\n    );\n  } else {\n    let events: Event[] = [];\n\n    for (const view of syncPoint.views.values()) {\n      events = events.concat(\n        viewApplyOperation(view, operation, writesCache, optCompleteServerCache)\n      );\n    }\n\n    return events;\n  }\n}\n\n/**\n * Get a view for the specified query.\n *\n * @param query - The query to return a view for\n * @param writesCache\n * @param serverCache\n * @param serverCacheComplete\n * @returns Events to raise.\n */\nexport function syncPointGetView(\n  syncPoint: SyncPoint,\n  query: QueryContext,\n  writesCache: WriteTreeRef,\n  serverCache: Node | null,\n  serverCacheComplete: boolean\n): View {\n  const queryId = query._queryIdentifier;\n  const view = syncPoint.views.get(queryId);\n  if (!view) {\n    // TODO: make writesCache take flag for complete server node\n    let eventCache = writeTreeRefCalcCompleteEventCache(\n      writesCache,\n      serverCacheComplete ? serverCache : null\n    );\n    let eventCacheComplete = false;\n    if (eventCache) {\n      eventCacheComplete = true;\n    } else if (serverCache instanceof ChildrenNode) {\n      eventCache = writeTreeRefCalcCompleteEventChildren(\n        writesCache,\n        serverCache\n      );\n      eventCacheComplete = false;\n    } else {\n      eventCache = ChildrenNode.EMPTY_NODE;\n      eventCacheComplete = false;\n    }\n    const viewCache = newViewCache(\n      new CacheNode(eventCache, eventCacheComplete, false),\n      new CacheNode(serverCache, serverCacheComplete, false)\n    );\n    return new View(query, viewCache);\n  }\n  return view;\n}\n\n/**\n * Add an event callback for the specified query.\n *\n * @param query\n * @param eventRegistration\n * @param writesCache\n * @param serverCache - Complete server cache, if we have it.\n * @param serverCacheComplete\n * @returns Events to raise.\n */\nexport function syncPointAddEventRegistration(\n  syncPoint: SyncPoint,\n  query: QueryContext,\n  eventRegistration: EventRegistration,\n  writesCache: WriteTreeRef,\n  serverCache: Node | null,\n  serverCacheComplete: boolean\n): Event[] {\n  const view = syncPointGetView(\n    syncPoint,\n    query,\n    writesCache,\n    serverCache,\n    serverCacheComplete\n  );\n  if (!syncPoint.views.has(query._queryIdentifier)) {\n    syncPoint.views.set(query._queryIdentifier, view);\n  }\n  // This is guaranteed to exist now, we just created anything that was missing\n  viewAddEventRegistration(view, eventRegistration);\n  return viewGetInitialEvents(view, eventRegistration);\n}\n\n/**\n * Remove event callback(s).  Return cancelEvents if a cancelError is specified.\n *\n * If query is the default query, we'll check all views for the specified eventRegistration.\n * If eventRegistration is null, we'll remove all callbacks for the specified view(s).\n *\n * @param eventRegistration - If null, remove all callbacks.\n * @param cancelError - If a cancelError is provided, appropriate cancel events will be returned.\n * @returns removed queries and any cancel events\n */\nexport function syncPointRemoveEventRegistration(\n  syncPoint: SyncPoint,\n  query: QueryContext,\n  eventRegistration: EventRegistration | null,\n  cancelError?: Error\n): { removed: QueryContext[]; events: Event[] } {\n  const queryId = query._queryIdentifier;\n  const removed: QueryContext[] = [];\n  let cancelEvents: Event[] = [];\n  const hadCompleteView = syncPointHasCompleteView(syncPoint);\n  if (queryId === 'default') {\n    // When you do ref.off(...), we search all views for the registration to remove.\n    for (const [viewQueryId, view] of syncPoint.views.entries()) {\n      cancelEvents = cancelEvents.concat(\n        viewRemoveEventRegistration(view, eventRegistration, cancelError)\n      );\n      if (viewIsEmpty(view)) {\n        syncPoint.views.delete(viewQueryId);\n\n        // We'll deal with complete views later.\n        if (!view.query._queryParams.loadsAllData()) {\n          removed.push(view.query);\n        }\n      }\n    }\n  } else {\n    // remove the callback from the specific view.\n    const view = syncPoint.views.get(queryId);\n    if (view) {\n      cancelEvents = cancelEvents.concat(\n        viewRemoveEventRegistration(view, eventRegistration, cancelError)\n      );\n      if (viewIsEmpty(view)) {\n        syncPoint.views.delete(queryId);\n\n        // We'll deal with complete views later.\n        if (!view.query._queryParams.loadsAllData()) {\n          removed.push(view.query);\n        }\n      }\n    }\n  }\n\n  if (hadCompleteView && !syncPointHasCompleteView(syncPoint)) {\n    // We removed our last complete view.\n    removed.push(\n      new (syncPointGetReferenceConstructor())(query._repo, query._path)\n    );\n  }\n\n  return { removed, events: cancelEvents };\n}\n\nexport function syncPointGetQueryViews(syncPoint: SyncPoint): View[] {\n  const result = [];\n  for (const view of syncPoint.views.values()) {\n    if (!view.query._queryParams.loadsAllData()) {\n      result.push(view);\n    }\n  }\n  return result;\n}\n\n/**\n * @param path - The path to the desired complete snapshot\n * @returns A complete cache, if it exists\n */\nexport function syncPointGetCompleteServerCache(\n  syncPoint: SyncPoint,\n  path: Path\n): Node | null {\n  let serverCache: Node | null = null;\n  for (const view of syncPoint.views.values()) {\n    serverCache = serverCache || viewGetCompleteServerCache(view, path);\n  }\n  return serverCache;\n}\n\nexport function syncPointViewForQuery(\n  syncPoint: SyncPoint,\n  query: QueryContext\n): View | null {\n  const params = query._queryParams;\n  if (params.loadsAllData()) {\n    return syncPointGetCompleteView(syncPoint);\n  } else {\n    const queryId = query._queryIdentifier;\n    return syncPoint.views.get(queryId);\n  }\n}\n\nexport function syncPointViewExistsForQuery(\n  syncPoint: SyncPoint,\n  query: QueryContext\n): boolean {\n  return syncPointViewForQuery(syncPoint, query) != null;\n}\n\nexport function syncPointHasCompleteView(syncPoint: SyncPoint): boolean {\n  return syncPointGetCompleteView(syncPoint) != null;\n}\n\nexport function syncPointGetCompleteView(syncPoint: SyncPoint): View | null {\n  for (const view of syncPoint.views.values()) {\n    if (view.query._queryParams.loadsAllData()) {\n      return view;\n    }\n  }\n  return null;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { ReferenceConstructor } from '../api/Reference';\n\nimport { AckUserWrite } from './operation/AckUserWrite';\nimport { ListenComplete } from './operation/ListenComplete';\nimport { Merge } from './operation/Merge';\nimport {\n  newOperationSourceServer,\n  newOperationSourceServerTaggedQuery,\n  newOperationSourceUser,\n  Operation\n} from './operation/Operation';\nimport { Overwrite } from './operation/Overwrite';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Node } from './snap/Node';\nimport {\n  SyncPoint,\n  syncPointAddEventRegistration,\n  syncPointApplyOperation,\n  syncPointGetCompleteServerCache,\n  syncPointGetCompleteView,\n  syncPointGetQueryViews,\n  syncPointGetView,\n  syncPointHasCompleteView,\n  syncPointIsEmpty,\n  syncPointRemoveEventRegistration,\n  syncPointViewExistsForQuery,\n  syncPointViewForQuery\n} from './SyncPoint';\nimport { ImmutableTree } from './util/ImmutableTree';\nimport {\n  newEmptyPath,\n  newRelativePath,\n  Path,\n  pathGetFront,\n  pathIsEmpty\n} from './util/Path';\nimport { each, errorForServerCode } from './util/util';\nimport { CacheNode } from './view/CacheNode';\nimport { Event } from './view/Event';\nimport { EventRegistration, QueryContext } from './view/EventRegistration';\nimport { View, viewGetCompleteNode, viewGetServerCache } from './view/View';\nimport {\n  newWriteTree,\n  WriteTree,\n  writeTreeAddMerge,\n  writeTreeAddOverwrite,\n  writeTreeCalcCompleteEventCache,\n  writeTreeChildWrites,\n  writeTreeGetWrite,\n  WriteTreeRef,\n  writeTreeRefChild,\n  writeTreeRemoveWrite\n} from './WriteTree';\n\nlet referenceConstructor: ReferenceConstructor;\n\nexport function syncTreeSetReferenceConstructor(\n  val: ReferenceConstructor\n): void {\n  assert(\n    !referenceConstructor,\n    '__referenceConstructor has already been defined'\n  );\n  referenceConstructor = val;\n}\n\nfunction syncTreeGetReferenceConstructor(): ReferenceConstructor {\n  assert(referenceConstructor, 'Reference.ts has not been loaded');\n  return referenceConstructor;\n}\n\nexport interface ListenProvider {\n  startListening(\n    query: QueryContext,\n    tag: number | null,\n    hashFn: () => string,\n    onComplete: (a: string, b?: unknown) => Event[]\n  ): Event[];\n\n  stopListening(a: QueryContext, b: number | null): void;\n}\n\n/**\n * Static tracker for next query tag.\n */\nlet syncTreeNextQueryTag_ = 1;\n\nexport function resetSyncTreeTag() {\n  syncTreeNextQueryTag_ = 1;\n}\n\n/**\n * SyncTree is the central class for managing event callback registration, data caching, views\n * (query processing), and event generation.  There are typically two SyncTree instances for\n * each Repo, one for the normal Firebase data, and one for the .info data.\n *\n * It has a number of responsibilities, including:\n *  - Tracking all user event callbacks (registered via addEventRegistration() and removeEventRegistration()).\n *  - Applying and caching data changes for user set(), transaction(), and update() calls\n *    (applyUserOverwrite(), applyUserMerge()).\n *  - Applying and caching data changes for server data changes (applyServerOverwrite(),\n *    applyServerMerge()).\n *  - Generating user-facing events for server and user changes (all of the apply* methods\n *    return the set of events that need to be raised as a result).\n *  - Maintaining the appropriate set of server listens to ensure we are always subscribed\n *    to the correct set of paths and queries to satisfy the current set of user event\n *    callbacks (listens are started/stopped using the provided listenProvider).\n *\n * NOTE: Although SyncTree tracks event callbacks and calculates events to raise, the actual\n * events are returned to the caller rather than raised synchronously.\n *\n */\nexport class SyncTree {\n  /**\n   * Tree of SyncPoints.  There's a SyncPoint at any location that has 1 or more views.\n   */\n  syncPointTree_: ImmutableTree<SyncPoint> = new ImmutableTree<SyncPoint>(null);\n\n  /**\n   * A tree of all pending user writes (user-initiated set()'s, transaction()'s, update()'s, etc.).\n   */\n  pendingWriteTree_: WriteTree = newWriteTree();\n\n  readonly tagToQueryMap: Map<number, string> = new Map();\n  readonly queryToTagMap: Map<string, number> = new Map();\n\n  /**\n   * @param listenProvider_ - Used by SyncTree to start / stop listening\n   *   to server data.\n   */\n  constructor(public listenProvider_: ListenProvider) {}\n}\n\n/**\n * Apply the data changes for a user-generated set() or transaction() call.\n *\n * @returns Events to raise.\n */\nexport function syncTreeApplyUserOverwrite(\n  syncTree: SyncTree,\n  path: Path,\n  newData: Node,\n  writeId: number,\n  visible?: boolean\n): Event[] {\n  // Record pending write.\n  writeTreeAddOverwrite(\n    syncTree.pendingWriteTree_,\n    path,\n    newData,\n    writeId,\n    visible\n  );\n\n  if (!visible) {\n    return [];\n  } else {\n    return syncTreeApplyOperationToSyncPoints_(\n      syncTree,\n      new Overwrite(newOperationSourceUser(), path, newData)\n    );\n  }\n}\n\n/**\n * Apply the data from a user-generated update() call\n *\n * @returns Events to raise.\n */\nexport function syncTreeApplyUserMerge(\n  syncTree: SyncTree,\n  path: Path,\n  changedChildren: { [k: string]: Node },\n  writeId: number\n): Event[] {\n  // Record pending merge.\n  writeTreeAddMerge(syncTree.pendingWriteTree_, path, changedChildren, writeId);\n\n  const changeTree = ImmutableTree.fromObject(changedChildren);\n\n  return syncTreeApplyOperationToSyncPoints_(\n    syncTree,\n    new Merge(newOperationSourceUser(), path, changeTree)\n  );\n}\n\n/**\n * Acknowledge a pending user write that was previously registered with applyUserOverwrite() or applyUserMerge().\n *\n * @param revert - True if the given write failed and needs to be reverted\n * @returns Events to raise.\n */\nexport function syncTreeAckUserWrite(\n  syncTree: SyncTree,\n  writeId: number,\n  revert: boolean = false\n) {\n  const write = writeTreeGetWrite(syncTree.pendingWriteTree_, writeId);\n  const needToReevaluate = writeTreeRemoveWrite(\n    syncTree.pendingWriteTree_,\n    writeId\n  );\n  if (!needToReevaluate) {\n    return [];\n  } else {\n    let affectedTree = new ImmutableTree<boolean>(null);\n    if (write.snap != null) {\n      // overwrite\n      affectedTree = affectedTree.set(newEmptyPath(), true);\n    } else {\n      each(write.children, (pathString: string) => {\n        affectedTree = affectedTree.set(new Path(pathString), true);\n      });\n    }\n    return syncTreeApplyOperationToSyncPoints_(\n      syncTree,\n      new AckUserWrite(write.path, affectedTree, revert)\n    );\n  }\n}\n\n/**\n * Apply new server data for the specified path..\n *\n * @returns Events to raise.\n */\nexport function syncTreeApplyServerOverwrite(\n  syncTree: SyncTree,\n  path: Path,\n  newData: Node\n): Event[] {\n  return syncTreeApplyOperationToSyncPoints_(\n    syncTree,\n    new Overwrite(newOperationSourceServer(), path, newData)\n  );\n}\n\n/**\n * Apply new server data to be merged in at the specified path.\n *\n * @returns Events to raise.\n */\nexport function syncTreeApplyServerMerge(\n  syncTree: SyncTree,\n  path: Path,\n  changedChildren: { [k: string]: Node }\n): Event[] {\n  const changeTree = ImmutableTree.fromObject(changedChildren);\n\n  return syncTreeApplyOperationToSyncPoints_(\n    syncTree,\n    new Merge(newOperationSourceServer(), path, changeTree)\n  );\n}\n\n/**\n * Apply a listen complete for a query\n *\n * @returns Events to raise.\n */\nexport function syncTreeApplyListenComplete(\n  syncTree: SyncTree,\n  path: Path\n): Event[] {\n  return syncTreeApplyOperationToSyncPoints_(\n    syncTree,\n    new ListenComplete(newOperationSourceServer(), path)\n  );\n}\n\n/**\n * Apply a listen complete for a tagged query\n *\n * @returns Events to raise.\n */\nexport function syncTreeApplyTaggedListenComplete(\n  syncTree: SyncTree,\n  path: Path,\n  tag: number\n): Event[] {\n  const queryKey = syncTreeQueryKeyForTag_(syncTree, tag);\n  if (queryKey) {\n    const r = syncTreeParseQueryKey_(queryKey);\n    const queryPath = r.path,\n      queryId = r.queryId;\n    const relativePath = newRelativePath(queryPath, path);\n    const op = new ListenComplete(\n      newOperationSourceServerTaggedQuery(queryId),\n      relativePath\n    );\n    return syncTreeApplyTaggedOperation_(syncTree, queryPath, op);\n  } else {\n    // We've already removed the query. No big deal, ignore the update\n    return [];\n  }\n}\n\n/**\n * Remove event callback(s).\n *\n * If query is the default query, we'll check all queries for the specified eventRegistration.\n * If eventRegistration is null, we'll remove all callbacks for the specified query/queries.\n *\n * @param eventRegistration - If null, all callbacks are removed.\n * @param cancelError - If a cancelError is provided, appropriate cancel events will be returned.\n * @param skipListenerDedup - When performing a `get()`, we don't add any new listeners, so no\n *  deduping needs to take place. This flag allows toggling of that behavior\n * @returns Cancel events, if cancelError was provided.\n */\nexport function syncTreeRemoveEventRegistration(\n  syncTree: SyncTree,\n  query: QueryContext,\n  eventRegistration: EventRegistration | null,\n  cancelError?: Error,\n  skipListenerDedup = false\n): Event[] {\n  // Find the syncPoint first. Then deal with whether or not it has matching listeners\n  const path = query._path;\n  const maybeSyncPoint = syncTree.syncPointTree_.get(path);\n  let cancelEvents: Event[] = [];\n  // A removal on a default query affects all queries at that location. A removal on an indexed query, even one without\n  // other query constraints, does *not* affect all queries at that location. So this check must be for 'default', and\n  // not loadsAllData().\n  if (\n    maybeSyncPoint &&\n    (query._queryIdentifier === 'default' ||\n      syncPointViewExistsForQuery(maybeSyncPoint, query))\n  ) {\n    const removedAndEvents = syncPointRemoveEventRegistration(\n      maybeSyncPoint,\n      query,\n      eventRegistration,\n      cancelError\n    );\n    if (syncPointIsEmpty(maybeSyncPoint)) {\n      syncTree.syncPointTree_ = syncTree.syncPointTree_.remove(path);\n    }\n\n    const removed = removedAndEvents.removed;\n    cancelEvents = removedAndEvents.events;\n\n    if (!skipListenerDedup) {\n      /**\n       * We may have just removed one of many listeners and can short-circuit this whole process\n       * We may also not have removed a default listener, in which case all of the descendant listeners should already be\n       * properly set up.\n       */\n\n      // Since indexed queries can shadow if they don't have other query constraints, check for loadsAllData(), instead of\n      // queryId === 'default'\n      const removingDefault =\n        -1 !==\n        removed.findIndex(query => {\n          return query._queryParams.loadsAllData();\n        });\n      const covered = syncTree.syncPointTree_.findOnPath(\n        path,\n        (relativePath, parentSyncPoint) =>\n          syncPointHasCompleteView(parentSyncPoint)\n      );\n\n      if (removingDefault && !covered) {\n        const subtree = syncTree.syncPointTree_.subtree(path);\n        // There are potentially child listeners. Determine what if any listens we need to send before executing the\n        // removal\n        if (!subtree.isEmpty()) {\n          // We need to fold over our subtree and collect the listeners to send\n          const newViews = syncTreeCollectDistinctViewsForSubTree_(subtree);\n\n          // Ok, we've collected all the listens we need. Set them up.\n          for (let i = 0; i < newViews.length; ++i) {\n            const view = newViews[i],\n              newQuery = view.query;\n            const listener = syncTreeCreateListenerForView_(syncTree, view);\n            syncTree.listenProvider_.startListening(\n              syncTreeQueryForListening_(newQuery),\n              syncTreeTagForQuery(syncTree, newQuery),\n              listener.hashFn,\n              listener.onComplete\n            );\n          }\n        }\n        // Otherwise there's nothing below us, so nothing we need to start listening on\n      }\n      // If we removed anything and we're not covered by a higher up listen, we need to stop listening on this query\n      // The above block has us covered in terms of making sure we're set up on listens lower in the tree.\n      // Also, note that if we have a cancelError, it's already been removed at the provider level.\n      if (!covered && removed.length > 0 && !cancelError) {\n        // If we removed a default, then we weren't listening on any of the other queries here. Just cancel the one\n        // default. Otherwise, we need to iterate through and cancel each individual query\n        if (removingDefault) {\n          // We don't tag default listeners\n          const defaultTag: number | null = null;\n          syncTree.listenProvider_.stopListening(\n            syncTreeQueryForListening_(query),\n            defaultTag\n          );\n        } else {\n          removed.forEach((queryToRemove: QueryContext) => {\n            const tagToRemove = syncTree.queryToTagMap.get(\n              syncTreeMakeQueryKey_(queryToRemove)\n            );\n            syncTree.listenProvider_.stopListening(\n              syncTreeQueryForListening_(queryToRemove),\n              tagToRemove\n            );\n          });\n        }\n      }\n    }\n    // Now, clear all of the tags we're tracking for the removed listens\n    syncTreeRemoveTags_(syncTree, removed);\n  } else {\n    // No-op, this listener must've been already removed\n  }\n  return cancelEvents;\n}\n\n/**\n * Apply new server data for the specified tagged query.\n *\n * @returns Events to raise.\n */\nexport function syncTreeApplyTaggedQueryOverwrite(\n  syncTree: SyncTree,\n  path: Path,\n  snap: Node,\n  tag: number\n): Event[] {\n  const queryKey = syncTreeQueryKeyForTag_(syncTree, tag);\n  if (queryKey != null) {\n    const r = syncTreeParseQueryKey_(queryKey);\n    const queryPath = r.path,\n      queryId = r.queryId;\n    const relativePath = newRelativePath(queryPath, path);\n    const op = new Overwrite(\n      newOperationSourceServerTaggedQuery(queryId),\n      relativePath,\n      snap\n    );\n    return syncTreeApplyTaggedOperation_(syncTree, queryPath, op);\n  } else {\n    // Query must have been removed already\n    return [];\n  }\n}\n\n/**\n * Apply server data to be merged in for the specified tagged query.\n *\n * @returns Events to raise.\n */\nexport function syncTreeApplyTaggedQueryMerge(\n  syncTree: SyncTree,\n  path: Path,\n  changedChildren: { [k: string]: Node },\n  tag: number\n): Event[] {\n  const queryKey = syncTreeQueryKeyForTag_(syncTree, tag);\n  if (queryKey) {\n    const r = syncTreeParseQueryKey_(queryKey);\n    const queryPath = r.path,\n      queryId = r.queryId;\n    const relativePath = newRelativePath(queryPath, path);\n    const changeTree = ImmutableTree.fromObject(changedChildren);\n    const op = new Merge(\n      newOperationSourceServerTaggedQuery(queryId),\n      relativePath,\n      changeTree\n    );\n    return syncTreeApplyTaggedOperation_(syncTree, queryPath, op);\n  } else {\n    // We've already removed the query. No big deal, ignore the update\n    return [];\n  }\n}\n\n/**\n * Add an event callback for the specified query.\n *\n * @returns Events to raise.\n */\nexport function syncTreeAddEventRegistration(\n  syncTree: SyncTree,\n  query: QueryContext,\n  eventRegistration: EventRegistration,\n  skipSetupListener = false\n): Event[] {\n  const path = query._path;\n\n  let serverCache: Node | null = null;\n  let foundAncestorDefaultView = false;\n  // Any covering writes will necessarily be at the root, so really all we need to find is the server cache.\n  // Consider optimizing this once there's a better understanding of what actual behavior will be.\n  syncTree.syncPointTree_.foreachOnPath(path, (pathToSyncPoint, sp) => {\n    const relativePath = newRelativePath(pathToSyncPoint, path);\n    serverCache =\n      serverCache || syncPointGetCompleteServerCache(sp, relativePath);\n    foundAncestorDefaultView =\n      foundAncestorDefaultView || syncPointHasCompleteView(sp);\n  });\n  let syncPoint = syncTree.syncPointTree_.get(path);\n  if (!syncPoint) {\n    syncPoint = new SyncPoint();\n    syncTree.syncPointTree_ = syncTree.syncPointTree_.set(path, syncPoint);\n  } else {\n    foundAncestorDefaultView =\n      foundAncestorDefaultView || syncPointHasCompleteView(syncPoint);\n    serverCache =\n      serverCache || syncPointGetCompleteServerCache(syncPoint, newEmptyPath());\n  }\n\n  let serverCacheComplete;\n  if (serverCache != null) {\n    serverCacheComplete = true;\n  } else {\n    serverCacheComplete = false;\n    serverCache = ChildrenNode.EMPTY_NODE;\n    const subtree = syncTree.syncPointTree_.subtree(path);\n    subtree.foreachChild((childName, childSyncPoint) => {\n      const completeCache = syncPointGetCompleteServerCache(\n        childSyncPoint,\n        newEmptyPath()\n      );\n      if (completeCache) {\n        serverCache = serverCache.updateImmediateChild(\n          childName,\n          completeCache\n        );\n      }\n    });\n  }\n\n  const viewAlreadyExists = syncPointViewExistsForQuery(syncPoint, query);\n  if (!viewAlreadyExists && !query._queryParams.loadsAllData()) {\n    // We need to track a tag for this query\n    const queryKey = syncTreeMakeQueryKey_(query);\n    assert(\n      !syncTree.queryToTagMap.has(queryKey),\n      'View does not exist, but we have a tag'\n    );\n    const tag = syncTreeGetNextQueryTag_();\n    syncTree.queryToTagMap.set(queryKey, tag);\n    syncTree.tagToQueryMap.set(tag, queryKey);\n  }\n  const writesCache = writeTreeChildWrites(syncTree.pendingWriteTree_, path);\n  let events = syncPointAddEventRegistration(\n    syncPoint,\n    query,\n    eventRegistration,\n    writesCache,\n    serverCache,\n    serverCacheComplete\n  );\n  if (!viewAlreadyExists && !foundAncestorDefaultView && !skipSetupListener) {\n    const view = syncPointViewForQuery(syncPoint, query);\n    events = events.concat(syncTreeSetupListener_(syncTree, query, view));\n  }\n  return events;\n}\n\n/**\n * Returns a complete cache, if we have one, of the data at a particular path. If the location does not have a\n * listener above it, we will get a false \"null\". This shouldn't be a problem because transactions will always\n * have a listener above, and atomic operations would correctly show a jitter of <increment value> ->\n *     <incremented total> as the write is applied locally and then acknowledged at the server.\n *\n * Note: this method will *include* hidden writes from transaction with applyLocally set to false.\n *\n * @param path - The path to the data we want\n * @param writeIdsToExclude - A specific set to be excluded\n */\nexport function syncTreeCalcCompleteEventCache(\n  syncTree: SyncTree,\n  path: Path,\n  writeIdsToExclude?: number[]\n): Node {\n  const includeHiddenSets = true;\n  const writeTree = syncTree.pendingWriteTree_;\n  const serverCache = syncTree.syncPointTree_.findOnPath(\n    path,\n    (pathSoFar, syncPoint) => {\n      const relativePath = newRelativePath(pathSoFar, path);\n      const serverCache = syncPointGetCompleteServerCache(\n        syncPoint,\n        relativePath\n      );\n      if (serverCache) {\n        return serverCache;\n      }\n    }\n  );\n  return writeTreeCalcCompleteEventCache(\n    writeTree,\n    path,\n    serverCache,\n    writeIdsToExclude,\n    includeHiddenSets\n  );\n}\n\nexport function syncTreeGetServerValue(\n  syncTree: SyncTree,\n  query: QueryContext\n): Node | null {\n  const path = query._path;\n  let serverCache: Node | null = null;\n  // Any covering writes will necessarily be at the root, so really all we need to find is the server cache.\n  // Consider optimizing this once there's a better understanding of what actual behavior will be.\n  syncTree.syncPointTree_.foreachOnPath(path, (pathToSyncPoint, sp) => {\n    const relativePath = newRelativePath(pathToSyncPoint, path);\n    serverCache =\n      serverCache || syncPointGetCompleteServerCache(sp, relativePath);\n  });\n  let syncPoint = syncTree.syncPointTree_.get(path);\n  if (!syncPoint) {\n    syncPoint = new SyncPoint();\n    syncTree.syncPointTree_ = syncTree.syncPointTree_.set(path, syncPoint);\n  } else {\n    serverCache =\n      serverCache || syncPointGetCompleteServerCache(syncPoint, newEmptyPath());\n  }\n  const serverCacheComplete = serverCache != null;\n  const serverCacheNode: CacheNode | null = serverCacheComplete\n    ? new CacheNode(serverCache, true, false)\n    : null;\n  const writesCache: WriteTreeRef | null = writeTreeChildWrites(\n    syncTree.pendingWriteTree_,\n    query._path\n  );\n  const view: View = syncPointGetView(\n    syncPoint,\n    query,\n    writesCache,\n    serverCacheComplete ? serverCacheNode.getNode() : ChildrenNode.EMPTY_NODE,\n    serverCacheComplete\n  );\n  return viewGetCompleteNode(view);\n}\n\n/**\n * A helper method that visits all descendant and ancestor SyncPoints, applying the operation.\n *\n * NOTES:\n * - Descendant SyncPoints will be visited first (since we raise events depth-first).\n *\n * - We call applyOperation() on each SyncPoint passing three things:\n *   1. A version of the Operation that has been made relative to the SyncPoint location.\n *   2. A WriteTreeRef of any writes we have cached at the SyncPoint location.\n *   3. A snapshot Node with cached server data, if we have it.\n *\n * - We concatenate all of the events returned by each SyncPoint and return the result.\n */\nfunction syncTreeApplyOperationToSyncPoints_(\n  syncTree: SyncTree,\n  operation: Operation\n): Event[] {\n  return syncTreeApplyOperationHelper_(\n    operation,\n    syncTree.syncPointTree_,\n    /*serverCache=*/ null,\n    writeTreeChildWrites(syncTree.pendingWriteTree_, newEmptyPath())\n  );\n}\n\n/**\n * Recursive helper for applyOperationToSyncPoints_\n */\nfunction syncTreeApplyOperationHelper_(\n  operation: Operation,\n  syncPointTree: ImmutableTree<SyncPoint>,\n  serverCache: Node | null,\n  writesCache: WriteTreeRef\n): Event[] {\n  if (pathIsEmpty(operation.path)) {\n    return syncTreeApplyOperationDescendantsHelper_(\n      operation,\n      syncPointTree,\n      serverCache,\n      writesCache\n    );\n  } else {\n    const syncPoint = syncPointTree.get(newEmptyPath());\n\n    // If we don't have cached server data, see if we can get it from this SyncPoint.\n    if (serverCache == null && syncPoint != null) {\n      serverCache = syncPointGetCompleteServerCache(syncPoint, newEmptyPath());\n    }\n\n    let events: Event[] = [];\n    const childName = pathGetFront(operation.path);\n    const childOperation = operation.operationForChild(childName);\n    const childTree = syncPointTree.children.get(childName);\n    if (childTree && childOperation) {\n      const childServerCache = serverCache\n        ? serverCache.getImmediateChild(childName)\n        : null;\n      const childWritesCache = writeTreeRefChild(writesCache, childName);\n      events = events.concat(\n        syncTreeApplyOperationHelper_(\n          childOperation,\n          childTree,\n          childServerCache,\n          childWritesCache\n        )\n      );\n    }\n\n    if (syncPoint) {\n      events = events.concat(\n        syncPointApplyOperation(syncPoint, operation, writesCache, serverCache)\n      );\n    }\n\n    return events;\n  }\n}\n\n/**\n * Recursive helper for applyOperationToSyncPoints_\n */\nfunction syncTreeApplyOperationDescendantsHelper_(\n  operation: Operation,\n  syncPointTree: ImmutableTree<SyncPoint>,\n  serverCache: Node | null,\n  writesCache: WriteTreeRef\n): Event[] {\n  const syncPoint = syncPointTree.get(newEmptyPath());\n\n  // If we don't have cached server data, see if we can get it from this SyncPoint.\n  if (serverCache == null && syncPoint != null) {\n    serverCache = syncPointGetCompleteServerCache(syncPoint, newEmptyPath());\n  }\n\n  let events: Event[] = [];\n  syncPointTree.children.inorderTraversal((childName, childTree) => {\n    const childServerCache = serverCache\n      ? serverCache.getImmediateChild(childName)\n      : null;\n    const childWritesCache = writeTreeRefChild(writesCache, childName);\n    const childOperation = operation.operationForChild(childName);\n    if (childOperation) {\n      events = events.concat(\n        syncTreeApplyOperationDescendantsHelper_(\n          childOperation,\n          childTree,\n          childServerCache,\n          childWritesCache\n        )\n      );\n    }\n  });\n\n  if (syncPoint) {\n    events = events.concat(\n      syncPointApplyOperation(syncPoint, operation, writesCache, serverCache)\n    );\n  }\n\n  return events;\n}\n\nfunction syncTreeCreateListenerForView_(\n  syncTree: SyncTree,\n  view: View\n): { hashFn(): string; onComplete(a: string, b?: unknown): Event[] } {\n  const query = view.query;\n  const tag = syncTreeTagForQuery(syncTree, query);\n\n  return {\n    hashFn: () => {\n      const cache = viewGetServerCache(view) || ChildrenNode.EMPTY_NODE;\n      return cache.hash();\n    },\n    onComplete: (status: string): Event[] => {\n      if (status === 'ok') {\n        if (tag) {\n          return syncTreeApplyTaggedListenComplete(syncTree, query._path, tag);\n        } else {\n          return syncTreeApplyListenComplete(syncTree, query._path);\n        }\n      } else {\n        // If a listen failed, kill all of the listeners here, not just the one that triggered the error.\n        // Note that this may need to be scoped to just this listener if we change permissions on filtered children\n        const error = errorForServerCode(status, query);\n        return syncTreeRemoveEventRegistration(\n          syncTree,\n          query,\n          /*eventRegistration*/ null,\n          error\n        );\n      }\n    }\n  };\n}\n\n/**\n * Return the tag associated with the given query.\n */\nexport function syncTreeTagForQuery(\n  syncTree: SyncTree,\n  query: QueryContext\n): number | null {\n  const queryKey = syncTreeMakeQueryKey_(query);\n  return syncTree.queryToTagMap.get(queryKey);\n}\n\n/**\n * Given a query, computes a \"queryKey\" suitable for use in our queryToTagMap_.\n */\nfunction syncTreeMakeQueryKey_(query: QueryContext): string {\n  return query._path.toString() + '$' + query._queryIdentifier;\n}\n\n/**\n * Return the query associated with the given tag, if we have one\n */\nfunction syncTreeQueryKeyForTag_(\n  syncTree: SyncTree,\n  tag: number\n): string | null {\n  return syncTree.tagToQueryMap.get(tag);\n}\n\n/**\n * Given a queryKey (created by makeQueryKey), parse it back into a path and queryId.\n */\nfunction syncTreeParseQueryKey_(queryKey: string): {\n  queryId: string;\n  path: Path;\n} {\n  const splitIndex = queryKey.indexOf('$');\n  assert(\n    splitIndex !== -1 && splitIndex < queryKey.length - 1,\n    'Bad queryKey.'\n  );\n  return {\n    queryId: queryKey.substr(splitIndex + 1),\n    path: new Path(queryKey.substr(0, splitIndex))\n  };\n}\n\n/**\n * A helper method to apply tagged operations\n */\nfunction syncTreeApplyTaggedOperation_(\n  syncTree: SyncTree,\n  queryPath: Path,\n  operation: Operation\n): Event[] {\n  const syncPoint = syncTree.syncPointTree_.get(queryPath);\n  assert(syncPoint, \"Missing sync point for query tag that we're tracking\");\n  const writesCache = writeTreeChildWrites(\n    syncTree.pendingWriteTree_,\n    queryPath\n  );\n  return syncPointApplyOperation(syncPoint, operation, writesCache, null);\n}\n\n/**\n * This collapses multiple unfiltered views into a single view, since we only need a single\n * listener for them.\n */\nfunction syncTreeCollectDistinctViewsForSubTree_(\n  subtree: ImmutableTree<SyncPoint>\n): View[] {\n  return subtree.fold<View[]>((relativePath, maybeChildSyncPoint, childMap) => {\n    if (maybeChildSyncPoint && syncPointHasCompleteView(maybeChildSyncPoint)) {\n      const completeView = syncPointGetCompleteView(maybeChildSyncPoint);\n      return [completeView];\n    } else {\n      // No complete view here, flatten any deeper listens into an array\n      let views: View[] = [];\n      if (maybeChildSyncPoint) {\n        views = syncPointGetQueryViews(maybeChildSyncPoint);\n      }\n      each(childMap, (_key: string, childViews: View[]) => {\n        views = views.concat(childViews);\n      });\n      return views;\n    }\n  });\n}\n\n/**\n * Normalizes a query to a query we send the server for listening\n *\n * @returns The normalized query\n */\nfunction syncTreeQueryForListening_(query: QueryContext): QueryContext {\n  if (query._queryParams.loadsAllData() && !query._queryParams.isDefault()) {\n    // We treat queries that load all data as default queries\n    // Cast is necessary because ref() technically returns Firebase which is actually fb.api.Firebase which inherits\n    // from Query\n    return new (syncTreeGetReferenceConstructor())(query._repo, query._path);\n  } else {\n    return query;\n  }\n}\n\nfunction syncTreeRemoveTags_(syncTree: SyncTree, queries: QueryContext[]) {\n  for (let j = 0; j < queries.length; ++j) {\n    const removedQuery = queries[j];\n    if (!removedQuery._queryParams.loadsAllData()) {\n      // We should have a tag for this\n      const removedQueryKey = syncTreeMakeQueryKey_(removedQuery);\n      const removedQueryTag = syncTree.queryToTagMap.get(removedQueryKey);\n      syncTree.queryToTagMap.delete(removedQueryKey);\n      syncTree.tagToQueryMap.delete(removedQueryTag);\n    }\n  }\n}\n\n/**\n * Static accessor for query tags.\n */\nfunction syncTreeGetNextQueryTag_(): number {\n  return syncTreeNextQueryTag_++;\n}\n\n/**\n * For a given new listen, manage the de-duplication of outstanding subscriptions.\n *\n * @returns This method can return events to support synchronous data sources\n */\nfunction syncTreeSetupListener_(\n  syncTree: SyncTree,\n  query: QueryContext,\n  view: View\n): Event[] {\n  const path = query._path;\n  const tag = syncTreeTagForQuery(syncTree, query);\n  const listener = syncTreeCreateListenerForView_(syncTree, view);\n\n  const events = syncTree.listenProvider_.startListening(\n    syncTreeQueryForListening_(query),\n    tag,\n    listener.hashFn,\n    listener.onComplete\n  );\n\n  const subtree = syncTree.syncPointTree_.subtree(path);\n  // The root of this subtree has our query. We're here because we definitely need to send a listen for that, but we\n  // may need to shadow other listens as well.\n  if (tag) {\n    assert(\n      !syncPointHasCompleteView(subtree.value),\n      \"If we're adding a query, it shouldn't be shadowed\"\n    );\n  } else {\n    // Shadow everything at or below this location, this is a default listener.\n    const queriesToStop = subtree.fold<QueryContext[]>(\n      (relativePath, maybeChildSyncPoint, childMap) => {\n        if (\n          !pathIsEmpty(relativePath) &&\n          maybeChildSyncPoint &&\n          syncPointHasCompleteView(maybeChildSyncPoint)\n        ) {\n          return [syncPointGetCompleteView(maybeChildSyncPoint).query];\n        } else {\n          // No default listener here, flatten any deeper queries into an array\n          let queries: QueryContext[] = [];\n          if (maybeChildSyncPoint) {\n            queries = queries.concat(\n              syncPointGetQueryViews(maybeChildSyncPoint).map(\n                view => view.query\n              )\n            );\n          }\n          each(childMap, (_key: string, childQueries: QueryContext[]) => {\n            queries = queries.concat(childQueries);\n          });\n          return queries;\n        }\n      }\n    );\n    for (let i = 0; i < queriesToStop.length; ++i) {\n      const queryToStop = queriesToStop[i];\n      syncTree.listenProvider_.stopListening(\n        syncTreeQueryForListening_(queryToStop),\n        syncTreeTagForQuery(syncTree, queryToStop)\n      );\n    }\n  }\n  return events;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { ChildrenNode } from '../snap/ChildrenNode';\nimport { PRIORITY_INDEX } from '../snap/indexes/PriorityIndex';\nimport { LeafNode } from '../snap/LeafNode';\nimport { Node } from '../snap/Node';\nimport { nodeFromJSON } from '../snap/nodeFromJSON';\nimport { SyncTree, syncTreeCalcCompleteEventCache } from '../SyncTree';\n\nimport { Indexable } from './misc';\nimport { Path, pathChild } from './Path';\n\n/* It's critical for performance that we do not calculate actual values from a SyncTree\n * unless and until the value is needed. Because we expose both a SyncTree and Node\n * version of deferred value resolution, we ned a wrapper class that will let us share\n * code.\n *\n * @see https://github.com/firebase/firebase-js-sdk/issues/2487\n */\ninterface ValueProvider {\n  getImmediateChild(childName: string): ValueProvider;\n  node(): Node;\n}\n\nclass ExistingValueProvider implements ValueProvider {\n  constructor(readonly node_: Node) {}\n\n  getImmediateChild(childName: string): ValueProvider {\n    const child = this.node_.getImmediateChild(childName);\n    return new ExistingValueProvider(child);\n  }\n\n  node(): Node {\n    return this.node_;\n  }\n}\n\nclass DeferredValueProvider implements ValueProvider {\n  private syncTree_: SyncTree;\n  private path_: Path;\n\n  constructor(syncTree: SyncTree, path: Path) {\n    this.syncTree_ = syncTree;\n    this.path_ = path;\n  }\n\n  getImmediateChild(childName: string): ValueProvider {\n    const childPath = pathChild(this.path_, childName);\n    return new DeferredValueProvider(this.syncTree_, childPath);\n  }\n\n  node(): Node {\n    return syncTreeCalcCompleteEventCache(this.syncTree_, this.path_);\n  }\n}\n\n/**\n * Generate placeholders for deferred values.\n */\nexport const generateWithValues = function (\n  values: {\n    [k: string]: unknown;\n  } | null\n): { [k: string]: unknown } {\n  values = values || {};\n  values['timestamp'] = values['timestamp'] || new Date().getTime();\n  return values;\n};\n\n/**\n * Value to use when firing local events. When writing server values, fire\n * local events with an approximate value, otherwise return value as-is.\n */\nexport const resolveDeferredLeafValue = function (\n  value: { [k: string]: unknown } | string | number | boolean,\n  existingVal: ValueProvider,\n  serverValues: { [k: string]: unknown }\n): string | number | boolean {\n  if (!value || typeof value !== 'object') {\n    return value as string | number | boolean;\n  }\n  assert('.sv' in value, 'Unexpected leaf node or priority contents');\n\n  if (typeof value['.sv'] === 'string') {\n    return resolveScalarDeferredValue(value['.sv'], existingVal, serverValues);\n  } else if (typeof value['.sv'] === 'object') {\n    return resolveComplexDeferredValue(value['.sv'], existingVal, serverValues);\n  } else {\n    assert(false, 'Unexpected server value: ' + JSON.stringify(value, null, 2));\n  }\n};\n\nconst resolveScalarDeferredValue = function (\n  op: string,\n  existing: ValueProvider,\n  serverValues: { [k: string]: unknown }\n): string | number | boolean {\n  switch (op) {\n    case 'timestamp':\n      return serverValues['timestamp'] as string | number | boolean;\n    default:\n      assert(false, 'Unexpected server value: ' + op);\n  }\n};\n\nconst resolveComplexDeferredValue = function (\n  op: object,\n  existing: ValueProvider,\n  unused: { [k: string]: unknown }\n): string | number | boolean {\n  if (!op.hasOwnProperty('increment')) {\n    assert(false, 'Unexpected server value: ' + JSON.stringify(op, null, 2));\n  }\n  const delta = op['increment'];\n  if (typeof delta !== 'number') {\n    assert(false, 'Unexpected increment value: ' + delta);\n  }\n\n  const existingNode = existing.node();\n  assert(\n    existingNode !== null && typeof existingNode !== 'undefined',\n    'Expected ChildrenNode.EMPTY_NODE for nulls'\n  );\n\n  // Incrementing a non-number sets the value to the incremented amount\n  if (!existingNode.isLeafNode()) {\n    return delta;\n  }\n\n  const leaf = existingNode as LeafNode;\n  const existingVal = leaf.getValue();\n  if (typeof existingVal !== 'number') {\n    return delta;\n  }\n\n  // No need to do over/underflow arithmetic here because JS only handles floats under the covers\n  return existingVal + delta;\n};\n\n/**\n * Recursively replace all deferred values and priorities in the tree with the\n * specified generated replacement values.\n * @param path - path to which write is relative\n * @param node - new data written at path\n * @param syncTree - current data\n */\nexport const resolveDeferredValueTree = function (\n  path: Path,\n  node: Node,\n  syncTree: SyncTree,\n  serverValues: Indexable\n): Node {\n  return resolveDeferredValue(\n    node,\n    new DeferredValueProvider(syncTree, path),\n    serverValues\n  );\n};\n\n/**\n * Recursively replace all deferred values and priorities in the node with the\n * specified generated replacement values.  If there are no server values in the node,\n * it'll be returned as-is.\n */\nexport const resolveDeferredValueSnapshot = function (\n  node: Node,\n  existing: Node,\n  serverValues: Indexable\n): Node {\n  return resolveDeferredValue(\n    node,\n    new ExistingValueProvider(existing),\n    serverValues\n  );\n};\n\nfunction resolveDeferredValue(\n  node: Node,\n  existingVal: ValueProvider,\n  serverValues: Indexable\n): Node {\n  const rawPri = node.getPriority().val() as\n    | Indexable\n    | boolean\n    | null\n    | number\n    | string;\n  const priority = resolveDeferredLeafValue(\n    rawPri,\n    existingVal.getImmediateChild('.priority'),\n    serverValues\n  );\n  let newNode: Node;\n\n  if (node.isLeafNode()) {\n    const leafNode = node as LeafNode;\n    const value = resolveDeferredLeafValue(\n      leafNode.getValue(),\n      existingVal,\n      serverValues\n    );\n    if (\n      value !== leafNode.getValue() ||\n      priority !== leafNode.getPriority().val()\n    ) {\n      return new LeafNode(value, nodeFromJSON(priority));\n    } else {\n      return node;\n    }\n  } else {\n    const childrenNode = node as ChildrenNode;\n    newNode = childrenNode;\n    if (priority !== childrenNode.getPriority().val()) {\n      newNode = newNode.updatePriority(new LeafNode(priority));\n    }\n    childrenNode.forEachChild(PRIORITY_INDEX, (childName, childNode) => {\n      const newChildNode = resolveDeferredValue(\n        childNode,\n        existingVal.getImmediateChild(childName),\n        serverValues\n      );\n      if (newChildNode !== childNode) {\n        newNode = newNode.updateImmediateChild(childName, newChildNode);\n      }\n    });\n    return newNode;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { contains, safeGet } from '@firebase/util';\n\nimport { Path, pathGetFront, pathPopFront } from './Path';\nimport { each } from './util';\n\n/**\n * Node in a Tree.\n */\nexport interface TreeNode<T> {\n  // TODO: Consider making accessors that create children and value lazily or\n  // separate Internal / Leaf 'types'.\n  children: Record<string, TreeNode<T>>;\n  childCount: number;\n  value?: T;\n}\n\n/**\n * A light-weight tree, traversable by path.  Nodes can have both values and children.\n * Nodes are not enumerated (by forEachChild) unless they have a value or non-empty\n * children.\n */\nexport class Tree<T> {\n  /**\n   * @param name - Optional name of the node.\n   * @param parent - Optional parent node.\n   * @param node - Optional node to wrap.\n   */\n  constructor(\n    readonly name: string = '',\n    readonly parent: Tree<T> | null = null,\n    public node: TreeNode<T> = { children: {}, childCount: 0 }\n  ) {}\n}\n\n/**\n * Returns a sub-Tree for the given path.\n *\n * @param pathObj - Path to look up.\n * @returns Tree for path.\n */\nexport function treeSubTree<T>(tree: Tree<T>, pathObj: string | Path): Tree<T> {\n  // TODO: Require pathObj to be Path?\n  let path = pathObj instanceof Path ? pathObj : new Path(pathObj);\n  let child = tree,\n    next = pathGetFront(path);\n  while (next !== null) {\n    const childNode = safeGet(child.node.children, next) || {\n      children: {},\n      childCount: 0\n    };\n    child = new Tree<T>(next, child, childNode);\n    path = pathPopFront(path);\n    next = pathGetFront(path);\n  }\n\n  return child;\n}\n\n/**\n * Returns the data associated with this tree node.\n *\n * @returns The data or null if no data exists.\n */\nexport function treeGetValue<T>(tree: Tree<T>): T | undefined {\n  return tree.node.value;\n}\n\n/**\n * Sets data to this tree node.\n *\n * @param value - Value to set.\n */\nexport function treeSetValue<T>(tree: Tree<T>, value: T | undefined): void {\n  tree.node.value = value;\n  treeUpdateParents(tree);\n}\n\n/**\n * @returns Whether the tree has any children.\n */\nexport function treeHasChildren<T>(tree: Tree<T>): boolean {\n  return tree.node.childCount > 0;\n}\n\n/**\n * @returns Whethe rthe tree is empty (no value or children).\n */\nexport function treeIsEmpty<T>(tree: Tree<T>): boolean {\n  return treeGetValue(tree) === undefined && !treeHasChildren(tree);\n}\n\n/**\n * Calls action for each child of this tree node.\n *\n * @param action - Action to be called for each child.\n */\nexport function treeForEachChild<T>(\n  tree: Tree<T>,\n  action: (tree: Tree<T>) => void\n): void {\n  each(tree.node.children, (child: string, childTree: TreeNode<T>) => {\n    action(new Tree<T>(child, tree, childTree));\n  });\n}\n\n/**\n * Does a depth-first traversal of this node's descendants, calling action for each one.\n *\n * @param action - Action to be called for each child.\n * @param includeSelf - Whether to call action on this node as well. Defaults to\n *   false.\n * @param childrenFirst - Whether to call action on children before calling it on\n *   parent.\n */\nexport function treeForEachDescendant<T>(\n  tree: Tree<T>,\n  action: (tree: Tree<T>) => void,\n  includeSelf?: boolean,\n  childrenFirst?: boolean\n): void {\n  if (includeSelf && !childrenFirst) {\n    action(tree);\n  }\n\n  treeForEachChild(tree, child => {\n    treeForEachDescendant(child, action, true, childrenFirst);\n  });\n\n  if (includeSelf && childrenFirst) {\n    action(tree);\n  }\n}\n\n/**\n * Calls action on each ancestor node.\n *\n * @param action - Action to be called on each parent; return\n *   true to abort.\n * @param includeSelf - Whether to call action on this node as well.\n * @returns true if the action callback returned true.\n */\nexport function treeForEachAncestor<T>(\n  tree: Tree<T>,\n  action: (tree: Tree<T>) => unknown,\n  includeSelf?: boolean\n): boolean {\n  let node = includeSelf ? tree : tree.parent;\n  while (node !== null) {\n    if (action(node)) {\n      return true;\n    }\n    node = node.parent;\n  }\n  return false;\n}\n\n/**\n * Does a depth-first traversal of this node's descendants.  When a descendant with a value\n * is found, action is called on it and traversal does not continue inside the node.\n * Action is *not* called on this node.\n *\n * @param action - Action to be called for each child.\n */\nexport function treeForEachImmediateDescendantWithValue<T>(\n  tree: Tree<T>,\n  action: (tree: Tree<T>) => void\n): void {\n  treeForEachChild(tree, child => {\n    if (treeGetValue(child) !== undefined) {\n      action(child);\n    } else {\n      treeForEachImmediateDescendantWithValue(child, action);\n    }\n  });\n}\n\n/**\n * @returns The path of this tree node, as a Path.\n */\nexport function treeGetPath<T>(tree: Tree<T>) {\n  return new Path(\n    tree.parent === null\n      ? tree.name\n      : treeGetPath(tree.parent) + '/' + tree.name\n  );\n}\n\n/**\n * Adds or removes this child from its parent based on whether it's empty or not.\n */\nfunction treeUpdateParents<T>(tree: Tree<T>) {\n  if (tree.parent !== null) {\n    treeUpdateChild(tree.parent, tree.name, tree);\n  }\n}\n\n/**\n * Adds or removes the passed child to this tree node, depending on whether it's empty.\n *\n * @param childName - The name of the child to update.\n * @param child - The child to update.\n */\nfunction treeUpdateChild<T>(tree: Tree<T>, childName: string, child: Tree<T>) {\n  const childEmpty = treeIsEmpty(child);\n  const childExists = contains(tree.node.children, childName);\n  if (childEmpty && childExists) {\n    delete tree.node.children[childName];\n    tree.node.childCount--;\n    treeUpdateParents(tree);\n  } else if (!childEmpty && !childExists) {\n    tree.node.children[childName] = child.node;\n    tree.node.childCount++;\n    treeUpdateParents(tree);\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  contains,\n  errorPrefix as errorPrefixFxn,\n  safeGet,\n  stringLength\n} from '@firebase/util';\n\nimport { RepoInfo } from '../RepoInfo';\n\nimport {\n  Path,\n  pathChild,\n  pathCompare,\n  pathContains,\n  pathGetBack,\n  pathGetFront,\n  pathSlice,\n  ValidationPath,\n  validationPathPop,\n  validationPathPush,\n  validationPathToErrorString\n} from './Path';\nimport { each, isInvalidJSONNumber } from './util';\n\n/**\n * True for invalid Firebase keys\n */\nexport const INVALID_KEY_REGEX_ = /[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/;\n\n/**\n * True for invalid Firebase paths.\n * Allows '/' in paths.\n */\nexport const INVALID_PATH_REGEX_ = /[\\[\\].#$\\u0000-\\u001F\\u007F]/;\n\n/**\n * Maximum number of characters to allow in leaf value\n */\nexport const MAX_LEAF_SIZE_ = 10 * 1024 * 1024;\n\nexport const isValidKey = function (key: unknown): boolean {\n  return (\n    typeof key === 'string' && key.length !== 0 && !INVALID_KEY_REGEX_.test(key)\n  );\n};\n\nexport const isValidPathString = function (pathString: string): boolean {\n  return (\n    typeof pathString === 'string' &&\n    pathString.length !== 0 &&\n    !INVALID_PATH_REGEX_.test(pathString)\n  );\n};\n\nexport const isValidRootPathString = function (pathString: string): boolean {\n  if (pathString) {\n    // Allow '/.info/' at the beginning.\n    pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\n  }\n\n  return isValidPathString(pathString);\n};\n\nexport const isValidPriority = function (priority: unknown): boolean {\n  return (\n    priority === null ||\n    typeof priority === 'string' ||\n    (typeof priority === 'number' && !isInvalidJSONNumber(priority)) ||\n    (priority &&\n      typeof priority === 'object' &&\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      contains(priority as any, '.sv'))\n  );\n};\n\n/**\n * Pre-validate a datum passed as an argument to Firebase function.\n */\nexport const validateFirebaseDataArg = function (\n  fnName: string,\n  value: unknown,\n  path: Path,\n  optional: boolean\n) {\n  if (optional && value === undefined) {\n    return;\n  }\n\n  validateFirebaseData(errorPrefixFxn(fnName, 'value'), value, path);\n};\n\n/**\n * Validate a data object client-side before sending to server.\n */\nexport const validateFirebaseData = function (\n  errorPrefix: string,\n  data: unknown,\n  path_: Path | ValidationPath\n) {\n  const path =\n    path_ instanceof Path ? new ValidationPath(path_, errorPrefix) : path_;\n\n  if (data === undefined) {\n    throw new Error(\n      errorPrefix + 'contains undefined ' + validationPathToErrorString(path)\n    );\n  }\n  if (typeof data === 'function') {\n    throw new Error(\n      errorPrefix +\n        'contains a function ' +\n        validationPathToErrorString(path) +\n        ' with contents = ' +\n        data.toString()\n    );\n  }\n  if (isInvalidJSONNumber(data)) {\n    throw new Error(\n      errorPrefix +\n        'contains ' +\n        data.toString() +\n        ' ' +\n        validationPathToErrorString(path)\n    );\n  }\n\n  // Check max leaf size, but try to avoid the utf8 conversion if we can.\n  if (\n    typeof data === 'string' &&\n    data.length > MAX_LEAF_SIZE_ / 3 &&\n    stringLength(data) > MAX_LEAF_SIZE_\n  ) {\n    throw new Error(\n      errorPrefix +\n        'contains a string greater than ' +\n        MAX_LEAF_SIZE_ +\n        ' utf8 bytes ' +\n        validationPathToErrorString(path) +\n        \" ('\" +\n        data.substring(0, 50) +\n        \"...')\"\n    );\n  }\n\n  // TODO = Perf = Consider combining the recursive validation of keys into NodeFromJSON\n  // to save extra walking of large objects.\n  if (data && typeof data === 'object') {\n    let hasDotValue = false;\n    let hasActualChild = false;\n    each(data, (key: string, value: unknown) => {\n      if (key === '.value') {\n        hasDotValue = true;\n      } else if (key !== '.priority' && key !== '.sv') {\n        hasActualChild = true;\n        if (!isValidKey(key)) {\n          throw new Error(\n            errorPrefix +\n              ' contains an invalid key (' +\n              key +\n              ') ' +\n              validationPathToErrorString(path) +\n              '.  Keys must be non-empty strings ' +\n              'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"'\n          );\n        }\n      }\n\n      validationPathPush(path, key);\n      validateFirebaseData(errorPrefix, value, path);\n      validationPathPop(path);\n    });\n\n    if (hasDotValue && hasActualChild) {\n      throw new Error(\n        errorPrefix +\n          ' contains \".value\" child ' +\n          validationPathToErrorString(path) +\n          ' in addition to actual children.'\n      );\n    }\n  }\n};\n\n/**\n * Pre-validate paths passed in the firebase function.\n */\nexport const validateFirebaseMergePaths = function (\n  errorPrefix: string,\n  mergePaths: Path[]\n) {\n  let i, curPath: Path;\n  for (i = 0; i < mergePaths.length; i++) {\n    curPath = mergePaths[i];\n    const keys = pathSlice(curPath);\n    for (let j = 0; j < keys.length; j++) {\n      if (keys[j] === '.priority' && j === keys.length - 1) {\n        // .priority is OK\n      } else if (!isValidKey(keys[j])) {\n        throw new Error(\n          errorPrefix +\n            'contains an invalid key (' +\n            keys[j] +\n            ') in path ' +\n            curPath.toString() +\n            '. Keys must be non-empty strings ' +\n            'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"'\n        );\n      }\n    }\n  }\n\n  // Check that update keys are not descendants of each other.\n  // We rely on the property that sorting guarantees that ancestors come\n  // right before descendants.\n  mergePaths.sort(pathCompare);\n  let prevPath: Path | null = null;\n  for (i = 0; i < mergePaths.length; i++) {\n    curPath = mergePaths[i];\n    if (prevPath !== null && pathContains(prevPath, curPath)) {\n      throw new Error(\n        errorPrefix +\n          'contains a path ' +\n          prevPath.toString() +\n          ' that is ancestor of another path ' +\n          curPath.toString()\n      );\n    }\n    prevPath = curPath;\n  }\n};\n\n/**\n * pre-validate an object passed as an argument to firebase function (\n * must be an object - e.g. for firebase.update()).\n */\nexport const validateFirebaseMergeDataArg = function (\n  fnName: string,\n  data: unknown,\n  path: Path,\n  optional: boolean\n) {\n  if (optional && data === undefined) {\n    return;\n  }\n\n  const errorPrefix = errorPrefixFxn(fnName, 'values');\n\n  if (!(data && typeof data === 'object') || Array.isArray(data)) {\n    throw new Error(\n      errorPrefix + ' must be an object containing the children to replace.'\n    );\n  }\n\n  const mergePaths: Path[] = [];\n  each(data, (key: string, value: unknown) => {\n    const curPath = new Path(key);\n    validateFirebaseData(errorPrefix, value, pathChild(path, curPath));\n    if (pathGetBack(curPath) === '.priority') {\n      if (!isValidPriority(value)) {\n        throw new Error(\n          errorPrefix +\n            \"contains an invalid value for '\" +\n            curPath.toString() +\n            \"', which must be a valid \" +\n            'Firebase priority (a string, finite number, server value, or null).'\n        );\n      }\n    }\n    mergePaths.push(curPath);\n  });\n  validateFirebaseMergePaths(errorPrefix, mergePaths);\n};\n\nexport const validatePriority = function (\n  fnName: string,\n  priority: unknown,\n  optional: boolean\n) {\n  if (optional && priority === undefined) {\n    return;\n  }\n  if (isInvalidJSONNumber(priority)) {\n    throw new Error(\n      errorPrefixFxn(fnName, 'priority') +\n        'is ' +\n        priority.toString() +\n        ', but must be a valid Firebase priority (a string, finite number, ' +\n        'server value, or null).'\n    );\n  }\n  // Special case to allow importing data with a .sv.\n  if (!isValidPriority(priority)) {\n    throw new Error(\n      errorPrefixFxn(fnName, 'priority') +\n        'must be a valid Firebase priority ' +\n        '(a string, finite number, server value, or null).'\n    );\n  }\n};\n\nexport const validateKey = function (\n  fnName: string,\n  argumentName: string,\n  key: string,\n  optional: boolean\n) {\n  if (optional && key === undefined) {\n    return;\n  }\n  if (!isValidKey(key)) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentName) +\n        'was an invalid key = \"' +\n        key +\n        '\".  Firebase keys must be non-empty strings and ' +\n        'can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").'\n    );\n  }\n};\n\n/**\n * @internal\n */\nexport const validatePathString = function (\n  fnName: string,\n  argumentName: string,\n  pathString: string,\n  optional: boolean\n) {\n  if (optional && pathString === undefined) {\n    return;\n  }\n\n  if (!isValidPathString(pathString)) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentName) +\n        'was an invalid path = \"' +\n        pathString +\n        '\". Paths must be non-empty strings and ' +\n        'can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"'\n    );\n  }\n};\n\nexport const validateRootPathString = function (\n  fnName: string,\n  argumentName: string,\n  pathString: string,\n  optional: boolean\n) {\n  if (pathString) {\n    // Allow '/.info/' at the beginning.\n    pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\n  }\n\n  validatePathString(fnName, argumentName, pathString, optional);\n};\n\n/**\n * @internal\n */\nexport const validateWritablePath = function (fnName: string, path: Path) {\n  if (pathGetFront(path) === '.info') {\n    throw new Error(fnName + \" failed = Can't modify data under /.info/\");\n  }\n};\n\nexport const validateUrl = function (\n  fnName: string,\n  parsedUrl: { repoInfo: RepoInfo; path: Path }\n) {\n  // TODO = Validate server better.\n  const pathString = parsedUrl.path.toString();\n  if (\n    !(typeof parsedUrl.repoInfo.host === 'string') ||\n    parsedUrl.repoInfo.host.length === 0 ||\n    (!isValidKey(parsedUrl.repoInfo.namespace) &&\n      parsedUrl.repoInfo.host.split(':')[0] !== 'localhost') ||\n    (pathString.length !== 0 && !isValidRootPathString(pathString))\n  ) {\n    throw new Error(\n      errorPrefixFxn(fnName, 'url') +\n        'must be a valid firebase URL and ' +\n        'the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".'\n    );\n  }\n};\n\nexport const validateString = function (\n  fnName: string,\n  argumentName: string,\n  string: unknown,\n  optional: boolean\n) {\n  if (optional && string === undefined) {\n    return;\n  }\n  if (!(typeof string === 'string')) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentName) + 'must be a valid string.'\n    );\n  }\n};\n\nexport const validateObject = function (\n  fnName: string,\n  argumentName: string,\n  obj: unknown,\n  optional: boolean\n) {\n  if (optional && obj === undefined) {\n    return;\n  }\n  if (!(obj && typeof obj === 'object') || obj === null) {\n    throw new Error(\n      errorPrefixFxn(fnName, argumentName) + 'must be a valid object.'\n    );\n  }\n};\n\nexport const validateObjectContainsKey = function (\n  fnName: string,\n  argumentName: string,\n  obj: unknown,\n  key: string,\n  optional: boolean,\n  optType?: string\n) {\n  const objectContainsKey =\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    obj && typeof obj === 'object' && contains(obj as any, key);\n\n  if (!objectContainsKey) {\n    if (optional) {\n      return;\n    } else {\n      throw new Error(\n        errorPrefixFxn(fnName, argumentName) +\n          'must contain the key \"' +\n          key +\n          '\"'\n      );\n    }\n  }\n\n  if (optType) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const val = safeGet(obj as any, key);\n    if (\n      (optType === 'number' && !(typeof val === 'number')) ||\n      (optType === 'string' && !(typeof val === 'string')) ||\n      (optType === 'boolean' && !(typeof val === 'boolean')) ||\n      (optType === 'function' && !(typeof val === 'function')) ||\n      (optType === 'object' && !(typeof val === 'object') && val)\n    ) {\n      if (optional) {\n        throw new Error(\n          errorPrefixFxn(fnName, argumentName) +\n            'contains invalid value for key \"' +\n            key +\n            '\" (must be of type \"' +\n            optType +\n            '\")'\n        );\n      } else {\n        throw new Error(\n          errorPrefixFxn(fnName, argumentName) +\n            'must contain the key \"' +\n            key +\n            '\" with type \"' +\n            optType +\n            '\"'\n        );\n      }\n    }\n  }\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Path, pathContains, pathEquals } from '../util/Path';\nimport { exceptionGuard, log, logger } from '../util/util';\n\nimport { Event } from './Event';\n\n/**\n * The event queue serves a few purposes:\n * 1. It ensures we maintain event order in the face of event callbacks doing operations that result in more\n *    events being queued.\n * 2. raiseQueuedEvents() handles being called reentrantly nicely.  That is, if in the course of raising events,\n *    raiseQueuedEvents() is called again, the \"inner\" call will pick up raising events where the \"outer\" call\n *    left off, ensuring that the events are still raised synchronously and in order.\n * 3. You can use raiseEventsAtPath and raiseEventsForChangedPath to ensure only relevant previously-queued\n *    events are raised synchronously.\n *\n * NOTE: This can all go away if/when we move to async events.\n *\n */\nexport class EventQueue {\n  eventLists_: EventList[] = [];\n\n  /**\n   * Tracks recursion depth of raiseQueuedEvents_, for debugging purposes.\n   */\n  recursionDepth_ = 0;\n}\n\n/**\n * @param eventDataList - The new events to queue.\n */\nexport function eventQueueQueueEvents(\n  eventQueue: EventQueue,\n  eventDataList: Event[]\n) {\n  // We group events by path, storing them in a single EventList, to make it easier to skip over them quickly.\n  let currList: EventList | null = null;\n  for (let i = 0; i < eventDataList.length; i++) {\n    const data = eventDataList[i];\n    const path = data.getPath();\n    if (currList !== null && !pathEquals(path, currList.path)) {\n      eventQueue.eventLists_.push(currList);\n      currList = null;\n    }\n\n    if (currList === null) {\n      currList = { events: [], path };\n    }\n\n    currList.events.push(data);\n  }\n  if (currList) {\n    eventQueue.eventLists_.push(currList);\n  }\n}\n\n/**\n * Queues the specified events and synchronously raises all events (including previously queued ones)\n * for the specified path.\n *\n * It is assumed that the new events are all for the specified path.\n *\n * @param path - The path to raise events for.\n * @param eventDataList - The new events to raise.\n */\nexport function eventQueueRaiseEventsAtPath(\n  eventQueue: EventQueue,\n  path: Path,\n  eventDataList: Event[]\n) {\n  eventQueueQueueEvents(eventQueue, eventDataList);\n  eventQueueRaiseQueuedEventsMatchingPredicate(eventQueue, eventPath =>\n    pathEquals(eventPath, path)\n  );\n}\n\n/**\n * Queues the specified events and synchronously raises all events (including previously queued ones) for\n * locations related to the specified change path (i.e. all ancestors and descendants).\n *\n * It is assumed that the new events are all related (ancestor or descendant) to the specified path.\n *\n * @param changedPath - The path to raise events for.\n * @param eventDataList - The events to raise\n */\nexport function eventQueueRaiseEventsForChangedPath(\n  eventQueue: EventQueue,\n  changedPath: Path,\n  eventDataList: Event[]\n) {\n  eventQueueQueueEvents(eventQueue, eventDataList);\n  eventQueueRaiseQueuedEventsMatchingPredicate(\n    eventQueue,\n    eventPath =>\n      pathContains(eventPath, changedPath) ||\n      pathContains(changedPath, eventPath)\n  );\n}\n\nfunction eventQueueRaiseQueuedEventsMatchingPredicate(\n  eventQueue: EventQueue,\n  predicate: (path: Path) => boolean\n) {\n  eventQueue.recursionDepth_++;\n\n  let sentAll = true;\n  for (let i = 0; i < eventQueue.eventLists_.length; i++) {\n    const eventList = eventQueue.eventLists_[i];\n    if (eventList) {\n      const eventPath = eventList.path;\n      if (predicate(eventPath)) {\n        eventListRaise(eventQueue.eventLists_[i]);\n        eventQueue.eventLists_[i] = null;\n      } else {\n        sentAll = false;\n      }\n    }\n  }\n\n  if (sentAll) {\n    eventQueue.eventLists_ = [];\n  }\n\n  eventQueue.recursionDepth_--;\n}\n\ninterface EventList {\n  events: Event[];\n  path: Path;\n}\n\n/**\n * Iterates through the list and raises each event\n */\nfunction eventListRaise(eventList: EventList) {\n  for (let i = 0; i < eventList.events.length; i++) {\n    const eventData = eventList.events[i];\n    if (eventData !== null) {\n      eventList.events[i] = null;\n      const eventFn = eventData.getEventRunner();\n      if (logger) {\n        log('event: ' + eventData.toString());\n      }\n      exceptionGuard(eventFn);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  contains,\n  isEmpty,\n  map,\n  safeGet,\n  stringify\n} from '@firebase/util';\n\nimport { ValueEventRegistration } from '../api/Reference_impl';\n\nimport { AppCheckTokenProvider } from './AppCheckTokenProvider';\nimport { AuthTokenProvider } from './AuthTokenProvider';\nimport { PersistentConnection } from './PersistentConnection';\nimport { ReadonlyRestClient } from './ReadonlyRestClient';\nimport { RepoInfo } from './RepoInfo';\nimport { ServerActions } from './ServerActions';\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Node } from './snap/Node';\nimport { nodeFromJSON } from './snap/nodeFromJSON';\nimport { SnapshotHolder } from './SnapshotHolder';\nimport {\n  newSparseSnapshotTree,\n  SparseSnapshotTree,\n  sparseSnapshotTreeForEachTree,\n  sparseSnapshotTreeForget,\n  sparseSnapshotTreeRemember\n} from './SparseSnapshotTree';\nimport { StatsCollection } from './stats/StatsCollection';\nimport { StatsListener } from './stats/StatsListener';\nimport {\n  statsManagerGetCollection,\n  statsManagerGetOrCreateReporter\n} from './stats/StatsManager';\nimport { StatsReporter, statsReporterIncludeStat } from './stats/StatsReporter';\nimport {\n  SyncTree,\n  syncTreeAckUserWrite,\n  syncTreeAddEventRegistration,\n  syncTreeApplyServerMerge,\n  syncTreeApplyServerOverwrite,\n  syncTreeApplyTaggedQueryMerge,\n  syncTreeApplyTaggedQueryOverwrite,\n  syncTreeApplyUserMerge,\n  syncTreeApplyUserOverwrite,\n  syncTreeCalcCompleteEventCache,\n  syncTreeGetServerValue,\n  syncTreeRemoveEventRegistration,\n  syncTreeTagForQuery\n} from './SyncTree';\nimport { Indexable } from './util/misc';\nimport {\n  newEmptyPath,\n  newRelativePath,\n  Path,\n  pathChild,\n  pathGetFront,\n  pathPopFront\n} from './util/Path';\nimport {\n  generateWithValues,\n  resolveDeferredValueSnapshot,\n  resolveDeferredValueTree\n} from './util/ServerValues';\nimport {\n  Tree,\n  treeForEachAncestor,\n  treeForEachChild,\n  treeForEachDescendant,\n  treeGetPath,\n  treeGetValue,\n  treeHasChildren,\n  treeSetValue,\n  treeSubTree\n} from './util/Tree';\nimport {\n  beingCrawled,\n  each,\n  exceptionGuard,\n  log,\n  LUIDGenerator,\n  warn\n} from './util/util';\nimport { isValidPriority, validateFirebaseData } from './util/validation';\nimport { Event } from './view/Event';\nimport {\n  EventQueue,\n  eventQueueQueueEvents,\n  eventQueueRaiseEventsAtPath,\n  eventQueueRaiseEventsForChangedPath\n} from './view/EventQueue';\nimport { EventRegistration, QueryContext } from './view/EventRegistration';\n\nconst INTERRUPT_REASON = 'repo_interrupt';\n\n/**\n * If a transaction does not succeed after 25 retries, we abort it. Among other\n * things this ensure that if there's ever a bug causing a mismatch between\n * client / server hashes for some data, we won't retry indefinitely.\n */\nconst MAX_TRANSACTION_RETRIES = 25;\n\nconst enum TransactionStatus {\n  // We've run the transaction and updated transactionResultData_ with the result, but it isn't currently sent to the\n  // server. A transaction will go from RUN -> SENT -> RUN if it comes back from the server as rejected due to\n  // mismatched hash.\n  RUN,\n\n  // We've run the transaction and sent it to the server and it's currently outstanding (hasn't come back as accepted\n  // or rejected yet).\n  SENT,\n\n  // Temporary state used to mark completed transactions (whether successful or aborted).  The transaction will be\n  // removed when we get a chance to prune completed ones.\n  COMPLETED,\n\n  // Used when an already-sent transaction needs to be aborted (e.g. due to a conflicting set() call that was made).\n  // If it comes back as unsuccessful, we'll abort it.\n  SENT_NEEDS_ABORT,\n\n  // Temporary state used to mark transactions that need to be aborted.\n  NEEDS_ABORT\n}\n\ninterface Transaction {\n  path: Path;\n  update: (a: unknown) => unknown;\n  onComplete: (\n    error: Error | null,\n    committed: boolean,\n    node: Node | null\n  ) => void;\n  status: TransactionStatus;\n  order: number;\n  applyLocally: boolean;\n  retryCount: number;\n  unwatcher: () => void;\n  abortReason: string | null;\n  currentWriteId: number;\n  currentInputSnapshot: Node | null;\n  currentOutputSnapshotRaw: Node | null;\n  currentOutputSnapshotResolved: Node | null;\n}\n\n/**\n * A connection to a single data repository.\n */\nexport class Repo {\n  /** Key for uniquely identifying this repo, used in RepoManager */\n  readonly key: string;\n\n  dataUpdateCount = 0;\n  infoSyncTree_: SyncTree;\n  serverSyncTree_: SyncTree;\n\n  stats_: StatsCollection;\n  statsListener_: StatsListener | null = null;\n  eventQueue_ = new EventQueue();\n  nextWriteId_ = 1;\n  server_: ServerActions;\n  statsReporter_: StatsReporter;\n  infoData_: SnapshotHolder;\n  interceptServerDataCallback_: ((a: string, b: unknown) => void) | null = null;\n\n  /** A list of data pieces and paths to be set when this client disconnects. */\n  onDisconnect_: SparseSnapshotTree = newSparseSnapshotTree();\n\n  /** Stores queues of outstanding transactions for Firebase locations. */\n  transactionQueueTree_ = new Tree<Transaction[]>();\n\n  // TODO: This should be @private but it's used by test_access.js and internal.js\n  persistentConnection_: PersistentConnection | null = null;\n\n  constructor(\n    public repoInfo_: RepoInfo,\n    public forceRestClient_: boolean,\n    public authTokenProvider_: AuthTokenProvider,\n    public appCheckProvider_: AppCheckTokenProvider\n  ) {\n    // This key is intentionally not updated if RepoInfo is later changed or replaced\n    this.key = this.repoInfo_.toURLString();\n  }\n\n  /**\n   * @returns The URL corresponding to the root of this Firebase.\n   */\n  toString(): string {\n    return (\n      (this.repoInfo_.secure ? 'https://' : 'http://') + this.repoInfo_.host\n    );\n  }\n}\n\nexport function repoStart(\n  repo: Repo,\n  appId: string,\n  authOverride?: object\n): void {\n  repo.stats_ = statsManagerGetCollection(repo.repoInfo_);\n\n  if (repo.forceRestClient_ || beingCrawled()) {\n    repo.server_ = new ReadonlyRestClient(\n      repo.repoInfo_,\n      (\n        pathString: string,\n        data: unknown,\n        isMerge: boolean,\n        tag: number | null\n      ) => {\n        repoOnDataUpdate(repo, pathString, data, isMerge, tag);\n      },\n      repo.authTokenProvider_,\n      repo.appCheckProvider_\n    );\n\n    // Minor hack: Fire onConnect immediately, since there's no actual connection.\n    setTimeout(() => repoOnConnectStatus(repo, /* connectStatus= */ true), 0);\n  } else {\n    // Validate authOverride\n    if (typeof authOverride !== 'undefined' && authOverride !== null) {\n      if (typeof authOverride !== 'object') {\n        throw new Error(\n          'Only objects are supported for option databaseAuthVariableOverride'\n        );\n      }\n      try {\n        stringify(authOverride);\n      } catch (e) {\n        throw new Error('Invalid authOverride provided: ' + e);\n      }\n    }\n\n    repo.persistentConnection_ = new PersistentConnection(\n      repo.repoInfo_,\n      appId,\n      (\n        pathString: string,\n        data: unknown,\n        isMerge: boolean,\n        tag: number | null\n      ) => {\n        repoOnDataUpdate(repo, pathString, data, isMerge, tag);\n      },\n      (connectStatus: boolean) => {\n        repoOnConnectStatus(repo, connectStatus);\n      },\n      (updates: object) => {\n        repoOnServerInfoUpdate(repo, updates);\n      },\n      repo.authTokenProvider_,\n      repo.appCheckProvider_,\n      authOverride\n    );\n\n    repo.server_ = repo.persistentConnection_;\n  }\n\n  repo.authTokenProvider_.addTokenChangeListener(token => {\n    repo.server_.refreshAuthToken(token);\n  });\n\n  repo.appCheckProvider_.addTokenChangeListener(result => {\n    repo.server_.refreshAppCheckToken(result.token);\n  });\n\n  // In the case of multiple Repos for the same repoInfo (i.e. there are multiple Firebase.Contexts being used),\n  // we only want to create one StatsReporter.  As such, we'll report stats over the first Repo created.\n  repo.statsReporter_ = statsManagerGetOrCreateReporter(\n    repo.repoInfo_,\n    () => new StatsReporter(repo.stats_, repo.server_)\n  );\n\n  // Used for .info.\n  repo.infoData_ = new SnapshotHolder();\n  repo.infoSyncTree_ = new SyncTree({\n    startListening: (query, tag, currentHashFn, onComplete) => {\n      let infoEvents: Event[] = [];\n      const node = repo.infoData_.getNode(query._path);\n      // This is possibly a hack, but we have different semantics for .info endpoints. We don't raise null events\n      // on initial data...\n      if (!node.isEmpty()) {\n        infoEvents = syncTreeApplyServerOverwrite(\n          repo.infoSyncTree_,\n          query._path,\n          node\n        );\n        setTimeout(() => {\n          onComplete('ok');\n        }, 0);\n      }\n      return infoEvents;\n    },\n    stopListening: () => {}\n  });\n  repoUpdateInfo(repo, 'connected', false);\n\n  repo.serverSyncTree_ = new SyncTree({\n    startListening: (query, tag, currentHashFn, onComplete) => {\n      repo.server_.listen(query, currentHashFn, tag, (status, data) => {\n        const events = onComplete(status, data);\n        eventQueueRaiseEventsForChangedPath(\n          repo.eventQueue_,\n          query._path,\n          events\n        );\n      });\n      // No synchronous events for network-backed sync trees\n      return [];\n    },\n    stopListening: (query, tag) => {\n      repo.server_.unlisten(query, tag);\n    }\n  });\n}\n\n/**\n * @returns The time in milliseconds, taking the server offset into account if we have one.\n */\nexport function repoServerTime(repo: Repo): number {\n  const offsetNode = repo.infoData_.getNode(new Path('.info/serverTimeOffset'));\n  const offset = (offsetNode.val() as number) || 0;\n  return new Date().getTime() + offset;\n}\n\n/**\n * Generate ServerValues using some variables from the repo object.\n */\nexport function repoGenerateServerValues(repo: Repo): Indexable {\n  return generateWithValues({\n    timestamp: repoServerTime(repo)\n  });\n}\n\n/**\n * Called by realtime when we get new messages from the server.\n */\nfunction repoOnDataUpdate(\n  repo: Repo,\n  pathString: string,\n  data: unknown,\n  isMerge: boolean,\n  tag: number | null\n): void {\n  // For testing.\n  repo.dataUpdateCount++;\n  const path = new Path(pathString);\n  data = repo.interceptServerDataCallback_\n    ? repo.interceptServerDataCallback_(pathString, data)\n    : data;\n  let events = [];\n  if (tag) {\n    if (isMerge) {\n      const taggedChildren = map(\n        data as { [k: string]: unknown },\n        (raw: unknown) => nodeFromJSON(raw)\n      );\n      events = syncTreeApplyTaggedQueryMerge(\n        repo.serverSyncTree_,\n        path,\n        taggedChildren,\n        tag\n      );\n    } else {\n      const taggedSnap = nodeFromJSON(data);\n      events = syncTreeApplyTaggedQueryOverwrite(\n        repo.serverSyncTree_,\n        path,\n        taggedSnap,\n        tag\n      );\n    }\n  } else if (isMerge) {\n    const changedChildren = map(\n      data as { [k: string]: unknown },\n      (raw: unknown) => nodeFromJSON(raw)\n    );\n    events = syncTreeApplyServerMerge(\n      repo.serverSyncTree_,\n      path,\n      changedChildren\n    );\n  } else {\n    const snap = nodeFromJSON(data);\n    events = syncTreeApplyServerOverwrite(repo.serverSyncTree_, path, snap);\n  }\n  let affectedPath = path;\n  if (events.length > 0) {\n    // Since we have a listener outstanding for each transaction, receiving any events\n    // is a proxy for some change having occurred.\n    affectedPath = repoRerunTransactions(repo, path);\n  }\n  eventQueueRaiseEventsForChangedPath(repo.eventQueue_, affectedPath, events);\n}\n\n// TODO: This should be @private but it's used by test_access.js and internal.js\nexport function repoInterceptServerData(\n  repo: Repo,\n  callback: ((a: string, b: unknown) => unknown) | null\n): void {\n  repo.interceptServerDataCallback_ = callback;\n}\n\nfunction repoOnConnectStatus(repo: Repo, connectStatus: boolean): void {\n  repoUpdateInfo(repo, 'connected', connectStatus);\n  if (connectStatus === false) {\n    repoRunOnDisconnectEvents(repo);\n  }\n}\n\nfunction repoOnServerInfoUpdate(repo: Repo, updates: object): void {\n  each(updates, (key: string, value: unknown) => {\n    repoUpdateInfo(repo, key, value);\n  });\n}\n\nfunction repoUpdateInfo(repo: Repo, pathString: string, value: unknown): void {\n  const path = new Path('/.info/' + pathString);\n  const newNode = nodeFromJSON(value);\n  repo.infoData_.updateSnapshot(path, newNode);\n  const events = syncTreeApplyServerOverwrite(\n    repo.infoSyncTree_,\n    path,\n    newNode\n  );\n  eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, events);\n}\n\nfunction repoGetNextWriteId(repo: Repo): number {\n  return repo.nextWriteId_++;\n}\n\n/**\n * The purpose of `getValue` is to return the latest known value\n * satisfying `query`.\n *\n * This method will first check for in-memory cached values\n * belonging to active listeners. If they are found, such values\n * are considered to be the most up-to-date.\n *\n * If the client is not connected, this method will wait until the\n *  repo has established a connection and then request the value for `query`.\n * If the client is not able to retrieve the query result for another reason,\n * it reports an error.\n *\n * @param query - The query to surface a value for.\n */\nexport function repoGetValue(\n  repo: Repo,\n  query: QueryContext,\n  eventRegistration: ValueEventRegistration\n): Promise<Node> {\n  // Only active queries are cached. There is no persisted cache.\n  const cached = syncTreeGetServerValue(repo.serverSyncTree_, query);\n  if (cached != null) {\n    return Promise.resolve(cached);\n  }\n  return repo.server_.get(query).then(\n    payload => {\n      const node = nodeFromJSON(payload).withIndex(\n        query._queryParams.getIndex()\n      );\n      /**\n       * Below we simulate the actions of an `onlyOnce` `onValue()` event where:\n       * Add an event registration,\n       * Update data at the path,\n       * Raise any events,\n       * Cleanup the SyncTree\n       */\n      syncTreeAddEventRegistration(\n        repo.serverSyncTree_,\n        query,\n        eventRegistration,\n        true\n      );\n      let events: Event[];\n      if (query._queryParams.loadsAllData()) {\n        events = syncTreeApplyServerOverwrite(\n          repo.serverSyncTree_,\n          query._path,\n          node\n        );\n      } else {\n        const tag = syncTreeTagForQuery(repo.serverSyncTree_, query);\n        events = syncTreeApplyTaggedQueryOverwrite(\n          repo.serverSyncTree_,\n          query._path,\n          node,\n          tag\n        );\n      }\n      /*\n       * We need to raise events in the scenario where `get()` is called at a parent path, and\n       * while the `get()` is pending, `onValue` is called at a child location. While get() is waiting\n       * for the data, `onValue` will register a new event. Then, get() will come back, and update the syncTree\n       * and its corresponding serverCache, including the child location where `onValue` is called. Then,\n       * `onValue` will receive the event from the server, but look at the syncTree and see that the data received\n       * from the server is already at the SyncPoint, and so the `onValue` callback will never get fired.\n       * Calling `eventQueueRaiseEventsForChangedPath()` is the correct way to propagate the events and\n       * ensure the corresponding child events will get fired.\n       */\n      eventQueueRaiseEventsForChangedPath(\n        repo.eventQueue_,\n        query._path,\n        events\n      );\n      syncTreeRemoveEventRegistration(\n        repo.serverSyncTree_,\n        query,\n        eventRegistration,\n        null,\n        true\n      );\n      return node;\n    },\n    err => {\n      repoLog(repo, 'get for query ' + stringify(query) + ' failed: ' + err);\n      return Promise.reject(new Error(err as string));\n    }\n  );\n}\n\nexport function repoSetWithPriority(\n  repo: Repo,\n  path: Path,\n  newVal: unknown,\n  newPriority: number | string | null,\n  onComplete: ((status: Error | null, errorReason?: string) => void) | null\n): void {\n  repoLog(repo, 'set', {\n    path: path.toString(),\n    value: newVal,\n    priority: newPriority\n  });\n\n  // TODO: Optimize this behavior to either (a) store flag to skip resolving where possible and / or\n  // (b) store unresolved paths on JSON parse\n  const serverValues = repoGenerateServerValues(repo);\n  const newNodeUnresolved = nodeFromJSON(newVal, newPriority);\n  const existing = syncTreeCalcCompleteEventCache(repo.serverSyncTree_, path);\n  const newNode = resolveDeferredValueSnapshot(\n    newNodeUnresolved,\n    existing,\n    serverValues\n  );\n\n  const writeId = repoGetNextWriteId(repo);\n  const events = syncTreeApplyUserOverwrite(\n    repo.serverSyncTree_,\n    path,\n    newNode,\n    writeId,\n    true\n  );\n  eventQueueQueueEvents(repo.eventQueue_, events);\n  repo.server_.put(\n    path.toString(),\n    newNodeUnresolved.val(/*export=*/ true),\n    (status, errorReason) => {\n      const success = status === 'ok';\n      if (!success) {\n        warn('set at ' + path + ' failed: ' + status);\n      }\n\n      const clearEvents = syncTreeAckUserWrite(\n        repo.serverSyncTree_,\n        writeId,\n        !success\n      );\n      eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, clearEvents);\n      repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\n    }\n  );\n  const affectedPath = repoAbortTransactions(repo, path);\n  repoRerunTransactions(repo, affectedPath);\n  // We queued the events above, so just flush the queue here\n  eventQueueRaiseEventsForChangedPath(repo.eventQueue_, affectedPath, []);\n}\n\nexport function repoUpdate(\n  repo: Repo,\n  path: Path,\n  childrenToMerge: { [k: string]: unknown },\n  onComplete: ((status: Error | null, errorReason?: string) => void) | null\n): void {\n  repoLog(repo, 'update', { path: path.toString(), value: childrenToMerge });\n\n  // Start with our existing data and merge each child into it.\n  let empty = true;\n  const serverValues = repoGenerateServerValues(repo);\n  const changedChildren: { [k: string]: Node } = {};\n  each(childrenToMerge, (changedKey: string, changedValue: unknown) => {\n    empty = false;\n    changedChildren[changedKey] = resolveDeferredValueTree(\n      pathChild(path, changedKey),\n      nodeFromJSON(changedValue),\n      repo.serverSyncTree_,\n      serverValues\n    );\n  });\n\n  if (!empty) {\n    const writeId = repoGetNextWriteId(repo);\n    const events = syncTreeApplyUserMerge(\n      repo.serverSyncTree_,\n      path,\n      changedChildren,\n      writeId\n    );\n    eventQueueQueueEvents(repo.eventQueue_, events);\n    repo.server_.merge(\n      path.toString(),\n      childrenToMerge,\n      (status, errorReason) => {\n        const success = status === 'ok';\n        if (!success) {\n          warn('update at ' + path + ' failed: ' + status);\n        }\n\n        const clearEvents = syncTreeAckUserWrite(\n          repo.serverSyncTree_,\n          writeId,\n          !success\n        );\n        const affectedPath =\n          clearEvents.length > 0 ? repoRerunTransactions(repo, path) : path;\n        eventQueueRaiseEventsForChangedPath(\n          repo.eventQueue_,\n          affectedPath,\n          clearEvents\n        );\n        repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\n      }\n    );\n\n    each(childrenToMerge, (changedPath: string) => {\n      const affectedPath = repoAbortTransactions(\n        repo,\n        pathChild(path, changedPath)\n      );\n      repoRerunTransactions(repo, affectedPath);\n    });\n\n    // We queued the events above, so just flush the queue here\n    eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, []);\n  } else {\n    log(\"update() called with empty data.  Don't do anything.\");\n    repoCallOnCompleteCallback(repo, onComplete, 'ok', undefined);\n  }\n}\n\n/**\n * Applies all of the changes stored up in the onDisconnect_ tree.\n */\nfunction repoRunOnDisconnectEvents(repo: Repo): void {\n  repoLog(repo, 'onDisconnectEvents');\n\n  const serverValues = repoGenerateServerValues(repo);\n  const resolvedOnDisconnectTree = newSparseSnapshotTree();\n  sparseSnapshotTreeForEachTree(\n    repo.onDisconnect_,\n    newEmptyPath(),\n    (path, node) => {\n      const resolved = resolveDeferredValueTree(\n        path,\n        node,\n        repo.serverSyncTree_,\n        serverValues\n      );\n      sparseSnapshotTreeRemember(resolvedOnDisconnectTree, path, resolved);\n    }\n  );\n  let events: Event[] = [];\n\n  sparseSnapshotTreeForEachTree(\n    resolvedOnDisconnectTree,\n    newEmptyPath(),\n    (path, snap) => {\n      events = events.concat(\n        syncTreeApplyServerOverwrite(repo.serverSyncTree_, path, snap)\n      );\n      const affectedPath = repoAbortTransactions(repo, path);\n      repoRerunTransactions(repo, affectedPath);\n    }\n  );\n\n  repo.onDisconnect_ = newSparseSnapshotTree();\n  eventQueueRaiseEventsForChangedPath(repo.eventQueue_, newEmptyPath(), events);\n}\n\nexport function repoOnDisconnectCancel(\n  repo: Repo,\n  path: Path,\n  onComplete: ((status: Error | null, errorReason?: string) => void) | null\n): void {\n  repo.server_.onDisconnectCancel(path.toString(), (status, errorReason) => {\n    if (status === 'ok') {\n      sparseSnapshotTreeForget(repo.onDisconnect_, path);\n    }\n    repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\n  });\n}\n\nexport function repoOnDisconnectSet(\n  repo: Repo,\n  path: Path,\n  value: unknown,\n  onComplete: ((status: Error | null, errorReason?: string) => void) | null\n): void {\n  const newNode = nodeFromJSON(value);\n  repo.server_.onDisconnectPut(\n    path.toString(),\n    newNode.val(/*export=*/ true),\n    (status, errorReason) => {\n      if (status === 'ok') {\n        sparseSnapshotTreeRemember(repo.onDisconnect_, path, newNode);\n      }\n      repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\n    }\n  );\n}\n\nexport function repoOnDisconnectSetWithPriority(\n  repo: Repo,\n  path: Path,\n  value: unknown,\n  priority: unknown,\n  onComplete: ((status: Error | null, errorReason?: string) => void) | null\n): void {\n  const newNode = nodeFromJSON(value, priority);\n  repo.server_.onDisconnectPut(\n    path.toString(),\n    newNode.val(/*export=*/ true),\n    (status, errorReason) => {\n      if (status === 'ok') {\n        sparseSnapshotTreeRemember(repo.onDisconnect_, path, newNode);\n      }\n      repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\n    }\n  );\n}\n\nexport function repoOnDisconnectUpdate(\n  repo: Repo,\n  path: Path,\n  childrenToMerge: { [k: string]: unknown },\n  onComplete: ((status: Error | null, errorReason?: string) => void) | null\n): void {\n  if (isEmpty(childrenToMerge)) {\n    log(\"onDisconnect().update() called with empty data.  Don't do anything.\");\n    repoCallOnCompleteCallback(repo, onComplete, 'ok', undefined);\n    return;\n  }\n\n  repo.server_.onDisconnectMerge(\n    path.toString(),\n    childrenToMerge,\n    (status, errorReason) => {\n      if (status === 'ok') {\n        each(childrenToMerge, (childName: string, childNode: unknown) => {\n          const newChildNode = nodeFromJSON(childNode);\n          sparseSnapshotTreeRemember(\n            repo.onDisconnect_,\n            pathChild(path, childName),\n            newChildNode\n          );\n        });\n      }\n      repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\n    }\n  );\n}\n\nexport function repoAddEventCallbackForQuery(\n  repo: Repo,\n  query: QueryContext,\n  eventRegistration: EventRegistration\n): void {\n  let events;\n  if (pathGetFront(query._path) === '.info') {\n    events = syncTreeAddEventRegistration(\n      repo.infoSyncTree_,\n      query,\n      eventRegistration\n    );\n  } else {\n    events = syncTreeAddEventRegistration(\n      repo.serverSyncTree_,\n      query,\n      eventRegistration\n    );\n  }\n  eventQueueRaiseEventsAtPath(repo.eventQueue_, query._path, events);\n}\n\nexport function repoRemoveEventCallbackForQuery(\n  repo: Repo,\n  query: QueryContext,\n  eventRegistration: EventRegistration\n): void {\n  // These are guaranteed not to raise events, since we're not passing in a cancelError. However, we can future-proof\n  // a little bit by handling the return values anyways.\n  let events;\n  if (pathGetFront(query._path) === '.info') {\n    events = syncTreeRemoveEventRegistration(\n      repo.infoSyncTree_,\n      query,\n      eventRegistration\n    );\n  } else {\n    events = syncTreeRemoveEventRegistration(\n      repo.serverSyncTree_,\n      query,\n      eventRegistration\n    );\n  }\n  eventQueueRaiseEventsAtPath(repo.eventQueue_, query._path, events);\n}\n\nexport function repoInterrupt(repo: Repo): void {\n  if (repo.persistentConnection_) {\n    repo.persistentConnection_.interrupt(INTERRUPT_REASON);\n  }\n}\n\nexport function repoResume(repo: Repo): void {\n  if (repo.persistentConnection_) {\n    repo.persistentConnection_.resume(INTERRUPT_REASON);\n  }\n}\n\nexport function repoStats(repo: Repo, showDelta: boolean = false): void {\n  if (typeof console === 'undefined') {\n    return;\n  }\n\n  let stats: { [k: string]: unknown };\n  if (showDelta) {\n    if (!repo.statsListener_) {\n      repo.statsListener_ = new StatsListener(repo.stats_);\n    }\n    stats = repo.statsListener_.get();\n  } else {\n    stats = repo.stats_.get();\n  }\n\n  const longestName = Object.keys(stats).reduce(\n    (previousValue, currentValue) =>\n      Math.max(currentValue.length, previousValue),\n    0\n  );\n\n  each(stats, (stat: string, value: unknown) => {\n    let paddedStat = stat;\n    // pad stat names to be the same length (plus 2 extra spaces).\n    for (let i = stat.length; i < longestName + 2; i++) {\n      paddedStat += ' ';\n    }\n    console.log(paddedStat + value);\n  });\n}\n\nexport function repoStatsIncrementCounter(repo: Repo, metric: string): void {\n  repo.stats_.incrementCounter(metric);\n  statsReporterIncludeStat(repo.statsReporter_, metric);\n}\n\nfunction repoLog(repo: Repo, ...varArgs: unknown[]): void {\n  let prefix = '';\n  if (repo.persistentConnection_) {\n    prefix = repo.persistentConnection_.id + ':';\n  }\n  log(prefix, ...varArgs);\n}\n\nexport function repoCallOnCompleteCallback(\n  repo: Repo,\n  callback: ((status: Error | null, errorReason?: string) => void) | null,\n  status: string,\n  errorReason?: string | null\n): void {\n  if (callback) {\n    exceptionGuard(() => {\n      if (status === 'ok') {\n        callback(null);\n      } else {\n        const code = (status || 'error').toUpperCase();\n        let message = code;\n        if (errorReason) {\n          message += ': ' + errorReason;\n        }\n\n        const error = new Error(message);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (error as any).code = code;\n        callback(error);\n      }\n    });\n  }\n}\n\n/**\n * Creates a new transaction, adds it to the transactions we're tracking, and\n * sends it to the server if possible.\n *\n * @param path - Path at which to do transaction.\n * @param transactionUpdate - Update callback.\n * @param onComplete - Completion callback.\n * @param unwatcher - Function that will be called when the transaction no longer\n * need data updates for `path`.\n * @param applyLocally - Whether or not to make intermediate results visible\n */\nexport function repoStartTransaction(\n  repo: Repo,\n  path: Path,\n  transactionUpdate: (a: unknown) => unknown,\n  onComplete: ((error: Error, committed: boolean, node: Node) => void) | null,\n  unwatcher: () => void,\n  applyLocally: boolean\n): void {\n  repoLog(repo, 'transaction on ' + path);\n\n  // Initialize transaction.\n  const transaction: Transaction = {\n    path,\n    update: transactionUpdate,\n    onComplete,\n    // One of TransactionStatus enums.\n    status: null,\n    // Used when combining transactions at different locations to figure out\n    // which one goes first.\n    order: LUIDGenerator(),\n    // Whether to raise local events for this transaction.\n    applyLocally,\n    // Count of how many times we've retried the transaction.\n    retryCount: 0,\n    // Function to call to clean up our .on() listener.\n    unwatcher,\n    // Stores why a transaction was aborted.\n    abortReason: null,\n    currentWriteId: null,\n    currentInputSnapshot: null,\n    currentOutputSnapshotRaw: null,\n    currentOutputSnapshotResolved: null\n  };\n\n  // Run transaction initially.\n  const currentState = repoGetLatestState(repo, path, undefined);\n  transaction.currentInputSnapshot = currentState;\n  const newVal = transaction.update(currentState.val());\n  if (newVal === undefined) {\n    // Abort transaction.\n    transaction.unwatcher();\n    transaction.currentOutputSnapshotRaw = null;\n    transaction.currentOutputSnapshotResolved = null;\n    if (transaction.onComplete) {\n      transaction.onComplete(null, false, transaction.currentInputSnapshot);\n    }\n  } else {\n    validateFirebaseData(\n      'transaction failed: Data returned ',\n      newVal,\n      transaction.path\n    );\n\n    // Mark as run and add to our queue.\n    transaction.status = TransactionStatus.RUN;\n    const queueNode = treeSubTree(repo.transactionQueueTree_, path);\n    const nodeQueue = treeGetValue(queueNode) || [];\n    nodeQueue.push(transaction);\n\n    treeSetValue(queueNode, nodeQueue);\n\n    // Update visibleData and raise events\n    // Note: We intentionally raise events after updating all of our\n    // transaction state, since the user could start new transactions from the\n    // event callbacks.\n    let priorityForNode;\n    if (\n      typeof newVal === 'object' &&\n      newVal !== null &&\n      contains(newVal, '.priority')\n    ) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      priorityForNode = safeGet(newVal as any, '.priority');\n      assert(\n        isValidPriority(priorityForNode),\n        'Invalid priority returned by transaction. ' +\n          'Priority must be a valid string, finite number, server value, or null.'\n      );\n    } else {\n      const currentNode =\n        syncTreeCalcCompleteEventCache(repo.serverSyncTree_, path) ||\n        ChildrenNode.EMPTY_NODE;\n      priorityForNode = currentNode.getPriority().val();\n    }\n\n    const serverValues = repoGenerateServerValues(repo);\n    const newNodeUnresolved = nodeFromJSON(newVal, priorityForNode);\n    const newNode = resolveDeferredValueSnapshot(\n      newNodeUnresolved,\n      currentState,\n      serverValues\n    );\n    transaction.currentOutputSnapshotRaw = newNodeUnresolved;\n    transaction.currentOutputSnapshotResolved = newNode;\n    transaction.currentWriteId = repoGetNextWriteId(repo);\n\n    const events = syncTreeApplyUserOverwrite(\n      repo.serverSyncTree_,\n      path,\n      newNode,\n      transaction.currentWriteId,\n      transaction.applyLocally\n    );\n    eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, events);\n\n    repoSendReadyTransactions(repo, repo.transactionQueueTree_);\n  }\n}\n\n/**\n * @param excludeSets - A specific set to exclude\n */\nfunction repoGetLatestState(\n  repo: Repo,\n  path: Path,\n  excludeSets?: number[]\n): Node {\n  return (\n    syncTreeCalcCompleteEventCache(repo.serverSyncTree_, path, excludeSets) ||\n    ChildrenNode.EMPTY_NODE\n  );\n}\n\n/**\n * Sends any already-run transactions that aren't waiting for outstanding\n * transactions to complete.\n *\n * Externally it's called with no arguments, but it calls itself recursively\n * with a particular transactionQueueTree node to recurse through the tree.\n *\n * @param node - transactionQueueTree node to start at.\n */\nfunction repoSendReadyTransactions(\n  repo: Repo,\n  node: Tree<Transaction[]> = repo.transactionQueueTree_\n): void {\n  // Before recursing, make sure any completed transactions are removed.\n  if (!node) {\n    repoPruneCompletedTransactionsBelowNode(repo, node);\n  }\n\n  if (treeGetValue(node)) {\n    const queue = repoBuildTransactionQueue(repo, node);\n    assert(queue.length > 0, 'Sending zero length transaction queue');\n\n    const allRun = queue.every(\n      (transaction: Transaction) => transaction.status === TransactionStatus.RUN\n    );\n\n    // If they're all run (and not sent), we can send them.  Else, we must wait.\n    if (allRun) {\n      repoSendTransactionQueue(repo, treeGetPath(node), queue);\n    }\n  } else if (treeHasChildren(node)) {\n    treeForEachChild(node, childNode => {\n      repoSendReadyTransactions(repo, childNode);\n    });\n  }\n}\n\n/**\n * Given a list of run transactions, send them to the server and then handle\n * the result (success or failure).\n *\n * @param path - The location of the queue.\n * @param queue - Queue of transactions under the specified location.\n */\nfunction repoSendTransactionQueue(\n  repo: Repo,\n  path: Path,\n  queue: Transaction[]\n): void {\n  // Mark transactions as sent and increment retry count!\n  const setsToIgnore = queue.map(txn => {\n    return txn.currentWriteId;\n  });\n  const latestState = repoGetLatestState(repo, path, setsToIgnore);\n  let snapToSend = latestState;\n  const latestHash = latestState.hash();\n  for (let i = 0; i < queue.length; i++) {\n    const txn = queue[i];\n    assert(\n      txn.status === TransactionStatus.RUN,\n      'tryToSendTransactionQueue_: items in queue should all be run.'\n    );\n    txn.status = TransactionStatus.SENT;\n    txn.retryCount++;\n    const relativePath = newRelativePath(path, txn.path);\n    // If we've gotten to this point, the output snapshot must be defined.\n    snapToSend = snapToSend.updateChild(\n      relativePath /** @type {!Node} */,\n      txn.currentOutputSnapshotRaw\n    );\n  }\n\n  const dataToSend = snapToSend.val(true);\n  const pathToSend = path;\n\n  // Send the put.\n  repo.server_.put(\n    pathToSend.toString(),\n    dataToSend,\n    (status: string) => {\n      repoLog(repo, 'transaction put response', {\n        path: pathToSend.toString(),\n        status\n      });\n\n      let events: Event[] = [];\n      if (status === 'ok') {\n        // Queue up the callbacks and fire them after cleaning up all of our\n        // transaction state, since the callback could trigger more\n        // transactions or sets.\n        const callbacks = [];\n        for (let i = 0; i < queue.length; i++) {\n          queue[i].status = TransactionStatus.COMPLETED;\n          events = events.concat(\n            syncTreeAckUserWrite(repo.serverSyncTree_, queue[i].currentWriteId)\n          );\n          if (queue[i].onComplete) {\n            // We never unset the output snapshot, and given that this\n            // transaction is complete, it should be set\n            callbacks.push(() =>\n              queue[i].onComplete(\n                null,\n                true,\n                queue[i].currentOutputSnapshotResolved\n              )\n            );\n          }\n          queue[i].unwatcher();\n        }\n\n        // Now remove the completed transactions.\n        repoPruneCompletedTransactionsBelowNode(\n          repo,\n          treeSubTree(repo.transactionQueueTree_, path)\n        );\n        // There may be pending transactions that we can now send.\n        repoSendReadyTransactions(repo, repo.transactionQueueTree_);\n\n        eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, events);\n\n        // Finally, trigger onComplete callbacks.\n        for (let i = 0; i < callbacks.length; i++) {\n          exceptionGuard(callbacks[i]);\n        }\n      } else {\n        // transactions are no longer sent.  Update their status appropriately.\n        if (status === 'datastale') {\n          for (let i = 0; i < queue.length; i++) {\n            if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT) {\n              queue[i].status = TransactionStatus.NEEDS_ABORT;\n            } else {\n              queue[i].status = TransactionStatus.RUN;\n            }\n          }\n        } else {\n          warn(\n            'transaction at ' + pathToSend.toString() + ' failed: ' + status\n          );\n          for (let i = 0; i < queue.length; i++) {\n            queue[i].status = TransactionStatus.NEEDS_ABORT;\n            queue[i].abortReason = status;\n          }\n        }\n\n        repoRerunTransactions(repo, path);\n      }\n    },\n    latestHash\n  );\n}\n\n/**\n * Finds all transactions dependent on the data at changedPath and reruns them.\n *\n * Should be called any time cached data changes.\n *\n * Return the highest path that was affected by rerunning transactions. This\n * is the path at which events need to be raised for.\n *\n * @param changedPath - The path in mergedData that changed.\n * @returns The rootmost path that was affected by rerunning transactions.\n */\nfunction repoRerunTransactions(repo: Repo, changedPath: Path): Path {\n  const rootMostTransactionNode = repoGetAncestorTransactionNode(\n    repo,\n    changedPath\n  );\n  const path = treeGetPath(rootMostTransactionNode);\n\n  const queue = repoBuildTransactionQueue(repo, rootMostTransactionNode);\n  repoRerunTransactionQueue(repo, queue, path);\n\n  return path;\n}\n\n/**\n * Does all the work of rerunning transactions (as well as cleans up aborted\n * transactions and whatnot).\n *\n * @param queue - The queue of transactions to run.\n * @param path - The path the queue is for.\n */\nfunction repoRerunTransactionQueue(\n  repo: Repo,\n  queue: Transaction[],\n  path: Path\n): void {\n  if (queue.length === 0) {\n    return; // Nothing to do!\n  }\n\n  // Queue up the callbacks and fire them after cleaning up all of our\n  // transaction state, since the callback could trigger more transactions or\n  // sets.\n  const callbacks = [];\n  let events: Event[] = [];\n  // Ignore all of the sets we're going to re-run.\n  const txnsToRerun = queue.filter(q => {\n    return q.status === TransactionStatus.RUN;\n  });\n  const setsToIgnore = txnsToRerun.map(q => {\n    return q.currentWriteId;\n  });\n  for (let i = 0; i < queue.length; i++) {\n    const transaction = queue[i];\n    const relativePath = newRelativePath(path, transaction.path);\n    let abortTransaction = false,\n      abortReason;\n    assert(\n      relativePath !== null,\n      'rerunTransactionsUnderNode_: relativePath should not be null.'\n    );\n\n    if (transaction.status === TransactionStatus.NEEDS_ABORT) {\n      abortTransaction = true;\n      abortReason = transaction.abortReason;\n      events = events.concat(\n        syncTreeAckUserWrite(\n          repo.serverSyncTree_,\n          transaction.currentWriteId,\n          true\n        )\n      );\n    } else if (transaction.status === TransactionStatus.RUN) {\n      if (transaction.retryCount >= MAX_TRANSACTION_RETRIES) {\n        abortTransaction = true;\n        abortReason = 'maxretry';\n        events = events.concat(\n          syncTreeAckUserWrite(\n            repo.serverSyncTree_,\n            transaction.currentWriteId,\n            true\n          )\n        );\n      } else {\n        // This code reruns a transaction\n        const currentNode = repoGetLatestState(\n          repo,\n          transaction.path,\n          setsToIgnore\n        );\n        transaction.currentInputSnapshot = currentNode;\n        const newData = queue[i].update(currentNode.val());\n        if (newData !== undefined) {\n          validateFirebaseData(\n            'transaction failed: Data returned ',\n            newData,\n            transaction.path\n          );\n          let newDataNode = nodeFromJSON(newData);\n          const hasExplicitPriority =\n            typeof newData === 'object' &&\n            newData != null &&\n            contains(newData, '.priority');\n          if (!hasExplicitPriority) {\n            // Keep the old priority if there wasn't a priority explicitly specified.\n            newDataNode = newDataNode.updatePriority(currentNode.getPriority());\n          }\n\n          const oldWriteId = transaction.currentWriteId;\n          const serverValues = repoGenerateServerValues(repo);\n          const newNodeResolved = resolveDeferredValueSnapshot(\n            newDataNode,\n            currentNode,\n            serverValues\n          );\n\n          transaction.currentOutputSnapshotRaw = newDataNode;\n          transaction.currentOutputSnapshotResolved = newNodeResolved;\n          transaction.currentWriteId = repoGetNextWriteId(repo);\n          // Mutates setsToIgnore in place\n          setsToIgnore.splice(setsToIgnore.indexOf(oldWriteId), 1);\n          events = events.concat(\n            syncTreeApplyUserOverwrite(\n              repo.serverSyncTree_,\n              transaction.path,\n              newNodeResolved,\n              transaction.currentWriteId,\n              transaction.applyLocally\n            )\n          );\n          events = events.concat(\n            syncTreeAckUserWrite(repo.serverSyncTree_, oldWriteId, true)\n          );\n        } else {\n          abortTransaction = true;\n          abortReason = 'nodata';\n          events = events.concat(\n            syncTreeAckUserWrite(\n              repo.serverSyncTree_,\n              transaction.currentWriteId,\n              true\n            )\n          );\n        }\n      }\n    }\n    eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, events);\n    events = [];\n    if (abortTransaction) {\n      // Abort.\n      queue[i].status = TransactionStatus.COMPLETED;\n\n      // Removing a listener can trigger pruning which can muck with\n      // mergedData/visibleData (as it prunes data). So defer the unwatcher\n      // until we're done.\n      (function (unwatcher) {\n        setTimeout(unwatcher, Math.floor(0));\n      })(queue[i].unwatcher);\n\n      if (queue[i].onComplete) {\n        if (abortReason === 'nodata') {\n          callbacks.push(() =>\n            queue[i].onComplete(null, false, queue[i].currentInputSnapshot)\n          );\n        } else {\n          callbacks.push(() =>\n            queue[i].onComplete(new Error(abortReason), false, null)\n          );\n        }\n      }\n    }\n  }\n\n  // Clean up completed transactions.\n  repoPruneCompletedTransactionsBelowNode(repo, repo.transactionQueueTree_);\n\n  // Now fire callbacks, now that we're in a good, known state.\n  for (let i = 0; i < callbacks.length; i++) {\n    exceptionGuard(callbacks[i]);\n  }\n\n  // Try to send the transaction result to the server.\n  repoSendReadyTransactions(repo, repo.transactionQueueTree_);\n}\n\n/**\n * Returns the rootmost ancestor node of the specified path that has a pending\n * transaction on it, or just returns the node for the given path if there are\n * no pending transactions on any ancestor.\n *\n * @param path - The location to start at.\n * @returns The rootmost node with a transaction.\n */\nfunction repoGetAncestorTransactionNode(\n  repo: Repo,\n  path: Path\n): Tree<Transaction[]> {\n  let front;\n\n  // Start at the root and walk deeper into the tree towards path until we\n  // find a node with pending transactions.\n  let transactionNode = repo.transactionQueueTree_;\n  front = pathGetFront(path);\n  while (front !== null && treeGetValue(transactionNode) === undefined) {\n    transactionNode = treeSubTree(transactionNode, front);\n    path = pathPopFront(path);\n    front = pathGetFront(path);\n  }\n\n  return transactionNode;\n}\n\n/**\n * Builds the queue of all transactions at or below the specified\n * transactionNode.\n *\n * @param transactionNode\n * @returns The generated queue.\n */\nfunction repoBuildTransactionQueue(\n  repo: Repo,\n  transactionNode: Tree<Transaction[]>\n): Transaction[] {\n  // Walk any child transaction queues and aggregate them into a single queue.\n  const transactionQueue: Transaction[] = [];\n  repoAggregateTransactionQueuesForNode(\n    repo,\n    transactionNode,\n    transactionQueue\n  );\n\n  // Sort them by the order the transactions were created.\n  transactionQueue.sort((a, b) => a.order - b.order);\n\n  return transactionQueue;\n}\n\nfunction repoAggregateTransactionQueuesForNode(\n  repo: Repo,\n  node: Tree<Transaction[]>,\n  queue: Transaction[]\n): void {\n  const nodeQueue = treeGetValue(node);\n  if (nodeQueue) {\n    for (let i = 0; i < nodeQueue.length; i++) {\n      queue.push(nodeQueue[i]);\n    }\n  }\n\n  treeForEachChild(node, child => {\n    repoAggregateTransactionQueuesForNode(repo, child, queue);\n  });\n}\n\n/**\n * Remove COMPLETED transactions at or below this node in the transactionQueueTree_.\n */\nfunction repoPruneCompletedTransactionsBelowNode(\n  repo: Repo,\n  node: Tree<Transaction[]>\n): void {\n  const queue = treeGetValue(node);\n  if (queue) {\n    let to = 0;\n    for (let from = 0; from < queue.length; from++) {\n      if (queue[from].status !== TransactionStatus.COMPLETED) {\n        queue[to] = queue[from];\n        to++;\n      }\n    }\n    queue.length = to;\n    treeSetValue(node, queue.length > 0 ? queue : undefined);\n  }\n\n  treeForEachChild(node, childNode => {\n    repoPruneCompletedTransactionsBelowNode(repo, childNode);\n  });\n}\n\n/**\n * Aborts all transactions on ancestors or descendants of the specified path.\n * Called when doing a set() or update() since we consider them incompatible\n * with transactions.\n *\n * @param path - Path for which we want to abort related transactions.\n */\nfunction repoAbortTransactions(repo: Repo, path: Path): Path {\n  const affectedPath = treeGetPath(repoGetAncestorTransactionNode(repo, path));\n\n  const transactionNode = treeSubTree(repo.transactionQueueTree_, path);\n\n  treeForEachAncestor(transactionNode, (node: Tree<Transaction[]>) => {\n    repoAbortTransactionsOnNode(repo, node);\n  });\n\n  repoAbortTransactionsOnNode(repo, transactionNode);\n\n  treeForEachDescendant(transactionNode, (node: Tree<Transaction[]>) => {\n    repoAbortTransactionsOnNode(repo, node);\n  });\n\n  return affectedPath;\n}\n\n/**\n * Abort transactions stored in this transaction queue node.\n *\n * @param node - Node to abort transactions for.\n */\nfunction repoAbortTransactionsOnNode(\n  repo: Repo,\n  node: Tree<Transaction[]>\n): void {\n  const queue = treeGetValue(node);\n  if (queue) {\n    // Queue up the callbacks and fire them after cleaning up all of our\n    // transaction state, since the callback could trigger more transactions\n    // or sets.\n    const callbacks = [];\n\n    // Go through queue.  Any already-sent transactions must be marked for\n    // abort, while the unsent ones can be immediately aborted and removed.\n    let events: Event[] = [];\n    let lastSent = -1;\n    for (let i = 0; i < queue.length; i++) {\n      if (queue[i].status === TransactionStatus.SENT_NEEDS_ABORT) {\n        // Already marked.  No action needed.\n      } else if (queue[i].status === TransactionStatus.SENT) {\n        assert(\n          lastSent === i - 1,\n          'All SENT items should be at beginning of queue.'\n        );\n        lastSent = i;\n        // Mark transaction for abort when it comes back.\n        queue[i].status = TransactionStatus.SENT_NEEDS_ABORT;\n        queue[i].abortReason = 'set';\n      } else {\n        assert(\n          queue[i].status === TransactionStatus.RUN,\n          'Unexpected transaction status in abort'\n        );\n        // We can abort it immediately.\n        queue[i].unwatcher();\n        events = events.concat(\n          syncTreeAckUserWrite(\n            repo.serverSyncTree_,\n            queue[i].currentWriteId,\n            true\n          )\n        );\n        if (queue[i].onComplete) {\n          callbacks.push(\n            queue[i].onComplete.bind(null, new Error('set'), false, null)\n          );\n        }\n      }\n    }\n    if (lastSent === -1) {\n      // We're not waiting for any sent transactions.  We can clear the queue.\n      treeSetValue(node, undefined);\n    } else {\n      // Remove the transactions we aborted.\n      queue.length = lastSent + 1;\n    }\n\n    // Now fire the callbacks.\n    eventQueueRaiseEventsForChangedPath(\n      repo.eventQueue_,\n      treeGetPath(node),\n      events\n    );\n    for (let i = 0; i < callbacks.length; i++) {\n      exceptionGuard(callbacks[i]);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RepoInfo } from '../../RepoInfo';\nimport { Path } from '../Path';\nimport { warnIfPageIsSecure, warn, fatal } from '../util';\n\nfunction decodePath(pathString: string): string {\n  let pathStringDecoded = '';\n  const pieces = pathString.split('/');\n  for (let i = 0; i < pieces.length; i++) {\n    if (pieces[i].length > 0) {\n      let piece = pieces[i];\n      try {\n        piece = decodeURIComponent(piece.replace(/\\+/g, ' '));\n      } catch (e) {}\n      pathStringDecoded += '/' + piece;\n    }\n  }\n  return pathStringDecoded;\n}\n\n/**\n * @returns key value hash\n */\nfunction decodeQuery(queryString: string): { [key: string]: string } {\n  const results = {};\n  if (queryString.charAt(0) === '?') {\n    queryString = queryString.substring(1);\n  }\n  for (const segment of queryString.split('&')) {\n    if (segment.length === 0) {\n      continue;\n    }\n    const kv = segment.split('=');\n    if (kv.length === 2) {\n      results[decodeURIComponent(kv[0])] = decodeURIComponent(kv[1]);\n    } else {\n      warn(`Invalid query segment '${segment}' in query '${queryString}'`);\n    }\n  }\n  return results;\n}\n\nexport const parseRepoInfo = function (\n  dataURL: string,\n  nodeAdmin: boolean\n): { repoInfo: RepoInfo; path: Path } {\n  const parsedUrl = parseDatabaseURL(dataURL),\n    namespace = parsedUrl.namespace;\n\n  if (parsedUrl.domain === 'firebase.com') {\n    fatal(\n      parsedUrl.host +\n        ' is no longer supported. ' +\n        'Please use <YOUR FIREBASE>.firebaseio.com instead'\n    );\n  }\n\n  // Catch common error of uninitialized namespace value.\n  if (\n    (!namespace || namespace === 'undefined') &&\n    parsedUrl.domain !== 'localhost'\n  ) {\n    fatal(\n      'Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com'\n    );\n  }\n\n  if (!parsedUrl.secure) {\n    warnIfPageIsSecure();\n  }\n\n  const webSocketOnly = parsedUrl.scheme === 'ws' || parsedUrl.scheme === 'wss';\n\n  return {\n    repoInfo: new RepoInfo(\n      parsedUrl.host,\n      parsedUrl.secure,\n      namespace,\n      webSocketOnly,\n      nodeAdmin,\n      /*persistenceKey=*/ '',\n      /*includeNamespaceInQueryParams=*/ namespace !== parsedUrl.subdomain\n    ),\n    path: new Path(parsedUrl.pathString)\n  };\n};\n\nexport const parseDatabaseURL = function (dataURL: string): {\n  host: string;\n  port: number;\n  domain: string;\n  subdomain: string;\n  secure: boolean;\n  scheme: string;\n  pathString: string;\n  namespace: string;\n} {\n  // Default to empty strings in the event of a malformed string.\n  let host = '',\n    domain = '',\n    subdomain = '',\n    pathString = '',\n    namespace = '';\n\n  // Always default to SSL, unless otherwise specified.\n  let secure = true,\n    scheme = 'https',\n    port = 443;\n\n  // Don't do any validation here. The caller is responsible for validating the result of parsing.\n  if (typeof dataURL === 'string') {\n    // Parse scheme.\n    let colonInd = dataURL.indexOf('//');\n    if (colonInd >= 0) {\n      scheme = dataURL.substring(0, colonInd - 1);\n      dataURL = dataURL.substring(colonInd + 2);\n    }\n\n    // Parse host, path, and query string.\n    let slashInd = dataURL.indexOf('/');\n    if (slashInd === -1) {\n      slashInd = dataURL.length;\n    }\n    let questionMarkInd = dataURL.indexOf('?');\n    if (questionMarkInd === -1) {\n      questionMarkInd = dataURL.length;\n    }\n    host = dataURL.substring(0, Math.min(slashInd, questionMarkInd));\n    if (slashInd < questionMarkInd) {\n      // For pathString, questionMarkInd will always come after slashInd\n      pathString = decodePath(dataURL.substring(slashInd, questionMarkInd));\n    }\n    const queryParams = decodeQuery(\n      dataURL.substring(Math.min(dataURL.length, questionMarkInd))\n    );\n\n    // If we have a port, use scheme for determining if it's secure.\n    colonInd = host.indexOf(':');\n    if (colonInd >= 0) {\n      secure = scheme === 'https' || scheme === 'wss';\n      port = parseInt(host.substring(colonInd + 1), 10);\n    } else {\n      colonInd = host.length;\n    }\n\n    const hostWithoutPort = host.slice(0, colonInd);\n    if (hostWithoutPort.toLowerCase() === 'localhost') {\n      domain = 'localhost';\n    } else if (hostWithoutPort.split('.').length <= 2) {\n      domain = hostWithoutPort;\n    } else {\n      // Interpret the subdomain of a 3 or more component URL as the namespace name.\n      const dotInd = host.indexOf('.');\n      subdomain = host.substring(0, dotInd).toLowerCase();\n      domain = host.substring(dotInd + 1);\n      // Normalize namespaces to lowercase to share storage / connection.\n      namespace = subdomain;\n    }\n    // Always treat the value of the `ns` as the namespace name if it is present.\n    if ('ns' in queryParams) {\n      namespace = queryParams['ns'];\n    }\n  }\n\n  return {\n    host,\n    port,\n    domain,\n    subdomain,\n    secure,\n    scheme,\n    pathString,\n    namespace\n  };\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport {\n  tryParseInt,\n  MAX_NAME,\n  MIN_NAME,\n  INTEGER_32_MIN,\n  INTEGER_32_MAX\n} from '../util/util';\n\n// Modeled after base64 web-safe chars, but ordered by ASCII.\nconst PUSH_CHARS =\n  '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';\n\nconst MIN_PUSH_CHAR = '-';\n\nconst MAX_PUSH_CHAR = 'z';\n\nconst MAX_KEY_LEN = 786;\n\n/**\n * Fancy ID generator that creates 20-character string identifiers with the\n * following properties:\n *\n * 1. They're based on timestamp so that they sort *after* any existing ids.\n * 2. They contain 72-bits of random data after the timestamp so that IDs won't\n *    collide with other clients' IDs.\n * 3. They sort *lexicographically* (so the timestamp is converted to characters\n *    that will sort properly).\n * 4. They're monotonically increasing. Even if you generate more than one in\n *    the same timestamp, the latter ones will sort after the former ones. We do\n *    this by using the previous random bits but \"incrementing\" them by 1 (only\n *    in the case of a timestamp collision).\n */\nexport const nextPushId = (function () {\n  // Timestamp of last push, used to prevent local collisions if you push twice\n  // in one ms.\n  let lastPushTime = 0;\n\n  // We generate 72-bits of randomness which get turned into 12 characters and\n  // appended to the timestamp to prevent collisions with other clients. We\n  // store the last characters we generated because in the event of a collision,\n  // we'll use those same characters except \"incremented\" by one.\n  const lastRandChars: number[] = [];\n\n  return function (now: number) {\n    const duplicateTime = now === lastPushTime;\n    lastPushTime = now;\n\n    let i;\n    const timeStampChars = new Array(8);\n    for (i = 7; i >= 0; i--) {\n      timeStampChars[i] = PUSH_CHARS.charAt(now % 64);\n      // NOTE: Can't use << here because javascript will convert to int and lose\n      // the upper bits.\n      now = Math.floor(now / 64);\n    }\n    assert(now === 0, 'Cannot push at time == 0');\n\n    let id = timeStampChars.join('');\n\n    if (!duplicateTime) {\n      for (i = 0; i < 12; i++) {\n        lastRandChars[i] = Math.floor(Math.random() * 64);\n      }\n    } else {\n      // If the timestamp hasn't changed since last push, use the same random\n      // number, except incremented by 1.\n      for (i = 11; i >= 0 && lastRandChars[i] === 63; i--) {\n        lastRandChars[i] = 0;\n      }\n      lastRandChars[i]++;\n    }\n    for (i = 0; i < 12; i++) {\n      id += PUSH_CHARS.charAt(lastRandChars[i]);\n    }\n    assert(id.length === 20, 'nextPushId: Length should be 20.');\n\n    return id;\n  };\n})();\n\nexport const successor = function (key: string) {\n  if (key === '' + INTEGER_32_MAX) {\n    // See https://firebase.google.com/docs/database/web/lists-of-data#data-order\n    return MIN_PUSH_CHAR;\n  }\n  const keyAsInt: number = tryParseInt(key);\n  if (keyAsInt != null) {\n    return '' + (keyAsInt + 1);\n  }\n  const next = new Array(key.length);\n\n  for (let i = 0; i < next.length; i++) {\n    next[i] = key.charAt(i);\n  }\n\n  if (next.length < MAX_KEY_LEN) {\n    next.push(MIN_PUSH_CHAR);\n    return next.join('');\n  }\n\n  let i = next.length - 1;\n\n  while (i >= 0 && next[i] === MAX_PUSH_CHAR) {\n    i--;\n  }\n\n  // `successor` was called on the largest possible key, so return the\n  // MAX_NAME, which sorts larger than all keys.\n  if (i === -1) {\n    return MAX_NAME;\n  }\n\n  const source = next[i];\n  const sourcePlusOne = PUSH_CHARS.charAt(PUSH_CHARS.indexOf(source) + 1);\n  next[i] = sourcePlusOne;\n\n  return next.slice(0, i + 1).join('');\n};\n\n// `key` is assumed to be non-empty.\nexport const predecessor = function (key: string) {\n  if (key === '' + INTEGER_32_MIN) {\n    return MIN_NAME;\n  }\n  const keyAsInt: number = tryParseInt(key);\n  if (keyAsInt != null) {\n    return '' + (keyAsInt - 1);\n  }\n  const next = new Array(key.length);\n  for (let i = 0; i < next.length; i++) {\n    next[i] = key.charAt(i);\n  }\n  // If `key` ends in `MIN_PUSH_CHAR`, the largest key lexicographically\n  // smaller than `key`, is `key[0:key.length - 1]`. The next key smaller\n  // than that, `predecessor(predecessor(key))`, is\n  //\n  // `key[0:key.length - 2] + (key[key.length - 1] - 1) + \\\n  //   { MAX_PUSH_CHAR repeated MAX_KEY_LEN - (key.length - 1) times }\n  //\n  // analogous to increment/decrement for base-10 integers.\n  //\n  // This works because lexigographic comparison works character-by-character,\n  // using length as a tie-breaker if one key is a prefix of the other.\n  if (next[next.length - 1] === MIN_PUSH_CHAR) {\n    if (next.length === 1) {\n      // See https://firebase.google.com/docs/database/web/lists-of-data#orderbykey\n      return '' + INTEGER_32_MAX;\n    }\n    delete next[next.length - 1];\n    return next.join('');\n  }\n  // Replace the last character with it's immediate predecessor, and\n  // fill the suffix of the key with MAX_PUSH_CHAR. This is the\n  // lexicographically largest possible key smaller than `key`.\n  next[next.length - 1] = PUSH_CHARS.charAt(\n    PUSH_CHARS.indexOf(next[next.length - 1]) - 1\n  );\n  return next.join('') + MAX_PUSH_CHAR.repeat(MAX_KEY_LEN - next.length);\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringify } from '@firebase/util';\n\nimport { DataSnapshot as ExpDataSnapshot } from '../../api/Reference_impl';\nimport { Path } from '../util/Path';\n\nimport { EventRegistration } from './EventRegistration';\n\n/**\n * Encapsulates the data needed to raise an event\n * @interface\n */\nexport interface Event {\n  getPath(): Path;\n\n  getEventType(): string;\n\n  getEventRunner(): () => void;\n\n  toString(): string;\n}\n\n/**\n * One of the following strings: \"value\", \"child_added\", \"child_changed\",\n * \"child_removed\", or \"child_moved.\"\n */\nexport type EventType =\n  | 'value'\n  | 'child_added'\n  | 'child_changed'\n  | 'child_moved'\n  | 'child_removed';\n\n/**\n * Encapsulates the data needed to raise an event\n */\nexport class DataEvent implements Event {\n  /**\n   * @param eventType - One of: value, child_added, child_changed, child_moved, child_removed\n   * @param eventRegistration - The function to call to with the event data. User provided\n   * @param snapshot - The data backing the event\n   * @param prevName - Optional, the name of the previous child for child_* events.\n   */\n  constructor(\n    public eventType: EventType,\n    public eventRegistration: EventRegistration,\n    public snapshot: ExpDataSnapshot,\n    public prevName?: string | null\n  ) {}\n  getPath(): Path {\n    const ref = this.snapshot.ref;\n    if (this.eventType === 'value') {\n      return ref._path;\n    } else {\n      return ref.parent._path;\n    }\n  }\n  getEventType(): string {\n    return this.eventType;\n  }\n  getEventRunner(): () => void {\n    return this.eventRegistration.getEventRunner(this);\n  }\n  toString(): string {\n    return (\n      this.getPath().toString() +\n      ':' +\n      this.eventType +\n      ':' +\n      stringify(this.snapshot.exportVal())\n    );\n  }\n}\n\nexport class CancelEvent implements Event {\n  constructor(\n    public eventRegistration: EventRegistration,\n    public error: Error,\n    public path: Path\n  ) {}\n  getPath(): Path {\n    return this.path;\n  }\n  getEventType(): string {\n    return 'cancel';\n  }\n  getEventRunner(): () => void {\n    return this.eventRegistration.getEventRunner(this);\n  }\n  toString(): string {\n    return this.path.toString() + ':cancel';\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { DataSnapshot } from '../../api/Reference_impl';\nimport { Repo } from '../Repo';\nimport { Path } from '../util/Path';\n\nimport { Change } from './Change';\nimport { CancelEvent, Event } from './Event';\nimport { QueryParams } from './QueryParams';\n\n/**\n * A user callback. Callbacks issues from the Legacy SDK maintain references\n * to the original user-issued callbacks, which allows equality\n * comparison by reference even though this callbacks are wrapped before\n * they can be passed to the firebase@exp SDK.\n *\n * @internal\n */\nexport interface UserCallback {\n  (dataSnapshot: DataSnapshot, previousChildName?: string | null): unknown;\n  userCallback?: unknown;\n  context?: object | null;\n}\n\n/**\n * A wrapper class that converts events from the database@exp SDK to the legacy\n * Database SDK. Events are not converted directly as event registration relies\n * on reference comparison of the original user callback (see `matches()`) and\n * relies on equality of the legacy SDK's `context` object.\n */\nexport class CallbackContext {\n  constructor(\n    private readonly snapshotCallback: UserCallback,\n    private readonly cancelCallback?: (error: Error) => unknown\n  ) {}\n\n  onValue(\n    expDataSnapshot: DataSnapshot,\n    previousChildName?: string | null\n  ): void {\n    this.snapshotCallback.call(null, expDataSnapshot, previousChildName);\n  }\n\n  onCancel(error: Error): void {\n    assert(\n      this.hasCancelCallback,\n      'Raising a cancel event on a listener with no cancel callback'\n    );\n    return this.cancelCallback.call(null, error);\n  }\n\n  get hasCancelCallback(): boolean {\n    return !!this.cancelCallback;\n  }\n\n  matches(other: CallbackContext): boolean {\n    return (\n      this.snapshotCallback === other.snapshotCallback ||\n      (this.snapshotCallback.userCallback !== undefined &&\n        this.snapshotCallback.userCallback ===\n          other.snapshotCallback.userCallback &&\n        this.snapshotCallback.context === other.snapshotCallback.context)\n    );\n  }\n}\n\nexport interface QueryContext {\n  readonly _queryIdentifier: string;\n  readonly _queryObject: object;\n  readonly _repo: Repo;\n  readonly _path: Path;\n  readonly _queryParams: QueryParams;\n}\n\n/**\n * An EventRegistration is basically an event type ('value', 'child_added', etc.) and a callback\n * to be notified of that type of event.\n *\n * That said, it can also contain a cancel callback to be notified if the event is canceled.  And\n * currently, this code is organized around the idea that you would register multiple child_ callbacks\n * together, as a single EventRegistration.  Though currently we don't do that.\n */\nexport interface EventRegistration {\n  /**\n   * True if this container has a callback to trigger for this event type\n   */\n  respondsTo(eventType: string): boolean;\n\n  createEvent(change: Change, query: QueryContext): Event;\n\n  /**\n   * Given event data, return a function to trigger the user's callback\n   */\n  getEventRunner(eventData: Event): () => void;\n\n  createCancelEvent(error: Error, path: Path): CancelEvent | null;\n\n  matches(other: EventRegistration): boolean;\n\n  /**\n   * False basically means this is a \"dummy\" callback container being used as a sentinel\n   * to remove all callback containers of a particular type.  (e.g. if the user does\n   * ref.off('value') without specifying a specific callback).\n   *\n   * (TODO: Rework this, since it's hacky)\n   *\n   */\n  hasAnyCallback(): boolean;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Deferred } from '@firebase/util';\n\nimport {\n  Repo,\n  repoOnDisconnectCancel,\n  repoOnDisconnectSet,\n  repoOnDisconnectSetWithPriority,\n  repoOnDisconnectUpdate\n} from '../core/Repo';\nimport { Path } from '../core/util/Path';\nimport {\n  validateFirebaseDataArg,\n  validateFirebaseMergeDataArg,\n  validatePriority,\n  validateWritablePath\n} from '../core/util/validation';\n\n/**\n * The `onDisconnect` class allows you to write or clear data when your client\n * disconnects from the Database server. These updates occur whether your\n * client disconnects cleanly or not, so you can rely on them to clean up data\n * even if a connection is dropped or a client crashes.\n *\n * The `onDisconnect` class is most commonly used to manage presence in\n * applications where it is useful to detect how many clients are connected and\n * when other clients disconnect. See\n * {@link https://firebase.google.com/docs/database/web/offline-capabilities | Enabling Offline Capabilities in JavaScript}\n * for more information.\n *\n * To avoid problems when a connection is dropped before the requests can be\n * transferred to the Database server, these functions should be called before\n * writing any data.\n *\n * Note that `onDisconnect` operations are only triggered once. If you want an\n * operation to occur each time a disconnect occurs, you'll need to re-establish\n * the `onDisconnect` operations each time you reconnect.\n */\nexport class OnDisconnect {\n  /** @hideconstructor */\n  constructor(private _repo: Repo, private _path: Path) {}\n\n  /**\n   * Cancels all previously queued `onDisconnect()` set or update events for this\n   * location and all children.\n   *\n   * If a write has been queued for this location via a `set()` or `update()` at a\n   * parent location, the write at this location will be canceled, though writes\n   * to sibling locations will still occur.\n   *\n   * @returns Resolves when synchronization to the server is complete.\n   */\n  cancel(): Promise<void> {\n    const deferred = new Deferred<void>();\n    repoOnDisconnectCancel(\n      this._repo,\n      this._path,\n      deferred.wrapCallback(() => {})\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * Ensures the data at this location is deleted when the client is disconnected\n   * (due to closing the browser, navigating to a new page, or network issues).\n   *\n   * @returns Resolves when synchronization to the server is complete.\n   */\n  remove(): Promise<void> {\n    validateWritablePath('OnDisconnect.remove', this._path);\n    const deferred = new Deferred<void>();\n    repoOnDisconnectSet(\n      this._repo,\n      this._path,\n      null,\n      deferred.wrapCallback(() => {})\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * Ensures the data at this location is set to the specified value when the\n   * client is disconnected (due to closing the browser, navigating to a new page,\n   * or network issues).\n   *\n   * `set()` is especially useful for implementing \"presence\" systems, where a\n   * value should be changed or cleared when a user disconnects so that they\n   * appear \"offline\" to other users. See\n   * {@link https://firebase.google.com/docs/database/web/offline-capabilities | Enabling Offline Capabilities in JavaScript}\n   * for more information.\n   *\n   * Note that `onDisconnect` operations are only triggered once. If you want an\n   * operation to occur each time a disconnect occurs, you'll need to re-establish\n   * the `onDisconnect` operations each time.\n   *\n   * @param value - The value to be written to this location on disconnect (can\n   * be an object, array, string, number, boolean, or null).\n   * @returns Resolves when synchronization to the Database is complete.\n   */\n  set(value: unknown): Promise<void> {\n    validateWritablePath('OnDisconnect.set', this._path);\n    validateFirebaseDataArg('OnDisconnect.set', value, this._path, false);\n    const deferred = new Deferred<void>();\n    repoOnDisconnectSet(\n      this._repo,\n      this._path,\n      value,\n      deferred.wrapCallback(() => {})\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * Ensures the data at this location is set to the specified value and priority\n   * when the client is disconnected (due to closing the browser, navigating to a\n   * new page, or network issues).\n   *\n   * @param value - The value to be written to this location on disconnect (can\n   * be an object, array, string, number, boolean, or null).\n   * @param priority - The priority to be written (string, number, or null).\n   * @returns Resolves when synchronization to the Database is complete.\n   */\n  setWithPriority(\n    value: unknown,\n    priority: number | string | null\n  ): Promise<void> {\n    validateWritablePath('OnDisconnect.setWithPriority', this._path);\n    validateFirebaseDataArg(\n      'OnDisconnect.setWithPriority',\n      value,\n      this._path,\n      false\n    );\n    validatePriority('OnDisconnect.setWithPriority', priority, false);\n\n    const deferred = new Deferred<void>();\n    repoOnDisconnectSetWithPriority(\n      this._repo,\n      this._path,\n      value,\n      priority,\n      deferred.wrapCallback(() => {})\n    );\n    return deferred.promise;\n  }\n\n  /**\n   * Writes multiple values at this location when the client is disconnected (due\n   * to closing the browser, navigating to a new page, or network issues).\n   *\n   * The `values` argument contains multiple property-value pairs that will be\n   * written to the Database together. Each child property can either be a simple\n   * property (for example, \"name\") or a relative path (for example, \"name/first\")\n   * from the current location to the data to update.\n   *\n   * As opposed to the `set()` method, `update()` can be use to selectively update\n   * only the referenced properties at the current location (instead of replacing\n   * all the child properties at the current location).\n   *\n   * @param values - Object containing multiple values.\n   * @returns Resolves when synchronization to the Database is complete.\n   */\n  update(values: object): Promise<void> {\n    validateWritablePath('OnDisconnect.update', this._path);\n    validateFirebaseMergeDataArg(\n      'OnDisconnect.update',\n      values,\n      this._path,\n      false\n    );\n    const deferred = new Deferred<void>();\n    repoOnDisconnectUpdate(\n      this._repo,\n      this._path,\n      values as Record<string, unknown>,\n      deferred.wrapCallback(() => {})\n    );\n    return deferred.promise;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, getModularInstance, Deferred } from '@firebase/util';\n\nimport {\n  Repo,\n  repoAddEventCallbackForQuery,\n  repoGetValue,\n  repoRemoveEventCallbackForQuery,\n  repoServerTime,\n  repoSetWithPriority,\n  repoUpdate\n} from '../core/Repo';\nimport { ChildrenNode } from '../core/snap/ChildrenNode';\nimport { Index } from '../core/snap/indexes/Index';\nimport { KEY_INDEX } from '../core/snap/indexes/KeyIndex';\nimport { PathIndex } from '../core/snap/indexes/PathIndex';\nimport { PRIORITY_INDEX } from '../core/snap/indexes/PriorityIndex';\nimport { VALUE_INDEX } from '../core/snap/indexes/ValueIndex';\nimport { Node } from '../core/snap/Node';\nimport { syncPointSetReferenceConstructor } from '../core/SyncPoint';\nimport { syncTreeSetReferenceConstructor } from '../core/SyncTree';\nimport { parseRepoInfo } from '../core/util/libs/parser';\nimport { nextPushId } from '../core/util/NextPushId';\nimport {\n  Path,\n  pathEquals,\n  pathGetBack,\n  pathGetFront,\n  pathChild,\n  pathParent,\n  pathToUrlEncodedString,\n  pathIsEmpty\n} from '../core/util/Path';\nimport {\n  fatal,\n  MAX_NAME,\n  MIN_NAME,\n  ObjectToUniqueKey\n} from '../core/util/util';\nimport {\n  isValidPriority,\n  validateFirebaseDataArg,\n  validateFirebaseMergeDataArg,\n  validateKey,\n  validatePathString,\n  validatePriority,\n  validateRootPathString,\n  validateUrl,\n  validateWritablePath\n} from '../core/util/validation';\nimport { Change } from '../core/view/Change';\nimport { CancelEvent, DataEvent, EventType } from '../core/view/Event';\nimport {\n  CallbackContext,\n  EventRegistration,\n  QueryContext,\n  UserCallback\n} from '../core/view/EventRegistration';\nimport {\n  QueryParams,\n  queryParamsEndAt,\n  queryParamsEndBefore,\n  queryParamsGetQueryObject,\n  queryParamsLimitToFirst,\n  queryParamsLimitToLast,\n  queryParamsOrderBy,\n  queryParamsStartAfter,\n  queryParamsStartAt\n} from '../core/view/QueryParams';\n\nimport { Database } from './Database';\nimport { OnDisconnect } from './OnDisconnect';\nimport {\n  ListenOptions,\n  Query as Query,\n  DatabaseReference,\n  Unsubscribe,\n  ThenableReference\n} from './Reference';\n\n/**\n * @internal\n */\nexport class QueryImpl implements Query, QueryContext {\n  /**\n   * @hideconstructor\n   */\n  constructor(\n    readonly _repo: Repo,\n    readonly _path: Path,\n    readonly _queryParams: QueryParams,\n    readonly _orderByCalled: boolean\n  ) {}\n\n  get key(): string | null {\n    if (pathIsEmpty(this._path)) {\n      return null;\n    } else {\n      return pathGetBack(this._path);\n    }\n  }\n\n  get ref(): DatabaseReference {\n    return new ReferenceImpl(this._repo, this._path);\n  }\n\n  get _queryIdentifier(): string {\n    const obj = queryParamsGetQueryObject(this._queryParams);\n    const id = ObjectToUniqueKey(obj);\n    return id === '{}' ? 'default' : id;\n  }\n\n  /**\n   * An object representation of the query parameters used by this Query.\n   */\n  get _queryObject(): object {\n    return queryParamsGetQueryObject(this._queryParams);\n  }\n\n  isEqual(other: QueryImpl | null): boolean {\n    other = getModularInstance(other);\n    if (!(other instanceof QueryImpl)) {\n      return false;\n    }\n\n    const sameRepo = this._repo === other._repo;\n    const samePath = pathEquals(this._path, other._path);\n    const sameQueryIdentifier =\n      this._queryIdentifier === other._queryIdentifier;\n\n    return sameRepo && samePath && sameQueryIdentifier;\n  }\n\n  toJSON(): string {\n    return this.toString();\n  }\n\n  toString(): string {\n    return this._repo.toString() + pathToUrlEncodedString(this._path);\n  }\n}\n\n/**\n * Validates that no other order by call has been made\n */\nfunction validateNoPreviousOrderByCall(query: QueryImpl, fnName: string) {\n  if (query._orderByCalled === true) {\n    throw new Error(fnName + \": You can't combine multiple orderBy calls.\");\n  }\n}\n\n/**\n * Validates start/end values for queries.\n */\nfunction validateQueryEndpoints(params: QueryParams) {\n  let startNode = null;\n  let endNode = null;\n  if (params.hasStart()) {\n    startNode = params.getIndexStartValue();\n  }\n  if (params.hasEnd()) {\n    endNode = params.getIndexEndValue();\n  }\n\n  if (params.getIndex() === KEY_INDEX) {\n    const tooManyArgsError =\n      'Query: When ordering by key, you may only pass one argument to ' +\n      'startAt(), endAt(), or equalTo().';\n    const wrongArgTypeError =\n      'Query: When ordering by key, the argument passed to startAt(), startAfter(), ' +\n      'endAt(), endBefore(), or equalTo() must be a string.';\n    if (params.hasStart()) {\n      const startName = params.getIndexStartName();\n      if (startName !== MIN_NAME) {\n        throw new Error(tooManyArgsError);\n      } else if (typeof startNode !== 'string') {\n        throw new Error(wrongArgTypeError);\n      }\n    }\n    if (params.hasEnd()) {\n      const endName = params.getIndexEndName();\n      if (endName !== MAX_NAME) {\n        throw new Error(tooManyArgsError);\n      } else if (typeof endNode !== 'string') {\n        throw new Error(wrongArgTypeError);\n      }\n    }\n  } else if (params.getIndex() === PRIORITY_INDEX) {\n    if (\n      (startNode != null && !isValidPriority(startNode)) ||\n      (endNode != null && !isValidPriority(endNode))\n    ) {\n      throw new Error(\n        'Query: When ordering by priority, the first argument passed to startAt(), ' +\n          'startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value ' +\n          '(null, a number, or a string).'\n      );\n    }\n  } else {\n    assert(\n      params.getIndex() instanceof PathIndex ||\n        params.getIndex() === VALUE_INDEX,\n      'unknown index type.'\n    );\n    if (\n      (startNode != null && typeof startNode === 'object') ||\n      (endNode != null && typeof endNode === 'object')\n    ) {\n      throw new Error(\n        'Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or ' +\n          'equalTo() cannot be an object.'\n      );\n    }\n  }\n}\n\n/**\n * Validates that limit* has been called with the correct combination of parameters\n */\nfunction validateLimit(params: QueryParams) {\n  if (\n    params.hasStart() &&\n    params.hasEnd() &&\n    params.hasLimit() &&\n    !params.hasAnchoredLimit()\n  ) {\n    throw new Error(\n      \"Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use \" +\n        'limitToFirst() or limitToLast() instead.'\n    );\n  }\n}\n/**\n * @internal\n */\nexport class ReferenceImpl extends QueryImpl implements DatabaseReference {\n  /** @hideconstructor */\n  constructor(repo: Repo, path: Path) {\n    super(repo, path, new QueryParams(), false);\n  }\n\n  get parent(): ReferenceImpl | null {\n    const parentPath = pathParent(this._path);\n    return parentPath === null\n      ? null\n      : new ReferenceImpl(this._repo, parentPath);\n  }\n\n  get root(): ReferenceImpl {\n    let ref: ReferenceImpl = this;\n    while (ref.parent !== null) {\n      ref = ref.parent;\n    }\n    return ref;\n  }\n}\n\n/**\n * A `DataSnapshot` contains data from a Database location.\n *\n * Any time you read data from the Database, you receive the data as a\n * `DataSnapshot`. A `DataSnapshot` is passed to the event callbacks you attach\n * with `on()` or `once()`. You can extract the contents of the snapshot as a\n * JavaScript object by calling the `val()` method. Alternatively, you can\n * traverse into the snapshot by calling `child()` to return child snapshots\n * (which you could then call `val()` on).\n *\n * A `DataSnapshot` is an efficiently generated, immutable copy of the data at\n * a Database location. It cannot be modified and will never change (to modify\n * data, you always call the `set()` method on a `Reference` directly).\n */\nexport class DataSnapshot {\n  /**\n   * @param _node - A SnapshotNode to wrap.\n   * @param ref - The location this snapshot came from.\n   * @param _index - The iteration order for this snapshot\n   * @hideconstructor\n   */\n  constructor(\n    readonly _node: Node,\n    /**\n     * The location of this DataSnapshot.\n     */\n    readonly ref: DatabaseReference,\n    readonly _index: Index\n  ) {}\n\n  /**\n   * Gets the priority value of the data in this `DataSnapshot`.\n   *\n   * Applications need not use priority but can order collections by\n   * ordinary properties (see\n   * {@link https://firebase.google.com/docs/database/web/lists-of-data#sorting_and_filtering_data |Sorting and filtering data}\n   * ).\n   */\n  get priority(): string | number | null {\n    // typecast here because we never return deferred values or internal priorities (MAX_PRIORITY)\n    return this._node.getPriority().val() as string | number | null;\n  }\n\n  /**\n   * The key (last part of the path) of the location of this `DataSnapshot`.\n   *\n   * The last token in a Database location is considered its key. For example,\n   * \"ada\" is the key for the /users/ada/ node. Accessing the key on any\n   * `DataSnapshot` will return the key for the location that generated it.\n   * However, accessing the key on the root URL of a Database will return\n   * `null`.\n   */\n  get key(): string | null {\n    return this.ref.key;\n  }\n\n  /** Returns the number of child properties of this `DataSnapshot`. */\n  get size(): number {\n    return this._node.numChildren();\n  }\n\n  /**\n   * Gets another `DataSnapshot` for the location at the specified relative path.\n   *\n   * Passing a relative path to the `child()` method of a DataSnapshot returns\n   * another `DataSnapshot` for the location at the specified relative path. The\n   * relative path can either be a simple child name (for example, \"ada\") or a\n   * deeper, slash-separated path (for example, \"ada/name/first\"). If the child\n   * location has no data, an empty `DataSnapshot` (that is, a `DataSnapshot`\n   * whose value is `null`) is returned.\n   *\n   * @param path - A relative path to the location of child data.\n   */\n  child(path: string): DataSnapshot {\n    const childPath = new Path(path);\n    const childRef = child(this.ref, path);\n    return new DataSnapshot(\n      this._node.getChild(childPath),\n      childRef,\n      PRIORITY_INDEX\n    );\n  }\n  /**\n   * Returns true if this `DataSnapshot` contains any data. It is slightly more\n   * efficient than using `snapshot.val() !== null`.\n   */\n  exists(): boolean {\n    return !this._node.isEmpty();\n  }\n\n  /**\n   * Exports the entire contents of the DataSnapshot as a JavaScript object.\n   *\n   * The `exportVal()` method is similar to `val()`, except priority information\n   * is included (if available), making it suitable for backing up your data.\n   *\n   * @returns The DataSnapshot's contents as a JavaScript value (Object,\n   *   Array, string, number, boolean, or `null`).\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  exportVal(): any {\n    return this._node.val(true);\n  }\n\n  /**\n   * Enumerates the top-level children in the `IteratedDataSnapshot`.\n   *\n   * Because of the way JavaScript objects work, the ordering of data in the\n   * JavaScript object returned by `val()` is not guaranteed to match the\n   * ordering on the server nor the ordering of `onChildAdded()` events. That is\n   * where `forEach()` comes in handy. It guarantees the children of a\n   * `DataSnapshot` will be iterated in their query order.\n   *\n   * If no explicit `orderBy*()` method is used, results are returned\n   * ordered by key (unless priorities are used, in which case, results are\n   * returned by priority).\n   *\n   * @param action - A function that will be called for each child DataSnapshot.\n   * The callback can return true to cancel further enumeration.\n   * @returns true if enumeration was canceled due to your callback returning\n   * true.\n   */\n  forEach(action: (child: IteratedDataSnapshot) => boolean | void): boolean {\n    if (this._node.isLeafNode()) {\n      return false;\n    }\n\n    const childrenNode = this._node as ChildrenNode;\n    // Sanitize the return value to a boolean. ChildrenNode.forEachChild has a weird return type...\n    return !!childrenNode.forEachChild(this._index, (key, node) => {\n      return action(\n        new DataSnapshot(node, child(this.ref, key), PRIORITY_INDEX)\n      );\n    });\n  }\n\n  /**\n   * Returns true if the specified child path has (non-null) data.\n   *\n   * @param path - A relative path to the location of a potential child.\n   * @returns `true` if data exists at the specified child path; else\n   *  `false`.\n   */\n  hasChild(path: string): boolean {\n    const childPath = new Path(path);\n    return !this._node.getChild(childPath).isEmpty();\n  }\n\n  /**\n   * Returns whether or not the `DataSnapshot` has any non-`null` child\n   * properties.\n   *\n   * You can use `hasChildren()` to determine if a `DataSnapshot` has any\n   * children. If it does, you can enumerate them using `forEach()`. If it\n   * doesn't, then either this snapshot contains a primitive value (which can be\n   * retrieved with `val()`) or it is empty (in which case, `val()` will return\n   * `null`).\n   *\n   * @returns true if this snapshot has any children; else false.\n   */\n  hasChildren(): boolean {\n    if (this._node.isLeafNode()) {\n      return false;\n    } else {\n      return !this._node.isEmpty();\n    }\n  }\n\n  /**\n   * Returns a JSON-serializable representation of this object.\n   */\n  toJSON(): object | null {\n    return this.exportVal();\n  }\n\n  /**\n   * Extracts a JavaScript value from a `DataSnapshot`.\n   *\n   * Depending on the data in a `DataSnapshot`, the `val()` method may return a\n   * scalar type (string, number, or boolean), an array, or an object. It may\n   * also return null, indicating that the `DataSnapshot` is empty (contains no\n   * data).\n   *\n   * @returns The DataSnapshot's contents as a JavaScript value (Object,\n   *   Array, string, number, boolean, or `null`).\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  val(): any {\n    return this._node.val();\n  }\n}\n\n/**\n * Represents a child snapshot of a `Reference` that is being iterated over. The key will never be undefined.\n */\nexport interface IteratedDataSnapshot extends DataSnapshot {\n  key: string; // key of the location of this snapshot.\n}\n\n/**\n *\n * Returns a `Reference` representing the location in the Database\n * corresponding to the provided path. If no path is provided, the `Reference`\n * will point to the root of the Database.\n *\n * @param db - The database instance to obtain a reference for.\n * @param path - Optional path representing the location the returned\n *   `Reference` will point. If not provided, the returned `Reference` will\n *   point to the root of the Database.\n * @returns If a path is provided, a `Reference`\n *   pointing to the provided path. Otherwise, a `Reference` pointing to the\n *   root of the Database.\n */\nexport function ref(db: Database, path?: string): DatabaseReference {\n  db = getModularInstance(db);\n  db._checkNotDeleted('ref');\n  return path !== undefined ? child(db._root, path) : db._root;\n}\n\n/**\n * Returns a `Reference` representing the location in the Database\n * corresponding to the provided Firebase URL.\n *\n * An exception is thrown if the URL is not a valid Firebase Database URL or it\n * has a different domain than the current `Database` instance.\n *\n * Note that all query parameters (`orderBy`, `limitToLast`, etc.) are ignored\n * and are not applied to the returned `Reference`.\n *\n * @param db - The database instance to obtain a reference for.\n * @param url - The Firebase URL at which the returned `Reference` will\n *   point.\n * @returns A `Reference` pointing to the provided\n *   Firebase URL.\n */\nexport function refFromURL(db: Database, url: string): DatabaseReference {\n  db = getModularInstance(db);\n  db._checkNotDeleted('refFromURL');\n  const parsedURL = parseRepoInfo(url, db._repo.repoInfo_.nodeAdmin);\n  validateUrl('refFromURL', parsedURL);\n\n  const repoInfo = parsedURL.repoInfo;\n  if (\n    !db._repo.repoInfo_.isCustomHost() &&\n    repoInfo.host !== db._repo.repoInfo_.host\n  ) {\n    fatal(\n      'refFromURL' +\n        ': Host name does not match the current database: ' +\n        '(found ' +\n        repoInfo.host +\n        ' but expected ' +\n        db._repo.repoInfo_.host +\n        ')'\n    );\n  }\n\n  return ref(db, parsedURL.path.toString());\n}\n/**\n * Gets a `Reference` for the location at the specified relative path.\n *\n * The relative path can either be a simple child name (for example, \"ada\") or\n * a deeper slash-separated path (for example, \"ada/name/first\").\n *\n * @param parent - The parent location.\n * @param path - A relative path from this location to the desired child\n *   location.\n * @returns The specified child location.\n */\nexport function child(\n  parent: DatabaseReference,\n  path: string\n): DatabaseReference {\n  parent = getModularInstance(parent);\n  if (pathGetFront(parent._path) === null) {\n    validateRootPathString('child', 'path', path, false);\n  } else {\n    validatePathString('child', 'path', path, false);\n  }\n  return new ReferenceImpl(parent._repo, pathChild(parent._path, path));\n}\n\n/**\n * Returns an `OnDisconnect` object - see\n * {@link https://firebase.google.com/docs/database/web/offline-capabilities | Enabling Offline Capabilities in JavaScript}\n * for more information on how to use it.\n *\n * @param ref - The reference to add OnDisconnect triggers for.\n */\nexport function onDisconnect(ref: DatabaseReference): OnDisconnect {\n  ref = getModularInstance(ref) as ReferenceImpl;\n  return new OnDisconnect(ref._repo, ref._path);\n}\n\nexport interface ThenableReferenceImpl\n  extends ReferenceImpl,\n    Pick<Promise<ReferenceImpl>, 'then' | 'catch'> {}\n\n/**\n * Generates a new child location using a unique key and returns its\n * `Reference`.\n *\n * This is the most common pattern for adding data to a collection of items.\n *\n * If you provide a value to `push()`, the value is written to the\n * generated location. If you don't pass a value, nothing is written to the\n * database and the child remains empty (but you can use the `Reference`\n * elsewhere).\n *\n * The unique keys generated by `push()` are ordered by the current time, so the\n * resulting list of items is chronologically sorted. The keys are also\n * designed to be unguessable (they contain 72 random bits of entropy).\n *\n * See {@link https://firebase.google.com/docs/database/web/lists-of-data#append_to_a_list_of_data | Append to a list of data}.\n * See {@link https://firebase.googleblog.com/2015/02/the-2120-ways-to-ensure-unique_68.html | The 2^120 Ways to Ensure Unique Identifiers}.\n *\n * @param parent - The parent location.\n * @param value - Optional value to be written at the generated location.\n * @returns Combined `Promise` and `Reference`; resolves when write is complete,\n * but can be used immediately as the `Reference` to the child location.\n */\nexport function push(\n  parent: DatabaseReference,\n  value?: unknown\n): ThenableReference {\n  parent = getModularInstance(parent);\n  validateWritablePath('push', parent._path);\n  validateFirebaseDataArg('push', value, parent._path, true);\n  const now = repoServerTime(parent._repo);\n  const name = nextPushId(now);\n\n  // push() returns a ThennableReference whose promise is fulfilled with a\n  // regular Reference. We use child() to create handles to two different\n  // references. The first is turned into a ThennableReference below by adding\n  // then() and catch() methods and is used as the return value of push(). The\n  // second remains a regular Reference and is used as the fulfilled value of\n  // the first ThennableReference.\n  const thennablePushRef: Partial<ThenableReferenceImpl> = child(\n    parent,\n    name\n  ) as ReferenceImpl;\n  const pushRef = child(parent, name) as ReferenceImpl;\n\n  let promise: Promise<ReferenceImpl>;\n  if (value != null) {\n    promise = set(pushRef, value).then(() => pushRef);\n  } else {\n    promise = Promise.resolve(pushRef);\n  }\n\n  thennablePushRef.then = promise.then.bind(promise);\n  thennablePushRef.catch = promise.then.bind(promise, undefined);\n  return thennablePushRef as ThenableReferenceImpl;\n}\n\n/**\n * Removes the data at this Database location.\n *\n * Any data at child locations will also be deleted.\n *\n * The effect of the remove will be visible immediately and the corresponding\n * event 'value' will be triggered. Synchronization of the remove to the\n * Firebase servers will also be started, and the returned Promise will resolve\n * when complete. If provided, the onComplete callback will be called\n * asynchronously after synchronization has finished.\n *\n * @param ref - The location to remove.\n * @returns Resolves when remove on server is complete.\n */\nexport function remove(ref: DatabaseReference): Promise<void> {\n  validateWritablePath('remove', ref._path);\n  return set(ref, null);\n}\n\n/**\n * Writes data to this Database location.\n *\n * This will overwrite any data at this location and all child locations.\n *\n * The effect of the write will be visible immediately, and the corresponding\n * events (\"value\", \"child_added\", etc.) will be triggered. Synchronization of\n * the data to the Firebase servers will also be started, and the returned\n * Promise will resolve when complete. If provided, the `onComplete` callback\n * will be called asynchronously after synchronization has finished.\n *\n * Passing `null` for the new value is equivalent to calling `remove()`; namely,\n * all data at this location and all child locations will be deleted.\n *\n * `set()` will remove any priority stored at this location, so if priority is\n * meant to be preserved, you need to use `setWithPriority()` instead.\n *\n * Note that modifying data with `set()` will cancel any pending transactions\n * at that location, so extreme care should be taken if mixing `set()` and\n * `transaction()` to modify the same data.\n *\n * A single `set()` will generate a single \"value\" event at the location where\n * the `set()` was performed.\n *\n * @param ref - The location to write to.\n * @param value - The value to be written (string, number, boolean, object,\n *   array, or null).\n * @returns Resolves when write to server is complete.\n */\nexport function set(ref: DatabaseReference, value: unknown): Promise<void> {\n  ref = getModularInstance(ref);\n  validateWritablePath('set', ref._path);\n  validateFirebaseDataArg('set', value, ref._path, false);\n  const deferred = new Deferred<void>();\n  repoSetWithPriority(\n    ref._repo,\n    ref._path,\n    value,\n    /*priority=*/ null,\n    deferred.wrapCallback(() => {})\n  );\n  return deferred.promise;\n}\n\n/**\n * Sets a priority for the data at this Database location.\n *\n * Applications need not use priority but can order collections by\n * ordinary properties (see\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sorting_and_filtering_data | Sorting and filtering data}\n * ).\n *\n * @param ref - The location to write to.\n * @param priority - The priority to be written (string, number, or null).\n * @returns Resolves when write to server is complete.\n */\nexport function setPriority(\n  ref: DatabaseReference,\n  priority: string | number | null\n): Promise<void> {\n  ref = getModularInstance(ref);\n  validateWritablePath('setPriority', ref._path);\n  validatePriority('setPriority', priority, false);\n  const deferred = new Deferred<void>();\n  repoSetWithPriority(\n    ref._repo,\n    pathChild(ref._path, '.priority'),\n    priority,\n    null,\n    deferred.wrapCallback(() => {})\n  );\n  return deferred.promise;\n}\n\n/**\n * Writes data the Database location. Like `set()` but also specifies the\n * priority for that data.\n *\n * Applications need not use priority but can order collections by\n * ordinary properties (see\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sorting_and_filtering_data | Sorting and filtering data}\n * ).\n *\n * @param ref - The location to write to.\n * @param value - The value to be written (string, number, boolean, object,\n *   array, or null).\n * @param priority - The priority to be written (string, number, or null).\n * @returns Resolves when write to server is complete.\n */\nexport function setWithPriority(\n  ref: DatabaseReference,\n  value: unknown,\n  priority: string | number | null\n): Promise<void> {\n  validateWritablePath('setWithPriority', ref._path);\n  validateFirebaseDataArg('setWithPriority', value, ref._path, false);\n  validatePriority('setWithPriority', priority, false);\n  if (ref.key === '.length' || ref.key === '.keys') {\n    throw 'setWithPriority failed: ' + ref.key + ' is a read-only object.';\n  }\n\n  const deferred = new Deferred<void>();\n  repoSetWithPriority(\n    ref._repo,\n    ref._path,\n    value,\n    priority,\n    deferred.wrapCallback(() => {})\n  );\n  return deferred.promise;\n}\n\n/**\n * Writes multiple values to the Database at once.\n *\n * The `values` argument contains multiple property-value pairs that will be\n * written to the Database together. Each child property can either be a simple\n * property (for example, \"name\") or a relative path (for example,\n * \"name/first\") from the current location to the data to update.\n *\n * As opposed to the `set()` method, `update()` can be use to selectively update\n * only the referenced properties at the current location (instead of replacing\n * all the child properties at the current location).\n *\n * The effect of the write will be visible immediately, and the corresponding\n * events ('value', 'child_added', etc.) will be triggered. Synchronization of\n * the data to the Firebase servers will also be started, and the returned\n * Promise will resolve when complete. If provided, the `onComplete` callback\n * will be called asynchronously after synchronization has finished.\n *\n * A single `update()` will generate a single \"value\" event at the location\n * where the `update()` was performed, regardless of how many children were\n * modified.\n *\n * Note that modifying data with `update()` will cancel any pending\n * transactions at that location, so extreme care should be taken if mixing\n * `update()` and `transaction()` to modify the same data.\n *\n * Passing `null` to `update()` will remove the data at this location.\n *\n * See\n * {@link https://firebase.googleblog.com/2015/09/introducing-multi-location-updates-and_86.html | Introducing multi-location updates and more}.\n *\n * @param ref - The location to write to.\n * @param values - Object containing multiple values.\n * @returns Resolves when update on server is complete.\n */\nexport function update(ref: DatabaseReference, values: object): Promise<void> {\n  validateFirebaseMergeDataArg('update', values, ref._path, false);\n  const deferred = new Deferred<void>();\n  repoUpdate(\n    ref._repo,\n    ref._path,\n    values as Record<string, unknown>,\n    deferred.wrapCallback(() => {})\n  );\n  return deferred.promise;\n}\n\n/**\n * Gets the most up-to-date result for this query.\n *\n * @param query - The query to run.\n * @returns A `Promise` which resolves to the resulting DataSnapshot if a value is\n * available, or rejects if the client is unable to return a value (e.g., if the\n * server is unreachable and there is nothing cached).\n */\nexport function get(query: Query): Promise<DataSnapshot> {\n  query = getModularInstance(query) as QueryImpl;\n  const callbackContext = new CallbackContext(() => {});\n  const container = new ValueEventRegistration(callbackContext);\n  return repoGetValue(query._repo, query, container).then(node => {\n    return new DataSnapshot(\n      node,\n      new ReferenceImpl(query._repo, query._path),\n      query._queryParams.getIndex()\n    );\n  });\n}\n/**\n * Represents registration for 'value' events.\n */\nexport class ValueEventRegistration implements EventRegistration {\n  constructor(private callbackContext: CallbackContext) {}\n\n  respondsTo(eventType: string): boolean {\n    return eventType === 'value';\n  }\n\n  createEvent(change: Change, query: QueryContext): DataEvent {\n    const index = query._queryParams.getIndex();\n    return new DataEvent(\n      'value',\n      this,\n      new DataSnapshot(\n        change.snapshotNode,\n        new ReferenceImpl(query._repo, query._path),\n        index\n      )\n    );\n  }\n\n  getEventRunner(eventData: CancelEvent | DataEvent): () => void {\n    if (eventData.getEventType() === 'cancel') {\n      return () =>\n        this.callbackContext.onCancel((eventData as CancelEvent).error);\n    } else {\n      return () =>\n        this.callbackContext.onValue((eventData as DataEvent).snapshot, null);\n    }\n  }\n\n  createCancelEvent(error: Error, path: Path): CancelEvent | null {\n    if (this.callbackContext.hasCancelCallback) {\n      return new CancelEvent(this, error, path);\n    } else {\n      return null;\n    }\n  }\n\n  matches(other: EventRegistration): boolean {\n    if (!(other instanceof ValueEventRegistration)) {\n      return false;\n    } else if (!other.callbackContext || !this.callbackContext) {\n      // If no callback specified, we consider it to match any callback.\n      return true;\n    } else {\n      return other.callbackContext.matches(this.callbackContext);\n    }\n  }\n\n  hasAnyCallback(): boolean {\n    return this.callbackContext !== null;\n  }\n}\n\n/**\n * Represents the registration of a child_x event.\n */\nexport class ChildEventRegistration implements EventRegistration {\n  constructor(\n    private eventType: string,\n    private callbackContext: CallbackContext | null\n  ) {}\n\n  respondsTo(eventType: string): boolean {\n    let eventToCheck =\n      eventType === 'children_added' ? 'child_added' : eventType;\n    eventToCheck =\n      eventToCheck === 'children_removed' ? 'child_removed' : eventToCheck;\n    return this.eventType === eventToCheck;\n  }\n\n  createCancelEvent(error: Error, path: Path): CancelEvent | null {\n    if (this.callbackContext.hasCancelCallback) {\n      return new CancelEvent(this, error, path);\n    } else {\n      return null;\n    }\n  }\n\n  createEvent(change: Change, query: QueryContext): DataEvent {\n    assert(change.childName != null, 'Child events should have a childName.');\n    const childRef = child(\n      new ReferenceImpl(query._repo, query._path),\n      change.childName\n    );\n    const index = query._queryParams.getIndex();\n    return new DataEvent(\n      change.type as EventType,\n      this,\n      new DataSnapshot(change.snapshotNode, childRef, index),\n      change.prevName\n    );\n  }\n\n  getEventRunner(eventData: CancelEvent | DataEvent): () => void {\n    if (eventData.getEventType() === 'cancel') {\n      return () =>\n        this.callbackContext.onCancel((eventData as CancelEvent).error);\n    } else {\n      return () =>\n        this.callbackContext.onValue(\n          (eventData as DataEvent).snapshot,\n          (eventData as DataEvent).prevName\n        );\n    }\n  }\n\n  matches(other: EventRegistration): boolean {\n    if (other instanceof ChildEventRegistration) {\n      return (\n        this.eventType === other.eventType &&\n        (!this.callbackContext ||\n          !other.callbackContext ||\n          this.callbackContext.matches(other.callbackContext))\n      );\n    }\n\n    return false;\n  }\n\n  hasAnyCallback(): boolean {\n    return !!this.callbackContext;\n  }\n}\n\nfunction addEventListener(\n  query: Query,\n  eventType: EventType,\n  callback: UserCallback,\n  cancelCallbackOrListenOptions?: ((error: Error) => unknown) | ListenOptions,\n  options?: ListenOptions\n) {\n  let cancelCallback: ((error: Error) => unknown) | undefined;\n  if (typeof cancelCallbackOrListenOptions === 'object') {\n    cancelCallback = undefined;\n    options = cancelCallbackOrListenOptions;\n  }\n  if (typeof cancelCallbackOrListenOptions === 'function') {\n    cancelCallback = cancelCallbackOrListenOptions;\n  }\n\n  if (options && options.onlyOnce) {\n    const userCallback = callback;\n    const onceCallback: UserCallback = (dataSnapshot, previousChildName) => {\n      repoRemoveEventCallbackForQuery(query._repo, query, container);\n      userCallback(dataSnapshot, previousChildName);\n    };\n    onceCallback.userCallback = callback.userCallback;\n    onceCallback.context = callback.context;\n    callback = onceCallback;\n  }\n\n  const callbackContext = new CallbackContext(\n    callback,\n    cancelCallback || undefined\n  );\n  const container =\n    eventType === 'value'\n      ? new ValueEventRegistration(callbackContext)\n      : new ChildEventRegistration(eventType, callbackContext);\n  repoAddEventCallbackForQuery(query._repo, query, container);\n  return () => repoRemoveEventCallbackForQuery(query._repo, query, container);\n}\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onValue` event will trigger once with the initial data stored at this\n * location, and then trigger again each time the data changes. The\n * `DataSnapshot` passed to the callback will be for the location at which\n * `on()` was called. It won't trigger until the entire contents has been\n * synchronized. If the location has no data, it will be triggered with an empty\n * `DataSnapshot` (`val()` will return `null`).\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs. The\n * callback will be passed a DataSnapshot.\n * @param cancelCallback - An optional callback that will be notified if your\n * event subscription is ever canceled because your client does not have\n * permission to read this data (or it had permission but has now lost it).\n * This callback will be passed an `Error` object indicating why the failure\n * occurred.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onValue(\n  query: Query,\n  callback: (snapshot: DataSnapshot) => unknown,\n  cancelCallback?: (error: Error) => unknown\n): Unsubscribe;\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onValue` event will trigger once with the initial data stored at this\n * location, and then trigger again each time the data changes. The\n * `DataSnapshot` passed to the callback will be for the location at which\n * `on()` was called. It won't trigger until the entire contents has been\n * synchronized. If the location has no data, it will be triggered with an empty\n * `DataSnapshot` (`val()` will return `null`).\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs. The\n * callback will be passed a DataSnapshot.\n * @param options - An object that can be used to configure `onlyOnce`, which\n * then removes the listener after its first invocation.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onValue(\n  query: Query,\n  callback: (snapshot: DataSnapshot) => unknown,\n  options: ListenOptions\n): Unsubscribe;\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onValue` event will trigger once with the initial data stored at this\n * location, and then trigger again each time the data changes. The\n * `DataSnapshot` passed to the callback will be for the location at which\n * `on()` was called. It won't trigger until the entire contents has been\n * synchronized. If the location has no data, it will be triggered with an empty\n * `DataSnapshot` (`val()` will return `null`).\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs. The\n * callback will be passed a DataSnapshot.\n * @param cancelCallback - An optional callback that will be notified if your\n * event subscription is ever canceled because your client does not have\n * permission to read this data (or it had permission but has now lost it).\n * This callback will be passed an `Error` object indicating why the failure\n * occurred.\n * @param options - An object that can be used to configure `onlyOnce`, which\n * then removes the listener after its first invocation.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onValue(\n  query: Query,\n  callback: (snapshot: DataSnapshot) => unknown,\n  cancelCallback: (error: Error) => unknown,\n  options: ListenOptions\n): Unsubscribe;\n\nexport function onValue(\n  query: Query,\n  callback: (snapshot: DataSnapshot) => unknown,\n  cancelCallbackOrListenOptions?: ((error: Error) => unknown) | ListenOptions,\n  options?: ListenOptions\n): Unsubscribe {\n  return addEventListener(\n    query,\n    'value',\n    callback,\n    cancelCallbackOrListenOptions,\n    options\n  );\n}\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildAdded` event will be triggered once for each initial child at this\n * location, and it will be triggered again every time a new child is added. The\n * `DataSnapshot` passed into the callback will reflect the data for the\n * relevant child. For ordering purposes, it is passed a second argument which\n * is a string containing the key of the previous sibling child by sort order,\n * or `null` if it is the first child.\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param cancelCallback - An optional callback that will be notified if your\n * event subscription is ever canceled because your client does not have\n * permission to read this data (or it had permission but has now lost it).\n * This callback will be passed an `Error` object indicating why the failure\n * occurred.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildAdded(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName?: string | null\n  ) => unknown,\n  cancelCallback?: (error: Error) => unknown\n): Unsubscribe;\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildAdded` event will be triggered once for each initial child at this\n * location, and it will be triggered again every time a new child is added. The\n * `DataSnapshot` passed into the callback will reflect the data for the\n * relevant child. For ordering purposes, it is passed a second argument which\n * is a string containing the key of the previous sibling child by sort order,\n * or `null` if it is the first child.\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param options - An object that can be used to configure `onlyOnce`, which\n * then removes the listener after its first invocation.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildAdded(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName: string | null\n  ) => unknown,\n  options: ListenOptions\n): Unsubscribe;\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildAdded` event will be triggered once for each initial child at this\n * location, and it will be triggered again every time a new child is added. The\n * `DataSnapshot` passed into the callback will reflect the data for the\n * relevant child. For ordering purposes, it is passed a second argument which\n * is a string containing the key of the previous sibling child by sort order,\n * or `null` if it is the first child.\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param cancelCallback - An optional callback that will be notified if your\n * event subscription is ever canceled because your client does not have\n * permission to read this data (or it had permission but has now lost it).\n * This callback will be passed an `Error` object indicating why the failure\n * occurred.\n * @param options - An object that can be used to configure `onlyOnce`, which\n * then removes the listener after its first invocation.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildAdded(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName: string | null\n  ) => unknown,\n  cancelCallback: (error: Error) => unknown,\n  options: ListenOptions\n): Unsubscribe;\n\nexport function onChildAdded(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName: string | null\n  ) => unknown,\n  cancelCallbackOrListenOptions?: ((error: Error) => unknown) | ListenOptions,\n  options?: ListenOptions\n): Unsubscribe {\n  return addEventListener(\n    query,\n    'child_added',\n    callback,\n    cancelCallbackOrListenOptions,\n    options\n  );\n}\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildChanged` event will be triggered when the data stored in a child\n * (or any of its descendants) changes. Note that a single `child_changed` event\n * may represent multiple changes to the child. The `DataSnapshot` passed to the\n * callback will contain the new child contents. For ordering purposes, the\n * callback is also passed a second argument which is a string containing the\n * key of the previous sibling child by sort order, or `null` if it is the first\n * child.\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param cancelCallback - An optional callback that will be notified if your\n * event subscription is ever canceled because your client does not have\n * permission to read this data (or it had permission but has now lost it).\n * This callback will be passed an `Error` object indicating why the failure\n * occurred.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildChanged(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName: string | null\n  ) => unknown,\n  cancelCallback?: (error: Error) => unknown\n): Unsubscribe;\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildChanged` event will be triggered when the data stored in a child\n * (or any of its descendants) changes. Note that a single `child_changed` event\n * may represent multiple changes to the child. The `DataSnapshot` passed to the\n * callback will contain the new child contents. For ordering purposes, the\n * callback is also passed a second argument which is a string containing the\n * key of the previous sibling child by sort order, or `null` if it is the first\n * child.\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param options - An object that can be used to configure `onlyOnce`, which\n * then removes the listener after its first invocation.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildChanged(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName: string | null\n  ) => unknown,\n  options: ListenOptions\n): Unsubscribe;\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildChanged` event will be triggered when the data stored in a child\n * (or any of its descendants) changes. Note that a single `child_changed` event\n * may represent multiple changes to the child. The `DataSnapshot` passed to the\n * callback will contain the new child contents. For ordering purposes, the\n * callback is also passed a second argument which is a string containing the\n * key of the previous sibling child by sort order, or `null` if it is the first\n * child.\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param cancelCallback - An optional callback that will be notified if your\n * event subscription is ever canceled because your client does not have\n * permission to read this data (or it had permission but has now lost it).\n * This callback will be passed an `Error` object indicating why the failure\n * occurred.\n * @param options - An object that can be used to configure `onlyOnce`, which\n * then removes the listener after its first invocation.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildChanged(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName: string | null\n  ) => unknown,\n  cancelCallback: (error: Error) => unknown,\n  options: ListenOptions\n): Unsubscribe;\n\nexport function onChildChanged(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName: string | null\n  ) => unknown,\n  cancelCallbackOrListenOptions?: ((error: Error) => unknown) | ListenOptions,\n  options?: ListenOptions\n): Unsubscribe {\n  return addEventListener(\n    query,\n    'child_changed',\n    callback,\n    cancelCallbackOrListenOptions,\n    options\n  );\n}\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildMoved` event will be triggered when a child's sort order changes\n * such that its position relative to its siblings changes. The `DataSnapshot`\n * passed to the callback will be for the data of the child that has moved. It\n * is also passed a second argument which is a string containing the key of the\n * previous sibling child by sort order, or `null` if it is the first child.\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param cancelCallback - An optional callback that will be notified if your\n * event subscription is ever canceled because your client does not have\n * permission to read this data (or it had permission but has now lost it).\n * This callback will be passed an `Error` object indicating why the failure\n * occurred.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildMoved(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName: string | null\n  ) => unknown,\n  cancelCallback?: (error: Error) => unknown\n): Unsubscribe;\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildMoved` event will be triggered when a child's sort order changes\n * such that its position relative to its siblings changes. The `DataSnapshot`\n * passed to the callback will be for the data of the child that has moved. It\n * is also passed a second argument which is a string containing the key of the\n * previous sibling child by sort order, or `null` if it is the first child.\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param options - An object that can be used to configure `onlyOnce`, which\n * then removes the listener after its first invocation.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildMoved(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName: string | null\n  ) => unknown,\n  options: ListenOptions\n): Unsubscribe;\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildMoved` event will be triggered when a child's sort order changes\n * such that its position relative to its siblings changes. The `DataSnapshot`\n * passed to the callback will be for the data of the child that has moved. It\n * is also passed a second argument which is a string containing the key of the\n * previous sibling child by sort order, or `null` if it is the first child.\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param cancelCallback - An optional callback that will be notified if your\n * event subscription is ever canceled because your client does not have\n * permission to read this data (or it had permission but has now lost it).\n * This callback will be passed an `Error` object indicating why the failure\n * occurred.\n * @param options - An object that can be used to configure `onlyOnce`, which\n * then removes the listener after its first invocation.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildMoved(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName: string | null\n  ) => unknown,\n  cancelCallback: (error: Error) => unknown,\n  options: ListenOptions\n): Unsubscribe;\n\nexport function onChildMoved(\n  query: Query,\n  callback: (\n    snapshot: DataSnapshot,\n    previousChildName: string | null\n  ) => unknown,\n  cancelCallbackOrListenOptions?: ((error: Error) => unknown) | ListenOptions,\n  options?: ListenOptions\n): Unsubscribe {\n  return addEventListener(\n    query,\n    'child_moved',\n    callback,\n    cancelCallbackOrListenOptions,\n    options\n  );\n}\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildRemoved` event will be triggered once every time a child is\n * removed. The `DataSnapshot` passed into the callback will be the old data for\n * the child that was removed. A child will get removed when either:\n *\n * - a client explicitly calls `remove()` on that child or one of its ancestors\n * - a client calls `set(null)` on that child or one of its ancestors\n * - that child has all of its children removed\n * - there is a query in effect which now filters out the child (because it's\n *   sort order changed or the max limit was hit)\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param cancelCallback - An optional callback that will be notified if your\n * event subscription is ever canceled because your client does not have\n * permission to read this data (or it had permission but has now lost it).\n * This callback will be passed an `Error` object indicating why the failure\n * occurred.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildRemoved(\n  query: Query,\n  callback: (snapshot: DataSnapshot) => unknown,\n  cancelCallback?: (error: Error) => unknown\n): Unsubscribe;\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildRemoved` event will be triggered once every time a child is\n * removed. The `DataSnapshot` passed into the callback will be the old data for\n * the child that was removed. A child will get removed when either:\n *\n * - a client explicitly calls `remove()` on that child or one of its ancestors\n * - a client calls `set(null)` on that child or one of its ancestors\n * - that child has all of its children removed\n * - there is a query in effect which now filters out the child (because it's\n *   sort order changed or the max limit was hit)\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param options - An object that can be used to configure `onlyOnce`, which\n * then removes the listener after its first invocation.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildRemoved(\n  query: Query,\n  callback: (snapshot: DataSnapshot) => unknown,\n  options: ListenOptions\n): Unsubscribe;\n\n/**\n * Listens for data changes at a particular location.\n *\n * This is the primary way to read data from a Database. Your callback\n * will be triggered for the initial data and again whenever the data changes.\n * Invoke the returned unsubscribe callback to stop receiving updates. See\n * {@link https://firebase.google.com/docs/database/web/retrieve-data | Retrieve Data on the Web}\n * for more details.\n *\n * An `onChildRemoved` event will be triggered once every time a child is\n * removed. The `DataSnapshot` passed into the callback will be the old data for\n * the child that was removed. A child will get removed when either:\n *\n * - a client explicitly calls `remove()` on that child or one of its ancestors\n * - a client calls `set(null)` on that child or one of its ancestors\n * - that child has all of its children removed\n * - there is a query in effect which now filters out the child (because it's\n *   sort order changed or the max limit was hit)\n *\n * @param query - The query to run.\n * @param callback - A callback that fires when the specified event occurs.\n * The callback will be passed a DataSnapshot and a string containing the key of\n * the previous child, by sort order, or `null` if it is the first child.\n * @param cancelCallback - An optional callback that will be notified if your\n * event subscription is ever canceled because your client does not have\n * permission to read this data (or it had permission but has now lost it).\n * This callback will be passed an `Error` object indicating why the failure\n * occurred.\n * @param options - An object that can be used to configure `onlyOnce`, which\n * then removes the listener after its first invocation.\n * @returns A function that can be invoked to remove the listener.\n */\nexport function onChildRemoved(\n  query: Query,\n  callback: (snapshot: DataSnapshot) => unknown,\n  cancelCallback: (error: Error) => unknown,\n  options: ListenOptions\n): Unsubscribe;\n\nexport function onChildRemoved(\n  query: Query,\n  callback: (snapshot: DataSnapshot) => unknown,\n  cancelCallbackOrListenOptions?: ((error: Error) => unknown) | ListenOptions,\n  options?: ListenOptions\n): Unsubscribe {\n  return addEventListener(\n    query,\n    'child_removed',\n    callback,\n    cancelCallbackOrListenOptions,\n    options\n  );\n}\n\nexport { EventType };\n\n/**\n * Detaches a callback previously attached with the corresponding `on*()` (`onValue`, `onChildAdded`) listener.\n * Note: This is not the recommended way to remove a listener. Instead, please use the returned callback function from\n * the respective `on*` callbacks.\n *\n * Detach a callback previously attached with `on*()`. Calling `off()` on a parent listener\n * will not automatically remove listeners registered on child nodes, `off()`\n * must also be called on any child listeners to remove the callback.\n *\n * If a callback is not specified, all callbacks for the specified eventType\n * will be removed. Similarly, if no eventType is specified, all callbacks\n * for the `Reference` will be removed.\n *\n * Individual listeners can also be removed by invoking their unsubscribe\n * callbacks.\n *\n * @param query - The query that the listener was registered with.\n * @param eventType - One of the following strings: \"value\", \"child_added\",\n * \"child_changed\", \"child_removed\", or \"child_moved.\" If omitted, all callbacks\n * for the `Reference` will be removed.\n * @param callback - The callback function that was passed to `on()` or\n * `undefined` to remove all callbacks.\n */\nexport function off(\n  query: Query,\n  eventType?: EventType,\n  callback?: (\n    snapshot: DataSnapshot,\n    previousChildName?: string | null\n  ) => unknown\n): void {\n  let container: EventRegistration | null = null;\n  const expCallback = callback ? new CallbackContext(callback) : null;\n  if (eventType === 'value') {\n    container = new ValueEventRegistration(expCallback);\n  } else if (eventType) {\n    container = new ChildEventRegistration(eventType, expCallback);\n  }\n  repoRemoveEventCallbackForQuery(query._repo, query, container);\n}\n\n/** Describes the different query constraints available in this SDK. */\nexport type QueryConstraintType =\n  | 'endAt'\n  | 'endBefore'\n  | 'startAt'\n  | 'startAfter'\n  | 'limitToFirst'\n  | 'limitToLast'\n  | 'orderByChild'\n  | 'orderByKey'\n  | 'orderByPriority'\n  | 'orderByValue'\n  | 'equalTo';\n\n/**\n * A `QueryConstraint` is used to narrow the set of documents returned by a\n * Database query. `QueryConstraint`s are created by invoking {@link endAt},\n * {@link endBefore}, {@link startAt}, {@link startAfter}, {@link\n * limitToFirst}, {@link limitToLast}, {@link orderByChild},\n * {@link orderByChild}, {@link orderByKey} , {@link orderByPriority} ,\n * {@link orderByValue}  or {@link equalTo} and\n * can then be passed to {@link query} to create a new query instance that\n * also contains this `QueryConstraint`.\n */\nexport abstract class QueryConstraint {\n  /** The type of this query constraints */\n  abstract readonly type: QueryConstraintType;\n\n  /**\n   * Takes the provided `Query` and returns a copy of the `Query` with this\n   * `QueryConstraint` applied.\n   */\n  abstract _apply<T>(query: QueryImpl): QueryImpl;\n}\n\nclass QueryEndAtConstraint extends QueryConstraint {\n  readonly type: 'endAt';\n\n  constructor(\n    private readonly _value: number | string | boolean | null,\n    private readonly _key?: string\n  ) {\n    super();\n  }\n\n  _apply<T>(query: QueryImpl): QueryImpl {\n    validateFirebaseDataArg('endAt', this._value, query._path, true);\n    const newParams = queryParamsEndAt(\n      query._queryParams,\n      this._value,\n      this._key\n    );\n    validateLimit(newParams);\n    validateQueryEndpoints(newParams);\n    if (query._queryParams.hasEnd()) {\n      throw new Error(\n        'endAt: Starting point was already set (by another call to endAt, ' +\n          'endBefore or equalTo).'\n      );\n    }\n    return new QueryImpl(\n      query._repo,\n      query._path,\n      newParams,\n      query._orderByCalled\n    );\n  }\n}\n\n/**\n * Creates a `QueryConstraint` with the specified ending point.\n *\n * Using `startAt()`, `startAfter()`, `endBefore()`, `endAt()` and `equalTo()`\n * allows you to choose arbitrary starting and ending points for your queries.\n *\n * The ending point is inclusive, so children with exactly the specified value\n * will be included in the query. The optional key argument can be used to\n * further limit the range of the query. If it is specified, then children that\n * have exactly the specified value must also have a key name less than or equal\n * to the specified key.\n *\n * You can read more about `endAt()` in\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#filtering_data | Filtering data}.\n *\n * @param value - The value to end at. The argument type depends on which\n * `orderBy*()` function was used in this query. Specify a value that matches\n * the `orderBy*()` type. When used in combination with `orderByKey()`, the\n * value must be a string.\n * @param key - The child key to end at, among the children with the previously\n * specified priority. This argument is only allowed if ordering by child,\n * value, or priority.\n */\nexport function endAt(\n  value: number | string | boolean | null,\n  key?: string\n): QueryConstraint {\n  validateKey('endAt', 'key', key, true);\n  return new QueryEndAtConstraint(value, key);\n}\n\nclass QueryEndBeforeConstraint extends QueryConstraint {\n  readonly type: 'endBefore';\n\n  constructor(\n    private readonly _value: number | string | boolean | null,\n    private readonly _key?: string\n  ) {\n    super();\n  }\n\n  _apply<T>(query: QueryImpl): QueryImpl {\n    validateFirebaseDataArg('endBefore', this._value, query._path, false);\n    const newParams = queryParamsEndBefore(\n      query._queryParams,\n      this._value,\n      this._key\n    );\n    validateLimit(newParams);\n    validateQueryEndpoints(newParams);\n    if (query._queryParams.hasEnd()) {\n      throw new Error(\n        'endBefore: Starting point was already set (by another call to endAt, ' +\n          'endBefore or equalTo).'\n      );\n    }\n    return new QueryImpl(\n      query._repo,\n      query._path,\n      newParams,\n      query._orderByCalled\n    );\n  }\n}\n\n/**\n * Creates a `QueryConstraint` with the specified ending point (exclusive).\n *\n * Using `startAt()`, `startAfter()`, `endBefore()`, `endAt()` and `equalTo()`\n * allows you to choose arbitrary starting and ending points for your queries.\n *\n * The ending point is exclusive. If only a value is provided, children\n * with a value less than the specified value will be included in the query.\n * If a key is specified, then children must have a value less than or equal\n * to the specified value and a key name less than the specified key.\n *\n * @param value - The value to end before. The argument type depends on which\n * `orderBy*()` function was used in this query. Specify a value that matches\n * the `orderBy*()` type. When used in combination with `orderByKey()`, the\n * value must be a string.\n * @param key - The child key to end before, among the children with the\n * previously specified priority. This argument is only allowed if ordering by\n * child, value, or priority.\n */\nexport function endBefore(\n  value: number | string | boolean | null,\n  key?: string\n): QueryConstraint {\n  validateKey('endBefore', 'key', key, true);\n  return new QueryEndBeforeConstraint(value, key);\n}\n\nclass QueryStartAtConstraint extends QueryConstraint {\n  readonly type: 'startAt';\n\n  constructor(\n    private readonly _value: number | string | boolean | null,\n    private readonly _key?: string\n  ) {\n    super();\n  }\n\n  _apply<T>(query: QueryImpl): QueryImpl {\n    validateFirebaseDataArg('startAt', this._value, query._path, true);\n    const newParams = queryParamsStartAt(\n      query._queryParams,\n      this._value,\n      this._key\n    );\n    validateLimit(newParams);\n    validateQueryEndpoints(newParams);\n    if (query._queryParams.hasStart()) {\n      throw new Error(\n        'startAt: Starting point was already set (by another call to startAt, ' +\n          'startBefore or equalTo).'\n      );\n    }\n    return new QueryImpl(\n      query._repo,\n      query._path,\n      newParams,\n      query._orderByCalled\n    );\n  }\n}\n\n/**\n * Creates a `QueryConstraint` with the specified starting point.\n *\n * Using `startAt()`, `startAfter()`, `endBefore()`, `endAt()` and `equalTo()`\n * allows you to choose arbitrary starting and ending points for your queries.\n *\n * The starting point is inclusive, so children with exactly the specified value\n * will be included in the query. The optional key argument can be used to\n * further limit the range of the query. If it is specified, then children that\n * have exactly the specified value must also have a key name greater than or\n * equal to the specified key.\n *\n * You can read more about `startAt()` in\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#filtering_data | Filtering data}.\n *\n * @param value - The value to start at. The argument type depends on which\n * `orderBy*()` function was used in this query. Specify a value that matches\n * the `orderBy*()` type. When used in combination with `orderByKey()`, the\n * value must be a string.\n * @param key - The child key to start at. This argument is only allowed if\n * ordering by child, value, or priority.\n */\nexport function startAt(\n  value: number | string | boolean | null = null,\n  key?: string\n): QueryConstraint {\n  validateKey('startAt', 'key', key, true);\n  return new QueryStartAtConstraint(value, key);\n}\n\nclass QueryStartAfterConstraint extends QueryConstraint {\n  readonly type: 'startAfter';\n\n  constructor(\n    private readonly _value: number | string | boolean | null,\n    private readonly _key?: string\n  ) {\n    super();\n  }\n\n  _apply<T>(query: QueryImpl): QueryImpl {\n    validateFirebaseDataArg('startAfter', this._value, query._path, false);\n    const newParams = queryParamsStartAfter(\n      query._queryParams,\n      this._value,\n      this._key\n    );\n    validateLimit(newParams);\n    validateQueryEndpoints(newParams);\n    if (query._queryParams.hasStart()) {\n      throw new Error(\n        'startAfter: Starting point was already set (by another call to startAt, ' +\n          'startAfter, or equalTo).'\n      );\n    }\n    return new QueryImpl(\n      query._repo,\n      query._path,\n      newParams,\n      query._orderByCalled\n    );\n  }\n}\n\n/**\n * Creates a `QueryConstraint` with the specified starting point (exclusive).\n *\n * Using `startAt()`, `startAfter()`, `endBefore()`, `endAt()` and `equalTo()`\n * allows you to choose arbitrary starting and ending points for your queries.\n *\n * The starting point is exclusive. If only a value is provided, children\n * with a value greater than the specified value will be included in the query.\n * If a key is specified, then children must have a value greater than or equal\n * to the specified value and a a key name greater than the specified key.\n *\n * @param value - The value to start after. The argument type depends on which\n * `orderBy*()` function was used in this query. Specify a value that matches\n * the `orderBy*()` type. When used in combination with `orderByKey()`, the\n * value must be a string.\n * @param key - The child key to start after. This argument is only allowed if\n * ordering by child, value, or priority.\n */\nexport function startAfter(\n  value: number | string | boolean | null,\n  key?: string\n): QueryConstraint {\n  validateKey('startAfter', 'key', key, true);\n  return new QueryStartAfterConstraint(value, key);\n}\n\nclass QueryLimitToFirstConstraint extends QueryConstraint {\n  readonly type: 'limitToFirst';\n\n  constructor(private readonly _limit: number) {\n    super();\n  }\n\n  _apply<T>(query: QueryImpl): QueryImpl {\n    if (query._queryParams.hasLimit()) {\n      throw new Error(\n        'limitToFirst: Limit was already set (by another call to limitToFirst ' +\n          'or limitToLast).'\n      );\n    }\n    return new QueryImpl(\n      query._repo,\n      query._path,\n      queryParamsLimitToFirst(query._queryParams, this._limit),\n      query._orderByCalled\n    );\n  }\n}\n\n/**\n * Creates a new `QueryConstraint` that if limited to the first specific number\n * of children.\n *\n * The `limitToFirst()` method is used to set a maximum number of children to be\n * synced for a given callback. If we set a limit of 100, we will initially only\n * receive up to 100 `child_added` events. If we have fewer than 100 messages\n * stored in our Database, a `child_added` event will fire for each message.\n * However, if we have over 100 messages, we will only receive a `child_added`\n * event for the first 100 ordered messages. As items change, we will receive\n * `child_removed` events for each item that drops out of the active list so\n * that the total number stays at 100.\n *\n * You can read more about `limitToFirst()` in\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#filtering_data | Filtering data}.\n *\n * @param limit - The maximum number of nodes to include in this query.\n */\nexport function limitToFirst(limit: number): QueryConstraint {\n  if (typeof limit !== 'number' || Math.floor(limit) !== limit || limit <= 0) {\n    throw new Error('limitToFirst: First argument must be a positive integer.');\n  }\n  return new QueryLimitToFirstConstraint(limit);\n}\n\nclass QueryLimitToLastConstraint extends QueryConstraint {\n  readonly type: 'limitToLast';\n\n  constructor(private readonly _limit: number) {\n    super();\n  }\n\n  _apply<T>(query: QueryImpl): QueryImpl {\n    if (query._queryParams.hasLimit()) {\n      throw new Error(\n        'limitToLast: Limit was already set (by another call to limitToFirst ' +\n          'or limitToLast).'\n      );\n    }\n    return new QueryImpl(\n      query._repo,\n      query._path,\n      queryParamsLimitToLast(query._queryParams, this._limit),\n      query._orderByCalled\n    );\n  }\n}\n\n/**\n * Creates a new `QueryConstraint` that is limited to return only the last\n * specified number of children.\n *\n * The `limitToLast()` method is used to set a maximum number of children to be\n * synced for a given callback. If we set a limit of 100, we will initially only\n * receive up to 100 `child_added` events. If we have fewer than 100 messages\n * stored in our Database, a `child_added` event will fire for each message.\n * However, if we have over 100 messages, we will only receive a `child_added`\n * event for the last 100 ordered messages. As items change, we will receive\n * `child_removed` events for each item that drops out of the active list so\n * that the total number stays at 100.\n *\n * You can read more about `limitToLast()` in\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#filtering_data | Filtering data}.\n *\n * @param limit - The maximum number of nodes to include in this query.\n */\nexport function limitToLast(limit: number): QueryConstraint {\n  if (typeof limit !== 'number' || Math.floor(limit) !== limit || limit <= 0) {\n    throw new Error('limitToLast: First argument must be a positive integer.');\n  }\n\n  return new QueryLimitToLastConstraint(limit);\n}\n\nclass QueryOrderByChildConstraint extends QueryConstraint {\n  readonly type: 'orderByChild';\n\n  constructor(private readonly _path: string) {\n    super();\n  }\n\n  _apply<T>(query: QueryImpl): QueryImpl {\n    validateNoPreviousOrderByCall(query, 'orderByChild');\n    const parsedPath = new Path(this._path);\n    if (pathIsEmpty(parsedPath)) {\n      throw new Error(\n        'orderByChild: cannot pass in empty path. Use orderByValue() instead.'\n      );\n    }\n    const index = new PathIndex(parsedPath);\n    const newParams = queryParamsOrderBy(query._queryParams, index);\n    validateQueryEndpoints(newParams);\n\n    return new QueryImpl(\n      query._repo,\n      query._path,\n      newParams,\n      /*orderByCalled=*/ true\n    );\n  }\n}\n\n/**\n * Creates a new `QueryConstraint` that orders by the specified child key.\n *\n * Queries can only order by one key at a time. Calling `orderByChild()`\n * multiple times on the same query is an error.\n *\n * Firebase queries allow you to order your data by any child key on the fly.\n * However, if you know in advance what your indexes will be, you can define\n * them via the .indexOn rule in your Security Rules for better performance. See\n * the{@link https://firebase.google.com/docs/database/security/indexing-data}\n * rule for more information.\n *\n * You can read more about `orderByChild()` in\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sort_data | Sort data}.\n *\n * @param path - The path to order by.\n */\nexport function orderByChild(path: string): QueryConstraint {\n  if (path === '$key') {\n    throw new Error(\n      'orderByChild: \"$key\" is invalid.  Use orderByKey() instead.'\n    );\n  } else if (path === '$priority') {\n    throw new Error(\n      'orderByChild: \"$priority\" is invalid.  Use orderByPriority() instead.'\n    );\n  } else if (path === '$value') {\n    throw new Error(\n      'orderByChild: \"$value\" is invalid.  Use orderByValue() instead.'\n    );\n  }\n  validatePathString('orderByChild', 'path', path, false);\n  return new QueryOrderByChildConstraint(path);\n}\n\nclass QueryOrderByKeyConstraint extends QueryConstraint {\n  readonly type: 'orderByKey';\n\n  _apply<T>(query: QueryImpl): QueryImpl {\n    validateNoPreviousOrderByCall(query, 'orderByKey');\n    const newParams = queryParamsOrderBy(query._queryParams, KEY_INDEX);\n    validateQueryEndpoints(newParams);\n    return new QueryImpl(\n      query._repo,\n      query._path,\n      newParams,\n      /*orderByCalled=*/ true\n    );\n  }\n}\n\n/**\n * Creates a new `QueryConstraint` that orders by the key.\n *\n * Sorts the results of a query by their (ascending) key values.\n *\n * You can read more about `orderByKey()` in\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sort_data | Sort data}.\n */\nexport function orderByKey(): QueryConstraint {\n  return new QueryOrderByKeyConstraint();\n}\n\nclass QueryOrderByPriorityConstraint extends QueryConstraint {\n  readonly type: 'orderByPriority';\n\n  _apply<T>(query: QueryImpl): QueryImpl {\n    validateNoPreviousOrderByCall(query, 'orderByPriority');\n    const newParams = queryParamsOrderBy(query._queryParams, PRIORITY_INDEX);\n    validateQueryEndpoints(newParams);\n    return new QueryImpl(\n      query._repo,\n      query._path,\n      newParams,\n      /*orderByCalled=*/ true\n    );\n  }\n}\n\n/**\n * Creates a new `QueryConstraint` that orders by priority.\n *\n * Applications need not use priority but can order collections by\n * ordinary properties (see\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sort_data | Sort data}\n * for alternatives to priority.\n */\nexport function orderByPriority(): QueryConstraint {\n  return new QueryOrderByPriorityConstraint();\n}\n\nclass QueryOrderByValueConstraint extends QueryConstraint {\n  readonly type: 'orderByValue';\n\n  _apply<T>(query: QueryImpl): QueryImpl {\n    validateNoPreviousOrderByCall(query, 'orderByValue');\n    const newParams = queryParamsOrderBy(query._queryParams, VALUE_INDEX);\n    validateQueryEndpoints(newParams);\n    return new QueryImpl(\n      query._repo,\n      query._path,\n      newParams,\n      /*orderByCalled=*/ true\n    );\n  }\n}\n\n/**\n * Creates a new `QueryConstraint` that orders by value.\n *\n * If the children of a query are all scalar values (string, number, or\n * boolean), you can order the results by their (ascending) values.\n *\n * You can read more about `orderByValue()` in\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sort_data | Sort data}.\n */\nexport function orderByValue(): QueryConstraint {\n  return new QueryOrderByValueConstraint();\n}\n\nclass QueryEqualToValueConstraint extends QueryConstraint {\n  readonly type: 'equalTo';\n\n  constructor(\n    private readonly _value: number | string | boolean | null,\n    private readonly _key?: string\n  ) {\n    super();\n  }\n\n  _apply<T>(query: QueryImpl): QueryImpl {\n    validateFirebaseDataArg('equalTo', this._value, query._path, false);\n    if (query._queryParams.hasStart()) {\n      throw new Error(\n        'equalTo: Starting point was already set (by another call to startAt/startAfter or ' +\n          'equalTo).'\n      );\n    }\n    if (query._queryParams.hasEnd()) {\n      throw new Error(\n        'equalTo: Ending point was already set (by another call to endAt/endBefore or ' +\n          'equalTo).'\n      );\n    }\n    return new QueryEndAtConstraint(this._value, this._key)._apply(\n      new QueryStartAtConstraint(this._value, this._key)._apply(query)\n    );\n  }\n}\n\n/**\n * Creates a `QueryConstraint` that includes children that match the specified\n * value.\n *\n * Using `startAt()`, `startAfter()`, `endBefore()`, `endAt()` and `equalTo()`\n * allows you to choose arbitrary starting and ending points for your queries.\n *\n * The optional key argument can be used to further limit the range of the\n * query. If it is specified, then children that have exactly the specified\n * value must also have exactly the specified key as their key name. This can be\n * used to filter result sets with many matches for the same value.\n *\n * You can read more about `equalTo()` in\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#filtering_data | Filtering data}.\n *\n * @param value - The value to match for. The argument type depends on which\n * `orderBy*()` function was used in this query. Specify a value that matches\n * the `orderBy*()` type. When used in combination with `orderByKey()`, the\n * value must be a string.\n * @param key - The child key to start at, among the children with the\n * previously specified priority. This argument is only allowed if ordering by\n * child, value, or priority.\n */\nexport function equalTo(\n  value: number | string | boolean | null,\n  key?: string\n): QueryConstraint {\n  validateKey('equalTo', 'key', key, true);\n  return new QueryEqualToValueConstraint(value, key);\n}\n\n/**\n * Creates a new immutable instance of `Query` that is extended to also include\n * additional query constraints.\n *\n * @param query - The Query instance to use as a base for the new constraints.\n * @param queryConstraints - The list of `QueryConstraint`s to apply.\n * @throws if any of the provided query constraints cannot be combined with the\n * existing or new constraints.\n */\nexport function query(\n  query: Query,\n  ...queryConstraints: QueryConstraint[]\n): Query {\n  let queryImpl = getModularInstance(query) as QueryImpl;\n  for (const constraint of queryConstraints) {\n    queryImpl = constraint._apply(queryImpl);\n  }\n  return queryImpl;\n}\n\n/**\n * Define reference constructor in various modules\n *\n * We are doing this here to avoid several circular\n * dependency issues\n */\nsyncPointSetReferenceConstructor(ReferenceImpl);\nsyncTreeSetReferenceConstructor(ReferenceImpl);\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport {\n  _FirebaseService,\n  _getProvider,\n  FirebaseApp,\n  getApp\n} from '@firebase/app';\nimport { AppCheckInternalComponentName } from '@firebase/app-check-interop-types';\nimport { FirebaseAuthInternalName } from '@firebase/auth-interop-types';\nimport { Provider } from '@firebase/component';\nimport {\n  getModularInstance,\n  createMockUserToken,\n  EmulatorMockTokenOptions,\n  getDefaultEmulatorHostnameAndPort\n} from '@firebase/util';\n\nimport { AppCheckTokenProvider } from '../core/AppCheckTokenProvider';\nimport {\n  AuthTokenProvider,\n  EmulatorTokenProvider,\n  FirebaseAuthTokenProvider\n} from '../core/AuthTokenProvider';\nimport { Repo, repoInterrupt, repoResume, repoStart } from '../core/Repo';\nimport { RepoInfo } from '../core/RepoInfo';\nimport { parseRepoInfo } from '../core/util/libs/parser';\nimport { newEmptyPath, pathIsEmpty } from '../core/util/Path';\nimport {\n  warn,\n  fatal,\n  log,\n  enableLogging as enableLoggingImpl\n} from '../core/util/util';\nimport { validateUrl } from '../core/util/validation';\nimport { BrowserPollConnection } from '../realtime/BrowserPollConnection';\nimport { TransportManager } from '../realtime/TransportManager';\nimport { WebSocketConnection } from '../realtime/WebSocketConnection';\n\nimport { ReferenceImpl } from './Reference_impl';\n\nexport { EmulatorMockTokenOptions } from '@firebase/util';\n/**\n * This variable is also defined in the firebase Node.js Admin SDK. Before\n * modifying this definition, consult the definition in:\n *\n * https://github.com/firebase/firebase-admin-node\n *\n * and make sure the two are consistent.\n */\nconst FIREBASE_DATABASE_EMULATOR_HOST_VAR = 'FIREBASE_DATABASE_EMULATOR_HOST';\n\n/**\n * Creates and caches `Repo` instances.\n */\nconst repos: {\n  [appName: string]: {\n    [dbUrl: string]: Repo;\n  };\n} = {};\n\n/**\n * If true, any new `Repo` will be created to use `ReadonlyRestClient` (for testing purposes).\n */\nlet useRestClient = false;\n\n/**\n * Update an existing `Repo` in place to point to a new host/port.\n */\nfunction repoManagerApplyEmulatorSettings(\n  repo: Repo,\n  host: string,\n  port: number,\n  tokenProvider?: AuthTokenProvider\n): void {\n  repo.repoInfo_ = new RepoInfo(\n    `${host}:${port}`,\n    /* secure= */ false,\n    repo.repoInfo_.namespace,\n    repo.repoInfo_.webSocketOnly,\n    repo.repoInfo_.nodeAdmin,\n    repo.repoInfo_.persistenceKey,\n    repo.repoInfo_.includeNamespaceInQueryParams,\n    /*isUsingEmulator=*/ true\n  );\n\n  if (tokenProvider) {\n    repo.authTokenProvider_ = tokenProvider;\n  }\n}\n\n/**\n * This function should only ever be called to CREATE a new database instance.\n * @internal\n */\nexport function repoManagerDatabaseFromApp(\n  app: FirebaseApp,\n  authProvider: Provider<FirebaseAuthInternalName>,\n  appCheckProvider?: Provider<AppCheckInternalComponentName>,\n  url?: string,\n  nodeAdmin?: boolean\n): Database {\n  let dbUrl: string | undefined = url || app.options.databaseURL;\n  if (dbUrl === undefined) {\n    if (!app.options.projectId) {\n      fatal(\n        \"Can't determine Firebase Database URL. Be sure to include \" +\n          ' a Project ID when calling firebase.initializeApp().'\n      );\n    }\n\n    log('Using default host for project ', app.options.projectId);\n    dbUrl = `${app.options.projectId}-default-rtdb.firebaseio.com`;\n  }\n\n  let parsedUrl = parseRepoInfo(dbUrl, nodeAdmin);\n  let repoInfo = parsedUrl.repoInfo;\n\n  let isEmulator: boolean;\n\n  let dbEmulatorHost: string | undefined = undefined;\n  if (typeof process !== 'undefined' && process.env) {\n    dbEmulatorHost = process.env[FIREBASE_DATABASE_EMULATOR_HOST_VAR];\n  }\n\n  if (dbEmulatorHost) {\n    isEmulator = true;\n    dbUrl = `http://${dbEmulatorHost}?ns=${repoInfo.namespace}`;\n    parsedUrl = parseRepoInfo(dbUrl, nodeAdmin);\n    repoInfo = parsedUrl.repoInfo;\n  } else {\n    isEmulator = !parsedUrl.repoInfo.secure;\n  }\n\n  const authTokenProvider =\n    nodeAdmin && isEmulator\n      ? new EmulatorTokenProvider(EmulatorTokenProvider.OWNER)\n      : new FirebaseAuthTokenProvider(app.name, app.options, authProvider);\n\n  validateUrl('Invalid Firebase Database URL', parsedUrl);\n  if (!pathIsEmpty(parsedUrl.path)) {\n    fatal(\n      'Database URL must point to the root of a Firebase Database ' +\n        '(not including a child path).'\n    );\n  }\n\n  const repo = repoManagerCreateRepo(\n    repoInfo,\n    app,\n    authTokenProvider,\n    new AppCheckTokenProvider(app.name, appCheckProvider)\n  );\n  return new Database(repo, app);\n}\n\n/**\n * Remove the repo and make sure it is disconnected.\n *\n */\nfunction repoManagerDeleteRepo(repo: Repo, appName: string): void {\n  const appRepos = repos[appName];\n  // This should never happen...\n  if (!appRepos || appRepos[repo.key] !== repo) {\n    fatal(`Database ${appName}(${repo.repoInfo_}) has already been deleted.`);\n  }\n  repoInterrupt(repo);\n  delete appRepos[repo.key];\n}\n\n/**\n * Ensures a repo doesn't already exist and then creates one using the\n * provided app.\n *\n * @param repoInfo - The metadata about the Repo\n * @returns The Repo object for the specified server / repoName.\n */\nfunction repoManagerCreateRepo(\n  repoInfo: RepoInfo,\n  app: FirebaseApp,\n  authTokenProvider: AuthTokenProvider,\n  appCheckProvider: AppCheckTokenProvider\n): Repo {\n  let appRepos = repos[app.name];\n\n  if (!appRepos) {\n    appRepos = {};\n    repos[app.name] = appRepos;\n  }\n\n  let repo = appRepos[repoInfo.toURLString()];\n  if (repo) {\n    fatal(\n      'Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.'\n    );\n  }\n  repo = new Repo(repoInfo, useRestClient, authTokenProvider, appCheckProvider);\n  appRepos[repoInfo.toURLString()] = repo;\n\n  return repo;\n}\n\n/**\n * Forces us to use ReadonlyRestClient instead of PersistentConnection for new Repos.\n */\nexport function repoManagerForceRestClient(forceRestClient: boolean): void {\n  useRestClient = forceRestClient;\n}\n\n/**\n * Class representing a Firebase Realtime Database.\n */\nexport class Database implements _FirebaseService {\n  /** Represents a `Database` instance. */\n  readonly 'type' = 'database';\n\n  /** Track if the instance has been used (root or repo accessed) */\n  _instanceStarted: boolean = false;\n\n  /** Backing state for root_ */\n  private _rootInternal?: ReferenceImpl;\n\n  /** @hideconstructor */\n  constructor(\n    public _repoInternal: Repo,\n    /** The {@link @firebase/app#FirebaseApp} associated with this Realtime Database instance. */\n    readonly app: FirebaseApp\n  ) {}\n\n  get _repo(): Repo {\n    if (!this._instanceStarted) {\n      repoStart(\n        this._repoInternal,\n        this.app.options.appId,\n        this.app.options['databaseAuthVariableOverride']\n      );\n      this._instanceStarted = true;\n    }\n    return this._repoInternal;\n  }\n\n  get _root(): ReferenceImpl {\n    if (!this._rootInternal) {\n      this._rootInternal = new ReferenceImpl(this._repo, newEmptyPath());\n    }\n    return this._rootInternal;\n  }\n\n  _delete(): Promise<void> {\n    if (this._rootInternal !== null) {\n      repoManagerDeleteRepo(this._repo, this.app.name);\n      this._repoInternal = null;\n      this._rootInternal = null;\n    }\n    return Promise.resolve();\n  }\n\n  _checkNotDeleted(apiName: string) {\n    if (this._rootInternal === null) {\n      fatal('Cannot call ' + apiName + ' on a deleted database.');\n    }\n  }\n}\n\nfunction checkTransportInit() {\n  if (TransportManager.IS_TRANSPORT_INITIALIZED) {\n    warn(\n      'Transport has already been initialized. Please call this function before calling ref or setting up a listener'\n    );\n  }\n}\n\n/**\n * Force the use of websockets instead of longPolling.\n */\nexport function forceWebSockets() {\n  checkTransportInit();\n  BrowserPollConnection.forceDisallow();\n}\n\n/**\n * Force the use of longPolling instead of websockets. This will be ignored if websocket protocol is used in databaseURL.\n */\nexport function forceLongPolling() {\n  checkTransportInit();\n  WebSocketConnection.forceDisallow();\n  BrowserPollConnection.forceAllow();\n}\n\n/**\n * Returns the instance of the Realtime Database SDK that is associated\n * with the provided {@link @firebase/app#FirebaseApp}. Initializes a new instance with\n * with default settings if no instance exists or if the existing instance uses\n * a custom database URL.\n *\n * @param app - The {@link @firebase/app#FirebaseApp} instance that the returned Realtime\n * Database instance is associated with.\n * @param url - The URL of the Realtime Database instance to connect to. If not\n * provided, the SDK connects to the default instance of the Firebase App.\n * @returns The `Database` instance of the provided app.\n */\nexport function getDatabase(\n  app: FirebaseApp = getApp(),\n  url?: string\n): Database {\n  const db = _getProvider(app, 'database').getImmediate({\n    identifier: url\n  }) as Database;\n  if (!db._instanceStarted) {\n    const emulator = getDefaultEmulatorHostnameAndPort('database');\n    if (emulator) {\n      connectDatabaseEmulator(db, ...emulator);\n    }\n  }\n  return db;\n}\n\n/**\n * Modify the provided instance to communicate with the Realtime Database\n * emulator.\n *\n * <p>Note: This method must be called before performing any other operation.\n *\n * @param db - The instance to modify.\n * @param host - The emulator host (ex: localhost)\n * @param port - The emulator port (ex: 8080)\n * @param options.mockUserToken - the mock auth token to use for unit testing Security Rules\n */\nexport function connectDatabaseEmulator(\n  db: Database,\n  host: string,\n  port: number,\n  options: {\n    mockUserToken?: EmulatorMockTokenOptions | string;\n  } = {}\n): void {\n  db = getModularInstance(db);\n  db._checkNotDeleted('useEmulator');\n  if (db._instanceStarted) {\n    fatal(\n      'Cannot call useEmulator() after instance has already been initialized.'\n    );\n  }\n\n  const repo = db._repoInternal;\n  let tokenProvider: EmulatorTokenProvider | undefined = undefined;\n  if (repo.repoInfo_.nodeAdmin) {\n    if (options.mockUserToken) {\n      fatal(\n        'mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the \"firebase\" package instead of \"firebase-admin\".'\n      );\n    }\n    tokenProvider = new EmulatorTokenProvider(EmulatorTokenProvider.OWNER);\n  } else if (options.mockUserToken) {\n    const token =\n      typeof options.mockUserToken === 'string'\n        ? options.mockUserToken\n        : createMockUserToken(options.mockUserToken, db.app.options.projectId);\n    tokenProvider = new EmulatorTokenProvider(token);\n  }\n\n  // Modify the repo to apply emulator settings\n  repoManagerApplyEmulatorSettings(repo, host, port, tokenProvider);\n}\n\n/**\n * Disconnects from the server (all Database operations will be completed\n * offline).\n *\n * The client automatically maintains a persistent connection to the Database\n * server, which will remain active indefinitely and reconnect when\n * disconnected. However, the `goOffline()` and `goOnline()` methods may be used\n * to control the client connection in cases where a persistent connection is\n * undesirable.\n *\n * While offline, the client will no longer receive data updates from the\n * Database. However, all Database operations performed locally will continue to\n * immediately fire events, allowing your application to continue behaving\n * normally. Additionally, each operation performed locally will automatically\n * be queued and retried upon reconnection to the Database server.\n *\n * To reconnect to the Database and begin receiving remote events, see\n * `goOnline()`.\n *\n * @param db - The instance to disconnect.\n */\nexport function goOffline(db: Database): void {\n  db = getModularInstance(db);\n  db._checkNotDeleted('goOffline');\n  repoInterrupt(db._repo);\n}\n\n/**\n * Reconnects to the server and synchronizes the offline Database state\n * with the server state.\n *\n * This method should be used after disabling the active connection with\n * `goOffline()`. Once reconnected, the client will transmit the proper data\n * and fire the appropriate events so that your client \"catches up\"\n * automatically.\n *\n * @param db - The instance to reconnect.\n */\nexport function goOnline(db: Database): void {\n  db = getModularInstance(db);\n  db._checkNotDeleted('goOnline');\n  repoResume(db._repo);\n}\n\n/**\n * Logs debugging information to the console.\n *\n * @param enabled - Enables logging if `true`, disables logging if `false`.\n * @param persistent - Remembers the logging state between page refreshes if\n * `true`.\n */\nexport function enableLogging(enabled: boolean, persistent?: boolean);\n\n/**\n * Logs debugging information to the console.\n *\n * @param logger - A custom logger function to control how things get logged.\n */\nexport function enableLogging(logger: (message: string) => unknown);\n\nexport function enableLogging(\n  logger: boolean | ((message: string) => unknown),\n  persistent?: boolean\n): void {\n  enableLoggingImpl(logger, persistent);\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport {\n  _registerComponent,\n  registerVersion,\n  SDK_VERSION\n} from '@firebase/app';\nimport { Component, ComponentType } from '@firebase/component';\n\nimport { name, version } from '../package.json';\nimport { setSDKVersion } from '../src/core/version';\n\nimport { repoManagerDatabaseFromApp } from './api/Database';\n\nexport function registerDatabase(variant?: string): void {\n  setSDKVersion(SDK_VERSION);\n  _registerComponent(\n    new Component(\n      'database',\n      (container, { instanceIdentifier: url }) => {\n        const app = container.getProvider('app').getImmediate()!;\n        const authProvider = container.getProvider('auth-internal');\n        const appCheckProvider = container.getProvider('app-check-internal');\n        return repoManagerDatabaseFromApp(\n          app,\n          authProvider,\n          appCheckProvider,\n          url\n        );\n      },\n      ComponentType.PUBLIC\n    ).setMultipleInstances(true)\n  );\n  registerVersion(name, version, variant);\n  // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n  registerVersion(name, version, '__BUILD_TARGET__');\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst SERVER_TIMESTAMP = {\n  '.sv': 'timestamp'\n};\n\n/**\n * Returns a placeholder value for auto-populating the current timestamp (time\n * since the Unix epoch, in milliseconds) as determined by the Firebase\n * servers.\n */\nexport function serverTimestamp(): object {\n  return SERVER_TIMESTAMP;\n}\n\n/**\n * Returns a placeholder value that can be used to atomically increment the\n * current database value by the provided delta.\n *\n * @param delta - the amount to modify the current value atomically.\n * @returns A placeholder value for modifying data atomically server-side.\n */\nexport function increment(delta: number): object {\n  return {\n    '.sv': {\n      'increment': delta\n    }\n  };\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getModularInstance, Deferred } from '@firebase/util';\n\nimport { repoStartTransaction } from '../core/Repo';\nimport { PRIORITY_INDEX } from '../core/snap/indexes/PriorityIndex';\nimport { Node } from '../core/snap/Node';\nimport { validateWritablePath } from '../core/util/validation';\n\nimport { DatabaseReference } from './Reference';\nimport { DataSnapshot, onValue, ReferenceImpl } from './Reference_impl';\n\n/** An options object to configure transactions. */\nexport interface TransactionOptions {\n  /**\n   * By default, events are raised each time the transaction update function\n   * runs. So if it is run multiple times, you may see intermediate states. You\n   * can set this to false to suppress these intermediate states and instead\n   * wait until the transaction has completed before events are raised.\n   */\n  readonly applyLocally?: boolean;\n}\n\n/**\n * A type for the resolve value of {@link runTransaction}.\n */\nexport class TransactionResult {\n  /** @hideconstructor */\n  constructor(\n    /** Whether the transaction was successfully committed. */\n    readonly committed: boolean,\n    /** The resulting data snapshot. */\n    readonly snapshot: DataSnapshot\n  ) {}\n\n  /** Returns a JSON-serializable representation of this object. */\n  toJSON(): object {\n    return { committed: this.committed, snapshot: this.snapshot.toJSON() };\n  }\n}\n\n/**\n * Atomically modifies the data at this location.\n *\n * Atomically modify the data at this location. Unlike a normal `set()`, which\n * just overwrites the data regardless of its previous value, `runTransaction()` is\n * used to modify the existing value to a new value, ensuring there are no\n * conflicts with other clients writing to the same location at the same time.\n *\n * To accomplish this, you pass `runTransaction()` an update function which is\n * used to transform the current value into a new value. If another client\n * writes to the location before your new value is successfully written, your\n * update function will be called again with the new current value, and the\n * write will be retried. This will happen repeatedly until your write succeeds\n * without conflict or you abort the transaction by not returning a value from\n * your update function.\n *\n * Note: Modifying data with `set()` will cancel any pending transactions at\n * that location, so extreme care should be taken if mixing `set()` and\n * `runTransaction()` to update the same data.\n *\n * Note: When using transactions with Security and Firebase Rules in place, be\n * aware that a client needs `.read` access in addition to `.write` access in\n * order to perform a transaction. This is because the client-side nature of\n * transactions requires the client to read the data in order to transactionally\n * update it.\n *\n * @param ref - The location to atomically modify.\n * @param transactionUpdate - A developer-supplied function which will be passed\n * the current data stored at this location (as a JavaScript object). The\n * function should return the new value it would like written (as a JavaScript\n * object). If `undefined` is returned (i.e. you return with no arguments) the\n * transaction will be aborted and the data at this location will not be\n * modified.\n * @param options - An options object to configure transactions.\n * @returns A `Promise` that can optionally be used instead of the `onComplete`\n * callback to handle success and failure.\n */\nexport function runTransaction(\n  ref: DatabaseReference,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  transactionUpdate: (currentData: any) => unknown,\n  options?: TransactionOptions\n): Promise<TransactionResult> {\n  ref = getModularInstance(ref);\n\n  validateWritablePath('Reference.transaction', ref._path);\n\n  if (ref.key === '.length' || ref.key === '.keys') {\n    throw (\n      'Reference.transaction failed: ' + ref.key + ' is a read-only object.'\n    );\n  }\n\n  const applyLocally = options?.applyLocally ?? true;\n  const deferred = new Deferred<TransactionResult>();\n\n  const promiseComplete = (\n    error: Error | null,\n    committed: boolean,\n    node: Node | null\n  ) => {\n    let dataSnapshot: DataSnapshot | null = null;\n    if (error) {\n      deferred.reject(error);\n    } else {\n      dataSnapshot = new DataSnapshot(\n        node,\n        new ReferenceImpl(ref._repo, ref._path),\n        PRIORITY_INDEX\n      );\n      deferred.resolve(new TransactionResult(committed, dataSnapshot));\n    }\n  };\n\n  // Add a watch to make sure we get server updates.\n  const unwatcher = onValue(ref, () => {});\n\n  repoStartTransaction(\n    ref._repo,\n    ref._path,\n    transactionUpdate,\n    promiseComplete,\n    unwatcher,\n    applyLocally\n  );\n\n  return deferred.promise;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PersistentConnection } from '../core/PersistentConnection';\nimport { RepoInfo } from '../core/RepoInfo';\nimport { Connection } from '../realtime/Connection';\n\nimport { repoManagerForceRestClient } from './Database';\n\nexport const DataConnection = PersistentConnection;\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(PersistentConnection.prototype as any).simpleListen = function (\n  pathString: string,\n  onComplete: (a: unknown) => void\n) {\n  this.sendRequest('q', { p: pathString }, onComplete);\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(PersistentConnection.prototype as any).echo = function (\n  data: unknown,\n  onEcho: (a: unknown) => void\n) {\n  this.sendRequest('echo', { d: data }, onEcho);\n};\n\n// RealTimeConnection properties that we use in tests.\nexport const RealTimeConnection = Connection;\n\n/**\n * @internal\n */\nexport const hijackHash = function (newHash: () => string) {\n  const oldPut = PersistentConnection.prototype.put;\n  PersistentConnection.prototype.put = function (\n    pathString,\n    data,\n    onComplete,\n    hash\n  ) {\n    if (hash !== undefined) {\n      hash = newHash();\n    }\n    oldPut.call(this, pathString, data, onComplete, hash);\n  };\n  return function () {\n    PersistentConnection.prototype.put = oldPut;\n  };\n};\n\nexport const ConnectionTarget = RepoInfo;\n\n/**\n * Forces the RepoManager to create Repos that use ReadonlyRestClient instead of PersistentConnection.\n * @internal\n */\nexport const forceRestClient = function (forceRestClient: boolean) {\n  repoManagerForceRestClient(forceRestClient);\n};\n","/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseAppCheckInternal,\n  AppCheckInternalComponentName\n} from '@firebase/app-check-interop-types';\nimport { FirebaseApp } from '@firebase/app-types';\nimport {\n  FirebaseAuthInternal,\n  FirebaseAuthInternalName\n} from '@firebase/auth-interop-types';\nimport {\n  Component,\n  ComponentContainer,\n  ComponentType,\n  Provider\n} from '@firebase/component';\n\nimport { Database } from '../api.standalone';\nimport { repoManagerDatabaseFromApp } from '../api/Database';\nimport { setSDKVersion } from '../core/version';\n\n/**\n * Used by console to create a database based on the app,\n * passed database URL and a custom auth implementation.\n * @internal\n * @param app - A valid FirebaseApp-like object\n * @param url - A valid Firebase databaseURL\n * @param version - custom version e.g. firebase-admin version\n * @param customAppCheckImpl - custom app check implementation\n * @param customAuthImpl - custom auth implementation\n */\nexport function _initStandalone({\n  app,\n  url,\n  version,\n  customAuthImpl,\n  customAppCheckImpl,\n  nodeAdmin = false\n}: {\n  app: FirebaseApp;\n  url: string;\n  version: string;\n  customAuthImpl: FirebaseAuthInternal;\n  customAppCheckImpl?: FirebaseAppCheckInternal;\n  nodeAdmin?: boolean;\n}): Database {\n  setSDKVersion(version);\n\n  /**\n   * ComponentContainer('database-standalone') is just a placeholder that doesn't perform\n   * any actual function.\n   */\n  const componentContainer = new ComponentContainer('database-standalone');\n  const authProvider = new Provider<FirebaseAuthInternalName>(\n    'auth-internal',\n    componentContainer\n  );\n  let appCheckProvider: Provider<AppCheckInternalComponentName>;\n  if (customAppCheckImpl) {\n    appCheckProvider = new Provider<AppCheckInternalComponentName>(\n      'app-check-internal',\n      componentContainer\n    );\n    appCheckProvider.setComponent(\n      new Component(\n        'app-check-internal',\n        () => customAppCheckImpl,\n        ComponentType.PRIVATE\n      )\n    );\n  }\n  authProvider.setComponent(\n    new Component('auth-internal', () => customAuthImpl, ComponentType.PRIVATE)\n  );\n\n  return repoManagerDatabaseFromApp(\n    app,\n    authProvider,\n    appCheckProvider,\n    url,\n    nodeAdmin\n  );\n}\n","export function randomString(length) {\r\n    /*  js  */\r\n    let result = '';\r\n    for (let i = 0; i < length; i++) {\r\n        const randomCharCode = Math.floor(Math.random() * 26) + 97; //  97  122  'a'  'z'\r\n        result += String.fromCharCode(randomCharCode);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getPreviousKey(obj, targetKey) {\r\n    /*  */\r\n    const keys = Object.keys(obj);\r\n    const index = keys.indexOf(targetKey);\r\n\r\n    //  null\r\n    if (index <= 0) return null;\r\n\r\n    // \r\n    return keys[index - 1];\r\n}\r\n\r\nexport function getNextKey(obj, targetKey) {\r\n    /*  */\r\n    const keys = Object.keys(obj);\r\n    const index = keys.indexOf(targetKey);\r\n    //  null\r\n    if (index < 0 || index === keys.length - 1) return null;\r\n\r\n    // \r\n    return keys[index + 1];\r\n}\r\n\r\nexport function filterNonDollarFields(obj) {\r\n    /*  $  */\r\n    const newObj = {};\r\n    for (const key in obj) {\r\n        if (!key.startsWith('$')) {\r\n            newObj[key] = obj[key];\r\n        }\r\n    }\r\n    return newObj;\r\n}\r\n\r\nexport function convertDataToString(obj) {\r\n    const newObj = { ...obj };\r\n    if (newObj.start_date instanceof Date) {\r\n        newObj.start_date = newObj.start_date.toString();\r\n    }\r\n\r\n    if (newObj.end_date instanceof Date) {\r\n        newObj.end_date = newObj.end_date.toString();\r\n    }\r\n    return newObj;\r\n}\r\n\r\nexport function convertStringToData(obj) {\r\n    const newObj = { ...obj };\r\n    for (const key in newObj) {\r\n        if (typeof newObj[key].start_date === 'string') {\r\n            newObj[key].start_date = new Date(newObj[key].start_date);\r\n        }\r\n\r\n        if (typeof newObj[key].end_date === 'string') {\r\n            newObj[key].end_date = new Date(newObj[key].end_date);\r\n        }\r\n    }\r\n    return newObj;\r\n}","/**\n * Node.js module for Forge.\n *\n * @author Dave Longley\n *\n * Copyright 2011-2016 Digital Bazaar, Inc.\n */\nmodule.exports = {\n  // default options\n  options: {\n    usePureJavaScript: false\n  }\n};\n","/**\n * Base-N/Base-X encoding/decoding functions.\n *\n * Original implementation from base-x:\n * https://github.com/cryptocoinjs/base-x\n *\n * Which is MIT licensed:\n *\n * The MIT License (MIT)\n *\n * Copyright base-x contributors (c) 2016\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\nvar api = {};\nmodule.exports = api;\n\n// baseN alphabet indexes\nvar _reverseAlphabets = {};\n\n/**\n * BaseN-encodes a Uint8Array using the given alphabet.\n *\n * @param input the Uint8Array to encode.\n * @param maxline the maximum number of encoded characters per line to use,\n *          defaults to none.\n *\n * @return the baseN-encoded output string.\n */\napi.encode = function(input, alphabet, maxline) {\n  if(typeof alphabet !== 'string') {\n    throw new TypeError('\"alphabet\" must be a string.');\n  }\n  if(maxline !== undefined && typeof maxline !== 'number') {\n    throw new TypeError('\"maxline\" must be a number.');\n  }\n\n  var output = '';\n\n  if(!(input instanceof Uint8Array)) {\n    // assume forge byte buffer\n    output = _encodeWithByteBuffer(input, alphabet);\n  } else {\n    var i = 0;\n    var base = alphabet.length;\n    var first = alphabet.charAt(0);\n    var digits = [0];\n    for(i = 0; i < input.length; ++i) {\n      for(var j = 0, carry = input[i]; j < digits.length; ++j) {\n        carry += digits[j] << 8;\n        digits[j] = carry % base;\n        carry = (carry / base) | 0;\n      }\n\n      while(carry > 0) {\n        digits.push(carry % base);\n        carry = (carry / base) | 0;\n      }\n    }\n\n    // deal with leading zeros\n    for(i = 0; input[i] === 0 && i < input.length - 1; ++i) {\n      output += first;\n    }\n    // convert digits to a string\n    for(i = digits.length - 1; i >= 0; --i) {\n      output += alphabet[digits[i]];\n    }\n  }\n\n  if(maxline) {\n    var regex = new RegExp('.{1,' + maxline + '}', 'g');\n    output = output.match(regex).join('\\r\\n');\n  }\n\n  return output;\n};\n\n/**\n * Decodes a baseN-encoded (using the given alphabet) string to a\n * Uint8Array.\n *\n * @param input the baseN-encoded input string.\n *\n * @return the Uint8Array.\n */\napi.decode = function(input, alphabet) {\n  if(typeof input !== 'string') {\n    throw new TypeError('\"input\" must be a string.');\n  }\n  if(typeof alphabet !== 'string') {\n    throw new TypeError('\"alphabet\" must be a string.');\n  }\n\n  var table = _reverseAlphabets[alphabet];\n  if(!table) {\n    // compute reverse alphabet\n    table = _reverseAlphabets[alphabet] = [];\n    for(var i = 0; i < alphabet.length; ++i) {\n      table[alphabet.charCodeAt(i)] = i;\n    }\n  }\n\n  // remove whitespace characters\n  input = input.replace(/\\s/g, '');\n\n  var base = alphabet.length;\n  var first = alphabet.charAt(0);\n  var bytes = [0];\n  for(var i = 0; i < input.length; i++) {\n    var value = table[input.charCodeAt(i)];\n    if(value === undefined) {\n      return;\n    }\n\n    for(var j = 0, carry = value; j < bytes.length; ++j) {\n      carry += bytes[j] * base;\n      bytes[j] = carry & 0xff;\n      carry >>= 8;\n    }\n\n    while(carry > 0) {\n      bytes.push(carry & 0xff);\n      carry >>= 8;\n    }\n  }\n\n  // deal with leading zeros\n  for(var k = 0; input[k] === first && k < input.length - 1; ++k) {\n    bytes.push(0);\n  }\n\n  if(typeof Buffer !== 'undefined') {\n    return Buffer.from(bytes.reverse());\n  }\n\n  return new Uint8Array(bytes.reverse());\n};\n\nfunction _encodeWithByteBuffer(input, alphabet) {\n  var i = 0;\n  var base = alphabet.length;\n  var first = alphabet.charAt(0);\n  var digits = [0];\n  for(i = 0; i < input.length(); ++i) {\n    for(var j = 0, carry = input.at(i); j < digits.length; ++j) {\n      carry += digits[j] << 8;\n      digits[j] = carry % base;\n      carry = (carry / base) | 0;\n    }\n\n    while(carry > 0) {\n      digits.push(carry % base);\n      carry = (carry / base) | 0;\n    }\n  }\n\n  var output = '';\n\n  // deal with leading zeros\n  for(i = 0; input.at(i) === 0 && i < input.length() - 1; ++i) {\n    output += first;\n  }\n  // convert digits to a string\n  for(i = digits.length - 1; i >= 0; --i) {\n    output += alphabet[digits[i]];\n  }\n\n  return output;\n}\n","/**\n * Utility functions for web applications.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2018 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nvar baseN = require('./baseN');\n\n/* Utilities API */\nvar util = module.exports = forge.util = forge.util || {};\n\n// define setImmediate and nextTick\n(function() {\n  // use native nextTick (unless we're in webpack)\n  // webpack (or better node-libs-browser polyfill) sets process.browser.\n  // this way we can detect webpack properly\n  if(typeof process !== 'undefined' && process.nextTick && !process.browser) {\n    util.nextTick = process.nextTick;\n    if(typeof setImmediate === 'function') {\n      util.setImmediate = setImmediate;\n    } else {\n      // polyfill setImmediate with nextTick, older versions of node\n      // (those w/o setImmediate) won't totally starve IO\n      util.setImmediate = util.nextTick;\n    }\n    return;\n  }\n\n  // polyfill nextTick with native setImmediate\n  if(typeof setImmediate === 'function') {\n    util.setImmediate = function() { return setImmediate.apply(undefined, arguments); };\n    util.nextTick = function(callback) {\n      return setImmediate(callback);\n    };\n    return;\n  }\n\n  /* Note: A polyfill upgrade pattern is used here to allow combining\n  polyfills. For example, MutationObserver is fast, but blocks UI updates,\n  so it needs to allow UI updates periodically, so it falls back on\n  postMessage or setTimeout. */\n\n  // polyfill with setTimeout\n  util.setImmediate = function(callback) {\n    setTimeout(callback, 0);\n  };\n\n  // upgrade polyfill to use postMessage\n  if(typeof window !== 'undefined' &&\n    typeof window.postMessage === 'function') {\n    var msg = 'forge.setImmediate';\n    var callbacks = [];\n    util.setImmediate = function(callback) {\n      callbacks.push(callback);\n      // only send message when one hasn't been sent in\n      // the current turn of the event loop\n      if(callbacks.length === 1) {\n        window.postMessage(msg, '*');\n      }\n    };\n    function handler(event) {\n      if(event.source === window && event.data === msg) {\n        event.stopPropagation();\n        var copy = callbacks.slice();\n        callbacks.length = 0;\n        copy.forEach(function(callback) {\n          callback();\n        });\n      }\n    }\n    window.addEventListener('message', handler, true);\n  }\n\n  // upgrade polyfill to use MutationObserver\n  if(typeof MutationObserver !== 'undefined') {\n    // polyfill with MutationObserver\n    var now = Date.now();\n    var attr = true;\n    var div = document.createElement('div');\n    var callbacks = [];\n    new MutationObserver(function() {\n      var copy = callbacks.slice();\n      callbacks.length = 0;\n      copy.forEach(function(callback) {\n        callback();\n      });\n    }).observe(div, {attributes: true});\n    var oldSetImmediate = util.setImmediate;\n    util.setImmediate = function(callback) {\n      if(Date.now() - now > 15) {\n        now = Date.now();\n        oldSetImmediate(callback);\n      } else {\n        callbacks.push(callback);\n        // only trigger observer when it hasn't been triggered in\n        // the current turn of the event loop\n        if(callbacks.length === 1) {\n          div.setAttribute('a', attr = !attr);\n        }\n      }\n    };\n  }\n\n  util.nextTick = util.setImmediate;\n})();\n\n// check if running under Node.js\nutil.isNodejs =\n  typeof process !== 'undefined' && process.versions && process.versions.node;\n\n\n// 'self' will also work in Web Workers (instance of WorkerGlobalScope) while\n// it will point to `window` in the main thread.\n// To remain compatible with older browsers, we fall back to 'window' if 'self'\n// is not available.\nutil.globalScope = (function() {\n  if(util.isNodejs) {\n    return global;\n  }\n\n  return typeof self === 'undefined' ? window : self;\n})();\n\n// define isArray\nutil.isArray = Array.isArray || function(x) {\n  return Object.prototype.toString.call(x) === '[object Array]';\n};\n\n// define isArrayBuffer\nutil.isArrayBuffer = function(x) {\n  return typeof ArrayBuffer !== 'undefined' && x instanceof ArrayBuffer;\n};\n\n// define isArrayBufferView\nutil.isArrayBufferView = function(x) {\n  return x && util.isArrayBuffer(x.buffer) && x.byteLength !== undefined;\n};\n\n/**\n * Ensure a bits param is 8, 16, 24, or 32. Used to validate input for\n * algorithms where bit manipulation, JavaScript limitations, and/or algorithm\n * design only allow for byte operations of a limited size.\n *\n * @param n number of bits.\n *\n * Throw Error if n invalid.\n */\nfunction _checkBitsParam(n) {\n  if(!(n === 8 || n === 16 || n === 24 || n === 32)) {\n    throw new Error('Only 8, 16, 24, or 32 bits supported: ' + n);\n  }\n}\n\n// TODO: set ByteBuffer to best available backing\nutil.ByteBuffer = ByteStringBuffer;\n\n/** Buffer w/BinaryString backing */\n\n/**\n * Constructor for a binary string backed byte buffer.\n *\n * @param [b] the bytes to wrap (either encoded as string, one byte per\n *          character, or as an ArrayBuffer or Typed Array).\n */\nfunction ByteStringBuffer(b) {\n  // TODO: update to match DataBuffer API\n\n  // the data in this buffer\n  this.data = '';\n  // the pointer for reading from this buffer\n  this.read = 0;\n\n  if(typeof b === 'string') {\n    this.data = b;\n  } else if(util.isArrayBuffer(b) || util.isArrayBufferView(b)) {\n    if(typeof Buffer !== 'undefined' && b instanceof Buffer) {\n      this.data = b.toString('binary');\n    } else {\n      // convert native buffer to forge buffer\n      // FIXME: support native buffers internally instead\n      var arr = new Uint8Array(b);\n      try {\n        this.data = String.fromCharCode.apply(null, arr);\n      } catch(e) {\n        for(var i = 0; i < arr.length; ++i) {\n          this.putByte(arr[i]);\n        }\n      }\n    }\n  } else if(b instanceof ByteStringBuffer ||\n    (typeof b === 'object' && typeof b.data === 'string' &&\n    typeof b.read === 'number')) {\n    // copy existing buffer\n    this.data = b.data;\n    this.read = b.read;\n  }\n\n  // used for v8 optimization\n  this._constructedStringLength = 0;\n}\nutil.ByteStringBuffer = ByteStringBuffer;\n\n/* Note: This is an optimization for V8-based browsers. When V8 concatenates\n  a string, the strings are only joined logically using a \"cons string\" or\n  \"constructed/concatenated string\". These containers keep references to one\n  another and can result in very large memory usage. For example, if a 2MB\n  string is constructed by concatenating 4 bytes together at a time, the\n  memory usage will be ~44MB; so ~22x increase. The strings are only joined\n  together when an operation requiring their joining takes place, such as\n  substr(). This function is called when adding data to this buffer to ensure\n  these types of strings are periodically joined to reduce the memory\n  footprint. */\nvar _MAX_CONSTRUCTED_STRING_LENGTH = 4096;\nutil.ByteStringBuffer.prototype._optimizeConstructedString = function(x) {\n  this._constructedStringLength += x;\n  if(this._constructedStringLength > _MAX_CONSTRUCTED_STRING_LENGTH) {\n    // this substr() should cause the constructed string to join\n    this.data.substr(0, 1);\n    this._constructedStringLength = 0;\n  }\n};\n\n/**\n * Gets the number of bytes in this buffer.\n *\n * @return the number of bytes in this buffer.\n */\nutil.ByteStringBuffer.prototype.length = function() {\n  return this.data.length - this.read;\n};\n\n/**\n * Gets whether or not this buffer is empty.\n *\n * @return true if this buffer is empty, false if not.\n */\nutil.ByteStringBuffer.prototype.isEmpty = function() {\n  return this.length() <= 0;\n};\n\n/**\n * Puts a byte in this buffer.\n *\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putByte = function(b) {\n  return this.putBytes(String.fromCharCode(b));\n};\n\n/**\n * Puts a byte in this buffer N times.\n *\n * @param b the byte to put.\n * @param n the number of bytes of value b to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.fillWithByte = function(b, n) {\n  b = String.fromCharCode(b);\n  var d = this.data;\n  while(n > 0) {\n    if(n & 1) {\n      d += b;\n    }\n    n >>>= 1;\n    if(n > 0) {\n      b += b;\n    }\n  }\n  this.data = d;\n  this._optimizeConstructedString(n);\n  return this;\n};\n\n/**\n * Puts bytes in this buffer.\n *\n * @param bytes the bytes (as a binary encoded string) to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putBytes = function(bytes) {\n  this.data += bytes;\n  this._optimizeConstructedString(bytes.length);\n  return this;\n};\n\n/**\n * Puts a UTF-16 encoded string into this buffer.\n *\n * @param str the string to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putString = function(str) {\n  return this.putBytes(util.encodeUtf8(str));\n};\n\n/**\n * Puts a 16-bit integer in this buffer in big-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt16 = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n/**\n * Puts a 24-bit integer in this buffer in big-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt24 = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n/**\n * Puts a 32-bit integer in this buffer in big-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt32 = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i >> 24 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n/**\n * Puts a 16-bit integer in this buffer in little-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt16Le = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF));\n};\n\n/**\n * Puts a 24-bit integer in this buffer in little-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt24Le = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF));\n};\n\n/**\n * Puts a 32-bit integer in this buffer in little-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt32Le = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 24 & 0xFF));\n};\n\n/**\n * Puts an n-bit integer in this buffer in big-endian order.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt = function(i, n) {\n  _checkBitsParam(n);\n  var bytes = '';\n  do {\n    n -= 8;\n    bytes += String.fromCharCode((i >> n) & 0xFF);\n  } while(n > 0);\n  return this.putBytes(bytes);\n};\n\n/**\n * Puts a signed n-bit integer in this buffer in big-endian order. Two's\n * complement representation is used.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putSignedInt = function(i, n) {\n  // putInt checks n\n  if(i < 0) {\n    i += 2 << (n - 1);\n  }\n  return this.putInt(i, n);\n};\n\n/**\n * Puts the given buffer into this buffer.\n *\n * @param buffer the buffer to put into this one.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putBuffer = function(buffer) {\n  return this.putBytes(buffer.getBytes());\n};\n\n/**\n * Gets a byte from this buffer and advances the read pointer by 1.\n *\n * @return the byte.\n */\nutil.ByteStringBuffer.prototype.getByte = function() {\n  return this.data.charCodeAt(this.read++);\n};\n\n/**\n * Gets a uint16 from this buffer in big-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.ByteStringBuffer.prototype.getInt16 = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) << 8 ^\n    this.data.charCodeAt(this.read + 1));\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in big-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.ByteStringBuffer.prototype.getInt24 = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) << 16 ^\n    this.data.charCodeAt(this.read + 1) << 8 ^\n    this.data.charCodeAt(this.read + 2));\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in big-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.ByteStringBuffer.prototype.getInt32 = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) << 24 ^\n    this.data.charCodeAt(this.read + 1) << 16 ^\n    this.data.charCodeAt(this.read + 2) << 8 ^\n    this.data.charCodeAt(this.read + 3));\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets a uint16 from this buffer in little-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.ByteStringBuffer.prototype.getInt16Le = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) ^\n    this.data.charCodeAt(this.read + 1) << 8);\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in little-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.ByteStringBuffer.prototype.getInt24Le = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) ^\n    this.data.charCodeAt(this.read + 1) << 8 ^\n    this.data.charCodeAt(this.read + 2) << 16);\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in little-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.ByteStringBuffer.prototype.getInt32Le = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) ^\n    this.data.charCodeAt(this.read + 1) << 8 ^\n    this.data.charCodeAt(this.read + 2) << 16 ^\n    this.data.charCodeAt(this.read + 3) << 24);\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets an n-bit integer from this buffer in big-endian order and advances the\n * read pointer by ceil(n/8).\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.ByteStringBuffer.prototype.getInt = function(n) {\n  _checkBitsParam(n);\n  var rval = 0;\n  do {\n    // TODO: Use (rval * 0x100) if adding support for 33 to 53 bits.\n    rval = (rval << 8) + this.data.charCodeAt(this.read++);\n    n -= 8;\n  } while(n > 0);\n  return rval;\n};\n\n/**\n * Gets a signed n-bit integer from this buffer in big-endian order, using\n * two's complement, and advances the read pointer by n/8.\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.ByteStringBuffer.prototype.getSignedInt = function(n) {\n  // getInt checks n\n  var x = this.getInt(n);\n  var max = 2 << (n - 2);\n  if(x >= max) {\n    x -= max << 1;\n  }\n  return x;\n};\n\n/**\n * Reads bytes out as a binary encoded string and clears them from the\n * buffer. Note that the resulting string is binary encoded (in node.js this\n * encoding is referred to as `binary`, it is *not* `utf8`).\n *\n * @param count the number of bytes to read, undefined or null for all.\n *\n * @return a binary encoded string of bytes.\n */\nutil.ByteStringBuffer.prototype.getBytes = function(count) {\n  var rval;\n  if(count) {\n    // read count bytes\n    count = Math.min(this.length(), count);\n    rval = this.data.slice(this.read, this.read + count);\n    this.read += count;\n  } else if(count === 0) {\n    rval = '';\n  } else {\n    // read all bytes, optimize to only copy when needed\n    rval = (this.read === 0) ? this.data : this.data.slice(this.read);\n    this.clear();\n  }\n  return rval;\n};\n\n/**\n * Gets a binary encoded string of the bytes from this buffer without\n * modifying the read pointer.\n *\n * @param count the number of bytes to get, omit to get all.\n *\n * @return a string full of binary encoded characters.\n */\nutil.ByteStringBuffer.prototype.bytes = function(count) {\n  return (typeof(count) === 'undefined' ?\n    this.data.slice(this.read) :\n    this.data.slice(this.read, this.read + count));\n};\n\n/**\n * Gets a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n *\n * @return the byte.\n */\nutil.ByteStringBuffer.prototype.at = function(i) {\n  return this.data.charCodeAt(this.read + i);\n};\n\n/**\n * Puts a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.setAt = function(i, b) {\n  this.data = this.data.substr(0, this.read + i) +\n    String.fromCharCode(b) +\n    this.data.substr(this.read + i + 1);\n  return this;\n};\n\n/**\n * Gets the last byte without modifying the read pointer.\n *\n * @return the last byte.\n */\nutil.ByteStringBuffer.prototype.last = function() {\n  return this.data.charCodeAt(this.data.length - 1);\n};\n\n/**\n * Creates a copy of this buffer.\n *\n * @return the copy.\n */\nutil.ByteStringBuffer.prototype.copy = function() {\n  var c = util.createBuffer(this.data);\n  c.read = this.read;\n  return c;\n};\n\n/**\n * Compacts this buffer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.compact = function() {\n  if(this.read > 0) {\n    this.data = this.data.slice(this.read);\n    this.read = 0;\n  }\n  return this;\n};\n\n/**\n * Clears this buffer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.clear = function() {\n  this.data = '';\n  this.read = 0;\n  return this;\n};\n\n/**\n * Shortens this buffer by triming bytes off of the end of this buffer.\n *\n * @param count the number of bytes to trim off.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.truncate = function(count) {\n  var len = Math.max(0, this.length() - count);\n  this.data = this.data.substr(this.read, len);\n  this.read = 0;\n  return this;\n};\n\n/**\n * Converts this buffer to a hexadecimal string.\n *\n * @return a hexadecimal string.\n */\nutil.ByteStringBuffer.prototype.toHex = function() {\n  var rval = '';\n  for(var i = this.read; i < this.data.length; ++i) {\n    var b = this.data.charCodeAt(i);\n    if(b < 16) {\n      rval += '0';\n    }\n    rval += b.toString(16);\n  }\n  return rval;\n};\n\n/**\n * Converts this buffer to a UTF-16 string (standard JavaScript string).\n *\n * @return a UTF-16 string.\n */\nutil.ByteStringBuffer.prototype.toString = function() {\n  return util.decodeUtf8(this.bytes());\n};\n\n/** End Buffer w/BinaryString backing */\n\n/** Buffer w/UInt8Array backing */\n\n/**\n * FIXME: Experimental. Do not use yet.\n *\n * Constructor for an ArrayBuffer-backed byte buffer.\n *\n * The buffer may be constructed from a string, an ArrayBuffer, DataView, or a\n * TypedArray.\n *\n * If a string is given, its encoding should be provided as an option,\n * otherwise it will default to 'binary'. A 'binary' string is encoded such\n * that each character is one byte in length and size.\n *\n * If an ArrayBuffer, DataView, or TypedArray is given, it will be used\n * *directly* without any copying. Note that, if a write to the buffer requires\n * more space, the buffer will allocate a new backing ArrayBuffer to\n * accommodate. The starting read and write offsets for the buffer may be\n * given as options.\n *\n * @param [b] the initial bytes for this buffer.\n * @param options the options to use:\n *          [readOffset] the starting read offset to use (default: 0).\n *          [writeOffset] the starting write offset to use (default: the\n *            length of the first parameter).\n *          [growSize] the minimum amount, in bytes, to grow the buffer by to\n *            accommodate writes (default: 1024).\n *          [encoding] the encoding ('binary', 'utf8', 'utf16', 'hex') for the\n *            first parameter, if it is a string (default: 'binary').\n */\nfunction DataBuffer(b, options) {\n  // default options\n  options = options || {};\n\n  // pointers for read from/write to buffer\n  this.read = options.readOffset || 0;\n  this.growSize = options.growSize || 1024;\n\n  var isArrayBuffer = util.isArrayBuffer(b);\n  var isArrayBufferView = util.isArrayBufferView(b);\n  if(isArrayBuffer || isArrayBufferView) {\n    // use ArrayBuffer directly\n    if(isArrayBuffer) {\n      this.data = new DataView(b);\n    } else {\n      // TODO: adjust read/write offset based on the type of view\n      // or specify that this must be done in the options ... that the\n      // offsets are byte-based\n      this.data = new DataView(b.buffer, b.byteOffset, b.byteLength);\n    }\n    this.write = ('writeOffset' in options ?\n      options.writeOffset : this.data.byteLength);\n    return;\n  }\n\n  // initialize to empty array buffer and add any given bytes using putBytes\n  this.data = new DataView(new ArrayBuffer(0));\n  this.write = 0;\n\n  if(b !== null && b !== undefined) {\n    this.putBytes(b);\n  }\n\n  if('writeOffset' in options) {\n    this.write = options.writeOffset;\n  }\n}\nutil.DataBuffer = DataBuffer;\n\n/**\n * Gets the number of bytes in this buffer.\n *\n * @return the number of bytes in this buffer.\n */\nutil.DataBuffer.prototype.length = function() {\n  return this.write - this.read;\n};\n\n/**\n * Gets whether or not this buffer is empty.\n *\n * @return true if this buffer is empty, false if not.\n */\nutil.DataBuffer.prototype.isEmpty = function() {\n  return this.length() <= 0;\n};\n\n/**\n * Ensures this buffer has enough empty space to accommodate the given number\n * of bytes. An optional parameter may be given that indicates a minimum\n * amount to grow the buffer if necessary. If the parameter is not given,\n * the buffer will be grown by some previously-specified default amount\n * or heuristic.\n *\n * @param amount the number of bytes to accommodate.\n * @param [growSize] the minimum amount, in bytes, to grow the buffer by if\n *          necessary.\n */\nutil.DataBuffer.prototype.accommodate = function(amount, growSize) {\n  if(this.length() >= amount) {\n    return this;\n  }\n  growSize = Math.max(growSize || this.growSize, amount);\n\n  // grow buffer\n  var src = new Uint8Array(\n    this.data.buffer, this.data.byteOffset, this.data.byteLength);\n  var dst = new Uint8Array(this.length() + growSize);\n  dst.set(src);\n  this.data = new DataView(dst.buffer);\n\n  return this;\n};\n\n/**\n * Puts a byte in this buffer.\n *\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putByte = function(b) {\n  this.accommodate(1);\n  this.data.setUint8(this.write++, b);\n  return this;\n};\n\n/**\n * Puts a byte in this buffer N times.\n *\n * @param b the byte to put.\n * @param n the number of bytes of value b to put.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.fillWithByte = function(b, n) {\n  this.accommodate(n);\n  for(var i = 0; i < n; ++i) {\n    this.data.setUint8(b);\n  }\n  return this;\n};\n\n/**\n * Puts bytes in this buffer. The bytes may be given as a string, an\n * ArrayBuffer, a DataView, or a TypedArray.\n *\n * @param bytes the bytes to put.\n * @param [encoding] the encoding for the first parameter ('binary', 'utf8',\n *          'utf16', 'hex'), if it is a string (default: 'binary').\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putBytes = function(bytes, encoding) {\n  if(util.isArrayBufferView(bytes)) {\n    var src = new Uint8Array(bytes.buffer, bytes.byteOffset, bytes.byteLength);\n    var len = src.byteLength - src.byteOffset;\n    this.accommodate(len);\n    var dst = new Uint8Array(this.data.buffer, this.write);\n    dst.set(src);\n    this.write += len;\n    return this;\n  }\n\n  if(util.isArrayBuffer(bytes)) {\n    var src = new Uint8Array(bytes);\n    this.accommodate(src.byteLength);\n    var dst = new Uint8Array(this.data.buffer);\n    dst.set(src, this.write);\n    this.write += src.byteLength;\n    return this;\n  }\n\n  // bytes is a util.DataBuffer or equivalent\n  if(bytes instanceof util.DataBuffer ||\n    (typeof bytes === 'object' &&\n    typeof bytes.read === 'number' && typeof bytes.write === 'number' &&\n    util.isArrayBufferView(bytes.data))) {\n    var src = new Uint8Array(bytes.data.byteLength, bytes.read, bytes.length());\n    this.accommodate(src.byteLength);\n    var dst = new Uint8Array(bytes.data.byteLength, this.write);\n    dst.set(src);\n    this.write += src.byteLength;\n    return this;\n  }\n\n  if(bytes instanceof util.ByteStringBuffer) {\n    // copy binary string and process as the same as a string parameter below\n    bytes = bytes.data;\n    encoding = 'binary';\n  }\n\n  // string conversion\n  encoding = encoding || 'binary';\n  if(typeof bytes === 'string') {\n    var view;\n\n    // decode from string\n    if(encoding === 'hex') {\n      this.accommodate(Math.ceil(bytes.length / 2));\n      view = new Uint8Array(this.data.buffer, this.write);\n      this.write += util.binary.hex.decode(bytes, view, this.write);\n      return this;\n    }\n    if(encoding === 'base64') {\n      this.accommodate(Math.ceil(bytes.length / 4) * 3);\n      view = new Uint8Array(this.data.buffer, this.write);\n      this.write += util.binary.base64.decode(bytes, view, this.write);\n      return this;\n    }\n\n    // encode text as UTF-8 bytes\n    if(encoding === 'utf8') {\n      // encode as UTF-8 then decode string as raw binary\n      bytes = util.encodeUtf8(bytes);\n      encoding = 'binary';\n    }\n\n    // decode string as raw binary\n    if(encoding === 'binary' || encoding === 'raw') {\n      // one byte per character\n      this.accommodate(bytes.length);\n      view = new Uint8Array(this.data.buffer, this.write);\n      this.write += util.binary.raw.decode(view);\n      return this;\n    }\n\n    // encode text as UTF-16 bytes\n    if(encoding === 'utf16') {\n      // two bytes per character\n      this.accommodate(bytes.length * 2);\n      view = new Uint16Array(this.data.buffer, this.write);\n      this.write += util.text.utf16.encode(view);\n      return this;\n    }\n\n    throw new Error('Invalid encoding: ' + encoding);\n  }\n\n  throw Error('Invalid parameter: ' + bytes);\n};\n\n/**\n * Puts the given buffer into this buffer.\n *\n * @param buffer the buffer to put into this one.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putBuffer = function(buffer) {\n  this.putBytes(buffer);\n  buffer.clear();\n  return this;\n};\n\n/**\n * Puts a string into this buffer.\n *\n * @param str the string to put.\n * @param [encoding] the encoding for the string (default: 'utf16').\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putString = function(str) {\n  return this.putBytes(str, 'utf16');\n};\n\n/**\n * Puts a 16-bit integer in this buffer in big-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt16 = function(i) {\n  this.accommodate(2);\n  this.data.setInt16(this.write, i);\n  this.write += 2;\n  return this;\n};\n\n/**\n * Puts a 24-bit integer in this buffer in big-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt24 = function(i) {\n  this.accommodate(3);\n  this.data.setInt16(this.write, i >> 8 & 0xFFFF);\n  this.data.setInt8(this.write, i >> 16 & 0xFF);\n  this.write += 3;\n  return this;\n};\n\n/**\n * Puts a 32-bit integer in this buffer in big-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt32 = function(i) {\n  this.accommodate(4);\n  this.data.setInt32(this.write, i);\n  this.write += 4;\n  return this;\n};\n\n/**\n * Puts a 16-bit integer in this buffer in little-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt16Le = function(i) {\n  this.accommodate(2);\n  this.data.setInt16(this.write, i, true);\n  this.write += 2;\n  return this;\n};\n\n/**\n * Puts a 24-bit integer in this buffer in little-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt24Le = function(i) {\n  this.accommodate(3);\n  this.data.setInt8(this.write, i >> 16 & 0xFF);\n  this.data.setInt16(this.write, i >> 8 & 0xFFFF, true);\n  this.write += 3;\n  return this;\n};\n\n/**\n * Puts a 32-bit integer in this buffer in little-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt32Le = function(i) {\n  this.accommodate(4);\n  this.data.setInt32(this.write, i, true);\n  this.write += 4;\n  return this;\n};\n\n/**\n * Puts an n-bit integer in this buffer in big-endian order.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt = function(i, n) {\n  _checkBitsParam(n);\n  this.accommodate(n / 8);\n  do {\n    n -= 8;\n    this.data.setInt8(this.write++, (i >> n) & 0xFF);\n  } while(n > 0);\n  return this;\n};\n\n/**\n * Puts a signed n-bit integer in this buffer in big-endian order. Two's\n * complement representation is used.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putSignedInt = function(i, n) {\n  _checkBitsParam(n);\n  this.accommodate(n / 8);\n  if(i < 0) {\n    i += 2 << (n - 1);\n  }\n  return this.putInt(i, n);\n};\n\n/**\n * Gets a byte from this buffer and advances the read pointer by 1.\n *\n * @return the byte.\n */\nutil.DataBuffer.prototype.getByte = function() {\n  return this.data.getInt8(this.read++);\n};\n\n/**\n * Gets a uint16 from this buffer in big-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.DataBuffer.prototype.getInt16 = function() {\n  var rval = this.data.getInt16(this.read);\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in big-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.DataBuffer.prototype.getInt24 = function() {\n  var rval = (\n    this.data.getInt16(this.read) << 8 ^\n    this.data.getInt8(this.read + 2));\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in big-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.DataBuffer.prototype.getInt32 = function() {\n  var rval = this.data.getInt32(this.read);\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets a uint16 from this buffer in little-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.DataBuffer.prototype.getInt16Le = function() {\n  var rval = this.data.getInt16(this.read, true);\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in little-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.DataBuffer.prototype.getInt24Le = function() {\n  var rval = (\n    this.data.getInt8(this.read) ^\n    this.data.getInt16(this.read + 1, true) << 8);\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in little-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.DataBuffer.prototype.getInt32Le = function() {\n  var rval = this.data.getInt32(this.read, true);\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets an n-bit integer from this buffer in big-endian order and advances the\n * read pointer by n/8.\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.DataBuffer.prototype.getInt = function(n) {\n  _checkBitsParam(n);\n  var rval = 0;\n  do {\n    // TODO: Use (rval * 0x100) if adding support for 33 to 53 bits.\n    rval = (rval << 8) + this.data.getInt8(this.read++);\n    n -= 8;\n  } while(n > 0);\n  return rval;\n};\n\n/**\n * Gets a signed n-bit integer from this buffer in big-endian order, using\n * two's complement, and advances the read pointer by n/8.\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.DataBuffer.prototype.getSignedInt = function(n) {\n  // getInt checks n\n  var x = this.getInt(n);\n  var max = 2 << (n - 2);\n  if(x >= max) {\n    x -= max << 1;\n  }\n  return x;\n};\n\n/**\n * Reads bytes out as a binary encoded string and clears them from the\n * buffer.\n *\n * @param count the number of bytes to read, undefined or null for all.\n *\n * @return a binary encoded string of bytes.\n */\nutil.DataBuffer.prototype.getBytes = function(count) {\n  // TODO: deprecate this method, it is poorly named and\n  // this.toString('binary') replaces it\n  // add a toTypedArray()/toArrayBuffer() function\n  var rval;\n  if(count) {\n    // read count bytes\n    count = Math.min(this.length(), count);\n    rval = this.data.slice(this.read, this.read + count);\n    this.read += count;\n  } else if(count === 0) {\n    rval = '';\n  } else {\n    // read all bytes, optimize to only copy when needed\n    rval = (this.read === 0) ? this.data : this.data.slice(this.read);\n    this.clear();\n  }\n  return rval;\n};\n\n/**\n * Gets a binary encoded string of the bytes from this buffer without\n * modifying the read pointer.\n *\n * @param count the number of bytes to get, omit to get all.\n *\n * @return a string full of binary encoded characters.\n */\nutil.DataBuffer.prototype.bytes = function(count) {\n  // TODO: deprecate this method, it is poorly named, add \"getString()\"\n  return (typeof(count) === 'undefined' ?\n    this.data.slice(this.read) :\n    this.data.slice(this.read, this.read + count));\n};\n\n/**\n * Gets a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n *\n * @return the byte.\n */\nutil.DataBuffer.prototype.at = function(i) {\n  return this.data.getUint8(this.read + i);\n};\n\n/**\n * Puts a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.setAt = function(i, b) {\n  this.data.setUint8(i, b);\n  return this;\n};\n\n/**\n * Gets the last byte without modifying the read pointer.\n *\n * @return the last byte.\n */\nutil.DataBuffer.prototype.last = function() {\n  return this.data.getUint8(this.write - 1);\n};\n\n/**\n * Creates a copy of this buffer.\n *\n * @return the copy.\n */\nutil.DataBuffer.prototype.copy = function() {\n  return new util.DataBuffer(this);\n};\n\n/**\n * Compacts this buffer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.compact = function() {\n  if(this.read > 0) {\n    var src = new Uint8Array(this.data.buffer, this.read);\n    var dst = new Uint8Array(src.byteLength);\n    dst.set(src);\n    this.data = new DataView(dst);\n    this.write -= this.read;\n    this.read = 0;\n  }\n  return this;\n};\n\n/**\n * Clears this buffer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.clear = function() {\n  this.data = new DataView(new ArrayBuffer(0));\n  this.read = this.write = 0;\n  return this;\n};\n\n/**\n * Shortens this buffer by triming bytes off of the end of this buffer.\n *\n * @param count the number of bytes to trim off.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.truncate = function(count) {\n  this.write = Math.max(0, this.length() - count);\n  this.read = Math.min(this.read, this.write);\n  return this;\n};\n\n/**\n * Converts this buffer to a hexadecimal string.\n *\n * @return a hexadecimal string.\n */\nutil.DataBuffer.prototype.toHex = function() {\n  var rval = '';\n  for(var i = this.read; i < this.data.byteLength; ++i) {\n    var b = this.data.getUint8(i);\n    if(b < 16) {\n      rval += '0';\n    }\n    rval += b.toString(16);\n  }\n  return rval;\n};\n\n/**\n * Converts this buffer to a string, using the given encoding. If no\n * encoding is given, 'utf8' (UTF-8) is used.\n *\n * @param [encoding] the encoding to use: 'binary', 'utf8', 'utf16', 'hex',\n *          'base64' (default: 'utf8').\n *\n * @return a string representation of the bytes in this buffer.\n */\nutil.DataBuffer.prototype.toString = function(encoding) {\n  var view = new Uint8Array(this.data, this.read, this.length());\n  encoding = encoding || 'utf8';\n\n  // encode to string\n  if(encoding === 'binary' || encoding === 'raw') {\n    return util.binary.raw.encode(view);\n  }\n  if(encoding === 'hex') {\n    return util.binary.hex.encode(view);\n  }\n  if(encoding === 'base64') {\n    return util.binary.base64.encode(view);\n  }\n\n  // decode to text\n  if(encoding === 'utf8') {\n    return util.text.utf8.decode(view);\n  }\n  if(encoding === 'utf16') {\n    return util.text.utf16.decode(view);\n  }\n\n  throw new Error('Invalid encoding: ' + encoding);\n};\n\n/** End Buffer w/UInt8Array backing */\n\n/**\n * Creates a buffer that stores bytes. A value may be given to populate the\n * buffer with data. This value can either be string of encoded bytes or a\n * regular string of characters. When passing a string of binary encoded\n * bytes, the encoding `raw` should be given. This is also the default. When\n * passing a string of characters, the encoding `utf8` should be given.\n *\n * @param [input] a string with encoded bytes to store in the buffer.\n * @param [encoding] (default: 'raw', other: 'utf8').\n */\nutil.createBuffer = function(input, encoding) {\n  // TODO: deprecate, use new ByteBuffer() instead\n  encoding = encoding || 'raw';\n  if(input !== undefined && encoding === 'utf8') {\n    input = util.encodeUtf8(input);\n  }\n  return new util.ByteBuffer(input);\n};\n\n/**\n * Fills a string with a particular value. If you want the string to be a byte\n * string, pass in String.fromCharCode(theByte).\n *\n * @param c the character to fill the string with, use String.fromCharCode\n *          to fill the string with a byte value.\n * @param n the number of characters of value c to fill with.\n *\n * @return the filled string.\n */\nutil.fillString = function(c, n) {\n  var s = '';\n  while(n > 0) {\n    if(n & 1) {\n      s += c;\n    }\n    n >>>= 1;\n    if(n > 0) {\n      c += c;\n    }\n  }\n  return s;\n};\n\n/**\n * Performs a per byte XOR between two byte strings and returns the result as a\n * string of bytes.\n *\n * @param s1 first string of bytes.\n * @param s2 second string of bytes.\n * @param n the number of bytes to XOR.\n *\n * @return the XOR'd result.\n */\nutil.xorBytes = function(s1, s2, n) {\n  var s3 = '';\n  var b = '';\n  var t = '';\n  var i = 0;\n  var c = 0;\n  for(; n > 0; --n, ++i) {\n    b = s1.charCodeAt(i) ^ s2.charCodeAt(i);\n    if(c >= 10) {\n      s3 += t;\n      t = '';\n      c = 0;\n    }\n    t += String.fromCharCode(b);\n    ++c;\n  }\n  s3 += t;\n  return s3;\n};\n\n/**\n * Converts a hex string into a 'binary' encoded string of bytes.\n *\n * @param hex the hexadecimal string to convert.\n *\n * @return the binary-encoded string of bytes.\n */\nutil.hexToBytes = function(hex) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.hex.decode instead.\"\n  var rval = '';\n  var i = 0;\n  if(hex.length & 1 == 1) {\n    // odd number of characters, convert first character alone\n    i = 1;\n    rval += String.fromCharCode(parseInt(hex[0], 16));\n  }\n  // convert 2 characters (1 byte) at a time\n  for(; i < hex.length; i += 2) {\n    rval += String.fromCharCode(parseInt(hex.substr(i, 2), 16));\n  }\n  return rval;\n};\n\n/**\n * Converts a 'binary' encoded string of bytes to hex.\n *\n * @param bytes the byte string to convert.\n *\n * @return the string of hexadecimal characters.\n */\nutil.bytesToHex = function(bytes) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.hex.encode instead.\"\n  return util.createBuffer(bytes).toHex();\n};\n\n/**\n * Converts an 32-bit integer to 4-big-endian byte string.\n *\n * @param i the integer.\n *\n * @return the byte string.\n */\nutil.int32ToBytes = function(i) {\n  return (\n    String.fromCharCode(i >> 24 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n// base64 characters, reverse mapping\nvar _base64 =\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nvar _base64Idx = [\n/*43 -43 = 0*/\n/*'+',  1,  2,  3,'/' */\n   62, -1, -1, -1, 63,\n\n/*'0','1','2','3','4','5','6','7','8','9' */\n   52, 53, 54, 55, 56, 57, 58, 59, 60, 61,\n\n/*15, 16, 17,'=', 19, 20, 21 */\n  -1, -1, -1, 64, -1, -1, -1,\n\n/*65 - 43 = 22*/\n/*'A','B','C','D','E','F','G','H','I','J','K','L','M', */\n   0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,\n\n/*'N','O','P','Q','R','S','T','U','V','W','X','Y','Z' */\n   13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,\n\n/*91 - 43 = 48 */\n/*48, 49, 50, 51, 52, 53 */\n  -1, -1, -1, -1, -1, -1,\n\n/*97 - 43 = 54*/\n/*'a','b','c','d','e','f','g','h','i','j','k','l','m' */\n   26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38,\n\n/*'n','o','p','q','r','s','t','u','v','w','x','y','z' */\n   39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\n];\n\n// base58 characters (Bitcoin alphabet)\nvar _base58 = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\n\n/**\n * Base64 encodes a 'binary' encoded string of bytes.\n *\n * @param input the binary encoded string of bytes to base64-encode.\n * @param maxline the maximum number of encoded characters per line to use,\n *          defaults to none.\n *\n * @return the base64-encoded output.\n */\nutil.encode64 = function(input, maxline) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.base64.encode instead.\"\n  var line = '';\n  var output = '';\n  var chr1, chr2, chr3;\n  var i = 0;\n  while(i < input.length) {\n    chr1 = input.charCodeAt(i++);\n    chr2 = input.charCodeAt(i++);\n    chr3 = input.charCodeAt(i++);\n\n    // encode 4 character group\n    line += _base64.charAt(chr1 >> 2);\n    line += _base64.charAt(((chr1 & 3) << 4) | (chr2 >> 4));\n    if(isNaN(chr2)) {\n      line += '==';\n    } else {\n      line += _base64.charAt(((chr2 & 15) << 2) | (chr3 >> 6));\n      line += isNaN(chr3) ? '=' : _base64.charAt(chr3 & 63);\n    }\n\n    if(maxline && line.length > maxline) {\n      output += line.substr(0, maxline) + '\\r\\n';\n      line = line.substr(maxline);\n    }\n  }\n  output += line;\n  return output;\n};\n\n/**\n * Base64 decodes a string into a 'binary' encoded string of bytes.\n *\n * @param input the base64-encoded input.\n *\n * @return the binary encoded string.\n */\nutil.decode64 = function(input) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.base64.decode instead.\"\n\n  // remove all non-base64 characters\n  input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n  var output = '';\n  var enc1, enc2, enc3, enc4;\n  var i = 0;\n\n  while(i < input.length) {\n    enc1 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc2 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc3 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc4 = _base64Idx[input.charCodeAt(i++) - 43];\n\n    output += String.fromCharCode((enc1 << 2) | (enc2 >> 4));\n    if(enc3 !== 64) {\n      // decoded at least 2 bytes\n      output += String.fromCharCode(((enc2 & 15) << 4) | (enc3 >> 2));\n      if(enc4 !== 64) {\n        // decoded 3 bytes\n        output += String.fromCharCode(((enc3 & 3) << 6) | enc4);\n      }\n    }\n  }\n\n  return output;\n};\n\n/**\n * Encodes the given string of characters (a standard JavaScript\n * string) as a binary encoded string where the bytes represent\n * a UTF-8 encoded string of characters. Non-ASCII characters will be\n * encoded as multiple bytes according to UTF-8.\n *\n * @param str a standard string of characters to encode.\n *\n * @return the binary encoded string.\n */\nutil.encodeUtf8 = function(str) {\n  return unescape(encodeURIComponent(str));\n};\n\n/**\n * Decodes a binary encoded string that contains bytes that\n * represent a UTF-8 encoded string of characters -- into a\n * string of characters (a standard JavaScript string).\n *\n * @param str the binary encoded string to decode.\n *\n * @return the resulting standard string of characters.\n */\nutil.decodeUtf8 = function(str) {\n  return decodeURIComponent(escape(str));\n};\n\n// binary encoding/decoding tools\n// FIXME: Experimental. Do not use yet.\nutil.binary = {\n  raw: {},\n  hex: {},\n  base64: {},\n  base58: {},\n  baseN : {\n    encode: baseN.encode,\n    decode: baseN.decode\n  }\n};\n\n/**\n * Encodes a Uint8Array as a binary-encoded string. This encoding uses\n * a value between 0 and 255 for each character.\n *\n * @param bytes the Uint8Array to encode.\n *\n * @return the binary-encoded string.\n */\nutil.binary.raw.encode = function(bytes) {\n  return String.fromCharCode.apply(null, bytes);\n};\n\n/**\n * Decodes a binary-encoded string to a Uint8Array. This encoding uses\n * a value between 0 and 255 for each character.\n *\n * @param str the binary-encoded string to decode.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.binary.raw.decode = function(str, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(str.length);\n  }\n  offset = offset || 0;\n  var j = offset;\n  for(var i = 0; i < str.length; ++i) {\n    out[j++] = str.charCodeAt(i);\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Encodes a 'binary' string, ArrayBuffer, DataView, TypedArray, or\n * ByteBuffer as a string of hexadecimal characters.\n *\n * @param bytes the bytes to convert.\n *\n * @return the string of hexadecimal characters.\n */\nutil.binary.hex.encode = util.bytesToHex;\n\n/**\n * Decodes a hex-encoded string to a Uint8Array.\n *\n * @param hex the hexadecimal string to convert.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.binary.hex.decode = function(hex, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(Math.ceil(hex.length / 2));\n  }\n  offset = offset || 0;\n  var i = 0, j = offset;\n  if(hex.length & 1) {\n    // odd number of characters, convert first character alone\n    i = 1;\n    out[j++] = parseInt(hex[0], 16);\n  }\n  // convert 2 characters (1 byte) at a time\n  for(; i < hex.length; i += 2) {\n    out[j++] = parseInt(hex.substr(i, 2), 16);\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Base64-encodes a Uint8Array.\n *\n * @param input the Uint8Array to encode.\n * @param maxline the maximum number of encoded characters per line to use,\n *          defaults to none.\n *\n * @return the base64-encoded output string.\n */\nutil.binary.base64.encode = function(input, maxline) {\n  var line = '';\n  var output = '';\n  var chr1, chr2, chr3;\n  var i = 0;\n  while(i < input.byteLength) {\n    chr1 = input[i++];\n    chr2 = input[i++];\n    chr3 = input[i++];\n\n    // encode 4 character group\n    line += _base64.charAt(chr1 >> 2);\n    line += _base64.charAt(((chr1 & 3) << 4) | (chr2 >> 4));\n    if(isNaN(chr2)) {\n      line += '==';\n    } else {\n      line += _base64.charAt(((chr2 & 15) << 2) | (chr3 >> 6));\n      line += isNaN(chr3) ? '=' : _base64.charAt(chr3 & 63);\n    }\n\n    if(maxline && line.length > maxline) {\n      output += line.substr(0, maxline) + '\\r\\n';\n      line = line.substr(maxline);\n    }\n  }\n  output += line;\n  return output;\n};\n\n/**\n * Decodes a base64-encoded string to a Uint8Array.\n *\n * @param input the base64-encoded input string.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.binary.base64.decode = function(input, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(Math.ceil(input.length / 4) * 3);\n  }\n\n  // remove all non-base64 characters\n  input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n  offset = offset || 0;\n  var enc1, enc2, enc3, enc4;\n  var i = 0, j = offset;\n\n  while(i < input.length) {\n    enc1 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc2 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc3 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc4 = _base64Idx[input.charCodeAt(i++) - 43];\n\n    out[j++] = (enc1 << 2) | (enc2 >> 4);\n    if(enc3 !== 64) {\n      // decoded at least 2 bytes\n      out[j++] = ((enc2 & 15) << 4) | (enc3 >> 2);\n      if(enc4 !== 64) {\n        // decoded 3 bytes\n        out[j++] = ((enc3 & 3) << 6) | enc4;\n      }\n    }\n  }\n\n  // make sure result is the exact decoded length\n  return output ? (j - offset) : out.subarray(0, j);\n};\n\n// add support for base58 encoding/decoding with Bitcoin alphabet\nutil.binary.base58.encode = function(input, maxline) {\n  return util.binary.baseN.encode(input, _base58, maxline);\n};\nutil.binary.base58.decode = function(input, maxline) {\n  return util.binary.baseN.decode(input, _base58, maxline);\n};\n\n// text encoding/decoding tools\n// FIXME: Experimental. Do not use yet.\nutil.text = {\n  utf8: {},\n  utf16: {}\n};\n\n/**\n * Encodes the given string as UTF-8 in a Uint8Array.\n *\n * @param str the string to encode.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.text.utf8.encode = function(str, output, offset) {\n  str = util.encodeUtf8(str);\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(str.length);\n  }\n  offset = offset || 0;\n  var j = offset;\n  for(var i = 0; i < str.length; ++i) {\n    out[j++] = str.charCodeAt(i);\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Decodes the UTF-8 contents from a Uint8Array.\n *\n * @param bytes the Uint8Array to decode.\n *\n * @return the resulting string.\n */\nutil.text.utf8.decode = function(bytes) {\n  return util.decodeUtf8(String.fromCharCode.apply(null, bytes));\n};\n\n/**\n * Encodes the given string as UTF-16 in a Uint8Array.\n *\n * @param str the string to encode.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.text.utf16.encode = function(str, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(str.length * 2);\n  }\n  var view = new Uint16Array(out.buffer);\n  offset = offset || 0;\n  var j = offset;\n  var k = offset;\n  for(var i = 0; i < str.length; ++i) {\n    view[k++] = str.charCodeAt(i);\n    j += 2;\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Decodes the UTF-16 contents from a Uint8Array.\n *\n * @param bytes the Uint8Array to decode.\n *\n * @return the resulting string.\n */\nutil.text.utf16.decode = function(bytes) {\n  return String.fromCharCode.apply(null, new Uint16Array(bytes.buffer));\n};\n\n/**\n * Deflates the given data using a flash interface.\n *\n * @param api the flash interface.\n * @param bytes the data.\n * @param raw true to return only raw deflate data, false to include zlib\n *          header and trailer.\n *\n * @return the deflated data as a string.\n */\nutil.deflate = function(api, bytes, raw) {\n  bytes = util.decode64(api.deflate(util.encode64(bytes)).rval);\n\n  // strip zlib header and trailer if necessary\n  if(raw) {\n    // zlib header is 2 bytes (CMF,FLG) where FLG indicates that\n    // there is a 4-byte DICT (alder-32) block before the data if\n    // its 5th bit is set\n    var start = 2;\n    var flg = bytes.charCodeAt(1);\n    if(flg & 0x20) {\n      start = 6;\n    }\n    // zlib trailer is 4 bytes of adler-32\n    bytes = bytes.substring(start, bytes.length - 4);\n  }\n\n  return bytes;\n};\n\n/**\n * Inflates the given data using a flash interface.\n *\n * @param api the flash interface.\n * @param bytes the data.\n * @param raw true if the incoming data has no zlib header or trailer and is\n *          raw DEFLATE data.\n *\n * @return the inflated data as a string, null on error.\n */\nutil.inflate = function(api, bytes, raw) {\n  // TODO: add zlib header and trailer if necessary/possible\n  var rval = api.inflate(util.encode64(bytes)).rval;\n  return (rval === null) ? null : util.decode64(rval);\n};\n\n/**\n * Sets a storage object.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param obj the storage object, null to remove.\n */\nvar _setStorageObject = function(api, id, obj) {\n  if(!api) {\n    throw new Error('WebStorage not available.');\n  }\n\n  var rval;\n  if(obj === null) {\n    rval = api.removeItem(id);\n  } else {\n    // json-encode and base64-encode object\n    obj = util.encode64(JSON.stringify(obj));\n    rval = api.setItem(id, obj);\n  }\n\n  // handle potential flash error\n  if(typeof(rval) !== 'undefined' && rval.rval !== true) {\n    var error = new Error(rval.error.message);\n    error.id = rval.error.id;\n    error.name = rval.error.name;\n    throw error;\n  }\n};\n\n/**\n * Gets a storage object.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n *\n * @return the storage object entry or null if none exists.\n */\nvar _getStorageObject = function(api, id) {\n  if(!api) {\n    throw new Error('WebStorage not available.');\n  }\n\n  // get the existing entry\n  var rval = api.getItem(id);\n\n  /* Note: We check api.init because we can't do (api == localStorage)\n    on IE because of \"Class doesn't support Automation\" exception. Only\n    the flash api has an init method so this works too, but we need a\n    better solution in the future. */\n\n  // flash returns item wrapped in an object, handle special case\n  if(api.init) {\n    if(rval.rval === null) {\n      if(rval.error) {\n        var error = new Error(rval.error.message);\n        error.id = rval.error.id;\n        error.name = rval.error.name;\n        throw error;\n      }\n      // no error, but also no item\n      rval = null;\n    } else {\n      rval = rval.rval;\n    }\n  }\n\n  // handle decoding\n  if(rval !== null) {\n    // base64-decode and json-decode data\n    rval = JSON.parse(util.decode64(rval));\n  }\n\n  return rval;\n};\n\n/**\n * Stores an item in local storage.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param data the data for the item (any javascript object/primitive).\n */\nvar _setItem = function(api, id, key, data) {\n  // get storage object\n  var obj = _getStorageObject(api, id);\n  if(obj === null) {\n    // create a new storage object\n    obj = {};\n  }\n  // update key\n  obj[key] = data;\n\n  // set storage object\n  _setStorageObject(api, id, obj);\n};\n\n/**\n * Gets an item from local storage.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n *\n * @return the item.\n */\nvar _getItem = function(api, id, key) {\n  // get storage object\n  var rval = _getStorageObject(api, id);\n  if(rval !== null) {\n    // return data at key\n    rval = (key in rval) ? rval[key] : null;\n  }\n\n  return rval;\n};\n\n/**\n * Removes an item from local storage.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n */\nvar _removeItem = function(api, id, key) {\n  // get storage object\n  var obj = _getStorageObject(api, id);\n  if(obj !== null && key in obj) {\n    // remove key\n    delete obj[key];\n\n    // see if entry has no keys remaining\n    var empty = true;\n    for(var prop in obj) {\n      empty = false;\n      break;\n    }\n    if(empty) {\n      // remove entry entirely if no keys are left\n      obj = null;\n    }\n\n    // set storage object\n    _setStorageObject(api, id, obj);\n  }\n};\n\n/**\n * Clears the local disk storage identified by the given ID.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n */\nvar _clearItems = function(api, id) {\n  _setStorageObject(api, id, null);\n};\n\n/**\n * Calls a storage function.\n *\n * @param func the function to call.\n * @param args the arguments for the function.\n * @param location the location argument.\n *\n * @return the return value from the function.\n */\nvar _callStorageFunction = function(func, args, location) {\n  var rval = null;\n\n  // default storage types\n  if(typeof(location) === 'undefined') {\n    location = ['web', 'flash'];\n  }\n\n  // apply storage types in order of preference\n  var type;\n  var done = false;\n  var exception = null;\n  for(var idx in location) {\n    type = location[idx];\n    try {\n      if(type === 'flash' || type === 'both') {\n        if(args[0] === null) {\n          throw new Error('Flash local storage not available.');\n        }\n        rval = func.apply(this, args);\n        done = (type === 'flash');\n      }\n      if(type === 'web' || type === 'both') {\n        args[0] = localStorage;\n        rval = func.apply(this, args);\n        done = true;\n      }\n    } catch(ex) {\n      exception = ex;\n    }\n    if(done) {\n      break;\n    }\n  }\n\n  if(!done) {\n    throw exception;\n  }\n\n  return rval;\n};\n\n/**\n * Stores an item on local disk.\n *\n * The available types of local storage include 'flash', 'web', and 'both'.\n *\n * The type 'flash' refers to flash local storage (SharedObject). In order\n * to use flash local storage, the 'api' parameter must be valid. The type\n * 'web' refers to WebStorage, if supported by the browser. The type 'both'\n * refers to storing using both 'flash' and 'web', not just one or the\n * other.\n *\n * The location array should list the storage types to use in order of\n * preference:\n *\n * ['flash']: flash only storage\n * ['web']: web only storage\n * ['both']: try to store in both\n * ['flash','web']: store in flash first, but if not available, 'web'\n * ['web','flash']: store in web first, but if not available, 'flash'\n *\n * The location array defaults to: ['web', 'flash']\n *\n * @param api the flash interface, null to use only WebStorage.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param data the data for the item (any javascript object/primitive).\n * @param location an array with the preferred types of storage to use.\n */\nutil.setItem = function(api, id, key, data, location) {\n  _callStorageFunction(_setItem, arguments, location);\n};\n\n/**\n * Gets an item on local disk.\n *\n * Set setItem() for details on storage types.\n *\n * @param api the flash interface, null to use only WebStorage.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param location an array with the preferred types of storage to use.\n *\n * @return the item.\n */\nutil.getItem = function(api, id, key, location) {\n  return _callStorageFunction(_getItem, arguments, location);\n};\n\n/**\n * Removes an item on local disk.\n *\n * Set setItem() for details on storage types.\n *\n * @param api the flash interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param location an array with the preferred types of storage to use.\n */\nutil.removeItem = function(api, id, key, location) {\n  _callStorageFunction(_removeItem, arguments, location);\n};\n\n/**\n * Clears the local disk storage identified by the given ID.\n *\n * Set setItem() for details on storage types.\n *\n * @param api the flash interface if flash is available.\n * @param id the storage ID to use.\n * @param location an array with the preferred types of storage to use.\n */\nutil.clearItems = function(api, id, location) {\n  _callStorageFunction(_clearItems, arguments, location);\n};\n\n/**\n * Check if an object is empty.\n *\n * Taken from:\n * http://stackoverflow.com/questions/679915/how-do-i-test-for-an-empty-javascript-object-from-json/679937#679937\n *\n * @param object the object to check.\n */\nutil.isEmpty = function(obj) {\n  for(var prop in obj) {\n    if(obj.hasOwnProperty(prop)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Format with simple printf-style interpolation.\n *\n * %%: literal '%'\n * %s,%o: convert next argument into a string.\n *\n * @param format the string to format.\n * @param ... arguments to interpolate into the format string.\n */\nutil.format = function(format) {\n  var re = /%./g;\n  // current match\n  var match;\n  // current part\n  var part;\n  // current arg index\n  var argi = 0;\n  // collected parts to recombine later\n  var parts = [];\n  // last index found\n  var last = 0;\n  // loop while matches remain\n  while((match = re.exec(format))) {\n    part = format.substring(last, re.lastIndex - 2);\n    // don't add empty strings (ie, parts between %s%s)\n    if(part.length > 0) {\n      parts.push(part);\n    }\n    last = re.lastIndex;\n    // switch on % code\n    var code = match[0][1];\n    switch(code) {\n    case 's':\n    case 'o':\n      // check if enough arguments were given\n      if(argi < arguments.length) {\n        parts.push(arguments[argi++ + 1]);\n      } else {\n        parts.push('<?>');\n      }\n      break;\n    // FIXME: do proper formating for numbers, etc\n    //case 'f':\n    //case 'd':\n    case '%':\n      parts.push('%');\n      break;\n    default:\n      parts.push('<%' + code + '?>');\n    }\n  }\n  // add trailing part of format string\n  parts.push(format.substring(last));\n  return parts.join('');\n};\n\n/**\n * Formats a number.\n *\n * http://snipplr.com/view/5945/javascript-numberformat--ported-from-php/\n */\nutil.formatNumber = function(number, decimals, dec_point, thousands_sep) {\n  // http://kevin.vanzonneveld.net\n  // +   original by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)\n  // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n  // +     bugfix by: Michael White (http://crestidg.com)\n  // +     bugfix by: Benjamin Lupton\n  // +     bugfix by: Allan Jensen (http://www.winternet.no)\n  // +    revised by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)\n  // *     example 1: number_format(1234.5678, 2, '.', '');\n  // *     returns 1: 1234.57\n\n  var n = number, c = isNaN(decimals = Math.abs(decimals)) ? 2 : decimals;\n  var d = dec_point === undefined ? ',' : dec_point;\n  var t = thousands_sep === undefined ?\n   '.' : thousands_sep, s = n < 0 ? '-' : '';\n  var i = parseInt((n = Math.abs(+n || 0).toFixed(c)), 10) + '';\n  var j = (i.length > 3) ? i.length % 3 : 0;\n  return s + (j ? i.substr(0, j) + t : '') +\n    i.substr(j).replace(/(\\d{3})(?=\\d)/g, '$1' + t) +\n    (c ? d + Math.abs(n - i).toFixed(c).slice(2) : '');\n};\n\n/**\n * Formats a byte size.\n *\n * http://snipplr.com/view/5949/format-humanize-file-byte-size-presentation-in-javascript/\n */\nutil.formatSize = function(size) {\n  if(size >= 1073741824) {\n    size = util.formatNumber(size / 1073741824, 2, '.', '') + ' GiB';\n  } else if(size >= 1048576) {\n    size = util.formatNumber(size / 1048576, 2, '.', '') + ' MiB';\n  } else if(size >= 1024) {\n    size = util.formatNumber(size / 1024, 0) + ' KiB';\n  } else {\n    size = util.formatNumber(size, 0) + ' bytes';\n  }\n  return size;\n};\n\n/**\n * Converts an IPv4 or IPv6 string representation into bytes (in network order).\n *\n * @param ip the IPv4 or IPv6 address to convert.\n *\n * @return the 4-byte IPv6 or 16-byte IPv6 address or null if the address can't\n *         be parsed.\n */\nutil.bytesFromIP = function(ip) {\n  if(ip.indexOf('.') !== -1) {\n    return util.bytesFromIPv4(ip);\n  }\n  if(ip.indexOf(':') !== -1) {\n    return util.bytesFromIPv6(ip);\n  }\n  return null;\n};\n\n/**\n * Converts an IPv4 string representation into bytes (in network order).\n *\n * @param ip the IPv4 address to convert.\n *\n * @return the 4-byte address or null if the address can't be parsed.\n */\nutil.bytesFromIPv4 = function(ip) {\n  ip = ip.split('.');\n  if(ip.length !== 4) {\n    return null;\n  }\n  var b = util.createBuffer();\n  for(var i = 0; i < ip.length; ++i) {\n    var num = parseInt(ip[i], 10);\n    if(isNaN(num)) {\n      return null;\n    }\n    b.putByte(num);\n  }\n  return b.getBytes();\n};\n\n/**\n * Converts an IPv6 string representation into bytes (in network order).\n *\n * @param ip the IPv6 address to convert.\n *\n * @return the 16-byte address or null if the address can't be parsed.\n */\nutil.bytesFromIPv6 = function(ip) {\n  var blanks = 0;\n  ip = ip.split(':').filter(function(e) {\n    if(e.length === 0) ++blanks;\n    return true;\n  });\n  var zeros = (8 - ip.length + blanks) * 2;\n  var b = util.createBuffer();\n  for(var i = 0; i < 8; ++i) {\n    if(!ip[i] || ip[i].length === 0) {\n      b.fillWithByte(0, zeros);\n      zeros = 0;\n      continue;\n    }\n    var bytes = util.hexToBytes(ip[i]);\n    if(bytes.length < 2) {\n      b.putByte(0);\n    }\n    b.putBytes(bytes);\n  }\n  return b.getBytes();\n};\n\n/**\n * Converts 4-bytes into an IPv4 string representation or 16-bytes into\n * an IPv6 string representation. The bytes must be in network order.\n *\n * @param bytes the bytes to convert.\n *\n * @return the IPv4 or IPv6 string representation if 4 or 16 bytes,\n *         respectively, are given, otherwise null.\n */\nutil.bytesToIP = function(bytes) {\n  if(bytes.length === 4) {\n    return util.bytesToIPv4(bytes);\n  }\n  if(bytes.length === 16) {\n    return util.bytesToIPv6(bytes);\n  }\n  return null;\n};\n\n/**\n * Converts 4-bytes into an IPv4 string representation. The bytes must be\n * in network order.\n *\n * @param bytes the bytes to convert.\n *\n * @return the IPv4 string representation or null for an invalid # of bytes.\n */\nutil.bytesToIPv4 = function(bytes) {\n  if(bytes.length !== 4) {\n    return null;\n  }\n  var ip = [];\n  for(var i = 0; i < bytes.length; ++i) {\n    ip.push(bytes.charCodeAt(i));\n  }\n  return ip.join('.');\n};\n\n/**\n * Converts 16-bytes into an IPv16 string representation. The bytes must be\n * in network order.\n *\n * @param bytes the bytes to convert.\n *\n * @return the IPv16 string representation or null for an invalid # of bytes.\n */\nutil.bytesToIPv6 = function(bytes) {\n  if(bytes.length !== 16) {\n    return null;\n  }\n  var ip = [];\n  var zeroGroups = [];\n  var zeroMaxGroup = 0;\n  for(var i = 0; i < bytes.length; i += 2) {\n    var hex = util.bytesToHex(bytes[i] + bytes[i + 1]);\n    // canonicalize zero representation\n    while(hex[0] === '0' && hex !== '0') {\n      hex = hex.substr(1);\n    }\n    if(hex === '0') {\n      var last = zeroGroups[zeroGroups.length - 1];\n      var idx = ip.length;\n      if(!last || idx !== last.end + 1) {\n        zeroGroups.push({start: idx, end: idx});\n      } else {\n        last.end = idx;\n        if((last.end - last.start) >\n          (zeroGroups[zeroMaxGroup].end - zeroGroups[zeroMaxGroup].start)) {\n          zeroMaxGroup = zeroGroups.length - 1;\n        }\n      }\n    }\n    ip.push(hex);\n  }\n  if(zeroGroups.length > 0) {\n    var group = zeroGroups[zeroMaxGroup];\n    // only shorten group of length > 0\n    if(group.end - group.start > 0) {\n      ip.splice(group.start, group.end - group.start + 1, '');\n      if(group.start === 0) {\n        ip.unshift('');\n      }\n      if(group.end === 7) {\n        ip.push('');\n      }\n    }\n  }\n  return ip.join(':');\n};\n\n/**\n * Estimates the number of processes that can be run concurrently. If\n * creating Web Workers, keep in mind that the main JavaScript process needs\n * its own core.\n *\n * @param options the options to use:\n *          update true to force an update (not use the cached value).\n * @param callback(err, max) called once the operation completes.\n */\nutil.estimateCores = function(options, callback) {\n  if(typeof options === 'function') {\n    callback = options;\n    options = {};\n  }\n  options = options || {};\n  if('cores' in util && !options.update) {\n    return callback(null, util.cores);\n  }\n  if(typeof navigator !== 'undefined' &&\n    'hardwareConcurrency' in navigator &&\n    navigator.hardwareConcurrency > 0) {\n    util.cores = navigator.hardwareConcurrency;\n    return callback(null, util.cores);\n  }\n  if(typeof Worker === 'undefined') {\n    // workers not available\n    util.cores = 1;\n    return callback(null, util.cores);\n  }\n  if(typeof Blob === 'undefined') {\n    // can't estimate, default to 2\n    util.cores = 2;\n    return callback(null, util.cores);\n  }\n\n  // create worker concurrency estimation code as blob\n  var blobUrl = URL.createObjectURL(new Blob(['(',\n    function() {\n      self.addEventListener('message', function(e) {\n        // run worker for 4 ms\n        var st = Date.now();\n        var et = st + 4;\n        while(Date.now() < et);\n        self.postMessage({st: st, et: et});\n      });\n    }.toString(),\n  ')()'], {type: 'application/javascript'}));\n\n  // take 5 samples using 16 workers\n  sample([], 5, 16);\n\n  function sample(max, samples, numWorkers) {\n    if(samples === 0) {\n      // get overlap average\n      var avg = Math.floor(max.reduce(function(avg, x) {\n        return avg + x;\n      }, 0) / max.length);\n      util.cores = Math.max(1, avg);\n      URL.revokeObjectURL(blobUrl);\n      return callback(null, util.cores);\n    }\n    map(numWorkers, function(err, results) {\n      max.push(reduce(numWorkers, results));\n      sample(max, samples - 1, numWorkers);\n    });\n  }\n\n  function map(numWorkers, callback) {\n    var workers = [];\n    var results = [];\n    for(var i = 0; i < numWorkers; ++i) {\n      var worker = new Worker(blobUrl);\n      worker.addEventListener('message', function(e) {\n        results.push(e.data);\n        if(results.length === numWorkers) {\n          for(var i = 0; i < numWorkers; ++i) {\n            workers[i].terminate();\n          }\n          callback(null, results);\n        }\n      });\n      workers.push(worker);\n    }\n    for(var i = 0; i < numWorkers; ++i) {\n      workers[i].postMessage(i);\n    }\n  }\n\n  function reduce(numWorkers, results) {\n    // find overlapping time windows\n    var overlaps = [];\n    for(var n = 0; n < numWorkers; ++n) {\n      var r1 = results[n];\n      var overlap = overlaps[n] = [];\n      for(var i = 0; i < numWorkers; ++i) {\n        if(n === i) {\n          continue;\n        }\n        var r2 = results[i];\n        if((r1.st > r2.st && r1.st < r2.et) ||\n          (r2.st > r1.st && r2.st < r1.et)) {\n          overlap.push(i);\n        }\n      }\n    }\n    // get maximum overlaps ... don't include overlapping worker itself\n    // as the main JS process was also being scheduled during the work and\n    // would have to be subtracted from the estimate anyway\n    return overlaps.reduce(function(max, overlap) {\n      return Math.max(max, overlap.length);\n    }, 0);\n  }\n};\n","/**\n * Cross-browser support for logging in a web application.\n *\n * @author David I. Lehn <dlehn@digitalbazaar.com>\n *\n * Copyright (c) 2008-2013 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./util');\n\n/* LOG API */\nmodule.exports = forge.log = forge.log || {};\n\n/**\n * Application logging system.\n *\n * Each logger level available as it's own function of the form:\n *   forge.log.level(category, args...)\n * The category is an arbitrary string, and the args are the same as\n * Firebug's console.log API. By default the call will be output as:\n *   'LEVEL [category] <args[0]>, args[1], ...'\n * This enables proper % formatting via the first argument.\n * Each category is enabled by default but can be enabled or disabled with\n * the setCategoryEnabled() function.\n */\n// list of known levels\nforge.log.levels = [\n  'none', 'error', 'warning', 'info', 'debug', 'verbose', 'max'];\n// info on the levels indexed by name:\n//   index: level index\n//   name: uppercased display name\nvar sLevelInfo = {};\n// list of loggers\nvar sLoggers = [];\n/**\n * Standard console logger. If no console support is enabled this will\n * remain null. Check before using.\n */\nvar sConsoleLogger = null;\n\n// logger flags\n/**\n * Lock the level at the current value. Used in cases where user config may\n * set the level such that only critical messages are seen but more verbose\n * messages are needed for debugging or other purposes.\n */\nforge.log.LEVEL_LOCKED = (1 << 1);\n/**\n * Always call log function. By default, the logging system will check the\n * message level against logger.level before calling the log function. This\n * flag allows the function to do its own check.\n */\nforge.log.NO_LEVEL_CHECK = (1 << 2);\n/**\n * Perform message interpolation with the passed arguments. \"%\" style\n * fields in log messages will be replaced by arguments as needed. Some\n * loggers, such as Firebug, may do this automatically. The original log\n * message will be available as 'message' and the interpolated version will\n * be available as 'fullMessage'.\n */\nforge.log.INTERPOLATE = (1 << 3);\n\n// setup each log level\nfor(var i = 0; i < forge.log.levels.length; ++i) {\n  var level = forge.log.levels[i];\n  sLevelInfo[level] = {\n    index: i,\n    name: level.toUpperCase()\n  };\n}\n\n/**\n * Message logger. Will dispatch a message to registered loggers as needed.\n *\n * @param message message object\n */\nforge.log.logMessage = function(message) {\n  var messageLevelIndex = sLevelInfo[message.level].index;\n  for(var i = 0; i < sLoggers.length; ++i) {\n    var logger = sLoggers[i];\n    if(logger.flags & forge.log.NO_LEVEL_CHECK) {\n      logger.f(message);\n    } else {\n      // get logger level\n      var loggerLevelIndex = sLevelInfo[logger.level].index;\n      // check level\n      if(messageLevelIndex <= loggerLevelIndex) {\n        // message critical enough, call logger\n        logger.f(logger, message);\n      }\n    }\n  }\n};\n\n/**\n * Sets the 'standard' key on a message object to:\n * \"LEVEL [category] \" + message\n *\n * @param message a message log object\n */\nforge.log.prepareStandard = function(message) {\n  if(!('standard' in message)) {\n    message.standard =\n      sLevelInfo[message.level].name +\n      //' ' + +message.timestamp +\n      ' [' + message.category + '] ' +\n      message.message;\n  }\n};\n\n/**\n * Sets the 'full' key on a message object to the original message\n * interpolated via % formatting with the message arguments.\n *\n * @param message a message log object.\n */\nforge.log.prepareFull = function(message) {\n  if(!('full' in message)) {\n    // copy args and insert message at the front\n    var args = [message.message];\n    args = args.concat([] || message['arguments']);\n    // format the message\n    message.full = forge.util.format.apply(this, args);\n  }\n};\n\n/**\n * Applies both preparseStandard() and prepareFull() to a message object and\n * store result in 'standardFull'.\n *\n * @param message a message log object.\n */\nforge.log.prepareStandardFull = function(message) {\n  if(!('standardFull' in message)) {\n    // FIXME implement 'standardFull' logging\n    forge.log.prepareStandard(message);\n    message.standardFull = message.standard;\n  }\n};\n\n// create log level functions\nif(true) {\n  // levels for which we want functions\n  var levels = ['error', 'warning', 'info', 'debug', 'verbose'];\n  for(var i = 0; i < levels.length; ++i) {\n    // wrap in a function to ensure proper level var is passed\n    (function(level) {\n      // create function for this level\n      forge.log[level] = function(category, message/*, args...*/) {\n        // convert arguments to real array, remove category and message\n        var args = Array.prototype.slice.call(arguments).slice(2);\n        // create message object\n        // Note: interpolation and standard formatting is done lazily\n        var msg = {\n          timestamp: new Date(),\n          level: level,\n          category: category,\n          message: message,\n          'arguments': args\n          /*standard*/\n          /*full*/\n          /*fullMessage*/\n        };\n        // process this message\n        forge.log.logMessage(msg);\n      };\n    })(levels[i]);\n  }\n}\n\n/**\n * Creates a new logger with specified custom logging function.\n *\n * The logging function has a signature of:\n *   function(logger, message)\n * logger: current logger\n * message: object:\n *   level: level id\n *   category: category\n *   message: string message\n *   arguments: Array of extra arguments\n *   fullMessage: interpolated message and arguments if INTERPOLATE flag set\n *\n * @param logFunction a logging function which takes a log message object\n *          as a parameter.\n *\n * @return a logger object.\n */\nforge.log.makeLogger = function(logFunction) {\n  var logger = {\n    flags: 0,\n    f: logFunction\n  };\n  forge.log.setLevel(logger, 'none');\n  return logger;\n};\n\n/**\n * Sets the current log level on a logger.\n *\n * @param logger the target logger.\n * @param level the new maximum log level as a string.\n *\n * @return true if set, false if not.\n */\nforge.log.setLevel = function(logger, level) {\n  var rval = false;\n  if(logger && !(logger.flags & forge.log.LEVEL_LOCKED)) {\n    for(var i = 0; i < forge.log.levels.length; ++i) {\n      var aValidLevel = forge.log.levels[i];\n      if(level == aValidLevel) {\n        // set level\n        logger.level = level;\n        rval = true;\n        break;\n      }\n    }\n  }\n\n  return rval;\n};\n\n/**\n * Locks the log level at its current value.\n *\n * @param logger the target logger.\n * @param lock boolean lock value, default to true.\n */\nforge.log.lock = function(logger, lock) {\n  if(typeof lock === 'undefined' || lock) {\n    logger.flags |= forge.log.LEVEL_LOCKED;\n  } else {\n    logger.flags &= ~forge.log.LEVEL_LOCKED;\n  }\n};\n\n/**\n * Adds a logger.\n *\n * @param logger the logger object.\n */\nforge.log.addLogger = function(logger) {\n  sLoggers.push(logger);\n};\n\n// setup the console logger if possible, else create fake console.log\nif(typeof(console) !== 'undefined' && 'log' in console) {\n  var logger;\n  if(console.error && console.warn && console.info && console.debug) {\n    // looks like Firebug-style logging is available\n    // level handlers map\n    var levelHandlers = {\n      error: console.error,\n      warning: console.warn,\n      info: console.info,\n      debug: console.debug,\n      verbose: console.debug\n    };\n    var f = function(logger, message) {\n      forge.log.prepareStandard(message);\n      var handler = levelHandlers[message.level];\n      // prepend standard message and concat args\n      var args = [message.standard];\n      args = args.concat(message['arguments'].slice());\n      // apply to low-level console function\n      handler.apply(console, args);\n    };\n    logger = forge.log.makeLogger(f);\n  } else {\n    // only appear to have basic console.log\n    var f = function(logger, message) {\n      forge.log.prepareStandardFull(message);\n      console.log(message.standardFull);\n    };\n    logger = forge.log.makeLogger(f);\n  }\n  forge.log.setLevel(logger, 'debug');\n  forge.log.addLogger(logger);\n  sConsoleLogger = logger;\n} else {\n  // define fake console.log to avoid potential script errors on\n  // browsers that do not have console logging\n  console = {\n    log: function() {}\n  };\n}\n\n/*\n * Check for logging control query vars in current URL.\n *\n * console.level=<level-name>\n * Set's the console log level by name.  Useful to override defaults and\n * allow more verbose logging before a user config is loaded.\n *\n * console.lock=<true|false>\n * Lock the console log level at whatever level it is set at.  This is run\n * after console.level is processed.  Useful to force a level of verbosity\n * that could otherwise be limited by a user config.\n */\nif(sConsoleLogger !== null &&\n  typeof window !== 'undefined' && window.location\n) {\n  var query = new URL(window.location.href).searchParams;\n  if(query.has('console.level')) {\n    // set with last value\n    forge.log.setLevel(\n      sConsoleLogger, query.get('console.level').slice(-1)[0]);\n  }\n  if(query.has('console.lock')) {\n    // set with last value\n    var lock = query.get('console.lock').slice(-1)[0];\n    if(lock == 'true') {\n      forge.log.lock(sConsoleLogger);\n    }\n  }\n}\n\n// provide public access to console logger\nforge.log.consoleLogger = sConsoleLogger;\n","import \"dhtmlx-gantt/codebase/dhtmlxgantt.css\";\r\nimport { Gantt } from \"dhtmlx-gantt\";\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getDatabase, ref, set, get, child, update } from \"firebase/database\";\r\nimport { randomString, getPreviousKey, filterNonDollarFields, convertDataToString, convertStringToData, getNextKey } from \"./tools.js\";\r\nimport log from \"node-forge/lib/log.js\";\r\n\r\n/* gantt */\r\ngantt.config.xml_date = \"%Y-%m-%d %H:%i\";\r\ngantt.i18n.setLocale(\"cn\"); //\r\n//\r\ngantt.config.scales = [\r\n    { unit: \"day\", step: 1, format: \"%M %j, %D\" }\r\n];\r\ngantt.init(\"ganttHere\");\r\n\r\nconst firebase_prefix = \"gantt/\"\r\nconst global_panel_data_prefix = firebase_prefix + \"global_panel_data/\"\r\nvar firebaseConfig = null\r\n\r\n\r\nfunction initGlobalPanelData() {\r\n    /* global_panel_data */\r\n\r\n    // firebase\r\n    // console.log(firebaseConfig)\r\n    firebaseApp = initializeApp(firebaseConfig);\r\n    firebaseDatabase = getDatabase(firebaseApp);\r\n    // firebase\r\n    const global_panel_data_ref = ref(firebaseDatabase, global_panel_data_prefix);\r\n    get(global_panel_data_ref).then((snapshot) => {\r\n        const data = snapshot.val();\r\n        global_panel_data = data;\r\n        if (global_panel_data == null) {\r\n            global_panel_data = {}\r\n        }\r\n        //keyglobal_panel_data\r\n        for (const key of Object.keys(global_panel_data)) {\r\n            if (global_panel_data[key].data == undefined) {\r\n                global_panel_data[key].data = {}\r\n            } else {\r\n                global_panel_data[key].data = convertStringToData(global_panel_data[key].data);\r\n            }\r\n            if (global_panel_data[key].links == undefined) {\r\n                global_panel_data[key].links = {}\r\n            }\r\n        }\r\n\r\n        // \r\n        if (Object.keys(global_panel_data).length === 0) {\r\n            // \r\n            const default_panel_id = randomString(16);\r\n            global_panel_data[default_panel_id] = {\r\n                data: {},\r\n                links: {},\r\n                panel_name: \"\"\r\n            };\r\n            //\r\n            set(ref(firebaseDatabase, global_panel_data_prefix + default_panel_id), global_panel_data[default_panel_id]).then(() => {\r\n                console.log(\"\");\r\n            }).catch((error) => {\r\n                console.error(error);\r\n            });\r\n        }\r\n\r\n        // \r\n        for (const [key, value] of Object.entries(global_panel_data)) {\r\n            addFooterButton(key, value);\r\n        }\r\n        // \r\n        changeSelectedPanelButtonColor(Object.keys(global_panel_data)[0]);\r\n        // \r\n        loadDataInPanel(Object.keys(global_panel_data)[0]);\r\n\r\n\r\n    }).catch((error) => {\r\n        console.error(error);\r\n    });\r\n}\r\n\r\nfunction loadDataInPanel(panel_id) {\r\n    /* panel_idgantt */\r\n    gantt.clearAll();\r\n    gantt.parse(convertPanelData2Gantt(global_panel_data[panel_id]));\r\n}\r\n\r\n\r\n// \r\nfunction enableEdit(button) {\r\n    const saved_button_innerText = button.innerText;\r\n    button.setAttribute('contenteditable', 'true');\r\n    button.focus();\r\n    // \r\n    var selection = window.getSelection();\r\n\r\n    // \r\n    selection.removeAllRanges();\r\n\r\n    // \r\n    var range = document.createRange();\r\n\r\n    // \r\n    range.setStart(button, 0);\r\n    range.setEnd(button, button.childNodes.length);\r\n\r\n    // \r\n    selection.addRange(range);\r\n\r\n    // \r\n    button.addEventListener('keydown', function (event) {\r\n        // \r\n        if (event.keyCode === 13) {\r\n            finalize(button);\r\n            event.preventDefault();\r\n        }\r\n\r\n        // \r\n        if (event.keyCode === 8) {\r\n            button.innerHTML = '';\r\n        }\r\n    });\r\n\r\n    // \r\n    button.addEventListener('blur', function () {\r\n        finalize(button, saved_button_innerText);\r\n    });\r\n}\r\nfunction finalize(button, old_name) {\r\n    button.setAttribute('contenteditable', 'false');\r\n\r\n    if (button.innerHTML.trim() === '') {\r\n        button.innerHTML = old_name;\r\n    } else {\r\n        //global_panel_data\r\n        const panel_id = button.id.split(\"#\")[1];\r\n        if (global_panel_data[panel_id] != undefined) {\r\n            global_panel_data[panel_id].panel_name = button.innerHTML;\r\n            loadDataInPanel(panel_id);\r\n            //\r\n            const updates = {}\r\n            updates[global_panel_data_prefix + panel_id + \"/panel_name\"] = global_panel_data[panel_id].panel_name;\r\n            update(ref(firebaseDatabase), updates).then(() => {\r\n                console.log(\"\");\r\n            }).catch((error) => {\r\n                console.error(error);\r\n            });\r\n        }\r\n    }\r\n    button.removeEventListener('keydown', null);\r\n    button.removeEventListener('blur', null);\r\n}\r\n\r\n\r\nfunction addFooterButton(panel_id, panel_info) {\r\n    /*  */\r\n    const addBtn = document.getElementById(\"addBtn\");\r\n    const newBtn = document.createElement(\"button\");\r\n    newBtn.id = \"footerButton#\" + panel_id;\r\n    newBtn.className = \"dataBtn\";\r\n    newBtn.innerText = panel_info.panel_name;\r\n\r\n    //  addBtn \r\n    footer.insertBefore(newBtn, addBtn);\r\n\r\n    // \r\n    newBtn.addEventListener('dblclick', function () {\r\n        enableEdit(newBtn);\r\n        loadDataInPanel(panel_id);\r\n    });\r\n    // \r\n    newBtn.addEventListener('contextmenu', function (event) {\r\n        let previousPanelId = getPreviousKey(global_panel_data, panel_id);\r\n        let nextPanelId = getNextKey(global_panel_data, panel_id);\r\n        event.preventDefault();\r\n        const userConfirmed = confirm(\"\");\r\n        if (userConfirmed) {\r\n            //\r\n            delete global_panel_data[panel_id];\r\n            set(ref(firebaseDatabase, global_panel_data_prefix + panel_id), null).then(() => {\r\n                console.log(\"\");\r\n            }).catch((error) => {\r\n                console.error(error);\r\n            });\r\n\r\n            //\r\n            newBtn.remove();\r\n            // \r\n            if (previousPanelId === null && nextPanelId === null) {\r\n                insertEmptyDataPanel();\r\n            } else if (previousPanelId === null) {\r\n                loadDataInPanel(nextPanelId);\r\n                changeSelectedPanelButtonColor(nextPanelId);\r\n            } else {\r\n                loadDataInPanel(previousPanelId);\r\n                changeSelectedPanelButtonColor(previousPanelId);\r\n            }\r\n        }\r\n    });\r\n    // \r\n    newBtn.addEventListener('click', function () {\r\n        // \r\n        window.getSelection().removeAllRanges();\r\n        // \r\n        let panel_id = this.id.split(\"#\")[1];\r\n        loadDataInPanel(panel_id);\r\n        // \r\n        changeSelectedPanelButtonColor(panel_id);\r\n    });\r\n\r\n    // \r\n    newBtn.addEventListener('mouseover', function () {\r\n        // \r\n        const bgColor = getComputedStyle(newBtn).backgroundColor;\r\n\r\n        // \r\n        if (bgColor === 'transparent' || bgColor === 'rgba(0, 0, 0, 0)') {\r\n            // \r\n            newBtn.style.color = 'grey';\r\n        }\r\n    });\r\n\r\n    // \r\n    newBtn.addEventListener('mouseout', function () {\r\n        newBtn.style.color = ''; // \r\n    });\r\n}\r\n\r\nfunction changeSelectedPanelButtonColor(panel_id) {\r\n    /* idbutton\r\n       id\r\n    */\r\n    // footer\r\n    selected_panel_button_id = panel_id;\r\n    const footer = document.getElementById(\"footer\");\r\n    const footerBtns = footer.getElementsByTagName(\"button\");\r\n    for (let i = 0; i < footerBtns.length; i++) {\r\n        footerBtns[i].style.backgroundColor = \"transparent\";\r\n    }\r\n\r\n    const selectedBtn = document.getElementById(\"footerButton#\" + panel_id);\r\n    selectedBtn.style.backgroundColor = \"white\";\r\n}\r\n\r\nfunction insertEmptyDataPanel() {\r\n    /* gantt\r\n    global_panel_data\r\n    */\r\n    // ID\r\n    const new_panel_id = randomString(16);\r\n    const new_panel_data = {\r\n        data: {},\r\n        links: {},\r\n        panel_name: \"\"\r\n    };\r\n    global_panel_data[new_panel_id] = new_panel_data;\r\n    //\r\n    set(ref(firebaseDatabase, global_panel_data_prefix + new_panel_id), new_panel_data).then(() => {\r\n        console.log(\"\");\r\n    }).catch((error) => {\r\n        console.error(error);\r\n    });\r\n\r\n    //\r\n    addFooterButton(new_panel_id, new_panel_data);\r\n    //\r\n    changeSelectedPanelButtonColor(new_panel_id);\r\n    //\r\n    enableEdit(document.getElementById(\"footerButton#\" + new_panel_id));\r\n}\r\n\r\n\r\nfunction convertPanelData2Gantt(panel_data) {\r\n    /* panel_datagantt */\r\n    const gantt_data = {\r\n        data: [],\r\n        links: []\r\n    };\r\n    if (panel_data.data != undefined) {\r\n        for (const [key, value] of Object.entries(panel_data.data)) {\r\n            gantt_data.data.push(value);\r\n        }\r\n    }\r\n\r\n    if (panel_data.links != undefined) {\r\n        for (const [key, value] of Object.entries(panel_data.links)) {\r\n            gantt_data.links.push(value);\r\n        }\r\n    }\r\n    return gantt_data;\r\n}\r\n\r\n\r\nvar global_panel_data = {}\r\nvar selected_panel_button_id = null\r\nvar firebaseApp = null;\r\nvar firebaseDatabase = null;\r\n/* global_panel_data */\r\nwindow.addEventListener('firebaseConfigReady', function (e) {\r\n    firebaseConfig = e.detail;\r\n    console.log(\"firebaseConfigglobal_panel_data\")\r\n    initGlobalPanelData(global_panel_data);\r\n});\r\n\r\ngantt.attachEvent(\"onAfterTaskAdd\", function (id, task) {\r\n    /* task \r\n    id: id\r\n    start_date:  Sun Sep 10 2023 00:00:00 GMT+0800 (),\r\n    text:\r\n    duration: ,\r\n     parent: id\r\n    */\r\n    //selected_panel_button_idnull\r\n    task = filterNonDollarFields(task);\r\n    const panel_data = global_panel_data[selected_panel_button_id];\r\n    panel_data.data[id] = task;\r\n    //\r\n    task = convertDataToString(task);\r\n    set(ref(firebaseDatabase, global_panel_data_prefix + selected_panel_button_id + \"/data/\" + id), task).then(() => {\r\n        console.log(\"\");\r\n    }).catch((error) => {\r\n        console.error(error);\r\n    });\r\n});\r\n\r\ngantt.attachEvent(\"onAfterTaskUpdate\", function (id, task) {\r\n    task = filterNonDollarFields(task);\r\n    const panel_data = global_panel_data[selected_panel_button_id];\r\n    panel_data.data[id] = task;\r\n    //\r\n    task = convertDataToString(task);\r\n    set(ref(firebaseDatabase, global_panel_data_prefix + selected_panel_button_id + \"/data/\" + id), task).then(() => {\r\n        console.log(\"\");\r\n    }).catch((error) => {\r\n        console.error(error);\r\n    });\r\n});\r\n\r\ngantt.attachEvent(\"onAfterTaskDelete\", function (id) {\r\n    const panel_data = global_panel_data[selected_panel_button_id];\r\n    delete panel_data.data[id];\r\n    set(ref(firebaseDatabase, global_panel_data_prefix + selected_panel_button_id + \"/data/\" + id), null).then(() => {\r\n        console.log(\"\");\r\n    }).catch((error) => {\r\n        console.error(error);\r\n    });\r\n});\r\n\r\ngantt.attachEvent(\"onAfterLinkAdd\", function (id, link) {\r\n    link = filterNonDollarFields(link);\r\n    const panel_data = global_panel_data[selected_panel_button_id];\r\n    panel_data.links[id] = link;\r\n    set(ref(firebaseDatabase, global_panel_data_prefix + selected_panel_button_id + \"/links/\" + id), link).then(() => {\r\n        console.log(\"\");\r\n    }).catch((error) => {\r\n        console.error(error);\r\n    });\r\n});\r\n\r\ngantt.attachEvent(\"onAfterLinkUpdate\", function (id, link) {\r\n    link = filterNonDollarFields(link);\r\n    const panel_data = global_panel_data[selected_panel_button_id];\r\n    panel_data.links[id] = link;\r\n    set(ref(firebaseDatabase, global_panel_data_prefix + selected_panel_button_id + \"/links/\" + id), link).then(() => {\r\n        console.log(\"\");\r\n    }).catch((error) => {\r\n        console.error(error);\r\n    });\r\n});\r\n\r\ngantt.attachEvent(\"onAfterLinkDelete\", function (id) {\r\n    const panel_data = global_panel_data[selected_panel_button_id];\r\n    delete panel_data.links[id];\r\n    set(ref(firebaseDatabase, global_panel_data_prefix + selected_panel_button_id + \"/links/\" + id), null).then(() => {\r\n        console.log(\"\");\r\n    }).catch((error) => {\r\n        console.error(error);\r\n    });\r\n});\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    const footer = document.getElementById(\"footer\");\r\n    /* footer */\r\n    footer.addEventListener(\"wheel\", function (event) {\r\n        this.scrollLeft += (event.deltaY * 1); // 40\r\n        // \r\n        event.preventDefault();\r\n    });\r\n\r\n\r\n    /*  */\r\n    const addBtn = document.getElementById(\"addBtn\");\r\n\r\n    addBtn.addEventListener(\"click\", function () {\r\n        insertEmptyDataPanel();\r\n    });\r\n});"]}